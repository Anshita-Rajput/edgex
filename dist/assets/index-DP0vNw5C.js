function _mergeNamespaces(r,e){for(var t=0;t<e.length;t++){const _e=e[t];if(typeof _e!="string"&&!Array.isArray(_e)){for(const Te in _e)if(Te!=="default"&&!(Te in r)){const Ee=Object.getOwnPropertyDescriptor(_e,Te);Ee&&Object.defineProperty(r,Te,Ee.get?Ee:{enumerable:!0,get:()=>_e[Te]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const Te of document.querySelectorAll('link[rel="modulepreload"]'))_e(Te);new MutationObserver(Te=>{for(const Ee of Te)if(Ee.type==="childList")for(const xe of Ee.addedNodes)xe.tagName==="LINK"&&xe.rel==="modulepreload"&&_e(xe)}).observe(document,{childList:!0,subtree:!0});function t(Te){const Ee={};return Te.integrity&&(Ee.integrity=Te.integrity),Te.referrerPolicy&&(Ee.referrerPolicy=Te.referrerPolicy),Te.crossOrigin==="use-credentials"?Ee.credentials="include":Te.crossOrigin==="anonymous"?Ee.credentials="omit":Ee.credentials="same-origin",Ee}function _e(Te){if(Te.ep)return;Te.ep=!0;const Ee=t(Te);fetch(Te.href,Ee)}})();var commonjsGlobal$2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function getAugmentedNamespace(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function _e(){var Te=!1;try{Te=this instanceof _e}catch{}return Te?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(_e){var Te=Object.getOwnPropertyDescriptor(r,_e);Object.defineProperty(t,_e,Te.get?Te:{enumerable:!0,get:function(){return r[_e]}})}),t}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),_e=Symbol.for("react.strict_mode"),Te=Symbol.for("react.profiler"),Ee=Symbol.for("react.provider"),xe=Symbol.for("react.context"),Pe=Symbol.for("react.forward_ref"),Re=Symbol.for("react.suspense"),ke=Symbol.for("react.memo"),Ce=Symbol.for("react.lazy"),Se=Symbol.iterator;function Ae(Bn){return Bn===null||typeof Bn!="object"?null:(Bn=Se&&Bn[Se]||Bn["@@iterator"],typeof Bn=="function"?Bn:null)}var Ie={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Me=Object.assign,Fe={};function Ve(Bn,Tn,vn){this.props=Bn,this.context=Tn,this.refs=Fe,this.updater=vn||Ie}Ve.prototype.isReactComponent={},Ve.prototype.setState=function(Bn,Tn){if(typeof Bn!="object"&&typeof Bn!="function"&&Bn!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Bn,Tn,"setState")},Ve.prototype.forceUpdate=function(Bn){this.updater.enqueueForceUpdate(this,Bn,"forceUpdate")};function je(){}je.prototype=Ve.prototype;function Be(Bn,Tn,vn){this.props=Bn,this.context=Tn,this.refs=Fe,this.updater=vn||Ie}var qe=Be.prototype=new je;qe.constructor=Be,Me(qe,Ve.prototype),qe.isPureReactComponent=!0;var He=Array.isArray,Xe=Object.prototype.hasOwnProperty,Je={current:null},Qe={key:!0,ref:!0,__self:!0,__source:!0};function Ke(Bn,Tn,vn){var Un,zn={},Hn=null,Jn=null;if(Tn!=null)for(Un in Tn.ref!==void 0&&(Jn=Tn.ref),Tn.key!==void 0&&(Hn=""+Tn.key),Tn)Xe.call(Tn,Un)&&!Qe.hasOwnProperty(Un)&&(zn[Un]=Tn[Un]);var nr=arguments.length-2;if(nr===1)zn.children=vn;else if(1<nr){for(var or=Array(nr),Sr=0;Sr<nr;Sr++)or[Sr]=arguments[Sr+2];zn.children=or}if(Bn&&Bn.defaultProps)for(Un in nr=Bn.defaultProps,nr)zn[Un]===void 0&&(zn[Un]=nr[Un]);return{$$typeof:r,type:Bn,key:Hn,ref:Jn,props:zn,_owner:Je.current}}function Ye(Bn,Tn){return{$$typeof:r,type:Bn.type,key:Tn,ref:Bn.ref,props:Bn.props,_owner:Bn._owner}}function pn(Bn){return typeof Bn=="object"&&Bn!==null&&Bn.$$typeof===r}function un(Bn){var Tn={"=":"=0",":":"=2"};return"$"+Bn.replace(/[=:]/g,function(vn){return Tn[vn]})}var fn=/\/+/g;function mn(Bn,Tn){return typeof Bn=="object"&&Bn!==null&&Bn.key!=null?un(""+Bn.key):Tn.toString(36)}function wn(Bn,Tn,vn,Un,zn){var Hn=typeof Bn;(Hn==="undefined"||Hn==="boolean")&&(Bn=null);var Jn=!1;if(Bn===null)Jn=!0;else switch(Hn){case"string":case"number":Jn=!0;break;case"object":switch(Bn.$$typeof){case r:case e:Jn=!0}}if(Jn)return Jn=Bn,zn=zn(Jn),Bn=Un===""?"."+mn(Jn,0):Un,He(zn)?(vn="",Bn!=null&&(vn=Bn.replace(fn,"$&/")+"/"),wn(zn,Tn,vn,"",function(Sr){return Sr})):zn!=null&&(pn(zn)&&(zn=Ye(zn,vn+(!zn.key||Jn&&Jn.key===zn.key?"":(""+zn.key).replace(fn,"$&/")+"/")+Bn)),Tn.push(zn)),1;if(Jn=0,Un=Un===""?".":Un+":",He(Bn))for(var nr=0;nr<Bn.length;nr++){Hn=Bn[nr];var or=Un+mn(Hn,nr);Jn+=wn(Hn,Tn,vn,or,zn)}else if(or=Ae(Bn),typeof or=="function")for(Bn=or.call(Bn),nr=0;!(Hn=Bn.next()).done;)Hn=Hn.value,or=Un+mn(Hn,nr++),Jn+=wn(Hn,Tn,vn,or,zn);else if(Hn==="object")throw Tn=String(Bn),Error("Objects are not valid as a React child (found: "+(Tn==="[object Object]"?"object with keys {"+Object.keys(Bn).join(", ")+"}":Tn)+"). If you meant to render a collection of children, use an array instead.");return Jn}function Pn(Bn,Tn,vn){if(Bn==null)return Bn;var Un=[],zn=0;return wn(Bn,Un,"","",function(Hn){return Tn.call(vn,Hn,zn++)}),Un}function xn(Bn){if(Bn._status===-1){var Tn=Bn._result;Tn=Tn(),Tn.then(function(vn){(Bn._status===0||Bn._status===-1)&&(Bn._status=1,Bn._result=vn)},function(vn){(Bn._status===0||Bn._status===-1)&&(Bn._status=2,Bn._result=vn)}),Bn._status===-1&&(Bn._status=0,Bn._result=Tn)}if(Bn._status===1)return Bn._result.default;throw Bn._result}var In={current:null},Ln={transition:null},$n={ReactCurrentDispatcher:In,ReactCurrentBatchConfig:Ln,ReactCurrentOwner:Je};function Sn(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:Pn,forEach:function(Bn,Tn,vn){Pn(Bn,function(){Tn.apply(this,arguments)},vn)},count:function(Bn){var Tn=0;return Pn(Bn,function(){Tn++}),Tn},toArray:function(Bn){return Pn(Bn,function(Tn){return Tn})||[]},only:function(Bn){if(!pn(Bn))throw Error("React.Children.only expected to receive a single React element child.");return Bn}},react_production_min.Component=Ve,react_production_min.Fragment=t,react_production_min.Profiler=Te,react_production_min.PureComponent=Be,react_production_min.StrictMode=_e,react_production_min.Suspense=Re,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$n,react_production_min.act=Sn,react_production_min.cloneElement=function(Bn,Tn,vn){if(Bn==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Bn+".");var Un=Me({},Bn.props),zn=Bn.key,Hn=Bn.ref,Jn=Bn._owner;if(Tn!=null){if(Tn.ref!==void 0&&(Hn=Tn.ref,Jn=Je.current),Tn.key!==void 0&&(zn=""+Tn.key),Bn.type&&Bn.type.defaultProps)var nr=Bn.type.defaultProps;for(or in Tn)Xe.call(Tn,or)&&!Qe.hasOwnProperty(or)&&(Un[or]=Tn[or]===void 0&&nr!==void 0?nr[or]:Tn[or])}var or=arguments.length-2;if(or===1)Un.children=vn;else if(1<or){nr=Array(or);for(var Sr=0;Sr<or;Sr++)nr[Sr]=arguments[Sr+2];Un.children=nr}return{$$typeof:r,type:Bn.type,key:zn,ref:Hn,props:Un,_owner:Jn}},react_production_min.createContext=function(Bn){return Bn={$$typeof:xe,_currentValue:Bn,_currentValue2:Bn,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Bn.Provider={$$typeof:Ee,_context:Bn},Bn.Consumer=Bn},react_production_min.createElement=Ke,react_production_min.createFactory=function(Bn){var Tn=Ke.bind(null,Bn);return Tn.type=Bn,Tn},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(Bn){return{$$typeof:Pe,render:Bn}},react_production_min.isValidElement=pn,react_production_min.lazy=function(Bn){return{$$typeof:Ce,_payload:{_status:-1,_result:Bn},_init:xn}},react_production_min.memo=function(Bn,Tn){return{$$typeof:ke,type:Bn,compare:Tn===void 0?null:Tn}},react_production_min.startTransition=function(Bn){var Tn=Ln.transition;Ln.transition={};try{Bn()}finally{Ln.transition=Tn}},react_production_min.unstable_act=Sn,react_production_min.useCallback=function(Bn,Tn){return In.current.useCallback(Bn,Tn)},react_production_min.useContext=function(Bn){return In.current.useContext(Bn)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(Bn){return In.current.useDeferredValue(Bn)},react_production_min.useEffect=function(Bn,Tn){return In.current.useEffect(Bn,Tn)},react_production_min.useId=function(){return In.current.useId()},react_production_min.useImperativeHandle=function(Bn,Tn,vn){return In.current.useImperativeHandle(Bn,Tn,vn)},react_production_min.useInsertionEffect=function(Bn,Tn){return In.current.useInsertionEffect(Bn,Tn)},react_production_min.useLayoutEffect=function(Bn,Tn){return In.current.useLayoutEffect(Bn,Tn)},react_production_min.useMemo=function(Bn,Tn){return In.current.useMemo(Bn,Tn)},react_production_min.useReducer=function(Bn,Tn,vn){return In.current.useReducer(Bn,Tn,vn)},react_production_min.useRef=function(Bn){return In.current.useRef(Bn)},react_production_min.useState=function(Bn){return In.current.useState(Bn)},react_production_min.useSyncExternalStore=function(Bn,Tn,vn){return In.current.useSyncExternalStore(Bn,Tn,vn)},react_production_min.useTransition=function(){return In.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var r=requireReact(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),_e=Object.prototype.hasOwnProperty,Te=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ee={key:!0,ref:!0,__self:!0,__source:!0};function xe(Pe,Re,ke){var Ce,Se={},Ae=null,Ie=null;ke!==void 0&&(Ae=""+ke),Re.key!==void 0&&(Ae=""+Re.key),Re.ref!==void 0&&(Ie=Re.ref);for(Ce in Re)_e.call(Re,Ce)&&!Ee.hasOwnProperty(Ce)&&(Se[Ce]=Re[Ce]);if(Pe&&Pe.defaultProps)for(Ce in Re=Pe.defaultProps,Re)Se[Ce]===void 0&&(Se[Ce]=Re[Ce]);return{$$typeof:e,type:Pe,key:Ae,ref:Ie,props:Se,_owner:Te.current}}return reactJsxRuntime_production_min.Fragment=t,reactJsxRuntime_production_min.jsx=xe,reactJsxRuntime_production_min.jsxs=xe,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(r){function e(Ln,$n){var Sn=Ln.length;Ln.push($n);e:for(;0<Sn;){var Bn=Sn-1>>>1,Tn=Ln[Bn];if(0<Te(Tn,$n))Ln[Bn]=$n,Ln[Sn]=Tn,Sn=Bn;else break e}}function t(Ln){return Ln.length===0?null:Ln[0]}function _e(Ln){if(Ln.length===0)return null;var $n=Ln[0],Sn=Ln.pop();if(Sn!==$n){Ln[0]=Sn;e:for(var Bn=0,Tn=Ln.length,vn=Tn>>>1;Bn<vn;){var Un=2*(Bn+1)-1,zn=Ln[Un],Hn=Un+1,Jn=Ln[Hn];if(0>Te(zn,Sn))Hn<Tn&&0>Te(Jn,zn)?(Ln[Bn]=Jn,Ln[Hn]=Sn,Bn=Hn):(Ln[Bn]=zn,Ln[Un]=Sn,Bn=Un);else if(Hn<Tn&&0>Te(Jn,Sn))Ln[Bn]=Jn,Ln[Hn]=Sn,Bn=Hn;else break e}}return $n}function Te(Ln,$n){var Sn=Ln.sortIndex-$n.sortIndex;return Sn!==0?Sn:Ln.id-$n.id}if(typeof performance=="object"&&typeof performance.now=="function"){var Ee=performance;r.unstable_now=function(){return Ee.now()}}else{var xe=Date,Pe=xe.now();r.unstable_now=function(){return xe.now()-Pe}}var Re=[],ke=[],Ce=1,Se=null,Ae=3,Ie=!1,Me=!1,Fe=!1,Ve=typeof setTimeout=="function"?setTimeout:null,je=typeof clearTimeout=="function"?clearTimeout:null,Be=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function qe(Ln){for(var $n=t(ke);$n!==null;){if($n.callback===null)_e(ke);else if($n.startTime<=Ln)_e(ke),$n.sortIndex=$n.expirationTime,e(Re,$n);else break;$n=t(ke)}}function He(Ln){if(Fe=!1,qe(Ln),!Me)if(t(Re)!==null)Me=!0,xn(Xe);else{var $n=t(ke);$n!==null&&In(He,$n.startTime-Ln)}}function Xe(Ln,$n){Me=!1,Fe&&(Fe=!1,je(Ke),Ke=-1),Ie=!0;var Sn=Ae;try{for(qe($n),Se=t(Re);Se!==null&&(!(Se.expirationTime>$n)||Ln&&!un());){var Bn=Se.callback;if(typeof Bn=="function"){Se.callback=null,Ae=Se.priorityLevel;var Tn=Bn(Se.expirationTime<=$n);$n=r.unstable_now(),typeof Tn=="function"?Se.callback=Tn:Se===t(Re)&&_e(Re),qe($n)}else _e(Re);Se=t(Re)}if(Se!==null)var vn=!0;else{var Un=t(ke);Un!==null&&In(He,Un.startTime-$n),vn=!1}return vn}finally{Se=null,Ae=Sn,Ie=!1}}var Je=!1,Qe=null,Ke=-1,Ye=5,pn=-1;function un(){return!(r.unstable_now()-pn<Ye)}function fn(){if(Qe!==null){var Ln=r.unstable_now();pn=Ln;var $n=!0;try{$n=Qe(!0,Ln)}finally{$n?mn():(Je=!1,Qe=null)}}else Je=!1}var mn;if(typeof Be=="function")mn=function(){Be(fn)};else if(typeof MessageChannel<"u"){var wn=new MessageChannel,Pn=wn.port2;wn.port1.onmessage=fn,mn=function(){Pn.postMessage(null)}}else mn=function(){Ve(fn,0)};function xn(Ln){Qe=Ln,Je||(Je=!0,mn())}function In(Ln,$n){Ke=Ve(function(){Ln(r.unstable_now())},$n)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Ln){Ln.callback=null},r.unstable_continueExecution=function(){Me||Ie||(Me=!0,xn(Xe))},r.unstable_forceFrameRate=function(Ln){0>Ln||125<Ln?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ye=0<Ln?Math.floor(1e3/Ln):5},r.unstable_getCurrentPriorityLevel=function(){return Ae},r.unstable_getFirstCallbackNode=function(){return t(Re)},r.unstable_next=function(Ln){switch(Ae){case 1:case 2:case 3:var $n=3;break;default:$n=Ae}var Sn=Ae;Ae=$n;try{return Ln()}finally{Ae=Sn}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(Ln,$n){switch(Ln){case 1:case 2:case 3:case 4:case 5:break;default:Ln=3}var Sn=Ae;Ae=Ln;try{return $n()}finally{Ae=Sn}},r.unstable_scheduleCallback=function(Ln,$n,Sn){var Bn=r.unstable_now();switch(typeof Sn=="object"&&Sn!==null?(Sn=Sn.delay,Sn=typeof Sn=="number"&&0<Sn?Bn+Sn:Bn):Sn=Bn,Ln){case 1:var Tn=-1;break;case 2:Tn=250;break;case 5:Tn=1073741823;break;case 4:Tn=1e4;break;default:Tn=5e3}return Tn=Sn+Tn,Ln={id:Ce++,callback:$n,priorityLevel:Ln,startTime:Sn,expirationTime:Tn,sortIndex:-1},Sn>Bn?(Ln.sortIndex=Sn,e(ke,Ln),t(Re)===null&&Ln===t(ke)&&(Fe?(je(Ke),Ke=-1):Fe=!0,In(He,Sn-Bn))):(Ln.sortIndex=Tn,e(Re,Ln),Me||Ie||(Me=!0,xn(Xe))),Ln},r.unstable_shouldYield=un,r.unstable_wrapCallback=function(Ln){var $n=Ae;return function(){var Sn=Ae;Ae=$n;try{return Ln.apply(this,arguments)}finally{Ae=Sn}}}}(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var r=requireReact(),e=requireScheduler();function t(Oe){for(var De="https://reactjs.org/docs/error-decoder.html?invariant="+Oe,$e=1;$e<arguments.length;$e++)De+="&args[]="+encodeURIComponent(arguments[$e]);return"Minified React error #"+Oe+"; visit "+De+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _e=new Set,Te={};function Ee(Oe,De){xe(Oe,De),xe(Oe+"Capture",De)}function xe(Oe,De){for(Te[Oe]=De,Oe=0;Oe<De.length;Oe++)_e.add(De[Oe])}var Pe=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Re=Object.prototype.hasOwnProperty,ke=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ce={},Se={};function Ae(Oe){return Re.call(Se,Oe)?!0:Re.call(Ce,Oe)?!1:ke.test(Oe)?Se[Oe]=!0:(Ce[Oe]=!0,!1)}function Ie(Oe,De,$e,Ge){if($e!==null&&$e.type===0)return!1;switch(typeof De){case"function":case"symbol":return!0;case"boolean":return Ge?!1:$e!==null?!$e.acceptsBooleans:(Oe=Oe.toLowerCase().slice(0,5),Oe!=="data-"&&Oe!=="aria-");default:return!1}}function Me(Oe,De,$e,Ge){if(De===null||typeof De>"u"||Ie(Oe,De,$e,Ge))return!0;if(Ge)return!1;if($e!==null)switch($e.type){case 3:return!De;case 4:return De===!1;case 5:return isNaN(De);case 6:return isNaN(De)||1>De}return!1}function Fe(Oe,De,$e,Ge,dn,yn,On){this.acceptsBooleans=De===2||De===3||De===4,this.attributeName=Ge,this.attributeNamespace=dn,this.mustUseProperty=$e,this.propertyName=Oe,this.type=De,this.sanitizeURL=yn,this.removeEmptyString=On}var Ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(Oe){Ve[Oe]=new Fe(Oe,0,!1,Oe,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(Oe){var De=Oe[0];Ve[De]=new Fe(De,1,!1,Oe[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(Oe){Ve[Oe]=new Fe(Oe,2,!1,Oe.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(Oe){Ve[Oe]=new Fe(Oe,2,!1,Oe,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(Oe){Ve[Oe]=new Fe(Oe,3,!1,Oe.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(Oe){Ve[Oe]=new Fe(Oe,3,!0,Oe,null,!1,!1)}),["capture","download"].forEach(function(Oe){Ve[Oe]=new Fe(Oe,4,!1,Oe,null,!1,!1)}),["cols","rows","size","span"].forEach(function(Oe){Ve[Oe]=new Fe(Oe,6,!1,Oe,null,!1,!1)}),["rowSpan","start"].forEach(function(Oe){Ve[Oe]=new Fe(Oe,5,!1,Oe.toLowerCase(),null,!1,!1)});var je=/[\-:]([a-z])/g;function Be(Oe){return Oe[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(Oe){var De=Oe.replace(je,Be);Ve[De]=new Fe(De,1,!1,Oe,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(Oe){var De=Oe.replace(je,Be);Ve[De]=new Fe(De,1,!1,Oe,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(Oe){var De=Oe.replace(je,Be);Ve[De]=new Fe(De,1,!1,Oe,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(Oe){Ve[Oe]=new Fe(Oe,1,!1,Oe.toLowerCase(),null,!1,!1)}),Ve.xlinkHref=new Fe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(Oe){Ve[Oe]=new Fe(Oe,1,!1,Oe.toLowerCase(),null,!0,!0)});function qe(Oe,De,$e,Ge){var dn=Ve.hasOwnProperty(De)?Ve[De]:null;(dn!==null?dn.type!==0:Ge||!(2<De.length)||De[0]!=="o"&&De[0]!=="O"||De[1]!=="n"&&De[1]!=="N")&&(Me(De,$e,dn,Ge)&&($e=null),Ge||dn===null?Ae(De)&&($e===null?Oe.removeAttribute(De):Oe.setAttribute(De,""+$e)):dn.mustUseProperty?Oe[dn.propertyName]=$e===null?dn.type===3?!1:"":$e:(De=dn.attributeName,Ge=dn.attributeNamespace,$e===null?Oe.removeAttribute(De):(dn=dn.type,$e=dn===3||dn===4&&$e===!0?"":""+$e,Ge?Oe.setAttributeNS(Ge,De,$e):Oe.setAttribute(De,$e))))}var He=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xe=Symbol.for("react.element"),Je=Symbol.for("react.portal"),Qe=Symbol.for("react.fragment"),Ke=Symbol.for("react.strict_mode"),Ye=Symbol.for("react.profiler"),pn=Symbol.for("react.provider"),un=Symbol.for("react.context"),fn=Symbol.for("react.forward_ref"),mn=Symbol.for("react.suspense"),wn=Symbol.for("react.suspense_list"),Pn=Symbol.for("react.memo"),xn=Symbol.for("react.lazy"),In=Symbol.for("react.offscreen"),Ln=Symbol.iterator;function $n(Oe){return Oe===null||typeof Oe!="object"?null:(Oe=Ln&&Oe[Ln]||Oe["@@iterator"],typeof Oe=="function"?Oe:null)}var Sn=Object.assign,Bn;function Tn(Oe){if(Bn===void 0)try{throw Error()}catch($e){var De=$e.stack.trim().match(/\n( *(at )?)/);Bn=De&&De[1]||""}return`
`+Bn+Oe}var vn=!1;function Un(Oe,De){if(!Oe||vn)return"";vn=!0;var $e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(De)if(De=function(){throw Error()},Object.defineProperty(De.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(De,[])}catch(Ar){var Ge=Ar}Reflect.construct(Oe,[],De)}else{try{De.call()}catch(Ar){Ge=Ar}Oe.call(De.prototype)}else{try{throw Error()}catch(Ar){Ge=Ar}Oe()}}catch(Ar){if(Ar&&Ge&&typeof Ar.stack=="string"){for(var dn=Ar.stack.split(`
`),yn=Ge.stack.split(`
`),On=dn.length-1,Xn=yn.length-1;1<=On&&0<=Xn&&dn[On]!==yn[Xn];)Xn--;for(;1<=On&&0<=Xn;On--,Xn--)if(dn[On]!==yn[Xn]){if(On!==1||Xn!==1)do if(On--,Xn--,0>Xn||dn[On]!==yn[Xn]){var rr=`
`+dn[On].replace(" at new "," at ");return Oe.displayName&&rr.includes("<anonymous>")&&(rr=rr.replace("<anonymous>",Oe.displayName)),rr}while(1<=On&&0<=Xn);break}}}finally{vn=!1,Error.prepareStackTrace=$e}return(Oe=Oe?Oe.displayName||Oe.name:"")?Tn(Oe):""}function zn(Oe){switch(Oe.tag){case 5:return Tn(Oe.type);case 16:return Tn("Lazy");case 13:return Tn("Suspense");case 19:return Tn("SuspenseList");case 0:case 2:case 15:return Oe=Un(Oe.type,!1),Oe;case 11:return Oe=Un(Oe.type.render,!1),Oe;case 1:return Oe=Un(Oe.type,!0),Oe;default:return""}}function Hn(Oe){if(Oe==null)return null;if(typeof Oe=="function")return Oe.displayName||Oe.name||null;if(typeof Oe=="string")return Oe;switch(Oe){case Qe:return"Fragment";case Je:return"Portal";case Ye:return"Profiler";case Ke:return"StrictMode";case mn:return"Suspense";case wn:return"SuspenseList"}if(typeof Oe=="object")switch(Oe.$$typeof){case un:return(Oe.displayName||"Context")+".Consumer";case pn:return(Oe._context.displayName||"Context")+".Provider";case fn:var De=Oe.render;return Oe=Oe.displayName,Oe||(Oe=De.displayName||De.name||"",Oe=Oe!==""?"ForwardRef("+Oe+")":"ForwardRef"),Oe;case Pn:return De=Oe.displayName||null,De!==null?De:Hn(Oe.type)||"Memo";case xn:De=Oe._payload,Oe=Oe._init;try{return Hn(Oe(De))}catch{}}return null}function Jn(Oe){var De=Oe.type;switch(Oe.tag){case 24:return"Cache";case 9:return(De.displayName||"Context")+".Consumer";case 10:return(De._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return Oe=De.render,Oe=Oe.displayName||Oe.name||"",De.displayName||(Oe!==""?"ForwardRef("+Oe+")":"ForwardRef");case 7:return"Fragment";case 5:return De;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hn(De);case 8:return De===Ke?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof De=="function")return De.displayName||De.name||null;if(typeof De=="string")return De}return null}function nr(Oe){switch(typeof Oe){case"boolean":case"number":case"string":case"undefined":return Oe;case"object":return Oe;default:return""}}function or(Oe){var De=Oe.type;return(Oe=Oe.nodeName)&&Oe.toLowerCase()==="input"&&(De==="checkbox"||De==="radio")}function Sr(Oe){var De=or(Oe)?"checked":"value",$e=Object.getOwnPropertyDescriptor(Oe.constructor.prototype,De),Ge=""+Oe[De];if(!Oe.hasOwnProperty(De)&&typeof $e<"u"&&typeof $e.get=="function"&&typeof $e.set=="function"){var dn=$e.get,yn=$e.set;return Object.defineProperty(Oe,De,{configurable:!0,get:function(){return dn.call(this)},set:function(On){Ge=""+On,yn.call(this,On)}}),Object.defineProperty(Oe,De,{enumerable:$e.enumerable}),{getValue:function(){return Ge},setValue:function(On){Ge=""+On},stopTracking:function(){Oe._valueTracker=null,delete Oe[De]}}}}function kr(Oe){Oe._valueTracker||(Oe._valueTracker=Sr(Oe))}function Vr(Oe){if(!Oe)return!1;var De=Oe._valueTracker;if(!De)return!0;var $e=De.getValue(),Ge="";return Oe&&(Ge=or(Oe)?Oe.checked?"true":"false":Oe.value),Oe=Ge,Oe!==$e?(De.setValue(Oe),!0):!1}function Lr(Oe){if(Oe=Oe||(typeof document<"u"?document:void 0),typeof Oe>"u")return null;try{return Oe.activeElement||Oe.body}catch{return Oe.body}}function Qr(Oe,De){var $e=De.checked;return Sn({},De,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:$e??Oe._wrapperState.initialChecked})}function wr(Oe,De){var $e=De.defaultValue==null?"":De.defaultValue,Ge=De.checked!=null?De.checked:De.defaultChecked;$e=nr(De.value!=null?De.value:$e),Oe._wrapperState={initialChecked:Ge,initialValue:$e,controlled:De.type==="checkbox"||De.type==="radio"?De.checked!=null:De.value!=null}}function Yn(Oe,De){De=De.checked,De!=null&&qe(Oe,"checked",De,!1)}function gi(Oe,De){Yn(Oe,De);var $e=nr(De.value),Ge=De.type;if($e!=null)Ge==="number"?($e===0&&Oe.value===""||Oe.value!=$e)&&(Oe.value=""+$e):Oe.value!==""+$e&&(Oe.value=""+$e);else if(Ge==="submit"||Ge==="reset"){Oe.removeAttribute("value");return}De.hasOwnProperty("value")?Dr(Oe,De.type,$e):De.hasOwnProperty("defaultValue")&&Dr(Oe,De.type,nr(De.defaultValue)),De.checked==null&&De.defaultChecked!=null&&(Oe.defaultChecked=!!De.defaultChecked)}function ui(Oe,De,$e){if(De.hasOwnProperty("value")||De.hasOwnProperty("defaultValue")){var Ge=De.type;if(!(Ge!=="submit"&&Ge!=="reset"||De.value!==void 0&&De.value!==null))return;De=""+Oe._wrapperState.initialValue,$e||De===Oe.value||(Oe.value=De),Oe.defaultValue=De}$e=Oe.name,$e!==""&&(Oe.name=""),Oe.defaultChecked=!!Oe._wrapperState.initialChecked,$e!==""&&(Oe.name=$e)}function Dr(Oe,De,$e){(De!=="number"||Lr(Oe.ownerDocument)!==Oe)&&($e==null?Oe.defaultValue=""+Oe._wrapperState.initialValue:Oe.defaultValue!==""+$e&&(Oe.defaultValue=""+$e))}var $r=Array.isArray;function Kr(Oe,De,$e,Ge){if(Oe=Oe.options,De){De={};for(var dn=0;dn<$e.length;dn++)De["$"+$e[dn]]=!0;for($e=0;$e<Oe.length;$e++)dn=De.hasOwnProperty("$"+Oe[$e].value),Oe[$e].selected!==dn&&(Oe[$e].selected=dn),dn&&Ge&&(Oe[$e].defaultSelected=!0)}else{for($e=""+nr($e),De=null,dn=0;dn<Oe.length;dn++){if(Oe[dn].value===$e){Oe[dn].selected=!0,Ge&&(Oe[dn].defaultSelected=!0);return}De!==null||Oe[dn].disabled||(De=Oe[dn])}De!==null&&(De.selected=!0)}}function Fr(Oe,De){if(De.dangerouslySetInnerHTML!=null)throw Error(t(91));return Sn({},De,{value:void 0,defaultValue:void 0,children:""+Oe._wrapperState.initialValue})}function li(Oe,De){var $e=De.value;if($e==null){if($e=De.children,De=De.defaultValue,$e!=null){if(De!=null)throw Error(t(92));if($r($e)){if(1<$e.length)throw Error(t(93));$e=$e[0]}De=$e}De==null&&(De=""),$e=De}Oe._wrapperState={initialValue:nr($e)}}function yi(Oe,De){var $e=nr(De.value),Ge=nr(De.defaultValue);$e!=null&&($e=""+$e,$e!==Oe.value&&(Oe.value=$e),De.defaultValue==null&&Oe.defaultValue!==$e&&(Oe.defaultValue=$e)),Ge!=null&&(Oe.defaultValue=""+Ge)}function ei(Oe){var De=Oe.textContent;De===Oe._wrapperState.initialValue&&De!==""&&De!==null&&(Oe.value=De)}function fr(Oe){switch(Oe){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pr(Oe,De){return Oe==null||Oe==="http://www.w3.org/1999/xhtml"?fr(De):Oe==="http://www.w3.org/2000/svg"&&De==="foreignObject"?"http://www.w3.org/1999/xhtml":Oe}var ti,Gr=function(Oe){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(De,$e,Ge,dn){MSApp.execUnsafeLocalFunction(function(){return Oe(De,$e,Ge,dn)})}:Oe}(function(Oe,De){if(Oe.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in Oe)Oe.innerHTML=De;else{for(ti=ti||document.createElement("div"),ti.innerHTML="<svg>"+De.valueOf().toString()+"</svg>",De=ti.firstChild;Oe.firstChild;)Oe.removeChild(Oe.firstChild);for(;De.firstChild;)Oe.appendChild(De.firstChild)}});function oi(Oe,De){if(De){var $e=Oe.firstChild;if($e&&$e===Oe.lastChild&&$e.nodeType===3){$e.nodeValue=De;return}}Oe.textContent=De}var Wr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ci=["Webkit","ms","Moz","O"];Object.keys(Wr).forEach(function(Oe){Ci.forEach(function(De){De=De+Oe.charAt(0).toUpperCase()+Oe.substring(1),Wr[De]=Wr[Oe]})});function xi(Oe,De,$e){return De==null||typeof De=="boolean"||De===""?"":$e||typeof De!="number"||De===0||Wr.hasOwnProperty(Oe)&&Wr[Oe]?(""+De).trim():De+"px"}function fi(Oe,De){Oe=Oe.style;for(var $e in De)if(De.hasOwnProperty($e)){var Ge=$e.indexOf("--")===0,dn=xi($e,De[$e],Ge);$e==="float"&&($e="cssFloat"),Ge?Oe.setProperty($e,dn):Oe[$e]=dn}}var Di=Sn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ni(Oe,De){if(De){if(Di[Oe]&&(De.children!=null||De.dangerouslySetInnerHTML!=null))throw Error(t(137,Oe));if(De.dangerouslySetInnerHTML!=null){if(De.children!=null)throw Error(t(60));if(typeof De.dangerouslySetInnerHTML!="object"||!("__html"in De.dangerouslySetInnerHTML))throw Error(t(61))}if(De.style!=null&&typeof De.style!="object")throw Error(t(62))}}function As(Oe,De){if(Oe.indexOf("-")===-1)return typeof De.is=="string";switch(Oe){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ti=null;function Bi(Oe){return Oe=Oe.target||Oe.srcElement||window,Oe.correspondingUseElement&&(Oe=Oe.correspondingUseElement),Oe.nodeType===3?Oe.parentNode:Oe}var Qi=null,vs=null,Ss=null;function di(Oe){if(Oe=Tu(Oe)){if(typeof Qi!="function")throw Error(t(280));var De=Oe.stateNode;De&&(De=Wu(De),Qi(Oe.stateNode,Oe.type,De))}}function Ur(Oe){vs?Ss?Ss.push(Oe):Ss=[Oe]:vs=Oe}function ni(){if(vs){var Oe=vs,De=Ss;if(Ss=vs=null,di(Oe),De)for(Oe=0;Oe<De.length;Oe++)di(De[Oe])}}function ro(Oe,De){return Oe(De)}function ps(){}var Os=!1;function Hs(Oe,De,$e){if(Os)return Oe(De,$e);Os=!0;try{return ro(Oe,De,$e)}finally{Os=!1,(vs!==null||Ss!==null)&&(ps(),ni())}}function ci(Oe,De){var $e=Oe.stateNode;if($e===null)return null;var Ge=Wu($e);if(Ge===null)return null;$e=Ge[De];e:switch(De){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Ge=!Ge.disabled)||(Oe=Oe.type,Ge=!(Oe==="button"||Oe==="input"||Oe==="select"||Oe==="textarea")),Oe=!Ge;break e;default:Oe=!1}if(Oe)return null;if($e&&typeof $e!="function")throw Error(t(231,De,typeof $e));return $e}var Vs=!1;if(Pe)try{var Ps={};Object.defineProperty(Ps,"passive",{get:function(){Vs=!0}}),window.addEventListener("test",Ps,Ps),window.removeEventListener("test",Ps,Ps)}catch{Vs=!1}function Is(Oe,De,$e,Ge,dn,yn,On,Xn,rr){var Ar=Array.prototype.slice.call(arguments,3);try{De.apply($e,Ar)}catch(qr){this.onError(qr)}}var ss=!1,os=null,ms=!1,vo=null,co={onError:function(Oe){ss=!0,os=Oe}};function js(Oe,De,$e,Ge,dn,yn,On,Xn,rr){ss=!1,os=null,Is.apply(co,arguments)}function Vn(Oe,De,$e,Ge,dn,yn,On,Xn,rr){if(js.apply(this,arguments),ss){if(ss){var Ar=os;ss=!1,os=null}else throw Error(t(198));ms||(ms=!0,vo=Ar)}}function Kn(Oe){var De=Oe,$e=Oe;if(Oe.alternate)for(;De.return;)De=De.return;else{Oe=De;do De=Oe,(De.flags&4098)!==0&&($e=De.return),Oe=De.return;while(Oe)}return De.tag===3?$e:null}function er(Oe){if(Oe.tag===13){var De=Oe.memoizedState;if(De===null&&(Oe=Oe.alternate,Oe!==null&&(De=Oe.memoizedState)),De!==null)return De.dehydrated}return null}function lr(Oe){if(Kn(Oe)!==Oe)throw Error(t(188))}function gr(Oe){var De=Oe.alternate;if(!De){if(De=Kn(Oe),De===null)throw Error(t(188));return De!==Oe?null:Oe}for(var $e=Oe,Ge=De;;){var dn=$e.return;if(dn===null)break;var yn=dn.alternate;if(yn===null){if(Ge=dn.return,Ge!==null){$e=Ge;continue}break}if(dn.child===yn.child){for(yn=dn.child;yn;){if(yn===$e)return lr(dn),Oe;if(yn===Ge)return lr(dn),De;yn=yn.sibling}throw Error(t(188))}if($e.return!==Ge.return)$e=dn,Ge=yn;else{for(var On=!1,Xn=dn.child;Xn;){if(Xn===$e){On=!0,$e=dn,Ge=yn;break}if(Xn===Ge){On=!0,Ge=dn,$e=yn;break}Xn=Xn.sibling}if(!On){for(Xn=yn.child;Xn;){if(Xn===$e){On=!0,$e=yn,Ge=dn;break}if(Xn===Ge){On=!0,Ge=yn,$e=dn;break}Xn=Xn.sibling}if(!On)throw Error(t(189))}}if($e.alternate!==Ge)throw Error(t(190))}if($e.tag!==3)throw Error(t(188));return $e.stateNode.current===$e?Oe:De}function xr(Oe){return Oe=gr(Oe),Oe!==null?Hr(Oe):null}function Hr(Oe){if(Oe.tag===5||Oe.tag===6)return Oe;for(Oe=Oe.child;Oe!==null;){var De=Hr(Oe);if(De!==null)return De;Oe=Oe.sibling}return null}var pi=e.unstable_scheduleCallback,ri=e.unstable_cancelCallback,Ii=e.unstable_shouldYield,Yi=e.unstable_requestPaint,Li=e.unstable_now,Rs=e.unstable_getCurrentPriorityLevel,Er=e.unstable_ImmediatePriority,Oi=e.unstable_UserBlockingPriority,Wi=e.unstable_NormalPriority,$s=e.unstable_LowPriority,wo=e.unstable_IdlePriority,Wo=null,io=null;function ma(Oe){if(io&&typeof io.onCommitFiberRoot=="function")try{io.onCommitFiberRoot(Wo,Oe,void 0,(Oe.current.flags&128)===128)}catch{}}var ts=Math.clz32?Math.clz32:Ha,us=Math.log,Wa=Math.LN2;function Ha(Oe){return Oe>>>=0,Oe===0?32:31-(us(Oe)/Wa|0)|0}var ga=64,ya=4194304;function ba(Oe){switch(Oe&-Oe){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return Oe&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return Oe&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return Oe}}function Bs(Oe,De){var $e=Oe.pendingLanes;if($e===0)return 0;var Ge=0,dn=Oe.suspendedLanes,yn=Oe.pingedLanes,On=$e&268435455;if(On!==0){var Xn=On&~dn;Xn!==0?Ge=ba(Xn):(yn&=On,yn!==0&&(Ge=ba(yn)))}else On=$e&~dn,On!==0?Ge=ba(On):yn!==0&&(Ge=ba(yn));if(Ge===0)return 0;if(De!==0&&De!==Ge&&(De&dn)===0&&(dn=Ge&-Ge,yn=De&-De,dn>=yn||dn===16&&(yn&4194240)!==0))return De;if((Ge&4)!==0&&(Ge|=$e&16),De=Oe.entangledLanes,De!==0)for(Oe=Oe.entanglements,De&=Ge;0<De;)$e=31-ts(De),dn=1<<$e,Ge|=Oe[$e],De&=~dn;return Ge}function va(Oe,De){switch(Oe){case 1:case 2:case 4:return De+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return De+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ks(Oe,De){for(var $e=Oe.suspendedLanes,Ge=Oe.pingedLanes,dn=Oe.expirationTimes,yn=Oe.pendingLanes;0<yn;){var On=31-ts(yn),Xn=1<<On,rr=dn[On];rr===-1?((Xn&$e)===0||(Xn&Ge)!==0)&&(dn[On]=va(Xn,De)):rr<=De&&(Oe.expiredLanes|=Xn),yn&=~Xn}}function Ks(Oe){return Oe=Oe.pendingLanes&-1073741825,Oe!==0?Oe:Oe&1073741824?1073741824:0}function na(){var Oe=ga;return ga<<=1,(ga&4194240)===0&&(ga=64),Oe}function ra(Oe){for(var De=[],$e=0;31>$e;$e++)De.push(Oe);return De}function To(Oe,De,$e){Oe.pendingLanes|=De,De!==536870912&&(Oe.suspendedLanes=0,Oe.pingedLanes=0),Oe=Oe.eventTimes,De=31-ts(De),Oe[De]=$e}function ns(Oe,De){var $e=Oe.pendingLanes&~De;Oe.pendingLanes=De,Oe.suspendedLanes=0,Oe.pingedLanes=0,Oe.expiredLanes&=De,Oe.mutableReadLanes&=De,Oe.entangledLanes&=De,De=Oe.entanglements;var Ge=Oe.eventTimes;for(Oe=Oe.expirationTimes;0<$e;){var dn=31-ts($e),yn=1<<dn;De[dn]=0,Ge[dn]=-1,Oe[dn]=-1,$e&=~yn}}function Ho(Oe,De){var $e=Oe.entangledLanes|=De;for(Oe=Oe.entanglements;$e;){var Ge=31-ts($e),dn=1<<Ge;dn&De|Oe[Ge]&De&&(Oe[Ge]|=De),$e&=~dn}}var Hi=0;function Mo(Oe){return Oe&=-Oe,1<Oe?4<Oe?(Oe&268435455)!==0?16:536870912:4:1}var Ui,Ma,Fi,Si,ia,No=!1,Eo=[],Ji=null,xo=null,ho=null,Ei=new Map,fo=new Map,Lo=[],Do="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ka(Oe,De){switch(Oe){case"focusin":case"focusout":Ji=null;break;case"dragenter":case"dragleave":xo=null;break;case"mouseover":case"mouseout":ho=null;break;case"pointerover":case"pointerout":Ei.delete(De.pointerId);break;case"gotpointercapture":case"lostpointercapture":fo.delete(De.pointerId)}}function Ys(Oe,De,$e,Ge,dn,yn){return Oe===null||Oe.nativeEvent!==yn?(Oe={blockedOn:De,domEventName:$e,eventSystemFlags:Ge,nativeEvent:yn,targetContainers:[dn]},De!==null&&(De=Tu(De),De!==null&&Ma(De)),Oe):(Oe.eventSystemFlags|=Ge,De=Oe.targetContainers,dn!==null&&De.indexOf(dn)===-1&&De.push(dn),Oe)}function Na(Oe,De,$e,Ge,dn){switch(De){case"focusin":return Ji=Ys(Ji,Oe,De,$e,Ge,dn),!0;case"dragenter":return xo=Ys(xo,Oe,De,$e,Ge,dn),!0;case"mouseover":return ho=Ys(ho,Oe,De,$e,Ge,dn),!0;case"pointerover":var yn=dn.pointerId;return Ei.set(yn,Ys(Ei.get(yn)||null,Oe,De,$e,Ge,dn)),!0;case"gotpointercapture":return yn=dn.pointerId,fo.set(yn,Ys(fo.get(yn)||null,Oe,De,$e,Ge,dn)),!0}return!1}function La(Oe){var De=Dl(Oe.target);if(De!==null){var $e=Kn(De);if($e!==null){if(De=$e.tag,De===13){if(De=er($e),De!==null){Oe.blockedOn=De,ia(Oe.priority,function(){Fi($e)});return}}else if(De===3&&$e.stateNode.current.memoizedState.isDehydrated){Oe.blockedOn=$e.tag===3?$e.stateNode.containerInfo:null;return}}}Oe.blockedOn=null}function An(Oe){if(Oe.blockedOn!==null)return!1;for(var De=Oe.targetContainers;0<De.length;){var $e=Xs(Oe.domEventName,Oe.eventSystemFlags,De[0],Oe.nativeEvent);if($e===null){$e=Oe.nativeEvent;var Ge=new $e.constructor($e.type,$e);Ti=Ge,$e.target.dispatchEvent(Ge),Ti=null}else return De=Tu($e),De!==null&&Ma(De),Oe.blockedOn=$e,!1;De.shift()}return!0}function Nn(Oe,De,$e){An(Oe)&&$e.delete(De)}function Gn(){No=!1,Ji!==null&&An(Ji)&&(Ji=null),xo!==null&&An(xo)&&(xo=null),ho!==null&&An(ho)&&(ho=null),Ei.forEach(Nn),fo.forEach(Nn)}function Qn(Oe,De){Oe.blockedOn===De&&(Oe.blockedOn=null,No||(No=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Gn)))}function hr(Oe){function De(dn){return Qn(dn,Oe)}if(0<Eo.length){Qn(Eo[0],Oe);for(var $e=1;$e<Eo.length;$e++){var Ge=Eo[$e];Ge.blockedOn===Oe&&(Ge.blockedOn=null)}}for(Ji!==null&&Qn(Ji,Oe),xo!==null&&Qn(xo,Oe),ho!==null&&Qn(ho,Oe),Ei.forEach(De),fo.forEach(De),$e=0;$e<Lo.length;$e++)Ge=Lo[$e],Ge.blockedOn===Oe&&(Ge.blockedOn=null);for(;0<Lo.length&&($e=Lo[0],$e.blockedOn===null);)La($e),$e.blockedOn===null&&Lo.shift()}var vr=He.ReactCurrentBatchConfig,Yr=!0;function Jr(Oe,De,$e,Ge){var dn=Hi,yn=vr.transition;vr.transition=null;try{Hi=1,Mi(Oe,De,$e,Ge)}finally{Hi=dn,vr.transition=yn}}function Vi(Oe,De,$e,Ge){var dn=Hi,yn=vr.transition;vr.transition=null;try{Hi=4,Mi(Oe,De,$e,Ge)}finally{Hi=dn,vr.transition=yn}}function Mi(Oe,De,$e,Ge){if(Yr){var dn=Xs(Oe,De,$e,Ge);if(dn===null)zu(Oe,De,Ge,es,$e),Ka(Oe,Ge);else if(Na(dn,Oe,De,$e,Ge))Ge.stopPropagation();else if(Ka(Oe,Ge),De&4&&-1<Do.indexOf(Oe)){for(;dn!==null;){var yn=Tu(dn);if(yn!==null&&Ui(yn),yn=Xs(Oe,De,$e,Ge),yn===null&&zu(Oe,De,Ge,es,$e),yn===dn)break;dn=yn}dn!==null&&Ge.stopPropagation()}else zu(Oe,De,Ge,null,$e)}}var es=null;function Xs(Oe,De,$e,Ge){if(es=null,Oe=Bi(Ge),Oe=Dl(Oe),Oe!==null)if(De=Kn(Oe),De===null)Oe=null;else if($e=De.tag,$e===13){if(Oe=er(De),Oe!==null)return Oe;Oe=null}else if($e===3){if(De.stateNode.current.memoizedState.isDehydrated)return De.tag===3?De.stateNode.containerInfo:null;Oe=null}else De!==Oe&&(Oe=null);return es=Oe,null}function qs(Oe){switch(Oe){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Rs()){case Er:return 1;case Oi:return 4;case Wi:case $s:return 16;case wo:return 536870912;default:return 16}default:return 16}}var Tr=null,Pi=null,ji=null;function po(){if(ji)return ji;var Oe,De=Pi,$e=De.length,Ge,dn="value"in Tr?Tr.value:Tr.textContent,yn=dn.length;for(Oe=0;Oe<$e&&De[Oe]===dn[Oe];Oe++);var On=$e-Oe;for(Ge=1;Ge<=On&&De[$e-Ge]===dn[yn-Ge];Ge++);return ji=dn.slice(Oe,1<Ge?1-Ge:void 0)}function Qs(Oe){var De=Oe.keyCode;return"charCode"in Oe?(Oe=Oe.charCode,Oe===0&&De===13&&(Oe=13)):Oe=De,Oe===10&&(Oe=13),32<=Oe||Oe===13?Oe:0}function Js(){return!0}function ll(){return!1}function Ns(Oe){function De($e,Ge,dn,yn,On){this._reactName=$e,this._targetInst=dn,this.type=Ge,this.nativeEvent=yn,this.target=On,this.currentTarget=null;for(var Xn in Oe)Oe.hasOwnProperty(Xn)&&($e=Oe[Xn],this[Xn]=$e?$e(yn):yn[Xn]);return this.isDefaultPrevented=(yn.defaultPrevented!=null?yn.defaultPrevented:yn.returnValue===!1)?Js:ll,this.isPropagationStopped=ll,this}return Sn(De.prototype,{preventDefault:function(){this.defaultPrevented=!0;var $e=this.nativeEvent;$e&&($e.preventDefault?$e.preventDefault():typeof $e.returnValue!="unknown"&&($e.returnValue=!1),this.isDefaultPrevented=Js)},stopPropagation:function(){var $e=this.nativeEvent;$e&&($e.stopPropagation?$e.stopPropagation():typeof $e.cancelBubble!="unknown"&&($e.cancelBubble=!0),this.isPropagationStopped=Js)},persist:function(){},isPersistent:Js}),De}var sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(Oe){return Oe.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Da=Ns(sa),wa=Sn({},sa,{view:0,detail:0}),Ul=Ns(wa),Ya,Ta,oa,Fa=Sn({},wa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ii,button:0,buttons:0,relatedTarget:function(Oe){return Oe.relatedTarget===void 0?Oe.fromElement===Oe.srcElement?Oe.toElement:Oe.fromElement:Oe.relatedTarget},movementX:function(Oe){return"movementX"in Oe?Oe.movementX:(Oe!==oa&&(oa&&Oe.type==="mousemove"?(Ya=Oe.screenX-oa.screenX,Ta=Oe.screenY-oa.screenY):Ta=Ya=0,oa=Oe),Ya)},movementY:function(Oe){return"movementY"in Oe?Oe.movementY:Ta}}),Xa=Ns(Fa),Rl=Sn({},Fa,{dataTransfer:0}),au=Ns(Rl),Va=Sn({},wa,{relatedTarget:0}),Ea=Ns(Va),kl=Sn({},sa,{animationName:0,elapsedTime:0,pseudoElement:0}),Ao=Ns(kl),Cl=Sn({},sa,{clipboardData:function(Oe){return"clipboardData"in Oe?Oe.clipboardData:window.clipboardData}}),Ze=Ns(Cl),kn=Sn({},sa,{data:0}),Wn=Ns(kn),Zn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jr(Oe){var De=this.nativeEvent;return De.getModifierState?De.getModifierState(Oe):(Oe=Rr[Oe])?!!De[Oe]:!1}function ii(){return jr}var ze=Sn({},wa,{key:function(Oe){if(Oe.key){var De=Zn[Oe.key]||Oe.key;if(De!=="Unidentified")return De}return Oe.type==="keypress"?(Oe=Qs(Oe),Oe===13?"Enter":String.fromCharCode(Oe)):Oe.type==="keydown"||Oe.type==="keyup"?dr[Oe.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ii,charCode:function(Oe){return Oe.type==="keypress"?Qs(Oe):0},keyCode:function(Oe){return Oe.type==="keydown"||Oe.type==="keyup"?Oe.keyCode:0},which:function(Oe){return Oe.type==="keypress"?Qs(Oe):Oe.type==="keydown"||Oe.type==="keyup"?Oe.keyCode:0}}),gn=Ns(ze),En=Sn({},Fa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fn=Ns(En),ur=Sn({},wa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ii}),yr=Ns(ur),Br=Sn({},sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),qi=Ns(Br),Xi=Sn({},Fa,{deltaX:function(Oe){return"deltaX"in Oe?Oe.deltaX:"wheelDeltaX"in Oe?-Oe.wheelDeltaX:0},deltaY:function(Oe){return"deltaY"in Oe?Oe.deltaY:"wheelDeltaY"in Oe?-Oe.wheelDeltaY:"wheelDelta"in Oe?-Oe.wheelDelta:0},deltaZ:0,deltaMode:0}),Gi=Ns(Xi),cs=[9,13,27,32],gs=Pe&&"CompositionEvent"in window,Fo=null;Pe&&"documentMode"in document&&(Fo=document.documentMode);var mo=Pe&&"TextEvent"in window&&!Fo,ja=Pe&&(!gs||Fo&&8<Fo&&11>=Fo),$a=" ",lu=!1;function uu(Oe,De){switch(Oe){case"keyup":return cs.indexOf(De.keyCode)!==-1;case"keydown":return De.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zl(Oe){return Oe=Oe.detail,typeof Oe=="object"&&"data"in Oe?Oe.data:null}var Us=!1;function cu(Oe,De){switch(Oe){case"compositionend":return zl(De);case"keypress":return De.which!==32?null:(lu=!0,$a);case"textInput":return Oe=De.data,Oe===$a&&lu?null:Oe;default:return null}}function du(Oe,De){if(Us)return Oe==="compositionend"||!gs&&uu(Oe,De)?(Oe=po(),ji=Pi=Tr=null,Us=!1,Oe):null;switch(Oe){case"paste":return null;case"keypress":if(!(De.ctrlKey||De.altKey||De.metaKey)||De.ctrlKey&&De.altKey){if(De.char&&1<De.char.length)return De.char;if(De.which)return String.fromCharCode(De.which)}return null;case"compositionend":return ja&&De.locale!=="ko"?null:De.data;default:return null}}var hu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fu(Oe){var De=Oe&&Oe.nodeName&&Oe.nodeName.toLowerCase();return De==="input"?!!hu[Oe.type]:De==="textarea"}function Vo(Oe,De,$e,Ge){Ur(Ge),De=ac(De,"onChange"),0<De.length&&($e=new Da("onChange","change",null,$e,Ge),Oe.push({event:$e,listeners:De}))}var ql=null,ul=null;function ic(Oe){Bu(Oe,0)}function jo(Oe){var De=Zl(Oe);if(Vr(De))return Oe}function pu(Oe,De){if(Oe==="change")return De}var Fu=!1;if(Pe){var mu;if(Pe){var Qa="oninput"in document;if(!Qa){var Ol=document.createElement("div");Ol.setAttribute("oninput","return;"),Qa=typeof Ol.oninput=="function"}mu=Qa}else mu=!1;Fu=mu&&(!document.documentMode||9<document.documentMode)}function $o(){ql&&(ql.detachEvent("onpropertychange",So),ul=ql=null)}function So(Oe){if(Oe.propertyName==="value"&&jo(ul)){var De=[];Vo(De,ul,Oe,Bi(Oe)),Hs(ic,De)}}function Ml(Oe,De,$e){Oe==="focusin"?($o(),ql=De,ul=$e,ql.attachEvent("onpropertychange",So)):Oe==="focusout"&&$o()}function cl(Oe){if(Oe==="selectionchange"||Oe==="keyup"||Oe==="keydown")return jo(ul)}function dl(Oe,De){if(Oe==="click")return jo(De)}function gu(Oe,De){if(Oe==="input"||Oe==="change")return jo(De)}function hl(Oe,De){return Oe===De&&(Oe!==0||1/Oe===1/De)||Oe!==Oe&&De!==De}var as=typeof Object.is=="function"?Object.is:hl;function pl(Oe,De){if(as(Oe,De))return!0;if(typeof Oe!="object"||Oe===null||typeof De!="object"||De===null)return!1;var $e=Object.keys(Oe),Ge=Object.keys(De);if($e.length!==Ge.length)return!1;for(Ge=0;Ge<$e.length;Ge++){var dn=$e[Ge];if(!Re.call(De,dn)||!as(Oe[dn],De[dn]))return!1}return!0}function Po(Oe){for(;Oe&&Oe.firstChild;)Oe=Oe.firstChild;return Oe}function aa(Oe,De){var $e=Po(Oe);Oe=0;for(var Ge;$e;){if($e.nodeType===3){if(Ge=Oe+$e.textContent.length,Oe<=De&&Ge>=De)return{node:$e,offset:De-Oe};Oe=Ge}e:{for(;$e;){if($e.nextSibling){$e=$e.nextSibling;break e}$e=$e.parentNode}$e=void 0}$e=Po($e)}}function Gl(Oe,De){return Oe&&De?Oe===De?!0:Oe&&Oe.nodeType===3?!1:De&&De.nodeType===3?Gl(Oe,De.parentNode):"contains"in Oe?Oe.contains(De):Oe.compareDocumentPosition?!!(Oe.compareDocumentPosition(De)&16):!1:!1}function Vu(){for(var Oe=window,De=Lr();De instanceof Oe.HTMLIFrameElement;){try{var $e=typeof De.contentWindow.location.href=="string"}catch{$e=!1}if($e)Oe=De.contentWindow;else break;De=Lr(Oe.document)}return De}function Wl(Oe){var De=Oe&&Oe.nodeName&&Oe.nodeName.toLowerCase();return De&&(De==="input"&&(Oe.type==="text"||Oe.type==="search"||Oe.type==="tel"||Oe.type==="url"||Oe.type==="password")||De==="textarea"||Oe.contentEditable==="true")}function Hl(Oe){var De=Vu(),$e=Oe.focusedElem,Ge=Oe.selectionRange;if(De!==$e&&$e&&$e.ownerDocument&&Gl($e.ownerDocument.documentElement,$e)){if(Ge!==null&&Wl($e)){if(De=Ge.start,Oe=Ge.end,Oe===void 0&&(Oe=De),"selectionStart"in $e)$e.selectionStart=De,$e.selectionEnd=Math.min(Oe,$e.value.length);else if(Oe=(De=$e.ownerDocument||document)&&De.defaultView||window,Oe.getSelection){Oe=Oe.getSelection();var dn=$e.textContent.length,yn=Math.min(Ge.start,dn);Ge=Ge.end===void 0?yn:Math.min(Ge.end,dn),!Oe.extend&&yn>Ge&&(dn=Ge,Ge=yn,yn=dn),dn=aa($e,yn);var On=aa($e,Ge);dn&&On&&(Oe.rangeCount!==1||Oe.anchorNode!==dn.node||Oe.anchorOffset!==dn.offset||Oe.focusNode!==On.node||Oe.focusOffset!==On.offset)&&(De=De.createRange(),De.setStart(dn.node,dn.offset),Oe.removeAllRanges(),yn>Ge?(Oe.addRange(De),Oe.extend(On.node,On.offset)):(De.setEnd(On.node,On.offset),Oe.addRange(De)))}}for(De=[],Oe=$e;Oe=Oe.parentNode;)Oe.nodeType===1&&De.push({element:Oe,left:Oe.scrollLeft,top:Oe.scrollTop});for(typeof $e.focus=="function"&&$e.focus(),$e=0;$e<De.length;$e++)Oe=De[$e],Oe.element.scrollLeft=Oe.left,Oe.element.scrollTop=Oe.top}}var Kl=Pe&&"documentMode"in document&&11>=document.documentMode,la=null,ml=null,Ja=null,gl=!1;function _l(Oe,De,$e){var Ge=$e.window===$e?$e.document:$e.nodeType===9?$e:$e.ownerDocument;gl||la==null||la!==Lr(Ge)||(Ge=la,"selectionStart"in Ge&&Wl(Ge)?Ge={start:Ge.selectionStart,end:Ge.selectionEnd}:(Ge=(Ge.ownerDocument&&Ge.ownerDocument.defaultView||window).getSelection(),Ge={anchorNode:Ge.anchorNode,anchorOffset:Ge.anchorOffset,focusNode:Ge.focusNode,focusOffset:Ge.focusOffset}),Ja&&pl(Ja,Ge)||(Ja=Ge,Ge=ac(ml,"onSelect"),0<Ge.length&&(De=new Da("onSelect","select",null,De,$e),Oe.push({event:De,listeners:Ge}),De.target=la)))}function Nl(Oe,De){var $e={};return $e[Oe.toLowerCase()]=De.toLowerCase(),$e["Webkit"+Oe]="webkit"+De,$e["Moz"+Oe]="moz"+De,$e}var go={animationend:Nl("Animation","AnimationEnd"),animationiteration:Nl("Animation","AnimationIteration"),animationstart:Nl("Animation","AnimationStart"),transitionend:Nl("Transition","TransitionEnd")},Ko={},Es={};Pe&&(Es=document.createElement("div").style,"AnimationEvent"in window||(delete go.animationend.animation,delete go.animationiteration.animation,delete go.animationstart.animation),"TransitionEvent"in window||delete go.transitionend.transition);function _s(Oe){if(Ko[Oe])return Ko[Oe];if(!go[Oe])return Oe;var De=go[Oe],$e;for($e in De)if(De.hasOwnProperty($e)&&$e in Es)return Ko[Oe]=De[$e];return Oe}var zs=_s("animationend"),Zs=_s("animationiteration"),Za=_s("animationstart"),_u=_s("transitionend"),Yl=new Map,ju="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function el(Oe,De){Yl.set(Oe,De),Ee(De,[Oe])}for(var yu=0;yu<ju.length;yu++){var Bo=ju[yu],xa=Bo.toLowerCase(),sc=Bo[0].toUpperCase()+Bo.slice(1);el(xa,"on"+sc)}el(zs,"onAnimationEnd"),el(Zs,"onAnimationIteration"),el(Za,"onAnimationStart"),el("dblclick","onDoubleClick"),el("focusin","onFocus"),el("focusout","onBlur"),el(_u,"onTransitionEnd"),xe("onMouseEnter",["mouseout","mouseover"]),xe("onMouseLeave",["mouseout","mouseover"]),xe("onPointerEnter",["pointerout","pointerover"]),xe("onPointerLeave",["pointerout","pointerover"]),Ee("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ee("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ee("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ee("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ee("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ee("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zc=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ll));function $u(Oe,De,$e){var Ge=Oe.type||"unknown-event";Oe.currentTarget=$e,Vn(Ge,De,void 0,Oe),Oe.currentTarget=null}function Bu(Oe,De){De=(De&4)!==0;for(var $e=0;$e<Oe.length;$e++){var Ge=Oe[$e],dn=Ge.event;Ge=Ge.listeners;e:{var yn=void 0;if(De)for(var On=Ge.length-1;0<=On;On--){var Xn=Ge[On],rr=Xn.instance,Ar=Xn.currentTarget;if(Xn=Xn.listener,rr!==yn&&dn.isPropagationStopped())break e;$u(dn,Xn,Ar),yn=rr}else for(On=0;On<Ge.length;On++){if(Xn=Ge[On],rr=Xn.instance,Ar=Xn.currentTarget,Xn=Xn.listener,rr!==yn&&dn.isPropagationStopped())break e;$u(dn,Xn,Ar),yn=rr}}}if(ms)throw Oe=vo,ms=!1,vo=null,Oe}function xs(Oe,De){var $e=De[Xo];$e===void 0&&($e=De[Xo]=new Set);var Ge=Oe+"__bubble";$e.has(Ge)||(Uu(De,Oe,2,!1),$e.add(Ge))}function oc(Oe,De,$e){var Ge=0;De&&(Ge|=4),Uu($e,Oe,Ge,De)}var bu="_reactListening"+Math.random().toString(36).slice(2);function Xl(Oe){if(!Oe[bu]){Oe[bu]=!0,_e.forEach(function($e){$e!=="selectionchange"&&(zc.has($e)||oc($e,!1,Oe),oc($e,!0,Oe))});var De=Oe.nodeType===9?Oe:Oe.ownerDocument;De===null||De[bu]||(De[bu]=!0,oc("selectionchange",!1,De))}}function Uu(Oe,De,$e,Ge){switch(qs(De)){case 1:var dn=Jr;break;case 4:dn=Vi;break;default:dn=Mi}$e=dn.bind(null,De,$e,Oe),dn=void 0,!Vs||De!=="touchstart"&&De!=="touchmove"&&De!=="wheel"||(dn=!0),Ge?dn!==void 0?Oe.addEventListener(De,$e,{capture:!0,passive:dn}):Oe.addEventListener(De,$e,!0):dn!==void 0?Oe.addEventListener(De,$e,{passive:dn}):Oe.addEventListener(De,$e,!1)}function zu(Oe,De,$e,Ge,dn){var yn=Ge;if((De&1)===0&&(De&2)===0&&Ge!==null)e:for(;;){if(Ge===null)return;var On=Ge.tag;if(On===3||On===4){var Xn=Ge.stateNode.containerInfo;if(Xn===dn||Xn.nodeType===8&&Xn.parentNode===dn)break;if(On===4)for(On=Ge.return;On!==null;){var rr=On.tag;if((rr===3||rr===4)&&(rr=On.stateNode.containerInfo,rr===dn||rr.nodeType===8&&rr.parentNode===dn))return;On=On.return}for(;Xn!==null;){if(On=Dl(Xn),On===null)return;if(rr=On.tag,rr===5||rr===6){Ge=yn=On;continue e}Xn=Xn.parentNode}}Ge=Ge.return}Hs(function(){var Ar=yn,qr=Bi($e),Xr=[];e:{var zr=Yl.get(Oe);if(zr!==void 0){var mi=Da,bi=Oe;switch(Oe){case"keypress":if(Qs($e)===0)break e;case"keydown":case"keyup":mi=gn;break;case"focusin":bi="focus",mi=Ea;break;case"focusout":bi="blur",mi=Ea;break;case"beforeblur":case"afterblur":mi=Ea;break;case"click":if($e.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mi=Xa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mi=au;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mi=yr;break;case zs:case Zs:case Za:mi=Ao;break;case _u:mi=qi;break;case"scroll":mi=Ul;break;case"wheel":mi=Gi;break;case"copy":case"cut":case"paste":mi=Ze;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mi=Fn}var vi=(De&4)!==0,lo=!vi&&Oe==="scroll",_r=vi?zr!==null?zr+"Capture":null:zr;vi=[];for(var ar=Ar,br;ar!==null;){br=ar;var Zr=br.stateNode;if(br.tag===5&&Zr!==null&&(br=Zr,_r!==null&&(Zr=ci(ar,_r),Zr!=null&&vi.push(qu(ar,Zr,br)))),lo)break;ar=ar.return}0<vi.length&&(zr=new mi(zr,bi,null,$e,qr),Xr.push({event:zr,listeners:vi}))}}if((De&7)===0){e:{if(zr=Oe==="mouseover"||Oe==="pointerover",mi=Oe==="mouseout"||Oe==="pointerout",zr&&$e!==Ti&&(bi=$e.relatedTarget||$e.fromElement)&&(Dl(bi)||bi[Io]))break e;if((mi||zr)&&(zr=qr.window===qr?qr:(zr=qr.ownerDocument)?zr.defaultView||zr.parentWindow:window,mi?(bi=$e.relatedTarget||$e.toElement,mi=Ar,bi=bi?Dl(bi):null,bi!==null&&(lo=Kn(bi),bi!==lo||bi.tag!==5&&bi.tag!==6)&&(bi=null)):(mi=null,bi=Ar),mi!==bi)){if(vi=Xa,Zr="onMouseLeave",_r="onMouseEnter",ar="mouse",(Oe==="pointerout"||Oe==="pointerover")&&(vi=Fn,Zr="onPointerLeave",_r="onPointerEnter",ar="pointer"),lo=mi==null?zr:Zl(mi),br=bi==null?zr:Zl(bi),zr=new vi(Zr,ar+"leave",mi,$e,qr),zr.target=lo,zr.relatedTarget=br,Zr=null,Dl(qr)===Ar&&(vi=new vi(_r,ar+"enter",bi,$e,qr),vi.target=br,vi.relatedTarget=lo,Zr=vi),lo=Zr,mi&&bi)t:{for(vi=mi,_r=bi,ar=0,br=vi;br;br=Ql(br))ar++;for(br=0,Zr=_r;Zr;Zr=Ql(Zr))br++;for(;0<ar-br;)vi=Ql(vi),ar--;for(;0<br-ar;)_r=Ql(_r),br--;for(;ar--;){if(vi===_r||_r!==null&&vi===_r.alternate)break t;vi=Ql(vi),_r=Ql(_r)}vi=null}else vi=null;mi!==null&&qc(Xr,zr,mi,vi,!1),bi!==null&&lo!==null&&qc(Xr,lo,bi,vi,!0)}}e:{if(zr=Ar?Zl(Ar):window,mi=zr.nodeName&&zr.nodeName.toLowerCase(),mi==="select"||mi==="input"&&zr.type==="file")var wi=pu;else if(fu(zr))if(Fu)wi=gu;else{wi=cl;var Ri=Ml}else(mi=zr.nodeName)&&mi.toLowerCase()==="input"&&(zr.type==="checkbox"||zr.type==="radio")&&(wi=dl);if(wi&&(wi=wi(Oe,Ar))){Vo(Xr,wi,$e,qr);break e}Ri&&Ri(Oe,zr,Ar),Oe==="focusout"&&(Ri=zr._wrapperState)&&Ri.controlled&&zr.type==="number"&&Dr(zr,"number",zr.value)}switch(Ri=Ar?Zl(Ar):window,Oe){case"focusin":(fu(Ri)||Ri.contentEditable==="true")&&(la=Ri,ml=Ar,Ja=null);break;case"focusout":Ja=ml=la=null;break;case"mousedown":gl=!0;break;case"contextmenu":case"mouseup":case"dragend":gl=!1,_l(Xr,$e,qr);break;case"selectionchange":if(Kl)break;case"keydown":case"keyup":_l(Xr,$e,qr)}var ki;if(gs)e:{switch(Oe){case"compositionstart":var zi="onCompositionStart";break e;case"compositionend":zi="onCompositionEnd";break e;case"compositionupdate":zi="onCompositionUpdate";break e}zi=void 0}else Us?uu(Oe,$e)&&(zi="onCompositionEnd"):Oe==="keydown"&&$e.keyCode===229&&(zi="onCompositionStart");zi&&(ja&&$e.locale!=="ko"&&(Us||zi!=="onCompositionStart"?zi==="onCompositionEnd"&&Us&&(ki=po()):(Tr=qr,Pi="value"in Tr?Tr.value:Tr.textContent,Us=!0)),Ri=ac(Ar,zi),0<Ri.length&&(zi=new Wn(zi,Oe,null,$e,qr),Xr.push({event:zi,listeners:Ri}),ki?zi.data=ki:(ki=zl($e),ki!==null&&(zi.data=ki)))),(ki=mo?cu(Oe,$e):du(Oe,$e))&&(Ar=ac(Ar,"onBeforeInput"),0<Ar.length&&(qr=new Wn("onBeforeInput","beforeinput",null,$e,qr),Xr.push({event:qr,listeners:Ar}),qr.data=ki))}Bu(Xr,De)})}function qu(Oe,De,$e){return{instance:Oe,listener:De,currentTarget:$e}}function ac(Oe,De){for(var $e=De+"Capture",Ge=[];Oe!==null;){var dn=Oe,yn=dn.stateNode;dn.tag===5&&yn!==null&&(dn=yn,yn=ci(Oe,$e),yn!=null&&Ge.unshift(qu(Oe,yn,dn)),yn=ci(Oe,De),yn!=null&&Ge.push(qu(Oe,yn,dn))),Oe=Oe.return}return Ge}function Ql(Oe){if(Oe===null)return null;do Oe=Oe.return;while(Oe&&Oe.tag!==5);return Oe||null}function qc(Oe,De,$e,Ge,dn){for(var yn=De._reactName,On=[];$e!==null&&$e!==Ge;){var Xn=$e,rr=Xn.alternate,Ar=Xn.stateNode;if(rr!==null&&rr===Ge)break;Xn.tag===5&&Ar!==null&&(Xn=Ar,dn?(rr=ci($e,yn),rr!=null&&On.unshift(qu($e,rr,Xn))):dn||(rr=ci($e,yn),rr!=null&&On.push(qu($e,rr,Xn)))),$e=$e.return}On.length!==0&&Oe.push({event:De,listeners:On})}var Sd=/\r\n?/g,Pd=/\u0000|\uFFFD/g;function Gc(Oe){return(typeof Oe=="string"?Oe:""+Oe).replace(Sd,`
`).replace(Pd,"")}function uc(Oe,De,$e){if(De=Gc(De),Gc(Oe)!==De&&$e)throw Error(t(425))}function vu(){}var Gu=null,Jl=null;function Sc(Oe,De){return Oe==="textarea"||Oe==="noscript"||typeof De.children=="string"||typeof De.children=="number"||typeof De.dangerouslySetInnerHTML=="object"&&De.dangerouslySetInnerHTML!==null&&De.dangerouslySetInnerHTML.__html!=null}var Pc=typeof setTimeout=="function"?setTimeout:void 0,Wc=typeof clearTimeout=="function"?clearTimeout:void 0,Hc=typeof Promise=="function"?Promise:void 0,Id=typeof queueMicrotask=="function"?queueMicrotask:typeof Hc<"u"?function(Oe){return Hc.resolve(null).then(Oe).catch(Rd)}:Pc;function Rd(Oe){setTimeout(function(){throw Oe})}function Ic(Oe,De){var $e=De,Ge=0;do{var dn=$e.nextSibling;if(Oe.removeChild($e),dn&&dn.nodeType===8)if($e=dn.data,$e==="/$"){if(Ge===0){Oe.removeChild(dn),hr(De);return}Ge--}else $e!=="$"&&$e!=="$?"&&$e!=="$!"||Ge++;$e=dn}while($e);hr(De)}function Uo(Oe){for(;Oe!=null;Oe=Oe.nextSibling){var De=Oe.nodeType;if(De===1||De===3)break;if(De===8){if(De=Oe.data,De==="$"||De==="$!"||De==="$?")break;if(De==="/$")return null}}return Oe}function Aa(Oe){Oe=Oe.previousSibling;for(var De=0;Oe;){if(Oe.nodeType===8){var $e=Oe.data;if($e==="$"||$e==="$!"||$e==="$?"){if(De===0)return Oe;De--}else $e==="/$"&&De++}Oe=Oe.previousSibling}return null}var Yo=Math.random().toString(36).slice(2),tl="__reactFiber$"+Yo,wu="__reactProps$"+Yo,Io="__reactContainer$"+Yo,Xo="__reactEvents$"+Yo,kd="__reactListeners$"+Yo,Cd="__reactHandles$"+Yo;function Dl(Oe){var De=Oe[tl];if(De)return De;for(var $e=Oe.parentNode;$e;){if(De=$e[Io]||$e[tl]){if($e=De.alternate,De.child!==null||$e!==null&&$e.child!==null)for(Oe=Aa(Oe);Oe!==null;){if($e=Oe[tl])return $e;Oe=Aa(Oe)}return De}Oe=$e,$e=Oe.parentNode}return null}function Tu(Oe){return Oe=Oe[tl]||Oe[Io],!Oe||Oe.tag!==5&&Oe.tag!==6&&Oe.tag!==13&&Oe.tag!==3?null:Oe}function Zl(Oe){if(Oe.tag===5||Oe.tag===6)return Oe.stateNode;throw Error(t(33))}function Wu(Oe){return Oe[wu]||null}var Rc=[],yl=-1;function Ba(Oe){return{current:Oe}}function ys(Oe){0>yl||(Oe.current=Rc[yl],Rc[yl]=null,yl--)}function ws(Oe,De){yl++,Rc[yl]=Oe.current,Oe.current=De}var Fl={},_o=Ba(Fl),Qo=Ba(!1),eu=Fl;function Eu(Oe,De){var $e=Oe.type.contextTypes;if(!$e)return Fl;var Ge=Oe.stateNode;if(Ge&&Ge.__reactInternalMemoizedUnmaskedChildContext===De)return Ge.__reactInternalMemoizedMaskedChildContext;var dn={},yn;for(yn in $e)dn[yn]=De[yn];return Ge&&(Oe=Oe.stateNode,Oe.__reactInternalMemoizedUnmaskedChildContext=De,Oe.__reactInternalMemoizedMaskedChildContext=dn),dn}function Jo(Oe){return Oe=Oe.childContextTypes,Oe!=null}function cc(){ys(Qo),ys(_o)}function Kc(Oe,De,$e){if(_o.current!==Fl)throw Error(t(168));ws(_o,De),ws(Qo,$e)}function kc(Oe,De,$e){var Ge=Oe.stateNode;if(De=De.childContextTypes,typeof Ge.getChildContext!="function")return $e;Ge=Ge.getChildContext();for(var dn in Ge)if(!(dn in De))throw Error(t(108,Jn(Oe)||"Unknown",dn));return Sn({},$e,Ge)}function tu(Oe){return Oe=(Oe=Oe.stateNode)&&Oe.__reactInternalMemoizedMergedChildContext||Fl,eu=_o.current,ws(_o,Oe),ws(Qo,Qo.current),!0}function Yc(Oe,De,$e){var Ge=Oe.stateNode;if(!Ge)throw Error(t(169));$e?(Oe=kc(Oe,De,eu),Ge.__reactInternalMemoizedMergedChildContext=Oe,ys(Qo),ys(_o),ws(_o,Oe)):ys(Qo),ws(Qo,$e)}var bl=null,Hu=!1,Ue=!1;function We(Oe){bl===null?bl=[Oe]:bl.push(Oe)}function hn(Oe){Hu=!0,We(Oe)}function bn(){if(!Ue&&bl!==null){Ue=!0;var Oe=0,De=Hi;try{var $e=bl;for(Hi=1;Oe<$e.length;Oe++){var Ge=$e[Oe];do Ge=Ge(!0);while(Ge!==null)}bl=null,Hu=!1}catch(dn){throw bl!==null&&(bl=bl.slice(Oe+1)),pi(Er,bn),dn}finally{Hi=De,Ue=!1}}return null}var Rn=[],Cn=0,Mn=null,Dn=0,jn=[],qn=0,tr=null,pr=1,mr="";function cr(Oe,De){Rn[Cn++]=Dn,Rn[Cn++]=Mn,Mn=Oe,Dn=De}function Nr(Oe,De,$e){jn[qn++]=pr,jn[qn++]=mr,jn[qn++]=tr,tr=Oe;var Ge=pr;Oe=mr;var dn=32-ts(Ge)-1;Ge&=~(1<<dn),$e+=1;var yn=32-ts(De)+dn;if(30<yn){var On=dn-dn%5;yn=(Ge&(1<<On)-1).toString(32),Ge>>=On,dn-=On,pr=1<<32-ts(De)+dn|$e<<dn|Ge,mr=yn+Oe}else pr=1<<yn|$e<<dn|Ge,mr=Oe}function Ir(Oe){Oe.return!==null&&(cr(Oe,1),Nr(Oe,1,0))}function ir(Oe){for(;Oe===Mn;)Mn=Rn[--Cn],Rn[Cn]=null,Dn=Rn[--Cn],Rn[Cn]=null;for(;Oe===tr;)tr=jn[--qn],jn[qn]=null,mr=jn[--qn],jn[qn]=null,pr=jn[--qn],jn[qn]=null}var sr=null,Or=null,Cr=!1,Mr=null;function hi(Oe,De){var $e=al(5,null,null,0);$e.elementType="DELETED",$e.stateNode=De,$e.return=Oe,De=Oe.deletions,De===null?(Oe.deletions=[$e],Oe.flags|=16):De.push($e)}function si(Oe,De){switch(Oe.tag){case 5:var $e=Oe.type;return De=De.nodeType!==1||$e.toLowerCase()!==De.nodeName.toLowerCase()?null:De,De!==null?(Oe.stateNode=De,sr=Oe,Or=Uo(De.firstChild),!0):!1;case 6:return De=Oe.pendingProps===""||De.nodeType!==3?null:De,De!==null?(Oe.stateNode=De,sr=Oe,Or=null,!0):!1;case 13:return De=De.nodeType!==8?null:De,De!==null?($e=tr!==null?{id:pr,overflow:mr}:null,Oe.memoizedState={dehydrated:De,treeContext:$e,retryLane:1073741824},$e=al(18,null,null,0),$e.stateNode=De,$e.return=Oe,Oe.child=$e,sr=Oe,Or=null,!0):!1;default:return!1}}function Ai(Oe){return(Oe.mode&1)!==0&&(Oe.flags&128)===0}function ai(Oe){if(Cr){var De=Or;if(De){var $e=De;if(!si(Oe,De)){if(Ai(Oe))throw Error(t(418));De=Uo($e.nextSibling);var Ge=sr;De&&si(Oe,De)?hi(Ge,$e):(Oe.flags=Oe.flags&-4097|2,Cr=!1,sr=Oe)}}else{if(Ai(Oe))throw Error(t(418));Oe.flags=Oe.flags&-4097|2,Cr=!1,sr=Oe}}}function rs(Oe){for(Oe=Oe.return;Oe!==null&&Oe.tag!==5&&Oe.tag!==3&&Oe.tag!==13;)Oe=Oe.return;sr=Oe}function is(Oe){if(Oe!==sr)return!1;if(!Cr)return rs(Oe),Cr=!0,!1;var De;if((De=Oe.tag!==3)&&!(De=Oe.tag!==5)&&(De=Oe.type,De=De!=="head"&&De!=="body"&&!Sc(Oe.type,Oe.memoizedProps)),De&&(De=Or)){if(Ai(Oe))throw Zi(),Error(t(418));for(;De;)hi(Oe,De),De=Uo(De.nextSibling)}if(rs(Oe),Oe.tag===13){if(Oe=Oe.memoizedState,Oe=Oe!==null?Oe.dehydrated:null,!Oe)throw Error(t(317));e:{for(Oe=Oe.nextSibling,De=0;Oe;){if(Oe.nodeType===8){var $e=Oe.data;if($e==="/$"){if(De===0){Or=Uo(Oe.nextSibling);break e}De--}else $e!=="$"&&$e!=="$!"&&$e!=="$?"||De++}Oe=Oe.nextSibling}Or=null}}else Or=sr?Uo(Oe.stateNode.nextSibling):null;return!0}function Zi(){for(var Oe=Or;Oe;)Oe=Uo(Oe.nextSibling)}function Ki(){Or=sr=null,Cr=!1}function bs(Oe){Mr===null?Mr=[Oe]:Mr.push(Oe)}var Ts=He.ReactCurrentBatchConfig;function $i(Oe,De,$e){if(Oe=$e.ref,Oe!==null&&typeof Oe!="function"&&typeof Oe!="object"){if($e._owner){if($e=$e._owner,$e){if($e.tag!==1)throw Error(t(309));var Ge=$e.stateNode}if(!Ge)throw Error(t(147,Oe));var dn=Ge,yn=""+Oe;return De!==null&&De.ref!==null&&typeof De.ref=="function"&&De.ref._stringRef===yn?De.ref:(De=function(On){var Xn=dn.refs;On===null?delete Xn[yn]:Xn[yn]=On},De._stringRef=yn,De)}if(typeof Oe!="string")throw Error(t(284));if(!$e._owner)throw Error(t(290,Oe))}return Oe}function Ls(Oe,De){throw Oe=Object.prototype.toString.call(De),Error(t(31,Oe==="[object Object]"?"object with keys {"+Object.keys(De).join(", ")+"}":Oe))}function zo(Oe){var De=Oe._init;return De(Oe._payload)}function Gs(Oe){function De(_r,ar){if(Oe){var br=_r.deletions;br===null?(_r.deletions=[ar],_r.flags|=16):br.push(ar)}}function $e(_r,ar){if(!Oe)return null;for(;ar!==null;)De(_r,ar),ar=ar.sibling;return null}function Ge(_r,ar){for(_r=new Map;ar!==null;)ar.key!==null?_r.set(ar.key,ar):_r.set(ar.index,ar),ar=ar.sibling;return _r}function dn(_r,ar){return _r=Lu(_r,ar),_r.index=0,_r.sibling=null,_r}function yn(_r,ar,br){return _r.index=br,Oe?(br=_r.alternate,br!==null?(br=br.index,br<ar?(_r.flags|=2,ar):br):(_r.flags|=2,ar)):(_r.flags|=1048576,ar)}function On(_r){return Oe&&_r.alternate===null&&(_r.flags|=2),_r}function Xn(_r,ar,br,Zr){return ar===null||ar.tag!==6?(ar=oh(br,_r.mode,Zr),ar.return=_r,ar):(ar=dn(ar,br),ar.return=_r,ar)}function rr(_r,ar,br,Zr){var wi=br.type;return wi===Qe?qr(_r,ar,br.props.children,Zr,br.key):ar!==null&&(ar.elementType===wi||typeof wi=="object"&&wi!==null&&wi.$$typeof===xn&&zo(wi)===ar.type)?(Zr=dn(ar,br.props),Zr.ref=$i(_r,ar,br),Zr.return=_r,Zr):(Zr=yd(br.type,br.key,br.props,null,_r.mode,Zr),Zr.ref=$i(_r,ar,br),Zr.return=_r,Zr)}function Ar(_r,ar,br,Zr){return ar===null||ar.tag!==4||ar.stateNode.containerInfo!==br.containerInfo||ar.stateNode.implementation!==br.implementation?(ar=ah(br,_r.mode,Zr),ar.return=_r,ar):(ar=dn(ar,br.children||[]),ar.return=_r,ar)}function qr(_r,ar,br,Zr,wi){return ar===null||ar.tag!==7?(ar=nc(br,_r.mode,Zr,wi),ar.return=_r,ar):(ar=dn(ar,br),ar.return=_r,ar)}function Xr(_r,ar,br){if(typeof ar=="string"&&ar!==""||typeof ar=="number")return ar=oh(""+ar,_r.mode,br),ar.return=_r,ar;if(typeof ar=="object"&&ar!==null){switch(ar.$$typeof){case Xe:return br=yd(ar.type,ar.key,ar.props,null,_r.mode,br),br.ref=$i(_r,null,ar),br.return=_r,br;case Je:return ar=ah(ar,_r.mode,br),ar.return=_r,ar;case xn:var Zr=ar._init;return Xr(_r,Zr(ar._payload),br)}if($r(ar)||$n(ar))return ar=nc(ar,_r.mode,br,null),ar.return=_r,ar;Ls(_r,ar)}return null}function zr(_r,ar,br,Zr){var wi=ar!==null?ar.key:null;if(typeof br=="string"&&br!==""||typeof br=="number")return wi!==null?null:Xn(_r,ar,""+br,Zr);if(typeof br=="object"&&br!==null){switch(br.$$typeof){case Xe:return br.key===wi?rr(_r,ar,br,Zr):null;case Je:return br.key===wi?Ar(_r,ar,br,Zr):null;case xn:return wi=br._init,zr(_r,ar,wi(br._payload),Zr)}if($r(br)||$n(br))return wi!==null?null:qr(_r,ar,br,Zr,null);Ls(_r,br)}return null}function mi(_r,ar,br,Zr,wi){if(typeof Zr=="string"&&Zr!==""||typeof Zr=="number")return _r=_r.get(br)||null,Xn(ar,_r,""+Zr,wi);if(typeof Zr=="object"&&Zr!==null){switch(Zr.$$typeof){case Xe:return _r=_r.get(Zr.key===null?br:Zr.key)||null,rr(ar,_r,Zr,wi);case Je:return _r=_r.get(Zr.key===null?br:Zr.key)||null,Ar(ar,_r,Zr,wi);case xn:var Ri=Zr._init;return mi(_r,ar,br,Ri(Zr._payload),wi)}if($r(Zr)||$n(Zr))return _r=_r.get(br)||null,qr(ar,_r,Zr,wi,null);Ls(ar,Zr)}return null}function bi(_r,ar,br,Zr){for(var wi=null,Ri=null,ki=ar,zi=ar=0,Oo=null;ki!==null&&zi<br.length;zi++){ki.index>zi?(Oo=ki,ki=null):Oo=ki.sibling;var fs=zr(_r,ki,br[zi],Zr);if(fs===null){ki===null&&(ki=Oo);break}Oe&&ki&&fs.alternate===null&&De(_r,ki),ar=yn(fs,ar,zi),Ri===null?wi=fs:Ri.sibling=fs,Ri=fs,ki=Oo}if(zi===br.length)return $e(_r,ki),Cr&&cr(_r,zi),wi;if(ki===null){for(;zi<br.length;zi++)ki=Xr(_r,br[zi],Zr),ki!==null&&(ar=yn(ki,ar,zi),Ri===null?wi=ki:Ri.sibling=ki,Ri=ki);return Cr&&cr(_r,zi),wi}for(ki=Ge(_r,ki);zi<br.length;zi++)Oo=mi(ki,_r,zi,br[zi],Zr),Oo!==null&&(Oe&&Oo.alternate!==null&&ki.delete(Oo.key===null?zi:Oo.key),ar=yn(Oo,ar,zi),Ri===null?wi=Oo:Ri.sibling=Oo,Ri=Oo);return Oe&&ki.forEach(function(Du){return De(_r,Du)}),Cr&&cr(_r,zi),wi}function vi(_r,ar,br,Zr){var wi=$n(br);if(typeof wi!="function")throw Error(t(150));if(br=wi.call(br),br==null)throw Error(t(151));for(var Ri=wi=null,ki=ar,zi=ar=0,Oo=null,fs=br.next();ki!==null&&!fs.done;zi++,fs=br.next()){ki.index>zi?(Oo=ki,ki=null):Oo=ki.sibling;var Du=zr(_r,ki,fs.value,Zr);if(Du===null){ki===null&&(ki=Oo);break}Oe&&ki&&Du.alternate===null&&De(_r,ki),ar=yn(Du,ar,zi),Ri===null?wi=Du:Ri.sibling=Du,Ri=Du,ki=Oo}if(fs.done)return $e(_r,ki),Cr&&cr(_r,zi),wi;if(ki===null){for(;!fs.done;zi++,fs=br.next())fs=Xr(_r,fs.value,Zr),fs!==null&&(ar=yn(fs,ar,zi),Ri===null?wi=fs:Ri.sibling=fs,Ri=fs);return Cr&&cr(_r,zi),wi}for(ki=Ge(_r,ki);!fs.done;zi++,fs=br.next())fs=mi(ki,_r,zi,fs.value,Zr),fs!==null&&(Oe&&fs.alternate!==null&&ki.delete(fs.key===null?zi:fs.key),ar=yn(fs,ar,zi),Ri===null?wi=fs:Ri.sibling=fs,Ri=fs);return Oe&&ki.forEach(function(Jf){return De(_r,Jf)}),Cr&&cr(_r,zi),wi}function lo(_r,ar,br,Zr){if(typeof br=="object"&&br!==null&&br.type===Qe&&br.key===null&&(br=br.props.children),typeof br=="object"&&br!==null){switch(br.$$typeof){case Xe:e:{for(var wi=br.key,Ri=ar;Ri!==null;){if(Ri.key===wi){if(wi=br.type,wi===Qe){if(Ri.tag===7){$e(_r,Ri.sibling),ar=dn(Ri,br.props.children),ar.return=_r,_r=ar;break e}}else if(Ri.elementType===wi||typeof wi=="object"&&wi!==null&&wi.$$typeof===xn&&zo(wi)===Ri.type){$e(_r,Ri.sibling),ar=dn(Ri,br.props),ar.ref=$i(_r,Ri,br),ar.return=_r,_r=ar;break e}$e(_r,Ri);break}else De(_r,Ri);Ri=Ri.sibling}br.type===Qe?(ar=nc(br.props.children,_r.mode,Zr,br.key),ar.return=_r,_r=ar):(Zr=yd(br.type,br.key,br.props,null,_r.mode,Zr),Zr.ref=$i(_r,ar,br),Zr.return=_r,_r=Zr)}return On(_r);case Je:e:{for(Ri=br.key;ar!==null;){if(ar.key===Ri)if(ar.tag===4&&ar.stateNode.containerInfo===br.containerInfo&&ar.stateNode.implementation===br.implementation){$e(_r,ar.sibling),ar=dn(ar,br.children||[]),ar.return=_r,_r=ar;break e}else{$e(_r,ar);break}else De(_r,ar);ar=ar.sibling}ar=ah(br,_r.mode,Zr),ar.return=_r,_r=ar}return On(_r);case xn:return Ri=br._init,lo(_r,ar,Ri(br._payload),Zr)}if($r(br))return bi(_r,ar,br,Zr);if($n(br))return vi(_r,ar,br,Zr);Ls(_r,br)}return typeof br=="string"&&br!==""||typeof br=="number"?(br=""+br,ar!==null&&ar.tag===6?($e(_r,ar.sibling),ar=dn(ar,br),ar.return=_r,_r=ar):($e(_r,ar),ar=oh(br,_r.mode,Zr),ar.return=_r,_r=ar),On(_r)):$e(_r,ar)}return lo}var so=Gs(!0),ds=Gs(!1),Ro=Ba(null),ko=null,Ds=null,oo=null;function yo(){oo=Ds=ko=null}function Zo(Oe){var De=Ro.current;ys(Ro),Oe._currentValue=De}function Sa(Oe,De,$e){for(;Oe!==null;){var Ge=Oe.alternate;if((Oe.childLanes&De)!==De?(Oe.childLanes|=De,Ge!==null&&(Ge.childLanes|=De)):Ge!==null&&(Ge.childLanes&De)!==De&&(Ge.childLanes|=De),Oe===$e)break;Oe=Oe.return}}function Fs(Oe,De){ko=Oe,oo=Ds=null,Oe=Oe.dependencies,Oe!==null&&Oe.firstContext!==null&&((Oe.lanes&De)!==0&&(ka=!0),Oe.firstContext=null)}function eo(Oe){var De=Oe._currentValue;if(oo!==Oe)if(Oe={context:Oe,memoizedValue:De,next:null},Ds===null){if(ko===null)throw Error(t(308));Ds=Oe,ko.dependencies={lanes:0,firstContext:Oe}}else Ds=Ds.next=Oe;return De}var ua=null;function Vl(Oe){ua===null?ua=[Oe]:ua.push(Oe)}function vl(Oe,De,$e,Ge){var dn=De.interleaved;return dn===null?($e.next=$e,Vl(De)):($e.next=dn.next,dn.next=$e),De.interleaved=$e,hs(Oe,Ge)}function hs(Oe,De){Oe.lanes|=De;var $e=Oe.alternate;for($e!==null&&($e.lanes|=De),$e=Oe,Oe=Oe.return;Oe!==null;)Oe.childLanes|=De,$e=Oe.alternate,$e!==null&&($e.childLanes|=De),$e=Oe,Oe=Oe.return;return $e.tag===3?$e.stateNode:null}var nl=!1;function dc(Oe){Oe.updateQueue={baseState:Oe.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cc(Oe,De){Oe=Oe.updateQueue,De.updateQueue===Oe&&(De.updateQueue={baseState:Oe.baseState,firstBaseUpdate:Oe.firstBaseUpdate,lastBaseUpdate:Oe.lastBaseUpdate,shared:Oe.shared,effects:Oe.effects})}function Pa(Oe,De){return{eventTime:Oe,lane:De,tag:0,payload:null,callback:null,next:null}}function Ia(Oe,De,$e){var Ge=Oe.updateQueue;if(Ge===null)return null;if(Ge=Ge.shared,(ls&2)!==0){var dn=Ge.pending;return dn===null?De.next=De:(De.next=dn.next,dn.next=De),Ge.pending=De,hs(Oe,$e)}return dn=Ge.interleaved,dn===null?(De.next=De,Vl(Ge)):(De.next=dn.next,dn.next=De),Ge.interleaved=De,hs(Oe,$e)}function nu(Oe,De,$e){if(De=De.updateQueue,De!==null&&(De=De.shared,($e&4194240)!==0)){var Ge=De.lanes;Ge&=Oe.pendingLanes,$e|=Ge,De.lanes=$e,Ho(Oe,$e)}}function Ra(Oe,De){var $e=Oe.updateQueue,Ge=Oe.alternate;if(Ge!==null&&(Ge=Ge.updateQueue,$e===Ge)){var dn=null,yn=null;if($e=$e.firstBaseUpdate,$e!==null){do{var On={eventTime:$e.eventTime,lane:$e.lane,tag:$e.tag,payload:$e.payload,callback:$e.callback,next:null};yn===null?dn=yn=On:yn=yn.next=On,$e=$e.next}while($e!==null);yn===null?dn=yn=De:yn=yn.next=De}else dn=yn=De;$e={baseState:Ge.baseState,firstBaseUpdate:dn,lastBaseUpdate:yn,shared:Ge.shared,effects:Ge.effects},Oe.updateQueue=$e;return}Oe=$e.lastBaseUpdate,Oe===null?$e.firstBaseUpdate=De:Oe.next=De,$e.lastBaseUpdate=De}function wl(Oe,De,$e,Ge){var dn=Oe.updateQueue;nl=!1;var yn=dn.firstBaseUpdate,On=dn.lastBaseUpdate,Xn=dn.shared.pending;if(Xn!==null){dn.shared.pending=null;var rr=Xn,Ar=rr.next;rr.next=null,On===null?yn=Ar:On.next=Ar,On=rr;var qr=Oe.alternate;qr!==null&&(qr=qr.updateQueue,Xn=qr.lastBaseUpdate,Xn!==On&&(Xn===null?qr.firstBaseUpdate=Ar:Xn.next=Ar,qr.lastBaseUpdate=rr))}if(yn!==null){var Xr=dn.baseState;On=0,qr=Ar=rr=null,Xn=yn;do{var zr=Xn.lane,mi=Xn.eventTime;if((Ge&zr)===zr){qr!==null&&(qr=qr.next={eventTime:mi,lane:0,tag:Xn.tag,payload:Xn.payload,callback:Xn.callback,next:null});e:{var bi=Oe,vi=Xn;switch(zr=De,mi=$e,vi.tag){case 1:if(bi=vi.payload,typeof bi=="function"){Xr=bi.call(mi,Xr,zr);break e}Xr=bi;break e;case 3:bi.flags=bi.flags&-65537|128;case 0:if(bi=vi.payload,zr=typeof bi=="function"?bi.call(mi,Xr,zr):bi,zr==null)break e;Xr=Sn({},Xr,zr);break e;case 2:nl=!0}}Xn.callback!==null&&Xn.lane!==0&&(Oe.flags|=64,zr=dn.effects,zr===null?dn.effects=[Xn]:zr.push(Xn))}else mi={eventTime:mi,lane:zr,tag:Xn.tag,payload:Xn.payload,callback:Xn.callback,next:null},qr===null?(Ar=qr=mi,rr=Xr):qr=qr.next=mi,On|=zr;if(Xn=Xn.next,Xn===null){if(Xn=dn.shared.pending,Xn===null)break;zr=Xn,Xn=zr.next,zr.next=null,dn.lastBaseUpdate=zr,dn.shared.pending=null}}while(!0);if(qr===null&&(rr=Xr),dn.baseState=rr,dn.firstBaseUpdate=Ar,dn.lastBaseUpdate=qr,De=dn.shared.interleaved,De!==null){dn=De;do On|=dn.lane,dn=dn.next;while(dn!==De)}else yn===null&&(dn.shared.lanes=0);Qu|=On,Oe.lanes=On,Oe.memoizedState=Xr}}function ru(Oe,De,$e){if(Oe=De.effects,De.effects=null,Oe!==null)for(De=0;De<Oe.length;De++){var Ge=Oe[De],dn=Ge.callback;if(dn!==null){if(Ge.callback=null,Ge=$e,typeof dn!="function")throw Error(t(191,dn));dn.call(Ge)}}}var xu={},ca=Ba(xu),Au=Ba(xu),jl=Ba(xu);function Tl(Oe){if(Oe===xu)throw Error(t(174));return Oe}function Su(Oe,De){switch(ws(jl,De),ws(Au,Oe),ws(ca,xu),Oe=De.nodeType,Oe){case 9:case 11:De=(De=De.documentElement)?De.namespaceURI:Pr(null,"");break;default:Oe=Oe===8?De.parentNode:De,De=Oe.namespaceURI||null,Oe=Oe.tagName,De=Pr(De,Oe)}ys(ca),ws(ca,De)}function rl(){ys(ca),ys(Au),ys(jl)}function Xc(Oe){Tl(jl.current);var De=Tl(ca.current),$e=Pr(De,Oe.type);De!==$e&&(ws(Au,Oe),ws(ca,$e))}function Oc(Oe){Au.current===Oe&&(ys(ca),ys(Au))}var Cs=Ba(0);function Ua(Oe){for(var De=Oe;De!==null;){if(De.tag===13){var $e=De.memoizedState;if($e!==null&&($e=$e.dehydrated,$e===null||$e.data==="$?"||$e.data==="$!"))return De}else if(De.tag===19&&De.memoizedProps.revealOrder!==void 0){if((De.flags&128)!==0)return De}else if(De.child!==null){De.child.return=De,De=De.child;continue}if(De===Oe)break;for(;De.sibling===null;){if(De.return===null||De.return===Oe)return null;De=De.return}De.sibling.return=De.return,De=De.sibling}return null}var Mc=[];function Nc(){for(var Oe=0;Oe<Mc.length;Oe++)Mc[Oe]._workInProgressVersionPrimary=null;Mc.length=0}var hc=He.ReactCurrentDispatcher,fc=He.ReactCurrentBatchConfig,il=0,Ms=null,to=null,Ws=null,Pu=!1,El=!1,Iu=0,Od=0;function ao(){throw Error(t(321))}function pc(Oe,De){if(De===null)return!1;for(var $e=0;$e<De.length&&$e<Oe.length;$e++)if(!as(Oe[$e],De[$e]))return!1;return!0}function Ku(Oe,De,$e,Ge,dn,yn){if(il=yn,Ms=De,De.memoizedState=null,De.updateQueue=null,De.lanes=0,hc.current=Oe===null||Oe.memoizedState===null?Ef:xf,Oe=$e(Ge,dn),El){yn=0;do{if(El=!1,Iu=0,25<=yn)throw Error(t(301));yn+=1,Ws=to=null,De.updateQueue=null,hc.current=Af,Oe=$e(Ge,dn)}while(El)}if(hc.current=nd,De=to!==null&&to.next!==null,il=0,Ws=to=Ms=null,Pu=!1,De)throw Error(t(300));return Oe}function sl(){var Oe=Iu!==0;return Iu=0,Oe}function za(){var Oe={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ws===null?Ms.memoizedState=Ws=Oe:Ws=Ws.next=Oe,Ws}function da(){if(to===null){var Oe=Ms.alternate;Oe=Oe!==null?Oe.memoizedState:null}else Oe=to.next;var De=Ws===null?Ms.memoizedState:Ws.next;if(De!==null)Ws=De,to=Oe;else{if(Oe===null)throw Error(t(310));to=Oe,Oe={memoizedState:to.memoizedState,baseState:to.baseState,baseQueue:to.baseQueue,queue:to.queue,next:null},Ws===null?Ms.memoizedState=Ws=Oe:Ws=Ws.next=Oe}return Ws}function Yu(Oe,De){return typeof De=="function"?De(Oe):De}function mc(Oe){var De=da(),$e=De.queue;if($e===null)throw Error(t(311));$e.lastRenderedReducer=Oe;var Ge=to,dn=Ge.baseQueue,yn=$e.pending;if(yn!==null){if(dn!==null){var On=dn.next;dn.next=yn.next,yn.next=On}Ge.baseQueue=dn=yn,$e.pending=null}if(dn!==null){yn=dn.next,Ge=Ge.baseState;var Xn=On=null,rr=null,Ar=yn;do{var qr=Ar.lane;if((il&qr)===qr)rr!==null&&(rr=rr.next={lane:0,action:Ar.action,hasEagerState:Ar.hasEagerState,eagerState:Ar.eagerState,next:null}),Ge=Ar.hasEagerState?Ar.eagerState:Oe(Ge,Ar.action);else{var Xr={lane:qr,action:Ar.action,hasEagerState:Ar.hasEagerState,eagerState:Ar.eagerState,next:null};rr===null?(Xn=rr=Xr,On=Ge):rr=rr.next=Xr,Ms.lanes|=qr,Qu|=qr}Ar=Ar.next}while(Ar!==null&&Ar!==yn);rr===null?On=Ge:rr.next=Xn,as(Ge,De.memoizedState)||(ka=!0),De.memoizedState=Ge,De.baseState=On,De.baseQueue=rr,$e.lastRenderedState=Ge}if(Oe=$e.interleaved,Oe!==null){dn=Oe;do yn=dn.lane,Ms.lanes|=yn,Qu|=yn,dn=dn.next;while(dn!==Oe)}else dn===null&&($e.lanes=0);return[De.memoizedState,$e.dispatch]}function $l(Oe){var De=da(),$e=De.queue;if($e===null)throw Error(t(311));$e.lastRenderedReducer=Oe;var Ge=$e.dispatch,dn=$e.pending,yn=De.memoizedState;if(dn!==null){$e.pending=null;var On=dn=dn.next;do yn=Oe(yn,On.action),On=On.next;while(On!==dn);as(yn,De.memoizedState)||(ka=!0),De.memoizedState=yn,De.baseQueue===null&&(De.baseState=yn),$e.lastRenderedState=yn}return[yn,Ge]}function Qc(){}function Lc(Oe,De){var $e=Ms,Ge=da(),dn=De(),yn=!as(Ge.memoizedState,dn);if(yn&&(Ge.memoizedState=dn,ka=!0),Ge=Ge.queue,yc(Zc.bind(null,$e,Ge,Oe),[Oe]),Ge.getSnapshot!==De||yn||Ws!==null&&Ws.memoizedState.tag&1){if($e.flags|=2048,ha(9,Dc.bind(null,$e,Ge,dn,De),void 0,null),Co===null)throw Error(t(349));(il&30)!==0||Jc($e,De,dn)}return dn}function Jc(Oe,De,$e){Oe.flags|=16384,Oe={getSnapshot:De,value:$e},De=Ms.updateQueue,De===null?(De={lastEffect:null,stores:null},Ms.updateQueue=De,De.stores=[Oe]):($e=De.stores,$e===null?De.stores=[Oe]:$e.push(Oe))}function Dc(Oe,De,$e,Ge){De.value=$e,De.getSnapshot=Ge,Ru(De)&&gc(Oe)}function Zc(Oe,De,$e){return $e(function(){Ru(De)&&gc(Oe)})}function Ru(Oe){var De=Oe.getSnapshot;Oe=Oe.value;try{var $e=De();return!as(Oe,$e)}catch{return!0}}function gc(Oe){var De=hs(Oe,1);De!==null&&Il(De,Oe,1,-1)}function Xu(Oe){var De=za();return typeof Oe=="function"&&(Oe=Oe()),De.memoizedState=De.baseState=Oe,Oe={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yu,lastRenderedState:Oe},De.queue=Oe,Oe=Oe.dispatch=Tf.bind(null,Ms,Oe),[De.memoizedState,Oe]}function ha(Oe,De,$e,Ge){return Oe={tag:Oe,create:De,destroy:$e,deps:Ge,next:null},De=Ms.updateQueue,De===null?(De={lastEffect:null,stores:null},Ms.updateQueue=De,De.lastEffect=Oe.next=Oe):($e=De.lastEffect,$e===null?De.lastEffect=Oe.next=Oe:(Ge=$e.next,$e.next=Oe,Oe.next=Ge,De.lastEffect=Oe)),Oe}function xl(){return da().memoizedState}function qa(Oe,De,$e,Ge){var dn=za();Ms.flags|=Oe,dn.memoizedState=ha(1|De,$e,void 0,Ge===void 0?null:Ge)}function iu(Oe,De,$e,Ge){var dn=da();Ge=Ge===void 0?null:Ge;var yn=void 0;if(to!==null){var On=to.memoizedState;if(yn=On.destroy,Ge!==null&&pc(Ge,On.deps)){dn.memoizedState=ha(De,$e,yn,Ge);return}}Ms.flags|=Oe,dn.memoizedState=ha(1|De,$e,yn,Ge)}function _c(Oe,De){return qa(8390656,8,Oe,De)}function yc(Oe,De){return iu(2048,8,Oe,De)}function ed(Oe,De){return iu(4,2,Oe,De)}function bc(Oe,De){return iu(4,4,Oe,De)}function vc(Oe,De){if(typeof De=="function")return Oe=Oe(),De(Oe),function(){De(null)};if(De!=null)return Oe=Oe(),De.current=Oe,function(){De.current=null}}function fh(Oe,De,$e){return $e=$e!=null?$e.concat([Oe]):null,iu(4,4,vc.bind(null,De,Oe),$e)}function Md(){}function ph(Oe,De){var $e=da();De=De===void 0?null:De;var Ge=$e.memoizedState;return Ge!==null&&De!==null&&pc(De,Ge[1])?Ge[0]:($e.memoizedState=[Oe,De],Oe)}function mh(Oe,De){var $e=da();De=De===void 0?null:De;var Ge=$e.memoizedState;return Ge!==null&&De!==null&&pc(De,Ge[1])?Ge[0]:(Oe=Oe(),$e.memoizedState=[Oe,De],Oe)}function gh(Oe,De,$e){return(il&21)===0?(Oe.baseState&&(Oe.baseState=!1,ka=!0),Oe.memoizedState=$e):(as($e,De)||($e=na(),Ms.lanes|=$e,Qu|=$e,Oe.baseState=!0),De)}function vf(Oe,De){var $e=Hi;Hi=$e!==0&&4>$e?$e:4,Oe(!0);var Ge=fc.transition;fc.transition={};try{Oe(!1),De()}finally{Hi=$e,fc.transition=Ge}}function _h(){return da().memoizedState}function wf(Oe,De,$e){var Ge=Mu(Oe);if($e={lane:Ge,action:$e,hasEagerState:!1,eagerState:null,next:null},yh(Oe))bh(De,$e);else if($e=vl(Oe,De,$e,Ge),$e!==null){var dn=pa();Il($e,Oe,Ge,dn),wh($e,De,Ge)}}function Tf(Oe,De,$e){var Ge=Mu(Oe),dn={lane:Ge,action:$e,hasEagerState:!1,eagerState:null,next:null};if(yh(Oe))bh(De,dn);else{var yn=Oe.alternate;if(Oe.lanes===0&&(yn===null||yn.lanes===0)&&(yn=De.lastRenderedReducer,yn!==null))try{var On=De.lastRenderedState,Xn=yn(On,$e);if(dn.hasEagerState=!0,dn.eagerState=Xn,as(Xn,On)){var rr=De.interleaved;rr===null?(dn.next=dn,Vl(De)):(dn.next=rr.next,rr.next=dn),De.interleaved=dn;return}}catch{}finally{}$e=vl(Oe,De,dn,Ge),$e!==null&&(dn=pa(),Il($e,Oe,Ge,dn),wh($e,De,Ge))}}function yh(Oe){var De=Oe.alternate;return Oe===Ms||De!==null&&De===Ms}function bh(Oe,De){El=Pu=!0;var $e=Oe.pending;$e===null?De.next=De:(De.next=$e.next,$e.next=De),Oe.pending=De}function wh(Oe,De,$e){if(($e&4194240)!==0){var Ge=De.lanes;Ge&=Oe.pendingLanes,$e|=Ge,De.lanes=$e,Ho(Oe,$e)}}var nd={readContext:eo,useCallback:ao,useContext:ao,useEffect:ao,useImperativeHandle:ao,useInsertionEffect:ao,useLayoutEffect:ao,useMemo:ao,useReducer:ao,useRef:ao,useState:ao,useDebugValue:ao,useDeferredValue:ao,useTransition:ao,useMutableSource:ao,useSyncExternalStore:ao,useId:ao,unstable_isNewReconciler:!1},Ef={readContext:eo,useCallback:function(Oe,De){return za().memoizedState=[Oe,De===void 0?null:De],Oe},useContext:eo,useEffect:_c,useImperativeHandle:function(Oe,De,$e){return $e=$e!=null?$e.concat([Oe]):null,qa(4194308,4,vc.bind(null,De,Oe),$e)},useLayoutEffect:function(Oe,De){return qa(4194308,4,Oe,De)},useInsertionEffect:function(Oe,De){return qa(4,2,Oe,De)},useMemo:function(Oe,De){var $e=za();return De=De===void 0?null:De,Oe=Oe(),$e.memoizedState=[Oe,De],Oe},useReducer:function(Oe,De,$e){var Ge=za();return De=$e!==void 0?$e(De):De,Ge.memoizedState=Ge.baseState=De,Oe={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oe,lastRenderedState:De},Ge.queue=Oe,Oe=Oe.dispatch=wf.bind(null,Ms,Oe),[Ge.memoizedState,Oe]},useRef:function(Oe){var De=za();return Oe={current:Oe},De.memoizedState=Oe},useState:Xu,useDebugValue:Md,useDeferredValue:function(Oe){return za().memoizedState=Oe},useTransition:function(){var Oe=Xu(!1),De=Oe[0];return Oe=vf.bind(null,Oe[1]),za().memoizedState=Oe,[De,Oe]},useMutableSource:function(){},useSyncExternalStore:function(Oe,De,$e){var Ge=Ms,dn=za();if(Cr){if($e===void 0)throw Error(t(407));$e=$e()}else{if($e=De(),Co===null)throw Error(t(349));(il&30)!==0||Jc(Ge,De,$e)}dn.memoizedState=$e;var yn={value:$e,getSnapshot:De};return dn.queue=yn,_c(Zc.bind(null,Ge,yn,Oe),[Oe]),Ge.flags|=2048,ha(9,Dc.bind(null,Ge,yn,$e,De),void 0,null),$e},useId:function(){var Oe=za(),De=Co.identifierPrefix;if(Cr){var $e=mr,Ge=pr;$e=(Ge&~(1<<32-ts(Ge)-1)).toString(32)+$e,De=":"+De+"R"+$e,$e=Iu++,0<$e&&(De+="H"+$e.toString(32)),De+=":"}else $e=Od++,De=":"+De+"r"+$e.toString(32)+":";return Oe.memoizedState=De},unstable_isNewReconciler:!1},xf={readContext:eo,useCallback:ph,useContext:eo,useEffect:yc,useImperativeHandle:fh,useInsertionEffect:ed,useLayoutEffect:bc,useMemo:mh,useReducer:mc,useRef:xl,useState:function(){return mc(Yu)},useDebugValue:Md,useDeferredValue:function(Oe){var De=da();return gh(De,to.memoizedState,Oe)},useTransition:function(){var Oe=mc(Yu)[0],De=da().memoizedState;return[Oe,De]},useMutableSource:Qc,useSyncExternalStore:Lc,useId:_h,unstable_isNewReconciler:!1},Af={readContext:eo,useCallback:ph,useContext:eo,useEffect:yc,useImperativeHandle:fh,useInsertionEffect:ed,useLayoutEffect:bc,useMemo:mh,useReducer:$l,useRef:xl,useState:function(){return $l(Yu)},useDebugValue:Md,useDeferredValue:function(Oe){var De=da();return to===null?De.memoizedState=Oe:gh(De,to.memoizedState,Oe)},useTransition:function(){var Oe=$l(Yu)[0],De=da().memoizedState;return[Oe,De]},useMutableSource:Qc,useSyncExternalStore:Lc,useId:_h,unstable_isNewReconciler:!1};function Al(Oe,De){if(Oe&&Oe.defaultProps){De=Sn({},De),Oe=Oe.defaultProps;for(var $e in Oe)De[$e]===void 0&&(De[$e]=Oe[$e]);return De}return De}function Nd(Oe,De,$e,Ge){De=Oe.memoizedState,$e=$e(Ge,De),$e=$e==null?De:Sn({},De,$e),Oe.memoizedState=$e,Oe.lanes===0&&(Oe.updateQueue.baseState=$e)}var rd={isMounted:function(Oe){return(Oe=Oe._reactInternals)?Kn(Oe)===Oe:!1},enqueueSetState:function(Oe,De,$e){Oe=Oe._reactInternals;var Ge=pa(),dn=Mu(Oe),yn=Pa(Ge,dn);yn.payload=De,$e!=null&&(yn.callback=$e),De=Ia(Oe,yn,dn),De!==null&&(Il(De,Oe,dn,Ge),nu(De,Oe,dn))},enqueueReplaceState:function(Oe,De,$e){Oe=Oe._reactInternals;var Ge=pa(),dn=Mu(Oe),yn=Pa(Ge,dn);yn.tag=1,yn.payload=De,$e!=null&&(yn.callback=$e),De=Ia(Oe,yn,dn),De!==null&&(Il(De,Oe,dn,Ge),nu(De,Oe,dn))},enqueueForceUpdate:function(Oe,De){Oe=Oe._reactInternals;var $e=pa(),Ge=Mu(Oe),dn=Pa($e,Ge);dn.tag=2,De!=null&&(dn.callback=De),De=Ia(Oe,dn,Ge),De!==null&&(Il(De,Oe,Ge,$e),nu(De,Oe,Ge))}};function Th(Oe,De,$e,Ge,dn,yn,On){return Oe=Oe.stateNode,typeof Oe.shouldComponentUpdate=="function"?Oe.shouldComponentUpdate(Ge,yn,On):De.prototype&&De.prototype.isPureReactComponent?!pl($e,Ge)||!pl(dn,yn):!0}function Eh(Oe,De,$e){var Ge=!1,dn=Fl,yn=De.contextType;return typeof yn=="object"&&yn!==null?yn=eo(yn):(dn=Jo(De)?eu:_o.current,Ge=De.contextTypes,yn=(Ge=Ge!=null)?Eu(Oe,dn):Fl),De=new De($e,yn),Oe.memoizedState=De.state!==null&&De.state!==void 0?De.state:null,De.updater=rd,Oe.stateNode=De,De._reactInternals=Oe,Ge&&(Oe=Oe.stateNode,Oe.__reactInternalMemoizedUnmaskedChildContext=dn,Oe.__reactInternalMemoizedMaskedChildContext=yn),De}function xh(Oe,De,$e,Ge){Oe=De.state,typeof De.componentWillReceiveProps=="function"&&De.componentWillReceiveProps($e,Ge),typeof De.UNSAFE_componentWillReceiveProps=="function"&&De.UNSAFE_componentWillReceiveProps($e,Ge),De.state!==Oe&&rd.enqueueReplaceState(De,De.state,null)}function Ld(Oe,De,$e,Ge){var dn=Oe.stateNode;dn.props=$e,dn.state=Oe.memoizedState,dn.refs={},dc(Oe);var yn=De.contextType;typeof yn=="object"&&yn!==null?dn.context=eo(yn):(yn=Jo(De)?eu:_o.current,dn.context=Eu(Oe,yn)),dn.state=Oe.memoizedState,yn=De.getDerivedStateFromProps,typeof yn=="function"&&(Nd(Oe,De,yn,$e),dn.state=Oe.memoizedState),typeof De.getDerivedStateFromProps=="function"||typeof dn.getSnapshotBeforeUpdate=="function"||typeof dn.UNSAFE_componentWillMount!="function"&&typeof dn.componentWillMount!="function"||(De=dn.state,typeof dn.componentWillMount=="function"&&dn.componentWillMount(),typeof dn.UNSAFE_componentWillMount=="function"&&dn.UNSAFE_componentWillMount(),De!==dn.state&&rd.enqueueReplaceState(dn,dn.state,null),wl(Oe,$e,dn,Ge),dn.state=Oe.memoizedState),typeof dn.componentDidMount=="function"&&(Oe.flags|=4194308)}function wc(Oe,De){try{var $e="",Ge=De;do $e+=zn(Ge),Ge=Ge.return;while(Ge);var dn=$e}catch(yn){dn=`
Error generating stack: `+yn.message+`
`+yn.stack}return{value:Oe,source:De,stack:dn,digest:null}}function Dd(Oe,De,$e){return{value:Oe,source:null,stack:$e??null,digest:De??null}}function Fd(Oe,De){try{console.error(De.value)}catch($e){setTimeout(function(){throw $e})}}var Sf=typeof WeakMap=="function"?WeakMap:Map;function Ah(Oe,De,$e){$e=Pa(-1,$e),$e.tag=3,$e.payload={element:null};var Ge=De.value;return $e.callback=function(){dd||(dd=!0,Jd=Ge),Fd(Oe,De)},$e}function Sh(Oe,De,$e){$e=Pa(-1,$e),$e.tag=3;var Ge=Oe.type.getDerivedStateFromError;if(typeof Ge=="function"){var dn=De.value;$e.payload=function(){return Ge(dn)},$e.callback=function(){Fd(Oe,De)}}var yn=Oe.stateNode;return yn!==null&&typeof yn.componentDidCatch=="function"&&($e.callback=function(){Fd(Oe,De),typeof Ge!="function"&&(Cu===null?Cu=new Set([this]):Cu.add(this));var On=De.stack;this.componentDidCatch(De.value,{componentStack:On!==null?On:""})}),$e}function Ph(Oe,De,$e){var Ge=Oe.pingCache;if(Ge===null){Ge=Oe.pingCache=new Sf;var dn=new Set;Ge.set(De,dn)}else dn=Ge.get(De),dn===void 0&&(dn=new Set,Ge.set(De,dn));dn.has($e)||(dn.add($e),Oe=Bf.bind(null,Oe,De,$e),De.then(Oe,Oe))}function Ih(Oe){do{var De;if((De=Oe.tag===13)&&(De=Oe.memoizedState,De=De!==null?De.dehydrated!==null:!0),De)return Oe;Oe=Oe.return}while(Oe!==null);return null}function Rh(Oe,De,$e,Ge,dn){return(Oe.mode&1)===0?(Oe===De?Oe.flags|=65536:(Oe.flags|=128,$e.flags|=131072,$e.flags&=-52805,$e.tag===1&&($e.alternate===null?$e.tag=17:(De=Pa(-1,1),De.tag=2,Ia($e,De,1))),$e.lanes|=1),Oe):(Oe.flags|=65536,Oe.lanes=dn,Oe)}var Pf=He.ReactCurrentOwner,ka=!1;function fa(Oe,De,$e,Ge){De.child=Oe===null?ds(De,null,$e,Ge):so(De,Oe.child,$e,Ge)}function kh(Oe,De,$e,Ge,dn){$e=$e.render;var yn=De.ref;return Fs(De,dn),Ge=Ku(Oe,De,$e,Ge,yn,dn),$e=sl(),Oe!==null&&!ka?(De.updateQueue=Oe.updateQueue,De.flags&=-2053,Oe.lanes&=~dn,su(Oe,De,dn)):(Cr&&$e&&Ir(De),De.flags|=1,fa(Oe,De,Ge,dn),De.child)}function Ch(Oe,De,$e,Ge,dn){if(Oe===null){var yn=$e.type;return typeof yn=="function"&&!sh(yn)&&yn.defaultProps===void 0&&$e.compare===null&&$e.defaultProps===void 0?(De.tag=15,De.type=yn,Oh(Oe,De,yn,Ge,dn)):(Oe=yd($e.type,null,Ge,De,De.mode,dn),Oe.ref=De.ref,Oe.return=De,De.child=Oe)}if(yn=Oe.child,(Oe.lanes&dn)===0){var On=yn.memoizedProps;if($e=$e.compare,$e=$e!==null?$e:pl,$e(On,Ge)&&Oe.ref===De.ref)return su(Oe,De,dn)}return De.flags|=1,Oe=Lu(yn,Ge),Oe.ref=De.ref,Oe.return=De,De.child=Oe}function Oh(Oe,De,$e,Ge,dn){if(Oe!==null){var yn=Oe.memoizedProps;if(pl(yn,Ge)&&Oe.ref===De.ref)if(ka=!1,De.pendingProps=Ge=yn,(Oe.lanes&dn)!==0)(Oe.flags&131072)!==0&&(ka=!0);else return De.lanes=Oe.lanes,su(Oe,De,dn)}return Vd(Oe,De,$e,Ge,dn)}function Mh(Oe,De,$e){var Ge=De.pendingProps,dn=Ge.children,yn=Oe!==null?Oe.memoizedState:null;if(Ge.mode==="hidden")if((De.mode&1)===0)De.memoizedState={baseLanes:0,cachePool:null,transitions:null},ws(Ec,Ga),Ga|=$e;else{if(($e&1073741824)===0)return Oe=yn!==null?yn.baseLanes|$e:$e,De.lanes=De.childLanes=1073741824,De.memoizedState={baseLanes:Oe,cachePool:null,transitions:null},De.updateQueue=null,ws(Ec,Ga),Ga|=Oe,null;De.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge=yn!==null?yn.baseLanes:$e,ws(Ec,Ga),Ga|=Ge}else yn!==null?(Ge=yn.baseLanes|$e,De.memoizedState=null):Ge=$e,ws(Ec,Ga),Ga|=Ge;return fa(Oe,De,dn,$e),De.child}function Nh(Oe,De){var $e=De.ref;(Oe===null&&$e!==null||Oe!==null&&Oe.ref!==$e)&&(De.flags|=512,De.flags|=2097152)}function Vd(Oe,De,$e,Ge,dn){var yn=Jo($e)?eu:_o.current;return yn=Eu(De,yn),Fs(De,dn),$e=Ku(Oe,De,$e,Ge,yn,dn),Ge=sl(),Oe!==null&&!ka?(De.updateQueue=Oe.updateQueue,De.flags&=-2053,Oe.lanes&=~dn,su(Oe,De,dn)):(Cr&&Ge&&Ir(De),De.flags|=1,fa(Oe,De,$e,dn),De.child)}function Lh(Oe,De,$e,Ge,dn){if(Jo($e)){var yn=!0;tu(De)}else yn=!1;if(Fs(De,dn),De.stateNode===null)od(Oe,De),Eh(De,$e,Ge),Ld(De,$e,Ge,dn),Ge=!0;else if(Oe===null){var On=De.stateNode,Xn=De.memoizedProps;On.props=Xn;var rr=On.context,Ar=$e.contextType;typeof Ar=="object"&&Ar!==null?Ar=eo(Ar):(Ar=Jo($e)?eu:_o.current,Ar=Eu(De,Ar));var qr=$e.getDerivedStateFromProps,Xr=typeof qr=="function"||typeof On.getSnapshotBeforeUpdate=="function";Xr||typeof On.UNSAFE_componentWillReceiveProps!="function"&&typeof On.componentWillReceiveProps!="function"||(Xn!==Ge||rr!==Ar)&&xh(De,On,Ge,Ar),nl=!1;var zr=De.memoizedState;On.state=zr,wl(De,Ge,On,dn),rr=De.memoizedState,Xn!==Ge||zr!==rr||Qo.current||nl?(typeof qr=="function"&&(Nd(De,$e,qr,Ge),rr=De.memoizedState),(Xn=nl||Th(De,$e,Xn,Ge,zr,rr,Ar))?(Xr||typeof On.UNSAFE_componentWillMount!="function"&&typeof On.componentWillMount!="function"||(typeof On.componentWillMount=="function"&&On.componentWillMount(),typeof On.UNSAFE_componentWillMount=="function"&&On.UNSAFE_componentWillMount()),typeof On.componentDidMount=="function"&&(De.flags|=4194308)):(typeof On.componentDidMount=="function"&&(De.flags|=4194308),De.memoizedProps=Ge,De.memoizedState=rr),On.props=Ge,On.state=rr,On.context=Ar,Ge=Xn):(typeof On.componentDidMount=="function"&&(De.flags|=4194308),Ge=!1)}else{On=De.stateNode,Cc(Oe,De),Xn=De.memoizedProps,Ar=De.type===De.elementType?Xn:Al(De.type,Xn),On.props=Ar,Xr=De.pendingProps,zr=On.context,rr=$e.contextType,typeof rr=="object"&&rr!==null?rr=eo(rr):(rr=Jo($e)?eu:_o.current,rr=Eu(De,rr));var mi=$e.getDerivedStateFromProps;(qr=typeof mi=="function"||typeof On.getSnapshotBeforeUpdate=="function")||typeof On.UNSAFE_componentWillReceiveProps!="function"&&typeof On.componentWillReceiveProps!="function"||(Xn!==Xr||zr!==rr)&&xh(De,On,Ge,rr),nl=!1,zr=De.memoizedState,On.state=zr,wl(De,Ge,On,dn);var bi=De.memoizedState;Xn!==Xr||zr!==bi||Qo.current||nl?(typeof mi=="function"&&(Nd(De,$e,mi,Ge),bi=De.memoizedState),(Ar=nl||Th(De,$e,Ar,Ge,zr,bi,rr)||!1)?(qr||typeof On.UNSAFE_componentWillUpdate!="function"&&typeof On.componentWillUpdate!="function"||(typeof On.componentWillUpdate=="function"&&On.componentWillUpdate(Ge,bi,rr),typeof On.UNSAFE_componentWillUpdate=="function"&&On.UNSAFE_componentWillUpdate(Ge,bi,rr)),typeof On.componentDidUpdate=="function"&&(De.flags|=4),typeof On.getSnapshotBeforeUpdate=="function"&&(De.flags|=1024)):(typeof On.componentDidUpdate!="function"||Xn===Oe.memoizedProps&&zr===Oe.memoizedState||(De.flags|=4),typeof On.getSnapshotBeforeUpdate!="function"||Xn===Oe.memoizedProps&&zr===Oe.memoizedState||(De.flags|=1024),De.memoizedProps=Ge,De.memoizedState=bi),On.props=Ge,On.state=bi,On.context=rr,Ge=Ar):(typeof On.componentDidUpdate!="function"||Xn===Oe.memoizedProps&&zr===Oe.memoizedState||(De.flags|=4),typeof On.getSnapshotBeforeUpdate!="function"||Xn===Oe.memoizedProps&&zr===Oe.memoizedState||(De.flags|=1024),Ge=!1)}return jd(Oe,De,$e,Ge,yn,dn)}function jd(Oe,De,$e,Ge,dn,yn){Nh(Oe,De);var On=(De.flags&128)!==0;if(!Ge&&!On)return dn&&Yc(De,$e,!1),su(Oe,De,yn);Ge=De.stateNode,Pf.current=De;var Xn=On&&typeof $e.getDerivedStateFromError!="function"?null:Ge.render();return De.flags|=1,Oe!==null&&On?(De.child=so(De,Oe.child,null,yn),De.child=so(De,null,Xn,yn)):fa(Oe,De,Xn,yn),De.memoizedState=Ge.state,dn&&Yc(De,$e,!0),De.child}function Dh(Oe){var De=Oe.stateNode;De.pendingContext?Kc(Oe,De.pendingContext,De.pendingContext!==De.context):De.context&&Kc(Oe,De.context,!1),Su(Oe,De.containerInfo)}function Fh(Oe,De,$e,Ge,dn){return Ki(),bs(dn),De.flags|=256,fa(Oe,De,$e,Ge),De.child}var $d={dehydrated:null,treeContext:null,retryLane:0};function Bd(Oe){return{baseLanes:Oe,cachePool:null,transitions:null}}function Vh(Oe,De,$e){var Ge=De.pendingProps,dn=Cs.current,yn=!1,On=(De.flags&128)!==0,Xn;if((Xn=On)||(Xn=Oe!==null&&Oe.memoizedState===null?!1:(dn&2)!==0),Xn?(yn=!0,De.flags&=-129):(Oe===null||Oe.memoizedState!==null)&&(dn|=1),ws(Cs,dn&1),Oe===null)return ai(De),Oe=De.memoizedState,Oe!==null&&(Oe=Oe.dehydrated,Oe!==null)?((De.mode&1)===0?De.lanes=1:Oe.data==="$!"?De.lanes=8:De.lanes=1073741824,null):(On=Ge.children,Oe=Ge.fallback,yn?(Ge=De.mode,yn=De.child,On={mode:"hidden",children:On},(Ge&1)===0&&yn!==null?(yn.childLanes=0,yn.pendingProps=On):yn=bd(On,Ge,0,null),Oe=nc(Oe,Ge,$e,null),yn.return=De,Oe.return=De,yn.sibling=Oe,De.child=yn,De.child.memoizedState=Bd($e),De.memoizedState=$d,Oe):Ud(De,On));if(dn=Oe.memoizedState,dn!==null&&(Xn=dn.dehydrated,Xn!==null))return Rf(Oe,De,On,Ge,Xn,dn,$e);if(yn){yn=Ge.fallback,On=De.mode,dn=Oe.child,Xn=dn.sibling;var rr={mode:"hidden",children:Ge.children};return(On&1)===0&&De.child!==dn?(Ge=De.child,Ge.childLanes=0,Ge.pendingProps=rr,De.deletions=null):(Ge=Lu(dn,rr),Ge.subtreeFlags=dn.subtreeFlags&14680064),Xn!==null?yn=Lu(Xn,yn):(yn=nc(yn,On,$e,null),yn.flags|=2),yn.return=De,Ge.return=De,Ge.sibling=yn,De.child=Ge,Ge=yn,yn=De.child,On=Oe.child.memoizedState,On=On===null?Bd($e):{baseLanes:On.baseLanes|$e,cachePool:null,transitions:On.transitions},yn.memoizedState=On,yn.childLanes=Oe.childLanes&~$e,De.memoizedState=$d,Ge}return yn=Oe.child,Oe=yn.sibling,Ge=Lu(yn,{mode:"visible",children:Ge.children}),(De.mode&1)===0&&(Ge.lanes=$e),Ge.return=De,Ge.sibling=null,Oe!==null&&($e=De.deletions,$e===null?(De.deletions=[Oe],De.flags|=16):$e.push(Oe)),De.child=Ge,De.memoizedState=null,Ge}function Ud(Oe,De){return De=bd({mode:"visible",children:De},Oe.mode,0,null),De.return=Oe,Oe.child=De}function sd(Oe,De,$e,Ge){return Ge!==null&&bs(Ge),so(De,Oe.child,null,$e),Oe=Ud(De,De.pendingProps.children),Oe.flags|=2,De.memoizedState=null,Oe}function Rf(Oe,De,$e,Ge,dn,yn,On){if($e)return De.flags&256?(De.flags&=-257,Ge=Dd(Error(t(422))),sd(Oe,De,On,Ge)):De.memoizedState!==null?(De.child=Oe.child,De.flags|=128,null):(yn=Ge.fallback,dn=De.mode,Ge=bd({mode:"visible",children:Ge.children},dn,0,null),yn=nc(yn,dn,On,null),yn.flags|=2,Ge.return=De,yn.return=De,Ge.sibling=yn,De.child=Ge,(De.mode&1)!==0&&so(De,Oe.child,null,On),De.child.memoizedState=Bd(On),De.memoizedState=$d,yn);if((De.mode&1)===0)return sd(Oe,De,On,null);if(dn.data==="$!"){if(Ge=dn.nextSibling&&dn.nextSibling.dataset,Ge)var Xn=Ge.dgst;return Ge=Xn,yn=Error(t(419)),Ge=Dd(yn,Ge,void 0),sd(Oe,De,On,Ge)}if(Xn=(On&Oe.childLanes)!==0,ka||Xn){if(Ge=Co,Ge!==null){switch(On&-On){case 4:dn=2;break;case 16:dn=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:dn=32;break;case 536870912:dn=268435456;break;default:dn=0}dn=(dn&(Ge.suspendedLanes|On))!==0?0:dn,dn!==0&&dn!==yn.retryLane&&(yn.retryLane=dn,hs(Oe,dn),Il(Ge,Oe,dn,-1))}return ih(),Ge=Dd(Error(t(421))),sd(Oe,De,On,Ge)}return dn.data==="$?"?(De.flags|=128,De.child=Oe.child,De=Uf.bind(null,Oe),dn._reactRetry=De,null):(Oe=yn.treeContext,Or=Uo(dn.nextSibling),sr=De,Cr=!0,Mr=null,Oe!==null&&(jn[qn++]=pr,jn[qn++]=mr,jn[qn++]=tr,pr=Oe.id,mr=Oe.overflow,tr=De),De=Ud(De,Ge.children),De.flags|=4096,De)}function jh(Oe,De,$e){Oe.lanes|=De;var Ge=Oe.alternate;Ge!==null&&(Ge.lanes|=De),Sa(Oe.return,De,$e)}function zd(Oe,De,$e,Ge,dn){var yn=Oe.memoizedState;yn===null?Oe.memoizedState={isBackwards:De,rendering:null,renderingStartTime:0,last:Ge,tail:$e,tailMode:dn}:(yn.isBackwards=De,yn.rendering=null,yn.renderingStartTime=0,yn.last=Ge,yn.tail=$e,yn.tailMode=dn)}function $h(Oe,De,$e){var Ge=De.pendingProps,dn=Ge.revealOrder,yn=Ge.tail;if(fa(Oe,De,Ge.children,$e),Ge=Cs.current,(Ge&2)!==0)Ge=Ge&1|2,De.flags|=128;else{if(Oe!==null&&(Oe.flags&128)!==0)e:for(Oe=De.child;Oe!==null;){if(Oe.tag===13)Oe.memoizedState!==null&&jh(Oe,$e,De);else if(Oe.tag===19)jh(Oe,$e,De);else if(Oe.child!==null){Oe.child.return=Oe,Oe=Oe.child;continue}if(Oe===De)break e;for(;Oe.sibling===null;){if(Oe.return===null||Oe.return===De)break e;Oe=Oe.return}Oe.sibling.return=Oe.return,Oe=Oe.sibling}Ge&=1}if(ws(Cs,Ge),(De.mode&1)===0)De.memoizedState=null;else switch(dn){case"forwards":for($e=De.child,dn=null;$e!==null;)Oe=$e.alternate,Oe!==null&&Ua(Oe)===null&&(dn=$e),$e=$e.sibling;$e=dn,$e===null?(dn=De.child,De.child=null):(dn=$e.sibling,$e.sibling=null),zd(De,!1,dn,$e,yn);break;case"backwards":for($e=null,dn=De.child,De.child=null;dn!==null;){if(Oe=dn.alternate,Oe!==null&&Ua(Oe)===null){De.child=dn;break}Oe=dn.sibling,dn.sibling=$e,$e=dn,dn=Oe}zd(De,!0,$e,null,yn);break;case"together":zd(De,!1,null,null,void 0);break;default:De.memoizedState=null}return De.child}function od(Oe,De){(De.mode&1)===0&&Oe!==null&&(Oe.alternate=null,De.alternate=null,De.flags|=2)}function su(Oe,De,$e){if(Oe!==null&&(De.dependencies=Oe.dependencies),Qu|=De.lanes,($e&De.childLanes)===0)return null;if(Oe!==null&&De.child!==Oe.child)throw Error(t(153));if(De.child!==null){for(Oe=De.child,$e=Lu(Oe,Oe.pendingProps),De.child=$e,$e.return=De;Oe.sibling!==null;)Oe=Oe.sibling,$e=$e.sibling=Lu(Oe,Oe.pendingProps),$e.return=De;$e.sibling=null}return De.child}function kf(Oe,De,$e){switch(De.tag){case 3:Dh(De),Ki();break;case 5:Xc(De);break;case 1:Jo(De.type)&&tu(De);break;case 4:Su(De,De.stateNode.containerInfo);break;case 10:var Ge=De.type._context,dn=De.memoizedProps.value;ws(Ro,Ge._currentValue),Ge._currentValue=dn;break;case 13:if(Ge=De.memoizedState,Ge!==null)return Ge.dehydrated!==null?(ws(Cs,Cs.current&1),De.flags|=128,null):($e&De.child.childLanes)!==0?Vh(Oe,De,$e):(ws(Cs,Cs.current&1),Oe=su(Oe,De,$e),Oe!==null?Oe.sibling:null);ws(Cs,Cs.current&1);break;case 19:if(Ge=($e&De.childLanes)!==0,(Oe.flags&128)!==0){if(Ge)return $h(Oe,De,$e);De.flags|=128}if(dn=De.memoizedState,dn!==null&&(dn.rendering=null,dn.tail=null,dn.lastEffect=null),ws(Cs,Cs.current),Ge)break;return null;case 22:case 23:return De.lanes=0,Mh(Oe,De,$e)}return su(Oe,De,$e)}var Bh,qd,Uh,zh;Bh=function(Oe,De){for(var $e=De.child;$e!==null;){if($e.tag===5||$e.tag===6)Oe.appendChild($e.stateNode);else if($e.tag!==4&&$e.child!==null){$e.child.return=$e,$e=$e.child;continue}if($e===De)break;for(;$e.sibling===null;){if($e.return===null||$e.return===De)return;$e=$e.return}$e.sibling.return=$e.return,$e=$e.sibling}},qd=function(){},Uh=function(Oe,De,$e,Ge){var dn=Oe.memoizedProps;if(dn!==Ge){Oe=De.stateNode,Tl(ca.current);var yn=null;switch($e){case"input":dn=Qr(Oe,dn),Ge=Qr(Oe,Ge),yn=[];break;case"select":dn=Sn({},dn,{value:void 0}),Ge=Sn({},Ge,{value:void 0}),yn=[];break;case"textarea":dn=Fr(Oe,dn),Ge=Fr(Oe,Ge),yn=[];break;default:typeof dn.onClick!="function"&&typeof Ge.onClick=="function"&&(Oe.onclick=vu)}Ni($e,Ge);var On;$e=null;for(Ar in dn)if(!Ge.hasOwnProperty(Ar)&&dn.hasOwnProperty(Ar)&&dn[Ar]!=null)if(Ar==="style"){var Xn=dn[Ar];for(On in Xn)Xn.hasOwnProperty(On)&&($e||($e={}),$e[On]="")}else Ar!=="dangerouslySetInnerHTML"&&Ar!=="children"&&Ar!=="suppressContentEditableWarning"&&Ar!=="suppressHydrationWarning"&&Ar!=="autoFocus"&&(Te.hasOwnProperty(Ar)?yn||(yn=[]):(yn=yn||[]).push(Ar,null));for(Ar in Ge){var rr=Ge[Ar];if(Xn=dn?.[Ar],Ge.hasOwnProperty(Ar)&&rr!==Xn&&(rr!=null||Xn!=null))if(Ar==="style")if(Xn){for(On in Xn)!Xn.hasOwnProperty(On)||rr&&rr.hasOwnProperty(On)||($e||($e={}),$e[On]="");for(On in rr)rr.hasOwnProperty(On)&&Xn[On]!==rr[On]&&($e||($e={}),$e[On]=rr[On])}else $e||(yn||(yn=[]),yn.push(Ar,$e)),$e=rr;else Ar==="dangerouslySetInnerHTML"?(rr=rr?rr.__html:void 0,Xn=Xn?Xn.__html:void 0,rr!=null&&Xn!==rr&&(yn=yn||[]).push(Ar,rr)):Ar==="children"?typeof rr!="string"&&typeof rr!="number"||(yn=yn||[]).push(Ar,""+rr):Ar!=="suppressContentEditableWarning"&&Ar!=="suppressHydrationWarning"&&(Te.hasOwnProperty(Ar)?(rr!=null&&Ar==="onScroll"&&xs("scroll",Oe),yn||Xn===rr||(yn=[])):(yn=yn||[]).push(Ar,rr))}$e&&(yn=yn||[]).push("style",$e);var Ar=yn;(De.updateQueue=Ar)&&(De.flags|=4)}},zh=function(Oe,De,$e,Ge){$e!==Ge&&(De.flags|=4)};function Fc(Oe,De){if(!Cr)switch(Oe.tailMode){case"hidden":De=Oe.tail;for(var $e=null;De!==null;)De.alternate!==null&&($e=De),De=De.sibling;$e===null?Oe.tail=null:$e.sibling=null;break;case"collapsed":$e=Oe.tail;for(var Ge=null;$e!==null;)$e.alternate!==null&&(Ge=$e),$e=$e.sibling;Ge===null?De||Oe.tail===null?Oe.tail=null:Oe.tail.sibling=null:Ge.sibling=null}}function ea(Oe){var De=Oe.alternate!==null&&Oe.alternate.child===Oe.child,$e=0,Ge=0;if(De)for(var dn=Oe.child;dn!==null;)$e|=dn.lanes|dn.childLanes,Ge|=dn.subtreeFlags&14680064,Ge|=dn.flags&14680064,dn.return=Oe,dn=dn.sibling;else for(dn=Oe.child;dn!==null;)$e|=dn.lanes|dn.childLanes,Ge|=dn.subtreeFlags,Ge|=dn.flags,dn.return=Oe,dn=dn.sibling;return Oe.subtreeFlags|=Ge,Oe.childLanes=$e,De}function Cf(Oe,De,$e){var Ge=De.pendingProps;switch(ir(De),De.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ea(De),null;case 1:return Jo(De.type)&&cc(),ea(De),null;case 3:return Ge=De.stateNode,rl(),ys(Qo),ys(_o),Nc(),Ge.pendingContext&&(Ge.context=Ge.pendingContext,Ge.pendingContext=null),(Oe===null||Oe.child===null)&&(is(De)?De.flags|=4:Oe===null||Oe.memoizedState.isDehydrated&&(De.flags&256)===0||(De.flags|=1024,Mr!==null&&(th(Mr),Mr=null))),qd(Oe,De),ea(De),null;case 5:Oc(De);var dn=Tl(jl.current);if($e=De.type,Oe!==null&&De.stateNode!=null)Uh(Oe,De,$e,Ge,dn),Oe.ref!==De.ref&&(De.flags|=512,De.flags|=2097152);else{if(!Ge){if(De.stateNode===null)throw Error(t(166));return ea(De),null}if(Oe=Tl(ca.current),is(De)){Ge=De.stateNode,$e=De.type;var yn=De.memoizedProps;switch(Ge[tl]=De,Ge[wu]=yn,Oe=(De.mode&1)!==0,$e){case"dialog":xs("cancel",Ge),xs("close",Ge);break;case"iframe":case"object":case"embed":xs("load",Ge);break;case"video":case"audio":for(dn=0;dn<Ll.length;dn++)xs(Ll[dn],Ge);break;case"source":xs("error",Ge);break;case"img":case"image":case"link":xs("error",Ge),xs("load",Ge);break;case"details":xs("toggle",Ge);break;case"input":wr(Ge,yn),xs("invalid",Ge);break;case"select":Ge._wrapperState={wasMultiple:!!yn.multiple},xs("invalid",Ge);break;case"textarea":li(Ge,yn),xs("invalid",Ge)}Ni($e,yn),dn=null;for(var On in yn)if(yn.hasOwnProperty(On)){var Xn=yn[On];On==="children"?typeof Xn=="string"?Ge.textContent!==Xn&&(yn.suppressHydrationWarning!==!0&&uc(Ge.textContent,Xn,Oe),dn=["children",Xn]):typeof Xn=="number"&&Ge.textContent!==""+Xn&&(yn.suppressHydrationWarning!==!0&&uc(Ge.textContent,Xn,Oe),dn=["children",""+Xn]):Te.hasOwnProperty(On)&&Xn!=null&&On==="onScroll"&&xs("scroll",Ge)}switch($e){case"input":kr(Ge),ui(Ge,yn,!0);break;case"textarea":kr(Ge),ei(Ge);break;case"select":case"option":break;default:typeof yn.onClick=="function"&&(Ge.onclick=vu)}Ge=dn,De.updateQueue=Ge,Ge!==null&&(De.flags|=4)}else{On=dn.nodeType===9?dn:dn.ownerDocument,Oe==="http://www.w3.org/1999/xhtml"&&(Oe=fr($e)),Oe==="http://www.w3.org/1999/xhtml"?$e==="script"?(Oe=On.createElement("div"),Oe.innerHTML="<script><\/script>",Oe=Oe.removeChild(Oe.firstChild)):typeof Ge.is=="string"?Oe=On.createElement($e,{is:Ge.is}):(Oe=On.createElement($e),$e==="select"&&(On=Oe,Ge.multiple?On.multiple=!0:Ge.size&&(On.size=Ge.size))):Oe=On.createElementNS(Oe,$e),Oe[tl]=De,Oe[wu]=Ge,Bh(Oe,De,!1,!1),De.stateNode=Oe;e:{switch(On=As($e,Ge),$e){case"dialog":xs("cancel",Oe),xs("close",Oe),dn=Ge;break;case"iframe":case"object":case"embed":xs("load",Oe),dn=Ge;break;case"video":case"audio":for(dn=0;dn<Ll.length;dn++)xs(Ll[dn],Oe);dn=Ge;break;case"source":xs("error",Oe),dn=Ge;break;case"img":case"image":case"link":xs("error",Oe),xs("load",Oe),dn=Ge;break;case"details":xs("toggle",Oe),dn=Ge;break;case"input":wr(Oe,Ge),dn=Qr(Oe,Ge),xs("invalid",Oe);break;case"option":dn=Ge;break;case"select":Oe._wrapperState={wasMultiple:!!Ge.multiple},dn=Sn({},Ge,{value:void 0}),xs("invalid",Oe);break;case"textarea":li(Oe,Ge),dn=Fr(Oe,Ge),xs("invalid",Oe);break;default:dn=Ge}Ni($e,dn),Xn=dn;for(yn in Xn)if(Xn.hasOwnProperty(yn)){var rr=Xn[yn];yn==="style"?fi(Oe,rr):yn==="dangerouslySetInnerHTML"?(rr=rr?rr.__html:void 0,rr!=null&&Gr(Oe,rr)):yn==="children"?typeof rr=="string"?($e!=="textarea"||rr!=="")&&oi(Oe,rr):typeof rr=="number"&&oi(Oe,""+rr):yn!=="suppressContentEditableWarning"&&yn!=="suppressHydrationWarning"&&yn!=="autoFocus"&&(Te.hasOwnProperty(yn)?rr!=null&&yn==="onScroll"&&xs("scroll",Oe):rr!=null&&qe(Oe,yn,rr,On))}switch($e){case"input":kr(Oe),ui(Oe,Ge,!1);break;case"textarea":kr(Oe),ei(Oe);break;case"option":Ge.value!=null&&Oe.setAttribute("value",""+nr(Ge.value));break;case"select":Oe.multiple=!!Ge.multiple,yn=Ge.value,yn!=null?Kr(Oe,!!Ge.multiple,yn,!1):Ge.defaultValue!=null&&Kr(Oe,!!Ge.multiple,Ge.defaultValue,!0);break;default:typeof dn.onClick=="function"&&(Oe.onclick=vu)}switch($e){case"button":case"input":case"select":case"textarea":Ge=!!Ge.autoFocus;break e;case"img":Ge=!0;break e;default:Ge=!1}}Ge&&(De.flags|=4)}De.ref!==null&&(De.flags|=512,De.flags|=2097152)}return ea(De),null;case 6:if(Oe&&De.stateNode!=null)zh(Oe,De,Oe.memoizedProps,Ge);else{if(typeof Ge!="string"&&De.stateNode===null)throw Error(t(166));if($e=Tl(jl.current),Tl(ca.current),is(De)){if(Ge=De.stateNode,$e=De.memoizedProps,Ge[tl]=De,(yn=Ge.nodeValue!==$e)&&(Oe=sr,Oe!==null))switch(Oe.tag){case 3:uc(Ge.nodeValue,$e,(Oe.mode&1)!==0);break;case 5:Oe.memoizedProps.suppressHydrationWarning!==!0&&uc(Ge.nodeValue,$e,(Oe.mode&1)!==0)}yn&&(De.flags|=4)}else Ge=($e.nodeType===9?$e:$e.ownerDocument).createTextNode(Ge),Ge[tl]=De,De.stateNode=Ge}return ea(De),null;case 13:if(ys(Cs),Ge=De.memoizedState,Oe===null||Oe.memoizedState!==null&&Oe.memoizedState.dehydrated!==null){if(Cr&&Or!==null&&(De.mode&1)!==0&&(De.flags&128)===0)Zi(),Ki(),De.flags|=98560,yn=!1;else if(yn=is(De),Ge!==null&&Ge.dehydrated!==null){if(Oe===null){if(!yn)throw Error(t(318));if(yn=De.memoizedState,yn=yn!==null?yn.dehydrated:null,!yn)throw Error(t(317));yn[tl]=De}else Ki(),(De.flags&128)===0&&(De.memoizedState=null),De.flags|=4;ea(De),yn=!1}else Mr!==null&&(th(Mr),Mr=null),yn=!0;if(!yn)return De.flags&65536?De:null}return(De.flags&128)!==0?(De.lanes=$e,De):(Ge=Ge!==null,Ge!==(Oe!==null&&Oe.memoizedState!==null)&&Ge&&(De.child.flags|=8192,(De.mode&1)!==0&&(Oe===null||(Cs.current&1)!==0?bo===0&&(bo=3):ih())),De.updateQueue!==null&&(De.flags|=4),ea(De),null);case 4:return rl(),qd(Oe,De),Oe===null&&Xl(De.stateNode.containerInfo),ea(De),null;case 10:return Zo(De.type._context),ea(De),null;case 17:return Jo(De.type)&&cc(),ea(De),null;case 19:if(ys(Cs),yn=De.memoizedState,yn===null)return ea(De),null;if(Ge=(De.flags&128)!==0,On=yn.rendering,On===null)if(Ge)Fc(yn,!1);else{if(bo!==0||Oe!==null&&(Oe.flags&128)!==0)for(Oe=De.child;Oe!==null;){if(On=Ua(Oe),On!==null){for(De.flags|=128,Fc(yn,!1),Ge=On.updateQueue,Ge!==null&&(De.updateQueue=Ge,De.flags|=4),De.subtreeFlags=0,Ge=$e,$e=De.child;$e!==null;)yn=$e,Oe=Ge,yn.flags&=14680066,On=yn.alternate,On===null?(yn.childLanes=0,yn.lanes=Oe,yn.child=null,yn.subtreeFlags=0,yn.memoizedProps=null,yn.memoizedState=null,yn.updateQueue=null,yn.dependencies=null,yn.stateNode=null):(yn.childLanes=On.childLanes,yn.lanes=On.lanes,yn.child=On.child,yn.subtreeFlags=0,yn.deletions=null,yn.memoizedProps=On.memoizedProps,yn.memoizedState=On.memoizedState,yn.updateQueue=On.updateQueue,yn.type=On.type,Oe=On.dependencies,yn.dependencies=Oe===null?null:{lanes:Oe.lanes,firstContext:Oe.firstContext}),$e=$e.sibling;return ws(Cs,Cs.current&1|2),De.child}Oe=Oe.sibling}yn.tail!==null&&Li()>xc&&(De.flags|=128,Ge=!0,Fc(yn,!1),De.lanes=4194304)}else{if(!Ge)if(Oe=Ua(On),Oe!==null){if(De.flags|=128,Ge=!0,$e=Oe.updateQueue,$e!==null&&(De.updateQueue=$e,De.flags|=4),Fc(yn,!0),yn.tail===null&&yn.tailMode==="hidden"&&!On.alternate&&!Cr)return ea(De),null}else 2*Li()-yn.renderingStartTime>xc&&$e!==1073741824&&(De.flags|=128,Ge=!0,Fc(yn,!1),De.lanes=4194304);yn.isBackwards?(On.sibling=De.child,De.child=On):($e=yn.last,$e!==null?$e.sibling=On:De.child=On,yn.last=On)}return yn.tail!==null?(De=yn.tail,yn.rendering=De,yn.tail=De.sibling,yn.renderingStartTime=Li(),De.sibling=null,$e=Cs.current,ws(Cs,Ge?$e&1|2:$e&1),De):(ea(De),null);case 22:case 23:return rh(),Ge=De.memoizedState!==null,Oe!==null&&Oe.memoizedState!==null!==Ge&&(De.flags|=8192),Ge&&(De.mode&1)!==0?(Ga&1073741824)!==0&&(ea(De),De.subtreeFlags&6&&(De.flags|=8192)):ea(De),null;case 24:return null;case 25:return null}throw Error(t(156,De.tag))}function Of(Oe,De){switch(ir(De),De.tag){case 1:return Jo(De.type)&&cc(),Oe=De.flags,Oe&65536?(De.flags=Oe&-65537|128,De):null;case 3:return rl(),ys(Qo),ys(_o),Nc(),Oe=De.flags,(Oe&65536)!==0&&(Oe&128)===0?(De.flags=Oe&-65537|128,De):null;case 5:return Oc(De),null;case 13:if(ys(Cs),Oe=De.memoizedState,Oe!==null&&Oe.dehydrated!==null){if(De.alternate===null)throw Error(t(340));Ki()}return Oe=De.flags,Oe&65536?(De.flags=Oe&-65537|128,De):null;case 19:return ys(Cs),null;case 4:return rl(),null;case 10:return Zo(De.type._context),null;case 22:case 23:return rh(),null;case 24:return null;default:return null}}var ad=!1,ta=!1,Mf=typeof WeakSet=="function"?WeakSet:Set,_i=null;function Tc(Oe,De){var $e=Oe.ref;if($e!==null)if(typeof $e=="function")try{$e(null)}catch(Ge){no(Oe,De,Ge)}else $e.current=null}function Gd(Oe,De,$e){try{$e()}catch(Ge){no(Oe,De,Ge)}}var qh=!1;function Nf(Oe,De){if(Gu=Yr,Oe=Vu(),Wl(Oe)){if("selectionStart"in Oe)var $e={start:Oe.selectionStart,end:Oe.selectionEnd};else e:{$e=($e=Oe.ownerDocument)&&$e.defaultView||window;var Ge=$e.getSelection&&$e.getSelection();if(Ge&&Ge.rangeCount!==0){$e=Ge.anchorNode;var dn=Ge.anchorOffset,yn=Ge.focusNode;Ge=Ge.focusOffset;try{$e.nodeType,yn.nodeType}catch{$e=null;break e}var On=0,Xn=-1,rr=-1,Ar=0,qr=0,Xr=Oe,zr=null;t:for(;;){for(var mi;Xr!==$e||dn!==0&&Xr.nodeType!==3||(Xn=On+dn),Xr!==yn||Ge!==0&&Xr.nodeType!==3||(rr=On+Ge),Xr.nodeType===3&&(On+=Xr.nodeValue.length),(mi=Xr.firstChild)!==null;)zr=Xr,Xr=mi;for(;;){if(Xr===Oe)break t;if(zr===$e&&++Ar===dn&&(Xn=On),zr===yn&&++qr===Ge&&(rr=On),(mi=Xr.nextSibling)!==null)break;Xr=zr,zr=Xr.parentNode}Xr=mi}$e=Xn===-1||rr===-1?null:{start:Xn,end:rr}}else $e=null}$e=$e||{start:0,end:0}}else $e=null;for(Jl={focusedElem:Oe,selectionRange:$e},Yr=!1,_i=De;_i!==null;)if(De=_i,Oe=De.child,(De.subtreeFlags&1028)!==0&&Oe!==null)Oe.return=De,_i=Oe;else for(;_i!==null;){De=_i;try{var bi=De.alternate;if((De.flags&1024)!==0)switch(De.tag){case 0:case 11:case 15:break;case 1:if(bi!==null){var vi=bi.memoizedProps,lo=bi.memoizedState,_r=De.stateNode,ar=_r.getSnapshotBeforeUpdate(De.elementType===De.type?vi:Al(De.type,vi),lo);_r.__reactInternalSnapshotBeforeUpdate=ar}break;case 3:var br=De.stateNode.containerInfo;br.nodeType===1?br.textContent="":br.nodeType===9&&br.documentElement&&br.removeChild(br.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Zr){no(De,De.return,Zr)}if(Oe=De.sibling,Oe!==null){Oe.return=De.return,_i=Oe;break}_i=De.return}return bi=qh,qh=!1,bi}function Vc(Oe,De,$e){var Ge=De.updateQueue;if(Ge=Ge!==null?Ge.lastEffect:null,Ge!==null){var dn=Ge=Ge.next;do{if((dn.tag&Oe)===Oe){var yn=dn.destroy;dn.destroy=void 0,yn!==void 0&&Gd(De,$e,yn)}dn=dn.next}while(dn!==Ge)}}function ld(Oe,De){if(De=De.updateQueue,De=De!==null?De.lastEffect:null,De!==null){var $e=De=De.next;do{if(($e.tag&Oe)===Oe){var Ge=$e.create;$e.destroy=Ge()}$e=$e.next}while($e!==De)}}function Wd(Oe){var De=Oe.ref;if(De!==null){var $e=Oe.stateNode;switch(Oe.tag){case 5:Oe=$e;break;default:Oe=$e}typeof De=="function"?De(Oe):De.current=Oe}}function Gh(Oe){var De=Oe.alternate;De!==null&&(Oe.alternate=null,Gh(De)),Oe.child=null,Oe.deletions=null,Oe.sibling=null,Oe.tag===5&&(De=Oe.stateNode,De!==null&&(delete De[tl],delete De[wu],delete De[Xo],delete De[kd],delete De[Cd])),Oe.stateNode=null,Oe.return=null,Oe.dependencies=null,Oe.memoizedProps=null,Oe.memoizedState=null,Oe.pendingProps=null,Oe.stateNode=null,Oe.updateQueue=null}function Wh(Oe){return Oe.tag===5||Oe.tag===3||Oe.tag===4}function Hh(Oe){e:for(;;){for(;Oe.sibling===null;){if(Oe.return===null||Wh(Oe.return))return null;Oe=Oe.return}for(Oe.sibling.return=Oe.return,Oe=Oe.sibling;Oe.tag!==5&&Oe.tag!==6&&Oe.tag!==18;){if(Oe.flags&2||Oe.child===null||Oe.tag===4)continue e;Oe.child.return=Oe,Oe=Oe.child}if(!(Oe.flags&2))return Oe.stateNode}}function Hd(Oe,De,$e){var Ge=Oe.tag;if(Ge===5||Ge===6)Oe=Oe.stateNode,De?$e.nodeType===8?$e.parentNode.insertBefore(Oe,De):$e.insertBefore(Oe,De):($e.nodeType===8?(De=$e.parentNode,De.insertBefore(Oe,$e)):(De=$e,De.appendChild(Oe)),$e=$e._reactRootContainer,$e!=null||De.onclick!==null||(De.onclick=vu));else if(Ge!==4&&(Oe=Oe.child,Oe!==null))for(Hd(Oe,De,$e),Oe=Oe.sibling;Oe!==null;)Hd(Oe,De,$e),Oe=Oe.sibling}function Kd(Oe,De,$e){var Ge=Oe.tag;if(Ge===5||Ge===6)Oe=Oe.stateNode,De?$e.insertBefore(Oe,De):$e.appendChild(Oe);else if(Ge!==4&&(Oe=Oe.child,Oe!==null))for(Kd(Oe,De,$e),Oe=Oe.sibling;Oe!==null;)Kd(Oe,De,$e),Oe=Oe.sibling}var qo=null,Sl=!1;function ku(Oe,De,$e){for($e=$e.child;$e!==null;)Kh(Oe,De,$e),$e=$e.sibling}function Kh(Oe,De,$e){if(io&&typeof io.onCommitFiberUnmount=="function")try{io.onCommitFiberUnmount(Wo,$e)}catch{}switch($e.tag){case 5:ta||Tc($e,De);case 6:var Ge=qo,dn=Sl;qo=null,ku(Oe,De,$e),qo=Ge,Sl=dn,qo!==null&&(Sl?(Oe=qo,$e=$e.stateNode,Oe.nodeType===8?Oe.parentNode.removeChild($e):Oe.removeChild($e)):qo.removeChild($e.stateNode));break;case 18:qo!==null&&(Sl?(Oe=qo,$e=$e.stateNode,Oe.nodeType===8?Ic(Oe.parentNode,$e):Oe.nodeType===1&&Ic(Oe,$e),hr(Oe)):Ic(qo,$e.stateNode));break;case 4:Ge=qo,dn=Sl,qo=$e.stateNode.containerInfo,Sl=!0,ku(Oe,De,$e),qo=Ge,Sl=dn;break;case 0:case 11:case 14:case 15:if(!ta&&(Ge=$e.updateQueue,Ge!==null&&(Ge=Ge.lastEffect,Ge!==null))){dn=Ge=Ge.next;do{var yn=dn,On=yn.destroy;yn=yn.tag,On!==void 0&&((yn&2)!==0||(yn&4)!==0)&&Gd($e,De,On),dn=dn.next}while(dn!==Ge)}ku(Oe,De,$e);break;case 1:if(!ta&&(Tc($e,De),Ge=$e.stateNode,typeof Ge.componentWillUnmount=="function"))try{Ge.props=$e.memoizedProps,Ge.state=$e.memoizedState,Ge.componentWillUnmount()}catch(Xn){no($e,De,Xn)}ku(Oe,De,$e);break;case 21:ku(Oe,De,$e);break;case 22:$e.mode&1?(ta=(Ge=ta)||$e.memoizedState!==null,ku(Oe,De,$e),ta=Ge):ku(Oe,De,$e);break;default:ku(Oe,De,$e)}}function Yh(Oe){var De=Oe.updateQueue;if(De!==null){Oe.updateQueue=null;var $e=Oe.stateNode;$e===null&&($e=Oe.stateNode=new Mf),De.forEach(function(Ge){var dn=zf.bind(null,Oe,Ge);$e.has(Ge)||($e.add(Ge),Ge.then(dn,dn))})}}function Pl(Oe,De){var $e=De.deletions;if($e!==null)for(var Ge=0;Ge<$e.length;Ge++){var dn=$e[Ge];try{var yn=Oe,On=De,Xn=On;e:for(;Xn!==null;){switch(Xn.tag){case 5:qo=Xn.stateNode,Sl=!1;break e;case 3:qo=Xn.stateNode.containerInfo,Sl=!0;break e;case 4:qo=Xn.stateNode.containerInfo,Sl=!0;break e}Xn=Xn.return}if(qo===null)throw Error(t(160));Kh(yn,On,dn),qo=null,Sl=!1;var rr=dn.alternate;rr!==null&&(rr.return=null),dn.return=null}catch(Ar){no(dn,De,Ar)}}if(De.subtreeFlags&12854)for(De=De.child;De!==null;)Xh(De,Oe),De=De.sibling}function Xh(Oe,De){var $e=Oe.alternate,Ge=Oe.flags;switch(Oe.tag){case 0:case 11:case 14:case 15:if(Pl(De,Oe),Bl(Oe),Ge&4){try{Vc(3,Oe,Oe.return),ld(3,Oe)}catch(vi){no(Oe,Oe.return,vi)}try{Vc(5,Oe,Oe.return)}catch(vi){no(Oe,Oe.return,vi)}}break;case 1:Pl(De,Oe),Bl(Oe),Ge&512&&$e!==null&&Tc($e,$e.return);break;case 5:if(Pl(De,Oe),Bl(Oe),Ge&512&&$e!==null&&Tc($e,$e.return),Oe.flags&32){var dn=Oe.stateNode;try{oi(dn,"")}catch(vi){no(Oe,Oe.return,vi)}}if(Ge&4&&(dn=Oe.stateNode,dn!=null)){var yn=Oe.memoizedProps,On=$e!==null?$e.memoizedProps:yn,Xn=Oe.type,rr=Oe.updateQueue;if(Oe.updateQueue=null,rr!==null)try{Xn==="input"&&yn.type==="radio"&&yn.name!=null&&Yn(dn,yn),As(Xn,On);var Ar=As(Xn,yn);for(On=0;On<rr.length;On+=2){var qr=rr[On],Xr=rr[On+1];qr==="style"?fi(dn,Xr):qr==="dangerouslySetInnerHTML"?Gr(dn,Xr):qr==="children"?oi(dn,Xr):qe(dn,qr,Xr,Ar)}switch(Xn){case"input":gi(dn,yn);break;case"textarea":yi(dn,yn);break;case"select":var zr=dn._wrapperState.wasMultiple;dn._wrapperState.wasMultiple=!!yn.multiple;var mi=yn.value;mi!=null?Kr(dn,!!yn.multiple,mi,!1):zr!==!!yn.multiple&&(yn.defaultValue!=null?Kr(dn,!!yn.multiple,yn.defaultValue,!0):Kr(dn,!!yn.multiple,yn.multiple?[]:"",!1))}dn[wu]=yn}catch(vi){no(Oe,Oe.return,vi)}}break;case 6:if(Pl(De,Oe),Bl(Oe),Ge&4){if(Oe.stateNode===null)throw Error(t(162));dn=Oe.stateNode,yn=Oe.memoizedProps;try{dn.nodeValue=yn}catch(vi){no(Oe,Oe.return,vi)}}break;case 3:if(Pl(De,Oe),Bl(Oe),Ge&4&&$e!==null&&$e.memoizedState.isDehydrated)try{hr(De.containerInfo)}catch(vi){no(Oe,Oe.return,vi)}break;case 4:Pl(De,Oe),Bl(Oe);break;case 13:Pl(De,Oe),Bl(Oe),dn=Oe.child,dn.flags&8192&&(yn=dn.memoizedState!==null,dn.stateNode.isHidden=yn,!yn||dn.alternate!==null&&dn.alternate.memoizedState!==null||(Qd=Li())),Ge&4&&Yh(Oe);break;case 22:if(qr=$e!==null&&$e.memoizedState!==null,Oe.mode&1?(ta=(Ar=ta)||qr,Pl(De,Oe),ta=Ar):Pl(De,Oe),Bl(Oe),Ge&8192){if(Ar=Oe.memoizedState!==null,(Oe.stateNode.isHidden=Ar)&&!qr&&(Oe.mode&1)!==0)for(_i=Oe,qr=Oe.child;qr!==null;){for(Xr=_i=qr;_i!==null;){switch(zr=_i,mi=zr.child,zr.tag){case 0:case 11:case 14:case 15:Vc(4,zr,zr.return);break;case 1:Tc(zr,zr.return);var bi=zr.stateNode;if(typeof bi.componentWillUnmount=="function"){Ge=zr,$e=zr.return;try{De=Ge,bi.props=De.memoizedProps,bi.state=De.memoizedState,bi.componentWillUnmount()}catch(vi){no(Ge,$e,vi)}}break;case 5:Tc(zr,zr.return);break;case 22:if(zr.memoizedState!==null){Zh(Xr);continue}}mi!==null?(mi.return=zr,_i=mi):Zh(Xr)}qr=qr.sibling}e:for(qr=null,Xr=Oe;;){if(Xr.tag===5){if(qr===null){qr=Xr;try{dn=Xr.stateNode,Ar?(yn=dn.style,typeof yn.setProperty=="function"?yn.setProperty("display","none","important"):yn.display="none"):(Xn=Xr.stateNode,rr=Xr.memoizedProps.style,On=rr!=null&&rr.hasOwnProperty("display")?rr.display:null,Xn.style.display=xi("display",On))}catch(vi){no(Oe,Oe.return,vi)}}}else if(Xr.tag===6){if(qr===null)try{Xr.stateNode.nodeValue=Ar?"":Xr.memoizedProps}catch(vi){no(Oe,Oe.return,vi)}}else if((Xr.tag!==22&&Xr.tag!==23||Xr.memoizedState===null||Xr===Oe)&&Xr.child!==null){Xr.child.return=Xr,Xr=Xr.child;continue}if(Xr===Oe)break e;for(;Xr.sibling===null;){if(Xr.return===null||Xr.return===Oe)break e;qr===Xr&&(qr=null),Xr=Xr.return}qr===Xr&&(qr=null),Xr.sibling.return=Xr.return,Xr=Xr.sibling}}break;case 19:Pl(De,Oe),Bl(Oe),Ge&4&&Yh(Oe);break;case 21:break;default:Pl(De,Oe),Bl(Oe)}}function Bl(Oe){var De=Oe.flags;if(De&2){try{e:{for(var $e=Oe.return;$e!==null;){if(Wh($e)){var Ge=$e;break e}$e=$e.return}throw Error(t(160))}switch(Ge.tag){case 5:var dn=Ge.stateNode;Ge.flags&32&&(oi(dn,""),Ge.flags&=-33);var yn=Hh(Oe);Kd(Oe,yn,dn);break;case 3:case 4:var On=Ge.stateNode.containerInfo,Xn=Hh(Oe);Hd(Oe,Xn,On);break;default:throw Error(t(161))}}catch(rr){no(Oe,Oe.return,rr)}Oe.flags&=-3}De&4096&&(Oe.flags&=-4097)}function Lf(Oe,De,$e){_i=Oe,Qh(Oe)}function Qh(Oe,De,$e){for(var Ge=(Oe.mode&1)!==0;_i!==null;){var dn=_i,yn=dn.child;if(dn.tag===22&&Ge){var On=dn.memoizedState!==null||ad;if(!On){var Xn=dn.alternate,rr=Xn!==null&&Xn.memoizedState!==null||ta;Xn=ad;var Ar=ta;if(ad=On,(ta=rr)&&!Ar)for(_i=dn;_i!==null;)On=_i,rr=On.child,On.tag===22&&On.memoizedState!==null?ef(dn):rr!==null?(rr.return=On,_i=rr):ef(dn);for(;yn!==null;)_i=yn,Qh(yn),yn=yn.sibling;_i=dn,ad=Xn,ta=Ar}Jh(Oe)}else(dn.subtreeFlags&8772)!==0&&yn!==null?(yn.return=dn,_i=yn):Jh(Oe)}}function Jh(Oe){for(;_i!==null;){var De=_i;if((De.flags&8772)!==0){var $e=De.alternate;try{if((De.flags&8772)!==0)switch(De.tag){case 0:case 11:case 15:ta||ld(5,De);break;case 1:var Ge=De.stateNode;if(De.flags&4&&!ta)if($e===null)Ge.componentDidMount();else{var dn=De.elementType===De.type?$e.memoizedProps:Al(De.type,$e.memoizedProps);Ge.componentDidUpdate(dn,$e.memoizedState,Ge.__reactInternalSnapshotBeforeUpdate)}var yn=De.updateQueue;yn!==null&&ru(De,yn,Ge);break;case 3:var On=De.updateQueue;if(On!==null){if($e=null,De.child!==null)switch(De.child.tag){case 5:$e=De.child.stateNode;break;case 1:$e=De.child.stateNode}ru(De,On,$e)}break;case 5:var Xn=De.stateNode;if($e===null&&De.flags&4){$e=Xn;var rr=De.memoizedProps;switch(De.type){case"button":case"input":case"select":case"textarea":rr.autoFocus&&$e.focus();break;case"img":rr.src&&($e.src=rr.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(De.memoizedState===null){var Ar=De.alternate;if(Ar!==null){var qr=Ar.memoizedState;if(qr!==null){var Xr=qr.dehydrated;Xr!==null&&hr(Xr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ta||De.flags&512&&Wd(De)}catch(zr){no(De,De.return,zr)}}if(De===Oe){_i=null;break}if($e=De.sibling,$e!==null){$e.return=De.return,_i=$e;break}_i=De.return}}function Zh(Oe){for(;_i!==null;){var De=_i;if(De===Oe){_i=null;break}var $e=De.sibling;if($e!==null){$e.return=De.return,_i=$e;break}_i=De.return}}function ef(Oe){for(;_i!==null;){var De=_i;try{switch(De.tag){case 0:case 11:case 15:var $e=De.return;try{ld(4,De)}catch(rr){no(De,$e,rr)}break;case 1:var Ge=De.stateNode;if(typeof Ge.componentDidMount=="function"){var dn=De.return;try{Ge.componentDidMount()}catch(rr){no(De,dn,rr)}}var yn=De.return;try{Wd(De)}catch(rr){no(De,yn,rr)}break;case 5:var On=De.return;try{Wd(De)}catch(rr){no(De,On,rr)}}}catch(rr){no(De,De.return,rr)}if(De===Oe){_i=null;break}var Xn=De.sibling;if(Xn!==null){Xn.return=De.return,_i=Xn;break}_i=De.return}}var Df=Math.ceil,ud=He.ReactCurrentDispatcher,Yd=He.ReactCurrentOwner,ol=He.ReactCurrentBatchConfig,ls=0,Co=null,uo=null,Go=0,Ga=0,Ec=Ba(0),bo=0,jc=null,Qu=0,cd=0,Xd=0,$c=null,Ca=null,Qd=0,xc=1/0,ou=null,dd=!1,Jd=null,Cu=null,hd=!1,Ou=null,pd=0,Bc=0,Zd=null,md=-1,gd=0;function pa(){return(ls&6)!==0?Li():md!==-1?md:md=Li()}function Mu(Oe){return(Oe.mode&1)===0?1:(ls&2)!==0&&Go!==0?Go&-Go:Ts.transition!==null?(gd===0&&(gd=na()),gd):(Oe=Hi,Oe!==0||(Oe=window.event,Oe=Oe===void 0?16:qs(Oe.type)),Oe)}function Il(Oe,De,$e,Ge){if(50<Bc)throw Bc=0,Zd=null,Error(t(185));To(Oe,$e,Ge),((ls&2)===0||Oe!==Co)&&(Oe===Co&&((ls&2)===0&&(cd|=$e),bo===4&&Nu(Oe,Go)),Oa(Oe,Ge),$e===1&&ls===0&&(De.mode&1)===0&&(xc=Li()+500,Hu&&bn()))}function Oa(Oe,De){var $e=Oe.callbackNode;ks(Oe,De);var Ge=Bs(Oe,Oe===Co?Go:0);if(Ge===0)$e!==null&&ri($e),Oe.callbackNode=null,Oe.callbackPriority=0;else if(De=Ge&-Ge,Oe.callbackPriority!==De){if($e!=null&&ri($e),De===1)Oe.tag===0?hn(nf.bind(null,Oe)):We(nf.bind(null,Oe)),Id(function(){(ls&6)===0&&bn()}),$e=null;else{switch(Mo(Ge)){case 1:$e=Er;break;case 4:$e=Oi;break;case 16:$e=Wi;break;case 536870912:$e=wo;break;default:$e=Wi}$e=df($e,tf.bind(null,Oe))}Oe.callbackPriority=De,Oe.callbackNode=$e}}function tf(Oe,De){if(md=-1,gd=0,(ls&6)!==0)throw Error(t(327));var $e=Oe.callbackNode;if(Ac()&&Oe.callbackNode!==$e)return null;var Ge=Bs(Oe,Oe===Co?Go:0);if(Ge===0)return null;if((Ge&30)!==0||(Ge&Oe.expiredLanes)!==0||De)De=_d(Oe,Ge);else{De=Ge;var dn=ls;ls|=2;var yn=sf();(Co!==Oe||Go!==De)&&(ou=null,xc=Li()+500,Zu(Oe,De));do try{jf();break}catch(Xn){rf(Oe,Xn)}while(!0);yo(),ud.current=yn,ls=dn,uo!==null?De=0:(Co=null,Go=0,De=bo)}if(De!==0){if(De===2&&(dn=Ks(Oe),dn!==0&&(Ge=dn,De=eh(Oe,dn))),De===1)throw $e=jc,Zu(Oe,0),Nu(Oe,Ge),Oa(Oe,Li()),$e;if(De===6)Nu(Oe,Ge);else{if(dn=Oe.current.alternate,(Ge&30)===0&&!Ff(dn)&&(De=_d(Oe,Ge),De===2&&(yn=Ks(Oe),yn!==0&&(Ge=yn,De=eh(Oe,yn))),De===1))throw $e=jc,Zu(Oe,0),Nu(Oe,Ge),Oa(Oe,Li()),$e;switch(Oe.finishedWork=dn,Oe.finishedLanes=Ge,De){case 0:case 1:throw Error(t(345));case 2:tc(Oe,Ca,ou);break;case 3:if(Nu(Oe,Ge),(Ge&130023424)===Ge&&(De=Qd+500-Li(),10<De)){if(Bs(Oe,0)!==0)break;if(dn=Oe.suspendedLanes,(dn&Ge)!==Ge){pa(),Oe.pingedLanes|=Oe.suspendedLanes&dn;break}Oe.timeoutHandle=Pc(tc.bind(null,Oe,Ca,ou),De);break}tc(Oe,Ca,ou);break;case 4:if(Nu(Oe,Ge),(Ge&4194240)===Ge)break;for(De=Oe.eventTimes,dn=-1;0<Ge;){var On=31-ts(Ge);yn=1<<On,On=De[On],On>dn&&(dn=On),Ge&=~yn}if(Ge=dn,Ge=Li()-Ge,Ge=(120>Ge?120:480>Ge?480:1080>Ge?1080:1920>Ge?1920:3e3>Ge?3e3:4320>Ge?4320:1960*Df(Ge/1960))-Ge,10<Ge){Oe.timeoutHandle=Pc(tc.bind(null,Oe,Ca,ou),Ge);break}tc(Oe,Ca,ou);break;case 5:tc(Oe,Ca,ou);break;default:throw Error(t(329))}}}return Oa(Oe,Li()),Oe.callbackNode===$e?tf.bind(null,Oe):null}function eh(Oe,De){var $e=$c;return Oe.current.memoizedState.isDehydrated&&(Zu(Oe,De).flags|=256),Oe=_d(Oe,De),Oe!==2&&(De=Ca,Ca=$e,De!==null&&th(De)),Oe}function th(Oe){Ca===null?Ca=Oe:Ca.push.apply(Ca,Oe)}function Ff(Oe){for(var De=Oe;;){if(De.flags&16384){var $e=De.updateQueue;if($e!==null&&($e=$e.stores,$e!==null))for(var Ge=0;Ge<$e.length;Ge++){var dn=$e[Ge],yn=dn.getSnapshot;dn=dn.value;try{if(!as(yn(),dn))return!1}catch{return!1}}}if($e=De.child,De.subtreeFlags&16384&&$e!==null)$e.return=De,De=$e;else{if(De===Oe)break;for(;De.sibling===null;){if(De.return===null||De.return===Oe)return!0;De=De.return}De.sibling.return=De.return,De=De.sibling}}return!0}function Nu(Oe,De){for(De&=~Xd,De&=~cd,Oe.suspendedLanes|=De,Oe.pingedLanes&=~De,Oe=Oe.expirationTimes;0<De;){var $e=31-ts(De),Ge=1<<$e;Oe[$e]=-1,De&=~Ge}}function nf(Oe){if((ls&6)!==0)throw Error(t(327));Ac();var De=Bs(Oe,0);if((De&1)===0)return Oa(Oe,Li()),null;var $e=_d(Oe,De);if(Oe.tag!==0&&$e===2){var Ge=Ks(Oe);Ge!==0&&(De=Ge,$e=eh(Oe,Ge))}if($e===1)throw $e=jc,Zu(Oe,0),Nu(Oe,De),Oa(Oe,Li()),$e;if($e===6)throw Error(t(345));return Oe.finishedWork=Oe.current.alternate,Oe.finishedLanes=De,tc(Oe,Ca,ou),Oa(Oe,Li()),null}function nh(Oe,De){var $e=ls;ls|=1;try{return Oe(De)}finally{ls=$e,ls===0&&(xc=Li()+500,Hu&&bn())}}function Ju(Oe){Ou!==null&&Ou.tag===0&&(ls&6)===0&&Ac();var De=ls;ls|=1;var $e=ol.transition,Ge=Hi;try{if(ol.transition=null,Hi=1,Oe)return Oe()}finally{Hi=Ge,ol.transition=$e,ls=De,(ls&6)===0&&bn()}}function rh(){Ga=Ec.current,ys(Ec)}function Zu(Oe,De){Oe.finishedWork=null,Oe.finishedLanes=0;var $e=Oe.timeoutHandle;if($e!==-1&&(Oe.timeoutHandle=-1,Wc($e)),uo!==null)for($e=uo.return;$e!==null;){var Ge=$e;switch(ir(Ge),Ge.tag){case 1:Ge=Ge.type.childContextTypes,Ge!=null&&cc();break;case 3:rl(),ys(Qo),ys(_o),Nc();break;case 5:Oc(Ge);break;case 4:rl();break;case 13:ys(Cs);break;case 19:ys(Cs);break;case 10:Zo(Ge.type._context);break;case 22:case 23:rh()}$e=$e.return}if(Co=Oe,uo=Oe=Lu(Oe.current,null),Go=Ga=De,bo=0,jc=null,Xd=cd=Qu=0,Ca=$c=null,ua!==null){for(De=0;De<ua.length;De++)if($e=ua[De],Ge=$e.interleaved,Ge!==null){$e.interleaved=null;var dn=Ge.next,yn=$e.pending;if(yn!==null){var On=yn.next;yn.next=dn,Ge.next=On}$e.pending=Ge}ua=null}return Oe}function rf(Oe,De){do{var $e=uo;try{if(yo(),hc.current=nd,Pu){for(var Ge=Ms.memoizedState;Ge!==null;){var dn=Ge.queue;dn!==null&&(dn.pending=null),Ge=Ge.next}Pu=!1}if(il=0,Ws=to=Ms=null,El=!1,Iu=0,Yd.current=null,$e===null||$e.return===null){bo=1,jc=De,uo=null;break}e:{var yn=Oe,On=$e.return,Xn=$e,rr=De;if(De=Go,Xn.flags|=32768,rr!==null&&typeof rr=="object"&&typeof rr.then=="function"){var Ar=rr,qr=Xn,Xr=qr.tag;if((qr.mode&1)===0&&(Xr===0||Xr===11||Xr===15)){var zr=qr.alternate;zr?(qr.updateQueue=zr.updateQueue,qr.memoizedState=zr.memoizedState,qr.lanes=zr.lanes):(qr.updateQueue=null,qr.memoizedState=null)}var mi=Ih(On);if(mi!==null){mi.flags&=-257,Rh(mi,On,Xn,yn,De),mi.mode&1&&Ph(yn,Ar,De),De=mi,rr=Ar;var bi=De.updateQueue;if(bi===null){var vi=new Set;vi.add(rr),De.updateQueue=vi}else bi.add(rr);break e}else{if((De&1)===0){Ph(yn,Ar,De),ih();break e}rr=Error(t(426))}}else if(Cr&&Xn.mode&1){var lo=Ih(On);if(lo!==null){(lo.flags&65536)===0&&(lo.flags|=256),Rh(lo,On,Xn,yn,De),bs(wc(rr,Xn));break e}}yn=rr=wc(rr,Xn),bo!==4&&(bo=2),$c===null?$c=[yn]:$c.push(yn),yn=On;do{switch(yn.tag){case 3:yn.flags|=65536,De&=-De,yn.lanes|=De;var _r=Ah(yn,rr,De);Ra(yn,_r);break e;case 1:Xn=rr;var ar=yn.type,br=yn.stateNode;if((yn.flags&128)===0&&(typeof ar.getDerivedStateFromError=="function"||br!==null&&typeof br.componentDidCatch=="function"&&(Cu===null||!Cu.has(br)))){yn.flags|=65536,De&=-De,yn.lanes|=De;var Zr=Sh(yn,Xn,De);Ra(yn,Zr);break e}}yn=yn.return}while(yn!==null)}af($e)}catch(wi){De=wi,uo===$e&&$e!==null&&(uo=$e=$e.return);continue}break}while(!0)}function sf(){var Oe=ud.current;return ud.current=nd,Oe===null?nd:Oe}function ih(){(bo===0||bo===3||bo===2)&&(bo=4),Co===null||(Qu&268435455)===0&&(cd&268435455)===0||Nu(Co,Go)}function _d(Oe,De){var $e=ls;ls|=2;var Ge=sf();(Co!==Oe||Go!==De)&&(ou=null,Zu(Oe,De));do try{Vf();break}catch(dn){rf(Oe,dn)}while(!0);if(yo(),ls=$e,ud.current=Ge,uo!==null)throw Error(t(261));return Co=null,Go=0,bo}function Vf(){for(;uo!==null;)of(uo)}function jf(){for(;uo!==null&&!Ii();)of(uo)}function of(Oe){var De=cf(Oe.alternate,Oe,Ga);Oe.memoizedProps=Oe.pendingProps,De===null?af(Oe):uo=De,Yd.current=null}function af(Oe){var De=Oe;do{var $e=De.alternate;if(Oe=De.return,(De.flags&32768)===0){if($e=Cf($e,De,Ga),$e!==null){uo=$e;return}}else{if($e=Of($e,De),$e!==null){$e.flags&=32767,uo=$e;return}if(Oe!==null)Oe.flags|=32768,Oe.subtreeFlags=0,Oe.deletions=null;else{bo=6,uo=null;return}}if(De=De.sibling,De!==null){uo=De;return}uo=De=Oe}while(De!==null);bo===0&&(bo=5)}function tc(Oe,De,$e){var Ge=Hi,dn=ol.transition;try{ol.transition=null,Hi=1,$f(Oe,De,$e,Ge)}finally{ol.transition=dn,Hi=Ge}return null}function $f(Oe,De,$e,Ge){do Ac();while(Ou!==null);if((ls&6)!==0)throw Error(t(327));$e=Oe.finishedWork;var dn=Oe.finishedLanes;if($e===null)return null;if(Oe.finishedWork=null,Oe.finishedLanes=0,$e===Oe.current)throw Error(t(177));Oe.callbackNode=null,Oe.callbackPriority=0;var yn=$e.lanes|$e.childLanes;if(ns(Oe,yn),Oe===Co&&(uo=Co=null,Go=0),($e.subtreeFlags&2064)===0&&($e.flags&2064)===0||hd||(hd=!0,df(Wi,function(){return Ac(),null})),yn=($e.flags&15990)!==0,($e.subtreeFlags&15990)!==0||yn){yn=ol.transition,ol.transition=null;var On=Hi;Hi=1;var Xn=ls;ls|=4,Yd.current=null,Nf(Oe,$e),Xh($e,Oe),Hl(Jl),Yr=!!Gu,Jl=Gu=null,Oe.current=$e,Lf($e),Yi(),ls=Xn,Hi=On,ol.transition=yn}else Oe.current=$e;if(hd&&(hd=!1,Ou=Oe,pd=dn),yn=Oe.pendingLanes,yn===0&&(Cu=null),ma($e.stateNode),Oa(Oe,Li()),De!==null)for(Ge=Oe.onRecoverableError,$e=0;$e<De.length;$e++)dn=De[$e],Ge(dn.value,{componentStack:dn.stack,digest:dn.digest});if(dd)throw dd=!1,Oe=Jd,Jd=null,Oe;return(pd&1)!==0&&Oe.tag!==0&&Ac(),yn=Oe.pendingLanes,(yn&1)!==0?Oe===Zd?Bc++:(Bc=0,Zd=Oe):Bc=0,bn(),null}function Ac(){if(Ou!==null){var Oe=Mo(pd),De=ol.transition,$e=Hi;try{if(ol.transition=null,Hi=16>Oe?16:Oe,Ou===null)var Ge=!1;else{if(Oe=Ou,Ou=null,pd=0,(ls&6)!==0)throw Error(t(331));var dn=ls;for(ls|=4,_i=Oe.current;_i!==null;){var yn=_i,On=yn.child;if((_i.flags&16)!==0){var Xn=yn.deletions;if(Xn!==null){for(var rr=0;rr<Xn.length;rr++){var Ar=Xn[rr];for(_i=Ar;_i!==null;){var qr=_i;switch(qr.tag){case 0:case 11:case 15:Vc(8,qr,yn)}var Xr=qr.child;if(Xr!==null)Xr.return=qr,_i=Xr;else for(;_i!==null;){qr=_i;var zr=qr.sibling,mi=qr.return;if(Gh(qr),qr===Ar){_i=null;break}if(zr!==null){zr.return=mi,_i=zr;break}_i=mi}}}var bi=yn.alternate;if(bi!==null){var vi=bi.child;if(vi!==null){bi.child=null;do{var lo=vi.sibling;vi.sibling=null,vi=lo}while(vi!==null)}}_i=yn}}if((yn.subtreeFlags&2064)!==0&&On!==null)On.return=yn,_i=On;else e:for(;_i!==null;){if(yn=_i,(yn.flags&2048)!==0)switch(yn.tag){case 0:case 11:case 15:Vc(9,yn,yn.return)}var _r=yn.sibling;if(_r!==null){_r.return=yn.return,_i=_r;break e}_i=yn.return}}var ar=Oe.current;for(_i=ar;_i!==null;){On=_i;var br=On.child;if((On.subtreeFlags&2064)!==0&&br!==null)br.return=On,_i=br;else e:for(On=ar;_i!==null;){if(Xn=_i,(Xn.flags&2048)!==0)try{switch(Xn.tag){case 0:case 11:case 15:ld(9,Xn)}}catch(wi){no(Xn,Xn.return,wi)}if(Xn===On){_i=null;break e}var Zr=Xn.sibling;if(Zr!==null){Zr.return=Xn.return,_i=Zr;break e}_i=Xn.return}}if(ls=dn,bn(),io&&typeof io.onPostCommitFiberRoot=="function")try{io.onPostCommitFiberRoot(Wo,Oe)}catch{}Ge=!0}return Ge}finally{Hi=$e,ol.transition=De}}return!1}function lf(Oe,De,$e){De=wc($e,De),De=Ah(Oe,De,1),Oe=Ia(Oe,De,1),De=pa(),Oe!==null&&(To(Oe,1,De),Oa(Oe,De))}function no(Oe,De,$e){if(Oe.tag===3)lf(Oe,Oe,$e);else for(;De!==null;){if(De.tag===3){lf(De,Oe,$e);break}else if(De.tag===1){var Ge=De.stateNode;if(typeof De.type.getDerivedStateFromError=="function"||typeof Ge.componentDidCatch=="function"&&(Cu===null||!Cu.has(Ge))){Oe=wc($e,Oe),Oe=Sh(De,Oe,1),De=Ia(De,Oe,1),Oe=pa(),De!==null&&(To(De,1,Oe),Oa(De,Oe));break}}De=De.return}}function Bf(Oe,De,$e){var Ge=Oe.pingCache;Ge!==null&&Ge.delete(De),De=pa(),Oe.pingedLanes|=Oe.suspendedLanes&$e,Co===Oe&&(Go&$e)===$e&&(bo===4||bo===3&&(Go&130023424)===Go&&500>Li()-Qd?Zu(Oe,0):Xd|=$e),Oa(Oe,De)}function uf(Oe,De){De===0&&((Oe.mode&1)===0?De=1:(De=ya,ya<<=1,(ya&130023424)===0&&(ya=4194304)));var $e=pa();Oe=hs(Oe,De),Oe!==null&&(To(Oe,De,$e),Oa(Oe,$e))}function Uf(Oe){var De=Oe.memoizedState,$e=0;De!==null&&($e=De.retryLane),uf(Oe,$e)}function zf(Oe,De){var $e=0;switch(Oe.tag){case 13:var Ge=Oe.stateNode,dn=Oe.memoizedState;dn!==null&&($e=dn.retryLane);break;case 19:Ge=Oe.stateNode;break;default:throw Error(t(314))}Ge!==null&&Ge.delete(De),uf(Oe,$e)}var cf;cf=function(Oe,De,$e){if(Oe!==null)if(Oe.memoizedProps!==De.pendingProps||Qo.current)ka=!0;else{if((Oe.lanes&$e)===0&&(De.flags&128)===0)return ka=!1,kf(Oe,De,$e);ka=(Oe.flags&131072)!==0}else ka=!1,Cr&&(De.flags&1048576)!==0&&Nr(De,Dn,De.index);switch(De.lanes=0,De.tag){case 2:var Ge=De.type;od(Oe,De),Oe=De.pendingProps;var dn=Eu(De,_o.current);Fs(De,$e),dn=Ku(null,De,Ge,Oe,dn,$e);var yn=sl();return De.flags|=1,typeof dn=="object"&&dn!==null&&typeof dn.render=="function"&&dn.$$typeof===void 0?(De.tag=1,De.memoizedState=null,De.updateQueue=null,Jo(Ge)?(yn=!0,tu(De)):yn=!1,De.memoizedState=dn.state!==null&&dn.state!==void 0?dn.state:null,dc(De),dn.updater=rd,De.stateNode=dn,dn._reactInternals=De,Ld(De,Ge,Oe,$e),De=jd(null,De,Ge,!0,yn,$e)):(De.tag=0,Cr&&yn&&Ir(De),fa(null,De,dn,$e),De=De.child),De;case 16:Ge=De.elementType;e:{switch(od(Oe,De),Oe=De.pendingProps,dn=Ge._init,Ge=dn(Ge._payload),De.type=Ge,dn=De.tag=Gf(Ge),Oe=Al(Ge,Oe),dn){case 0:De=Vd(null,De,Ge,Oe,$e);break e;case 1:De=Lh(null,De,Ge,Oe,$e);break e;case 11:De=kh(null,De,Ge,Oe,$e);break e;case 14:De=Ch(null,De,Ge,Al(Ge.type,Oe),$e);break e}throw Error(t(306,Ge,""))}return De;case 0:return Ge=De.type,dn=De.pendingProps,dn=De.elementType===Ge?dn:Al(Ge,dn),Vd(Oe,De,Ge,dn,$e);case 1:return Ge=De.type,dn=De.pendingProps,dn=De.elementType===Ge?dn:Al(Ge,dn),Lh(Oe,De,Ge,dn,$e);case 3:e:{if(Dh(De),Oe===null)throw Error(t(387));Ge=De.pendingProps,yn=De.memoizedState,dn=yn.element,Cc(Oe,De),wl(De,Ge,null,$e);var On=De.memoizedState;if(Ge=On.element,yn.isDehydrated)if(yn={element:Ge,isDehydrated:!1,cache:On.cache,pendingSuspenseBoundaries:On.pendingSuspenseBoundaries,transitions:On.transitions},De.updateQueue.baseState=yn,De.memoizedState=yn,De.flags&256){dn=wc(Error(t(423)),De),De=Fh(Oe,De,Ge,$e,dn);break e}else if(Ge!==dn){dn=wc(Error(t(424)),De),De=Fh(Oe,De,Ge,$e,dn);break e}else for(Or=Uo(De.stateNode.containerInfo.firstChild),sr=De,Cr=!0,Mr=null,$e=ds(De,null,Ge,$e),De.child=$e;$e;)$e.flags=$e.flags&-3|4096,$e=$e.sibling;else{if(Ki(),Ge===dn){De=su(Oe,De,$e);break e}fa(Oe,De,Ge,$e)}De=De.child}return De;case 5:return Xc(De),Oe===null&&ai(De),Ge=De.type,dn=De.pendingProps,yn=Oe!==null?Oe.memoizedProps:null,On=dn.children,Sc(Ge,dn)?On=null:yn!==null&&Sc(Ge,yn)&&(De.flags|=32),Nh(Oe,De),fa(Oe,De,On,$e),De.child;case 6:return Oe===null&&ai(De),null;case 13:return Vh(Oe,De,$e);case 4:return Su(De,De.stateNode.containerInfo),Ge=De.pendingProps,Oe===null?De.child=so(De,null,Ge,$e):fa(Oe,De,Ge,$e),De.child;case 11:return Ge=De.type,dn=De.pendingProps,dn=De.elementType===Ge?dn:Al(Ge,dn),kh(Oe,De,Ge,dn,$e);case 7:return fa(Oe,De,De.pendingProps,$e),De.child;case 8:return fa(Oe,De,De.pendingProps.children,$e),De.child;case 12:return fa(Oe,De,De.pendingProps.children,$e),De.child;case 10:e:{if(Ge=De.type._context,dn=De.pendingProps,yn=De.memoizedProps,On=dn.value,ws(Ro,Ge._currentValue),Ge._currentValue=On,yn!==null)if(as(yn.value,On)){if(yn.children===dn.children&&!Qo.current){De=su(Oe,De,$e);break e}}else for(yn=De.child,yn!==null&&(yn.return=De);yn!==null;){var Xn=yn.dependencies;if(Xn!==null){On=yn.child;for(var rr=Xn.firstContext;rr!==null;){if(rr.context===Ge){if(yn.tag===1){rr=Pa(-1,$e&-$e),rr.tag=2;var Ar=yn.updateQueue;if(Ar!==null){Ar=Ar.shared;var qr=Ar.pending;qr===null?rr.next=rr:(rr.next=qr.next,qr.next=rr),Ar.pending=rr}}yn.lanes|=$e,rr=yn.alternate,rr!==null&&(rr.lanes|=$e),Sa(yn.return,$e,De),Xn.lanes|=$e;break}rr=rr.next}}else if(yn.tag===10)On=yn.type===De.type?null:yn.child;else if(yn.tag===18){if(On=yn.return,On===null)throw Error(t(341));On.lanes|=$e,Xn=On.alternate,Xn!==null&&(Xn.lanes|=$e),Sa(On,$e,De),On=yn.sibling}else On=yn.child;if(On!==null)On.return=yn;else for(On=yn;On!==null;){if(On===De){On=null;break}if(yn=On.sibling,yn!==null){yn.return=On.return,On=yn;break}On=On.return}yn=On}fa(Oe,De,dn.children,$e),De=De.child}return De;case 9:return dn=De.type,Ge=De.pendingProps.children,Fs(De,$e),dn=eo(dn),Ge=Ge(dn),De.flags|=1,fa(Oe,De,Ge,$e),De.child;case 14:return Ge=De.type,dn=Al(Ge,De.pendingProps),dn=Al(Ge.type,dn),Ch(Oe,De,Ge,dn,$e);case 15:return Oh(Oe,De,De.type,De.pendingProps,$e);case 17:return Ge=De.type,dn=De.pendingProps,dn=De.elementType===Ge?dn:Al(Ge,dn),od(Oe,De),De.tag=1,Jo(Ge)?(Oe=!0,tu(De)):Oe=!1,Fs(De,$e),Eh(De,Ge,dn),Ld(De,Ge,dn,$e),jd(null,De,Ge,!0,Oe,$e);case 19:return $h(Oe,De,$e);case 22:return Mh(Oe,De,$e)}throw Error(t(156,De.tag))};function df(Oe,De){return pi(Oe,De)}function qf(Oe,De,$e,Ge){this.tag=Oe,this.key=$e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=De,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Ge,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function al(Oe,De,$e,Ge){return new qf(Oe,De,$e,Ge)}function sh(Oe){return Oe=Oe.prototype,!(!Oe||!Oe.isReactComponent)}function Gf(Oe){if(typeof Oe=="function")return sh(Oe)?1:0;if(Oe!=null){if(Oe=Oe.$$typeof,Oe===fn)return 11;if(Oe===Pn)return 14}return 2}function Lu(Oe,De){var $e=Oe.alternate;return $e===null?($e=al(Oe.tag,De,Oe.key,Oe.mode),$e.elementType=Oe.elementType,$e.type=Oe.type,$e.stateNode=Oe.stateNode,$e.alternate=Oe,Oe.alternate=$e):($e.pendingProps=De,$e.type=Oe.type,$e.flags=0,$e.subtreeFlags=0,$e.deletions=null),$e.flags=Oe.flags&14680064,$e.childLanes=Oe.childLanes,$e.lanes=Oe.lanes,$e.child=Oe.child,$e.memoizedProps=Oe.memoizedProps,$e.memoizedState=Oe.memoizedState,$e.updateQueue=Oe.updateQueue,De=Oe.dependencies,$e.dependencies=De===null?null:{lanes:De.lanes,firstContext:De.firstContext},$e.sibling=Oe.sibling,$e.index=Oe.index,$e.ref=Oe.ref,$e}function yd(Oe,De,$e,Ge,dn,yn){var On=2;if(Ge=Oe,typeof Oe=="function")sh(Oe)&&(On=1);else if(typeof Oe=="string")On=5;else e:switch(Oe){case Qe:return nc($e.children,dn,yn,De);case Ke:On=8,dn|=8;break;case Ye:return Oe=al(12,$e,De,dn|2),Oe.elementType=Ye,Oe.lanes=yn,Oe;case mn:return Oe=al(13,$e,De,dn),Oe.elementType=mn,Oe.lanes=yn,Oe;case wn:return Oe=al(19,$e,De,dn),Oe.elementType=wn,Oe.lanes=yn,Oe;case In:return bd($e,dn,yn,De);default:if(typeof Oe=="object"&&Oe!==null)switch(Oe.$$typeof){case pn:On=10;break e;case un:On=9;break e;case fn:On=11;break e;case Pn:On=14;break e;case xn:On=16,Ge=null;break e}throw Error(t(130,Oe==null?Oe:typeof Oe,""))}return De=al(On,$e,De,dn),De.elementType=Oe,De.type=Ge,De.lanes=yn,De}function nc(Oe,De,$e,Ge){return Oe=al(7,Oe,Ge,De),Oe.lanes=$e,Oe}function bd(Oe,De,$e,Ge){return Oe=al(22,Oe,Ge,De),Oe.elementType=In,Oe.lanes=$e,Oe.stateNode={isHidden:!1},Oe}function oh(Oe,De,$e){return Oe=al(6,Oe,null,De),Oe.lanes=$e,Oe}function ah(Oe,De,$e){return De=al(4,Oe.children!==null?Oe.children:[],Oe.key,De),De.lanes=$e,De.stateNode={containerInfo:Oe.containerInfo,pendingChildren:null,implementation:Oe.implementation},De}function Wf(Oe,De,$e,Ge,dn){this.tag=De,this.containerInfo=Oe,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ra(0),this.expirationTimes=ra(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ra(0),this.identifierPrefix=Ge,this.onRecoverableError=dn,this.mutableSourceEagerHydrationData=null}function lh(Oe,De,$e,Ge,dn,yn,On,Xn,rr){return Oe=new Wf(Oe,De,$e,Xn,rr),De===1?(De=1,yn===!0&&(De|=8)):De=0,yn=al(3,null,null,De),Oe.current=yn,yn.stateNode=Oe,yn.memoizedState={element:Ge,isDehydrated:$e,cache:null,transitions:null,pendingSuspenseBoundaries:null},dc(yn),Oe}function Hf(Oe,De,$e){var Ge=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Je,key:Ge==null?null:""+Ge,children:Oe,containerInfo:De,implementation:$e}}function hf(Oe){if(!Oe)return Fl;Oe=Oe._reactInternals;e:{if(Kn(Oe)!==Oe||Oe.tag!==1)throw Error(t(170));var De=Oe;do{switch(De.tag){case 3:De=De.stateNode.context;break e;case 1:if(Jo(De.type)){De=De.stateNode.__reactInternalMemoizedMergedChildContext;break e}}De=De.return}while(De!==null);throw Error(t(171))}if(Oe.tag===1){var $e=Oe.type;if(Jo($e))return kc(Oe,$e,De)}return De}function ff(Oe,De,$e,Ge,dn,yn,On,Xn,rr){return Oe=lh($e,Ge,!0,Oe,dn,yn,On,Xn,rr),Oe.context=hf(null),$e=Oe.current,Ge=pa(),dn=Mu($e),yn=Pa(Ge,dn),yn.callback=De??null,Ia($e,yn,dn),Oe.current.lanes=dn,To(Oe,dn,Ge),Oa(Oe,Ge),Oe}function vd(Oe,De,$e,Ge){var dn=De.current,yn=pa(),On=Mu(dn);return $e=hf($e),De.context===null?De.context=$e:De.pendingContext=$e,De=Pa(yn,On),De.payload={element:Oe},Ge=Ge===void 0?null:Ge,Ge!==null&&(De.callback=Ge),Oe=Ia(dn,De,On),Oe!==null&&(Il(Oe,dn,On,yn),nu(Oe,dn,On)),On}function wd(Oe){if(Oe=Oe.current,!Oe.child)return null;switch(Oe.child.tag){case 5:return Oe.child.stateNode;default:return Oe.child.stateNode}}function pf(Oe,De){if(Oe=Oe.memoizedState,Oe!==null&&Oe.dehydrated!==null){var $e=Oe.retryLane;Oe.retryLane=$e!==0&&$e<De?$e:De}}function uh(Oe,De){pf(Oe,De),(Oe=Oe.alternate)&&pf(Oe,De)}function Kf(){return null}var mf=typeof reportError=="function"?reportError:function(Oe){console.error(Oe)};function ch(Oe){this._internalRoot=Oe}Td.prototype.render=ch.prototype.render=function(Oe){var De=this._internalRoot;if(De===null)throw Error(t(409));vd(Oe,De,null,null)},Td.prototype.unmount=ch.prototype.unmount=function(){var Oe=this._internalRoot;if(Oe!==null){this._internalRoot=null;var De=Oe.containerInfo;Ju(function(){vd(null,Oe,null,null)}),De[Io]=null}};function Td(Oe){this._internalRoot=Oe}Td.prototype.unstable_scheduleHydration=function(Oe){if(Oe){var De=Si();Oe={blockedOn:null,target:Oe,priority:De};for(var $e=0;$e<Lo.length&&De!==0&&De<Lo[$e].priority;$e++);Lo.splice($e,0,Oe),$e===0&&La(Oe)}};function dh(Oe){return!(!Oe||Oe.nodeType!==1&&Oe.nodeType!==9&&Oe.nodeType!==11)}function Ed(Oe){return!(!Oe||Oe.nodeType!==1&&Oe.nodeType!==9&&Oe.nodeType!==11&&(Oe.nodeType!==8||Oe.nodeValue!==" react-mount-point-unstable "))}function gf(){}function Yf(Oe,De,$e,Ge,dn){if(dn){if(typeof Ge=="function"){var yn=Ge;Ge=function(){var Ar=wd(On);yn.call(Ar)}}var On=ff(De,Ge,Oe,0,null,!1,!1,"",gf);return Oe._reactRootContainer=On,Oe[Io]=On.current,Xl(Oe.nodeType===8?Oe.parentNode:Oe),Ju(),On}for(;dn=Oe.lastChild;)Oe.removeChild(dn);if(typeof Ge=="function"){var Xn=Ge;Ge=function(){var Ar=wd(rr);Xn.call(Ar)}}var rr=lh(Oe,0,!1,null,null,!1,!1,"",gf);return Oe._reactRootContainer=rr,Oe[Io]=rr.current,Xl(Oe.nodeType===8?Oe.parentNode:Oe),Ju(function(){vd(De,rr,$e,Ge)}),rr}function xd(Oe,De,$e,Ge,dn){var yn=$e._reactRootContainer;if(yn){var On=yn;if(typeof dn=="function"){var Xn=dn;dn=function(){var rr=wd(On);Xn.call(rr)}}vd(De,On,Oe,dn)}else On=Yf($e,De,Oe,dn,Ge);return wd(On)}Ui=function(Oe){switch(Oe.tag){case 3:var De=Oe.stateNode;if(De.current.memoizedState.isDehydrated){var $e=ba(De.pendingLanes);$e!==0&&(Ho(De,$e|1),Oa(De,Li()),(ls&6)===0&&(xc=Li()+500,bn()))}break;case 13:Ju(function(){var Ge=hs(Oe,1);if(Ge!==null){var dn=pa();Il(Ge,Oe,1,dn)}}),uh(Oe,1)}},Ma=function(Oe){if(Oe.tag===13){var De=hs(Oe,134217728);if(De!==null){var $e=pa();Il(De,Oe,134217728,$e)}uh(Oe,134217728)}},Fi=function(Oe){if(Oe.tag===13){var De=Mu(Oe),$e=hs(Oe,De);if($e!==null){var Ge=pa();Il($e,Oe,De,Ge)}uh(Oe,De)}},Si=function(){return Hi},ia=function(Oe,De){var $e=Hi;try{return Hi=Oe,De()}finally{Hi=$e}},Qi=function(Oe,De,$e){switch(De){case"input":if(gi(Oe,$e),De=$e.name,$e.type==="radio"&&De!=null){for($e=Oe;$e.parentNode;)$e=$e.parentNode;for($e=$e.querySelectorAll("input[name="+JSON.stringify(""+De)+'][type="radio"]'),De=0;De<$e.length;De++){var Ge=$e[De];if(Ge!==Oe&&Ge.form===Oe.form){var dn=Wu(Ge);if(!dn)throw Error(t(90));Vr(Ge),gi(Ge,dn)}}}break;case"textarea":yi(Oe,$e);break;case"select":De=$e.value,De!=null&&Kr(Oe,!!$e.multiple,De,!1)}},ro=nh,ps=Ju;var Xf={usingClientEntryPoint:!1,Events:[Tu,Zl,Wu,Ur,ni,nh]},Uc={findFiberByHostInstance:Dl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qf={bundleType:Uc.bundleType,version:Uc.version,rendererPackageName:Uc.rendererPackageName,rendererConfig:Uc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:He.ReactCurrentDispatcher,findHostInstanceByFiber:function(Oe){return Oe=xr(Oe),Oe===null?null:Oe.stateNode},findFiberByHostInstance:Uc.findFiberByHostInstance||Kf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ad.isDisabled&&Ad.supportsFiber)try{Wo=Ad.inject(Qf),io=Ad}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xf,reactDom_production_min.createPortal=function(Oe,De){var $e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dh(De))throw Error(t(200));return Hf(Oe,De,null,$e)},reactDom_production_min.createRoot=function(Oe,De){if(!dh(Oe))throw Error(t(299));var $e=!1,Ge="",dn=mf;return De!=null&&(De.unstable_strictMode===!0&&($e=!0),De.identifierPrefix!==void 0&&(Ge=De.identifierPrefix),De.onRecoverableError!==void 0&&(dn=De.onRecoverableError)),De=lh(Oe,1,!1,null,null,$e,!1,Ge,dn),Oe[Io]=De.current,Xl(Oe.nodeType===8?Oe.parentNode:Oe),new ch(De)},reactDom_production_min.findDOMNode=function(Oe){if(Oe==null)return null;if(Oe.nodeType===1)return Oe;var De=Oe._reactInternals;if(De===void 0)throw typeof Oe.render=="function"?Error(t(188)):(Oe=Object.keys(Oe).join(","),Error(t(268,Oe)));return Oe=xr(De),Oe=Oe===null?null:Oe.stateNode,Oe},reactDom_production_min.flushSync=function(Oe){return Ju(Oe)},reactDom_production_min.hydrate=function(Oe,De,$e){if(!Ed(De))throw Error(t(200));return xd(null,Oe,De,!0,$e)},reactDom_production_min.hydrateRoot=function(Oe,De,$e){if(!dh(Oe))throw Error(t(405));var Ge=$e!=null&&$e.hydratedSources||null,dn=!1,yn="",On=mf;if($e!=null&&($e.unstable_strictMode===!0&&(dn=!0),$e.identifierPrefix!==void 0&&(yn=$e.identifierPrefix),$e.onRecoverableError!==void 0&&(On=$e.onRecoverableError)),De=ff(De,null,Oe,1,$e??null,dn,!1,yn,On),Oe[Io]=De.current,Xl(Oe),Ge)for(Oe=0;Oe<Ge.length;Oe++)$e=Ge[Oe],dn=$e._getVersion,dn=dn($e._source),De.mutableSourceEagerHydrationData==null?De.mutableSourceEagerHydrationData=[$e,dn]:De.mutableSourceEagerHydrationData.push($e,dn);return new Td(De)},reactDom_production_min.render=function(Oe,De,$e){if(!Ed(De))throw Error(t(200));return xd(null,Oe,De,!1,$e)},reactDom_production_min.unmountComponentAtNode=function(Oe){if(!Ed(Oe))throw Error(t(40));return Oe._reactRootContainer?(Ju(function(){xd(null,null,Oe,!1,function(){Oe._reactRootContainer=null,Oe[Io]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=nh,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(Oe,De,$e,Ge){if(!Ed($e))throw Error(t(200));if(Oe==null||Oe._reactInternals===void 0)throw Error(t(38));return xd(Oe,De,$e,!1,Ge)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var r=requireReactDom();return client.createRoot=r.createRoot,client.hydrateRoot=r.hydrateRoot,client}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports);requireReactDom();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var _e in t)Object.prototype.hasOwnProperty.call(t,_e)&&(r[_e]=t[_e])}return r},_extends$3.apply(this,arguments)}var Action;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(r){r===void 0&&(r={});function e(_e,Te){let{pathname:Ee,search:xe,hash:Pe}=_e.location;return createLocation("",{pathname:Ee,search:xe,hash:Pe},Te.state&&Te.state.usr||null,Te.state&&Te.state.key||"default")}function t(_e,Te){return typeof Te=="string"?Te:createPath(Te)}return getUrlBasedHistory(e,t,null,r)}function invariant$1(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function warning(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(r,e){return{usr:r.state,key:r.key,idx:e}}function createLocation(r,e,t,_e){return t===void 0&&(t=null),_extends$3({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?parsePath(e):e,{state:t,key:e&&e.key||_e||createKey()})}function createPath(r){let{pathname:e="/",search:t="",hash:_e=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),_e&&_e!=="#"&&(e+=_e.charAt(0)==="#"?_e:"#"+_e),e}function parsePath(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let _e=r.indexOf("?");_e>=0&&(e.search=r.substr(_e),r=r.substr(0,_e)),r&&(e.pathname=r)}return e}function getUrlBasedHistory(r,e,t,_e){_e===void 0&&(_e={});let{window:Te=document.defaultView,v5Compat:Ee=!1}=_e,xe=Te.history,Pe=Action.Pop,Re=null,ke=Ce();ke==null&&(ke=0,xe.replaceState(_extends$3({},xe.state,{idx:ke}),""));function Ce(){return(xe.state||{idx:null}).idx}function Se(){Pe=Action.Pop;let Ve=Ce(),je=Ve==null?null:Ve-ke;ke=Ve,Re&&Re({action:Pe,location:Fe.location,delta:je})}function Ae(Ve,je){Pe=Action.Push;let Be=createLocation(Fe.location,Ve,je);ke=Ce()+1;let qe=getHistoryState(Be,ke),He=Fe.createHref(Be);try{xe.pushState(qe,"",He)}catch(Xe){if(Xe instanceof DOMException&&Xe.name==="DataCloneError")throw Xe;Te.location.assign(He)}Ee&&Re&&Re({action:Pe,location:Fe.location,delta:1})}function Ie(Ve,je){Pe=Action.Replace;let Be=createLocation(Fe.location,Ve,je);ke=Ce();let qe=getHistoryState(Be,ke),He=Fe.createHref(Be);xe.replaceState(qe,"",He),Ee&&Re&&Re({action:Pe,location:Fe.location,delta:0})}function Me(Ve){let je=Te.location.origin!=="null"?Te.location.origin:Te.location.href,Be=typeof Ve=="string"?Ve:createPath(Ve);return Be=Be.replace(/ $/,"%20"),invariant$1(je,"No window.location.(origin|href) available to create URL for href: "+Be),new URL(Be,je)}let Fe={get action(){return Pe},get location(){return r(Te,xe)},listen(Ve){if(Re)throw new Error("A history only accepts one active listener");return Te.addEventListener(PopStateEventType,Se),Re=Ve,()=>{Te.removeEventListener(PopStateEventType,Se),Re=null}},createHref(Ve){return e(Te,Ve)},createURL:Me,encodeLocation(Ve){let je=Me(Ve);return{pathname:je.pathname,search:je.search,hash:je.hash}},push:Ae,replace:Ie,go(Ve){return xe.go(Ve)}};return Fe}var ResultType;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(ResultType||(ResultType={}));function matchRoutes(r,e,t){return t===void 0&&(t="/"),matchRoutesImpl(r,e,t)}function matchRoutesImpl(r,e,t,_e){let Te=typeof e=="string"?parsePath(e):e,Ee=stripBasename(Te.pathname||"/",t);if(Ee==null)return null;let xe=flattenRoutes(r);rankRouteBranches(xe);let Pe=null;for(let Re=0;Pe==null&&Re<xe.length;++Re){let ke=decodePath(Ee);Pe=matchRouteBranch(xe[Re],ke)}return Pe}function flattenRoutes(r,e,t,_e){e===void 0&&(e=[]),t===void 0&&(t=[]),_e===void 0&&(_e="");let Te=(Ee,xe,Pe)=>{let Re={relativePath:Pe===void 0?Ee.path||"":Pe,caseSensitive:Ee.caseSensitive===!0,childrenIndex:xe,route:Ee};Re.relativePath.startsWith("/")&&(invariant$1(Re.relativePath.startsWith(_e),'Absolute route path "'+Re.relativePath+'" nested under path '+('"'+_e+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),Re.relativePath=Re.relativePath.slice(_e.length));let ke=joinPaths([_e,Re.relativePath]),Ce=t.concat(Re);Ee.children&&Ee.children.length>0&&(invariant$1(Ee.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+ke+'".')),flattenRoutes(Ee.children,e,Ce,ke)),!(Ee.path==null&&!Ee.index)&&e.push({path:ke,score:computeScore(ke,Ee.index),routesMeta:Ce})};return r.forEach((Ee,xe)=>{var Pe;if(Ee.path===""||!((Pe=Ee.path)!=null&&Pe.includes("?")))Te(Ee,xe);else for(let Re of explodeOptionalSegments(Ee.path))Te(Ee,xe,Re)}),e}function explodeOptionalSegments(r){let e=r.split("/");if(e.length===0)return[];let[t,..._e]=e,Te=t.endsWith("?"),Ee=t.replace(/\?$/,"");if(_e.length===0)return Te?[Ee,""]:[Ee];let xe=explodeOptionalSegments(_e.join("/")),Pe=[];return Pe.push(...xe.map(Re=>Re===""?Ee:[Ee,Re].join("/"))),Te&&Pe.push(...xe),Pe.map(Re=>r.startsWith("/")&&Re===""?"/":Re)}function rankRouteBranches(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:compareIndexes(e.routesMeta.map(_e=>_e.childrenIndex),t.routesMeta.map(_e=>_e.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=r=>r==="*";function computeScore(r,e){let t=r.split("/"),_e=t.length;return t.some(isSplat)&&(_e+=splatPenalty),e&&(_e+=indexRouteValue),t.filter(Te=>!isSplat(Te)).reduce((Te,Ee)=>Te+(paramRe.test(Ee)?dynamicSegmentValue:Ee===""?emptySegmentValue:staticSegmentValue),_e)}function compareIndexes(r,e){return r.length===e.length&&r.slice(0,-1).every((_e,Te)=>_e===e[Te])?r[r.length-1]-e[e.length-1]:0}function matchRouteBranch(r,e,t){let{routesMeta:_e}=r,Te={},Ee="/",xe=[];for(let Pe=0;Pe<_e.length;++Pe){let Re=_e[Pe],ke=Pe===_e.length-1,Ce=Ee==="/"?e:e.slice(Ee.length)||"/",Se=matchPath({path:Re.relativePath,caseSensitive:Re.caseSensitive,end:ke},Ce),Ae=Re.route;if(!Se)return null;Object.assign(Te,Se.params),xe.push({params:Te,pathname:joinPaths([Ee,Se.pathname]),pathnameBase:normalizePathname(joinPaths([Ee,Se.pathnameBase])),route:Ae}),Se.pathnameBase!=="/"&&(Ee=joinPaths([Ee,Se.pathnameBase]))}return xe}function matchPath(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,_e]=compilePath(r.path,r.caseSensitive,r.end),Te=e.match(t);if(!Te)return null;let Ee=Te[0],xe=Ee.replace(/(.)\/+$/,"$1"),Pe=Te.slice(1);return{params:_e.reduce((ke,Ce,Se)=>{let{paramName:Ae,isOptional:Ie}=Ce;if(Ae==="*"){let Fe=Pe[Se]||"";xe=Ee.slice(0,Ee.length-Fe.length).replace(/(.)\/+$/,"$1")}const Me=Pe[Se];return Ie&&!Me?ke[Ae]=void 0:ke[Ae]=(Me||"").replace(/%2F/g,"/"),ke},{}),pathname:Ee,pathnameBase:xe,pattern:r}}function compilePath(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),warning(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let _e=[],Te="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(xe,Pe,Re)=>(_e.push({paramName:Pe,isOptional:Re!=null}),Re?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(_e.push({paramName:"*"}),Te+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?Te+="\\/*$":r!==""&&r!=="/"&&(Te+="(?:(?=\\/|$))"),[new RegExp(Te,e?void 0:"i"),_e]}function decodePath(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function stripBasename(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,_e=r.charAt(t);return _e&&_e!=="/"?null:r.slice(t)||"/"}function resolvePath(r,e){e===void 0&&(e="/");let{pathname:t,search:_e="",hash:Te=""}=typeof r=="string"?parsePath(r):r;return{pathname:t?t.startsWith("/")?t:resolvePathname(t,e):e,search:normalizeSearch(_e),hash:normalizeHash(Te)}}function resolvePathname(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(Te=>{Te===".."?t.length>1&&t.pop():Te!=="."&&t.push(Te)}),t.length>1?t.join("/"):"/"}function getInvalidPathError(r,e,t,_e){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(_e)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(r,e){let t=getPathContributingMatches(r);return e?t.map((_e,Te)=>Te===t.length-1?_e.pathname:_e.pathnameBase):t.map(_e=>_e.pathnameBase)}function resolveTo(r,e,t,_e){_e===void 0&&(_e=!1);let Te;typeof r=="string"?Te=parsePath(r):(Te=_extends$3({},r),invariant$1(!Te.pathname||!Te.pathname.includes("?"),getInvalidPathError("?","pathname","search",Te)),invariant$1(!Te.pathname||!Te.pathname.includes("#"),getInvalidPathError("#","pathname","hash",Te)),invariant$1(!Te.search||!Te.search.includes("#"),getInvalidPathError("#","search","hash",Te)));let Ee=r===""||Te.pathname==="",xe=Ee?"/":Te.pathname,Pe;if(xe==null)Pe=t;else{let Se=e.length-1;if(!_e&&xe.startsWith("..")){let Ae=xe.split("/");for(;Ae[0]==="..";)Ae.shift(),Se-=1;Te.pathname=Ae.join("/")}Pe=Se>=0?e[Se]:"/"}let Re=resolvePath(Te,Pe),ke=xe&&xe!=="/"&&xe.endsWith("/"),Ce=(Ee||xe===".")&&t.endsWith("/");return!Re.pathname.endsWith("/")&&(ke||Ce)&&(Re.pathname+="/"),Re}const joinPaths=r=>r.join("/").replace(/\/\/+/g,"/"),normalizePathname=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,normalizeHash=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function isRouteErrorResponse(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var _e in t)Object.prototype.hasOwnProperty.call(t,_e)&&(r[_e]=t[_e])}return r},_extends$2.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(r,e){let{relative:t}=e===void 0?{}:e;useInRouterContext()||invariant$1(!1);let{basename:_e,navigator:Te}=reactExports.useContext(NavigationContext),{hash:Ee,pathname:xe,search:Pe}=useResolvedPath(r,{relative:t}),Re=xe;return _e!=="/"&&(Re=xe==="/"?_e:joinPaths([_e,xe])),Te.createHref({pathname:Re,search:Pe,hash:Ee})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$1(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$1(r){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(r)}function useNavigate(){let{isDataRoute:r}=reactExports.useContext(RouteContext);return r?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$1(!1);let r=reactExports.useContext(DataRouterContext),{basename:e,future:t,navigator:_e}=reactExports.useContext(NavigationContext),{matches:Te}=reactExports.useContext(RouteContext),{pathname:Ee}=useLocation(),xe=JSON.stringify(getResolveToMatches(Te,t.v7_relativeSplatPath)),Pe=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{Pe.current=!0}),reactExports.useCallback(function(ke,Ce){if(Ce===void 0&&(Ce={}),!Pe.current)return;if(typeof ke=="number"){_e.go(ke);return}let Se=resolveTo(ke,JSON.parse(xe),Ee,Ce.relative==="path");r==null&&e!=="/"&&(Se.pathname=Se.pathname==="/"?e:joinPaths([e,Se.pathname])),(Ce.replace?_e.replace:_e.push)(Se,Ce.state,Ce)},[e,_e,xe,Ee,r])}function useResolvedPath(r,e){let{relative:t}=e===void 0?{}:e,{future:_e}=reactExports.useContext(NavigationContext),{matches:Te}=reactExports.useContext(RouteContext),{pathname:Ee}=useLocation(),xe=JSON.stringify(getResolveToMatches(Te,_e.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(r,JSON.parse(xe),Ee,t==="path"),[r,xe,Ee,t])}function useRoutes(r,e){return useRoutesImpl(r,e)}function useRoutesImpl(r,e,t,_e){useInRouterContext()||invariant$1(!1);let{navigator:Te}=reactExports.useContext(NavigationContext),{matches:Ee}=reactExports.useContext(RouteContext),xe=Ee[Ee.length-1],Pe=xe?xe.params:{};xe&&xe.pathname;let Re=xe?xe.pathnameBase:"/";xe&&xe.route;let ke=useLocation(),Ce;if(e){var Se;let Ve=typeof e=="string"?parsePath(e):e;Re==="/"||(Se=Ve.pathname)!=null&&Se.startsWith(Re)||invariant$1(!1),Ce=Ve}else Ce=ke;let Ae=Ce.pathname||"/",Ie=Ae;if(Re!=="/"){let Ve=Re.replace(/^\//,"").split("/");Ie="/"+Ae.replace(/^\//,"").split("/").slice(Ve.length).join("/")}let Me=matchRoutes(r,{pathname:Ie}),Fe=_renderMatches(Me&&Me.map(Ve=>Object.assign({},Ve,{params:Object.assign({},Pe,Ve.params),pathname:joinPaths([Re,Te.encodeLocation?Te.encodeLocation(Ve.pathname).pathname:Ve.pathname]),pathnameBase:Ve.pathnameBase==="/"?Re:joinPaths([Re,Te.encodeLocation?Te.encodeLocation(Ve.pathnameBase).pathname:Ve.pathnameBase])})),Ee,t,_e);return e&&Fe?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$2({pathname:"/",search:"",hash:"",state:null,key:"default"},Ce),navigationType:Action.Pop}},Fe):Fe}function DefaultErrorComponent(){let r=useRouteError(),e=isRouteErrorResponse(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,Te={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),t?reactExports.createElement("pre",{style:Te},t):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(r){let{routeContext:e,match:t,children:_e}=r,Te=reactExports.useContext(DataRouterContext);return Te&&Te.static&&Te.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(Te.staticContext._deepestRenderedBoundaryId=t.route.id),reactExports.createElement(RouteContext.Provider,{value:e},_e)}function _renderMatches(r,e,t,_e){var Te;if(e===void 0&&(e=[]),t===void 0&&(t=null),_e===void 0&&(_e=null),r==null){var Ee;if(!t)return null;if(t.errors)r=t.matches;else if((Ee=_e)!=null&&Ee.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let xe=r,Pe=(Te=t)==null?void 0:Te.errors;if(Pe!=null){let Ce=xe.findIndex(Se=>Se.route.id&&Pe?.[Se.route.id]!==void 0);Ce>=0||invariant$1(!1),xe=xe.slice(0,Math.min(xe.length,Ce+1))}let Re=!1,ke=-1;if(t&&_e&&_e.v7_partialHydration)for(let Ce=0;Ce<xe.length;Ce++){let Se=xe[Ce];if((Se.route.HydrateFallback||Se.route.hydrateFallbackElement)&&(ke=Ce),Se.route.id){let{loaderData:Ae,errors:Ie}=t,Me=Se.route.loader&&Ae[Se.route.id]===void 0&&(!Ie||Ie[Se.route.id]===void 0);if(Se.route.lazy||Me){Re=!0,ke>=0?xe=xe.slice(0,ke+1):xe=[xe[0]];break}}}return xe.reduceRight((Ce,Se,Ae)=>{let Ie,Me=!1,Fe=null,Ve=null;t&&(Ie=Pe&&Se.route.id?Pe[Se.route.id]:void 0,Fe=Se.route.errorElement||defaultErrorElement,Re&&(ke<0&&Ae===0?(warningOnce("route-fallback"),Me=!0,Ve=null):ke===Ae&&(Me=!0,Ve=Se.route.hydrateFallbackElement||null)));let je=e.concat(xe.slice(0,Ae+1)),Be=()=>{let qe;return Ie?qe=Fe:Me?qe=Ve:Se.route.Component?qe=reactExports.createElement(Se.route.Component,null):Se.route.element?qe=Se.route.element:qe=Ce,reactExports.createElement(RenderedRoute,{match:Se,routeContext:{outlet:Ce,matches:je,isDataRoute:t!=null},children:qe})};return t&&(Se.route.ErrorBoundary||Se.route.errorElement||Ae===0)?reactExports.createElement(RenderErrorBoundary,{location:t.location,revalidation:t.revalidation,component:Fe,error:Ie,children:Be(),routeContext:{outlet:null,matches:je,isDataRoute:!0}}):Be()},null)}var DataRouterHook$1=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(DataRouterHook$1||{}),DataRouterStateHook$1=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(DataRouterStateHook$1||{});function useDataRouterContext(r){let e=reactExports.useContext(DataRouterContext);return e||invariant$1(!1),e}function useDataRouterState(r){let e=reactExports.useContext(DataRouterStateContext);return e||invariant$1(!1),e}function useRouteContext(r){let e=reactExports.useContext(RouteContext);return e||invariant$1(!1),e}function useCurrentRouteId(r){let e=useRouteContext(),t=e.matches[e.matches.length-1];return t.route.id||invariant$1(!1),t.route.id}function useRouteError(){var r;let e=reactExports.useContext(RouteErrorContext),t=useDataRouterState(),_e=useCurrentRouteId();return e!==void 0?e:(r=t.errors)==null?void 0:r[_e]}function useNavigateStable(){let{router:r}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),e=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),t=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{t.current=!0}),reactExports.useCallback(function(Te,Ee){Ee===void 0&&(Ee={}),t.current&&(typeof Te=="number"?r.navigate(Te):r.navigate(Te,_extends$2({fromRouteId:e},Ee)))},[r,e])}const alreadyWarned$1={};function warningOnce(r,e,t){alreadyWarned$1[r]||(alreadyWarned$1[r]=!0)}function logV6DeprecationWarnings(r,e){r?.v7_startTransition,r?.v7_relativeSplatPath}function Route(r){invariant$1(!1)}function Router(r){let{basename:e="/",children:t=null,location:_e,navigationType:Te=Action.Pop,navigator:Ee,static:xe=!1,future:Pe}=r;useInRouterContext()&&invariant$1(!1);let Re=e.replace(/^\/*/,"/"),ke=reactExports.useMemo(()=>({basename:Re,navigator:Ee,static:xe,future:_extends$2({v7_relativeSplatPath:!1},Pe)}),[Re,Pe,Ee,xe]);typeof _e=="string"&&(_e=parsePath(_e));let{pathname:Ce="/",search:Se="",hash:Ae="",state:Ie=null,key:Me="default"}=_e,Fe=reactExports.useMemo(()=>{let Ve=stripBasename(Ce,Re);return Ve==null?null:{location:{pathname:Ve,search:Se,hash:Ae,state:Ie,key:Me},navigationType:Te}},[Re,Ce,Se,Ae,Ie,Me,Te]);return Fe==null?null:reactExports.createElement(NavigationContext.Provider,{value:ke},reactExports.createElement(LocationContext.Provider,{children:t,value:Fe}))}function Routes(r){let{children:e,location:t}=r;return useRoutes(createRoutesFromChildren(e),t)}new Promise(()=>{});function createRoutesFromChildren(r,e){e===void 0&&(e=[]);let t=[];return reactExports.Children.forEach(r,(_e,Te)=>{if(!reactExports.isValidElement(_e))return;let Ee=[...e,Te];if(_e.type===reactExports.Fragment){t.push.apply(t,createRoutesFromChildren(_e.props.children,Ee));return}_e.type!==Route&&invariant$1(!1),!_e.props.index||!_e.props.children||invariant$1(!1);let xe={id:_e.props.id||Ee.join("-"),caseSensitive:_e.props.caseSensitive,element:_e.props.element,Component:_e.props.Component,index:_e.props.index,path:_e.props.path,loader:_e.props.loader,action:_e.props.action,errorElement:_e.props.errorElement,ErrorBoundary:_e.props.ErrorBoundary,hasErrorBoundary:_e.props.ErrorBoundary!=null||_e.props.errorElement!=null,shouldRevalidate:_e.props.shouldRevalidate,handle:_e.props.handle,lazy:_e.props.lazy};_e.props.children&&(xe.children=createRoutesFromChildren(_e.props.children,Ee)),t.push(xe)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var _e in t)Object.prototype.hasOwnProperty.call(t,_e)&&(r[_e]=t[_e])}return r},_extends$1.apply(this,arguments)}function _objectWithoutPropertiesLoose$1(r,e){if(r==null)return{};var t={},_e=Object.keys(r),Te,Ee;for(Ee=0;Ee<_e.length;Ee++)Te=_e[Ee],!(e.indexOf(Te)>=0)&&(t[Te]=r[Te]);return t}function isModifiedEvent(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function shouldProcessLinkClick(r,e){return r.button===0&&(!e||e==="_self")&&!isModifiedEvent(r)}const _excluded$1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=React$1[START_TRANSITION];function BrowserRouter(r){let{basename:e,children:t,future:_e,window:Te}=r,Ee=reactExports.useRef();Ee.current==null&&(Ee.current=createBrowserHistory({window:Te,v5Compat:!0}));let xe=Ee.current,[Pe,Re]=reactExports.useState({action:xe.action,location:xe.location}),{v7_startTransition:ke}=_e||{},Ce=reactExports.useCallback(Se=>{ke&&startTransitionImpl?startTransitionImpl(()=>Re(Se)):Re(Se)},[Re,ke]);return reactExports.useLayoutEffect(()=>xe.listen(Ce),[xe,Ce]),reactExports.useEffect(()=>logV6DeprecationWarnings(_e),[_e]),reactExports.createElement(Router,{basename:e,children:t,location:Pe.location,navigationType:Pe.action,navigator:xe,future:_e})}const isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(e,t){let{onClick:_e,relative:Te,reloadDocument:Ee,replace:xe,state:Pe,target:Re,to:ke,preventScrollReset:Ce,viewTransition:Se}=e,Ae=_objectWithoutPropertiesLoose$1(e,_excluded$1),{basename:Ie}=reactExports.useContext(NavigationContext),Me,Fe=!1;if(typeof ke=="string"&&ABSOLUTE_URL_REGEX.test(ke)&&(Me=ke,isBrowser$1))try{let qe=new URL(window.location.href),He=ke.startsWith("//")?new URL(qe.protocol+ke):new URL(ke),Xe=stripBasename(He.pathname,Ie);He.origin===qe.origin&&Xe!=null?ke=Xe+He.search+He.hash:Fe=!0}catch{}let Ve=useHref(ke,{relative:Te}),je=useLinkClickHandler(ke,{replace:xe,state:Pe,target:Re,preventScrollReset:Ce,relative:Te,viewTransition:Se});function Be(qe){_e&&_e(qe),qe.defaultPrevented||je(qe)}return reactExports.createElement("a",_extends$1({},Ae,{href:Me||Ve,onClick:Fe||Ee?_e:Be,ref:t,target:Re}))});var DataRouterHook;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(r,e){let{target:t,replace:_e,state:Te,preventScrollReset:Ee,relative:xe,viewTransition:Pe}=e===void 0?{}:e,Re=useNavigate(),ke=useLocation(),Ce=useResolvedPath(r,{relative:xe});return reactExports.useCallback(Se=>{if(shouldProcessLinkClick(Se,t)){Se.preventDefault();let Ae=_e!==void 0?_e:createPath(ke)===createPath(Ce);Re(r,{replace:Ae,state:Te,preventScrollReset:Ee,relative:xe,viewTransition:Pe})}},[ke,Re,Ce,_e,Te,t,r,Ee,xe,Pe])}const getDefaultsFromPostinstall=()=>{};var define_process_env_default$1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(r){const e=[];let t=0;for(let _e=0;_e<r.length;_e++){let Te=r.charCodeAt(_e);Te<128?e[t++]=Te:Te<2048?(e[t++]=Te>>6|192,e[t++]=Te&63|128):(Te&64512)===55296&&_e+1<r.length&&(r.charCodeAt(_e+1)&64512)===56320?(Te=65536+((Te&1023)<<10)+(r.charCodeAt(++_e)&1023),e[t++]=Te>>18|240,e[t++]=Te>>12&63|128,e[t++]=Te>>6&63|128,e[t++]=Te&63|128):(e[t++]=Te>>12|224,e[t++]=Te>>6&63|128,e[t++]=Te&63|128)}return e},byteArrayToString=function(r){const e=[];let t=0,_e=0;for(;t<r.length;){const Te=r[t++];if(Te<128)e[_e++]=String.fromCharCode(Te);else if(Te>191&&Te<224){const Ee=r[t++];e[_e++]=String.fromCharCode((Te&31)<<6|Ee&63)}else if(Te>239&&Te<365){const Ee=r[t++],xe=r[t++],Pe=r[t++],Re=((Te&7)<<18|(Ee&63)<<12|(xe&63)<<6|Pe&63)-65536;e[_e++]=String.fromCharCode(55296+(Re>>10)),e[_e++]=String.fromCharCode(56320+(Re&1023))}else{const Ee=r[t++],xe=r[t++];e[_e++]=String.fromCharCode((Te&15)<<12|(Ee&63)<<6|xe&63)}}return e.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,_e=[];for(let Te=0;Te<r.length;Te+=3){const Ee=r[Te],xe=Te+1<r.length,Pe=xe?r[Te+1]:0,Re=Te+2<r.length,ke=Re?r[Te+2]:0,Ce=Ee>>2,Se=(Ee&3)<<4|Pe>>4;let Ae=(Pe&15)<<2|ke>>6,Ie=ke&63;Re||(Ie=64,xe||(Ae=64)),_e.push(t[Ce],t[Se],t[Ae],t[Ie])}return _e.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(stringToByteArray$1(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):byteArrayToString(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,_e=[];for(let Te=0;Te<r.length;){const Ee=t[r.charAt(Te++)],Pe=Te<r.length?t[r.charAt(Te)]:0;++Te;const ke=Te<r.length?t[r.charAt(Te)]:64;++Te;const Se=Te<r.length?t[r.charAt(Te)]:64;if(++Te,Ee==null||Pe==null||ke==null||Se==null)throw new DecodeBase64StringError;const Ae=Ee<<2|Pe>>4;if(_e.push(Ae),ke!==64){const Ie=Pe<<4&240|ke>>2;if(_e.push(Ie),Se!==64){const Me=ke<<6&192|Se;_e.push(Me)}}}return _e},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(r){const e=stringToByteArray$1(r);return base64.encodeByteArray(e,!0)},base64urlEncodeWithoutPadding=function(r){return base64Encode(r).replace(/\./g,"")},base64Decode=function(r){try{return base64.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default$1>"u")return;const r=define_process_env_default$1.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&base64Decode(r[1]);return e&&JSON.parse(e)},getDefaults=()=>{try{return getDefaultsFromPostinstall()||getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},getDefaultEmulatorHost=r=>{var e,t;return(t=(e=getDefaults())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},getDefaultEmulatorHostnameAndPort=r=>{const e=getDefaultEmulatorHost(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const _e=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),_e]:[e.substring(0,t),_e]},getDefaultAppConfig=()=>{var r;return(r=getDefaults())===null||r===void 0?void 0:r.config},getExperimentalSetting=r=>{var e;return(e=getDefaults())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,_e)=>{t?this.reject(t):this.resolve(_e),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,_e))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isCloudWorkstation(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function pingServer(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},_e=e||"demo-project",Te=r.iat||0,Ee=r.sub||r.user_id;if(!Ee)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const xe=Object.assign({iss:`https://securetoken.google.com/${_e}`,aud:_e,iat:Te,exp:Te+3600,auth_time:Te,sub:Ee,user_id:Ee,firebase:{sign_in_provider:"custom",identities:{}}},r);return[base64urlEncodeWithoutPadding(JSON.stringify(t)),base64urlEncodeWithoutPadding(JSON.stringify(xe)),""].join(".")}const emulatorStatus={};function getEmulatorSummary(){const r={prod:[],emulator:[]};for(const e of Object.keys(emulatorStatus))emulatorStatus[e]?r.emulator.push(e):r.prod.push(e);return r}function getOrCreateEl(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let previouslyDismissed=!1;function updateEmulatorBanner(r,e){if(typeof window>"u"||typeof document>"u"||!isCloudWorkstation(window.location.host)||emulatorStatus[r]===e||emulatorStatus[r]||previouslyDismissed)return;emulatorStatus[r]=e;function t(Ae){return`__firebase__banner__${Ae}`}const _e="__firebase__banner",Ee=getEmulatorSummary().prod.length>0;function xe(){const Ae=document.getElementById(_e);Ae&&Ae.remove()}function Pe(Ae){Ae.style.display="flex",Ae.style.background="#7faaf0",Ae.style.position="fixed",Ae.style.bottom="5px",Ae.style.left="5px",Ae.style.padding=".5em",Ae.style.borderRadius="5px",Ae.style.alignItems="center"}function Re(Ae,Ie){Ae.setAttribute("width","24"),Ae.setAttribute("id",Ie),Ae.setAttribute("height","24"),Ae.setAttribute("viewBox","0 0 24 24"),Ae.setAttribute("fill","none"),Ae.style.marginLeft="-6px"}function ke(){const Ae=document.createElement("span");return Ae.style.cursor="pointer",Ae.style.marginLeft="16px",Ae.style.fontSize="24px",Ae.innerHTML=" &times;",Ae.onclick=()=>{previouslyDismissed=!0,xe()},Ae}function Ce(Ae,Ie){Ae.setAttribute("id",Ie),Ae.innerText="Learn more",Ae.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",Ae.setAttribute("target","__blank"),Ae.style.paddingLeft="5px",Ae.style.textDecoration="underline"}function Se(){const Ae=getOrCreateEl(_e),Ie=t("text"),Me=document.getElementById(Ie)||document.createElement("span"),Fe=t("learnmore"),Ve=document.getElementById(Fe)||document.createElement("a"),je=t("preprendIcon"),Be=document.getElementById(je)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(Ae.created){const qe=Ae.element;Pe(qe),Ce(Ve,Fe);const He=ke();Re(Be,je),qe.append(Be,Me,Ve,He),document.body.appendChild(qe)}Ee?(Me.innerText="Preview backend disconnected.",Be.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Be.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Me.innerText="Preview backend running in this workspace."),Me.setAttribute("id",Ie)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",Se):Se()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isNode(){var r;const e=(r=getDefaults())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function isCloudflareWorker(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function isBrowserExtension(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function isReactNative(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const r=getUA();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function isSafari(){return!isNode()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((r,e)=>{try{let t=!0;const _e="validate-browser-context-for-indexeddb-analytics-module",Te=self.indexedDB.open(_e);Te.onsuccess=()=>{Te.result.close(),t||self.indexedDB.deleteDatabase(_e),r(!0)},Te.onupgradeneeded=()=>{t=!1},Te.onerror=()=>{var Ee;e(((Ee=Te.error)===null||Ee===void 0?void 0:Ee.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(e,t,_e){super(t),this.code=e,this.customData=_e,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(e,t,_e){this.service=e,this.serviceName=t,this.errors=_e}create(e,...t){const _e=t[0]||{},Te=`${this.service}/${e}`,Ee=this.errors[e],xe=Ee?replaceTemplate(Ee,_e):"Error",Pe=`${this.serviceName}: ${xe} (${Te}).`;return new FirebaseError(Te,Pe,_e)}}function replaceTemplate(r,e){return r.replace(PATTERN,(t,_e)=>{const Te=e[_e];return Te!=null?String(Te):`<${_e}?>`})}const PATTERN=/\{\$([^}]+)}/g;function isEmpty$2(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function deepEqual(r,e){if(r===e)return!0;const t=Object.keys(r),_e=Object.keys(e);for(const Te of t){if(!_e.includes(Te))return!1;const Ee=r[Te],xe=e[Te];if(isObject$2(Ee)&&isObject$2(xe)){if(!deepEqual(Ee,xe))return!1}else if(Ee!==xe)return!1}for(const Te of _e)if(!t.includes(Te))return!1;return!0}function isObject$2(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring(r){const e=[];for(const[t,_e]of Object.entries(r))Array.isArray(_e)?_e.forEach(Te=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(Te))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(_e));return e.length?"&"+e.join("&"):""}function querystringDecode(r){const e={};return r.replace(/^\?/,"").split("&").forEach(_e=>{if(_e){const[Te,Ee]=_e.split("=");e[decodeURIComponent(Te)]=decodeURIComponent(Ee)}}),e}function extractQuerystring(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function createSubscribe(r,e){const t=new ObserverProxy(r,e);return t.subscribe.bind(t)}class ObserverProxy{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(_e=>{this.error(_e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,_e){let Te;if(e===void 0&&t===void 0&&_e===void 0)throw new Error("Missing Observer.");implementsAnyMethods(e,["next","error","complete"])?Te=e:Te={next:e,error:t,complete:_e},Te.next===void 0&&(Te.next=noop$2),Te.error===void 0&&(Te.error=noop$2),Te.complete===void 0&&(Te.complete=noop$2);const Ee=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Te.error(this.finalError):Te.complete()}catch{}}),this.observers.push(Te),Ee}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(_e){typeof console<"u"&&console.error&&console.error(_e)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function noop$2(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(r){return r&&r._delegate?r._delegate:r}class Component{constructor(e,t,_e){this.name=e,this.instanceFactory=t,this.type=_e,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Provider{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const _e=new Deferred;if(this.instancesDeferred.set(t,_e),this.isInitialized(t)||this.shouldAutoInitialize())try{const Te=this.getOrInitializeService({instanceIdentifier:t});Te&&_e.resolve(Te)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const _e=this.normalizeInstanceIdentifier(e?.identifier),Te=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(_e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:_e})}catch(Ee){if(Te)return null;throw Ee}else{if(Te)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(isComponentEager(e))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[t,_e]of this.instancesDeferred.entries()){const Te=this.normalizeInstanceIdentifier(t);try{const Ee=this.getOrInitializeService({instanceIdentifier:Te});_e.resolve(Ee)}catch{}}}}clearInstance(e=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=DEFAULT_ENTRY_NAME$1){return this.instances.has(e)}getOptions(e=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,_e=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(_e))throw Error(`${this.name}(${_e}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Te=this.getOrInitializeService({instanceIdentifier:_e,options:t});for(const[Ee,xe]of this.instancesDeferred.entries()){const Pe=this.normalizeInstanceIdentifier(Ee);_e===Pe&&xe.resolve(Te)}return Te}onInit(e,t){var _e;const Te=this.normalizeInstanceIdentifier(t),Ee=(_e=this.onInitCallbacks.get(Te))!==null&&_e!==void 0?_e:new Set;Ee.add(e),this.onInitCallbacks.set(Te,Ee);const xe=this.instances.get(Te);return xe&&e(xe,Te),()=>{Ee.delete(e)}}invokeOnInitCallbacks(e,t){const _e=this.onInitCallbacks.get(t);if(_e)for(const Te of _e)try{Te(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let _e=this.instances.get(e);if(!_e&&this.component&&(_e=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(e),options:t}),this.instances.set(e,_e),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(_e,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,_e)}catch{}return _e||null}normalizeInstanceIdentifier(e=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?e:DEFAULT_ENTRY_NAME$1:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function normalizeIdentifierForFactory(r){return r===DEFAULT_ENTRY_NAME$1?void 0:r}function isComponentEager(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Provider(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(r,e,...t)=>{if(e<r.logLevel)return;const _e=new Date().toISOString(),Te=ConsoleMethod[e];if(Te)console[Te](`[${_e}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Logger{constructor(e){this.name=e,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in LogLevel))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?levelStringToEnum[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...e),this._logHandler(this,LogLevel.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...e),this._logHandler(this,LogLevel.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...e),this._logHandler(this,LogLevel.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...e),this._logHandler(this,LogLevel.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...e),this._logHandler(this,LogLevel.ERROR,...e)}}const instanceOfAny=(r,e)=>e.some(t=>r instanceof t);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(r){const e=new Promise((t,_e)=>{const Te=()=>{r.removeEventListener("success",Ee),r.removeEventListener("error",xe)},Ee=()=>{t(wrap$2(r.result)),Te()},xe=()=>{_e(r.error),Te()};r.addEventListener("success",Ee),r.addEventListener("error",xe)});return e.then(t=>{t instanceof IDBCursor&&cursorRequestMap.set(t,r)}).catch(()=>{}),reverseTransformCache.set(e,r),e}function cacheDonePromiseForTransaction(r){if(transactionDoneMap.has(r))return;const e=new Promise((t,_e)=>{const Te=()=>{r.removeEventListener("complete",Ee),r.removeEventListener("error",xe),r.removeEventListener("abort",xe)},Ee=()=>{t(),Te()},xe=()=>{_e(r.error||new DOMException("AbortError","AbortError")),Te()};r.addEventListener("complete",Ee),r.addEventListener("error",xe),r.addEventListener("abort",xe)});transactionDoneMap.set(r,e)}let idbProxyTraps={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return transactionDoneMap.get(r);if(e==="objectStoreNames")return r.objectStoreNames||transactionStoreNamesMap.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wrap$2(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function replaceTraps(r){idbProxyTraps=r(idbProxyTraps)}function wrapFunction(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const _e=r.call(unwrap(this),e,...t);return transactionStoreNamesMap.set(_e,e.sort?e.sort():[e]),wrap$2(_e)}:getCursorAdvanceMethods().includes(r)?function(...e){return r.apply(unwrap(this),e),wrap$2(cursorRequestMap.get(this))}:function(...e){return wrap$2(r.apply(unwrap(this),e))}}function transformCachableValue(r){return typeof r=="function"?wrapFunction(r):(r instanceof IDBTransaction&&cacheDonePromiseForTransaction(r),instanceOfAny(r,getIdbProxyableTypes())?new Proxy(r,idbProxyTraps):r)}function wrap$2(r){if(r instanceof IDBRequest)return promisifyRequest(r);if(transformCache.has(r))return transformCache.get(r);const e=transformCachableValue(r);return e!==r&&(transformCache.set(r,e),reverseTransformCache.set(e,r)),e}const unwrap=r=>reverseTransformCache.get(r);function openDB(r,e,{blocked:t,upgrade:_e,blocking:Te,terminated:Ee}={}){const xe=indexedDB.open(r,e),Pe=wrap$2(xe);return _e&&xe.addEventListener("upgradeneeded",Re=>{_e(wrap$2(xe.result),Re.oldVersion,Re.newVersion,wrap$2(xe.transaction),Re)}),t&&xe.addEventListener("blocked",Re=>t(Re.oldVersion,Re.newVersion,Re)),Pe.then(Re=>{Ee&&Re.addEventListener("close",()=>Ee()),Te&&Re.addEventListener("versionchange",ke=>Te(ke.oldVersion,ke.newVersion,ke))}).catch(()=>{}),Pe}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(cachedMethods.get(e))return cachedMethods.get(e);const t=e.replace(/FromIndex$/,""),_e=e!==t,Te=writeMethods.includes(t);if(!(t in(_e?IDBIndex:IDBObjectStore).prototype)||!(Te||readMethods.includes(t)))return;const Ee=async function(xe,...Pe){const Re=this.transaction(xe,Te?"readwrite":"readonly");let ke=Re.store;return _e&&(ke=ke.index(Pe.shift())),(await Promise.all([ke[t](...Pe),Te&&Re.done]))[0]};return cachedMethods.set(e,Ee),Ee}replaceTraps(r=>({...r,get:(e,t,_e)=>getMethod(e,t)||r.get(e,t,_e),has:(e,t)=>!!getMethod(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(isVersionServiceProvider(t)){const _e=t.getImmediate();return`${_e.library}/${_e.version}`}else return null}).filter(t=>t).join(" ")}}function isVersionServiceProvider(r){const e=r.getComponent();return e?.type==="VERSION"}const name$q="@firebase/app",version$1$1="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger=new Logger("@firebase/app"),name$p="@firebase/app-compat",name$o="@firebase/analytics-compat",name$n="@firebase/analytics",name$m="@firebase/app-check-compat",name$l="@firebase/app-check",name$k="@firebase/auth",name$j="@firebase/auth-compat",name$i="@firebase/database",name$h="@firebase/data-connect",name$g="@firebase/database-compat",name$f="@firebase/functions",name$e="@firebase/functions-compat",name$d="@firebase/installations",name$c="@firebase/installations-compat",name$b="@firebase/messaging",name$a="@firebase/messaging-compat",name$9="@firebase/performance",name$8="@firebase/performance-compat",name$7="@firebase/remote-config",name$6="@firebase/remote-config-compat",name$5="@firebase/storage",name$4="@firebase/storage-compat",name$3$1="@firebase/firestore",name$2$1="@firebase/ai",name$1$1="@firebase/firestore-compat",name$r="firebase",version$2="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$q]:"fire-core",[name$p]:"fire-core-compat",[name$n]:"fire-analytics",[name$o]:"fire-analytics-compat",[name$l]:"fire-app-check",[name$m]:"fire-app-check-compat",[name$k]:"fire-auth",[name$j]:"fire-auth-compat",[name$i]:"fire-rtdb",[name$h]:"fire-data-connect",[name$g]:"fire-rtdb-compat",[name$f]:"fire-fn",[name$e]:"fire-fn-compat",[name$d]:"fire-iid",[name$c]:"fire-iid-compat",[name$b]:"fire-fcm",[name$a]:"fire-fcm-compat",[name$9]:"fire-perf",[name$8]:"fire-perf-compat",[name$7]:"fire-rc",[name$6]:"fire-rc-compat",[name$5]:"fire-gcs",[name$4]:"fire-gcs-compat",[name$3$1]:"fire-fst",[name$1$1]:"fire-fst-compat",[name$2$1]:"fire-vertex","fire-js":"fire-js",[name$r]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent(r,e){try{r.container.addComponent(e)}catch(t){logger.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function _registerComponent(r){const e=r.name;if(_components.has(e))return logger.debug(`There were multiple attempts to register component ${e}.`),!1;_components.set(e,r);for(const t of _apps.values())_addComponent(t,r);for(const t of _serverApps.values())_addComponent(t,r);return!0}function _getProvider(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function _isFirebaseServerApp(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY=new ErrorFactory("app","Firebase",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(e,t,_e){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=_e,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION=version$2;function initializeApp(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const _e=Object.assign({name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!0},e),Te=_e.name;if(typeof Te!="string"||!Te)throw ERROR_FACTORY.create("bad-app-name",{appName:String(Te)});if(t||(t=getDefaultAppConfig()),!t)throw ERROR_FACTORY.create("no-options");const Ee=_apps.get(Te);if(Ee){if(deepEqual(t,Ee.options)&&deepEqual(_e,Ee.config))return Ee;throw ERROR_FACTORY.create("duplicate-app",{appName:Te})}const xe=new ComponentContainer(Te);for(const Re of _components.values())xe.addComponent(Re);const Pe=new FirebaseAppImpl(t,_e,xe);return _apps.set(Te,Pe),Pe}function getApp(r=DEFAULT_ENTRY_NAME){const e=_apps.get(r);if(!e&&r===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!e)throw ERROR_FACTORY.create("no-app",{appName:r});return e}function registerVersion(r,e,t){var _e;let Te=(_e=PLATFORM_LOG_STRING[r])!==null&&_e!==void 0?_e:r;t&&(Te+=`-${t}`);const Ee=Te.match(/\s|\//),xe=e.match(/\s|\//);if(Ee||xe){const Pe=[`Unable to register library "${Te}" with version "${e}":`];Ee&&Pe.push(`library name "${Te}" contains illegal characters (whitespace or "/")`),Ee&&xe&&Pe.push("and"),xe&&Pe.push(`version name "${e}" contains illegal characters (whitespace or "/")`),logger.warn(Pe.join(" "));return}_registerComponent(new Component(`${Te}-version`,()=>({library:Te,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(STORE_NAME)}catch(t){console.warn(t)}}}}).catch(r=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:r.message})})),dbPromise}async function readHeartbeatsFromIndexedDB(r){try{const t=(await getDbPromise()).transaction(STORE_NAME),_e=await t.objectStore(STORE_NAME).get(computeKey(r));return await t.done,_e}catch(e){if(e instanceof FirebaseError)logger.warn(e.message);else{const t=ERROR_FACTORY.create("idb-get",{originalErrorMessage:e?.message});logger.warn(t.message)}}}async function writeHeartbeatsToIndexedDB(r,e){try{const _e=(await getDbPromise()).transaction(STORE_NAME,"readwrite");await _e.objectStore(STORE_NAME).put(e,computeKey(r)),await _e.done}catch(t){if(t instanceof FirebaseError)logger.warn(t.message);else{const _e=ERROR_FACTORY.create("idb-set",{originalErrorMessage:t?.message});logger.warn(_e.message)}}}function computeKey(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,MAX_NUM_STORED_HEARTBEATS=30;class HeartbeatServiceImpl{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(t),this._heartbeatsCachePromise=this._storage.read().then(_e=>(this._heartbeatsCache=_e,_e))}async triggerHeartbeat(){var e,t;try{const Te=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ee=getUTCDateString();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===Ee||this._heartbeatsCache.heartbeats.some(xe=>xe.date===Ee))return;if(this._heartbeatsCache.heartbeats.push({date:Ee,agent:Te}),this._heartbeatsCache.heartbeats.length>MAX_NUM_STORED_HEARTBEATS){const xe=getEarliestHeartbeatIdx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(xe,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(_e){logger.warn(_e)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=getUTCDateString(),{heartbeatsToSend:_e,unsentEntries:Te}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),Ee=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:_e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,Te.length>0?(this._heartbeatsCache.heartbeats=Te,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),Ee}catch(t){return logger.warn(t),""}}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(r,e=MAX_HEADER_BYTES){const t=[];let _e=r.slice();for(const Te of r){const Ee=t.find(xe=>xe.agent===Te.agent);if(Ee){if(Ee.dates.push(Te.date),countBytes(t)>e){Ee.dates.pop();break}}else if(t.push({agent:Te.agent,dates:[Te.date]}),countBytes(t)>e){t.pop();break}_e=_e.slice(1)}return{heartbeatsToSend:t,unsentEntries:_e}}class HeartbeatStorageImpl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await readHeartbeatsFromIndexedDB(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const Te=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:Te.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const Te=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:Te.lastSentHeartbeatDate,heartbeats:[...Te.heartbeats,...e.heartbeats]})}else return}}function countBytes(r){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:r})).length}function getEarliestHeartbeatIdx(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let _e=1;_e<r.length;_e++)r[_e].date<t&&(t=r[_e].date,e=_e);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(r){_registerComponent(new Component("platform-logger",e=>new PlatformLoggerServiceImpl(e),"PRIVATE")),_registerComponent(new Component("heartbeat",e=>new HeartbeatServiceImpl(e),"PRIVATE")),registerVersion(name$q,version$1$1,r),registerVersion(name$q,version$1$1,"esm2017"),registerVersion("fire-js","")}registerCoreComponents("");var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Integer,Md5;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(Qe,Ke){function Ye(){}Ye.prototype=Ke.prototype,Qe.D=Ke.prototype,Qe.prototype=new Ye,Qe.prototype.constructor=Qe,Qe.C=function(pn,un,fn){for(var mn=Array(arguments.length-2),wn=2;wn<arguments.length;wn++)mn[wn-2]=arguments[wn];return Ke.prototype[un].apply(pn,mn)}}function t(){this.blockSize=-1}function _e(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(_e,t),_e.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function Te(Qe,Ke,Ye){Ye||(Ye=0);var pn=Array(16);if(typeof Ke=="string")for(var un=0;16>un;++un)pn[un]=Ke.charCodeAt(Ye++)|Ke.charCodeAt(Ye++)<<8|Ke.charCodeAt(Ye++)<<16|Ke.charCodeAt(Ye++)<<24;else for(un=0;16>un;++un)pn[un]=Ke[Ye++]|Ke[Ye++]<<8|Ke[Ye++]<<16|Ke[Ye++]<<24;Ke=Qe.g[0],Ye=Qe.g[1],un=Qe.g[2];var fn=Qe.g[3],mn=Ke+(fn^Ye&(un^fn))+pn[0]+3614090360&4294967295;Ke=Ye+(mn<<7&4294967295|mn>>>25),mn=fn+(un^Ke&(Ye^un))+pn[1]+3905402710&4294967295,fn=Ke+(mn<<12&4294967295|mn>>>20),mn=un+(Ye^fn&(Ke^Ye))+pn[2]+606105819&4294967295,un=fn+(mn<<17&4294967295|mn>>>15),mn=Ye+(Ke^un&(fn^Ke))+pn[3]+3250441966&4294967295,Ye=un+(mn<<22&4294967295|mn>>>10),mn=Ke+(fn^Ye&(un^fn))+pn[4]+4118548399&4294967295,Ke=Ye+(mn<<7&4294967295|mn>>>25),mn=fn+(un^Ke&(Ye^un))+pn[5]+1200080426&4294967295,fn=Ke+(mn<<12&4294967295|mn>>>20),mn=un+(Ye^fn&(Ke^Ye))+pn[6]+2821735955&4294967295,un=fn+(mn<<17&4294967295|mn>>>15),mn=Ye+(Ke^un&(fn^Ke))+pn[7]+4249261313&4294967295,Ye=un+(mn<<22&4294967295|mn>>>10),mn=Ke+(fn^Ye&(un^fn))+pn[8]+1770035416&4294967295,Ke=Ye+(mn<<7&4294967295|mn>>>25),mn=fn+(un^Ke&(Ye^un))+pn[9]+2336552879&4294967295,fn=Ke+(mn<<12&4294967295|mn>>>20),mn=un+(Ye^fn&(Ke^Ye))+pn[10]+4294925233&4294967295,un=fn+(mn<<17&4294967295|mn>>>15),mn=Ye+(Ke^un&(fn^Ke))+pn[11]+2304563134&4294967295,Ye=un+(mn<<22&4294967295|mn>>>10),mn=Ke+(fn^Ye&(un^fn))+pn[12]+1804603682&4294967295,Ke=Ye+(mn<<7&4294967295|mn>>>25),mn=fn+(un^Ke&(Ye^un))+pn[13]+4254626195&4294967295,fn=Ke+(mn<<12&4294967295|mn>>>20),mn=un+(Ye^fn&(Ke^Ye))+pn[14]+2792965006&4294967295,un=fn+(mn<<17&4294967295|mn>>>15),mn=Ye+(Ke^un&(fn^Ke))+pn[15]+1236535329&4294967295,Ye=un+(mn<<22&4294967295|mn>>>10),mn=Ke+(un^fn&(Ye^un))+pn[1]+4129170786&4294967295,Ke=Ye+(mn<<5&4294967295|mn>>>27),mn=fn+(Ye^un&(Ke^Ye))+pn[6]+3225465664&4294967295,fn=Ke+(mn<<9&4294967295|mn>>>23),mn=un+(Ke^Ye&(fn^Ke))+pn[11]+643717713&4294967295,un=fn+(mn<<14&4294967295|mn>>>18),mn=Ye+(fn^Ke&(un^fn))+pn[0]+3921069994&4294967295,Ye=un+(mn<<20&4294967295|mn>>>12),mn=Ke+(un^fn&(Ye^un))+pn[5]+3593408605&4294967295,Ke=Ye+(mn<<5&4294967295|mn>>>27),mn=fn+(Ye^un&(Ke^Ye))+pn[10]+38016083&4294967295,fn=Ke+(mn<<9&4294967295|mn>>>23),mn=un+(Ke^Ye&(fn^Ke))+pn[15]+3634488961&4294967295,un=fn+(mn<<14&4294967295|mn>>>18),mn=Ye+(fn^Ke&(un^fn))+pn[4]+3889429448&4294967295,Ye=un+(mn<<20&4294967295|mn>>>12),mn=Ke+(un^fn&(Ye^un))+pn[9]+568446438&4294967295,Ke=Ye+(mn<<5&4294967295|mn>>>27),mn=fn+(Ye^un&(Ke^Ye))+pn[14]+3275163606&4294967295,fn=Ke+(mn<<9&4294967295|mn>>>23),mn=un+(Ke^Ye&(fn^Ke))+pn[3]+4107603335&4294967295,un=fn+(mn<<14&4294967295|mn>>>18),mn=Ye+(fn^Ke&(un^fn))+pn[8]+1163531501&4294967295,Ye=un+(mn<<20&4294967295|mn>>>12),mn=Ke+(un^fn&(Ye^un))+pn[13]+2850285829&4294967295,Ke=Ye+(mn<<5&4294967295|mn>>>27),mn=fn+(Ye^un&(Ke^Ye))+pn[2]+4243563512&4294967295,fn=Ke+(mn<<9&4294967295|mn>>>23),mn=un+(Ke^Ye&(fn^Ke))+pn[7]+1735328473&4294967295,un=fn+(mn<<14&4294967295|mn>>>18),mn=Ye+(fn^Ke&(un^fn))+pn[12]+2368359562&4294967295,Ye=un+(mn<<20&4294967295|mn>>>12),mn=Ke+(Ye^un^fn)+pn[5]+4294588738&4294967295,Ke=Ye+(mn<<4&4294967295|mn>>>28),mn=fn+(Ke^Ye^un)+pn[8]+2272392833&4294967295,fn=Ke+(mn<<11&4294967295|mn>>>21),mn=un+(fn^Ke^Ye)+pn[11]+1839030562&4294967295,un=fn+(mn<<16&4294967295|mn>>>16),mn=Ye+(un^fn^Ke)+pn[14]+4259657740&4294967295,Ye=un+(mn<<23&4294967295|mn>>>9),mn=Ke+(Ye^un^fn)+pn[1]+2763975236&4294967295,Ke=Ye+(mn<<4&4294967295|mn>>>28),mn=fn+(Ke^Ye^un)+pn[4]+1272893353&4294967295,fn=Ke+(mn<<11&4294967295|mn>>>21),mn=un+(fn^Ke^Ye)+pn[7]+4139469664&4294967295,un=fn+(mn<<16&4294967295|mn>>>16),mn=Ye+(un^fn^Ke)+pn[10]+3200236656&4294967295,Ye=un+(mn<<23&4294967295|mn>>>9),mn=Ke+(Ye^un^fn)+pn[13]+681279174&4294967295,Ke=Ye+(mn<<4&4294967295|mn>>>28),mn=fn+(Ke^Ye^un)+pn[0]+3936430074&4294967295,fn=Ke+(mn<<11&4294967295|mn>>>21),mn=un+(fn^Ke^Ye)+pn[3]+3572445317&4294967295,un=fn+(mn<<16&4294967295|mn>>>16),mn=Ye+(un^fn^Ke)+pn[6]+76029189&4294967295,Ye=un+(mn<<23&4294967295|mn>>>9),mn=Ke+(Ye^un^fn)+pn[9]+3654602809&4294967295,Ke=Ye+(mn<<4&4294967295|mn>>>28),mn=fn+(Ke^Ye^un)+pn[12]+3873151461&4294967295,fn=Ke+(mn<<11&4294967295|mn>>>21),mn=un+(fn^Ke^Ye)+pn[15]+530742520&4294967295,un=fn+(mn<<16&4294967295|mn>>>16),mn=Ye+(un^fn^Ke)+pn[2]+3299628645&4294967295,Ye=un+(mn<<23&4294967295|mn>>>9),mn=Ke+(un^(Ye|~fn))+pn[0]+4096336452&4294967295,Ke=Ye+(mn<<6&4294967295|mn>>>26),mn=fn+(Ye^(Ke|~un))+pn[7]+1126891415&4294967295,fn=Ke+(mn<<10&4294967295|mn>>>22),mn=un+(Ke^(fn|~Ye))+pn[14]+2878612391&4294967295,un=fn+(mn<<15&4294967295|mn>>>17),mn=Ye+(fn^(un|~Ke))+pn[5]+4237533241&4294967295,Ye=un+(mn<<21&4294967295|mn>>>11),mn=Ke+(un^(Ye|~fn))+pn[12]+1700485571&4294967295,Ke=Ye+(mn<<6&4294967295|mn>>>26),mn=fn+(Ye^(Ke|~un))+pn[3]+2399980690&4294967295,fn=Ke+(mn<<10&4294967295|mn>>>22),mn=un+(Ke^(fn|~Ye))+pn[10]+4293915773&4294967295,un=fn+(mn<<15&4294967295|mn>>>17),mn=Ye+(fn^(un|~Ke))+pn[1]+2240044497&4294967295,Ye=un+(mn<<21&4294967295|mn>>>11),mn=Ke+(un^(Ye|~fn))+pn[8]+1873313359&4294967295,Ke=Ye+(mn<<6&4294967295|mn>>>26),mn=fn+(Ye^(Ke|~un))+pn[15]+4264355552&4294967295,fn=Ke+(mn<<10&4294967295|mn>>>22),mn=un+(Ke^(fn|~Ye))+pn[6]+2734768916&4294967295,un=fn+(mn<<15&4294967295|mn>>>17),mn=Ye+(fn^(un|~Ke))+pn[13]+1309151649&4294967295,Ye=un+(mn<<21&4294967295|mn>>>11),mn=Ke+(un^(Ye|~fn))+pn[4]+4149444226&4294967295,Ke=Ye+(mn<<6&4294967295|mn>>>26),mn=fn+(Ye^(Ke|~un))+pn[11]+3174756917&4294967295,fn=Ke+(mn<<10&4294967295|mn>>>22),mn=un+(Ke^(fn|~Ye))+pn[2]+718787259&4294967295,un=fn+(mn<<15&4294967295|mn>>>17),mn=Ye+(fn^(un|~Ke))+pn[9]+3951481745&4294967295,Qe.g[0]=Qe.g[0]+Ke&4294967295,Qe.g[1]=Qe.g[1]+(un+(mn<<21&4294967295|mn>>>11))&4294967295,Qe.g[2]=Qe.g[2]+un&4294967295,Qe.g[3]=Qe.g[3]+fn&4294967295}_e.prototype.u=function(Qe,Ke){Ke===void 0&&(Ke=Qe.length);for(var Ye=Ke-this.blockSize,pn=this.B,un=this.h,fn=0;fn<Ke;){if(un==0)for(;fn<=Ye;)Te(this,Qe,fn),fn+=this.blockSize;if(typeof Qe=="string"){for(;fn<Ke;)if(pn[un++]=Qe.charCodeAt(fn++),un==this.blockSize){Te(this,pn),un=0;break}}else for(;fn<Ke;)if(pn[un++]=Qe[fn++],un==this.blockSize){Te(this,pn),un=0;break}}this.h=un,this.o+=Ke},_e.prototype.v=function(){var Qe=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);Qe[0]=128;for(var Ke=1;Ke<Qe.length-8;++Ke)Qe[Ke]=0;var Ye=8*this.o;for(Ke=Qe.length-8;Ke<Qe.length;++Ke)Qe[Ke]=Ye&255,Ye/=256;for(this.u(Qe),Qe=Array(16),Ke=Ye=0;4>Ke;++Ke)for(var pn=0;32>pn;pn+=8)Qe[Ye++]=this.g[Ke]>>>pn&255;return Qe};function Ee(Qe,Ke){var Ye=Pe;return Object.prototype.hasOwnProperty.call(Ye,Qe)?Ye[Qe]:Ye[Qe]=Ke(Qe)}function xe(Qe,Ke){this.h=Ke;for(var Ye=[],pn=!0,un=Qe.length-1;0<=un;un--){var fn=Qe[un]|0;pn&&fn==Ke||(Ye[un]=fn,pn=!1)}this.g=Ye}var Pe={};function Re(Qe){return-128<=Qe&&128>Qe?Ee(Qe,function(Ke){return new xe([Ke|0],0>Ke?-1:0)}):new xe([Qe|0],0>Qe?-1:0)}function ke(Qe){if(isNaN(Qe)||!isFinite(Qe))return Se;if(0>Qe)return Ve(ke(-Qe));for(var Ke=[],Ye=1,pn=0;Qe>=Ye;pn++)Ke[pn]=Qe/Ye|0,Ye*=4294967296;return new xe(Ke,0)}function Ce(Qe,Ke){if(Qe.length==0)throw Error("number format error: empty string");if(Ke=Ke||10,2>Ke||36<Ke)throw Error("radix out of range: "+Ke);if(Qe.charAt(0)=="-")return Ve(Ce(Qe.substring(1),Ke));if(0<=Qe.indexOf("-"))throw Error('number format error: interior "-" character');for(var Ye=ke(Math.pow(Ke,8)),pn=Se,un=0;un<Qe.length;un+=8){var fn=Math.min(8,Qe.length-un),mn=parseInt(Qe.substring(un,un+fn),Ke);8>fn?(fn=ke(Math.pow(Ke,fn)),pn=pn.j(fn).add(ke(mn))):(pn=pn.j(Ye),pn=pn.add(ke(mn)))}return pn}var Se=Re(0),Ae=Re(1),Ie=Re(16777216);r=xe.prototype,r.m=function(){if(Fe(this))return-Ve(this).m();for(var Qe=0,Ke=1,Ye=0;Ye<this.g.length;Ye++){var pn=this.i(Ye);Qe+=(0<=pn?pn:4294967296+pn)*Ke,Ke*=4294967296}return Qe},r.toString=function(Qe){if(Qe=Qe||10,2>Qe||36<Qe)throw Error("radix out of range: "+Qe);if(Me(this))return"0";if(Fe(this))return"-"+Ve(this).toString(Qe);for(var Ke=ke(Math.pow(Qe,6)),Ye=this,pn="";;){var un=He(Ye,Ke).g;Ye=je(Ye,un.j(Ke));var fn=((0<Ye.g.length?Ye.g[0]:Ye.h)>>>0).toString(Qe);if(Ye=un,Me(Ye))return fn+pn;for(;6>fn.length;)fn="0"+fn;pn=fn+pn}},r.i=function(Qe){return 0>Qe?0:Qe<this.g.length?this.g[Qe]:this.h};function Me(Qe){if(Qe.h!=0)return!1;for(var Ke=0;Ke<Qe.g.length;Ke++)if(Qe.g[Ke]!=0)return!1;return!0}function Fe(Qe){return Qe.h==-1}r.l=function(Qe){return Qe=je(this,Qe),Fe(Qe)?-1:Me(Qe)?0:1};function Ve(Qe){for(var Ke=Qe.g.length,Ye=[],pn=0;pn<Ke;pn++)Ye[pn]=~Qe.g[pn];return new xe(Ye,~Qe.h).add(Ae)}r.abs=function(){return Fe(this)?Ve(this):this},r.add=function(Qe){for(var Ke=Math.max(this.g.length,Qe.g.length),Ye=[],pn=0,un=0;un<=Ke;un++){var fn=pn+(this.i(un)&65535)+(Qe.i(un)&65535),mn=(fn>>>16)+(this.i(un)>>>16)+(Qe.i(un)>>>16);pn=mn>>>16,fn&=65535,mn&=65535,Ye[un]=mn<<16|fn}return new xe(Ye,Ye[Ye.length-1]&-2147483648?-1:0)};function je(Qe,Ke){return Qe.add(Ve(Ke))}r.j=function(Qe){if(Me(this)||Me(Qe))return Se;if(Fe(this))return Fe(Qe)?Ve(this).j(Ve(Qe)):Ve(Ve(this).j(Qe));if(Fe(Qe))return Ve(this.j(Ve(Qe)));if(0>this.l(Ie)&&0>Qe.l(Ie))return ke(this.m()*Qe.m());for(var Ke=this.g.length+Qe.g.length,Ye=[],pn=0;pn<2*Ke;pn++)Ye[pn]=0;for(pn=0;pn<this.g.length;pn++)for(var un=0;un<Qe.g.length;un++){var fn=this.i(pn)>>>16,mn=this.i(pn)&65535,wn=Qe.i(un)>>>16,Pn=Qe.i(un)&65535;Ye[2*pn+2*un]+=mn*Pn,Be(Ye,2*pn+2*un),Ye[2*pn+2*un+1]+=fn*Pn,Be(Ye,2*pn+2*un+1),Ye[2*pn+2*un+1]+=mn*wn,Be(Ye,2*pn+2*un+1),Ye[2*pn+2*un+2]+=fn*wn,Be(Ye,2*pn+2*un+2)}for(pn=0;pn<Ke;pn++)Ye[pn]=Ye[2*pn+1]<<16|Ye[2*pn];for(pn=Ke;pn<2*Ke;pn++)Ye[pn]=0;return new xe(Ye,0)};function Be(Qe,Ke){for(;(Qe[Ke]&65535)!=Qe[Ke];)Qe[Ke+1]+=Qe[Ke]>>>16,Qe[Ke]&=65535,Ke++}function qe(Qe,Ke){this.g=Qe,this.h=Ke}function He(Qe,Ke){if(Me(Ke))throw Error("division by zero");if(Me(Qe))return new qe(Se,Se);if(Fe(Qe))return Ke=He(Ve(Qe),Ke),new qe(Ve(Ke.g),Ve(Ke.h));if(Fe(Ke))return Ke=He(Qe,Ve(Ke)),new qe(Ve(Ke.g),Ke.h);if(30<Qe.g.length){if(Fe(Qe)||Fe(Ke))throw Error("slowDivide_ only works with positive integers.");for(var Ye=Ae,pn=Ke;0>=pn.l(Qe);)Ye=Xe(Ye),pn=Xe(pn);var un=Je(Ye,1),fn=Je(pn,1);for(pn=Je(pn,2),Ye=Je(Ye,2);!Me(pn);){var mn=fn.add(pn);0>=mn.l(Qe)&&(un=un.add(Ye),fn=mn),pn=Je(pn,1),Ye=Je(Ye,1)}return Ke=je(Qe,un.j(Ke)),new qe(un,Ke)}for(un=Se;0<=Qe.l(Ke);){for(Ye=Math.max(1,Math.floor(Qe.m()/Ke.m())),pn=Math.ceil(Math.log(Ye)/Math.LN2),pn=48>=pn?1:Math.pow(2,pn-48),fn=ke(Ye),mn=fn.j(Ke);Fe(mn)||0<mn.l(Qe);)Ye-=pn,fn=ke(Ye),mn=fn.j(Ke);Me(fn)&&(fn=Ae),un=un.add(fn),Qe=je(Qe,mn)}return new qe(un,Qe)}r.A=function(Qe){return He(this,Qe).h},r.and=function(Qe){for(var Ke=Math.max(this.g.length,Qe.g.length),Ye=[],pn=0;pn<Ke;pn++)Ye[pn]=this.i(pn)&Qe.i(pn);return new xe(Ye,this.h&Qe.h)},r.or=function(Qe){for(var Ke=Math.max(this.g.length,Qe.g.length),Ye=[],pn=0;pn<Ke;pn++)Ye[pn]=this.i(pn)|Qe.i(pn);return new xe(Ye,this.h|Qe.h)},r.xor=function(Qe){for(var Ke=Math.max(this.g.length,Qe.g.length),Ye=[],pn=0;pn<Ke;pn++)Ye[pn]=this.i(pn)^Qe.i(pn);return new xe(Ye,this.h^Qe.h)};function Xe(Qe){for(var Ke=Qe.g.length+1,Ye=[],pn=0;pn<Ke;pn++)Ye[pn]=Qe.i(pn)<<1|Qe.i(pn-1)>>>31;return new xe(Ye,Qe.h)}function Je(Qe,Ke){var Ye=Ke>>5;Ke%=32;for(var pn=Qe.g.length-Ye,un=[],fn=0;fn<pn;fn++)un[fn]=0<Ke?Qe.i(fn+Ye)>>>Ke|Qe.i(fn+Ye+1)<<32-Ke:Qe.i(fn+Ye);return new xe(un,Qe.h)}_e.prototype.digest=_e.prototype.v,_e.prototype.reset=_e.prototype.s,_e.prototype.update=_e.prototype.u,Md5=_e,xe.prototype.add=xe.prototype.add,xe.prototype.multiply=xe.prototype.j,xe.prototype.modulo=xe.prototype.A,xe.prototype.compare=xe.prototype.l,xe.prototype.toNumber=xe.prototype.m,xe.prototype.toString=xe.prototype.toString,xe.prototype.getBits=xe.prototype.i,xe.fromNumber=ke,xe.fromString=Ce,Integer=xe}).apply(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{});var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XhrIo,WebChannel,EventType,ErrorCode,Stat,Event$1,getStatEventTarget,createWebChannelTransport;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(ze,gn,En){return ze==Array.prototype||ze==Object.prototype||(ze[gn]=En.value),ze};function t(ze){ze=[typeof globalThis=="object"&&globalThis,ze,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var gn=0;gn<ze.length;++gn){var En=ze[gn];if(En&&En.Math==Math)return En}throw Error("Cannot find global object")}var _e=t(this);function Te(ze,gn){if(gn)e:{var En=_e;ze=ze.split(".");for(var Fn=0;Fn<ze.length-1;Fn++){var ur=ze[Fn];if(!(ur in En))break e;En=En[ur]}ze=ze[ze.length-1],Fn=En[ze],gn=gn(Fn),gn!=Fn&&gn!=null&&e(En,ze,{configurable:!0,writable:!0,value:gn})}}function Ee(ze,gn){ze instanceof String&&(ze+="");var En=0,Fn=!1,ur={next:function(){if(!Fn&&En<ze.length){var yr=En++;return{value:gn(yr,ze[yr]),done:!1}}return Fn=!0,{done:!0,value:void 0}}};return ur[Symbol.iterator]=function(){return ur},ur}Te("Array.prototype.values",function(ze){return ze||function(){return Ee(this,function(gn,En){return En})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var xe=xe||{},Pe=this||self;function Re(ze){var gn=typeof ze;return gn=gn!="object"?gn:ze?Array.isArray(ze)?"array":gn:"null",gn=="array"||gn=="object"&&typeof ze.length=="number"}function ke(ze){var gn=typeof ze;return gn=="object"&&ze!=null||gn=="function"}function Ce(ze,gn,En){return ze.call.apply(ze.bind,arguments)}function Se(ze,gn,En){if(!ze)throw Error();if(2<arguments.length){var Fn=Array.prototype.slice.call(arguments,2);return function(){var ur=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ur,Fn),ze.apply(gn,ur)}}return function(){return ze.apply(gn,arguments)}}function Ae(ze,gn,En){return Ae=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ce:Se,Ae.apply(null,arguments)}function Ie(ze,gn){var En=Array.prototype.slice.call(arguments,1);return function(){var Fn=En.slice();return Fn.push.apply(Fn,arguments),ze.apply(this,Fn)}}function Me(ze,gn){function En(){}En.prototype=gn.prototype,ze.aa=gn.prototype,ze.prototype=new En,ze.prototype.constructor=ze,ze.Qb=function(Fn,ur,yr){for(var Br=Array(arguments.length-2),qi=2;qi<arguments.length;qi++)Br[qi-2]=arguments[qi];return gn.prototype[ur].apply(Fn,Br)}}function Fe(ze){const gn=ze.length;if(0<gn){const En=Array(gn);for(let Fn=0;Fn<gn;Fn++)En[Fn]=ze[Fn];return En}return[]}function Ve(ze,gn){for(let En=1;En<arguments.length;En++){const Fn=arguments[En];if(Re(Fn)){const ur=ze.length||0,yr=Fn.length||0;ze.length=ur+yr;for(let Br=0;Br<yr;Br++)ze[ur+Br]=Fn[Br]}else ze.push(Fn)}}class je{constructor(gn,En){this.i=gn,this.j=En,this.h=0,this.g=null}get(){let gn;return 0<this.h?(this.h--,gn=this.g,this.g=gn.next,gn.next=null):gn=this.i(),gn}}function Be(ze){return/^[\s\xa0]*$/.test(ze)}function qe(){var ze=Pe.navigator;return ze&&(ze=ze.userAgent)?ze:""}function He(ze){return He[" "](ze),ze}He[" "]=function(){};var Xe=qe().indexOf("Gecko")!=-1&&!(qe().toLowerCase().indexOf("webkit")!=-1&&qe().indexOf("Edge")==-1)&&!(qe().indexOf("Trident")!=-1||qe().indexOf("MSIE")!=-1)&&qe().indexOf("Edge")==-1;function Je(ze,gn,En){for(const Fn in ze)gn.call(En,ze[Fn],Fn,ze)}function Qe(ze,gn){for(const En in ze)gn.call(void 0,ze[En],En,ze)}function Ke(ze){const gn={};for(const En in ze)gn[En]=ze[En];return gn}const Ye="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pn(ze,gn){let En,Fn;for(let ur=1;ur<arguments.length;ur++){Fn=arguments[ur];for(En in Fn)ze[En]=Fn[En];for(let yr=0;yr<Ye.length;yr++)En=Ye[yr],Object.prototype.hasOwnProperty.call(Fn,En)&&(ze[En]=Fn[En])}}function un(ze){var gn=1;ze=ze.split(":");const En=[];for(;0<gn&&ze.length;)En.push(ze.shift()),gn--;return ze.length&&En.push(ze.join(":")),En}function fn(ze){Pe.setTimeout(()=>{throw ze},0)}function mn(){var ze=$n;let gn=null;return ze.g&&(gn=ze.g,ze.g=ze.g.next,ze.g||(ze.h=null),gn.next=null),gn}class wn{constructor(){this.h=this.g=null}add(gn,En){const Fn=Pn.get();Fn.set(gn,En),this.h?this.h.next=Fn:this.g=Fn,this.h=Fn}}var Pn=new je(()=>new xn,ze=>ze.reset());class xn{constructor(){this.next=this.g=this.h=null}set(gn,En){this.h=gn,this.g=En,this.next=null}reset(){this.next=this.g=this.h=null}}let In,Ln=!1,$n=new wn,Sn=()=>{const ze=Pe.Promise.resolve(void 0);In=()=>{ze.then(Bn)}};var Bn=()=>{for(var ze;ze=mn();){try{ze.h.call(ze.g)}catch(En){fn(En)}var gn=Pn;gn.j(ze),100>gn.h&&(gn.h++,ze.next=gn.g,gn.g=ze)}Ln=!1};function Tn(){this.s=this.s,this.C=this.C}Tn.prototype.s=!1,Tn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Tn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function vn(ze,gn){this.type=ze,this.g=this.target=gn,this.defaultPrevented=!1}vn.prototype.h=function(){this.defaultPrevented=!0};var Un=function(){if(!Pe.addEventListener||!Object.defineProperty)return!1;var ze=!1,gn=Object.defineProperty({},"passive",{get:function(){ze=!0}});try{const En=()=>{};Pe.addEventListener("test",En,gn),Pe.removeEventListener("test",En,gn)}catch{}return ze}();function zn(ze,gn){if(vn.call(this,ze?ze.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,ze){var En=this.type=ze.type,Fn=ze.changedTouches&&ze.changedTouches.length?ze.changedTouches[0]:null;if(this.target=ze.target||ze.srcElement,this.g=gn,gn=ze.relatedTarget){if(Xe){e:{try{He(gn.nodeName);var ur=!0;break e}catch{}ur=!1}ur||(gn=null)}}else En=="mouseover"?gn=ze.fromElement:En=="mouseout"&&(gn=ze.toElement);this.relatedTarget=gn,Fn?(this.clientX=Fn.clientX!==void 0?Fn.clientX:Fn.pageX,this.clientY=Fn.clientY!==void 0?Fn.clientY:Fn.pageY,this.screenX=Fn.screenX||0,this.screenY=Fn.screenY||0):(this.clientX=ze.clientX!==void 0?ze.clientX:ze.pageX,this.clientY=ze.clientY!==void 0?ze.clientY:ze.pageY,this.screenX=ze.screenX||0,this.screenY=ze.screenY||0),this.button=ze.button,this.key=ze.key||"",this.ctrlKey=ze.ctrlKey,this.altKey=ze.altKey,this.shiftKey=ze.shiftKey,this.metaKey=ze.metaKey,this.pointerId=ze.pointerId||0,this.pointerType=typeof ze.pointerType=="string"?ze.pointerType:Hn[ze.pointerType]||"",this.state=ze.state,this.i=ze,ze.defaultPrevented&&zn.aa.h.call(this)}}Me(zn,vn);var Hn={2:"touch",3:"pen",4:"mouse"};zn.prototype.h=function(){zn.aa.h.call(this);var ze=this.i;ze.preventDefault?ze.preventDefault():ze.returnValue=!1};var Jn="closure_listenable_"+(1e6*Math.random()|0),nr=0;function or(ze,gn,En,Fn,ur){this.listener=ze,this.proxy=null,this.src=gn,this.type=En,this.capture=!!Fn,this.ha=ur,this.key=++nr,this.da=this.fa=!1}function Sr(ze){ze.da=!0,ze.listener=null,ze.proxy=null,ze.src=null,ze.ha=null}function kr(ze){this.src=ze,this.g={},this.h=0}kr.prototype.add=function(ze,gn,En,Fn,ur){var yr=ze.toString();ze=this.g[yr],ze||(ze=this.g[yr]=[],this.h++);var Br=Lr(ze,gn,Fn,ur);return-1<Br?(gn=ze[Br],En||(gn.fa=!1)):(gn=new or(gn,this.src,yr,!!Fn,ur),gn.fa=En,ze.push(gn)),gn};function Vr(ze,gn){var En=gn.type;if(En in ze.g){var Fn=ze.g[En],ur=Array.prototype.indexOf.call(Fn,gn,void 0),yr;(yr=0<=ur)&&Array.prototype.splice.call(Fn,ur,1),yr&&(Sr(gn),ze.g[En].length==0&&(delete ze.g[En],ze.h--))}}function Lr(ze,gn,En,Fn){for(var ur=0;ur<ze.length;++ur){var yr=ze[ur];if(!yr.da&&yr.listener==gn&&yr.capture==!!En&&yr.ha==Fn)return ur}return-1}var Qr="closure_lm_"+(1e6*Math.random()|0),wr={};function Yn(ze,gn,En,Fn,ur){if(Array.isArray(gn)){for(var yr=0;yr<gn.length;yr++)Yn(ze,gn[yr],En,Fn,ur);return null}return En=ei(En),ze&&ze[Jn]?ze.K(gn,En,ke(Fn)?!!Fn.capture:!1,ur):gi(ze,gn,En,!1,Fn,ur)}function gi(ze,gn,En,Fn,ur,yr){if(!gn)throw Error("Invalid event type");var Br=ke(ur)?!!ur.capture:!!ur,qi=li(ze);if(qi||(ze[Qr]=qi=new kr(ze)),En=qi.add(gn,En,Fn,Br,yr),En.proxy)return En;if(Fn=ui(),En.proxy=Fn,Fn.src=ze,Fn.listener=En,ze.addEventListener)Un||(ur=Br),ur===void 0&&(ur=!1),ze.addEventListener(gn.toString(),Fn,ur);else if(ze.attachEvent)ze.attachEvent(Kr(gn.toString()),Fn);else if(ze.addListener&&ze.removeListener)ze.addListener(Fn);else throw Error("addEventListener and attachEvent are unavailable.");return En}function ui(){function ze(En){return gn.call(ze.src,ze.listener,En)}const gn=Fr;return ze}function Dr(ze,gn,En,Fn,ur){if(Array.isArray(gn))for(var yr=0;yr<gn.length;yr++)Dr(ze,gn[yr],En,Fn,ur);else Fn=ke(Fn)?!!Fn.capture:!!Fn,En=ei(En),ze&&ze[Jn]?(ze=ze.i,gn=String(gn).toString(),gn in ze.g&&(yr=ze.g[gn],En=Lr(yr,En,Fn,ur),-1<En&&(Sr(yr[En]),Array.prototype.splice.call(yr,En,1),yr.length==0&&(delete ze.g[gn],ze.h--)))):ze&&(ze=li(ze))&&(gn=ze.g[gn.toString()],ze=-1,gn&&(ze=Lr(gn,En,Fn,ur)),(En=-1<ze?gn[ze]:null)&&$r(En))}function $r(ze){if(typeof ze!="number"&&ze&&!ze.da){var gn=ze.src;if(gn&&gn[Jn])Vr(gn.i,ze);else{var En=ze.type,Fn=ze.proxy;gn.removeEventListener?gn.removeEventListener(En,Fn,ze.capture):gn.detachEvent?gn.detachEvent(Kr(En),Fn):gn.addListener&&gn.removeListener&&gn.removeListener(Fn),(En=li(gn))?(Vr(En,ze),En.h==0&&(En.src=null,gn[Qr]=null)):Sr(ze)}}}function Kr(ze){return ze in wr?wr[ze]:wr[ze]="on"+ze}function Fr(ze,gn){if(ze.da)ze=!0;else{gn=new zn(gn,this);var En=ze.listener,Fn=ze.ha||ze.src;ze.fa&&$r(ze),ze=En.call(Fn,gn)}return ze}function li(ze){return ze=ze[Qr],ze instanceof kr?ze:null}var yi="__closure_events_fn_"+(1e9*Math.random()>>>0);function ei(ze){return typeof ze=="function"?ze:(ze[yi]||(ze[yi]=function(gn){return ze.handleEvent(gn)}),ze[yi])}function fr(){Tn.call(this),this.i=new kr(this),this.M=this,this.F=null}Me(fr,Tn),fr.prototype[Jn]=!0,fr.prototype.removeEventListener=function(ze,gn,En,Fn){Dr(this,ze,gn,En,Fn)};function Pr(ze,gn){var En,Fn=ze.F;if(Fn)for(En=[];Fn;Fn=Fn.F)En.push(Fn);if(ze=ze.M,Fn=gn.type||gn,typeof gn=="string")gn=new vn(gn,ze);else if(gn instanceof vn)gn.target=gn.target||ze;else{var ur=gn;gn=new vn(Fn,ze),pn(gn,ur)}if(ur=!0,En)for(var yr=En.length-1;0<=yr;yr--){var Br=gn.g=En[yr];ur=ti(Br,Fn,!0,gn)&&ur}if(Br=gn.g=ze,ur=ti(Br,Fn,!0,gn)&&ur,ur=ti(Br,Fn,!1,gn)&&ur,En)for(yr=0;yr<En.length;yr++)Br=gn.g=En[yr],ur=ti(Br,Fn,!1,gn)&&ur}fr.prototype.N=function(){if(fr.aa.N.call(this),this.i){var ze=this.i,gn;for(gn in ze.g){for(var En=ze.g[gn],Fn=0;Fn<En.length;Fn++)Sr(En[Fn]);delete ze.g[gn],ze.h--}}this.F=null},fr.prototype.K=function(ze,gn,En,Fn){return this.i.add(String(ze),gn,!1,En,Fn)},fr.prototype.L=function(ze,gn,En,Fn){return this.i.add(String(ze),gn,!0,En,Fn)};function ti(ze,gn,En,Fn){if(gn=ze.i.g[String(gn)],!gn)return!0;gn=gn.concat();for(var ur=!0,yr=0;yr<gn.length;++yr){var Br=gn[yr];if(Br&&!Br.da&&Br.capture==En){var qi=Br.listener,Xi=Br.ha||Br.src;Br.fa&&Vr(ze.i,Br),ur=qi.call(Xi,Fn)!==!1&&ur}}return ur&&!Fn.defaultPrevented}function Gr(ze,gn,En){if(typeof ze=="function")En&&(ze=Ae(ze,En));else if(ze&&typeof ze.handleEvent=="function")ze=Ae(ze.handleEvent,ze);else throw Error("Invalid listener argument");return 2147483647<Number(gn)?-1:Pe.setTimeout(ze,gn||0)}function oi(ze){ze.g=Gr(()=>{ze.g=null,ze.i&&(ze.i=!1,oi(ze))},ze.l);const gn=ze.h;ze.h=null,ze.m.apply(null,gn)}class Wr extends Tn{constructor(gn,En){super(),this.m=gn,this.l=En,this.h=null,this.i=!1,this.g=null}j(gn){this.h=arguments,this.g?this.i=!0:oi(this)}N(){super.N(),this.g&&(Pe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ci(ze){Tn.call(this),this.h=ze,this.g={}}Me(Ci,Tn);var xi=[];function fi(ze){Je(ze.g,function(gn,En){this.g.hasOwnProperty(En)&&$r(gn)},ze),ze.g={}}Ci.prototype.N=function(){Ci.aa.N.call(this),fi(this)},Ci.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Di=Pe.JSON.stringify,Ni=Pe.JSON.parse,As=class{stringify(ze){return Pe.JSON.stringify(ze,void 0)}parse(ze){return Pe.JSON.parse(ze,void 0)}};function Ti(){}Ti.prototype.h=null;function Bi(ze){return ze.h||(ze.h=ze.i())}function Qi(){}var vs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ss(){vn.call(this,"d")}Me(Ss,vn);function di(){vn.call(this,"c")}Me(di,vn);var Ur={},ni=null;function ro(){return ni=ni||new fr}Ur.La="serverreachability";function ps(ze){vn.call(this,Ur.La,ze)}Me(ps,vn);function Os(ze){const gn=ro();Pr(gn,new ps(gn))}Ur.STAT_EVENT="statevent";function Hs(ze,gn){vn.call(this,Ur.STAT_EVENT,ze),this.stat=gn}Me(Hs,vn);function ci(ze){const gn=ro();Pr(gn,new Hs(gn,ze))}Ur.Ma="timingevent";function Vs(ze,gn){vn.call(this,Ur.Ma,ze),this.size=gn}Me(Vs,vn);function Ps(ze,gn){if(typeof ze!="function")throw Error("Fn must not be null and must be a function");return Pe.setTimeout(function(){ze()},gn)}function Is(){this.g=!0}Is.prototype.xa=function(){this.g=!1};function ss(ze,gn,En,Fn,ur,yr){ze.info(function(){if(ze.g)if(yr)for(var Br="",qi=yr.split("&"),Xi=0;Xi<qi.length;Xi++){var Gi=qi[Xi].split("=");if(1<Gi.length){var cs=Gi[0];Gi=Gi[1];var gs=cs.split("_");Br=2<=gs.length&&gs[1]=="type"?Br+(cs+"="+Gi+"&"):Br+(cs+"=redacted&")}}else Br=null;else Br=yr;return"XMLHTTP REQ ("+Fn+") [attempt "+ur+"]: "+gn+`
`+En+`
`+Br})}function os(ze,gn,En,Fn,ur,yr,Br){ze.info(function(){return"XMLHTTP RESP ("+Fn+") [ attempt "+ur+"]: "+gn+`
`+En+`
`+yr+" "+Br})}function ms(ze,gn,En,Fn){ze.info(function(){return"XMLHTTP TEXT ("+gn+"): "+co(ze,En)+(Fn?" "+Fn:"")})}function vo(ze,gn){ze.info(function(){return"TIMEOUT: "+gn})}Is.prototype.info=function(){};function co(ze,gn){if(!ze.g)return gn;if(!gn)return null;try{var En=JSON.parse(gn);if(En){for(ze=0;ze<En.length;ze++)if(Array.isArray(En[ze])){var Fn=En[ze];if(!(2>Fn.length)){var ur=Fn[1];if(Array.isArray(ur)&&!(1>ur.length)){var yr=ur[0];if(yr!="noop"&&yr!="stop"&&yr!="close")for(var Br=1;Br<ur.length;Br++)ur[Br]=""}}}}return Di(En)}catch{return gn}}var js={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kn;function er(){}Me(er,Ti),er.prototype.g=function(){return new XMLHttpRequest},er.prototype.i=function(){return{}},Kn=new er;function lr(ze,gn,En,Fn){this.j=ze,this.i=gn,this.l=En,this.R=Fn||1,this.U=new Ci(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gr}function gr(){this.i=null,this.g="",this.h=!1}var xr={},Hr={};function pi(ze,gn,En){ze.L=1,ze.v=Ho(Ks(gn)),ze.m=En,ze.P=!0,ri(ze,null)}function ri(ze,gn){ze.F=Date.now(),Li(ze),ze.A=Ks(ze.v);var En=ze.A,Fn=ze.R;Array.isArray(Fn)||(Fn=[String(Fn)]),Ei(En.i,"t",Fn),ze.C=0,En=ze.j.J,ze.h=new gr,ze.g=kn(ze.j,En?gn:null,!ze.m),0<ze.O&&(ze.M=new Wr(Ae(ze.Y,ze,ze.g),ze.O)),gn=ze.U,En=ze.g,Fn=ze.ca;var ur="readystatechange";Array.isArray(ur)||(ur&&(xi[0]=ur.toString()),ur=xi);for(var yr=0;yr<ur.length;yr++){var Br=Yn(En,ur[yr],Fn||gn.handleEvent,!1,gn.h||gn);if(!Br)break;gn.g[Br.key]=Br}gn=ze.H?Ke(ze.H):{},ze.m?(ze.u||(ze.u="POST"),gn["Content-Type"]="application/x-www-form-urlencoded",ze.g.ea(ze.A,ze.u,ze.m,gn)):(ze.u="GET",ze.g.ea(ze.A,ze.u,null,gn)),Os(),ss(ze.i,ze.u,ze.A,ze.l,ze.R,ze.m)}lr.prototype.ca=function(ze){ze=ze.target;const gn=this.M;gn&&ji(ze)==3?gn.j():this.Y(ze)},lr.prototype.Y=function(ze){try{if(ze==this.g)e:{const gs=ji(this.g);var gn=this.g.Ba();const Fo=this.g.Z();if(!(3>gs)&&(gs!=3||this.g&&(this.h.h||this.g.oa()||po(this.g)))){this.J||gs!=4||gn==7||(gn==8||0>=Fo?Os(3):Os(2)),Er(this);var En=this.g.Z();this.X=En;t:if(Ii(this)){var Fn=po(this.g);ze="";var ur=Fn.length,yr=ji(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wi(this),Oi(this);var Br="";break t}this.h.i=new Pe.TextDecoder}for(gn=0;gn<ur;gn++)this.h.h=!0,ze+=this.h.i.decode(Fn[gn],{stream:!(yr&&gn==ur-1)});Fn.length=0,this.h.g+=ze,this.C=0,Br=this.h.g}else Br=this.g.oa();if(this.o=En==200,os(this.i,this.u,this.A,this.l,this.R,gs,En),this.o){if(this.T&&!this.K){t:{if(this.g){var qi,Xi=this.g;if((qi=Xi.g?Xi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Be(qi)){var Gi=qi;break t}}Gi=null}if(En=Gi)ms(this.i,this.l,En,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$s(this,En);else{this.o=!1,this.s=3,ci(12),Wi(this),Oi(this);break e}}if(this.P){En=!0;let mo;for(;!this.J&&this.C<Br.length;)if(mo=Yi(this,Br),mo==Hr){gs==4&&(this.s=4,ci(14),En=!1),ms(this.i,this.l,null,"[Incomplete Response]");break}else if(mo==xr){this.s=4,ci(15),ms(this.i,this.l,Br,"[Invalid Chunk]"),En=!1;break}else ms(this.i,this.l,mo,null),$s(this,mo);if(Ii(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gs!=4||Br.length!=0||this.h.h||(this.s=1,ci(16),En=!1),this.o=this.o&&En,!En)ms(this.i,this.l,Br,"[Invalid Chunked Response]"),Wi(this),Oi(this);else if(0<Br.length&&!this.W){this.W=!0;var cs=this.j;cs.g==this&&cs.ba&&!cs.M&&(cs.j.info("Great, no buffering proxy detected. Bytes received: "+Br.length),Rl(cs),cs.M=!0,ci(11))}}else ms(this.i,this.l,Br,null),$s(this,Br);gs==4&&Wi(this),this.o&&!this.J&&(gs==4?Ea(this.j,this):(this.o=!1,Li(this)))}else Qs(this.g),En==400&&0<Br.indexOf("Unknown SID")?(this.s=3,ci(12)):(this.s=0,ci(13)),Wi(this),Oi(this)}}}catch{}finally{}};function Ii(ze){return ze.g?ze.u=="GET"&&ze.L!=2&&ze.j.Ca:!1}function Yi(ze,gn){var En=ze.C,Fn=gn.indexOf(`
`,En);return Fn==-1?Hr:(En=Number(gn.substring(En,Fn)),isNaN(En)?xr:(Fn+=1,Fn+En>gn.length?Hr:(gn=gn.slice(Fn,Fn+En),ze.C=Fn+En,gn)))}lr.prototype.cancel=function(){this.J=!0,Wi(this)};function Li(ze){ze.S=Date.now()+ze.I,Rs(ze,ze.I)}function Rs(ze,gn){if(ze.B!=null)throw Error("WatchDog timer not null");ze.B=Ps(Ae(ze.ba,ze),gn)}function Er(ze){ze.B&&(Pe.clearTimeout(ze.B),ze.B=null)}lr.prototype.ba=function(){this.B=null;const ze=Date.now();0<=ze-this.S?(vo(this.i,this.A),this.L!=2&&(Os(),ci(17)),Wi(this),this.s=2,Oi(this)):Rs(this,this.S-ze)};function Oi(ze){ze.j.G==0||ze.J||Ea(ze.j,ze)}function Wi(ze){Er(ze);var gn=ze.M;gn&&typeof gn.ma=="function"&&gn.ma(),ze.M=null,fi(ze.U),ze.g&&(gn=ze.g,ze.g=null,gn.abort(),gn.ma())}function $s(ze,gn){try{var En=ze.j;if(En.G!=0&&(En.g==ze||ts(En.h,ze))){if(!ze.K&&ts(En.h,ze)&&En.G==3){try{var Fn=En.Da.g.parse(gn)}catch{Fn=null}if(Array.isArray(Fn)&&Fn.length==3){var ur=Fn;if(ur[0]==0){e:if(!En.u){if(En.g)if(En.g.F+3e3<ze.F)Va(En),sa(En);else break e;Xa(En),ci(18)}}else En.za=ur[1],0<En.za-En.T&&37500>ur[2]&&En.F&&En.v==0&&!En.C&&(En.C=Ps(Ae(En.Za,En),6e3));if(1>=ma(En.h)&&En.ca){try{En.ca()}catch{}En.ca=void 0}}else Ao(En,11)}else if((ze.K||En.g==ze)&&Va(En),!Be(gn))for(ur=En.Da.g.parse(gn),gn=0;gn<ur.length;gn++){let Gi=ur[gn];if(En.T=Gi[0],Gi=Gi[1],En.G==2)if(Gi[0]=="c"){En.K=Gi[1],En.ia=Gi[2];const cs=Gi[3];cs!=null&&(En.la=cs,En.j.info("VER="+En.la));const gs=Gi[4];gs!=null&&(En.Aa=gs,En.j.info("SVER="+En.Aa));const Fo=Gi[5];Fo!=null&&typeof Fo=="number"&&0<Fo&&(Fn=1.5*Fo,En.L=Fn,En.j.info("backChannelRequestTimeoutMs_="+Fn)),Fn=En;const mo=ze.g;if(mo){const ja=mo.g?mo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ja){var yr=Fn.h;yr.g||ja.indexOf("spdy")==-1&&ja.indexOf("quic")==-1&&ja.indexOf("h2")==-1||(yr.j=yr.l,yr.g=new Set,yr.h&&(us(yr,yr.h),yr.h=null))}if(Fn.D){const $a=mo.g?mo.g.getResponseHeader("X-HTTP-Session-Id"):null;$a&&(Fn.ya=$a,ns(Fn.I,Fn.D,$a))}}En.G=3,En.l&&En.l.ua(),En.ba&&(En.R=Date.now()-ze.F,En.j.info("Handshake RTT: "+En.R+"ms")),Fn=En;var Br=ze;if(Fn.qa=Ze(Fn,Fn.J?Fn.ia:null,Fn.W),Br.K){Wa(Fn.h,Br);var qi=Br,Xi=Fn.L;Xi&&(qi.I=Xi),qi.B&&(Er(qi),Li(qi)),Fn.g=Br}else Fa(Fn);0<En.i.length&&wa(En)}else Gi[0]!="stop"&&Gi[0]!="close"||Ao(En,7);else En.G==3&&(Gi[0]=="stop"||Gi[0]=="close"?Gi[0]=="stop"?Ao(En,7):Ns(En):Gi[0]!="noop"&&En.l&&En.l.ta(Gi),En.v=0)}}Os(4)}catch{}}var wo=class{constructor(ze,gn){this.g=ze,this.map=gn}};function Wo(ze){this.l=ze||10,Pe.PerformanceNavigationTiming?(ze=Pe.performance.getEntriesByType("navigation"),ze=0<ze.length&&(ze[0].nextHopProtocol=="hq"||ze[0].nextHopProtocol=="h2")):ze=!!(Pe.chrome&&Pe.chrome.loadTimes&&Pe.chrome.loadTimes()&&Pe.chrome.loadTimes().wasFetchedViaSpdy),this.j=ze?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function io(ze){return ze.h?!0:ze.g?ze.g.size>=ze.j:!1}function ma(ze){return ze.h?1:ze.g?ze.g.size:0}function ts(ze,gn){return ze.h?ze.h==gn:ze.g?ze.g.has(gn):!1}function us(ze,gn){ze.g?ze.g.add(gn):ze.h=gn}function Wa(ze,gn){ze.h&&ze.h==gn?ze.h=null:ze.g&&ze.g.has(gn)&&ze.g.delete(gn)}Wo.prototype.cancel=function(){if(this.i=Ha(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const ze of this.g.values())ze.cancel();this.g.clear()}};function Ha(ze){if(ze.h!=null)return ze.i.concat(ze.h.D);if(ze.g!=null&&ze.g.size!==0){let gn=ze.i;for(const En of ze.g.values())gn=gn.concat(En.D);return gn}return Fe(ze.i)}function ga(ze){if(ze.V&&typeof ze.V=="function")return ze.V();if(typeof Map<"u"&&ze instanceof Map||typeof Set<"u"&&ze instanceof Set)return Array.from(ze.values());if(typeof ze=="string")return ze.split("");if(Re(ze)){for(var gn=[],En=ze.length,Fn=0;Fn<En;Fn++)gn.push(ze[Fn]);return gn}gn=[],En=0;for(Fn in ze)gn[En++]=ze[Fn];return gn}function ya(ze){if(ze.na&&typeof ze.na=="function")return ze.na();if(!ze.V||typeof ze.V!="function"){if(typeof Map<"u"&&ze instanceof Map)return Array.from(ze.keys());if(!(typeof Set<"u"&&ze instanceof Set)){if(Re(ze)||typeof ze=="string"){var gn=[];ze=ze.length;for(var En=0;En<ze;En++)gn.push(En);return gn}gn=[],En=0;for(const Fn in ze)gn[En++]=Fn;return gn}}}function ba(ze,gn){if(ze.forEach&&typeof ze.forEach=="function")ze.forEach(gn,void 0);else if(Re(ze)||typeof ze=="string")Array.prototype.forEach.call(ze,gn,void 0);else for(var En=ya(ze),Fn=ga(ze),ur=Fn.length,yr=0;yr<ur;yr++)gn.call(void 0,Fn[yr],En&&En[yr],ze)}var Bs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function va(ze,gn){if(ze){ze=ze.split("&");for(var En=0;En<ze.length;En++){var Fn=ze[En].indexOf("="),ur=null;if(0<=Fn){var yr=ze[En].substring(0,Fn);ur=ze[En].substring(Fn+1)}else yr=ze[En];gn(yr,ur?decodeURIComponent(ur.replace(/\+/g," ")):"")}}}function ks(ze){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,ze instanceof ks){this.h=ze.h,na(this,ze.j),this.o=ze.o,this.g=ze.g,ra(this,ze.s),this.l=ze.l;var gn=ze.i,En=new Eo;En.i=gn.i,gn.g&&(En.g=new Map(gn.g),En.h=gn.h),To(this,En),this.m=ze.m}else ze&&(gn=String(ze).match(Bs))?(this.h=!1,na(this,gn[1]||"",!0),this.o=Hi(gn[2]||""),this.g=Hi(gn[3]||"",!0),ra(this,gn[4]),this.l=Hi(gn[5]||"",!0),To(this,gn[6]||"",!0),this.m=Hi(gn[7]||"")):(this.h=!1,this.i=new Eo(null,this.h))}ks.prototype.toString=function(){var ze=[],gn=this.j;gn&&ze.push(Mo(gn,Ma,!0),":");var En=this.g;return(En||gn=="file")&&(ze.push("//"),(gn=this.o)&&ze.push(Mo(gn,Ma,!0),"@"),ze.push(encodeURIComponent(String(En)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),En=this.s,En!=null&&ze.push(":",String(En))),(En=this.l)&&(this.g&&En.charAt(0)!="/"&&ze.push("/"),ze.push(Mo(En,En.charAt(0)=="/"?Si:Fi,!0))),(En=this.i.toString())&&ze.push("?",En),(En=this.m)&&ze.push("#",Mo(En,No)),ze.join("")};function Ks(ze){return new ks(ze)}function na(ze,gn,En){ze.j=En?Hi(gn,!0):gn,ze.j&&(ze.j=ze.j.replace(/:$/,""))}function ra(ze,gn){if(gn){if(gn=Number(gn),isNaN(gn)||0>gn)throw Error("Bad port number "+gn);ze.s=gn}else ze.s=null}function To(ze,gn,En){gn instanceof Eo?(ze.i=gn,Lo(ze.i,ze.h)):(En||(gn=Mo(gn,ia)),ze.i=new Eo(gn,ze.h))}function ns(ze,gn,En){ze.i.set(gn,En)}function Ho(ze){return ns(ze,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),ze}function Hi(ze,gn){return ze?gn?decodeURI(ze.replace(/%25/g,"%2525")):decodeURIComponent(ze):""}function Mo(ze,gn,En){return typeof ze=="string"?(ze=encodeURI(ze).replace(gn,Ui),En&&(ze=ze.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ze):null}function Ui(ze){return ze=ze.charCodeAt(0),"%"+(ze>>4&15).toString(16)+(ze&15).toString(16)}var Ma=/[#\/\?@]/g,Fi=/[#\?:]/g,Si=/[#\?]/g,ia=/[#\?@]/g,No=/#/g;function Eo(ze,gn){this.h=this.g=null,this.i=ze||null,this.j=!!gn}function Ji(ze){ze.g||(ze.g=new Map,ze.h=0,ze.i&&va(ze.i,function(gn,En){ze.add(decodeURIComponent(gn.replace(/\+/g," ")),En)}))}r=Eo.prototype,r.add=function(ze,gn){Ji(this),this.i=null,ze=fo(this,ze);var En=this.g.get(ze);return En||this.g.set(ze,En=[]),En.push(gn),this.h+=1,this};function xo(ze,gn){Ji(ze),gn=fo(ze,gn),ze.g.has(gn)&&(ze.i=null,ze.h-=ze.g.get(gn).length,ze.g.delete(gn))}function ho(ze,gn){return Ji(ze),gn=fo(ze,gn),ze.g.has(gn)}r.forEach=function(ze,gn){Ji(this),this.g.forEach(function(En,Fn){En.forEach(function(ur){ze.call(gn,ur,Fn,this)},this)},this)},r.na=function(){Ji(this);const ze=Array.from(this.g.values()),gn=Array.from(this.g.keys()),En=[];for(let Fn=0;Fn<gn.length;Fn++){const ur=ze[Fn];for(let yr=0;yr<ur.length;yr++)En.push(gn[Fn])}return En},r.V=function(ze){Ji(this);let gn=[];if(typeof ze=="string")ho(this,ze)&&(gn=gn.concat(this.g.get(fo(this,ze))));else{ze=Array.from(this.g.values());for(let En=0;En<ze.length;En++)gn=gn.concat(ze[En])}return gn},r.set=function(ze,gn){return Ji(this),this.i=null,ze=fo(this,ze),ho(this,ze)&&(this.h-=this.g.get(ze).length),this.g.set(ze,[gn]),this.h+=1,this},r.get=function(ze,gn){return ze?(ze=this.V(ze),0<ze.length?String(ze[0]):gn):gn};function Ei(ze,gn,En){xo(ze,gn),0<En.length&&(ze.i=null,ze.g.set(fo(ze,gn),Fe(En)),ze.h+=En.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const ze=[],gn=Array.from(this.g.keys());for(var En=0;En<gn.length;En++){var Fn=gn[En];const yr=encodeURIComponent(String(Fn)),Br=this.V(Fn);for(Fn=0;Fn<Br.length;Fn++){var ur=yr;Br[Fn]!==""&&(ur+="="+encodeURIComponent(String(Br[Fn]))),ze.push(ur)}}return this.i=ze.join("&")};function fo(ze,gn){return gn=String(gn),ze.j&&(gn=gn.toLowerCase()),gn}function Lo(ze,gn){gn&&!ze.j&&(Ji(ze),ze.i=null,ze.g.forEach(function(En,Fn){var ur=Fn.toLowerCase();Fn!=ur&&(xo(this,Fn),Ei(this,ur,En))},ze)),ze.j=gn}function Do(ze,gn){const En=new Is;if(Pe.Image){const Fn=new Image;Fn.onload=Ie(Ys,En,"TestLoadImage: loaded",!0,gn,Fn),Fn.onerror=Ie(Ys,En,"TestLoadImage: error",!1,gn,Fn),Fn.onabort=Ie(Ys,En,"TestLoadImage: abort",!1,gn,Fn),Fn.ontimeout=Ie(Ys,En,"TestLoadImage: timeout",!1,gn,Fn),Pe.setTimeout(function(){Fn.ontimeout&&Fn.ontimeout()},1e4),Fn.src=ze}else gn(!1)}function Ka(ze,gn){const En=new Is,Fn=new AbortController,ur=setTimeout(()=>{Fn.abort(),Ys(En,"TestPingServer: timeout",!1,gn)},1e4);fetch(ze,{signal:Fn.signal}).then(yr=>{clearTimeout(ur),yr.ok?Ys(En,"TestPingServer: ok",!0,gn):Ys(En,"TestPingServer: server error",!1,gn)}).catch(()=>{clearTimeout(ur),Ys(En,"TestPingServer: error",!1,gn)})}function Ys(ze,gn,En,Fn,ur){try{ur&&(ur.onload=null,ur.onerror=null,ur.onabort=null,ur.ontimeout=null),Fn(En)}catch{}}function Na(){this.g=new As}function La(ze,gn,En){const Fn=En||"";try{ba(ze,function(ur,yr){let Br=ur;ke(ur)&&(Br=Di(ur)),gn.push(Fn+yr+"="+encodeURIComponent(Br))})}catch(ur){throw gn.push(Fn+"type="+encodeURIComponent("_badmap")),ur}}function An(ze){this.l=ze.Ub||null,this.j=ze.eb||!1}Me(An,Ti),An.prototype.g=function(){return new Nn(this.l,this.j)},An.prototype.i=function(ze){return function(){return ze}}({});function Nn(ze,gn){fr.call(this),this.D=ze,this.o=gn,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Me(Nn,fr),r=Nn.prototype,r.open=function(ze,gn){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=ze,this.A=gn,this.readyState=1,hr(this)},r.send=function(ze){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const gn={headers:this.u,method:this.B,credentials:this.m,cache:void 0};ze&&(gn.body=ze),(this.D||Pe).fetch(new Request(this.A,gn)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qn(this)),this.readyState=0},r.Sa=function(ze){if(this.g&&(this.l=ze,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=ze.headers,this.readyState=2,hr(this)),this.g&&(this.readyState=3,hr(this),this.g)))if(this.responseType==="arraybuffer")ze.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof Pe.ReadableStream<"u"&&"body"in ze){if(this.j=ze.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gn(this)}else ze.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gn(ze){ze.j.read().then(ze.Pa.bind(ze)).catch(ze.ga.bind(ze))}r.Pa=function(ze){if(this.g){if(this.o&&ze.value)this.response.push(ze.value);else if(!this.o){var gn=ze.value?ze.value:new Uint8Array(0);(gn=this.v.decode(gn,{stream:!ze.done}))&&(this.response=this.responseText+=gn)}ze.done?Qn(this):hr(this),this.readyState==3&&Gn(this)}},r.Ra=function(ze){this.g&&(this.response=this.responseText=ze,Qn(this))},r.Qa=function(ze){this.g&&(this.response=ze,Qn(this))},r.ga=function(){this.g&&Qn(this)};function Qn(ze){ze.readyState=4,ze.l=null,ze.j=null,ze.v=null,hr(ze)}r.setRequestHeader=function(ze,gn){this.u.append(ze,gn)},r.getResponseHeader=function(ze){return this.h&&this.h.get(ze.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const ze=[],gn=this.h.entries();for(var En=gn.next();!En.done;)En=En.value,ze.push(En[0]+": "+En[1]),En=gn.next();return ze.join(`\r
`)};function hr(ze){ze.onreadystatechange&&ze.onreadystatechange.call(ze)}Object.defineProperty(Nn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(ze){this.m=ze?"include":"same-origin"}});function vr(ze){let gn="";return Je(ze,function(En,Fn){gn+=Fn,gn+=":",gn+=En,gn+=`\r
`}),gn}function Yr(ze,gn,En){e:{for(Fn in En){var Fn=!1;break e}Fn=!0}Fn||(En=vr(En),typeof ze=="string"?En!=null&&encodeURIComponent(String(En)):ns(ze,gn,En))}function Jr(ze){fr.call(this),this.headers=new Map,this.o=ze||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Me(Jr,fr);var Vi=/^https?$/i,Mi=["POST","PUT"];r=Jr.prototype,r.Ha=function(ze){this.J=ze},r.ea=function(ze,gn,En,Fn){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+ze);gn=gn?gn.toUpperCase():"GET",this.D=ze,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kn.g(),this.v=this.o?Bi(this.o):Bi(Kn),this.g.onreadystatechange=Ae(this.Ea,this);try{this.B=!0,this.g.open(gn,String(ze),!0),this.B=!1}catch(yr){es(this,yr);return}if(ze=En||"",En=new Map(this.headers),Fn)if(Object.getPrototypeOf(Fn)===Object.prototype)for(var ur in Fn)En.set(ur,Fn[ur]);else if(typeof Fn.keys=="function"&&typeof Fn.get=="function")for(const yr of Fn.keys())En.set(yr,Fn.get(yr));else throw Error("Unknown input type for opt_headers: "+String(Fn));Fn=Array.from(En.keys()).find(yr=>yr.toLowerCase()=="content-type"),ur=Pe.FormData&&ze instanceof Pe.FormData,!(0<=Array.prototype.indexOf.call(Mi,gn,void 0))||Fn||ur||En.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[yr,Br]of En)this.g.setRequestHeader(yr,Br);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Pi(this),this.u=!0,this.g.send(ze),this.u=!1}catch(yr){es(this,yr)}};function es(ze,gn){ze.h=!1,ze.g&&(ze.j=!0,ze.g.abort(),ze.j=!1),ze.l=gn,ze.m=5,Xs(ze),Tr(ze)}function Xs(ze){ze.A||(ze.A=!0,Pr(ze,"complete"),Pr(ze,"error"))}r.abort=function(ze){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=ze||7,Pr(this,"complete"),Pr(this,"abort"),Tr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tr(this,!0)),Jr.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?qs(this):this.bb())},r.bb=function(){qs(this)};function qs(ze){if(ze.h&&typeof xe<"u"&&(!ze.v[1]||ji(ze)!=4||ze.Z()!=2)){if(ze.u&&ji(ze)==4)Gr(ze.Ea,0,ze);else if(Pr(ze,"readystatechange"),ji(ze)==4){ze.h=!1;try{const Br=ze.Z();e:switch(Br){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var gn=!0;break e;default:gn=!1}var En;if(!(En=gn)){var Fn;if(Fn=Br===0){var ur=String(ze.D).match(Bs)[1]||null;!ur&&Pe.self&&Pe.self.location&&(ur=Pe.self.location.protocol.slice(0,-1)),Fn=!Vi.test(ur?ur.toLowerCase():"")}En=Fn}if(En)Pr(ze,"complete"),Pr(ze,"success");else{ze.m=6;try{var yr=2<ji(ze)?ze.g.statusText:""}catch{yr=""}ze.l=yr+" ["+ze.Z()+"]",Xs(ze)}}finally{Tr(ze)}}}}function Tr(ze,gn){if(ze.g){Pi(ze);const En=ze.g,Fn=ze.v[0]?()=>{}:null;ze.g=null,ze.v=null,gn||Pr(ze,"ready");try{En.onreadystatechange=Fn}catch{}}}function Pi(ze){ze.I&&(Pe.clearTimeout(ze.I),ze.I=null)}r.isActive=function(){return!!this.g};function ji(ze){return ze.g?ze.g.readyState:0}r.Z=function(){try{return 2<ji(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(ze){if(this.g){var gn=this.g.responseText;return ze&&gn.indexOf(ze)==0&&(gn=gn.substring(ze.length)),Ni(gn)}};function po(ze){try{if(!ze.g)return null;if("response"in ze.g)return ze.g.response;switch(ze.H){case"":case"text":return ze.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in ze.g)return ze.g.mozResponseArrayBuffer}return null}catch{return null}}function Qs(ze){const gn={};ze=(ze.g&&2<=ji(ze)&&ze.g.getAllResponseHeaders()||"").split(`\r
`);for(let Fn=0;Fn<ze.length;Fn++){if(Be(ze[Fn]))continue;var En=un(ze[Fn]);const ur=En[0];if(En=En[1],typeof En!="string")continue;En=En.trim();const yr=gn[ur]||[];gn[ur]=yr,yr.push(En)}Qe(gn,function(Fn){return Fn.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Js(ze,gn,En){return En&&En.internalChannelParams&&En.internalChannelParams[ze]||gn}function ll(ze){this.Aa=0,this.i=[],this.j=new Is,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Js("failFast",!1,ze),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Js("baseRetryDelayMs",5e3,ze),this.cb=Js("retryDelaySeedMs",1e4,ze),this.Wa=Js("forwardChannelMaxRetries",2,ze),this.wa=Js("forwardChannelRequestTimeoutMs",2e4,ze),this.pa=ze&&ze.xmlHttpFactory||void 0,this.Xa=ze&&ze.Tb||void 0,this.Ca=ze&&ze.useFetchStreams||!1,this.L=void 0,this.J=ze&&ze.supportsCrossDomainXhr||!1,this.K="",this.h=new Wo(ze&&ze.concurrentRequestLimit),this.Da=new Na,this.P=ze&&ze.fastHandshake||!1,this.O=ze&&ze.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=ze&&ze.Rb||!1,ze&&ze.xa&&this.j.xa(),ze&&ze.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&ze&&ze.detectBufferingProxy||!1,this.ja=void 0,ze&&ze.longPollingTimeout&&0<ze.longPollingTimeout&&(this.ja=ze.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ll.prototype,r.la=8,r.G=1,r.connect=function(ze,gn,En,Fn){ci(0),this.W=ze,this.H=gn||{},En&&Fn!==void 0&&(this.H.OSID=En,this.H.OAID=Fn),this.F=this.X,this.I=Ze(this,null,this.W),wa(this)};function Ns(ze){if(Da(ze),ze.G==3){var gn=ze.U++,En=Ks(ze.I);if(ns(En,"SID",ze.K),ns(En,"RID",gn),ns(En,"TYPE","terminate"),Ta(ze,En),gn=new lr(ze,ze.j,gn),gn.L=2,gn.v=Ho(Ks(En)),En=!1,Pe.navigator&&Pe.navigator.sendBeacon)try{En=Pe.navigator.sendBeacon(gn.v.toString(),"")}catch{}!En&&Pe.Image&&(new Image().src=gn.v,En=!0),En||(gn.g=kn(gn.j,null),gn.g.ea(gn.v)),gn.F=Date.now(),Li(gn)}Cl(ze)}function sa(ze){ze.g&&(Rl(ze),ze.g.cancel(),ze.g=null)}function Da(ze){sa(ze),ze.u&&(Pe.clearTimeout(ze.u),ze.u=null),Va(ze),ze.h.cancel(),ze.s&&(typeof ze.s=="number"&&Pe.clearTimeout(ze.s),ze.s=null)}function wa(ze){if(!io(ze.h)&&!ze.s){ze.s=!0;var gn=ze.Ga;In||Sn(),Ln||(In(),Ln=!0),$n.add(gn,ze),ze.B=0}}function Ul(ze,gn){return ma(ze.h)>=ze.h.j-(ze.s?1:0)?!1:ze.s?(ze.i=gn.D.concat(ze.i),!0):ze.G==1||ze.G==2||ze.B>=(ze.Va?0:ze.Wa)?!1:(ze.s=Ps(Ae(ze.Ga,ze,gn),kl(ze,ze.B)),ze.B++,!0)}r.Ga=function(ze){if(this.s)if(this.s=null,this.G==1){if(!ze){this.U=Math.floor(1e5*Math.random()),ze=this.U++;const ur=new lr(this,this.j,ze);let yr=this.o;if(this.S&&(yr?(yr=Ke(yr),pn(yr,this.S)):yr=this.S),this.m!==null||this.O||(ur.H=yr,yr=null),this.P)e:{for(var gn=0,En=0;En<this.i.length;En++){t:{var Fn=this.i[En];if("__data__"in Fn.map&&(Fn=Fn.map.__data__,typeof Fn=="string")){Fn=Fn.length;break t}Fn=void 0}if(Fn===void 0)break;if(gn+=Fn,4096<gn){gn=En;break e}if(gn===4096||En===this.i.length-1){gn=En+1;break e}}gn=1e3}else gn=1e3;gn=oa(this,ur,gn),En=Ks(this.I),ns(En,"RID",ze),ns(En,"CVER",22),this.D&&ns(En,"X-HTTP-Session-Id",this.D),Ta(this,En),yr&&(this.O?gn="headers="+encodeURIComponent(String(vr(yr)))+"&"+gn:this.m&&Yr(En,this.m,yr)),us(this.h,ur),this.Ua&&ns(En,"TYPE","init"),this.P?(ns(En,"$req",gn),ns(En,"SID","null"),ur.T=!0,pi(ur,En,null)):pi(ur,En,gn),this.G=2}}else this.G==3&&(ze?Ya(this,ze):this.i.length==0||io(this.h)||Ya(this))};function Ya(ze,gn){var En;gn?En=gn.l:En=ze.U++;const Fn=Ks(ze.I);ns(Fn,"SID",ze.K),ns(Fn,"RID",En),ns(Fn,"AID",ze.T),Ta(ze,Fn),ze.m&&ze.o&&Yr(Fn,ze.m,ze.o),En=new lr(ze,ze.j,En,ze.B+1),ze.m===null&&(En.H=ze.o),gn&&(ze.i=gn.D.concat(ze.i)),gn=oa(ze,En,1e3),En.I=Math.round(.5*ze.wa)+Math.round(.5*ze.wa*Math.random()),us(ze.h,En),pi(En,Fn,gn)}function Ta(ze,gn){ze.H&&Je(ze.H,function(En,Fn){ns(gn,Fn,En)}),ze.l&&ba({},function(En,Fn){ns(gn,Fn,En)})}function oa(ze,gn,En){En=Math.min(ze.i.length,En);var Fn=ze.l?Ae(ze.l.Na,ze.l,ze):null;e:{var ur=ze.i;let yr=-1;for(;;){const Br=["count="+En];yr==-1?0<En?(yr=ur[0].g,Br.push("ofs="+yr)):yr=0:Br.push("ofs="+yr);let qi=!0;for(let Xi=0;Xi<En;Xi++){let Gi=ur[Xi].g;const cs=ur[Xi].map;if(Gi-=yr,0>Gi)yr=Math.max(0,ur[Xi].g-100),qi=!1;else try{La(cs,Br,"req"+Gi+"_")}catch{Fn&&Fn(cs)}}if(qi){Fn=Br.join("&");break e}}}return ze=ze.i.splice(0,En),gn.D=ze,Fn}function Fa(ze){if(!ze.g&&!ze.u){ze.Y=1;var gn=ze.Fa;In||Sn(),Ln||(In(),Ln=!0),$n.add(gn,ze),ze.v=0}}function Xa(ze){return ze.g||ze.u||3<=ze.v?!1:(ze.Y++,ze.u=Ps(Ae(ze.Fa,ze),kl(ze,ze.v)),ze.v++,!0)}r.Fa=function(){if(this.u=null,au(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var ze=2*this.R;this.j.info("BP detection timer enabled: "+ze),this.A=Ps(Ae(this.ab,this),ze)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ci(10),sa(this),au(this))};function Rl(ze){ze.A!=null&&(Pe.clearTimeout(ze.A),ze.A=null)}function au(ze){ze.g=new lr(ze,ze.j,"rpc",ze.Y),ze.m===null&&(ze.g.H=ze.o),ze.g.O=0;var gn=Ks(ze.qa);ns(gn,"RID","rpc"),ns(gn,"SID",ze.K),ns(gn,"AID",ze.T),ns(gn,"CI",ze.F?"0":"1"),!ze.F&&ze.ja&&ns(gn,"TO",ze.ja),ns(gn,"TYPE","xmlhttp"),Ta(ze,gn),ze.m&&ze.o&&Yr(gn,ze.m,ze.o),ze.L&&(ze.g.I=ze.L);var En=ze.g;ze=ze.ia,En.L=1,En.v=Ho(Ks(gn)),En.m=null,En.P=!0,ri(En,ze)}r.Za=function(){this.C!=null&&(this.C=null,sa(this),Xa(this),ci(19))};function Va(ze){ze.C!=null&&(Pe.clearTimeout(ze.C),ze.C=null)}function Ea(ze,gn){var En=null;if(ze.g==gn){Va(ze),Rl(ze),ze.g=null;var Fn=2}else if(ts(ze.h,gn))En=gn.D,Wa(ze.h,gn),Fn=1;else return;if(ze.G!=0){if(gn.o)if(Fn==1){En=gn.m?gn.m.length:0,gn=Date.now()-gn.F;var ur=ze.B;Fn=ro(),Pr(Fn,new Vs(Fn,En)),wa(ze)}else Fa(ze);else if(ur=gn.s,ur==3||ur==0&&0<gn.X||!(Fn==1&&Ul(ze,gn)||Fn==2&&Xa(ze)))switch(En&&0<En.length&&(gn=ze.h,gn.i=gn.i.concat(En)),ur){case 1:Ao(ze,5);break;case 4:Ao(ze,10);break;case 3:Ao(ze,6);break;default:Ao(ze,2)}}}function kl(ze,gn){let En=ze.Ta+Math.floor(Math.random()*ze.cb);return ze.isActive()||(En*=2),En*gn}function Ao(ze,gn){if(ze.j.info("Error code "+gn),gn==2){var En=Ae(ze.fb,ze),Fn=ze.Xa;const ur=!Fn;Fn=new ks(Fn||"//www.google.com/images/cleardot.gif"),Pe.location&&Pe.location.protocol=="http"||na(Fn,"https"),Ho(Fn),ur?Do(Fn.toString(),En):Ka(Fn.toString(),En)}else ci(2);ze.G=0,ze.l&&ze.l.sa(gn),Cl(ze),Da(ze)}r.fb=function(ze){ze?(this.j.info("Successfully pinged google.com"),ci(2)):(this.j.info("Failed to ping google.com"),ci(1))};function Cl(ze){if(ze.G=0,ze.ka=[],ze.l){const gn=Ha(ze.h);(gn.length!=0||ze.i.length!=0)&&(Ve(ze.ka,gn),Ve(ze.ka,ze.i),ze.h.i.length=0,Fe(ze.i),ze.i.length=0),ze.l.ra()}}function Ze(ze,gn,En){var Fn=En instanceof ks?Ks(En):new ks(En);if(Fn.g!="")gn&&(Fn.g=gn+"."+Fn.g),ra(Fn,Fn.s);else{var ur=Pe.location;Fn=ur.protocol,gn=gn?gn+"."+ur.hostname:ur.hostname,ur=+ur.port;var yr=new ks(null);Fn&&na(yr,Fn),gn&&(yr.g=gn),ur&&ra(yr,ur),En&&(yr.l=En),Fn=yr}return En=ze.D,gn=ze.ya,En&&gn&&ns(Fn,En,gn),ns(Fn,"VER",ze.la),Ta(ze,Fn),Fn}function kn(ze,gn,En){if(gn&&!ze.J)throw Error("Can't create secondary domain capable XhrIo object.");return gn=ze.Ca&&!ze.pa?new Jr(new An({eb:En})):new Jr(ze.pa),gn.Ha(ze.J),gn}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wn(){}r=Wn.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Zn(){}Zn.prototype.g=function(ze,gn){return new dr(ze,gn)};function dr(ze,gn){fr.call(this),this.g=new ll(gn),this.l=ze,this.h=gn&&gn.messageUrlParams||null,ze=gn&&gn.messageHeaders||null,gn&&gn.clientProtocolHeaderRequired&&(ze?ze["X-Client-Protocol"]="webchannel":ze={"X-Client-Protocol":"webchannel"}),this.g.o=ze,ze=gn&&gn.initMessageHeaders||null,gn&&gn.messageContentType&&(ze?ze["X-WebChannel-Content-Type"]=gn.messageContentType:ze={"X-WebChannel-Content-Type":gn.messageContentType}),gn&&gn.va&&(ze?ze["X-WebChannel-Client-Profile"]=gn.va:ze={"X-WebChannel-Client-Profile":gn.va}),this.g.S=ze,(ze=gn&&gn.Sb)&&!Be(ze)&&(this.g.m=ze),this.v=gn&&gn.supportsCrossDomainXhr||!1,this.u=gn&&gn.sendRawJson||!1,(gn=gn&&gn.httpSessionIdParam)&&!Be(gn)&&(this.g.D=gn,ze=this.h,ze!==null&&gn in ze&&(ze=this.h,gn in ze&&delete ze[gn])),this.j=new ii(this)}Me(dr,fr),dr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dr.prototype.close=function(){Ns(this.g)},dr.prototype.o=function(ze){var gn=this.g;if(typeof ze=="string"){var En={};En.__data__=ze,ze=En}else this.u&&(En={},En.__data__=Di(ze),ze=En);gn.i.push(new wo(gn.Ya++,ze)),gn.G==3&&wa(gn)},dr.prototype.N=function(){this.g.l=null,delete this.j,Ns(this.g),delete this.g,dr.aa.N.call(this)};function Rr(ze){Ss.call(this),ze.__headers__&&(this.headers=ze.__headers__,this.statusCode=ze.__status__,delete ze.__headers__,delete ze.__status__);var gn=ze.__sm__;if(gn){e:{for(const En in gn){ze=En;break e}ze=void 0}(this.i=ze)&&(ze=this.i,gn=gn!==null&&ze in gn?gn[ze]:void 0),this.data=gn}else this.data=ze}Me(Rr,Ss);function jr(){di.call(this),this.status=1}Me(jr,di);function ii(ze){this.g=ze}Me(ii,Wn),ii.prototype.ua=function(){Pr(this.g,"a")},ii.prototype.ta=function(ze){Pr(this.g,new Rr(ze))},ii.prototype.sa=function(ze){Pr(this.g,new jr)},ii.prototype.ra=function(){Pr(this.g,"b")},Zn.prototype.createWebChannel=Zn.prototype.g,dr.prototype.send=dr.prototype.o,dr.prototype.open=dr.prototype.m,dr.prototype.close=dr.prototype.close,createWebChannelTransport=function(){return new Zn},getStatEventTarget=function(){return ro()},Event$1=Ur,Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},js.NO_ERROR=0,js.TIMEOUT=8,js.HTTP_ERROR=6,ErrorCode=js,Vn.COMPLETE="complete",EventType=Vn,Qi.EventType=vs,vs.OPEN="a",vs.CLOSE="b",vs.ERROR="c",vs.MESSAGE="d",fr.prototype.listen=fr.prototype.K,WebChannel=Qi,Jr.prototype.listenOnce=Jr.prototype.L,Jr.prototype.getLastError=Jr.prototype.Ka,Jr.prototype.getLastErrorCode=Jr.prototype.Ba,Jr.prototype.getStatus=Jr.prototype.Z,Jr.prototype.getResponseJson=Jr.prototype.Oa,Jr.prototype.getResponseText=Jr.prototype.oa,Jr.prototype.send=Jr.prototype.ea,Jr.prototype.setWithCredentials=Jr.prototype.Ha,XhrIo=Jr}).apply(typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{});const F$1="@firebase/firestore",M$1="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class User{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}User.UNAUTHENTICATED=new User(null),User.GOOGLE_CREDENTIALS=new User("google-credentials-uid"),User.FIRST_PARTY=new User("first-party-uid"),User.MOCK_USER=new User("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x$2="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O$1=new Logger("@firebase/firestore");function __PRIVATE_getLogLevel(){return O$1.logLevel}function __PRIVATE_logDebug(r,...e){if(O$1.logLevel<=LogLevel.DEBUG){const t=e.map(__PRIVATE_argToString);O$1.debug(`Firestore (${x$2}): ${r}`,...t)}}function __PRIVATE_logError(r,...e){if(O$1.logLevel<=LogLevel.ERROR){const t=e.map(__PRIVATE_argToString);O$1.error(`Firestore (${x$2}): ${r}`,...t)}}function __PRIVATE_logWarn(r,...e){if(O$1.logLevel<=LogLevel.WARN){const t=e.map(__PRIVATE_argToString);O$1.warn(`Firestore (${x$2}): ${r}`,...t)}}function __PRIVATE_argToString(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fail(r,e,t){let _e="Unexpected state";typeof e=="string"?_e=e:t=e,__PRIVATE__fail(r,_e,t)}function __PRIVATE__fail(r,e,t){let _e=`FIRESTORE (${x$2}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{_e+=" CONTEXT: "+JSON.stringify(t)}catch{_e+=" CONTEXT: "+t}throw __PRIVATE_logError(_e),new Error(_e)}function __PRIVATE_hardAssert(r,e,t,_e){let Te="Unexpected state";typeof t=="string"?Te=t:_e=t,r||__PRIVATE__fail(e,Te,_e)}function __PRIVATE_debugCast(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$1={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class FirestoreError extends FirebaseError{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Deferred{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_OAuthToken{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class __PRIVATE_EmptyAuthCredentialsProvider{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(User.UNAUTHENTICATED))}shutdown(){}}class __PRIVATE_EmulatorAuthCredentialsProvider{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class __PRIVATE_FirebaseAuthCredentialsProvider{constructor(e){this.t=e,this.currentUser=User.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){__PRIVATE_hardAssert(this.o===void 0,42304);let _e=this.i;const Te=Re=>this.i!==_e?(_e=this.i,t(Re)):Promise.resolve();let Ee=new __PRIVATE_Deferred;this.o=()=>{this.i++,this.currentUser=this.u(),Ee.resolve(),Ee=new __PRIVATE_Deferred,e.enqueueRetryable(()=>Te(this.currentUser))};const xe=()=>{const Re=Ee;e.enqueueRetryable(async()=>{await Re.promise,await Te(this.currentUser)})},Pe=Re=>{__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=Re,this.o&&(this.auth.addAuthTokenListener(this.o),xe())};this.t.onInit(Re=>Pe(Re)),setTimeout(()=>{if(!this.auth){const Re=this.t.getImmediate({optional:!0});Re?Pe(Re):(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth not yet detected"),Ee.resolve(),Ee=new __PRIVATE_Deferred)}},0),xe()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(_e=>this.i!==e?(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):_e?(__PRIVATE_hardAssert(typeof _e.accessToken=="string",31837,{l:_e}),new __PRIVATE_OAuthToken(_e.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return __PRIVATE_hardAssert(e===null||typeof e=="string",2055,{h:e}),new User(e)}}class __PRIVATE_FirstPartyToken{constructor(e,t,_e){this.P=e,this.T=t,this.I=_e,this.type="FirstParty",this.user=User.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class __PRIVATE_FirstPartyAuthCredentialsProvider{constructor(e,t,_e){this.P=e,this.T=t,this.I=_e}getToken(){return Promise.resolve(new __PRIVATE_FirstPartyToken(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(User.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AppCheckToken{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class __PRIVATE_FirebaseAppCheckTokenProvider{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_isFirebaseServerApp(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){__PRIVATE_hardAssert(this.o===void 0,3512);const _e=Ee=>{Ee.error!=null&&__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${Ee.error.message}`);const xe=Ee.token!==this.m;return this.m=Ee.token,__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Received ${xe?"new":"existing"} token.`),xe?t(Ee.token):Promise.resolve()};this.o=Ee=>{e.enqueueRetryable(()=>_e(Ee))};const Te=Ee=>{__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=Ee,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(Ee=>Te(Ee)),setTimeout(()=>{if(!this.appCheck){const Ee=this.V.getImmediate({optional:!0});Ee?Te(Ee):__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new AppCheckToken(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(__PRIVATE_hardAssert(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new AppCheckToken(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_randomBytes(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let _e=0;_e<r;_e++)t[_e]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newTextEncoder(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AutoId{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let _e="";for(;_e.length<20;){const Te=__PRIVATE_randomBytes(40);for(let Ee=0;Ee<Te.length;++Ee)_e.length<20&&Te[Ee]<t&&(_e+=e.charAt(Te[Ee]%62))}return _e}}function __PRIVATE_primitiveComparator(r,e){return r<e?-1:r>e?1:0}function __PRIVATE_compareUtf8Strings(r,e){let t=0;for(;t<r.length&&t<e.length;){const _e=r.codePointAt(t),Te=e.codePointAt(t);if(_e!==Te){if(_e<128&&Te<128)return __PRIVATE_primitiveComparator(_e,Te);{const Ee=__PRIVATE_newTextEncoder(),xe=__PRIVATE_compareByteArrays$1(Ee.encode(__PRIVATE_getUtf8SafeSubstring(r,t)),Ee.encode(__PRIVATE_getUtf8SafeSubstring(e,t)));return xe!==0?xe:__PRIVATE_primitiveComparator(_e,Te)}}t+=_e>65535?2:1}return __PRIVATE_primitiveComparator(r.length,e.length)}function __PRIVATE_getUtf8SafeSubstring(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function __PRIVATE_compareByteArrays$1(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return __PRIVATE_primitiveComparator(r[t],e[t]);return __PRIVATE_primitiveComparator(r.length,e.length)}function __PRIVATE_arrayEquals(r,e,t){return r.length===e.length&&r.every((_e,Te)=>t(_e,e[Te]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B$1="__name__";class BasePath{constructor(e,t,_e){t===void 0?t=0:t>e.length&&fail(637,{offset:t,range:e.length}),_e===void 0?_e=e.length-t:_e>e.length-t&&fail(1746,{length:_e,range:e.length-t}),this.segments=e,this.offset=t,this.len=_e}get length(){return this.len}isEqual(e){return BasePath.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof BasePath?e.forEach(_e=>{t.push(_e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,_e=this.limit();t<_e;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const _e=Math.min(e.length,t.length);for(let Te=0;Te<_e;Te++){const Ee=BasePath.compareSegments(e.get(Te),t.get(Te));if(Ee!==0)return Ee}return __PRIVATE_primitiveComparator(e.length,t.length)}static compareSegments(e,t){const _e=BasePath.isNumericId(e),Te=BasePath.isNumericId(t);return _e&&!Te?-1:!_e&&Te?1:_e&&Te?BasePath.extractNumericId(e).compare(BasePath.extractNumericId(t)):__PRIVATE_compareUtf8Strings(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Integer.fromString(e.substring(4,e.length-2))}}class ResourcePath extends BasePath{construct(e,t,_e){return new ResourcePath(e,t,_e)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const _e of e){if(_e.indexOf("//")>=0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid segment (${_e}). Paths must not contain // in them.`);t.push(..._e.split("/").filter(Te=>Te.length>0))}return new ResourcePath(t)}static emptyPath(){return new ResourcePath([])}}const L$1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class FieldPath$1 extends BasePath{construct(e,t,_e){return new FieldPath$1(e,t,_e)}static isValidIdentifier(e){return L$1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),FieldPath$1.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===B$1}static keyField(){return new FieldPath$1([B$1])}static fromServerFormat(e){const t=[];let _e="",Te=0;const Ee=()=>{if(_e.length===0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(_e),_e=""};let xe=!1;for(;Te<e.length;){const Pe=e[Te];if(Pe==="\\"){if(Te+1===e.length)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const Re=e[Te+1];if(Re!=="\\"&&Re!=="."&&Re!=="`")throw new FirestoreError(N$1.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);_e+=Re,Te+=2}else Pe==="`"?(xe=!xe,Te++):Pe!=="."||xe?(_e+=Pe,Te++):(Ee(),Te++)}if(Ee(),xe)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new FieldPath$1(t)}static emptyPath(){return new FieldPath$1([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentKey{constructor(e){this.path=e}static fromPath(e){return new DocumentKey(ResourcePath.fromString(e))}static fromName(e){return new DocumentKey(ResourcePath.fromString(e).popFirst(5))}static empty(){return new DocumentKey(ResourcePath.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ResourcePath.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ResourcePath.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new DocumentKey(new ResourcePath(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateNonEmptyArgument(r,e,t){if(!t)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function __PRIVATE_validateIsNotUsedTogether(r,e,t,_e){if(e===!0&&_e===!0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function __PRIVATE_validateDocumentPath(r){if(!DocumentKey.isDocumentKey(r))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function __PRIVATE_validateCollectionPath(r){if(DocumentKey.isDocumentKey(r))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function __PRIVATE_isPlainObject(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function __PRIVATE_valueDescription(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(_e){return _e.constructor?_e.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":fail(12329,{type:typeof r})}function __PRIVATE_cast(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=__PRIVATE_valueDescription(r);throw new FirestoreError(N$1.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function property(r,e){const t={typeString:r};return e&&(t.value=e),t}function __PRIVATE_validateJSON(r,e){if(!__PRIVATE_isPlainObject(r))throw new FirestoreError(N$1.INVALID_ARGUMENT,"JSON must be an object");let t;for(const _e in e)if(e[_e]){const Te=e[_e].typeString,Ee="value"in e[_e]?{value:e[_e].value}:void 0;if(!(_e in r)){t=`JSON missing required field: '${_e}'`;break}const xe=r[_e];if(Te&&typeof xe!==Te){t=`JSON field '${_e}' must be a ${Te}.`;break}if(Ee!==void 0&&xe!==Ee.value){t=`Expected '${_e}' field to equal '${Ee.value}'`;break}}if(t)throw new FirestoreError(N$1.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k$1=-62135596800,q$1=1e6;class Timestamp{static now(){return Timestamp.fromMillis(Date.now())}static fromDate(e){return Timestamp.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),_e=Math.floor((e-1e3*t)*q$1);return new Timestamp(t,_e)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<k$1)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/q$1}_compareTo(e){return this.seconds===e.seconds?__PRIVATE_primitiveComparator(this.nanoseconds,e.nanoseconds):__PRIVATE_primitiveComparator(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Timestamp._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(__PRIVATE_validateJSON(e,Timestamp._jsonSchema))return new Timestamp(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-k$1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Timestamp._jsonSchemaVersion="firestore/timestamp/1.0",Timestamp._jsonSchema={type:property("string",Timestamp._jsonSchemaVersion),seconds:property("number"),nanoseconds:property("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotVersion{static fromTimestamp(e){return new SnapshotVersion(e)}static min(){return new SnapshotVersion(new Timestamp(0,0))}static max(){return new SnapshotVersion(new Timestamp(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q$1=-1;function __PRIVATE_newIndexOffsetSuccessorFromReadTime(r,e){const t=r.toTimestamp().seconds,_e=r.toTimestamp().nanoseconds+1,Te=SnapshotVersion.fromTimestamp(_e===1e9?new Timestamp(t+1,0):new Timestamp(t,_e));return new IndexOffset(Te,DocumentKey.empty(),e)}function __PRIVATE_newIndexOffsetFromDocument(r){return new IndexOffset(r.readTime,r.key,Q$1)}class IndexOffset{constructor(e,t,_e){this.readTime=e,this.documentKey=t,this.largestBatchId=_e}static min(){return new IndexOffset(SnapshotVersion.min(),DocumentKey.empty(),Q$1)}static max(){return new IndexOffset(SnapshotVersion.max(),DocumentKey.empty(),Q$1)}}function __PRIVATE_indexOffsetComparator(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=DocumentKey.comparator(r.documentKey,e.documentKey),t!==0?t:__PRIVATE_primitiveComparator(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $$1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PersistenceTransaction{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __PRIVATE_ignoreIfPrimaryLeaseLoss(r){if(r.code!==N$1.FAILED_PRECONDITION||r.message!==$$1)throw r;__PRIVATE_logDebug("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PersistencePromise{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&fail(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new PersistencePromise((_e,Te)=>{this.nextCallback=Ee=>{this.wrapSuccess(e,Ee).next(_e,Te)},this.catchCallback=Ee=>{this.wrapFailure(t,Ee).next(_e,Te)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof PersistencePromise?t:PersistencePromise.resolve(t)}catch(t){return PersistencePromise.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):PersistencePromise.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):PersistencePromise.reject(t)}static resolve(e){return new PersistencePromise((t,_e)=>{t(e)})}static reject(e){return new PersistencePromise((t,_e)=>{_e(e)})}static waitFor(e){return new PersistencePromise((t,_e)=>{let Te=0,Ee=0,xe=!1;e.forEach(Pe=>{++Te,Pe.next(()=>{++Ee,xe&&Ee===Te&&t()},Re=>_e(Re))}),xe=!0,Ee===Te&&t()})}static or(e){let t=PersistencePromise.resolve(!1);for(const _e of e)t=t.next(Te=>Te?PersistencePromise.resolve(Te):_e());return t}static forEach(e,t){const _e=[];return e.forEach((Te,Ee)=>{_e.push(t.call(this,Te,Ee))}),this.waitFor(_e)}static mapArray(e,t){return new PersistencePromise((_e,Te)=>{const Ee=e.length,xe=new Array(Ee);let Pe=0;for(let Re=0;Re<Ee;Re++){const ke=Re;t(e[ke]).next(Ce=>{xe[ke]=Ce,++Pe,Pe===Ee&&_e(xe)},Ce=>Te(Ce))}})}static doWhile(e,t){return new PersistencePromise((_e,Te)=>{const Ee=()=>{e()===!0?t().next(()=>{Ee()},Te):_e()};Ee()})}}function __PRIVATE_getAndroidVersion(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function __PRIVATE_isIndexedDbTransactionError(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ListenSequence{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=_e=>this._e(_e),this.ae=_e=>t.writeSequenceNumber(_e))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}__PRIVATE_ListenSequence.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G$1=-1;function __PRIVATE_isNullOrUndefined(r){return r==null}function __PRIVATE_isNegativeZero(r){return r===0&&1/r==-1/0}function isSafeInteger(r){return typeof r=="number"&&Number.isInteger(r)&&!__PRIVATE_isNegativeZero(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z$1="";function __PRIVATE_encodeResourcePath(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=__PRIVATE_encodeSeparator(e)),e=__PRIVATE_encodeSegment(r.get(t),e);return __PRIVATE_encodeSeparator(e)}function __PRIVATE_encodeSegment(r,e){let t=e;const _e=r.length;for(let Te=0;Te<_e;Te++){const Ee=r.charAt(Te);switch(Ee){case"\0":t+="";break;case z$1:t+="";break;default:t+=Ee}}return t}function __PRIVATE_encodeSeparator(r){return r+z$1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_objectSize(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function forEach$1(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function isEmpty$1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedMap{constructor(e,t){this.comparator=e,this.root=t||LLRBNode.EMPTY}insert(e,t){return new SortedMap(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}remove(e){return new SortedMap(this.comparator,this.root.remove(e,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const _e=this.comparator(e,t.key);if(_e===0)return t.value;_e<0?t=t.left:_e>0&&(t=t.right)}return null}indexOf(e){let t=0,_e=this.root;for(;!_e.isEmpty();){const Te=this.comparator(e,_e.key);if(Te===0)return t+_e.left.size;Te<0?_e=_e.left:(t+=_e.left.size+1,_e=_e.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,_e)=>(e(t,_e),!1))}toString(){const e=[];return this.inorderTraversal((t,_e)=>(e.push(`${t}:${_e}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new SortedMapIterator(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!1)}getReverseIterator(){return new SortedMapIterator(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!0)}}class SortedMapIterator{constructor(e,t,_e,Te){this.isReverse=Te,this.nodeStack=[];let Ee=1;for(;!e.isEmpty();)if(Ee=t?_e(e.key,t):1,t&&Te&&(Ee*=-1),Ee<0)e=this.isReverse?e.left:e.right;else{if(Ee===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class LLRBNode{constructor(e,t,_e,Te,Ee){this.key=e,this.value=t,this.color=_e??LLRBNode.RED,this.left=Te??LLRBNode.EMPTY,this.right=Ee??LLRBNode.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,_e,Te,Ee){return new LLRBNode(e??this.key,t??this.value,_e??this.color,Te??this.left,Ee??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,_e){let Te=this;const Ee=_e(e,Te.key);return Te=Ee<0?Te.copy(null,null,null,Te.left.insert(e,t,_e),null):Ee===0?Te.copy(null,t,null,null,null):Te.copy(null,null,null,null,Te.right.insert(e,t,_e)),Te.fixUp()}removeMin(){if(this.left.isEmpty())return LLRBNode.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let _e,Te=this;if(t(e,Te.key)<0)Te.left.isEmpty()||Te.left.isRed()||Te.left.left.isRed()||(Te=Te.moveRedLeft()),Te=Te.copy(null,null,null,Te.left.remove(e,t),null);else{if(Te.left.isRed()&&(Te=Te.rotateRight()),Te.right.isEmpty()||Te.right.isRed()||Te.right.left.isRed()||(Te=Te.moveRedRight()),t(e,Te.key)===0){if(Te.right.isEmpty())return LLRBNode.EMPTY;_e=Te.right.min(),Te=Te.copy(_e.key,_e.value,null,null,Te.right.removeMin())}Te=Te.copy(null,null,null,null,Te.right.remove(e,t))}return Te.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fail(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fail(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fail(27949);return e+(this.isRed()?0:1)}}LLRBNode.EMPTY=null,LLRBNode.RED=!0,LLRBNode.BLACK=!1;LLRBNode.EMPTY=new class{constructor(){this.size=0}get key(){throw fail(57766)}get value(){throw fail(16141)}get color(){throw fail(16727)}get left(){throw fail(29726)}get right(){throw fail(36894)}copy(e,t,_e,Te,Ee){return this}insert(e,t,_e){return new LLRBNode(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedSet{constructor(e){this.comparator=e,this.data=new SortedMap(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,_e)=>(e(t),!1))}forEachInRange(e,t){const _e=this.data.getIteratorFrom(e[0]);for(;_e.hasNext();){const Te=_e.getNext();if(this.comparator(Te.key,e[1])>=0)return;t(Te.key)}}forEachWhile(e,t){let _e;for(_e=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();_e.hasNext();)if(!e(_e.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new SortedSetIterator(this.data.getIterator())}getIteratorFrom(e){return new SortedSetIterator(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(_e=>{t=t.add(_e)}),t}isEqual(e){if(!(e instanceof SortedSet)||this.size!==e.size)return!1;const t=this.data.getIterator(),_e=e.data.getIterator();for(;t.hasNext();){const Te=t.getNext().key,Ee=_e.getNext().key;if(this.comparator(Te,Ee)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new SortedSet(this.comparator);return t.data=e,t}}class SortedSetIterator{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldMask{constructor(e){this.fields=e,e.sort(FieldPath$1.comparator)}static empty(){return new FieldMask([])}unionWith(e){let t=new SortedSet(FieldPath$1.comparator);for(const _e of this.fields)t=t.add(_e);for(const _e of e)t=t.add(_e);return new FieldMask(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return __PRIVATE_arrayEquals(this.fields,e.fields,(t,_e)=>t.isEqual(_e))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Base64DecodeError extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ByteString{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(Te){try{return atob(Te)}catch(Ee){throw typeof DOMException<"u"&&Ee instanceof DOMException?new __PRIVATE_Base64DecodeError("Invalid base64 string: "+Ee):Ee}}(e);return new ByteString(t)}static fromUint8Array(e){const t=function(Te){let Ee="";for(let xe=0;xe<Te.length;++xe)Ee+=String.fromCharCode(Te[xe]);return Ee}(e);return new ByteString(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const _e=new Uint8Array(t.length);for(let Te=0;Te<t.length;Te++)_e[Te]=t.charCodeAt(Te);return _e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return __PRIVATE_primitiveComparator(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ByteString.EMPTY_BYTE_STRING=new ByteString("");const it$1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __PRIVATE_normalizeTimestamp(r){if(__PRIVATE_hardAssert(!!r,39018),typeof r=="string"){let e=0;const t=it$1.exec(r);if(__PRIVATE_hardAssert(!!t,46558,{timestamp:r}),t[1]){let Te=t[1];Te=(Te+"000000000").substr(0,9),e=Number(Te)}const _e=new Date(r);return{seconds:Math.floor(_e.getTime()/1e3),nanos:e}}return{seconds:__PRIVATE_normalizeNumber(r.seconds),nanos:__PRIVATE_normalizeNumber(r.nanos)}}function __PRIVATE_normalizeNumber(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function __PRIVATE_normalizeByteString(r){return typeof r=="string"?ByteString.fromBase64String(r):ByteString.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st$1="server_timestamp",ot$1="__type__",_t$1="__previous_value__",at$1="__local_write_time__";function __PRIVATE_isServerTimestamp(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{})[ot$1])===null||t===void 0?void 0:t.stringValue)===st$1}function __PRIVATE_getPreviousValue(r){const e=r.mapValue.fields[_t$1];return __PRIVATE_isServerTimestamp(e)?__PRIVATE_getPreviousValue(e):e}function __PRIVATE_getLocalWriteTime(r){const e=__PRIVATE_normalizeTimestamp(r.mapValue.fields[at$1].timestampValue);return new Timestamp(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DatabaseInfo{constructor(e,t,_e,Te,Ee,xe,Pe,Re,ke,Ce){this.databaseId=e,this.appId=t,this.persistenceKey=_e,this.host=Te,this.ssl=Ee,this.forceLongPolling=xe,this.autoDetectLongPolling=Pe,this.longPollingOptions=Re,this.useFetchStreams=ke,this.isUsingEmulator=Ce}}const ut$1="(default)";class DatabaseId{constructor(e,t){this.projectId=e,this.database=t||ut$1}static empty(){return new DatabaseId("","")}get isDefaultDatabase(){return this.database===ut$1}isEqual(e){return e instanceof DatabaseId&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct$1="__type__",lt$1="__max__",ht$1={mapValue:{}},Pt$1="__vector__",Tt$1="value";function __PRIVATE_typeOrder(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?__PRIVATE_isServerTimestamp(r)?4:__PRIVATE_isMaxValue(r)?9007199254740991:__PRIVATE_isVectorValue(r)?10:11:fail(28295,{value:r})}function __PRIVATE_valueEquals(r,e){if(r===e)return!0;const t=__PRIVATE_typeOrder(r);if(t!==__PRIVATE_typeOrder(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return __PRIVATE_getLocalWriteTime(r).isEqual(__PRIVATE_getLocalWriteTime(e));case 3:return function(Te,Ee){if(typeof Te.timestampValue=="string"&&typeof Ee.timestampValue=="string"&&Te.timestampValue.length===Ee.timestampValue.length)return Te.timestampValue===Ee.timestampValue;const xe=__PRIVATE_normalizeTimestamp(Te.timestampValue),Pe=__PRIVATE_normalizeTimestamp(Ee.timestampValue);return xe.seconds===Pe.seconds&&xe.nanos===Pe.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(Te,Ee){return __PRIVATE_normalizeByteString(Te.bytesValue).isEqual(__PRIVATE_normalizeByteString(Ee.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(Te,Ee){return __PRIVATE_normalizeNumber(Te.geoPointValue.latitude)===__PRIVATE_normalizeNumber(Ee.geoPointValue.latitude)&&__PRIVATE_normalizeNumber(Te.geoPointValue.longitude)===__PRIVATE_normalizeNumber(Ee.geoPointValue.longitude)}(r,e);case 2:return function(Te,Ee){if("integerValue"in Te&&"integerValue"in Ee)return __PRIVATE_normalizeNumber(Te.integerValue)===__PRIVATE_normalizeNumber(Ee.integerValue);if("doubleValue"in Te&&"doubleValue"in Ee){const xe=__PRIVATE_normalizeNumber(Te.doubleValue),Pe=__PRIVATE_normalizeNumber(Ee.doubleValue);return xe===Pe?__PRIVATE_isNegativeZero(xe)===__PRIVATE_isNegativeZero(Pe):isNaN(xe)&&isNaN(Pe)}return!1}(r,e);case 9:return __PRIVATE_arrayEquals(r.arrayValue.values||[],e.arrayValue.values||[],__PRIVATE_valueEquals);case 10:case 11:return function(Te,Ee){const xe=Te.mapValue.fields||{},Pe=Ee.mapValue.fields||{};if(__PRIVATE_objectSize(xe)!==__PRIVATE_objectSize(Pe))return!1;for(const Re in xe)if(xe.hasOwnProperty(Re)&&(Pe[Re]===void 0||!__PRIVATE_valueEquals(xe[Re],Pe[Re])))return!1;return!0}(r,e);default:return fail(52216,{left:r})}}function __PRIVATE_arrayValueContains(r,e){return(r.values||[]).find(t=>__PRIVATE_valueEquals(t,e))!==void 0}function __PRIVATE_valueCompare(r,e){if(r===e)return 0;const t=__PRIVATE_typeOrder(r),_e=__PRIVATE_typeOrder(e);if(t!==_e)return __PRIVATE_primitiveComparator(t,_e);switch(t){case 0:case 9007199254740991:return 0;case 1:return __PRIVATE_primitiveComparator(r.booleanValue,e.booleanValue);case 2:return function(Ee,xe){const Pe=__PRIVATE_normalizeNumber(Ee.integerValue||Ee.doubleValue),Re=__PRIVATE_normalizeNumber(xe.integerValue||xe.doubleValue);return Pe<Re?-1:Pe>Re?1:Pe===Re?0:isNaN(Pe)?isNaN(Re)?0:-1:1}(r,e);case 3:return __PRIVATE_compareTimestamps(r.timestampValue,e.timestampValue);case 4:return __PRIVATE_compareTimestamps(__PRIVATE_getLocalWriteTime(r),__PRIVATE_getLocalWriteTime(e));case 5:return __PRIVATE_compareUtf8Strings(r.stringValue,e.stringValue);case 6:return function(Ee,xe){const Pe=__PRIVATE_normalizeByteString(Ee),Re=__PRIVATE_normalizeByteString(xe);return Pe.compareTo(Re)}(r.bytesValue,e.bytesValue);case 7:return function(Ee,xe){const Pe=Ee.split("/"),Re=xe.split("/");for(let ke=0;ke<Pe.length&&ke<Re.length;ke++){const Ce=__PRIVATE_primitiveComparator(Pe[ke],Re[ke]);if(Ce!==0)return Ce}return __PRIVATE_primitiveComparator(Pe.length,Re.length)}(r.referenceValue,e.referenceValue);case 8:return function(Ee,xe){const Pe=__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(Ee.latitude),__PRIVATE_normalizeNumber(xe.latitude));return Pe!==0?Pe:__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(Ee.longitude),__PRIVATE_normalizeNumber(xe.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return __PRIVATE_compareArrays(r.arrayValue,e.arrayValue);case 10:return function(Ee,xe){var Pe,Re,ke,Ce;const Se=Ee.fields||{},Ae=xe.fields||{},Ie=(Pe=Se[Tt$1])===null||Pe===void 0?void 0:Pe.arrayValue,Me=(Re=Ae[Tt$1])===null||Re===void 0?void 0:Re.arrayValue,Fe=__PRIVATE_primitiveComparator(((ke=Ie?.values)===null||ke===void 0?void 0:ke.length)||0,((Ce=Me?.values)===null||Ce===void 0?void 0:Ce.length)||0);return Fe!==0?Fe:__PRIVATE_compareArrays(Ie,Me)}(r.mapValue,e.mapValue);case 11:return function(Ee,xe){if(Ee===ht$1.mapValue&&xe===ht$1.mapValue)return 0;if(Ee===ht$1.mapValue)return 1;if(xe===ht$1.mapValue)return-1;const Pe=Ee.fields||{},Re=Object.keys(Pe),ke=xe.fields||{},Ce=Object.keys(ke);Re.sort(),Ce.sort();for(let Se=0;Se<Re.length&&Se<Ce.length;++Se){const Ae=__PRIVATE_compareUtf8Strings(Re[Se],Ce[Se]);if(Ae!==0)return Ae;const Ie=__PRIVATE_valueCompare(Pe[Re[Se]],ke[Ce[Se]]);if(Ie!==0)return Ie}return __PRIVATE_primitiveComparator(Re.length,Ce.length)}(r.mapValue,e.mapValue);default:throw fail(23264,{le:t})}}function __PRIVATE_compareTimestamps(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return __PRIVATE_primitiveComparator(r,e);const t=__PRIVATE_normalizeTimestamp(r),_e=__PRIVATE_normalizeTimestamp(e),Te=__PRIVATE_primitiveComparator(t.seconds,_e.seconds);return Te!==0?Te:__PRIVATE_primitiveComparator(t.nanos,_e.nanos)}function __PRIVATE_compareArrays(r,e){const t=r.values||[],_e=e.values||[];for(let Te=0;Te<t.length&&Te<_e.length;++Te){const Ee=__PRIVATE_valueCompare(t[Te],_e[Te]);if(Ee)return Ee}return __PRIVATE_primitiveComparator(t.length,_e.length)}function canonicalId(r){return __PRIVATE_canonifyValue(r)}function __PRIVATE_canonifyValue(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const _e=__PRIVATE_normalizeTimestamp(t);return`time(${_e.seconds},${_e.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return __PRIVATE_normalizeByteString(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return DocumentKey.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let _e="[",Te=!0;for(const Ee of t.values||[])Te?Te=!1:_e+=",",_e+=__PRIVATE_canonifyValue(Ee);return _e+"]"}(r.arrayValue):"mapValue"in r?function(t){const _e=Object.keys(t.fields||{}).sort();let Te="{",Ee=!0;for(const xe of _e)Ee?Ee=!1:Te+=",",Te+=`${xe}:${__PRIVATE_canonifyValue(t.fields[xe])}`;return Te+"}"}(r.mapValue):fail(61005,{value:r})}function __PRIVATE_estimateByteSize(r){switch(__PRIVATE_typeOrder(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=__PRIVATE_getPreviousValue(r);return e?16+__PRIVATE_estimateByteSize(e):16;case 5:return 2*r.stringValue.length;case 6:return __PRIVATE_normalizeByteString(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(_e){return(_e.values||[]).reduce((Te,Ee)=>Te+__PRIVATE_estimateByteSize(Ee),0)}(r.arrayValue);case 10:case 11:return function(_e){let Te=0;return forEach$1(_e.fields,(Ee,xe)=>{Te+=Ee.length+__PRIVATE_estimateByteSize(xe)}),Te}(r.mapValue);default:throw fail(13486,{value:r})}}function __PRIVATE_refValue(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function isInteger$1(r){return!!r&&"integerValue"in r}function isArray$1(r){return!!r&&"arrayValue"in r}function __PRIVATE_isNullValue(r){return!!r&&"nullValue"in r}function __PRIVATE_isNanValue(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function __PRIVATE_isMapValue(r){return!!r&&"mapValue"in r}function __PRIVATE_isVectorValue(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{})[ct$1])===null||t===void 0?void 0:t.stringValue)===Pt$1}function __PRIVATE_deepClone(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return forEach$1(r.mapValue.fields,(t,_e)=>e.mapValue.fields[t]=__PRIVATE_deepClone(_e)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=__PRIVATE_deepClone(r.arrayValue.values[t]);return e}return Object.assign({},r)}function __PRIVATE_isMaxValue(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===lt$1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ObjectValue$1=class hh{constructor(e){this.value=e}static empty(){return new hh({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let _e=0;_e<e.length-1;++_e)if(t=(t.mapValue.fields||{})[e.get(_e)],!__PRIVATE_isMapValue(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=__PRIVATE_deepClone(t)}setAll(e){let t=FieldPath$1.emptyPath(),_e={},Te=[];e.forEach((xe,Pe)=>{if(!t.isImmediateParentOf(Pe)){const Re=this.getFieldsMap(t);this.applyChanges(Re,_e,Te),_e={},Te=[],t=Pe.popLast()}xe?_e[Pe.lastSegment()]=__PRIVATE_deepClone(xe):Te.push(Pe.lastSegment())});const Ee=this.getFieldsMap(t);this.applyChanges(Ee,_e,Te)}delete(e){const t=this.field(e.popLast());__PRIVATE_isMapValue(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return __PRIVATE_valueEquals(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let _e=0;_e<e.length;++_e){let Te=t.mapValue.fields[e.get(_e)];__PRIVATE_isMapValue(Te)&&Te.mapValue.fields||(Te={mapValue:{fields:{}}},t.mapValue.fields[e.get(_e)]=Te),t=Te}return t.mapValue.fields}applyChanges(e,t,_e){forEach$1(t,(Te,Ee)=>e[Te]=Ee);for(const Te of _e)delete e[Te]}clone(){return new hh(__PRIVATE_deepClone(this.value))}};function __PRIVATE_extractFieldMask(r){const e=[];return forEach$1(r.fields,(t,_e)=>{const Te=new FieldPath$1([t]);if(__PRIVATE_isMapValue(_e)){const Ee=__PRIVATE_extractFieldMask(_e.mapValue).fields;if(Ee.length===0)e.push(Te);else for(const xe of Ee)e.push(Te.child(xe))}else e.push(Te)}),new FieldMask(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutableDocument{constructor(e,t,_e,Te,Ee,xe,Pe){this.key=e,this.documentType=t,this.version=_e,this.readTime=Te,this.createTime=Ee,this.data=xe,this.documentState=Pe}static newInvalidDocument(e){return new MutableDocument(e,0,SnapshotVersion.min(),SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue$1.empty(),0)}static newFoundDocument(e,t,_e,Te){return new MutableDocument(e,1,t,SnapshotVersion.min(),_e,Te,0)}static newNoDocument(e,t){return new MutableDocument(e,2,t,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue$1.empty(),0)}static newUnknownDocument(e,t){return new MutableDocument(e,3,t,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue$1.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(SnapshotVersion.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ObjectValue$1.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ObjectValue$1.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=SnapshotVersion.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof MutableDocument&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new MutableDocument(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bound{constructor(e,t){this.position=e,this.inclusive=t}}function __PRIVATE_boundCompareToDocument(r,e,t){let _e=0;for(let Te=0;Te<r.position.length;Te++){const Ee=e[Te],xe=r.position[Te];if(Ee.field.isKeyField()?_e=DocumentKey.comparator(DocumentKey.fromName(xe.referenceValue),t.key):_e=__PRIVATE_valueCompare(xe,t.data.field(Ee.field)),Ee.dir==="desc"&&(_e*=-1),_e!==0)break}return _e}function __PRIVATE_boundEquals(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!__PRIVATE_valueEquals(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OrderBy{constructor(e,t="asc"){this.field=e,this.dir=t}}function __PRIVATE_orderByEquals(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Filter{}class FieldFilter extends Filter{constructor(e,t,_e){super(),this.field=e,this.op=t,this.value=_e}static create(e,t,_e){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,_e):new __PRIVATE_KeyFieldFilter(e,t,_e):t==="array-contains"?new __PRIVATE_ArrayContainsFilter(e,_e):t==="in"?new __PRIVATE_InFilter(e,_e):t==="not-in"?new __PRIVATE_NotInFilter(e,_e):t==="array-contains-any"?new __PRIVATE_ArrayContainsAnyFilter(e,_e):new FieldFilter(e,t,_e)}static createKeyFieldInFilter(e,t,_e){return t==="in"?new __PRIVATE_KeyFieldInFilter(e,_e):new __PRIVATE_KeyFieldNotInFilter(e,_e)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(__PRIVATE_valueCompare(t,this.value)):t!==null&&__PRIVATE_typeOrder(this.value)===__PRIVATE_typeOrder(t)&&this.matchesComparison(__PRIVATE_valueCompare(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fail(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class CompositeFilter extends Filter{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new CompositeFilter(e,t)}matches(e){return __PRIVATE_compositeFilterIsConjunction(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function __PRIVATE_compositeFilterIsConjunction(r){return r.op==="and"}function __PRIVATE_compositeFilterIsFlatConjunction(r){return __PRIVATE_compositeFilterIsFlat(r)&&__PRIVATE_compositeFilterIsConjunction(r)}function __PRIVATE_compositeFilterIsFlat(r){for(const e of r.filters)if(e instanceof CompositeFilter)return!1;return!0}function __PRIVATE_canonifyFilter(r){if(r instanceof FieldFilter)return r.field.canonicalString()+r.op.toString()+canonicalId(r.value);if(__PRIVATE_compositeFilterIsFlatConjunction(r))return r.filters.map(e=>__PRIVATE_canonifyFilter(e)).join(",");{const e=r.filters.map(t=>__PRIVATE_canonifyFilter(t)).join(",");return`${r.op}(${e})`}}function __PRIVATE_filterEquals(r,e){return r instanceof FieldFilter?function(_e,Te){return Te instanceof FieldFilter&&_e.op===Te.op&&_e.field.isEqual(Te.field)&&__PRIVATE_valueEquals(_e.value,Te.value)}(r,e):r instanceof CompositeFilter?function(_e,Te){return Te instanceof CompositeFilter&&_e.op===Te.op&&_e.filters.length===Te.filters.length?_e.filters.reduce((Ee,xe,Pe)=>Ee&&__PRIVATE_filterEquals(xe,Te.filters[Pe]),!0):!1}(r,e):void fail(19439)}function __PRIVATE_stringifyFilter(r){return r instanceof FieldFilter?function(t){return`${t.field.canonicalString()} ${t.op} ${canonicalId(t.value)}`}(r):r instanceof CompositeFilter?function(t){return t.op.toString()+" {"+t.getFilters().map(__PRIVATE_stringifyFilter).join(" ,")+"}"}(r):"Filter"}class __PRIVATE_KeyFieldFilter extends FieldFilter{constructor(e,t,_e){super(e,t,_e),this.key=DocumentKey.fromName(_e.referenceValue)}matches(e){const t=DocumentKey.comparator(e.key,this.key);return this.matchesComparison(t)}}class __PRIVATE_KeyFieldInFilter extends FieldFilter{constructor(e,t){super(e,"in",t),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class __PRIVATE_KeyFieldNotInFilter extends FieldFilter{constructor(e,t){super(e,"not-in",t),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function __PRIVATE_extractDocumentKeysFromArrayValue(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(_e=>DocumentKey.fromName(_e.referenceValue))}class __PRIVATE_ArrayContainsFilter extends FieldFilter{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return isArray$1(t)&&__PRIVATE_arrayValueContains(t.arrayValue,this.value)}}class __PRIVATE_InFilter extends FieldFilter{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&__PRIVATE_arrayValueContains(this.value.arrayValue,t)}}class __PRIVATE_NotInFilter extends FieldFilter{constructor(e,t){super(e,"not-in",t)}matches(e){if(__PRIVATE_arrayValueContains(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!__PRIVATE_arrayValueContains(this.value.arrayValue,t)}}class __PRIVATE_ArrayContainsAnyFilter extends FieldFilter{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!isArray$1(t)||!t.arrayValue.values)&&t.arrayValue.values.some(_e=>__PRIVATE_arrayValueContains(this.value.arrayValue,_e))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetImpl{constructor(e,t=null,_e=[],Te=[],Ee=null,xe=null,Pe=null){this.path=e,this.collectionGroup=t,this.orderBy=_e,this.filters=Te,this.limit=Ee,this.startAt=xe,this.endAt=Pe,this.Pe=null}}function __PRIVATE_newTarget(r,e=null,t=[],_e=[],Te=null,Ee=null,xe=null){return new __PRIVATE_TargetImpl(r,e,t,_e,Te,Ee,xe)}function __PRIVATE_canonifyTarget(r){const e=__PRIVATE_debugCast(r);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(_e=>__PRIVATE_canonifyFilter(_e)).join(","),t+="|ob:",t+=e.orderBy.map(_e=>function(Ee){return Ee.field.canonicalString()+Ee.dir}(_e)).join(","),__PRIVATE_isNullOrUndefined(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(_e=>canonicalId(_e)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(_e=>canonicalId(_e)).join(",")),e.Pe=t}return e.Pe}function __PRIVATE_targetEquals(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!__PRIVATE_orderByEquals(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!__PRIVATE_filterEquals(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!__PRIVATE_boundEquals(r.startAt,e.startAt)&&__PRIVATE_boundEquals(r.endAt,e.endAt)}function __PRIVATE_targetIsDocumentTarget(r){return DocumentKey.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryImpl{constructor(e,t=null,_e=[],Te=[],Ee=null,xe="F",Pe=null,Re=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=_e,this.filters=Te,this.limit=Ee,this.limitType=xe,this.startAt=Pe,this.endAt=Re,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function __PRIVATE_newQuery(r,e,t,_e,Te,Ee,xe,Pe){return new __PRIVATE_QueryImpl(r,e,t,_e,Te,Ee,xe,Pe)}function __PRIVATE_newQueryForPath(r){return new __PRIVATE_QueryImpl(r)}function __PRIVATE_queryMatchesAllDocuments(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function __PRIVATE_isCollectionGroupQuery(r){return r.collectionGroup!==null}function __PRIVATE_queryNormalizedOrderBy(r){const e=__PRIVATE_debugCast(r);if(e.Te===null){e.Te=[];const t=new Set;for(const Ee of e.explicitOrderBy)e.Te.push(Ee),t.add(Ee.field.canonicalString());const _e=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(xe){let Pe=new SortedSet(FieldPath$1.comparator);return xe.filters.forEach(Re=>{Re.getFlattenedFilters().forEach(ke=>{ke.isInequality()&&(Pe=Pe.add(ke.field))})}),Pe})(e).forEach(Ee=>{t.has(Ee.canonicalString())||Ee.isKeyField()||e.Te.push(new OrderBy(Ee,_e))}),t.has(FieldPath$1.keyField().canonicalString())||e.Te.push(new OrderBy(FieldPath$1.keyField(),_e))}return e.Te}function __PRIVATE_queryToTarget(r){const e=__PRIVATE_debugCast(r);return e.Ie||(e.Ie=__PRIVATE__queryToTarget(e,__PRIVATE_queryNormalizedOrderBy(r))),e.Ie}function __PRIVATE__queryToTarget(r,e){if(r.limitType==="F")return __PRIVATE_newTarget(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(Te=>{const Ee=Te.dir==="desc"?"asc":"desc";return new OrderBy(Te.field,Ee)});const t=r.endAt?new Bound(r.endAt.position,r.endAt.inclusive):null,_e=r.startAt?new Bound(r.startAt.position,r.startAt.inclusive):null;return __PRIVATE_newTarget(r.path,r.collectionGroup,e,r.filters,r.limit,t,_e)}}function __PRIVATE_queryWithAddedFilter(r,e){const t=r.filters.concat([e]);return new __PRIVATE_QueryImpl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function __PRIVATE_queryWithLimit(r,e,t){return new __PRIVATE_QueryImpl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function __PRIVATE_queryEquals(r,e){return __PRIVATE_targetEquals(__PRIVATE_queryToTarget(r),__PRIVATE_queryToTarget(e))&&r.limitType===e.limitType}function __PRIVATE_canonifyQuery(r){return`${__PRIVATE_canonifyTarget(__PRIVATE_queryToTarget(r))}|lt:${r.limitType}`}function __PRIVATE_stringifyQuery(r){return`Query(target=${function(t){let _e=t.path.canonicalString();return t.collectionGroup!==null&&(_e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(_e+=`, filters: [${t.filters.map(Te=>__PRIVATE_stringifyFilter(Te)).join(", ")}]`),__PRIVATE_isNullOrUndefined(t.limit)||(_e+=", limit: "+t.limit),t.orderBy.length>0&&(_e+=`, orderBy: [${t.orderBy.map(Te=>function(xe){return`${xe.field.canonicalString()} (${xe.dir})`}(Te)).join(", ")}]`),t.startAt&&(_e+=", startAt: ",_e+=t.startAt.inclusive?"b:":"a:",_e+=t.startAt.position.map(Te=>canonicalId(Te)).join(",")),t.endAt&&(_e+=", endAt: ",_e+=t.endAt.inclusive?"a:":"b:",_e+=t.endAt.position.map(Te=>canonicalId(Te)).join(",")),`Target(${_e})`}(__PRIVATE_queryToTarget(r))}; limitType=${r.limitType})`}function __PRIVATE_queryMatches(r,e){return e.isFoundDocument()&&function(_e,Te){const Ee=Te.key.path;return _e.collectionGroup!==null?Te.key.hasCollectionId(_e.collectionGroup)&&_e.path.isPrefixOf(Ee):DocumentKey.isDocumentKey(_e.path)?_e.path.isEqual(Ee):_e.path.isImmediateParentOf(Ee)}(r,e)&&function(_e,Te){for(const Ee of __PRIVATE_queryNormalizedOrderBy(_e))if(!Ee.field.isKeyField()&&Te.data.field(Ee.field)===null)return!1;return!0}(r,e)&&function(_e,Te){for(const Ee of _e.filters)if(!Ee.matches(Te))return!1;return!0}(r,e)&&function(_e,Te){return!(_e.startAt&&!function(xe,Pe,Re){const ke=__PRIVATE_boundCompareToDocument(xe,Pe,Re);return xe.inclusive?ke<=0:ke<0}(_e.startAt,__PRIVATE_queryNormalizedOrderBy(_e),Te)||_e.endAt&&!function(xe,Pe,Re){const ke=__PRIVATE_boundCompareToDocument(xe,Pe,Re);return xe.inclusive?ke>=0:ke>0}(_e.endAt,__PRIVATE_queryNormalizedOrderBy(_e),Te))}(r,e)}function __PRIVATE_queryCollectionGroup(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function __PRIVATE_newQueryComparator(r){return(e,t)=>{let _e=!1;for(const Te of __PRIVATE_queryNormalizedOrderBy(r)){const Ee=__PRIVATE_compareDocs(Te,e,t);if(Ee!==0)return Ee;_e=_e||Te.field.isKeyField()}return 0}}function __PRIVATE_compareDocs(r,e,t){const _e=r.field.isKeyField()?DocumentKey.comparator(e.key,t.key):function(Ee,xe,Pe){const Re=xe.data.field(Ee),ke=Pe.data.field(Ee);return Re!==null&&ke!==null?__PRIVATE_valueCompare(Re,ke):fail(42886)}(r.field,e,t);switch(r.dir){case"asc":return _e;case"desc":return-1*_e;default:return fail(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectMap{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),_e=this.inner[t];if(_e!==void 0){for(const[Te,Ee]of _e)if(this.equalsFn(Te,e))return Ee}}has(e){return this.get(e)!==void 0}set(e,t){const _e=this.mapKeyFn(e),Te=this.inner[_e];if(Te===void 0)return this.inner[_e]=[[e,t]],void this.innerSize++;for(let Ee=0;Ee<Te.length;Ee++)if(this.equalsFn(Te[Ee][0],e))return void(Te[Ee]=[e,t]);Te.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),_e=this.inner[t];if(_e===void 0)return!1;for(let Te=0;Te<_e.length;Te++)if(this.equalsFn(_e[Te][0],e))return _e.length===1?delete this.inner[t]:_e.splice(Te,1),this.innerSize--,!0;return!1}forEach(e){forEach$1(this.inner,(t,_e)=>{for(const[Te,Ee]of _e)e(Te,Ee)})}isEmpty(){return isEmpty$1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Et$1=new SortedMap(DocumentKey.comparator);function __PRIVATE_mutableDocumentMap(){return Et$1}const At$1=new SortedMap(DocumentKey.comparator);function documentMap(...r){let e=At$1;for(const t of r)e=e.insert(t.key,t);return e}function __PRIVATE_convertOverlayedDocumentMapToDocumentMap(r){let e=At$1;return r.forEach((t,_e)=>e=e.insert(t,_e.overlayedDocument)),e}function __PRIVATE_newOverlayMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newMutationMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newDocumentKeyMap(){return new ObjectMap(r=>r.toString(),(r,e)=>r.isEqual(e))}const Rt$1=new SortedMap(DocumentKey.comparator),Vt$1=new SortedSet(DocumentKey.comparator);function __PRIVATE_documentKeySet(...r){let e=Vt$1;for(const t of r)e=e.add(t);return e}const mt$1=new SortedSet(__PRIVATE_primitiveComparator);function __PRIVATE_targetIdSet(){return mt$1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_toDouble(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:__PRIVATE_isNegativeZero(e)?"-0":e}}function __PRIVATE_toInteger(r){return{integerValue:""+r}}function toNumber(r,e){return isSafeInteger(e)?__PRIVATE_toInteger(e):__PRIVATE_toDouble(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransformOperation{constructor(){this._=void 0}}function __PRIVATE_applyTransformOperationToLocalView(r,e,t){return r instanceof __PRIVATE_ServerTimestampTransform?function(Te,Ee){const xe={fields:{[ot$1]:{stringValue:st$1},[at$1]:{timestampValue:{seconds:Te.seconds,nanos:Te.nanoseconds}}}};return Ee&&__PRIVATE_isServerTimestamp(Ee)&&(Ee=__PRIVATE_getPreviousValue(Ee)),Ee&&(xe.fields[_t$1]=Ee),{mapValue:xe}}(t,e):r instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(r,e):r instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(r,e):function(Te,Ee){const xe=__PRIVATE_computeTransformOperationBaseValue(Te,Ee),Pe=asNumber$1(xe)+asNumber$1(Te.Ee);return isInteger$1(xe)&&isInteger$1(Te.Ee)?__PRIVATE_toInteger(Pe):__PRIVATE_toDouble(Te.serializer,Pe)}(r,e)}function __PRIVATE_applyTransformOperationToRemoteDocument(r,e,t){return r instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(r,e):r instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(r,e):t}function __PRIVATE_computeTransformOperationBaseValue(r,e){return r instanceof __PRIVATE_NumericIncrementTransformOperation?function(_e){return isInteger$1(_e)||function(Ee){return!!Ee&&"doubleValue"in Ee}(_e)}(e)?e:{integerValue:0}:null}class __PRIVATE_ServerTimestampTransform extends TransformOperation{}class __PRIVATE_ArrayUnionTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayUnionTransformOperation(r,e){const t=__PRIVATE_coercedFieldValuesArray(e);for(const _e of r.elements)t.some(Te=>__PRIVATE_valueEquals(Te,_e))||t.push(_e);return{arrayValue:{values:t}}}class __PRIVATE_ArrayRemoveTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayRemoveTransformOperation(r,e){let t=__PRIVATE_coercedFieldValuesArray(e);for(const _e of r.elements)t=t.filter(Te=>!__PRIVATE_valueEquals(Te,_e));return{arrayValue:{values:t}}}class __PRIVATE_NumericIncrementTransformOperation extends TransformOperation{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function asNumber$1(r){return __PRIVATE_normalizeNumber(r.integerValue||r.doubleValue)}function __PRIVATE_coercedFieldValuesArray(r){return isArray$1(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldTransform{constructor(e,t){this.field=e,this.transform=t}}function __PRIVATE_fieldTransformEquals(r,e){return r.field.isEqual(e.field)&&function(_e,Te){return _e instanceof __PRIVATE_ArrayUnionTransformOperation&&Te instanceof __PRIVATE_ArrayUnionTransformOperation||_e instanceof __PRIVATE_ArrayRemoveTransformOperation&&Te instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_arrayEquals(_e.elements,Te.elements,__PRIVATE_valueEquals):_e instanceof __PRIVATE_NumericIncrementTransformOperation&&Te instanceof __PRIVATE_NumericIncrementTransformOperation?__PRIVATE_valueEquals(_e.Ee,Te.Ee):_e instanceof __PRIVATE_ServerTimestampTransform&&Te instanceof __PRIVATE_ServerTimestampTransform}(r.transform,e.transform)}class MutationResult{constructor(e,t){this.version=e,this.transformResults=t}}class Precondition{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Precondition}static exists(e){return new Precondition(void 0,e)}static updateTime(e){return new Precondition(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function __PRIVATE_preconditionIsValidForDocument(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Mutation{}function __PRIVATE_calculateOverlayMutation(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new __PRIVATE_DeleteMutation(r.key,Precondition.none()):new __PRIVATE_SetMutation(r.key,r.data,Precondition.none());{const t=r.data,_e=ObjectValue$1.empty();let Te=new SortedSet(FieldPath$1.comparator);for(let Ee of e.fields)if(!Te.has(Ee)){let xe=t.field(Ee);xe===null&&Ee.length>1&&(Ee=Ee.popLast(),xe=t.field(Ee)),xe===null?_e.delete(Ee):_e.set(Ee,xe),Te=Te.add(Ee)}return new __PRIVATE_PatchMutation(r.key,_e,new FieldMask(Te.toArray()),Precondition.none())}}function __PRIVATE_mutationApplyToRemoteDocument(r,e,t){r instanceof __PRIVATE_SetMutation?function(Te,Ee,xe){const Pe=Te.value.clone(),Re=__PRIVATE_serverTransformResults(Te.fieldTransforms,Ee,xe.transformResults);Pe.setAll(Re),Ee.convertToFoundDocument(xe.version,Pe).setHasCommittedMutations()}(r,e,t):r instanceof __PRIVATE_PatchMutation?function(Te,Ee,xe){if(!__PRIVATE_preconditionIsValidForDocument(Te.precondition,Ee))return void Ee.convertToUnknownDocument(xe.version);const Pe=__PRIVATE_serverTransformResults(Te.fieldTransforms,Ee,xe.transformResults),Re=Ee.data;Re.setAll(__PRIVATE_getPatch(Te)),Re.setAll(Pe),Ee.convertToFoundDocument(xe.version,Re).setHasCommittedMutations()}(r,e,t):function(Te,Ee,xe){Ee.convertToNoDocument(xe.version).setHasCommittedMutations()}(0,e,t)}function __PRIVATE_mutationApplyToLocalView(r,e,t,_e){return r instanceof __PRIVATE_SetMutation?function(Ee,xe,Pe,Re){if(!__PRIVATE_preconditionIsValidForDocument(Ee.precondition,xe))return Pe;const ke=Ee.value.clone(),Ce=__PRIVATE_localTransformResults(Ee.fieldTransforms,Re,xe);return ke.setAll(Ce),xe.convertToFoundDocument(xe.version,ke).setHasLocalMutations(),null}(r,e,t,_e):r instanceof __PRIVATE_PatchMutation?function(Ee,xe,Pe,Re){if(!__PRIVATE_preconditionIsValidForDocument(Ee.precondition,xe))return Pe;const ke=__PRIVATE_localTransformResults(Ee.fieldTransforms,Re,xe),Ce=xe.data;return Ce.setAll(__PRIVATE_getPatch(Ee)),Ce.setAll(ke),xe.convertToFoundDocument(xe.version,Ce).setHasLocalMutations(),Pe===null?null:Pe.unionWith(Ee.fieldMask.fields).unionWith(Ee.fieldTransforms.map(Se=>Se.field))}(r,e,t,_e):function(Ee,xe,Pe){return __PRIVATE_preconditionIsValidForDocument(Ee.precondition,xe)?(xe.convertToNoDocument(xe.version).setHasLocalMutations(),null):Pe}(r,e,t)}function __PRIVATE_mutationExtractBaseValue(r,e){let t=null;for(const _e of r.fieldTransforms){const Te=e.data.field(_e.field),Ee=__PRIVATE_computeTransformOperationBaseValue(_e.transform,Te||null);Ee!=null&&(t===null&&(t=ObjectValue$1.empty()),t.set(_e.field,Ee))}return t||null}function __PRIVATE_mutationEquals(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(_e,Te){return _e===void 0&&Te===void 0||!(!_e||!Te)&&__PRIVATE_arrayEquals(_e,Te,(Ee,xe)=>__PRIVATE_fieldTransformEquals(Ee,xe))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class __PRIVATE_SetMutation extends Mutation{constructor(e,t,_e,Te=[]){super(),this.key=e,this.value=t,this.precondition=_e,this.fieldTransforms=Te,this.type=0}getFieldMask(){return null}}class __PRIVATE_PatchMutation extends Mutation{constructor(e,t,_e,Te,Ee=[]){super(),this.key=e,this.data=t,this.fieldMask=_e,this.precondition=Te,this.fieldTransforms=Ee,this.type=1}getFieldMask(){return this.fieldMask}}function __PRIVATE_getPatch(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const _e=r.data.field(t);e.set(t,_e)}}),e}function __PRIVATE_serverTransformResults(r,e,t){const _e=new Map;__PRIVATE_hardAssert(r.length===t.length,32656,{Ae:t.length,Re:r.length});for(let Te=0;Te<t.length;Te++){const Ee=r[Te],xe=Ee.transform,Pe=e.data.field(Ee.field);_e.set(Ee.field,__PRIVATE_applyTransformOperationToRemoteDocument(xe,Pe,t[Te]))}return _e}function __PRIVATE_localTransformResults(r,e,t){const _e=new Map;for(const Te of r){const Ee=Te.transform,xe=t.data.field(Te.field);_e.set(Te.field,__PRIVATE_applyTransformOperationToLocalView(Ee,xe,e))}return _e}class __PRIVATE_DeleteMutation extends Mutation{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class __PRIVATE_VerifyMutation extends Mutation{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutationBatch{constructor(e,t,_e,Te){this.batchId=e,this.localWriteTime=t,this.baseMutations=_e,this.mutations=Te}applyToRemoteDocument(e,t){const _e=t.mutationResults;for(let Te=0;Te<this.mutations.length;Te++){const Ee=this.mutations[Te];Ee.key.isEqual(e.key)&&__PRIVATE_mutationApplyToRemoteDocument(Ee,e,_e[Te])}}applyToLocalView(e,t){for(const _e of this.baseMutations)_e.key.isEqual(e.key)&&(t=__PRIVATE_mutationApplyToLocalView(_e,e,t,this.localWriteTime));for(const _e of this.mutations)_e.key.isEqual(e.key)&&(t=__PRIVATE_mutationApplyToLocalView(_e,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const _e=__PRIVATE_newMutationMap();return this.mutations.forEach(Te=>{const Ee=e.get(Te.key),xe=Ee.overlayedDocument;let Pe=this.applyToLocalView(xe,Ee.mutatedFields);Pe=t.has(Te.key)?null:Pe;const Re=__PRIVATE_calculateOverlayMutation(xe,Pe);Re!==null&&_e.set(Te.key,Re),xe.isValidDocument()||xe.convertToNoDocument(SnapshotVersion.min())}),_e}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),__PRIVATE_documentKeySet())}isEqual(e){return this.batchId===e.batchId&&__PRIVATE_arrayEquals(this.mutations,e.mutations,(t,_e)=>__PRIVATE_mutationEquals(t,_e))&&__PRIVATE_arrayEquals(this.baseMutations,e.baseMutations,(t,_e)=>__PRIVATE_mutationEquals(t,_e))}}class MutationBatchResult{constructor(e,t,_e,Te){this.batch=e,this.commitVersion=t,this.mutationResults=_e,this.docVersions=Te}static from(e,t,_e){__PRIVATE_hardAssert(e.mutations.length===_e.length,58842,{Ve:e.mutations.length,me:_e.length});let Te=function(){return Rt$1}();const Ee=e.mutations;for(let xe=0;xe<Ee.length;xe++)Te=Te.insert(Ee[xe].key,_e[xe].version);return new MutationBatchResult(e,t,_e,Te)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Overlay{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistenceFilter{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft$1,gt$1;function __PRIVATE_isPermanentError(r){switch(r){case N$1.OK:return fail(64938);case N$1.CANCELLED:case N$1.UNKNOWN:case N$1.DEADLINE_EXCEEDED:case N$1.RESOURCE_EXHAUSTED:case N$1.INTERNAL:case N$1.UNAVAILABLE:case N$1.UNAUTHENTICATED:return!1;case N$1.INVALID_ARGUMENT:case N$1.NOT_FOUND:case N$1.ALREADY_EXISTS:case N$1.PERMISSION_DENIED:case N$1.FAILED_PRECONDITION:case N$1.ABORTED:case N$1.OUT_OF_RANGE:case N$1.UNIMPLEMENTED:case N$1.DATA_LOSS:return!0;default:return fail(15467,{code:r})}}function __PRIVATE_mapCodeFromRpcCode(r){if(r===void 0)return __PRIVATE_logError("GRPC error has no .code"),N$1.UNKNOWN;switch(r){case ft$1.OK:return N$1.OK;case ft$1.CANCELLED:return N$1.CANCELLED;case ft$1.UNKNOWN:return N$1.UNKNOWN;case ft$1.DEADLINE_EXCEEDED:return N$1.DEADLINE_EXCEEDED;case ft$1.RESOURCE_EXHAUSTED:return N$1.RESOURCE_EXHAUSTED;case ft$1.INTERNAL:return N$1.INTERNAL;case ft$1.UNAVAILABLE:return N$1.UNAVAILABLE;case ft$1.UNAUTHENTICATED:return N$1.UNAUTHENTICATED;case ft$1.INVALID_ARGUMENT:return N$1.INVALID_ARGUMENT;case ft$1.NOT_FOUND:return N$1.NOT_FOUND;case ft$1.ALREADY_EXISTS:return N$1.ALREADY_EXISTS;case ft$1.PERMISSION_DENIED:return N$1.PERMISSION_DENIED;case ft$1.FAILED_PRECONDITION:return N$1.FAILED_PRECONDITION;case ft$1.ABORTED:return N$1.ABORTED;case ft$1.OUT_OF_RANGE:return N$1.OUT_OF_RANGE;case ft$1.UNIMPLEMENTED:return N$1.UNIMPLEMENTED;case ft$1.DATA_LOSS:return N$1.DATA_LOSS;default:return fail(39323,{code:r})}}(gt$1=ft$1||(ft$1={}))[gt$1.OK=0]="OK",gt$1[gt$1.CANCELLED=1]="CANCELLED",gt$1[gt$1.UNKNOWN=2]="UNKNOWN",gt$1[gt$1.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt$1[gt$1.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt$1[gt$1.NOT_FOUND=5]="NOT_FOUND",gt$1[gt$1.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt$1[gt$1.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt$1[gt$1.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt$1[gt$1.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt$1[gt$1.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt$1[gt$1.ABORTED=10]="ABORTED",gt$1[gt$1.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt$1[gt$1.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt$1[gt$1.INTERNAL=13]="INTERNAL",gt$1[gt$1.UNAVAILABLE=14]="UNAVAILABLE",gt$1[gt$1.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yt$1=new Integer([4294967295,4294967295],0);function __PRIVATE_getMd5HashValue(r){const e=__PRIVATE_newTextEncoder().encode(r),t=new Md5;return t.update(e),new Uint8Array(t.digest())}function __PRIVATE_get64BitUints(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),_e=e.getUint32(4,!0),Te=e.getUint32(8,!0),Ee=e.getUint32(12,!0);return[new Integer([t,_e],0),new Integer([Te,Ee],0)]}class BloomFilter{constructor(e,t,_e){if(this.bitmap=e,this.padding=t,this.hashCount=_e,t<0||t>=8)throw new __PRIVATE_BloomFilterError(`Invalid padding: ${t}`);if(_e<0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${_e}`);if(e.length>0&&this.hashCount===0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${_e}`);if(e.length===0&&t!==0)throw new __PRIVATE_BloomFilterError(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Integer.fromNumber(this.fe)}pe(e,t,_e){let Te=e.add(t.multiply(Integer.fromNumber(_e)));return Te.compare(yt$1)===1&&(Te=new Integer([Te.getBits(0),Te.getBits(1)],0)),Te.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=__PRIVATE_getMd5HashValue(e),[_e,Te]=__PRIVATE_get64BitUints(t);for(let Ee=0;Ee<this.hashCount;Ee++){const xe=this.pe(_e,Te,Ee);if(!this.ye(xe))return!1}return!0}static create(e,t,_e){const Te=e%8==0?0:8-e%8,Ee=new Uint8Array(Math.ceil(e/8)),xe=new BloomFilter(Ee,Te,t);return _e.forEach(Pe=>xe.insert(Pe)),xe}insert(e){if(this.fe===0)return;const t=__PRIVATE_getMd5HashValue(e),[_e,Te]=__PRIVATE_get64BitUints(t);for(let Ee=0;Ee<this.hashCount;Ee++){const xe=this.pe(_e,Te,Ee);this.we(xe)}}we(e){const t=Math.floor(e/8),_e=e%8;this.bitmap[t]|=1<<_e}}class __PRIVATE_BloomFilterError extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteEvent{constructor(e,t,_e,Te,Ee){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=_e,this.documentUpdates=Te,this.resolvedLimboDocuments=Ee}static createSynthesizedRemoteEventForCurrentChange(e,t,_e){const Te=new Map;return Te.set(e,TargetChange.createSynthesizedTargetChangeForCurrentChange(e,t,_e)),new RemoteEvent(SnapshotVersion.min(),Te,new SortedMap(__PRIVATE_primitiveComparator),__PRIVATE_mutableDocumentMap(),__PRIVATE_documentKeySet())}}class TargetChange{constructor(e,t,_e,Te,Ee){this.resumeToken=e,this.current=t,this.addedDocuments=_e,this.modifiedDocuments=Te,this.removedDocuments=Ee}static createSynthesizedTargetChangeForCurrentChange(e,t,_e){return new TargetChange(_e,t,__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentWatchChange{constructor(e,t,_e,Te){this.Se=e,this.removedTargetIds=t,this.key=_e,this.be=Te}}class __PRIVATE_ExistenceFilterChange{constructor(e,t){this.targetId=e,this.De=t}}class __PRIVATE_WatchTargetChange{constructor(e,t,_e=ByteString.EMPTY_BYTE_STRING,Te=null){this.state=e,this.targetIds=t,this.resumeToken=_e,this.cause=Te}}class __PRIVATE_TargetState{constructor(){this.ve=0,this.Ce=__PRIVATE_snapshotChangesMap(),this.Fe=ByteString.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=__PRIVATE_documentKeySet(),t=__PRIVATE_documentKeySet(),_e=__PRIVATE_documentKeySet();return this.Ce.forEach((Te,Ee)=>{switch(Ee){case 0:e=e.add(Te);break;case 2:t=t.add(Te);break;case 1:_e=_e.add(Te);break;default:fail(38017,{changeType:Ee})}}),new TargetChange(this.Fe,this.Me,e,t,_e)}ke(){this.xe=!1,this.Ce=__PRIVATE_snapshotChangesMap()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,__PRIVATE_hardAssert(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class __PRIVATE_WatchChangeAggregator{constructor(e){this.We=e,this.Ge=new Map,this.ze=__PRIVATE_mutableDocumentMap(),this.je=__PRIVATE_documentTargetMap(),this.Je=__PRIVATE_documentTargetMap(),this.He=new SortedMap(__PRIVATE_primitiveComparator)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const _e=this.tt(t);switch(e.state){case 0:this.nt(t)&&_e.Be(e.resumeToken);break;case 1:_e.Ue(),_e.Oe||_e.ke(),_e.Be(e.resumeToken);break;case 2:_e.Ue(),_e.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(_e.Ke(),_e.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),_e.Be(e.resumeToken));break;default:fail(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((_e,Te)=>{this.nt(Te)&&t(Te)})}it(e){const t=e.targetId,_e=e.De.count,Te=this.st(t);if(Te){const Ee=Te.target;if(__PRIVATE_targetIsDocumentTarget(Ee))if(_e===0){const xe=new DocumentKey(Ee.path);this.Xe(t,xe,MutableDocument.newNoDocument(xe,SnapshotVersion.min()))}else __PRIVATE_hardAssert(_e===1,20013,{expectedCount:_e});else{const xe=this.ot(t);if(xe!==_e){const Pe=this._t(e),Re=Pe?this.ut(Pe,e,xe):1;if(Re!==0){this.rt(t);const ke=Re===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,ke)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:_e="",padding:Te=0},hashCount:Ee=0}=t;let xe,Pe;try{xe=__PRIVATE_normalizeByteString(_e).toUint8Array()}catch(Re){if(Re instanceof __PRIVATE_Base64DecodeError)return __PRIVATE_logWarn("Decoding the base64 bloom filter in existence filter failed ("+Re.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw Re}try{Pe=new BloomFilter(xe,Te,Ee)}catch(Re){return __PRIVATE_logWarn(Re instanceof __PRIVATE_BloomFilterError?"BloomFilter error: ":"Applying bloom filter failed: ",Re),null}return Pe.fe===0?null:Pe}ut(e,t,_e){return t.De.count===_e-this.ht(e,t.targetId)?0:2}ht(e,t){const _e=this.We.getRemoteKeysForTarget(t);let Te=0;return _e.forEach(Ee=>{const xe=this.We.lt(),Pe=`projects/${xe.projectId}/databases/${xe.database}/documents/${Ee.path.canonicalString()}`;e.mightContain(Pe)||(this.Xe(t,Ee,null),Te++)}),Te}Pt(e){const t=new Map;this.Ge.forEach((Ee,xe)=>{const Pe=this.st(xe);if(Pe){if(Ee.current&&__PRIVATE_targetIsDocumentTarget(Pe.target)){const Re=new DocumentKey(Pe.target.path);this.Tt(Re).has(xe)||this.It(xe,Re)||this.Xe(xe,Re,MutableDocument.newNoDocument(Re,e))}Ee.Ne&&(t.set(xe,Ee.Le()),Ee.ke())}});let _e=__PRIVATE_documentKeySet();this.Je.forEach((Ee,xe)=>{let Pe=!0;xe.forEachWhile(Re=>{const ke=this.st(Re);return!ke||ke.purpose==="TargetPurposeLimboResolution"||(Pe=!1,!1)}),Pe&&(_e=_e.add(Ee))}),this.ze.forEach((Ee,xe)=>xe.setReadTime(e));const Te=new RemoteEvent(e,t,this.He,this.ze,_e);return this.ze=__PRIVATE_mutableDocumentMap(),this.je=__PRIVATE_documentTargetMap(),this.Je=__PRIVATE_documentTargetMap(),this.He=new SortedMap(__PRIVATE_primitiveComparator),Te}Ze(e,t){if(!this.nt(e))return;const _e=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,_e),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,_e){if(!this.nt(e))return;const Te=this.tt(e);this.It(e,t)?Te.qe(t,1):Te.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),_e&&(this.ze=this.ze.insert(t,_e))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new __PRIVATE_TargetState,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new SortedSet(__PRIVATE_primitiveComparator),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new SortedSet(__PRIVATE_primitiveComparator),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||__PRIVATE_logDebug("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new __PRIVATE_TargetState),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function __PRIVATE_documentTargetMap(){return new SortedMap(DocumentKey.comparator)}function __PRIVATE_snapshotChangesMap(){return new SortedMap(DocumentKey.comparator)}const wt$1={asc:"ASCENDING",desc:"DESCENDING"},St={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bt$1={and:"AND",or:"OR"};class JsonProtoSerializer{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function __PRIVATE_toInt32Proto(r,e){return r.useProto3Json||__PRIVATE_isNullOrUndefined(e)?e:{value:e}}function toTimestamp(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function __PRIVATE_toBytes(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function __PRIVATE_toVersion(r,e){return toTimestamp(r,e.toTimestamp())}function __PRIVATE_fromVersion(r){return __PRIVATE_hardAssert(!!r,49232),SnapshotVersion.fromTimestamp(function(t){const _e=__PRIVATE_normalizeTimestamp(t);return new Timestamp(_e.seconds,_e.nanos)}(r))}function __PRIVATE_toResourceName(r,e){return __PRIVATE_toResourcePath(r,e).canonicalString()}function __PRIVATE_toResourcePath(r,e){const t=function(Te){return new ResourcePath(["projects",Te.projectId,"databases",Te.database])}(r).child("documents");return e===void 0?t:t.child(e)}function __PRIVATE_fromResourceName(r){const e=ResourcePath.fromString(r);return __PRIVATE_hardAssert(__PRIVATE_isValidResourceName(e),10190,{key:e.toString()}),e}function __PRIVATE_toName(r,e){return __PRIVATE_toResourceName(r.databaseId,e.path)}function fromName(r,e){const t=__PRIVATE_fromResourceName(e);if(t.get(1)!==r.databaseId.projectId)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new DocumentKey(__PRIVATE_extractLocalPathFromResourceName(t))}function __PRIVATE_toQueryPath(r,e){return __PRIVATE_toResourceName(r.databaseId,e)}function __PRIVATE_fromQueryPath(r){const e=__PRIVATE_fromResourceName(r);return e.length===4?ResourcePath.emptyPath():__PRIVATE_extractLocalPathFromResourceName(e)}function __PRIVATE_getEncodedDatabaseId(r){return new ResourcePath(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function __PRIVATE_extractLocalPathFromResourceName(r){return __PRIVATE_hardAssert(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function __PRIVATE_toMutationDocument(r,e,t){return{name:__PRIVATE_toName(r,e),fields:t.value.mapValue.fields}}function __PRIVATE_fromWatchChange(r,e){let t;if("targetChange"in e){e.targetChange;const _e=function(ke){return ke==="NO_CHANGE"?0:ke==="ADD"?1:ke==="REMOVE"?2:ke==="CURRENT"?3:ke==="RESET"?4:fail(39313,{state:ke})}(e.targetChange.targetChangeType||"NO_CHANGE"),Te=e.targetChange.targetIds||[],Ee=function(ke,Ce){return ke.useProto3Json?(__PRIVATE_hardAssert(Ce===void 0||typeof Ce=="string",58123),ByteString.fromBase64String(Ce||"")):(__PRIVATE_hardAssert(Ce===void 0||Ce instanceof Buffer||Ce instanceof Uint8Array,16193),ByteString.fromUint8Array(Ce||new Uint8Array))}(r,e.targetChange.resumeToken),xe=e.targetChange.cause,Pe=xe&&function(ke){const Ce=ke.code===void 0?N$1.UNKNOWN:__PRIVATE_mapCodeFromRpcCode(ke.code);return new FirestoreError(Ce,ke.message||"")}(xe);t=new __PRIVATE_WatchTargetChange(_e,Te,Ee,Pe||null)}else if("documentChange"in e){e.documentChange;const _e=e.documentChange;_e.document,_e.document.name,_e.document.updateTime;const Te=fromName(r,_e.document.name),Ee=__PRIVATE_fromVersion(_e.document.updateTime),xe=_e.document.createTime?__PRIVATE_fromVersion(_e.document.createTime):SnapshotVersion.min(),Pe=new ObjectValue$1({mapValue:{fields:_e.document.fields}}),Re=MutableDocument.newFoundDocument(Te,Ee,xe,Pe),ke=_e.targetIds||[],Ce=_e.removedTargetIds||[];t=new __PRIVATE_DocumentWatchChange(ke,Ce,Re.key,Re)}else if("documentDelete"in e){e.documentDelete;const _e=e.documentDelete;_e.document;const Te=fromName(r,_e.document),Ee=_e.readTime?__PRIVATE_fromVersion(_e.readTime):SnapshotVersion.min(),xe=MutableDocument.newNoDocument(Te,Ee),Pe=_e.removedTargetIds||[];t=new __PRIVATE_DocumentWatchChange([],Pe,xe.key,xe)}else if("documentRemove"in e){e.documentRemove;const _e=e.documentRemove;_e.document;const Te=fromName(r,_e.document),Ee=_e.removedTargetIds||[];t=new __PRIVATE_DocumentWatchChange([],Ee,Te,null)}else{if(!("filter"in e))return fail(11601,{At:e});{e.filter;const _e=e.filter;_e.targetId;const{count:Te=0,unchangedNames:Ee}=_e,xe=new ExistenceFilter(Te,Ee),Pe=_e.targetId;t=new __PRIVATE_ExistenceFilterChange(Pe,xe)}}return t}function toMutation(r,e){let t;if(e instanceof __PRIVATE_SetMutation)t={update:__PRIVATE_toMutationDocument(r,e.key,e.value)};else if(e instanceof __PRIVATE_DeleteMutation)t={delete:__PRIVATE_toName(r,e.key)};else if(e instanceof __PRIVATE_PatchMutation)t={update:__PRIVATE_toMutationDocument(r,e.key,e.data),updateMask:__PRIVATE_toDocumentMask(e.fieldMask)};else{if(!(e instanceof __PRIVATE_VerifyMutation))return fail(16599,{Rt:e.type});t={verify:__PRIVATE_toName(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(_e=>function(Ee,xe){const Pe=xe.transform;if(Pe instanceof __PRIVATE_ServerTimestampTransform)return{fieldPath:xe.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(Pe instanceof __PRIVATE_ArrayUnionTransformOperation)return{fieldPath:xe.field.canonicalString(),appendMissingElements:{values:Pe.elements}};if(Pe instanceof __PRIVATE_ArrayRemoveTransformOperation)return{fieldPath:xe.field.canonicalString(),removeAllFromArray:{values:Pe.elements}};if(Pe instanceof __PRIVATE_NumericIncrementTransformOperation)return{fieldPath:xe.field.canonicalString(),increment:Pe.Ee};throw fail(20930,{transform:xe.transform})}(0,_e))),e.precondition.isNone||(t.currentDocument=function(Te,Ee){return Ee.updateTime!==void 0?{updateTime:__PRIVATE_toVersion(Te,Ee.updateTime)}:Ee.exists!==void 0?{exists:Ee.exists}:fail(27497)}(r,e.precondition)),t}function __PRIVATE_fromWriteResults(r,e){return r&&r.length>0?(__PRIVATE_hardAssert(e!==void 0,14353),r.map(t=>function(Te,Ee){let xe=Te.updateTime?__PRIVATE_fromVersion(Te.updateTime):__PRIVATE_fromVersion(Ee);return xe.isEqual(SnapshotVersion.min())&&(xe=__PRIVATE_fromVersion(Ee)),new MutationResult(xe,Te.transformResults||[])}(t,e))):[]}function __PRIVATE_toDocumentsTarget(r,e){return{documents:[__PRIVATE_toQueryPath(r,e.path)]}}function __PRIVATE_toQueryTarget(r,e){const t={structuredQuery:{}},_e=e.path;let Te;e.collectionGroup!==null?(Te=_e,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(Te=_e.popLast(),t.structuredQuery.from=[{collectionId:_e.lastSegment()}]),t.parent=__PRIVATE_toQueryPath(r,Te);const Ee=function(ke){if(ke.length!==0)return __PRIVATE_toFilter(CompositeFilter.create(ke,"and"))}(e.filters);Ee&&(t.structuredQuery.where=Ee);const xe=function(ke){if(ke.length!==0)return ke.map(Ce=>function(Ae){return{field:__PRIVATE_toFieldPathReference(Ae.field),direction:__PRIVATE_toDirection(Ae.dir)}}(Ce))}(e.orderBy);xe&&(t.structuredQuery.orderBy=xe);const Pe=__PRIVATE_toInt32Proto(r,e.limit);return Pe!==null&&(t.structuredQuery.limit=Pe),e.startAt&&(t.structuredQuery.startAt=function(ke){return{before:ke.inclusive,values:ke.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(ke){return{before:!ke.inclusive,values:ke.position}}(e.endAt)),{Vt:t,parent:Te}}function __PRIVATE_convertQueryTargetToQuery(r){let e=__PRIVATE_fromQueryPath(r.parent);const t=r.structuredQuery,_e=t.from?t.from.length:0;let Te=null;if(_e>0){__PRIVATE_hardAssert(_e===1,65062);const Ce=t.from[0];Ce.allDescendants?Te=Ce.collectionId:e=e.child(Ce.collectionId)}let Ee=[];t.where&&(Ee=function(Se){const Ae=__PRIVATE_fromFilter(Se);return Ae instanceof CompositeFilter&&__PRIVATE_compositeFilterIsFlatConjunction(Ae)?Ae.getFilters():[Ae]}(t.where));let xe=[];t.orderBy&&(xe=function(Se){return Se.map(Ae=>function(Me){return new OrderBy(__PRIVATE_fromFieldPathReference(Me.field),function(Ve){switch(Ve){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Me.direction))}(Ae))}(t.orderBy));let Pe=null;t.limit&&(Pe=function(Se){let Ae;return Ae=typeof Se=="object"?Se.value:Se,__PRIVATE_isNullOrUndefined(Ae)?null:Ae}(t.limit));let Re=null;t.startAt&&(Re=function(Se){const Ae=!!Se.before,Ie=Se.values||[];return new Bound(Ie,Ae)}(t.startAt));let ke=null;return t.endAt&&(ke=function(Se){const Ae=!Se.before,Ie=Se.values||[];return new Bound(Ie,Ae)}(t.endAt)),__PRIVATE_newQuery(e,Te,xe,Ee,Pe,"F",Re,ke)}function __PRIVATE_toListenRequestLabels(r,e){const t=function(Te){switch(Te){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fail(28987,{purpose:Te})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function __PRIVATE_fromFilter(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const _e=__PRIVATE_fromFieldPathReference(t.unaryFilter.field);return FieldFilter.create(_e,"==",{doubleValue:NaN});case"IS_NULL":const Te=__PRIVATE_fromFieldPathReference(t.unaryFilter.field);return FieldFilter.create(Te,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const Ee=__PRIVATE_fromFieldPathReference(t.unaryFilter.field);return FieldFilter.create(Ee,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const xe=__PRIVATE_fromFieldPathReference(t.unaryFilter.field);return FieldFilter.create(xe,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fail(61313);default:return fail(60726)}}(r):r.fieldFilter!==void 0?function(t){return FieldFilter.create(__PRIVATE_fromFieldPathReference(t.fieldFilter.field),function(Te){switch(Te){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fail(58110);default:return fail(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return CompositeFilter.create(t.compositeFilter.filters.map(_e=>__PRIVATE_fromFilter(_e)),function(Te){switch(Te){case"AND":return"and";case"OR":return"or";default:return fail(1026)}}(t.compositeFilter.op))}(r):fail(30097,{filter:r})}function __PRIVATE_toDirection(r){return wt$1[r]}function __PRIVATE_toOperatorName(r){return St[r]}function __PRIVATE_toCompositeOperatorName(r){return bt$1[r]}function __PRIVATE_toFieldPathReference(r){return{fieldPath:r.canonicalString()}}function __PRIVATE_fromFieldPathReference(r){return FieldPath$1.fromServerFormat(r.fieldPath)}function __PRIVATE_toFilter(r){return r instanceof FieldFilter?function(t){if(t.op==="=="){if(__PRIVATE_isNanValue(t.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(t.field),op:"IS_NAN"}};if(__PRIVATE_isNullValue(t.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(__PRIVATE_isNanValue(t.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(t.field),op:"IS_NOT_NAN"}};if(__PRIVATE_isNullValue(t.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:__PRIVATE_toFieldPathReference(t.field),op:__PRIVATE_toOperatorName(t.op),value:t.value}}}(r):r instanceof CompositeFilter?function(t){const _e=t.getFilters().map(Te=>__PRIVATE_toFilter(Te));return _e.length===1?_e[0]:{compositeFilter:{op:__PRIVATE_toCompositeOperatorName(t.op),filters:_e}}}(r):fail(54877,{filter:r})}function __PRIVATE_toDocumentMask(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function __PRIVATE_isValidResourceName(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TargetData{constructor(e,t,_e,Te,Ee=SnapshotVersion.min(),xe=SnapshotVersion.min(),Pe=ByteString.EMPTY_BYTE_STRING,Re=null){this.target=e,this.targetId=t,this.purpose=_e,this.sequenceNumber=Te,this.snapshotVersion=Ee,this.lastLimboFreeSnapshotVersion=xe,this.resumeToken=Pe,this.expectedCount=Re}withSequenceNumber(e){return new TargetData(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalSerializer{constructor(e){this.gt=e}}function __PRIVATE_fromBundledQuery(r){const e=__PRIVATE_convertQueryTargetToQuery({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?__PRIVATE_queryWithLimit(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryIndexManager{constructor(){this.Dn=new __PRIVATE_MemoryCollectionParentIndex}addToCollectionParentIndex(e,t){return this.Dn.add(t),PersistencePromise.resolve()}getCollectionParents(e,t){return PersistencePromise.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return PersistencePromise.resolve()}deleteFieldIndex(e,t){return PersistencePromise.resolve()}deleteAllFieldIndexes(e){return PersistencePromise.resolve()}createTargetIndexes(e,t){return PersistencePromise.resolve()}getDocumentsMatchingTarget(e,t){return PersistencePromise.resolve(null)}getIndexType(e,t){return PersistencePromise.resolve(0)}getFieldIndexes(e,t){return PersistencePromise.resolve([])}getNextCollectionGroupToUpdate(e){return PersistencePromise.resolve(null)}getMinOffset(e,t){return PersistencePromise.resolve(IndexOffset.min())}getMinOffsetFromCollectionGroup(e,t){return PersistencePromise.resolve(IndexOffset.min())}updateCollectionGroup(e,t,_e){return PersistencePromise.resolve()}updateIndexEntries(e,t){return PersistencePromise.resolve()}}class __PRIVATE_MemoryCollectionParentIndex{constructor(){this.index={}}add(e){const t=e.lastSegment(),_e=e.popLast(),Te=this.index[t]||new SortedSet(ResourcePath.comparator),Ee=!Te.has(_e);return this.index[t]=Te.add(_e),Ee}has(e){const t=e.lastSegment(),_e=e.popLast(),Te=this.index[t];return Te&&Te.has(_e)}getEntries(e){return(this.index[e]||new SortedSet(ResourcePath.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft$1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Mt$1=41943040;class LruParams{static withCacheSize(e){return new LruParams(e,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,_e){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=_e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */LruParams.DEFAULT_COLLECTION_PERCENTILE=10,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,LruParams.DEFAULT=new LruParams(Mt$1,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),LruParams.DISABLED=new LruParams(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetIdGenerator{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new __PRIVATE_TargetIdGenerator(0)}static ur(){return new __PRIVATE_TargetIdGenerator(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt$1="LruGarbageCollector",Ot$1=1048576;function __PRIVATE_bufferEntryComparator([r,e],[t,_e]){const Te=__PRIVATE_primitiveComparator(r,t);return Te===0?__PRIVATE_primitiveComparator(e,_e):Te}class __PRIVATE_RollingSequenceNumberBuffer{constructor(e){this.Tr=e,this.buffer=new SortedSet(__PRIVATE_bufferEntryComparator),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const _e=this.buffer.last();__PRIVATE_bufferEntryComparator(t,_e)<0&&(this.buffer=this.buffer.delete(_e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class __PRIVATE_LruScheduler{constructor(e,t,_e){this.garbageCollector=e,this.asyncQueue=t,this.localStore=_e,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){__PRIVATE_logDebug(xt$1,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){__PRIVATE_isIndexedDbTransactionError(t)?__PRIVATE_logDebug(xt$1,"Ignoring IndexedDB error during garbage collection: ",t):await __PRIVATE_ignoreIfPrimaryLeaseLoss(t)}await this.Rr(3e5)})}}class __PRIVATE_LruGarbageCollectorImpl{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(_e=>Math.floor(t/100*_e))}nthSequenceNumber(e,t){if(t===0)return PersistencePromise.resolve(__PRIVATE_ListenSequence.ue);const _e=new __PRIVATE_RollingSequenceNumberBuffer(t);return this.Vr.forEachTarget(e,Te=>_e.Er(Te.sequenceNumber)).next(()=>this.Vr.gr(e,Te=>_e.Er(Te))).next(()=>_e.maxValue)}removeTargets(e,t,_e){return this.Vr.removeTargets(e,t,_e)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(__PRIVATE_logDebug("LruGarbageCollector","Garbage collection skipped; disabled"),PersistencePromise.resolve(Ft$1)):this.getCacheSize(e).next(_e=>_e<this.params.cacheSizeCollectionThreshold?(__PRIVATE_logDebug("LruGarbageCollector",`Garbage collection skipped; Cache size ${_e} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ft$1):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let _e,Te,Ee,xe,Pe,Re,ke;const Ce=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Se=>(Se>this.params.maximumSequenceNumbersToCollect?(__PRIVATE_logDebug("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Se}`),Te=this.params.maximumSequenceNumbersToCollect):Te=Se,xe=Date.now(),this.nthSequenceNumber(e,Te))).next(Se=>(_e=Se,Pe=Date.now(),this.removeTargets(e,_e,t))).next(Se=>(Ee=Se,Re=Date.now(),this.removeOrphanedDocuments(e,_e))).next(Se=>(ke=Date.now(),__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${xe-Ce}ms
	Determined least recently used ${Te} in `+(Pe-xe)+`ms
	Removed ${Ee} targets in `+(Re-Pe)+`ms
	Removed ${Se} documents in `+(ke-Re)+`ms
Total Duration: ${ke-Ce}ms`),PersistencePromise.resolve({didRun:!0,sequenceNumbersCollected:Te,targetsRemoved:Ee,documentsRemoved:Se})))}}function __PRIVATE_newLruGarbageCollector(r,e){return new __PRIVATE_LruGarbageCollectorImpl(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteDocumentChangeBuffer{constructor(){this.changes=new ObjectMap(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,MutableDocument.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const _e=this.changes.get(t);return _e!==void 0?PersistencePromise.resolve(_e):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OverlayedDocument{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LocalDocumentsView{constructor(e,t,_e,Te){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=_e,this.indexManager=Te}getDocument(e,t){let _e=null;return this.documentOverlayCache.getOverlay(e,t).next(Te=>(_e=Te,this.remoteDocumentCache.getEntry(e,t))).next(Te=>(_e!==null&&__PRIVATE_mutationApplyToLocalView(_e.mutation,Te,FieldMask.empty(),Timestamp.now()),Te))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(_e=>this.getLocalViewOfDocuments(e,_e,__PRIVATE_documentKeySet()).next(()=>_e))}getLocalViewOfDocuments(e,t,_e=__PRIVATE_documentKeySet()){const Te=__PRIVATE_newOverlayMap();return this.populateOverlays(e,Te,t).next(()=>this.computeViews(e,t,Te,_e).next(Ee=>{let xe=documentMap();return Ee.forEach((Pe,Re)=>{xe=xe.insert(Pe,Re.overlayedDocument)}),xe}))}getOverlayedDocuments(e,t){const _e=__PRIVATE_newOverlayMap();return this.populateOverlays(e,_e,t).next(()=>this.computeViews(e,t,_e,__PRIVATE_documentKeySet()))}populateOverlays(e,t,_e){const Te=[];return _e.forEach(Ee=>{t.has(Ee)||Te.push(Ee)}),this.documentOverlayCache.getOverlays(e,Te).next(Ee=>{Ee.forEach((xe,Pe)=>{t.set(xe,Pe)})})}computeViews(e,t,_e,Te){let Ee=__PRIVATE_mutableDocumentMap();const xe=__PRIVATE_newDocumentKeyMap(),Pe=function(){return __PRIVATE_newDocumentKeyMap()}();return t.forEach((Re,ke)=>{const Ce=_e.get(ke.key);Te.has(ke.key)&&(Ce===void 0||Ce.mutation instanceof __PRIVATE_PatchMutation)?Ee=Ee.insert(ke.key,ke):Ce!==void 0?(xe.set(ke.key,Ce.mutation.getFieldMask()),__PRIVATE_mutationApplyToLocalView(Ce.mutation,ke,Ce.mutation.getFieldMask(),Timestamp.now())):xe.set(ke.key,FieldMask.empty())}),this.recalculateAndSaveOverlays(e,Ee).next(Re=>(Re.forEach((ke,Ce)=>xe.set(ke,Ce)),t.forEach((ke,Ce)=>{var Se;return Pe.set(ke,new OverlayedDocument(Ce,(Se=xe.get(ke))!==null&&Se!==void 0?Se:null))}),Pe))}recalculateAndSaveOverlays(e,t){const _e=__PRIVATE_newDocumentKeyMap();let Te=new SortedMap((xe,Pe)=>xe-Pe),Ee=__PRIVATE_documentKeySet();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(xe=>{for(const Pe of xe)Pe.keys().forEach(Re=>{const ke=t.get(Re);if(ke===null)return;let Ce=_e.get(Re)||FieldMask.empty();Ce=Pe.applyToLocalView(ke,Ce),_e.set(Re,Ce);const Se=(Te.get(Pe.batchId)||__PRIVATE_documentKeySet()).add(Re);Te=Te.insert(Pe.batchId,Se)})}).next(()=>{const xe=[],Pe=Te.getReverseIterator();for(;Pe.hasNext();){const Re=Pe.getNext(),ke=Re.key,Ce=Re.value,Se=__PRIVATE_newMutationMap();Ce.forEach(Ae=>{if(!Ee.has(Ae)){const Ie=__PRIVATE_calculateOverlayMutation(t.get(Ae),_e.get(Ae));Ie!==null&&Se.set(Ae,Ie),Ee=Ee.add(Ae)}}),xe.push(this.documentOverlayCache.saveOverlays(e,ke,Se))}return PersistencePromise.waitFor(xe)}).next(()=>_e)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(_e=>this.recalculateAndSaveOverlays(e,_e))}getDocumentsMatchingQuery(e,t,_e,Te){return function(xe){return DocumentKey.isDocumentKey(xe.path)&&xe.collectionGroup===null&&xe.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):__PRIVATE_isCollectionGroupQuery(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,_e,Te):this.getDocumentsMatchingCollectionQuery(e,t,_e,Te)}getNextDocuments(e,t,_e,Te){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,_e,Te).next(Ee=>{const xe=Te-Ee.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,_e.largestBatchId,Te-Ee.size):PersistencePromise.resolve(__PRIVATE_newOverlayMap());let Pe=Q$1,Re=Ee;return xe.next(ke=>PersistencePromise.forEach(ke,(Ce,Se)=>(Pe<Se.largestBatchId&&(Pe=Se.largestBatchId),Ee.get(Ce)?PersistencePromise.resolve():this.remoteDocumentCache.getEntry(e,Ce).next(Ae=>{Re=Re.insert(Ce,Ae)}))).next(()=>this.populateOverlays(e,ke,Ee)).next(()=>this.computeViews(e,Re,ke,__PRIVATE_documentKeySet())).next(Ce=>({batchId:Pe,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(Ce)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new DocumentKey(t)).next(_e=>{let Te=documentMap();return _e.isFoundDocument()&&(Te=Te.insert(_e.key,_e)),Te})}getDocumentsMatchingCollectionGroupQuery(e,t,_e,Te){const Ee=t.collectionGroup;let xe=documentMap();return this.indexManager.getCollectionParents(e,Ee).next(Pe=>PersistencePromise.forEach(Pe,Re=>{const ke=function(Se,Ae){return new __PRIVATE_QueryImpl(Ae,null,Se.explicitOrderBy.slice(),Se.filters.slice(),Se.limit,Se.limitType,Se.startAt,Se.endAt)}(t,Re.child(Ee));return this.getDocumentsMatchingCollectionQuery(e,ke,_e,Te).next(Ce=>{Ce.forEach((Se,Ae)=>{xe=xe.insert(Se,Ae)})})}).next(()=>xe))}getDocumentsMatchingCollectionQuery(e,t,_e,Te){let Ee;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,_e.largestBatchId).next(xe=>(Ee=xe,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,_e,Ee,Te))).next(xe=>{Ee.forEach((Re,ke)=>{const Ce=ke.getKey();xe.get(Ce)===null&&(xe=xe.insert(Ce,MutableDocument.newInvalidDocument(Ce)))});let Pe=documentMap();return xe.forEach((Re,ke)=>{const Ce=Ee.get(Re);Ce!==void 0&&__PRIVATE_mutationApplyToLocalView(Ce.mutation,ke,FieldMask.empty(),Timestamp.now()),__PRIVATE_queryMatches(t,ke)&&(Pe=Pe.insert(Re,ke))}),Pe})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryBundleCache{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return PersistencePromise.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(Te){return{id:Te.id,version:Te.version,createTime:__PRIVATE_fromVersion(Te.createTime)}}(t)),PersistencePromise.resolve()}getNamedQuery(e,t){return PersistencePromise.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(Te){return{name:Te.name,query:__PRIVATE_fromBundledQuery(Te.bundledQuery),readTime:__PRIVATE_fromVersion(Te.readTime)}}(t)),PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryDocumentOverlayCache{constructor(){this.overlays=new SortedMap(DocumentKey.comparator),this.kr=new Map}getOverlay(e,t){return PersistencePromise.resolve(this.overlays.get(t))}getOverlays(e,t){const _e=__PRIVATE_newOverlayMap();return PersistencePromise.forEach(t,Te=>this.getOverlay(e,Te).next(Ee=>{Ee!==null&&_e.set(Te,Ee)})).next(()=>_e)}saveOverlays(e,t,_e){return _e.forEach((Te,Ee)=>{this.wt(e,t,Ee)}),PersistencePromise.resolve()}removeOverlaysForBatchId(e,t,_e){const Te=this.kr.get(_e);return Te!==void 0&&(Te.forEach(Ee=>this.overlays=this.overlays.remove(Ee)),this.kr.delete(_e)),PersistencePromise.resolve()}getOverlaysForCollection(e,t,_e){const Te=__PRIVATE_newOverlayMap(),Ee=t.length+1,xe=new DocumentKey(t.child("")),Pe=this.overlays.getIteratorFrom(xe);for(;Pe.hasNext();){const Re=Pe.getNext().value,ke=Re.getKey();if(!t.isPrefixOf(ke.path))break;ke.path.length===Ee&&Re.largestBatchId>_e&&Te.set(Re.getKey(),Re)}return PersistencePromise.resolve(Te)}getOverlaysForCollectionGroup(e,t,_e,Te){let Ee=new SortedMap((ke,Ce)=>ke-Ce);const xe=this.overlays.getIterator();for(;xe.hasNext();){const ke=xe.getNext().value;if(ke.getKey().getCollectionGroup()===t&&ke.largestBatchId>_e){let Ce=Ee.get(ke.largestBatchId);Ce===null&&(Ce=__PRIVATE_newOverlayMap(),Ee=Ee.insert(ke.largestBatchId,Ce)),Ce.set(ke.getKey(),ke)}}const Pe=__PRIVATE_newOverlayMap(),Re=Ee.getIterator();for(;Re.hasNext()&&(Re.getNext().value.forEach((ke,Ce)=>Pe.set(ke,Ce)),!(Pe.size()>=Te)););return PersistencePromise.resolve(Pe)}wt(e,t,_e){const Te=this.overlays.get(_e.key);if(Te!==null){const xe=this.kr.get(Te.largestBatchId).delete(_e.key);this.kr.set(Te.largestBatchId,xe)}this.overlays=this.overlays.insert(_e.key,new Overlay(t,_e));let Ee=this.kr.get(t);Ee===void 0&&(Ee=__PRIVATE_documentKeySet(),this.kr.set(t,Ee)),this.kr.set(t,Ee.add(_e.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryGlobalsCache{constructor(){this.sessionToken=ByteString.EMPTY_BYTE_STRING}getSessionToken(e){return PersistencePromise.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ReferenceSet{constructor(){this.qr=new SortedSet(__PRIVATE_DocReference.Qr),this.$r=new SortedSet(__PRIVATE_DocReference.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const _e=new __PRIVATE_DocReference(e,t);this.qr=this.qr.add(_e),this.$r=this.$r.add(_e)}Kr(e,t){e.forEach(_e=>this.addReference(_e,t))}removeReference(e,t){this.Wr(new __PRIVATE_DocReference(e,t))}Gr(e,t){e.forEach(_e=>this.removeReference(_e,t))}zr(e){const t=new DocumentKey(new ResourcePath([])),_e=new __PRIVATE_DocReference(t,e),Te=new __PRIVATE_DocReference(t,e+1),Ee=[];return this.$r.forEachInRange([_e,Te],xe=>{this.Wr(xe),Ee.push(xe.key)}),Ee}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new DocumentKey(new ResourcePath([])),_e=new __PRIVATE_DocReference(t,e),Te=new __PRIVATE_DocReference(t,e+1);let Ee=__PRIVATE_documentKeySet();return this.$r.forEachInRange([_e,Te],xe=>{Ee=Ee.add(xe.key)}),Ee}containsKey(e){const t=new __PRIVATE_DocReference(e,0),_e=this.qr.firstAfterOrEqual(t);return _e!==null&&e.isEqual(_e.key)}}class __PRIVATE_DocReference{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return DocumentKey.comparator(e.key,t.key)||__PRIVATE_primitiveComparator(e.Hr,t.Hr)}static Ur(e,t){return __PRIVATE_primitiveComparator(e.Hr,t.Hr)||DocumentKey.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryMutationQueue{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new SortedSet(__PRIVATE_DocReference.Qr)}checkEmpty(e){return PersistencePromise.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,_e,Te){const Ee=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const xe=new MutationBatch(Ee,t,_e,Te);this.mutationQueue.push(xe);for(const Pe of Te)this.Yr=this.Yr.add(new __PRIVATE_DocReference(Pe.key,Ee)),this.indexManager.addToCollectionParentIndex(e,Pe.key.path.popLast());return PersistencePromise.resolve(xe)}lookupMutationBatch(e,t){return PersistencePromise.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const _e=t+1,Te=this.Xr(_e),Ee=Te<0?0:Te;return PersistencePromise.resolve(this.mutationQueue.length>Ee?this.mutationQueue[Ee]:null)}getHighestUnacknowledgedBatchId(){return PersistencePromise.resolve(this.mutationQueue.length===0?G$1:this.er-1)}getAllMutationBatches(e){return PersistencePromise.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const _e=new __PRIVATE_DocReference(t,0),Te=new __PRIVATE_DocReference(t,Number.POSITIVE_INFINITY),Ee=[];return this.Yr.forEachInRange([_e,Te],xe=>{const Pe=this.Zr(xe.Hr);Ee.push(Pe)}),PersistencePromise.resolve(Ee)}getAllMutationBatchesAffectingDocumentKeys(e,t){let _e=new SortedSet(__PRIVATE_primitiveComparator);return t.forEach(Te=>{const Ee=new __PRIVATE_DocReference(Te,0),xe=new __PRIVATE_DocReference(Te,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([Ee,xe],Pe=>{_e=_e.add(Pe.Hr)})}),PersistencePromise.resolve(this.ei(_e))}getAllMutationBatchesAffectingQuery(e,t){const _e=t.path,Te=_e.length+1;let Ee=_e;DocumentKey.isDocumentKey(Ee)||(Ee=Ee.child(""));const xe=new __PRIVATE_DocReference(new DocumentKey(Ee),0);let Pe=new SortedSet(__PRIVATE_primitiveComparator);return this.Yr.forEachWhile(Re=>{const ke=Re.key.path;return!!_e.isPrefixOf(ke)&&(ke.length===Te&&(Pe=Pe.add(Re.Hr)),!0)},xe),PersistencePromise.resolve(this.ei(Pe))}ei(e){const t=[];return e.forEach(_e=>{const Te=this.Zr(_e);Te!==null&&t.push(Te)}),t}removeMutationBatch(e,t){__PRIVATE_hardAssert(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let _e=this.Yr;return PersistencePromise.forEach(t.mutations,Te=>{const Ee=new __PRIVATE_DocReference(Te.key,t.batchId);return _e=_e.delete(Ee),this.referenceDelegate.markPotentiallyOrphaned(e,Te.key)}).next(()=>{this.Yr=_e})}rr(e){}containsKey(e,t){const _e=new __PRIVATE_DocReference(t,0),Te=this.Yr.firstAfterOrEqual(_e);return PersistencePromise.resolve(t.isEqual(Te&&Te.key))}performConsistencyCheck(e){return this.mutationQueue.length,PersistencePromise.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryRemoteDocumentCacheImpl{constructor(e){this.ni=e,this.docs=function(){return new SortedMap(DocumentKey.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const _e=t.key,Te=this.docs.get(_e),Ee=Te?Te.size:0,xe=this.ni(t);return this.docs=this.docs.insert(_e,{document:t.mutableCopy(),size:xe}),this.size+=xe-Ee,this.indexManager.addToCollectionParentIndex(e,_e.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const _e=this.docs.get(t);return PersistencePromise.resolve(_e?_e.document.mutableCopy():MutableDocument.newInvalidDocument(t))}getEntries(e,t){let _e=__PRIVATE_mutableDocumentMap();return t.forEach(Te=>{const Ee=this.docs.get(Te);_e=_e.insert(Te,Ee?Ee.document.mutableCopy():MutableDocument.newInvalidDocument(Te))}),PersistencePromise.resolve(_e)}getDocumentsMatchingQuery(e,t,_e,Te){let Ee=__PRIVATE_mutableDocumentMap();const xe=t.path,Pe=new DocumentKey(xe.child("__id-9223372036854775808__")),Re=this.docs.getIteratorFrom(Pe);for(;Re.hasNext();){const{key:ke,value:{document:Ce}}=Re.getNext();if(!xe.isPrefixOf(ke.path))break;ke.path.length>xe.length+1||__PRIVATE_indexOffsetComparator(__PRIVATE_newIndexOffsetFromDocument(Ce),_e)<=0||(Te.has(Ce.key)||__PRIVATE_queryMatches(t,Ce))&&(Ee=Ee.insert(Ce.key,Ce.mutableCopy()))}return PersistencePromise.resolve(Ee)}getAllFromCollectionGroup(e,t,_e,Te){fail(9500)}ri(e,t){return PersistencePromise.forEach(this.docs,_e=>t(_e))}newChangeBuffer(e){return new __PRIVATE_MemoryRemoteDocumentChangeBuffer(this)}getSize(e){return PersistencePromise.resolve(this.size)}}class __PRIVATE_MemoryRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((_e,Te)=>{Te.isValidDocument()?t.push(this.Or.addEntry(e,Te)):this.Or.removeEntry(_e)}),PersistencePromise.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryTargetCache{constructor(e){this.persistence=e,this.ii=new ObjectMap(t=>__PRIVATE_canonifyTarget(t),__PRIVATE_targetEquals),this.lastRemoteSnapshotVersion=SnapshotVersion.min(),this.highestTargetId=0,this.si=0,this.oi=new __PRIVATE_ReferenceSet,this.targetCount=0,this._i=__PRIVATE_TargetIdGenerator.ar()}forEachTarget(e,t){return this.ii.forEach((_e,Te)=>t(Te)),PersistencePromise.resolve()}getLastRemoteSnapshotVersion(e){return PersistencePromise.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return PersistencePromise.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),PersistencePromise.resolve(this.highestTargetId)}setTargetsMetadata(e,t,_e){return _e&&(this.lastRemoteSnapshotVersion=_e),t>this.si&&(this.si=t),PersistencePromise.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new __PRIVATE_TargetIdGenerator(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,PersistencePromise.resolve()}updateTargetData(e,t){return this.hr(t),PersistencePromise.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,PersistencePromise.resolve()}removeTargets(e,t,_e){let Te=0;const Ee=[];return this.ii.forEach((xe,Pe)=>{Pe.sequenceNumber<=t&&_e.get(Pe.targetId)===null&&(this.ii.delete(xe),Ee.push(this.removeMatchingKeysForTargetId(e,Pe.targetId)),Te++)}),PersistencePromise.waitFor(Ee).next(()=>Te)}getTargetCount(e){return PersistencePromise.resolve(this.targetCount)}getTargetData(e,t){const _e=this.ii.get(t)||null;return PersistencePromise.resolve(_e)}addMatchingKeys(e,t,_e){return this.oi.Kr(t,_e),PersistencePromise.resolve()}removeMatchingKeys(e,t,_e){this.oi.Gr(t,_e);const Te=this.persistence.referenceDelegate,Ee=[];return Te&&t.forEach(xe=>{Ee.push(Te.markPotentiallyOrphaned(e,xe))}),PersistencePromise.waitFor(Ee)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),PersistencePromise.resolve()}getMatchingKeysForTargetId(e,t){const _e=this.oi.Jr(t);return PersistencePromise.resolve(_e)}containsKey(e,t){return PersistencePromise.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryPersistence{constructor(e,t){this.ai={},this.overlays={},this.ui=new __PRIVATE_ListenSequence(0),this.ci=!1,this.ci=!0,this.li=new __PRIVATE_MemoryGlobalsCache,this.referenceDelegate=e(this),this.hi=new __PRIVATE_MemoryTargetCache(this),this.indexManager=new __PRIVATE_MemoryIndexManager,this.remoteDocumentCache=function(Te){return new __PRIVATE_MemoryRemoteDocumentCacheImpl(Te)}(_e=>this.referenceDelegate.Pi(_e)),this.serializer=new __PRIVATE_LocalSerializer(t),this.Ti=new __PRIVATE_MemoryBundleCache(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new __PRIVATE_MemoryDocumentOverlayCache,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let _e=this.ai[e.toKey()];return _e||(_e=new __PRIVATE_MemoryMutationQueue(t,this.referenceDelegate),this.ai[e.toKey()]=_e),_e}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,_e){__PRIVATE_logDebug("MemoryPersistence","Starting transaction:",e);const Te=new __PRIVATE_MemoryTransaction(this.ui.next());return this.referenceDelegate.Ii(),_e(Te).next(Ee=>this.referenceDelegate.di(Te).next(()=>Ee)).toPromise().then(Ee=>(Te.raiseOnCommittedEvent(),Ee))}Ei(e,t){return PersistencePromise.or(Object.values(this.ai).map(_e=>()=>_e.containsKey(e,t)))}}class __PRIVATE_MemoryTransaction extends PersistenceTransaction{constructor(e){super(),this.currentSequenceNumber=e}}class __PRIVATE_MemoryEagerDelegate{constructor(e){this.persistence=e,this.Ai=new __PRIVATE_ReferenceSet,this.Ri=null}static Vi(e){return new __PRIVATE_MemoryEagerDelegate(e)}get mi(){if(this.Ri)return this.Ri;throw fail(60996)}addReference(e,t,_e){return this.Ai.addReference(_e,t),this.mi.delete(_e.toString()),PersistencePromise.resolve()}removeReference(e,t,_e){return this.Ai.removeReference(_e,t),this.mi.add(_e.toString()),PersistencePromise.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),PersistencePromise.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(Te=>this.mi.add(Te.toString()));const _e=this.persistence.getTargetCache();return _e.getMatchingKeysForTargetId(e,t.targetId).next(Te=>{Te.forEach(Ee=>this.mi.add(Ee.toString()))}).next(()=>_e.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PersistencePromise.forEach(this.mi,_e=>{const Te=DocumentKey.fromPath(_e);return this.fi(e,Te).next(Ee=>{Ee||t.removeEntry(Te,SnapshotVersion.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(_e=>{_e?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return PersistencePromise.or([()=>PersistencePromise.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class __PRIVATE_MemoryLruDelegate{constructor(e,t){this.persistence=e,this.gi=new ObjectMap(_e=>__PRIVATE_encodeResourcePath(_e.path),(_e,Te)=>_e.isEqual(Te)),this.garbageCollector=__PRIVATE_newLruGarbageCollector(this,t)}static Vi(e,t){return new __PRIVATE_MemoryLruDelegate(e,t)}Ii(){}di(e){return PersistencePromise.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(_e=>t.next(Te=>_e+Te))}yr(e){let t=0;return this.gr(e,_e=>{t++}).next(()=>t)}gr(e,t){return PersistencePromise.forEach(this.gi,(_e,Te)=>this.Sr(e,_e,Te).next(Ee=>Ee?PersistencePromise.resolve():t(Te)))}removeTargets(e,t,_e){return this.persistence.getTargetCache().removeTargets(e,t,_e)}removeOrphanedDocuments(e,t){let _e=0;const Te=this.persistence.getRemoteDocumentCache(),Ee=Te.newChangeBuffer();return Te.ri(e,xe=>this.Sr(e,xe,t).next(Pe=>{Pe||(_e++,Ee.removeEntry(xe,SnapshotVersion.min()))})).next(()=>Ee.apply(e)).next(()=>_e)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),PersistencePromise.resolve()}removeTarget(e,t){const _e=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,_e)}addReference(e,t,_e){return this.gi.set(_e,e.currentSequenceNumber),PersistencePromise.resolve()}removeReference(e,t,_e){return this.gi.set(_e,e.currentSequenceNumber),PersistencePromise.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),PersistencePromise.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=__PRIVATE_estimateByteSize(e.data.value)),t}Sr(e,t,_e){return PersistencePromise.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const Te=this.gi.get(t);return PersistencePromise.resolve(Te!==void 0&&Te>_e)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalViewChanges{constructor(e,t,_e,Te){this.targetId=e,this.fromCache=t,this.Is=_e,this.ds=Te}static Es(e,t){let _e=__PRIVATE_documentKeySet(),Te=__PRIVATE_documentKeySet();for(const Ee of t.docChanges)switch(Ee.type){case 0:_e=_e.add(Ee.doc.key);break;case 1:Te=Te.add(Ee.doc.key)}return new __PRIVATE_LocalViewChanges(e,t.fromCache,_e,Te)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryContext{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryEngine{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return isSafari()?8:__PRIVATE_getAndroidVersion(getUA())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,_e,Te){const Ee={result:null};return this.ps(e,t).next(xe=>{Ee.result=xe}).next(()=>{if(!Ee.result)return this.ys(e,t,Te,_e).next(xe=>{Ee.result=xe})}).next(()=>{if(Ee.result)return;const xe=new QueryContext;return this.ws(e,t,xe).next(Pe=>{if(Ee.result=Pe,this.Rs)return this.Ss(e,t,xe,Pe.size)})}).next(()=>Ee.result)}Ss(e,t,_e,Te){return _e.documentReadCount<this.Vs?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","SDK will not create cache indexes for query:",__PRIVATE_stringifyQuery(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),PersistencePromise.resolve()):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Query:",__PRIVATE_stringifyQuery(t),"scans",_e.documentReadCount,"local documents and returns",Te,"documents as results."),_e.documentReadCount>this.fs*Te?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","The SDK decides to create cache indexes for query:",__PRIVATE_stringifyQuery(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,__PRIVATE_queryToTarget(t))):PersistencePromise.resolve())}ps(e,t){if(__PRIVATE_queryMatchesAllDocuments(t))return PersistencePromise.resolve(null);let _e=__PRIVATE_queryToTarget(t);return this.indexManager.getIndexType(e,_e).next(Te=>Te===0?null:(t.limit!==null&&Te===1&&(t=__PRIVATE_queryWithLimit(t,null,"F"),_e=__PRIVATE_queryToTarget(t)),this.indexManager.getDocumentsMatchingTarget(e,_e).next(Ee=>{const xe=__PRIVATE_documentKeySet(...Ee);return this.gs.getDocuments(e,xe).next(Pe=>this.indexManager.getMinOffset(e,_e).next(Re=>{const ke=this.bs(t,Pe);return this.Ds(t,ke,xe,Re.readTime)?this.ps(e,__PRIVATE_queryWithLimit(t,null,"F")):this.vs(e,ke,t,Re)}))})))}ys(e,t,_e,Te){return __PRIVATE_queryMatchesAllDocuments(t)||Te.isEqual(SnapshotVersion.min())?PersistencePromise.resolve(null):this.gs.getDocuments(e,_e).next(Ee=>{const xe=this.bs(t,Ee);return this.Ds(t,xe,_e,Te)?PersistencePromise.resolve(null):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Re-using previous result from %s to execute query: %s",Te.toString(),__PRIVATE_stringifyQuery(t)),this.vs(e,xe,t,__PRIVATE_newIndexOffsetSuccessorFromReadTime(Te,Q$1)).next(Pe=>Pe))})}bs(e,t){let _e=new SortedSet(__PRIVATE_newQueryComparator(e));return t.forEach((Te,Ee)=>{__PRIVATE_queryMatches(e,Ee)&&(_e=_e.add(Ee))}),_e}Ds(e,t,_e,Te){if(e.limit===null)return!1;if(_e.size!==t.size)return!0;const Ee=e.limitType==="F"?t.last():t.first();return!!Ee&&(Ee.hasPendingWrites||Ee.version.compareTo(Te)>0)}ws(e,t,_e){return __PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Using full collection scan to execute query:",__PRIVATE_stringifyQuery(t)),this.gs.getDocumentsMatchingQuery(e,t,IndexOffset.min(),_e)}vs(e,t,_e,Te){return this.gs.getDocumentsMatchingQuery(e,_e,Te).next(Ee=>(t.forEach(xe=>{Ee=Ee.insert(xe.key,xe)}),Ee))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt$1="LocalStore",$t$1=3e8;class __PRIVATE_LocalStoreImpl{constructor(e,t,_e,Te){this.persistence=e,this.Cs=t,this.serializer=Te,this.Fs=new SortedMap(__PRIVATE_primitiveComparator),this.Ms=new ObjectMap(Ee=>__PRIVATE_canonifyTarget(Ee),__PRIVATE_targetEquals),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(_e)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LocalDocumentsView(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function __PRIVATE_newLocalStore(r,e,t,_e){return new __PRIVATE_LocalStoreImpl(r,e,t,_e)}async function __PRIVATE_localStoreHandleUserChange(r,e){const t=__PRIVATE_debugCast(r);return await t.persistence.runTransaction("Handle user change","readonly",_e=>{let Te;return t.mutationQueue.getAllMutationBatches(_e).next(Ee=>(Te=Ee,t.Ns(e),t.mutationQueue.getAllMutationBatches(_e))).next(Ee=>{const xe=[],Pe=[];let Re=__PRIVATE_documentKeySet();for(const ke of Te){xe.push(ke.batchId);for(const Ce of ke.mutations)Re=Re.add(Ce.key)}for(const ke of Ee){Pe.push(ke.batchId);for(const Ce of ke.mutations)Re=Re.add(Ce.key)}return t.localDocuments.getDocuments(_e,Re).next(ke=>({Bs:ke,removedBatchIds:xe,addedBatchIds:Pe}))})})}function __PRIVATE_localStoreAcknowledgeBatch(r,e){const t=__PRIVATE_debugCast(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",_e=>{const Te=e.batch.keys(),Ee=t.Os.newChangeBuffer({trackRemovals:!0});return function(Pe,Re,ke,Ce){const Se=ke.batch,Ae=Se.keys();let Ie=PersistencePromise.resolve();return Ae.forEach(Me=>{Ie=Ie.next(()=>Ce.getEntry(Re,Me)).next(Fe=>{const Ve=ke.docVersions.get(Me);__PRIVATE_hardAssert(Ve!==null,48541),Fe.version.compareTo(Ve)<0&&(Se.applyToRemoteDocument(Fe,ke),Fe.isValidDocument()&&(Fe.setReadTime(ke.commitVersion),Ce.addEntry(Fe)))})}),Ie.next(()=>Pe.mutationQueue.removeMutationBatch(Re,Se))}(t,_e,e,Ee).next(()=>Ee.apply(_e)).next(()=>t.mutationQueue.performConsistencyCheck(_e)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(_e,Te,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_e,function(Pe){let Re=__PRIVATE_documentKeySet();for(let ke=0;ke<Pe.mutationResults.length;++ke)Pe.mutationResults[ke].transformResults.length>0&&(Re=Re.add(Pe.batch.mutations[ke].key));return Re}(e))).next(()=>t.localDocuments.getDocuments(_e,Te))})}function __PRIVATE_localStoreGetLastRemoteSnapshotVersion(r){const e=__PRIVATE_debugCast(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function __PRIVATE_localStoreApplyRemoteEventToLocalCache(r,e){const t=__PRIVATE_debugCast(r),_e=e.snapshotVersion;let Te=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",Ee=>{const xe=t.Os.newChangeBuffer({trackRemovals:!0});Te=t.Fs;const Pe=[];e.targetChanges.forEach((Ce,Se)=>{const Ae=Te.get(Se);if(!Ae)return;Pe.push(t.hi.removeMatchingKeys(Ee,Ce.removedDocuments,Se).next(()=>t.hi.addMatchingKeys(Ee,Ce.addedDocuments,Se)));let Ie=Ae.withSequenceNumber(Ee.currentSequenceNumber);e.targetMismatches.get(Se)!==null?Ie=Ie.withResumeToken(ByteString.EMPTY_BYTE_STRING,SnapshotVersion.min()).withLastLimboFreeSnapshotVersion(SnapshotVersion.min()):Ce.resumeToken.approximateByteSize()>0&&(Ie=Ie.withResumeToken(Ce.resumeToken,_e)),Te=Te.insert(Se,Ie),function(Fe,Ve,je){return Fe.resumeToken.approximateByteSize()===0||Ve.snapshotVersion.toMicroseconds()-Fe.snapshotVersion.toMicroseconds()>=$t$1?!0:je.addedDocuments.size+je.modifiedDocuments.size+je.removedDocuments.size>0}(Ae,Ie,Ce)&&Pe.push(t.hi.updateTargetData(Ee,Ie))});let Re=__PRIVATE_mutableDocumentMap(),ke=__PRIVATE_documentKeySet();if(e.documentUpdates.forEach(Ce=>{e.resolvedLimboDocuments.has(Ce)&&Pe.push(t.persistence.referenceDelegate.updateLimboDocument(Ee,Ce))}),Pe.push(__PRIVATE_populateDocumentChangeBuffer(Ee,xe,e.documentUpdates).next(Ce=>{Re=Ce.Ls,ke=Ce.ks})),!_e.isEqual(SnapshotVersion.min())){const Ce=t.hi.getLastRemoteSnapshotVersion(Ee).next(Se=>t.hi.setTargetsMetadata(Ee,Ee.currentSequenceNumber,_e));Pe.push(Ce)}return PersistencePromise.waitFor(Pe).next(()=>xe.apply(Ee)).next(()=>t.localDocuments.getLocalViewOfDocuments(Ee,Re,ke)).next(()=>Re)}).then(Ee=>(t.Fs=Te,Ee))}function __PRIVATE_populateDocumentChangeBuffer(r,e,t){let _e=__PRIVATE_documentKeySet(),Te=__PRIVATE_documentKeySet();return t.forEach(Ee=>_e=_e.add(Ee)),e.getEntries(r,_e).next(Ee=>{let xe=__PRIVATE_mutableDocumentMap();return t.forEach((Pe,Re)=>{const ke=Ee.get(Pe);Re.isFoundDocument()!==ke.isFoundDocument()&&(Te=Te.add(Pe)),Re.isNoDocument()&&Re.version.isEqual(SnapshotVersion.min())?(e.removeEntry(Pe,Re.readTime),xe=xe.insert(Pe,Re)):!ke.isValidDocument()||Re.version.compareTo(ke.version)>0||Re.version.compareTo(ke.version)===0&&ke.hasPendingWrites?(e.addEntry(Re),xe=xe.insert(Pe,Re)):__PRIVATE_logDebug(Qt$1,"Ignoring outdated watch update for ",Pe,". Current version:",ke.version," Watch version:",Re.version)}),{Ls:xe,ks:Te}})}function __PRIVATE_localStoreGetNextMutationBatch(r,e){const t=__PRIVATE_debugCast(r);return t.persistence.runTransaction("Get next mutation batch","readonly",_e=>(e===void 0&&(e=G$1),t.mutationQueue.getNextMutationBatchAfterBatchId(_e,e)))}function __PRIVATE_localStoreAllocateTarget(r,e){const t=__PRIVATE_debugCast(r);return t.persistence.runTransaction("Allocate target","readwrite",_e=>{let Te;return t.hi.getTargetData(_e,e).next(Ee=>Ee?(Te=Ee,PersistencePromise.resolve(Te)):t.hi.allocateTargetId(_e).next(xe=>(Te=new TargetData(e,xe,"TargetPurposeListen",_e.currentSequenceNumber),t.hi.addTargetData(_e,Te).next(()=>Te))))}).then(_e=>{const Te=t.Fs.get(_e.targetId);return(Te===null||_e.snapshotVersion.compareTo(Te.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(_e.targetId,_e),t.Ms.set(e,_e.targetId)),_e})}async function __PRIVATE_localStoreReleaseTarget(r,e,t){const _e=__PRIVATE_debugCast(r),Te=_e.Fs.get(e),Ee=t?"readwrite":"readwrite-primary";try{t||await _e.persistence.runTransaction("Release target",Ee,xe=>_e.persistence.referenceDelegate.removeTarget(xe,Te))}catch(xe){if(!__PRIVATE_isIndexedDbTransactionError(xe))throw xe;__PRIVATE_logDebug(Qt$1,`Failed to update sequence numbers for target ${e}: ${xe}`)}_e.Fs=_e.Fs.remove(e),_e.Ms.delete(Te.target)}function __PRIVATE_localStoreExecuteQuery(r,e,t){const _e=__PRIVATE_debugCast(r);let Te=SnapshotVersion.min(),Ee=__PRIVATE_documentKeySet();return _e.persistence.runTransaction("Execute query","readwrite",xe=>function(Re,ke,Ce){const Se=__PRIVATE_debugCast(Re),Ae=Se.Ms.get(Ce);return Ae!==void 0?PersistencePromise.resolve(Se.Fs.get(Ae)):Se.hi.getTargetData(ke,Ce)}(_e,xe,__PRIVATE_queryToTarget(e)).next(Pe=>{if(Pe)return Te=Pe.lastLimboFreeSnapshotVersion,_e.hi.getMatchingKeysForTargetId(xe,Pe.targetId).next(Re=>{Ee=Re})}).next(()=>_e.Cs.getDocumentsMatchingQuery(xe,e,t?Te:SnapshotVersion.min(),t?Ee:__PRIVATE_documentKeySet())).next(Pe=>(__PRIVATE_setMaxReadTime(_e,__PRIVATE_queryCollectionGroup(e),Pe),{documents:Pe,qs:Ee})))}function __PRIVATE_setMaxReadTime(r,e,t){let _e=r.xs.get(e)||SnapshotVersion.min();t.forEach((Te,Ee)=>{Ee.readTime.compareTo(_e)>0&&(_e=Ee.readTime)}),r.xs.set(e,_e)}class __PRIVATE_LocalClientState{constructor(){this.activeTargetIds=__PRIVATE_targetIdSet()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class __PRIVATE_MemorySharedClientState{constructor(){this.Fo=new __PRIVATE_LocalClientState,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,_e){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,_e){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new __PRIVATE_LocalClientState,Promise.resolve()}handleUserChange(e,t,_e){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_NoopConnectivityMonitor{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt$1="ConnectivityMonitor";class __PRIVATE_BrowserConnectivityMonitor{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){__PRIVATE_logDebug(zt$1,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){__PRIVATE_logDebug(zt$1,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jt$1=null;function __PRIVATE_generateUniqueDebugId(){return jt$1===null?jt$1=function(){return 268435456+Math.round(2147483648*Math.random())}():jt$1++,"0x"+jt$1.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt$1="RestConnection",Ht$1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class __PRIVATE_RestConnection{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",_e=encodeURIComponent(this.databaseId.projectId),Te=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${_e}/databases/${Te}`,this.Ko=this.databaseId.database===ut$1?`project_id=${_e}`:`project_id=${_e}&database_id=${Te}`}Wo(e,t,_e,Te,Ee){const xe=__PRIVATE_generateUniqueDebugId(),Pe=this.Go(e,t.toUriEncodedString());__PRIVATE_logDebug(Jt$1,`Sending RPC '${e}' ${xe}:`,Pe,_e);const Re={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(Re,Te,Ee);const{host:ke}=new URL(Pe),Ce=isCloudWorkstation(ke);return this.jo(e,Pe,Re,_e,Ce).then(Se=>(__PRIVATE_logDebug(Jt$1,`Received RPC '${e}' ${xe}: `,Se),Se),Se=>{throw __PRIVATE_logWarn(Jt$1,`RPC '${e}' ${xe} failed with error: `,Se,"url: ",Pe,"request:",_e),Se})}Jo(e,t,_e,Te,Ee,xe){return this.Wo(e,t,_e,Te,Ee)}zo(e,t,_e){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+x$2}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((Te,Ee)=>e[Ee]=Te),_e&&_e.headers.forEach((Te,Ee)=>e[Ee]=Te)}Go(e,t){const _e=Ht$1[e];return`${this.$o}/v1/${t}:${_e}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_StreamBridge{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt$1="WebChannelConnection";class __PRIVATE_WebChannelConnection extends __PRIVATE_RestConnection{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,_e,Te,Ee){const xe=__PRIVATE_generateUniqueDebugId();return new Promise((Pe,Re)=>{const ke=new XhrIo;ke.setWithCredentials(!0),ke.listenOnce(EventType.COMPLETE,()=>{try{switch(ke.getLastErrorCode()){case ErrorCode.NO_ERROR:const Se=ke.getResponseJson();__PRIVATE_logDebug(Yt$1,`XHR for RPC '${e}' ${xe} received:`,JSON.stringify(Se)),Pe(Se);break;case ErrorCode.TIMEOUT:__PRIVATE_logDebug(Yt$1,`RPC '${e}' ${xe} timed out`),Re(new FirestoreError(N$1.DEADLINE_EXCEEDED,"Request time out"));break;case ErrorCode.HTTP_ERROR:const Ae=ke.getStatus();if(__PRIVATE_logDebug(Yt$1,`RPC '${e}' ${xe} failed with status:`,Ae,"response text:",ke.getResponseText()),Ae>0){let Ie=ke.getResponseJson();Array.isArray(Ie)&&(Ie=Ie[0]);const Me=Ie?.error;if(Me&&Me.status&&Me.message){const Fe=function(je){const Be=je.toLowerCase().replace(/_/g,"-");return Object.values(N$1).indexOf(Be)>=0?Be:N$1.UNKNOWN}(Me.status);Re(new FirestoreError(Fe,Me.message))}else Re(new FirestoreError(N$1.UNKNOWN,"Server responded with status "+ke.getStatus()))}else Re(new FirestoreError(N$1.UNAVAILABLE,"Connection failed."));break;default:fail(9055,{c_:e,streamId:xe,l_:ke.getLastErrorCode(),h_:ke.getLastError()})}}finally{__PRIVATE_logDebug(Yt$1,`RPC '${e}' ${xe} completed.`)}});const Ce=JSON.stringify(Te);__PRIVATE_logDebug(Yt$1,`RPC '${e}' ${xe} sending request:`,Te),ke.send(t,"POST",Ce,_e,15)})}P_(e,t,_e){const Te=__PRIVATE_generateUniqueDebugId(),Ee=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],xe=createWebChannelTransport(),Pe=getStatEventTarget(),Re={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},ke=this.longPollingOptions.timeoutSeconds;ke!==void 0&&(Re.longPollingTimeout=Math.round(1e3*ke)),this.useFetchStreams&&(Re.useFetchStreams=!0),this.zo(Re.initMessageHeaders,t,_e),Re.encodeInitMessageHeaders=!0;const Ce=Ee.join("");__PRIVATE_logDebug(Yt$1,`Creating RPC '${e}' stream ${Te}: ${Ce}`,Re);const Se=xe.createWebChannel(Ce,Re);this.T_(Se);let Ae=!1,Ie=!1;const Me=new __PRIVATE_StreamBridge({Ho:Ve=>{Ie?__PRIVATE_logDebug(Yt$1,`Not sending because RPC '${e}' stream ${Te} is closed:`,Ve):(Ae||(__PRIVATE_logDebug(Yt$1,`Opening RPC '${e}' stream ${Te} transport.`),Se.open(),Ae=!0),__PRIVATE_logDebug(Yt$1,`RPC '${e}' stream ${Te} sending:`,Ve),Se.send(Ve))},Yo:()=>Se.close()}),Fe=(Ve,je,Be)=>{Ve.listen(je,qe=>{try{Be(qe)}catch(He){setTimeout(()=>{throw He},0)}})};return Fe(Se,WebChannel.EventType.OPEN,()=>{Ie||(__PRIVATE_logDebug(Yt$1,`RPC '${e}' stream ${Te} transport opened.`),Me.s_())}),Fe(Se,WebChannel.EventType.CLOSE,()=>{Ie||(Ie=!0,__PRIVATE_logDebug(Yt$1,`RPC '${e}' stream ${Te} transport closed`),Me.__(),this.I_(Se))}),Fe(Se,WebChannel.EventType.ERROR,Ve=>{Ie||(Ie=!0,__PRIVATE_logWarn(Yt$1,`RPC '${e}' stream ${Te} transport errored. Name:`,Ve.name,"Message:",Ve.message),Me.__(new FirestoreError(N$1.UNAVAILABLE,"The operation could not be completed")))}),Fe(Se,WebChannel.EventType.MESSAGE,Ve=>{var je;if(!Ie){const Be=Ve.data[0];__PRIVATE_hardAssert(!!Be,16349);const qe=Be,He=qe?.error||((je=qe[0])===null||je===void 0?void 0:je.error);if(He){__PRIVATE_logDebug(Yt$1,`RPC '${e}' stream ${Te} received error:`,He);const Xe=He.status;let Je=function(Ye){const pn=ft$1[Ye];if(pn!==void 0)return __PRIVATE_mapCodeFromRpcCode(pn)}(Xe),Qe=He.message;Je===void 0&&(Je=N$1.INTERNAL,Qe="Unknown error status: "+Xe+" with message "+He.message),Ie=!0,Me.__(new FirestoreError(Je,Qe)),Se.close()}else __PRIVATE_logDebug(Yt$1,`RPC '${e}' stream ${Te} received:`,Be),Me.a_(Be)}}),Fe(Pe,Event$1.STAT_EVENT,Ve=>{Ve.stat===Stat.PROXY?__PRIVATE_logDebug(Yt$1,`RPC '${e}' stream ${Te} detected buffering proxy`):Ve.stat===Stat.NOPROXY&&__PRIVATE_logDebug(Yt$1,`RPC '${e}' stream ${Te} detected no buffering proxy`)}),setTimeout(()=>{Me.o_()},0),Me}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function getDocument(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newSerializer(r){return new JsonProtoSerializer(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ExponentialBackoff{constructor(e,t,_e=1e3,Te=1.5,Ee=6e4){this.Fi=e,this.timerId=t,this.d_=_e,this.E_=Te,this.A_=Ee,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),_e=Math.max(0,Date.now()-this.m_),Te=Math.max(0,t-_e);Te>0&&__PRIVATE_logDebug("ExponentialBackoff",`Backing off for ${Te} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${_e} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,Te,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt$1="PersistentStream";class __PRIVATE_PersistentStream{constructor(e,t,_e,Te,Ee,xe,Pe,Re){this.Fi=e,this.w_=_e,this.S_=Te,this.connection=Ee,this.authCredentialsProvider=xe,this.appCheckCredentialsProvider=Pe,this.listener=Re,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new __PRIVATE_ExponentialBackoff(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===N$1.RESOURCE_EXHAUSTED?(__PRIVATE_logError(t.toString()),__PRIVATE_logError("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===N$1.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([_e,Te])=>{this.b_===t&&this.W_(_e,Te)},_e=>{e(()=>{const Te=new FirestoreError(N$1.UNKNOWN,"Fetching auth token failed: "+_e.message);return this.G_(Te)})})}W_(e,t){const _e=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{_e(()=>this.listener.Zo())}),this.stream.e_(()=>{_e(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(Te=>{_e(()=>this.G_(Te))}),this.stream.onMessage(Te=>{_e(()=>++this.C_==1?this.j_(Te):this.onNext(Te))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return __PRIVATE_logDebug(Zt$1,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(__PRIVATE_logDebug(Zt$1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class __PRIVATE_PersistentListenStream extends __PRIVATE_PersistentStream{constructor(e,t,_e,Te,Ee,xe){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,_e,Te,xe),this.serializer=Ee}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=__PRIVATE_fromWatchChange(this.serializer,e),_e=function(Ee){if(!("targetChange"in Ee))return SnapshotVersion.min();const xe=Ee.targetChange;return xe.targetIds&&xe.targetIds.length?SnapshotVersion.min():xe.readTime?__PRIVATE_fromVersion(xe.readTime):SnapshotVersion.min()}(e);return this.listener.J_(t,_e)}H_(e){const t={};t.database=__PRIVATE_getEncodedDatabaseId(this.serializer),t.addTarget=function(Ee,xe){let Pe;const Re=xe.target;if(Pe=__PRIVATE_targetIsDocumentTarget(Re)?{documents:__PRIVATE_toDocumentsTarget(Ee,Re)}:{query:__PRIVATE_toQueryTarget(Ee,Re).Vt},Pe.targetId=xe.targetId,xe.resumeToken.approximateByteSize()>0){Pe.resumeToken=__PRIVATE_toBytes(Ee,xe.resumeToken);const ke=__PRIVATE_toInt32Proto(Ee,xe.expectedCount);ke!==null&&(Pe.expectedCount=ke)}else if(xe.snapshotVersion.compareTo(SnapshotVersion.min())>0){Pe.readTime=toTimestamp(Ee,xe.snapshotVersion.toTimestamp());const ke=__PRIVATE_toInt32Proto(Ee,xe.expectedCount);ke!==null&&(Pe.expectedCount=ke)}return Pe}(this.serializer,e);const _e=__PRIVATE_toListenRequestLabels(this.serializer,e);_e&&(t.labels=_e),this.k_(t)}Y_(e){const t={};t.database=__PRIVATE_getEncodedDatabaseId(this.serializer),t.removeTarget=e,this.k_(t)}}class __PRIVATE_PersistentWriteStream extends __PRIVATE_PersistentStream{constructor(e,t,_e,Te,Ee,xe){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,_e,Te,xe),this.serializer=Ee}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return __PRIVATE_hardAssert(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,__PRIVATE_hardAssert(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){__PRIVATE_hardAssert(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=__PRIVATE_fromWriteResults(e.writeResults,e.commitTime),_e=__PRIVATE_fromVersion(e.commitTime);return this.listener.ta(_e,t)}na(){const e={};e.database=__PRIVATE_getEncodedDatabaseId(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(_e=>toMutation(this.serializer,_e))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Datastore{}class __PRIVATE_DatastoreImpl extends Datastore{constructor(e,t,_e,Te){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=_e,this.serializer=Te,this.ra=!1}ia(){if(this.ra)throw new FirestoreError(N$1.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,_e,Te){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([Ee,xe])=>this.connection.Wo(e,__PRIVATE_toResourcePath(t,_e),Te,Ee,xe)).catch(Ee=>{throw Ee.name==="FirebaseError"?(Ee.code===N$1.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),Ee):new FirestoreError(N$1.UNKNOWN,Ee.toString())})}Jo(e,t,_e,Te,Ee){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([xe,Pe])=>this.connection.Jo(e,__PRIVATE_toResourcePath(t,_e),Te,xe,Pe,Ee)).catch(xe=>{throw xe.name==="FirebaseError"?(xe.code===N$1.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),xe):new FirestoreError(N$1.UNKNOWN,xe.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class __PRIVATE_OnlineStateTracker{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(__PRIVATE_logError(t),this._a=!1):__PRIVATE_logDebug("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt$1="RemoteStore";class __PRIVATE_RemoteStoreImpl{constructor(e,t,_e,Te,Ee){this.localStore=e,this.datastore=t,this.asyncQueue=_e,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=Ee,this.Ea.xo(xe=>{_e.enqueueAndForget(async()=>{__PRIVATE_canUseNetwork(this)&&(__PRIVATE_logDebug(Xt$1,"Restarting streams for network reachability change."),await async function(Re){const ke=__PRIVATE_debugCast(Re);ke.Ia.add(4),await __PRIVATE_disableNetworkInternal(ke),ke.Aa.set("Unknown"),ke.Ia.delete(4),await __PRIVATE_enableNetworkInternal(ke)}(this))})}),this.Aa=new __PRIVATE_OnlineStateTracker(_e,Te)}}async function __PRIVATE_enableNetworkInternal(r){if(__PRIVATE_canUseNetwork(r))for(const e of r.da)await e(!0)}async function __PRIVATE_disableNetworkInternal(r){for(const e of r.da)await e(!1)}function __PRIVATE_remoteStoreListen(r,e){const t=__PRIVATE_debugCast(r);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),__PRIVATE_shouldStartWatchStream(t)?__PRIVATE_startWatchStream(t):__PRIVATE_ensureWatchStream(t).x_()&&__PRIVATE_sendWatchRequest(t,e))}function __PRIVATE_remoteStoreUnlisten(r,e){const t=__PRIVATE_debugCast(r),_e=__PRIVATE_ensureWatchStream(t);t.Ta.delete(e),_e.x_()&&__PRIVATE_sendUnwatchRequest(t,e),t.Ta.size===0&&(_e.x_()?_e.B_():__PRIVATE_canUseNetwork(t)&&t.Aa.set("Unknown"))}function __PRIVATE_sendWatchRequest(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(SnapshotVersion.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}__PRIVATE_ensureWatchStream(r).H_(e)}function __PRIVATE_sendUnwatchRequest(r,e){r.Ra.$e(e),__PRIVATE_ensureWatchStream(r).Y_(e)}function __PRIVATE_startWatchStream(r){r.Ra=new __PRIVATE_WatchChangeAggregator({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),__PRIVATE_ensureWatchStream(r).start(),r.Aa.aa()}function __PRIVATE_shouldStartWatchStream(r){return __PRIVATE_canUseNetwork(r)&&!__PRIVATE_ensureWatchStream(r).M_()&&r.Ta.size>0}function __PRIVATE_canUseNetwork(r){return __PRIVATE_debugCast(r).Ia.size===0}function __PRIVATE_cleanUpWatchStreamState(r){r.Ra=void 0}async function __PRIVATE_onWatchStreamConnected(r){r.Aa.set("Online")}async function __PRIVATE_onWatchStreamOpen(r){r.Ta.forEach((e,t)=>{__PRIVATE_sendWatchRequest(r,e)})}async function __PRIVATE_onWatchStreamClose(r,e){__PRIVATE_cleanUpWatchStreamState(r),__PRIVATE_shouldStartWatchStream(r)?(r.Aa.la(e),__PRIVATE_startWatchStream(r)):r.Aa.set("Unknown")}async function __PRIVATE_onWatchStreamChange(r,e,t){if(r.Aa.set("Online"),e instanceof __PRIVATE_WatchTargetChange&&e.state===2&&e.cause)try{await async function(Te,Ee){const xe=Ee.cause;for(const Pe of Ee.targetIds)Te.Ta.has(Pe)&&(await Te.remoteSyncer.rejectListen(Pe,xe),Te.Ta.delete(Pe),Te.Ra.removeTarget(Pe))}(r,e)}catch(_e){__PRIVATE_logDebug(Xt$1,"Failed to remove targets %s: %s ",e.targetIds.join(","),_e),await __PRIVATE_disableNetworkUntilRecovery(r,_e)}else if(e instanceof __PRIVATE_DocumentWatchChange?r.Ra.Ye(e):e instanceof __PRIVATE_ExistenceFilterChange?r.Ra.it(e):r.Ra.et(e),!t.isEqual(SnapshotVersion.min()))try{const _e=await __PRIVATE_localStoreGetLastRemoteSnapshotVersion(r.localStore);t.compareTo(_e)>=0&&await function(Ee,xe){const Pe=Ee.Ra.Pt(xe);return Pe.targetChanges.forEach((Re,ke)=>{if(Re.resumeToken.approximateByteSize()>0){const Ce=Ee.Ta.get(ke);Ce&&Ee.Ta.set(ke,Ce.withResumeToken(Re.resumeToken,xe))}}),Pe.targetMismatches.forEach((Re,ke)=>{const Ce=Ee.Ta.get(Re);if(!Ce)return;Ee.Ta.set(Re,Ce.withResumeToken(ByteString.EMPTY_BYTE_STRING,Ce.snapshotVersion)),__PRIVATE_sendUnwatchRequest(Ee,Re);const Se=new TargetData(Ce.target,Re,ke,Ce.sequenceNumber);__PRIVATE_sendWatchRequest(Ee,Se)}),Ee.remoteSyncer.applyRemoteEvent(Pe)}(r,t)}catch(_e){__PRIVATE_logDebug(Xt$1,"Failed to raise snapshot:",_e),await __PRIVATE_disableNetworkUntilRecovery(r,_e)}}async function __PRIVATE_disableNetworkUntilRecovery(r,e,t){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;r.Ia.add(1),await __PRIVATE_disableNetworkInternal(r),r.Aa.set("Offline"),t||(t=()=>__PRIVATE_localStoreGetLastRemoteSnapshotVersion(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{__PRIVATE_logDebug(Xt$1,"Retrying IndexedDB access"),await t(),r.Ia.delete(1),await __PRIVATE_enableNetworkInternal(r)})}function __PRIVATE_executeWithRecovery(r,e){return e().catch(t=>__PRIVATE_disableNetworkUntilRecovery(r,t,e))}async function __PRIVATE_fillWritePipeline(r){const e=__PRIVATE_debugCast(r),t=__PRIVATE_ensureWriteStream(e);let _e=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:G$1;for(;__PRIVATE_canAddToWritePipeline(e);)try{const Te=await __PRIVATE_localStoreGetNextMutationBatch(e.localStore,_e);if(Te===null){e.Pa.length===0&&t.B_();break}_e=Te.batchId,__PRIVATE_addToWritePipeline(e,Te)}catch(Te){await __PRIVATE_disableNetworkUntilRecovery(e,Te)}__PRIVATE_shouldStartWriteStream(e)&&__PRIVATE_startWriteStream(e)}function __PRIVATE_canAddToWritePipeline(r){return __PRIVATE_canUseNetwork(r)&&r.Pa.length<10}function __PRIVATE_addToWritePipeline(r,e){r.Pa.push(e);const t=__PRIVATE_ensureWriteStream(r);t.x_()&&t.Z_&&t.X_(e.mutations)}function __PRIVATE_shouldStartWriteStream(r){return __PRIVATE_canUseNetwork(r)&&!__PRIVATE_ensureWriteStream(r).M_()&&r.Pa.length>0}function __PRIVATE_startWriteStream(r){__PRIVATE_ensureWriteStream(r).start()}async function __PRIVATE_onWriteStreamOpen(r){__PRIVATE_ensureWriteStream(r).na()}async function __PRIVATE_onWriteHandshakeComplete(r){const e=__PRIVATE_ensureWriteStream(r);for(const t of r.Pa)e.X_(t.mutations)}async function __PRIVATE_onMutationResult(r,e,t){const _e=r.Pa.shift(),Te=MutationBatchResult.from(_e,e,t);await __PRIVATE_executeWithRecovery(r,()=>r.remoteSyncer.applySuccessfulWrite(Te)),await __PRIVATE_fillWritePipeline(r)}async function __PRIVATE_onWriteStreamClose(r,e){e&&__PRIVATE_ensureWriteStream(r).Z_&&await async function(_e,Te){if(function(xe){return __PRIVATE_isPermanentError(xe)&&xe!==N$1.ABORTED}(Te.code)){const Ee=_e.Pa.shift();__PRIVATE_ensureWriteStream(_e).N_(),await __PRIVATE_executeWithRecovery(_e,()=>_e.remoteSyncer.rejectFailedWrite(Ee.batchId,Te)),await __PRIVATE_fillWritePipeline(_e)}}(r,e),__PRIVATE_shouldStartWriteStream(r)&&__PRIVATE_startWriteStream(r)}async function __PRIVATE_remoteStoreHandleCredentialChange(r,e){const t=__PRIVATE_debugCast(r);t.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(Xt$1,"RemoteStore received new credentials");const _e=__PRIVATE_canUseNetwork(t);t.Ia.add(3),await __PRIVATE_disableNetworkInternal(t),_e&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await __PRIVATE_enableNetworkInternal(t)}async function __PRIVATE_remoteStoreApplyPrimaryState(r,e){const t=__PRIVATE_debugCast(r);e?(t.Ia.delete(2),await __PRIVATE_enableNetworkInternal(t)):e||(t.Ia.add(2),await __PRIVATE_disableNetworkInternal(t),t.Aa.set("Unknown"))}function __PRIVATE_ensureWatchStream(r){return r.Va||(r.Va=function(t,_e,Te){const Ee=__PRIVATE_debugCast(t);return Ee.ia(),new __PRIVATE_PersistentListenStream(_e,Ee.connection,Ee.authCredentials,Ee.appCheckCredentials,Ee.serializer,Te)}(r.datastore,r.asyncQueue,{Zo:__PRIVATE_onWatchStreamConnected.bind(null,r),e_:__PRIVATE_onWatchStreamOpen.bind(null,r),n_:__PRIVATE_onWatchStreamClose.bind(null,r),J_:__PRIVATE_onWatchStreamChange.bind(null,r)}),r.da.push(async e=>{e?(r.Va.N_(),__PRIVATE_shouldStartWatchStream(r)?__PRIVATE_startWatchStream(r):r.Aa.set("Unknown")):(await r.Va.stop(),__PRIVATE_cleanUpWatchStreamState(r))})),r.Va}function __PRIVATE_ensureWriteStream(r){return r.ma||(r.ma=function(t,_e,Te){const Ee=__PRIVATE_debugCast(t);return Ee.ia(),new __PRIVATE_PersistentWriteStream(_e,Ee.connection,Ee.authCredentials,Ee.appCheckCredentials,Ee.serializer,Te)}(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:__PRIVATE_onWriteStreamOpen.bind(null,r),n_:__PRIVATE_onWriteStreamClose.bind(null,r),ea:__PRIVATE_onWriteHandshakeComplete.bind(null,r),ta:__PRIVATE_onMutationResult.bind(null,r)}),r.da.push(async e=>{e?(r.ma.N_(),await __PRIVATE_fillWritePipeline(r)):(await r.ma.stop(),r.Pa.length>0&&(__PRIVATE_logDebug(Xt$1,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))})),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DelayedOperation{constructor(e,t,_e,Te,Ee){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=_e,this.op=Te,this.removalCallback=Ee,this.deferred=new __PRIVATE_Deferred,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(xe=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,_e,Te,Ee){const xe=Date.now()+_e,Pe=new DelayedOperation(e,t,xe,Te,Ee);return Pe.start(_e),Pe}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new FirestoreError(N$1.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __PRIVATE_wrapInUserErrorIfRecoverable(r,e){if(__PRIVATE_logError("AsyncQueue",`${e}: ${r}`),__PRIVATE_isIndexedDbTransactionError(r))return new FirestoreError(N$1.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSet{static emptySet(e){return new DocumentSet(e.comparator)}constructor(e){this.comparator=e?(t,_e)=>e(t,_e)||DocumentKey.comparator(t.key,_e.key):(t,_e)=>DocumentKey.comparator(t.key,_e.key),this.keyedMap=documentMap(),this.sortedSet=new SortedMap(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,_e)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof DocumentSet)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),_e=e.sortedSet.getIterator();for(;t.hasNext();){const Te=t.getNext().key,Ee=_e.getNext().key;if(!Te.isEqual(Ee))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const _e=new DocumentSet;return _e.comparator=this.comparator,_e.keyedMap=e,_e.sortedSet=t,_e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentChangeSet{constructor(){this.fa=new SortedMap(DocumentKey.comparator)}track(e){const t=e.doc.key,_e=this.fa.get(t);_e?e.type!==0&&_e.type===3?this.fa=this.fa.insert(t,e):e.type===3&&_e.type!==1?this.fa=this.fa.insert(t,{type:_e.type,doc:e.doc}):e.type===2&&_e.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&_e.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&_e.type===0?this.fa=this.fa.remove(t):e.type===1&&_e.type===2?this.fa=this.fa.insert(t,{type:1,doc:_e.doc}):e.type===0&&_e.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):fail(63341,{At:e,ga:_e}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,_e)=>{e.push(_e)}),e}}class ViewSnapshot{constructor(e,t,_e,Te,Ee,xe,Pe,Re,ke){this.query=e,this.docs=t,this.oldDocs=_e,this.docChanges=Te,this.mutatedKeys=Ee,this.fromCache=xe,this.syncStateChanged=Pe,this.excludesMetadataChanges=Re,this.hasCachedResults=ke}static fromInitialDocuments(e,t,_e,Te,Ee){const xe=[];return t.forEach(Pe=>{xe.push({type:0,doc:Pe})}),new ViewSnapshot(e,t,DocumentSet.emptySet(t),xe,_e,Te,!0,!1,Ee)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&__PRIVATE_queryEquals(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,_e=e.docChanges;if(t.length!==_e.length)return!1;for(let Te=0;Te<t.length;Te++)if(t[Te].type!==_e[Te].type||!t[Te].doc.isEqual(_e[Te].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryListenersInfo{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class __PRIVATE_EventManagerImpl{constructor(){this.queries=__PRIVATE_newQueriesObjectMap(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,_e){const Te=__PRIVATE_debugCast(t),Ee=Te.queries;Te.queries=__PRIVATE_newQueriesObjectMap(),Ee.forEach((xe,Pe)=>{for(const Re of Pe.wa)Re.onError(_e)})})(this,new FirestoreError(N$1.ABORTED,"Firestore shutting down"))}}function __PRIVATE_newQueriesObjectMap(){return new ObjectMap(r=>__PRIVATE_canonifyQuery(r),__PRIVATE_queryEquals)}async function __PRIVATE_eventManagerListen(r,e){const t=__PRIVATE_debugCast(r);let _e=3;const Te=e.query;let Ee=t.queries.get(Te);Ee?!Ee.Sa()&&e.ba()&&(_e=2):(Ee=new __PRIVATE_QueryListenersInfo,_e=e.ba()?0:1);try{switch(_e){case 0:Ee.ya=await t.onListen(Te,!0);break;case 1:Ee.ya=await t.onListen(Te,!1);break;case 2:await t.onFirstRemoteStoreListen(Te)}}catch(xe){const Pe=__PRIVATE_wrapInUserErrorIfRecoverable(xe,`Initialization of query '${__PRIVATE_stringifyQuery(e.query)}' failed`);return void e.onError(Pe)}t.queries.set(Te,Ee),Ee.wa.push(e),e.va(t.onlineState),Ee.ya&&e.Ca(Ee.ya)&&__PRIVATE_raiseSnapshotsInSyncEvent(t)}async function __PRIVATE_eventManagerUnlisten(r,e){const t=__PRIVATE_debugCast(r),_e=e.query;let Te=3;const Ee=t.queries.get(_e);if(Ee){const xe=Ee.wa.indexOf(e);xe>=0&&(Ee.wa.splice(xe,1),Ee.wa.length===0?Te=e.ba()?0:1:!Ee.Sa()&&e.ba()&&(Te=2))}switch(Te){case 0:return t.queries.delete(_e),t.onUnlisten(_e,!0);case 1:return t.queries.delete(_e),t.onUnlisten(_e,!1);case 2:return t.onLastRemoteStoreUnlisten(_e);default:return}}function __PRIVATE_eventManagerOnWatchChange(r,e){const t=__PRIVATE_debugCast(r);let _e=!1;for(const Te of e){const Ee=Te.query,xe=t.queries.get(Ee);if(xe){for(const Pe of xe.wa)Pe.Ca(Te)&&(_e=!0);xe.ya=Te}}_e&&__PRIVATE_raiseSnapshotsInSyncEvent(t)}function __PRIVATE_eventManagerOnWatchError(r,e,t){const _e=__PRIVATE_debugCast(r),Te=_e.queries.get(e);if(Te)for(const Ee of Te.wa)Ee.onError(t);_e.queries.delete(e)}function __PRIVATE_raiseSnapshotsInSyncEvent(r){r.Da.forEach(e=>{e.next()})}var en,tn;(tn=en||(en={})).Fa="default",tn.Cache="cache";class __PRIVATE_QueryListener{constructor(e,t,_e){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=_e||{}}Ca(e){if(!this.options.includeMetadataChanges){const _e=[];for(const Te of e.docChanges)Te.type!==3&&_e.push(Te);e=new ViewSnapshot(e.query,e.docs,e.oldDocs,_e,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const _e=t!=="Offline";return(!this.options.ka||!_e)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ViewSnapshot.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==en.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AddedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_RemovedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_View{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=__PRIVATE_documentKeySet(),this.mutatedKeys=__PRIVATE_documentKeySet(),this.Xa=__PRIVATE_newQueryComparator(e),this.eu=new DocumentSet(this.Xa)}get tu(){return this.Ha}nu(e,t){const _e=t?t.ru:new __PRIVATE_DocumentChangeSet,Te=t?t.eu:this.eu;let Ee=t?t.mutatedKeys:this.mutatedKeys,xe=Te,Pe=!1;const Re=this.query.limitType==="F"&&Te.size===this.query.limit?Te.last():null,ke=this.query.limitType==="L"&&Te.size===this.query.limit?Te.first():null;if(e.inorderTraversal((Ce,Se)=>{const Ae=Te.get(Ce),Ie=__PRIVATE_queryMatches(this.query,Se)?Se:null,Me=!!Ae&&this.mutatedKeys.has(Ae.key),Fe=!!Ie&&(Ie.hasLocalMutations||this.mutatedKeys.has(Ie.key)&&Ie.hasCommittedMutations);let Ve=!1;Ae&&Ie?Ae.data.isEqual(Ie.data)?Me!==Fe&&(_e.track({type:3,doc:Ie}),Ve=!0):this.iu(Ae,Ie)||(_e.track({type:2,doc:Ie}),Ve=!0,(Re&&this.Xa(Ie,Re)>0||ke&&this.Xa(Ie,ke)<0)&&(Pe=!0)):!Ae&&Ie?(_e.track({type:0,doc:Ie}),Ve=!0):Ae&&!Ie&&(_e.track({type:1,doc:Ae}),Ve=!0,(Re||ke)&&(Pe=!0)),Ve&&(Ie?(xe=xe.add(Ie),Ee=Fe?Ee.add(Ce):Ee.delete(Ce)):(xe=xe.delete(Ce),Ee=Ee.delete(Ce)))}),this.query.limit!==null)for(;xe.size>this.query.limit;){const Ce=this.query.limitType==="F"?xe.last():xe.first();xe=xe.delete(Ce.key),Ee=Ee.delete(Ce.key),_e.track({type:1,doc:Ce})}return{eu:xe,ru:_e,Ds:Pe,mutatedKeys:Ee}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,_e,Te){const Ee=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const xe=e.ru.pa();xe.sort((Ce,Se)=>function(Ie,Me){const Fe=Ve=>{switch(Ve){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fail(20277,{At:Ve})}};return Fe(Ie)-Fe(Me)}(Ce.type,Se.type)||this.Xa(Ce.doc,Se.doc)),this.su(_e),Te=Te!=null&&Te;const Pe=t&&!Te?this.ou():[],Re=this.Za.size===0&&this.current&&!Te?1:0,ke=Re!==this.Ya;return this.Ya=Re,xe.length!==0||ke?{snapshot:new ViewSnapshot(this.query,e.eu,Ee,xe,e.mutatedKeys,Re===0,ke,!1,!!_e&&_e.resumeToken.approximateByteSize()>0),_u:Pe}:{_u:Pe}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new __PRIVATE_DocumentChangeSet,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=__PRIVATE_documentKeySet(),this.eu.forEach(_e=>{this.au(_e.key)&&(this.Za=this.Za.add(_e.key))});const t=[];return e.forEach(_e=>{this.Za.has(_e)||t.push(new __PRIVATE_RemovedLimboDocument(_e))}),this.Za.forEach(_e=>{e.has(_e)||t.push(new __PRIVATE_AddedLimboDocument(_e))}),t}uu(e){this.Ha=e.qs,this.Za=__PRIVATE_documentKeySet();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ViewSnapshot.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const nn="SyncEngine";class __PRIVATE_QueryView{constructor(e,t,_e){this.query=e,this.targetId=t,this.view=_e}}class LimboResolution{constructor(e){this.key=e,this.lu=!1}}class __PRIVATE_SyncEngineImpl{constructor(e,t,_e,Te,Ee,xe){this.localStore=e,this.remoteStore=t,this.eventManager=_e,this.sharedClientState=Te,this.currentUser=Ee,this.maxConcurrentLimboResolutions=xe,this.hu={},this.Pu=new ObjectMap(Pe=>__PRIVATE_canonifyQuery(Pe),__PRIVATE_queryEquals),this.Tu=new Map,this.Iu=new Set,this.du=new SortedMap(DocumentKey.comparator),this.Eu=new Map,this.Au=new __PRIVATE_ReferenceSet,this.Ru={},this.Vu=new Map,this.mu=__PRIVATE_TargetIdGenerator.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function __PRIVATE_syncEngineListen(r,e,t=!0){const _e=__PRIVATE_ensureWatchCallbacks(r);let Te;const Ee=_e.Pu.get(e);return Ee?(_e.sharedClientState.addLocalQueryTarget(Ee.targetId),Te=Ee.view.cu()):Te=await __PRIVATE_allocateTargetAndMaybeListen(_e,e,t,!0),Te}async function __PRIVATE_triggerRemoteStoreListen(r,e){const t=__PRIVATE_ensureWatchCallbacks(r);await __PRIVATE_allocateTargetAndMaybeListen(t,e,!0,!1)}async function __PRIVATE_allocateTargetAndMaybeListen(r,e,t,_e){const Te=await __PRIVATE_localStoreAllocateTarget(r.localStore,__PRIVATE_queryToTarget(e)),Ee=Te.targetId,xe=r.sharedClientState.addLocalQueryTarget(Ee,t);let Pe;return _e&&(Pe=await __PRIVATE_initializeViewAndComputeSnapshot(r,e,Ee,xe==="current",Te.resumeToken)),r.isPrimaryClient&&t&&__PRIVATE_remoteStoreListen(r.remoteStore,Te),Pe}async function __PRIVATE_initializeViewAndComputeSnapshot(r,e,t,_e,Te){r.gu=(Se,Ae,Ie)=>async function(Fe,Ve,je,Be){let qe=Ve.view.nu(je);qe.Ds&&(qe=await __PRIVATE_localStoreExecuteQuery(Fe.localStore,Ve.query,!1).then(({documents:Qe})=>Ve.view.nu(Qe,qe)));const He=Be&&Be.targetChanges.get(Ve.targetId),Xe=Be&&Be.targetMismatches.get(Ve.targetId)!=null,Je=Ve.view.applyChanges(qe,Fe.isPrimaryClient,He,Xe);return __PRIVATE_updateTrackedLimbos(Fe,Ve.targetId,Je._u),Je.snapshot}(r,Se,Ae,Ie);const Ee=await __PRIVATE_localStoreExecuteQuery(r.localStore,e,!0),xe=new __PRIVATE_View(e,Ee.qs),Pe=xe.nu(Ee.documents),Re=TargetChange.createSynthesizedTargetChangeForCurrentChange(t,_e&&r.onlineState!=="Offline",Te),ke=xe.applyChanges(Pe,r.isPrimaryClient,Re);__PRIVATE_updateTrackedLimbos(r,t,ke._u);const Ce=new __PRIVATE_QueryView(e,t,xe);return r.Pu.set(e,Ce),r.Tu.has(t)?r.Tu.get(t).push(e):r.Tu.set(t,[e]),ke.snapshot}async function __PRIVATE_syncEngineUnlisten(r,e,t){const _e=__PRIVATE_debugCast(r),Te=_e.Pu.get(e),Ee=_e.Tu.get(Te.targetId);if(Ee.length>1)return _e.Tu.set(Te.targetId,Ee.filter(xe=>!__PRIVATE_queryEquals(xe,e))),void _e.Pu.delete(e);_e.isPrimaryClient?(_e.sharedClientState.removeLocalQueryTarget(Te.targetId),_e.sharedClientState.isActiveQueryTarget(Te.targetId)||await __PRIVATE_localStoreReleaseTarget(_e.localStore,Te.targetId,!1).then(()=>{_e.sharedClientState.clearQueryState(Te.targetId),t&&__PRIVATE_remoteStoreUnlisten(_e.remoteStore,Te.targetId),__PRIVATE_removeAndCleanupTarget(_e,Te.targetId)}).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)):(__PRIVATE_removeAndCleanupTarget(_e,Te.targetId),await __PRIVATE_localStoreReleaseTarget(_e.localStore,Te.targetId,!0))}async function __PRIVATE_triggerRemoteStoreUnlisten(r,e){const t=__PRIVATE_debugCast(r),_e=t.Pu.get(e),Te=t.Tu.get(_e.targetId);t.isPrimaryClient&&Te.length===1&&(t.sharedClientState.removeLocalQueryTarget(_e.targetId),__PRIVATE_remoteStoreUnlisten(t.remoteStore,_e.targetId))}async function __PRIVATE_syncEngineWrite(r,e,t){const _e=__PRIVATE_syncEngineEnsureWriteCallbacks(r);try{const Te=await function(xe,Pe){const Re=__PRIVATE_debugCast(xe),ke=Timestamp.now(),Ce=Pe.reduce((Ie,Me)=>Ie.add(Me.key),__PRIVATE_documentKeySet());let Se,Ae;return Re.persistence.runTransaction("Locally write mutations","readwrite",Ie=>{let Me=__PRIVATE_mutableDocumentMap(),Fe=__PRIVATE_documentKeySet();return Re.Os.getEntries(Ie,Ce).next(Ve=>{Me=Ve,Me.forEach((je,Be)=>{Be.isValidDocument()||(Fe=Fe.add(je))})}).next(()=>Re.localDocuments.getOverlayedDocuments(Ie,Me)).next(Ve=>{Se=Ve;const je=[];for(const Be of Pe){const qe=__PRIVATE_mutationExtractBaseValue(Be,Se.get(Be.key).overlayedDocument);qe!=null&&je.push(new __PRIVATE_PatchMutation(Be.key,qe,__PRIVATE_extractFieldMask(qe.value.mapValue),Precondition.exists(!0)))}return Re.mutationQueue.addMutationBatch(Ie,ke,je,Pe)}).next(Ve=>{Ae=Ve;const je=Ve.applyToLocalDocumentSet(Se,Fe);return Re.documentOverlayCache.saveOverlays(Ie,Ve.batchId,je)})}).then(()=>({batchId:Ae.batchId,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(Se)}))}(_e.localStore,e);_e.sharedClientState.addPendingMutation(Te.batchId),function(xe,Pe,Re){let ke=xe.Ru[xe.currentUser.toKey()];ke||(ke=new SortedMap(__PRIVATE_primitiveComparator)),ke=ke.insert(Pe,Re),xe.Ru[xe.currentUser.toKey()]=ke}(_e,Te.batchId,t),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(_e,Te.changes),await __PRIVATE_fillWritePipeline(_e.remoteStore)}catch(Te){const Ee=__PRIVATE_wrapInUserErrorIfRecoverable(Te,"Failed to persist write");t.reject(Ee)}}async function __PRIVATE_syncEngineApplyRemoteEvent(r,e){const t=__PRIVATE_debugCast(r);try{const _e=await __PRIVATE_localStoreApplyRemoteEventToLocalCache(t.localStore,e);e.targetChanges.forEach((Te,Ee)=>{const xe=t.Eu.get(Ee);xe&&(__PRIVATE_hardAssert(Te.addedDocuments.size+Te.modifiedDocuments.size+Te.removedDocuments.size<=1,22616),Te.addedDocuments.size>0?xe.lu=!0:Te.modifiedDocuments.size>0?__PRIVATE_hardAssert(xe.lu,14607):Te.removedDocuments.size>0&&(__PRIVATE_hardAssert(xe.lu,42227),xe.lu=!1))}),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(t,_e,e)}catch(_e){await __PRIVATE_ignoreIfPrimaryLeaseLoss(_e)}}function __PRIVATE_syncEngineApplyOnlineStateChange(r,e,t){const _e=__PRIVATE_debugCast(r);if(_e.isPrimaryClient&&t===0||!_e.isPrimaryClient&&t===1){const Te=[];_e.Pu.forEach((Ee,xe)=>{const Pe=xe.view.va(e);Pe.snapshot&&Te.push(Pe.snapshot)}),function(xe,Pe){const Re=__PRIVATE_debugCast(xe);Re.onlineState=Pe;let ke=!1;Re.queries.forEach((Ce,Se)=>{for(const Ae of Se.wa)Ae.va(Pe)&&(ke=!0)}),ke&&__PRIVATE_raiseSnapshotsInSyncEvent(Re)}(_e.eventManager,e),Te.length&&_e.hu.J_(Te),_e.onlineState=e,_e.isPrimaryClient&&_e.sharedClientState.setOnlineState(e)}}async function __PRIVATE_syncEngineRejectListen(r,e,t){const _e=__PRIVATE_debugCast(r);_e.sharedClientState.updateQueryState(e,"rejected",t);const Te=_e.Eu.get(e),Ee=Te&&Te.key;if(Ee){let xe=new SortedMap(DocumentKey.comparator);xe=xe.insert(Ee,MutableDocument.newNoDocument(Ee,SnapshotVersion.min()));const Pe=__PRIVATE_documentKeySet().add(Ee),Re=new RemoteEvent(SnapshotVersion.min(),new Map,new SortedMap(__PRIVATE_primitiveComparator),xe,Pe);await __PRIVATE_syncEngineApplyRemoteEvent(_e,Re),_e.du=_e.du.remove(Ee),_e.Eu.delete(e),__PRIVATE_pumpEnqueuedLimboResolutions(_e)}else await __PRIVATE_localStoreReleaseTarget(_e.localStore,e,!1).then(()=>__PRIVATE_removeAndCleanupTarget(_e,e,t)).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)}async function __PRIVATE_syncEngineApplySuccessfulWrite(r,e){const t=__PRIVATE_debugCast(r),_e=e.batch.batchId;try{const Te=await __PRIVATE_localStoreAcknowledgeBatch(t.localStore,e);__PRIVATE_processUserCallback(t,_e,null),__PRIVATE_triggerPendingWritesCallbacks(t,_e),t.sharedClientState.updateMutationState(_e,"acknowledged"),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(t,Te)}catch(Te){await __PRIVATE_ignoreIfPrimaryLeaseLoss(Te)}}async function __PRIVATE_syncEngineRejectFailedWrite(r,e,t){const _e=__PRIVATE_debugCast(r);try{const Te=await function(xe,Pe){const Re=__PRIVATE_debugCast(xe);return Re.persistence.runTransaction("Reject batch","readwrite-primary",ke=>{let Ce;return Re.mutationQueue.lookupMutationBatch(ke,Pe).next(Se=>(__PRIVATE_hardAssert(Se!==null,37113),Ce=Se.keys(),Re.mutationQueue.removeMutationBatch(ke,Se))).next(()=>Re.mutationQueue.performConsistencyCheck(ke)).next(()=>Re.documentOverlayCache.removeOverlaysForBatchId(ke,Ce,Pe)).next(()=>Re.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(ke,Ce)).next(()=>Re.localDocuments.getDocuments(ke,Ce))})}(_e.localStore,e);__PRIVATE_processUserCallback(_e,e,t),__PRIVATE_triggerPendingWritesCallbacks(_e,e),_e.sharedClientState.updateMutationState(e,"rejected",t),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(_e,Te)}catch(Te){await __PRIVATE_ignoreIfPrimaryLeaseLoss(Te)}}function __PRIVATE_triggerPendingWritesCallbacks(r,e){(r.Vu.get(e)||[]).forEach(t=>{t.resolve()}),r.Vu.delete(e)}function __PRIVATE_processUserCallback(r,e,t){const _e=__PRIVATE_debugCast(r);let Te=_e.Ru[_e.currentUser.toKey()];if(Te){const Ee=Te.get(e);Ee&&(t?Ee.reject(t):Ee.resolve(),Te=Te.remove(e)),_e.Ru[_e.currentUser.toKey()]=Te}}function __PRIVATE_removeAndCleanupTarget(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const _e of r.Tu.get(e))r.Pu.delete(_e),t&&r.hu.pu(_e,t);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach(_e=>{r.Au.containsKey(_e)||__PRIVATE_removeLimboTarget(r,_e)})}function __PRIVATE_removeLimboTarget(r,e){r.Iu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(__PRIVATE_remoteStoreUnlisten(r.remoteStore,t),r.du=r.du.remove(e),r.Eu.delete(t),__PRIVATE_pumpEnqueuedLimboResolutions(r))}function __PRIVATE_updateTrackedLimbos(r,e,t){for(const _e of t)_e instanceof __PRIVATE_AddedLimboDocument?(r.Au.addReference(_e.key,e),__PRIVATE_trackLimboChange(r,_e)):_e instanceof __PRIVATE_RemovedLimboDocument?(__PRIVATE_logDebug(nn,"Document no longer in limbo: "+_e.key),r.Au.removeReference(_e.key,e),r.Au.containsKey(_e.key)||__PRIVATE_removeLimboTarget(r,_e.key)):fail(19791,{yu:_e})}function __PRIVATE_trackLimboChange(r,e){const t=e.key,_e=t.path.canonicalString();r.du.get(t)||r.Iu.has(_e)||(__PRIVATE_logDebug(nn,"New document in limbo: "+t),r.Iu.add(_e),__PRIVATE_pumpEnqueuedLimboResolutions(r))}function __PRIVATE_pumpEnqueuedLimboResolutions(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const t=new DocumentKey(ResourcePath.fromString(e)),_e=r.mu.next();r.Eu.set(_e,new LimboResolution(t)),r.du=r.du.insert(t,_e),__PRIVATE_remoteStoreListen(r.remoteStore,new TargetData(__PRIVATE_queryToTarget(__PRIVATE_newQueryForPath(t.path)),_e,"TargetPurposeLimboResolution",__PRIVATE_ListenSequence.ue))}}async function __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(r,e,t){const _e=__PRIVATE_debugCast(r),Te=[],Ee=[],xe=[];_e.Pu.isEmpty()||(_e.Pu.forEach((Pe,Re)=>{xe.push(_e.gu(Re,e,t).then(ke=>{var Ce;if((ke||t)&&_e.isPrimaryClient){const Se=ke?!ke.fromCache:(Ce=t?.targetChanges.get(Re.targetId))===null||Ce===void 0?void 0:Ce.current;_e.sharedClientState.updateQueryState(Re.targetId,Se?"current":"not-current")}if(ke){Te.push(ke);const Se=__PRIVATE_LocalViewChanges.Es(Re.targetId,ke);Ee.push(Se)}}))}),await Promise.all(xe),_e.hu.J_(Te),await async function(Re,ke){const Ce=__PRIVATE_debugCast(Re);try{await Ce.persistence.runTransaction("notifyLocalViewChanges","readwrite",Se=>PersistencePromise.forEach(ke,Ae=>PersistencePromise.forEach(Ae.Is,Ie=>Ce.persistence.referenceDelegate.addReference(Se,Ae.targetId,Ie)).next(()=>PersistencePromise.forEach(Ae.ds,Ie=>Ce.persistence.referenceDelegate.removeReference(Se,Ae.targetId,Ie)))))}catch(Se){if(!__PRIVATE_isIndexedDbTransactionError(Se))throw Se;__PRIVATE_logDebug(Qt$1,"Failed to update sequence numbers: "+Se)}for(const Se of ke){const Ae=Se.targetId;if(!Se.fromCache){const Ie=Ce.Fs.get(Ae),Me=Ie.snapshotVersion,Fe=Ie.withLastLimboFreeSnapshotVersion(Me);Ce.Fs=Ce.Fs.insert(Ae,Fe)}}}(_e.localStore,Ee))}async function __PRIVATE_syncEngineHandleCredentialChange(r,e){const t=__PRIVATE_debugCast(r);if(!t.currentUser.isEqual(e)){__PRIVATE_logDebug(nn,"User change. New user:",e.toKey());const _e=await __PRIVATE_localStoreHandleUserChange(t.localStore,e);t.currentUser=e,function(Ee,xe){Ee.Vu.forEach(Pe=>{Pe.forEach(Re=>{Re.reject(new FirestoreError(N$1.CANCELLED,xe))})}),Ee.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,_e.removedBatchIds,_e.addedBatchIds),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(t,_e.Bs)}}function __PRIVATE_syncEngineGetRemoteKeysForTarget(r,e){const t=__PRIVATE_debugCast(r),_e=t.Eu.get(e);if(_e&&_e.lu)return __PRIVATE_documentKeySet().add(_e.key);{let Te=__PRIVATE_documentKeySet();const Ee=t.Tu.get(e);if(!Ee)return Te;for(const xe of Ee){const Pe=t.Pu.get(xe);Te=Te.unionWith(Pe.view.tu)}return Te}}function __PRIVATE_ensureWatchCallbacks(r){const e=__PRIVATE_debugCast(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=__PRIVATE_syncEngineApplyRemoteEvent.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=__PRIVATE_syncEngineGetRemoteKeysForTarget.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=__PRIVATE_syncEngineRejectListen.bind(null,e),e.hu.J_=__PRIVATE_eventManagerOnWatchChange.bind(null,e.eventManager),e.hu.pu=__PRIVATE_eventManagerOnWatchError.bind(null,e.eventManager),e}function __PRIVATE_syncEngineEnsureWriteCallbacks(r){const e=__PRIVATE_debugCast(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=__PRIVATE_syncEngineApplySuccessfulWrite.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=__PRIVATE_syncEngineRejectFailedWrite.bind(null,e),e}class __PRIVATE_MemoryOfflineComponentProvider{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=__PRIVATE_newSerializer(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return __PRIVATE_newLocalStore(this.persistence,new __PRIVATE_QueryEngine,e.initialUser,this.serializer)}Du(e){return new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.Vi,this.serializer)}bu(e){return new __PRIVATE_MemorySharedClientState}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}__PRIVATE_MemoryOfflineComponentProvider.provider={build:()=>new __PRIVATE_MemoryOfflineComponentProvider};class __PRIVATE_LruGcMemoryOfflineComponentProvider extends __PRIVATE_MemoryOfflineComponentProvider{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){__PRIVATE_hardAssert(this.persistence.referenceDelegate instanceof __PRIVATE_MemoryLruDelegate,46915);const _e=this.persistence.referenceDelegate.garbageCollector;return new __PRIVATE_LruScheduler(_e,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?LruParams.withCacheSize(this.cacheSizeBytes):LruParams.DEFAULT;return new __PRIVATE_MemoryPersistence(_e=>__PRIVATE_MemoryLruDelegate.Vi(_e,t),this.serializer)}}class OnlineComponentProvider{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=_e=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,_e,1),this.remoteStore.remoteSyncer.handleCredentialChange=__PRIVATE_syncEngineHandleCredentialChange.bind(null,this.syncEngine),await __PRIVATE_remoteStoreApplyPrimaryState(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new __PRIVATE_EventManagerImpl}()}createDatastore(e){const t=__PRIVATE_newSerializer(e.databaseInfo.databaseId),_e=function(Ee){return new __PRIVATE_WebChannelConnection(Ee)}(e.databaseInfo);return function(Ee,xe,Pe,Re){return new __PRIVATE_DatastoreImpl(Ee,xe,Pe,Re)}(e.authCredentials,e.appCheckCredentials,_e,t)}createRemoteStore(e){return function(_e,Te,Ee,xe,Pe){return new __PRIVATE_RemoteStoreImpl(_e,Te,Ee,xe,Pe)}(this.localStore,this.datastore,e.asyncQueue,t=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,t,0),function(){return __PRIVATE_BrowserConnectivityMonitor.C()?new __PRIVATE_BrowserConnectivityMonitor:new __PRIVATE_NoopConnectivityMonitor}())}createSyncEngine(e,t){return function(Te,Ee,xe,Pe,Re,ke,Ce){const Se=new __PRIVATE_SyncEngineImpl(Te,Ee,xe,Pe,Re,ke);return Ce&&(Se.fu=!0),Se}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(Te){const Ee=__PRIVATE_debugCast(Te);__PRIVATE_logDebug(Xt$1,"RemoteStore shutting down."),Ee.Ia.add(5),await __PRIVATE_disableNetworkInternal(Ee),Ee.Ea.shutdown(),Ee.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}OnlineComponentProvider.provider={build:()=>new OnlineComponentProvider};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncObserver{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):__PRIVATE_logError("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="FirestoreClient";class FirestoreClient{constructor(e,t,_e,Te,Ee){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=_e,this.databaseInfo=Te,this.user=User.UNAUTHENTICATED,this.clientId=__PRIVATE_AutoId.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=Ee,this.authCredentials.start(_e,async xe=>{__PRIVATE_logDebug(rn,"Received user=",xe.uid),await this.authCredentialListener(xe),this.user=xe}),this.appCheckCredentials.start(_e,xe=>(__PRIVATE_logDebug(rn,"Received new app check token=",xe),this.appCheckCredentialListener(xe,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new __PRIVATE_Deferred;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const _e=__PRIVATE_wrapInUserErrorIfRecoverable(t,"Failed to shutdown persistence");e.reject(_e)}}),e.promise}}async function __PRIVATE_setOfflineComponentProvider(r,e){r.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(rn,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let _e=t.initialUser;r.setCredentialChangeListener(async Te=>{_e.isEqual(Te)||(await __PRIVATE_localStoreHandleUserChange(e.localStore,Te),_e=Te)}),e.persistence.setDatabaseDeletedListener(()=>{__PRIVATE_logWarn("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then(()=>{__PRIVATE_logDebug("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(Te=>{__PRIVATE_logWarn("Terminating Firestore due to IndexedDb database deletion failed",Te)})}),r._offlineComponents=e}async function __PRIVATE_setOnlineComponentProvider(r,e){r.asyncQueue.verifyOperationInProgress();const t=await __PRIVATE_ensureOfflineComponents(r);__PRIVATE_logDebug(rn,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(_e=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,_e)),r.setAppCheckTokenChangeListener((_e,Te)=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,Te)),r._onlineComponents=e}async function __PRIVATE_ensureOfflineComponents(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){__PRIVATE_logDebug(rn,"Using user provided OfflineComponentProvider");try{await __PRIVATE_setOfflineComponentProvider(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(Te){return Te.name==="FirebaseError"?Te.code===N$1.FAILED_PRECONDITION||Te.code===N$1.UNIMPLEMENTED:!(typeof DOMException<"u"&&Te instanceof DOMException)||Te.code===22||Te.code===20||Te.code===11}(t))throw t;__PRIVATE_logWarn("Error using user provided cache. Falling back to memory cache: "+t),await __PRIVATE_setOfflineComponentProvider(r,new __PRIVATE_MemoryOfflineComponentProvider)}}else __PRIVATE_logDebug(rn,"Using default OfflineComponentProvider"),await __PRIVATE_setOfflineComponentProvider(r,new __PRIVATE_LruGcMemoryOfflineComponentProvider(void 0));return r._offlineComponents}async function __PRIVATE_ensureOnlineComponents(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(__PRIVATE_logDebug(rn,"Using user provided OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(r,r._uninitializedComponentsProvider._online)):(__PRIVATE_logDebug(rn,"Using default OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(r,new OnlineComponentProvider))),r._onlineComponents}function __PRIVATE_getSyncEngine(r){return __PRIVATE_ensureOnlineComponents(r).then(e=>e.syncEngine)}async function __PRIVATE_getEventManager(r){const e=await __PRIVATE_ensureOnlineComponents(r),t=e.eventManager;return t.onListen=__PRIVATE_syncEngineListen.bind(null,e.syncEngine),t.onUnlisten=__PRIVATE_syncEngineUnlisten.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=__PRIVATE_triggerRemoteStoreListen.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=__PRIVATE_triggerRemoteStoreUnlisten.bind(null,e.syncEngine),t}function __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(r,e,t={}){const _e=new __PRIVATE_Deferred;return r.asyncQueue.enqueueAndForget(async()=>function(Ee,xe,Pe,Re,ke){const Ce=new __PRIVATE_AsyncObserver({next:Ae=>{Ce.Ou(),xe.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(Ee,Se));const Ie=Ae.docs.has(Pe);!Ie&&Ae.fromCache?ke.reject(new FirestoreError(N$1.UNAVAILABLE,"Failed to get document because the client is offline.")):Ie&&Ae.fromCache&&Re&&Re.source==="server"?ke.reject(new FirestoreError(N$1.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):ke.resolve(Ae)},error:Ae=>ke.reject(Ae)}),Se=new __PRIVATE_QueryListener(__PRIVATE_newQueryForPath(Pe.path),Ce,{includeMetadataChanges:!0,ka:!0});return __PRIVATE_eventManagerListen(Ee,Se)}(await __PRIVATE_getEventManager(r),r.asyncQueue,e,t,_e)),_e.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_cloneLongPollingOptions(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="firestore.googleapis.com",_n=!0;class FirestoreSettingsImpl{constructor(e){var t,_e;if(e.host===void 0){if(e.ssl!==void 0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=on,this.ssl=_n}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:_n;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Mt$1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ot$1)throw new FirestoreError(N$1.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}__PRIVATE_validateIsNotUsedTogether("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__PRIVATE_cloneLongPollingOptions((_e=e.experimentalLongPollingOptions)!==null&&_e!==void 0?_e:{}),function(Ee){if(Ee.timeoutSeconds!==void 0){if(isNaN(Ee.timeoutSeconds))throw new FirestoreError(N$1.INVALID_ARGUMENT,`invalid long polling timeout: ${Ee.timeoutSeconds} (must not be NaN)`);if(Ee.timeoutSeconds<5)throw new FirestoreError(N$1.INVALID_ARGUMENT,`invalid long polling timeout: ${Ee.timeoutSeconds} (minimum allowed value is 5)`);if(Ee.timeoutSeconds>30)throw new FirestoreError(N$1.INVALID_ARGUMENT,`invalid long polling timeout: ${Ee.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(_e,Te){return _e.timeoutSeconds===Te.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Firestore$1{constructor(e,t,_e,Te){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=_e,this._app=Te,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FirestoreSettingsImpl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new FirestoreError(N$1.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new FirestoreError(N$1.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FirestoreSettingsImpl(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(_e){if(!_e)return new __PRIVATE_EmptyAuthCredentialsProvider;switch(_e.type){case"firstParty":return new __PRIVATE_FirstPartyAuthCredentialsProvider(_e.sessionIndex||"0",_e.iamToken||null,_e.authTokenFactory||null);case"provider":return _e.client;default:throw new FirestoreError(N$1.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const _e=sn.get(t);_e&&(__PRIVATE_logDebug("ComponentProvider","Removing Datastore"),sn.delete(t),_e.terminate())}(this),Promise.resolve()}}function connectFirestoreEmulator(r,e,t,_e={}){var Te;r=__PRIVATE_cast(r,Firestore$1);const Ee=isCloudWorkstation(e),xe=r._getSettings(),Pe=Object.assign(Object.assign({},xe),{emulatorOptions:r._getEmulatorOptions()}),Re=`${e}:${t}`;Ee&&(pingServer(`https://${Re}`),updateEmulatorBanner("Firestore",!0)),xe.host!==on&&xe.host!==Re&&__PRIVATE_logWarn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const ke=Object.assign(Object.assign({},xe),{host:Re,ssl:Ee,emulatorOptions:_e});if(!deepEqual(ke,Pe)&&(r._setSettings(ke),_e.mockUserToken)){let Ce,Se;if(typeof _e.mockUserToken=="string")Ce=_e.mockUserToken,Se=User.MOCK_USER;else{Ce=createMockUserToken(_e.mockUserToken,(Te=r._app)===null||Te===void 0?void 0:Te.options.projectId);const Ae=_e.mockUserToken.sub||_e.mockUserToken.user_id;if(!Ae)throw new FirestoreError(N$1.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");Se=new User(Ae)}r._authCredentials=new __PRIVATE_EmulatorAuthCredentialsProvider(new __PRIVATE_OAuthToken(Ce,Se))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Query{constructor(e,t,_e){this.converter=t,this._query=_e,this.type="query",this.firestore=e}withConverter(e){return new Query(this.firestore,e,this._query)}}class DocumentReference{constructor(e,t,_e){this.converter=t,this._key=_e,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new CollectionReference(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new DocumentReference(this.firestore,e,this._key)}toJSON(){return{type:DocumentReference._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,_e){if(__PRIVATE_validateJSON(t,DocumentReference._jsonSchema))return new DocumentReference(e,_e||null,new DocumentKey(ResourcePath.fromString(t.referencePath)))}}DocumentReference._jsonSchemaVersion="firestore/documentReference/1.0",DocumentReference._jsonSchema={type:property("string",DocumentReference._jsonSchemaVersion),referencePath:property("string")};class CollectionReference extends Query{constructor(e,t,_e){super(e,t,__PRIVATE_newQueryForPath(_e)),this._path=_e,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new DocumentReference(this.firestore,null,new DocumentKey(e))}withConverter(e){return new CollectionReference(this.firestore,e,this._path)}}function collection(r,e,...t){if(r=getModularInstance(r),__PRIVATE_validateNonEmptyArgument("collection","path",e),r instanceof Firestore$1){const _e=ResourcePath.fromString(e,...t);return __PRIVATE_validateCollectionPath(_e),new CollectionReference(r,null,_e)}{if(!(r instanceof DocumentReference||r instanceof CollectionReference))throw new FirestoreError(N$1.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const _e=r._path.child(ResourcePath.fromString(e,...t));return __PRIVATE_validateCollectionPath(_e),new CollectionReference(r.firestore,null,_e)}}function doc(r,e,...t){if(r=getModularInstance(r),arguments.length===1&&(e=__PRIVATE_AutoId.newId()),__PRIVATE_validateNonEmptyArgument("doc","path",e),r instanceof Firestore$1){const _e=ResourcePath.fromString(e,...t);return __PRIVATE_validateDocumentPath(_e),new DocumentReference(r,null,new DocumentKey(_e))}{if(!(r instanceof DocumentReference||r instanceof CollectionReference))throw new FirestoreError(N$1.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const _e=r._path.child(ResourcePath.fromString(e,...t));return __PRIVATE_validateDocumentPath(_e),new DocumentReference(r.firestore,r instanceof CollectionReference?r.converter:null,new DocumentKey(_e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="AsyncQueue";class __PRIVATE_AsyncQueueImpl{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new __PRIVATE_ExponentialBackoff(this,"async_queue_retry"),this.oc=()=>{const _e=getDocument();_e&&__PRIVATE_logDebug(an,"Visibility state changed to "+_e.visibilityState),this.F_.y_()},this._c=e;const t=getDocument();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=getDocument();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new __PRIVATE_Deferred;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;__PRIVATE_logDebug(an,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(_e=>{throw this.tc=_e,this.nc=!1,__PRIVATE_logError("INTERNAL UNHANDLED ERROR: ",__PRIVATE_getMessageOrStack(_e)),_e}).then(_e=>(this.nc=!1,_e))));return this._c=t,t}enqueueAfterDelay(e,t,_e){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const Te=DelayedOperation.createAndSchedule(this,e,t,_e,Ee=>this.lc(Ee));return this.ec.push(Te),Te}ac(){this.tc&&fail(47125,{hc:__PRIVATE_getMessageOrStack(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,_e)=>t.targetTimeMs-_e.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function __PRIVATE_getMessageOrStack(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_isPartialObserver(r){return function(t,_e){if(typeof t!="object"||t===null)return!1;const Te=t;for(const Ee of _e)if(Ee in Te&&typeof Te[Ee]=="function")return!0;return!1}(r,["next","error","complete"])}class Firestore extends Firestore$1{constructor(e,t,_e,Te){super(e,t,_e,Te),this.type="firestore",this._queue=new __PRIVATE_AsyncQueueImpl,this._persistenceKey=Te?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new __PRIVATE_AsyncQueueImpl(e),this._firestoreClient=void 0,await e}}}function getFirestore(r,e){const t=typeof r=="object"?r:getApp(),_e=typeof r=="string"?r:ut$1,Te=_getProvider(t,"firestore").getImmediate({identifier:_e});if(!Te._initialized){const Ee=getDefaultEmulatorHostnameAndPort("firestore");Ee&&connectFirestoreEmulator(Te,...Ee)}return Te}function ensureFirestoreConfigured(r){if(r._terminated)throw new FirestoreError(N$1.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||__PRIVATE_configureFirestore(r),r._firestoreClient}function __PRIVATE_configureFirestore(r){var e,t,_e;const Te=r._freezeSettings(),Ee=function(Pe,Re,ke,Ce){return new DatabaseInfo(Pe,Re,ke,Ce.host,Ce.ssl,Ce.experimentalForceLongPolling,Ce.experimentalAutoDetectLongPolling,__PRIVATE_cloneLongPollingOptions(Ce.experimentalLongPollingOptions),Ce.useFetchStreams,Ce.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,Te);r._componentsProvider||!((t=Te.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((_e=Te.localCache)===null||_e===void 0)&&_e._onlineComponentProvider)&&(r._componentsProvider={_offline:Te.localCache._offlineComponentProvider,_online:Te.localCache._onlineComponentProvider}),r._firestoreClient=new FirestoreClient(r._authCredentials,r._appCheckCredentials,r._queue,Ee,r._componentsProvider&&function(Pe){const Re=Pe?._online.build();return{_offline:Pe?._offline.build(Re),_online:Re}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bytes{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bytes(ByteString.fromBase64String(e))}catch(t){throw new FirestoreError(N$1.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Bytes(ByteString.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bytes._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(__PRIVATE_validateJSON(e,Bytes._jsonSchema))return Bytes.fromBase64String(e.bytes)}}Bytes._jsonSchemaVersion="firestore/bytes/1.0",Bytes._jsonSchema={type:property("string",Bytes._jsonSchemaVersion),bytes:property("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldPath{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new FieldPath$1(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldValue{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GeoPoint{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return __PRIVATE_primitiveComparator(this._lat,e._lat)||__PRIVATE_primitiveComparator(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:GeoPoint._jsonSchemaVersion}}static fromJSON(e){if(__PRIVATE_validateJSON(e,GeoPoint._jsonSchema))return new GeoPoint(e.latitude,e.longitude)}}GeoPoint._jsonSchemaVersion="firestore/geoPoint/1.0",GeoPoint._jsonSchema={type:property("string",GeoPoint._jsonSchemaVersion),latitude:property("number"),longitude:property("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VectorValue{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(_e,Te){if(_e.length!==Te.length)return!1;for(let Ee=0;Ee<_e.length;++Ee)if(_e[Ee]!==Te[Ee])return!1;return!0}(this._values,e._values)}toJSON(){return{type:VectorValue._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(__PRIVATE_validateJSON(e,VectorValue._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new VectorValue(e.vectorValues);throw new FirestoreError(N$1.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}VectorValue._jsonSchemaVersion="firestore/vectorValue/1.0",VectorValue._jsonSchema={type:property("string",VectorValue._jsonSchemaVersion),vectorValues:property("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn=/^__.*__$/;class ParsedSetData{constructor(e,t,_e){this.data=e,this.fieldMask=t,this.fieldTransforms=_e}toMutation(e,t){return this.fieldMask!==null?new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,t,this.fieldTransforms):new __PRIVATE_SetMutation(e,this.data,t,this.fieldTransforms)}}class ParsedUpdateData{constructor(e,t,_e){this.data=e,this.fieldMask=t,this.fieldTransforms=_e}toMutation(e,t){return new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function __PRIVATE_isWrite(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fail(40011,{Ec:r})}}class __PRIVATE_ParseContextImpl{constructor(e,t,_e,Te,Ee,xe){this.settings=e,this.databaseId=t,this.serializer=_e,this.ignoreUndefinedProperties=Te,Ee===void 0&&this.Ac(),this.fieldTransforms=Ee||[],this.fieldMask=xe||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new __PRIVATE_ParseContextImpl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const _e=(t=this.path)===null||t===void 0?void 0:t.child(e),Te=this.Rc({path:_e,mc:!1});return Te.fc(e),Te}gc(e){var t;const _e=(t=this.path)===null||t===void 0?void 0:t.child(e),Te=this.Rc({path:_e,mc:!1});return Te.Ac(),Te}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return __PRIVATE_createError(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(__PRIVATE_isWrite(this.Ec)&&cn.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class __PRIVATE_UserDataReader{constructor(e,t,_e){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=_e||__PRIVATE_newSerializer(e)}Dc(e,t,_e,Te=!1){return new __PRIVATE_ParseContextImpl({Ec:e,methodName:t,bc:_e,path:FieldPath$1.emptyPath(),mc:!1,Sc:Te},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function __PRIVATE_newUserDataReader(r){const e=r._freezeSettings(),t=__PRIVATE_newSerializer(r._databaseId);return new __PRIVATE_UserDataReader(r._databaseId,!!e.ignoreUndefinedProperties,t)}function __PRIVATE_parseSetData(r,e,t,_e,Te,Ee={}){const xe=r.Dc(Ee.merge||Ee.mergeFields?2:0,e,t,Te);__PRIVATE_validatePlainObject("Data must be an object, but it was:",xe,_e);const Pe=__PRIVATE_parseObject(_e,xe);let Re,ke;if(Ee.merge)Re=new FieldMask(xe.fieldMask),ke=xe.fieldTransforms;else if(Ee.mergeFields){const Ce=[];for(const Se of Ee.mergeFields){const Ae=__PRIVATE_fieldPathFromArgument$1(e,Se,t);if(!xe.contains(Ae))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Field '${Ae}' is specified in your field mask but missing from your input data.`);__PRIVATE_fieldMaskContains(Ce,Ae)||Ce.push(Ae)}Re=new FieldMask(Ce),ke=xe.fieldTransforms.filter(Se=>Re.covers(Se.field))}else Re=null,ke=xe.fieldTransforms;return new ParsedSetData(new ObjectValue$1(Pe),Re,ke)}class __PRIVATE_DeleteFieldValueImpl extends FieldValue{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof __PRIVATE_DeleteFieldValueImpl}}class __PRIVATE_ServerTimestampFieldValueImpl extends FieldValue{_toFieldTransform(e){return new FieldTransform(e.path,new __PRIVATE_ServerTimestampTransform)}isEqual(e){return e instanceof __PRIVATE_ServerTimestampFieldValueImpl}}function __PRIVATE_parseUpdateData(r,e,t,_e){const Te=r.Dc(1,e,t);__PRIVATE_validatePlainObject("Data must be an object, but it was:",Te,_e);const Ee=[],xe=ObjectValue$1.empty();forEach$1(_e,(Re,ke)=>{const Ce=__PRIVATE_fieldPathFromDotSeparatedString(e,Re,t);ke=getModularInstance(ke);const Se=Te.gc(Ce);if(ke instanceof __PRIVATE_DeleteFieldValueImpl)Ee.push(Ce);else{const Ae=__PRIVATE_parseData(ke,Se);Ae!=null&&(Ee.push(Ce),xe.set(Ce,Ae))}});const Pe=new FieldMask(Ee);return new ParsedUpdateData(xe,Pe,Te.fieldTransforms)}function __PRIVATE_parseUpdateVarargs(r,e,t,_e,Te,Ee){const xe=r.Dc(1,e,t),Pe=[__PRIVATE_fieldPathFromArgument$1(e,_e,t)],Re=[Te];if(Ee.length%2!=0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ae=0;Ae<Ee.length;Ae+=2)Pe.push(__PRIVATE_fieldPathFromArgument$1(e,Ee[Ae])),Re.push(Ee[Ae+1]);const ke=[],Ce=ObjectValue$1.empty();for(let Ae=Pe.length-1;Ae>=0;--Ae)if(!__PRIVATE_fieldMaskContains(ke,Pe[Ae])){const Ie=Pe[Ae];let Me=Re[Ae];Me=getModularInstance(Me);const Fe=xe.gc(Ie);if(Me instanceof __PRIVATE_DeleteFieldValueImpl)ke.push(Ie);else{const Ve=__PRIVATE_parseData(Me,Fe);Ve!=null&&(ke.push(Ie),Ce.set(Ie,Ve))}}const Se=new FieldMask(ke);return new ParsedUpdateData(Ce,Se,xe.fieldTransforms)}function __PRIVATE_parseQueryValue(r,e,t,_e=!1){return __PRIVATE_parseData(t,r.Dc(_e?4:3,e))}function __PRIVATE_parseData(r,e){if(__PRIVATE_looksLikeJsonObject(r=getModularInstance(r)))return __PRIVATE_validatePlainObject("Unsupported field value:",e,r),__PRIVATE_parseObject(r,e);if(r instanceof FieldValue)return function(_e,Te){if(!__PRIVATE_isWrite(Te.Ec))throw Te.wc(`${_e._methodName}() can only be used with update() and set()`);if(!Te.path)throw Te.wc(`${_e._methodName}() is not currently supported inside arrays`);const Ee=_e._toFieldTransform(Te);Ee&&Te.fieldTransforms.push(Ee)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(_e,Te){const Ee=[];let xe=0;for(const Pe of _e){let Re=__PRIVATE_parseData(Pe,Te.yc(xe));Re==null&&(Re={nullValue:"NULL_VALUE"}),Ee.push(Re),xe++}return{arrayValue:{values:Ee}}}(r,e)}return function(_e,Te){if((_e=getModularInstance(_e))===null)return{nullValue:"NULL_VALUE"};if(typeof _e=="number")return toNumber(Te.serializer,_e);if(typeof _e=="boolean")return{booleanValue:_e};if(typeof _e=="string")return{stringValue:_e};if(_e instanceof Date){const Ee=Timestamp.fromDate(_e);return{timestampValue:toTimestamp(Te.serializer,Ee)}}if(_e instanceof Timestamp){const Ee=new Timestamp(_e.seconds,1e3*Math.floor(_e.nanoseconds/1e3));return{timestampValue:toTimestamp(Te.serializer,Ee)}}if(_e instanceof GeoPoint)return{geoPointValue:{latitude:_e.latitude,longitude:_e.longitude}};if(_e instanceof Bytes)return{bytesValue:__PRIVATE_toBytes(Te.serializer,_e._byteString)};if(_e instanceof DocumentReference){const Ee=Te.databaseId,xe=_e.firestore._databaseId;if(!xe.isEqual(Ee))throw Te.wc(`Document reference is for database ${xe.projectId}/${xe.database} but should be for database ${Ee.projectId}/${Ee.database}`);return{referenceValue:__PRIVATE_toResourceName(_e.firestore._databaseId||Te.databaseId,_e._key.path)}}if(_e instanceof VectorValue)return function(xe,Pe){return{mapValue:{fields:{[ct$1]:{stringValue:Pt$1},[Tt$1]:{arrayValue:{values:xe.toArray().map(ke=>{if(typeof ke!="number")throw Pe.wc("VectorValues must only contain numeric values.");return __PRIVATE_toDouble(Pe.serializer,ke)})}}}}}}(_e,Te);throw Te.wc(`Unsupported field value: ${__PRIVATE_valueDescription(_e)}`)}(r,e)}function __PRIVATE_parseObject(r,e){const t={};return isEmpty$1(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):forEach$1(r,(_e,Te)=>{const Ee=__PRIVATE_parseData(Te,e.Vc(_e));Ee!=null&&(t[_e]=Ee)}),{mapValue:{fields:t}}}function __PRIVATE_looksLikeJsonObject(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Timestamp||r instanceof GeoPoint||r instanceof Bytes||r instanceof DocumentReference||r instanceof FieldValue||r instanceof VectorValue)}function __PRIVATE_validatePlainObject(r,e,t){if(!__PRIVATE_looksLikeJsonObject(t)||!__PRIVATE_isPlainObject(t)){const _e=__PRIVATE_valueDescription(t);throw _e==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+_e)}}function __PRIVATE_fieldPathFromArgument$1(r,e,t){if((e=getModularInstance(e))instanceof FieldPath)return e._internalPath;if(typeof e=="string")return __PRIVATE_fieldPathFromDotSeparatedString(r,e);throw __PRIVATE_createError("Field path arguments must be of type string or ",r,!1,void 0,t)}const ln$1=new RegExp("[~\\*/\\[\\]]");function __PRIVATE_fieldPathFromDotSeparatedString(r,e,t){if(e.search(ln$1)>=0)throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new FieldPath(...e.split("."))._internalPath}catch{throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function __PRIVATE_createError(r,e,t,_e,Te){const Ee=_e&&!_e.isEmpty(),xe=Te!==void 0;let Pe=`Function ${e}() called with invalid data`;t&&(Pe+=" (via `toFirestore()`)"),Pe+=". ";let Re="";return(Ee||xe)&&(Re+=" (found",Ee&&(Re+=` in field ${_e}`),xe&&(Re+=` in document ${Te}`),Re+=")"),new FirestoreError(N$1.INVALID_ARGUMENT,Pe+r+Re)}function __PRIVATE_fieldMaskContains(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSnapshot$1{constructor(e,t,_e,Te,Ee){this._firestore=e,this._userDataWriter=t,this._key=_e,this._document=Te,this._converter=Ee}get id(){return this._key.path.lastSegment()}get ref(){return new DocumentReference(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QueryDocumentSnapshot$1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class QueryDocumentSnapshot$1 extends DocumentSnapshot$1{data(){return super.data()}}function __PRIVATE_fieldPathFromArgument(r,e){return typeof e=="string"?__PRIVATE_fieldPathFromDotSeparatedString(r,e):e instanceof FieldPath?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateHasExplicitOrderByForLimitToLast(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new FirestoreError(N$1.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AppliableConstraint{}class QueryConstraint extends AppliableConstraint{}function query(r,e,...t){let _e=[];e instanceof AppliableConstraint&&_e.push(e),_e=_e.concat(t),function(Ee){const xe=Ee.filter(Re=>Re instanceof QueryCompositeFilterConstraint).length,Pe=Ee.filter(Re=>Re instanceof QueryFieldFilterConstraint).length;if(xe>1||xe>0&&Pe>0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(_e);for(const Te of _e)r=Te._apply(r);return r}class QueryFieldFilterConstraint extends QueryConstraint{constructor(e,t,_e){super(),this._field=e,this._op=t,this._value=_e,this.type="where"}static _create(e,t,_e){return new QueryFieldFilterConstraint(e,t,_e)}_apply(e){const t=this._parse(e);return __PRIVATE_validateNewFieldFilter(e._query,t),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,t))}_parse(e){const t=__PRIVATE_newUserDataReader(e.firestore);return function(Ee,xe,Pe,Re,ke,Ce,Se){let Ae;if(ke.isKeyField()){if(Ce==="array-contains"||Ce==="array-contains-any")throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Ce}' queries on documentId().`);if(Ce==="in"||Ce==="not-in"){__PRIVATE_validateDisjunctiveFilterElements(Se,Ce);const Me=[];for(const Fe of Se)Me.push(__PRIVATE_parseDocumentIdValue(Re,Ee,Fe));Ae={arrayValue:{values:Me}}}else Ae=__PRIVATE_parseDocumentIdValue(Re,Ee,Se)}else Ce!=="in"&&Ce!=="not-in"&&Ce!=="array-contains-any"||__PRIVATE_validateDisjunctiveFilterElements(Se,Ce),Ae=__PRIVATE_parseQueryValue(Pe,xe,Se,Ce==="in"||Ce==="not-in");return FieldFilter.create(ke,Ce,Ae)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class QueryCompositeFilterConstraint extends AppliableConstraint{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new QueryCompositeFilterConstraint(e,t)}_parse(e){const t=this._queryConstraints.map(_e=>_e._parse(e)).filter(_e=>_e.getFilters().length>0);return t.length===1?t[0]:CompositeFilter.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(Te,Ee){let xe=Te;const Pe=Ee.getFlattenedFilters();for(const Re of Pe)__PRIVATE_validateNewFieldFilter(xe,Re),xe=__PRIVATE_queryWithAddedFilter(xe,Re)}(e._query,t),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class QueryOrderByConstraint extends QueryConstraint{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new QueryOrderByConstraint(e,t)}_apply(e){const t=function(Te,Ee,xe){if(Te.startAt!==null)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(Te.endAt!==null)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new OrderBy(Ee,xe)}(e._query,this._field,this._direction);return new Query(e.firestore,e.converter,function(Te,Ee){const xe=Te.explicitOrderBy.concat([Ee]);return new __PRIVATE_QueryImpl(Te.path,Te.collectionGroup,xe,Te.filters.slice(),Te.limit,Te.limitType,Te.startAt,Te.endAt)}(e._query,t))}}function orderBy(r,e="asc"){const t=e,_e=__PRIVATE_fieldPathFromArgument("orderBy",r);return QueryOrderByConstraint._create(_e,t)}function __PRIVATE_parseDocumentIdValue(r,e,t){if(typeof(t=getModularInstance(t))=="string"){if(t==="")throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!__PRIVATE_isCollectionGroupQuery(e)&&t.indexOf("/")!==-1)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const _e=e.path.child(ResourcePath.fromString(t));if(!DocumentKey.isDocumentKey(_e))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${_e}' is not because it has an odd number of segments (${_e.length}).`);return __PRIVATE_refValue(r,new DocumentKey(_e))}if(t instanceof DocumentReference)return __PRIVATE_refValue(r,t._key);throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${__PRIVATE_valueDescription(t)}.`)}function __PRIVATE_validateDisjunctiveFilterElements(r,e){if(!Array.isArray(r)||r.length===0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function __PRIVATE_validateNewFieldFilter(r,e){const t=function(Te,Ee){for(const xe of Te)for(const Pe of xe.getFlattenedFilters())if(Ee.indexOf(Pe.op)>=0)return Pe.op;return null}(r.filters,function(Te){switch(Te){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class AbstractUserDataWriter{convertValue(e,t="none"){switch(__PRIVATE_typeOrder(e)){case 0:return null;case 1:return e.booleanValue;case 2:return __PRIVATE_normalizeNumber(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(__PRIVATE_normalizeByteString(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw fail(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const _e={};return forEach$1(e,(Te,Ee)=>{_e[Te]=this.convertValue(Ee,t)}),_e}convertVectorValue(e){var t,_e,Te;const Ee=(Te=(_e=(t=e.fields)===null||t===void 0?void 0:t[Tt$1].arrayValue)===null||_e===void 0?void 0:_e.values)===null||Te===void 0?void 0:Te.map(xe=>__PRIVATE_normalizeNumber(xe.doubleValue));return new VectorValue(Ee)}convertGeoPoint(e){return new GeoPoint(__PRIVATE_normalizeNumber(e.latitude),__PRIVATE_normalizeNumber(e.longitude))}convertArray(e,t){return(e.values||[]).map(_e=>this.convertValue(_e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const _e=__PRIVATE_getPreviousValue(e);return _e==null?null:this.convertValue(_e,t);case"estimate":return this.convertTimestamp(__PRIVATE_getLocalWriteTime(e));default:return null}}convertTimestamp(e){const t=__PRIVATE_normalizeTimestamp(e);return new Timestamp(t.seconds,t.nanos)}convertDocumentKey(e,t){const _e=ResourcePath.fromString(e);__PRIVATE_hardAssert(__PRIVATE_isValidResourceName(_e),9688,{name:e});const Te=new DatabaseId(_e.get(1),_e.get(3)),Ee=new DocumentKey(_e.popFirst(5));return Te.isEqual(t)||__PRIVATE_logError(`Document ${Ee} contains a document reference within a different database (${Te.projectId}/${Te.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),Ee}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_applyFirestoreDataConverter(r,e,t){let _e;return _e=r?r.toFirestore(e):e,_e}class SnapshotMetadata{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DocumentSnapshot extends DocumentSnapshot$1{constructor(e,t,_e,Te,Ee,xe){super(e,t,_e,Te,xe),this._firestore=e,this._firestoreImpl=e,this.metadata=Ee}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new QueryDocumentSnapshot(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const _e=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(_e!==null)return this._userDataWriter.convertValue(_e,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new FirestoreError(N$1.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=DocumentSnapshot._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}DocumentSnapshot._jsonSchemaVersion="firestore/documentSnapshot/1.0",DocumentSnapshot._jsonSchema={type:property("string",DocumentSnapshot._jsonSchemaVersion),bundleSource:property("string","DocumentSnapshot"),bundleName:property("string"),bundle:property("string")};class QueryDocumentSnapshot extends DocumentSnapshot{data(e={}){return super.data(e)}}class QuerySnapshot{constructor(e,t,_e,Te){this._firestore=e,this._userDataWriter=t,this._snapshot=Te,this.metadata=new SnapshotMetadata(Te.hasPendingWrites,Te.fromCache),this.query=_e}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(_e=>{e.call(t,new QueryDocumentSnapshot(this._firestore,this._userDataWriter,_e.key,_e,new SnapshotMetadata(this._snapshot.mutatedKeys.has(_e.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new FirestoreError(N$1.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(Te,Ee){if(Te._snapshot.oldDocs.isEmpty()){let xe=0;return Te._snapshot.docChanges.map(Pe=>{const Re=new QueryDocumentSnapshot(Te._firestore,Te._userDataWriter,Pe.doc.key,Pe.doc,new SnapshotMetadata(Te._snapshot.mutatedKeys.has(Pe.doc.key),Te._snapshot.fromCache),Te.query.converter);return Pe.doc,{type:"added",doc:Re,oldIndex:-1,newIndex:xe++}})}{let xe=Te._snapshot.oldDocs;return Te._snapshot.docChanges.filter(Pe=>Ee||Pe.type!==3).map(Pe=>{const Re=new QueryDocumentSnapshot(Te._firestore,Te._userDataWriter,Pe.doc.key,Pe.doc,new SnapshotMetadata(Te._snapshot.mutatedKeys.has(Pe.doc.key),Te._snapshot.fromCache),Te.query.converter);let ke=-1,Ce=-1;return Pe.type!==0&&(ke=xe.indexOf(Pe.doc.key),xe=xe.delete(Pe.doc.key)),Pe.type!==1&&(xe=xe.add(Pe.doc),Ce=xe.indexOf(Pe.doc.key)),{type:__PRIVATE_resultChangeType(Pe.type),doc:Re,oldIndex:ke,newIndex:Ce}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new FirestoreError(N$1.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=QuerySnapshot._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=__PRIVATE_AutoId.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],_e=[],Te=[];return this.docs.forEach(Ee=>{Ee._document!==null&&(t.push(Ee._document),_e.push(this._userDataWriter.convertObjectMap(Ee._document.data.value.mapValue.fields,"previous")),Te.push(Ee.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function __PRIVATE_resultChangeType(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fail(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getDoc(r){r=__PRIVATE_cast(r,DocumentReference);const e=__PRIVATE_cast(r.firestore,Firestore);return __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(ensureFirestoreConfigured(e),r._key).then(t=>__PRIVATE_convertToDocSnapshot(e,r,t))}QuerySnapshot._jsonSchemaVersion="firestore/querySnapshot/1.0",QuerySnapshot._jsonSchema={type:property("string",QuerySnapshot._jsonSchemaVersion),bundleSource:property("string","QuerySnapshot"),bundleName:property("string"),bundle:property("string")};class __PRIVATE_ExpUserDataWriter extends AbstractUserDataWriter{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bytes(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new DocumentReference(this.firestore,null,t)}}function setDoc(r,e,t){r=__PRIVATE_cast(r,DocumentReference);const _e=__PRIVATE_cast(r.firestore,Firestore),Te=__PRIVATE_applyFirestoreDataConverter(r.converter,e);return executeWrite(_e,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(_e),"setDoc",r._key,Te,r.converter!==null,t).toMutation(r._key,Precondition.none())])}function updateDoc(r,e,t,..._e){r=__PRIVATE_cast(r,DocumentReference);const Te=__PRIVATE_cast(r.firestore,Firestore),Ee=__PRIVATE_newUserDataReader(Te);let xe;return xe=typeof(e=getModularInstance(e))=="string"||e instanceof FieldPath?__PRIVATE_parseUpdateVarargs(Ee,"updateDoc",r._key,e,t,_e):__PRIVATE_parseUpdateData(Ee,"updateDoc",r._key,e),executeWrite(Te,[xe.toMutation(r._key,Precondition.exists(!0))])}function addDoc(r,e){const t=__PRIVATE_cast(r.firestore,Firestore),_e=doc(r),Te=__PRIVATE_applyFirestoreDataConverter(r.converter,e);return executeWrite(t,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(r.firestore),"addDoc",_e._key,Te,r.converter!==null,{}).toMutation(_e._key,Precondition.exists(!1))]).then(()=>_e)}function onSnapshot(r,...e){var t,_e,Te;r=getModularInstance(r);let Ee={includeMetadataChanges:!1,source:"default"},xe=0;typeof e[xe]!="object"||__PRIVATE_isPartialObserver(e[xe])||(Ee=e[xe++]);const Pe={includeMetadataChanges:Ee.includeMetadataChanges,source:Ee.source};if(__PRIVATE_isPartialObserver(e[xe])){const Se=e[xe];e[xe]=(t=Se.next)===null||t===void 0?void 0:t.bind(Se),e[xe+1]=(_e=Se.error)===null||_e===void 0?void 0:_e.bind(Se),e[xe+2]=(Te=Se.complete)===null||Te===void 0?void 0:Te.bind(Se)}let Re,ke,Ce;if(r instanceof DocumentReference)ke=__PRIVATE_cast(r.firestore,Firestore),Ce=__PRIVATE_newQueryForPath(r._key.path),Re={next:Se=>{e[xe]&&e[xe](__PRIVATE_convertToDocSnapshot(ke,r,Se))},error:e[xe+1],complete:e[xe+2]};else{const Se=__PRIVATE_cast(r,Query);ke=__PRIVATE_cast(Se.firestore,Firestore),Ce=Se._query;const Ae=new __PRIVATE_ExpUserDataWriter(ke);Re={next:Ie=>{e[xe]&&e[xe](new QuerySnapshot(ke,Ae,Se,Ie))},error:e[xe+1],complete:e[xe+2]},__PRIVATE_validateHasExplicitOrderByForLimitToLast(r._query)}return function(Ae,Ie,Me,Fe){const Ve=new __PRIVATE_AsyncObserver(Fe),je=new __PRIVATE_QueryListener(Ie,Ve,Me);return Ae.asyncQueue.enqueueAndForget(async()=>__PRIVATE_eventManagerListen(await __PRIVATE_getEventManager(Ae),je)),()=>{Ve.Ou(),Ae.asyncQueue.enqueueAndForget(async()=>__PRIVATE_eventManagerUnlisten(await __PRIVATE_getEventManager(Ae),je))}}(ensureFirestoreConfigured(ke),Ce,Pe,Re)}function executeWrite(r,e){return function(_e,Te){const Ee=new __PRIVATE_Deferred;return _e.asyncQueue.enqueueAndForget(async()=>__PRIVATE_syncEngineWrite(await __PRIVATE_getSyncEngine(_e),Te,Ee)),Ee.promise}(ensureFirestoreConfigured(r),e)}function __PRIVATE_convertToDocSnapshot(r,e,t){const _e=t.docs.get(e._key),Te=new __PRIVATE_ExpUserDataWriter(r);return new DocumentSnapshot(r,Te,e._key,_e,new SnapshotMetadata(t.hasPendingWrites,t.fromCache),e.converter)}function serverTimestamp(){return new __PRIVATE_ServerTimestampFieldValueImpl("serverTimestamp")}(function(e,t=!0){(function(Te){x$2=Te})(SDK_VERSION),_registerComponent(new Component("firestore",(_e,{instanceIdentifier:Te,options:Ee})=>{const xe=_e.getProvider("app").getImmediate(),Pe=new Firestore(new __PRIVATE_FirebaseAuthCredentialsProvider(_e.getProvider("auth-internal")),new __PRIVATE_FirebaseAppCheckTokenProvider(xe,_e.getProvider("app-check-internal")),function(ke,Ce){if(!Object.prototype.hasOwnProperty.apply(ke.options,["projectId"]))throw new FirestoreError(N$1.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DatabaseId(ke.options.projectId,Ce)}(xe,Te),xe);return Ee=Object.assign({useFetchStreams:t},Ee),Pe._setSettings(Ee),Pe},"PUBLIC").setMultipleInstances(!0)),registerVersion(F$1,M$1,e),registerVersion(F$1,M$1,"esm2017")})();function __rest(r,e){var t={};for(var _e in r)Object.prototype.hasOwnProperty.call(r,_e)&&e.indexOf(_e)<0&&(t[_e]=r[_e]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Te=0,_e=Object.getOwnPropertySymbols(r);Te<_e.length;Te++)e.indexOf(_e[Te])<0&&Object.prototype.propertyIsEnumerable.call(r,_e[Te])&&(t[_e[Te]]=r[_e[Te]]);return t}typeof SuppressedError=="function"&&SuppressedError;function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient=new Logger("@firebase/auth");function _logWarn(r,...e){logClient.logLevel<=LogLevel.WARN&&logClient.warn(`Auth (${SDK_VERSION}): ${r}`,...e)}function _logError(r,...e){logClient.logLevel<=LogLevel.ERROR&&logClient.error(`Auth (${SDK_VERSION}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(r,...e){throw createErrorInternal(r,...e)}function _createError(r,...e){return createErrorInternal(r,...e)}function _errorWithCustomMessage(r,e,t){const _e=Object.assign(Object.assign({},prodErrorMap()),{[e]:t});return new ErrorFactory("auth","Firebase",_e).create(e,{appName:r.name})}function _serverAppCurrentUserOperationNotSupportedError(r){return _errorWithCustomMessage(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function createErrorInternal(r,...e){if(typeof r!="string"){const t=e[0],_e=[...e.slice(1)];return _e[0]&&(_e[0].appName=r.name),r._errorFactory.create(t,..._e)}return _DEFAULT_AUTH_ERROR_FACTORY.create(r,...e)}function _assert(r,e,...t){if(!r)throw createErrorInternal(e,...t)}function debugFail(r){const e="INTERNAL ASSERTION FAILED: "+r;throw _logError(e),new Error(e)}function debugAssert(r,e){r||debugFail(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Delay{constructor(e,t){this.shortDelay=e,this.longDelay=t,debugAssert(t>e,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(r,e){debugAssert(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FetchProvider{static initialize(e,t,_e){this.fetchImpl=e,t&&(this.headersImpl=t),_e&&(this.responseImpl=_e)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CookieAuthProxiedEndpoints=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function _performApiRequest(r,e,t,_e,Te={}){return _performFetchWithErrorHandling(r,Te,async()=>{let Ee={},xe={};_e&&(e==="GET"?xe=_e:Ee={body:JSON.stringify(_e)});const Pe=querystring(Object.assign({key:r.config.apiKey},xe)).slice(1),Re=await r._getAdditionalHeaders();Re["Content-Type"]="application/json",r.languageCode&&(Re["X-Firebase-Locale"]=r.languageCode);const ke=Object.assign({method:e,headers:Re},Ee);return isCloudflareWorker()||(ke.referrerPolicy="no-referrer"),r.emulatorConfig&&isCloudWorkstation(r.emulatorConfig.host)&&(ke.credentials="include"),FetchProvider.fetch()(await _getFinalTarget(r,r.config.apiHost,t,Pe),ke)})}async function _performFetchWithErrorHandling(r,e,t){r._canInitEmulator=!1;const _e=Object.assign(Object.assign({},SERVER_ERROR_MAP),e);try{const Te=new NetworkTimeout(r),Ee=await Promise.race([t(),Te.promise]);Te.clearNetworkTimeout();const xe=await Ee.json();if("needConfirmation"in xe)throw _makeTaggedError(r,"account-exists-with-different-credential",xe);if(Ee.ok&&!("errorMessage"in xe))return xe;{const Pe=Ee.ok?xe.errorMessage:xe.error.message,[Re,ke]=Pe.split(" : ");if(Re==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError(r,"credential-already-in-use",xe);if(Re==="EMAIL_EXISTS")throw _makeTaggedError(r,"email-already-in-use",xe);if(Re==="USER_DISABLED")throw _makeTaggedError(r,"user-disabled",xe);const Ce=_e[Re]||Re.toLowerCase().replace(/[_\s]+/g,"-");if(ke)throw _errorWithCustomMessage(r,Ce,ke);_fail(r,Ce)}}catch(Te){if(Te instanceof FirebaseError)throw Te;_fail(r,"network-request-failed",{message:String(Te)})}}async function _performSignInRequest(r,e,t,_e,Te={}){const Ee=await _performApiRequest(r,e,t,_e,Te);return"mfaPendingCredential"in Ee&&_fail(r,"multi-factor-auth-required",{_serverResponse:Ee}),Ee}async function _getFinalTarget(r,e,t,_e){const Te=`${e}${t}?${_e}`,Ee=r,xe=Ee.config.emulator?_emulatorUrl(r.config,Te):`${r.config.apiScheme}://${Te}`;return CookieAuthProxiedEndpoints.includes(t)&&(await Ee._persistenceManagerAvailable,Ee._getPersistenceType()==="COOKIE")?Ee._getPersistence()._getFinalTarget(xe).toString():xe}function _parseEnforcementState(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NetworkTimeout{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,_e)=>{this.timer=setTimeout(()=>_e(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}}function _makeTaggedError(r,e,t){const _e={appName:r.name};t.email&&(_e.email=t.email),t.phoneNumber&&(_e.phoneNumber=t.phoneNumber);const Te=_createError(r,e,_e);return Te.customData._tokenResponse=t,Te}function isEnterprise(r){return r!==void 0&&r.enterprise!==void 0}class RecaptchaConfig{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return _parseEnforcementState(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function getRecaptchaConfig(r,e){return _performApiRequest(r,"GET","/v2/recaptchaConfig",_addTidIfNecessary(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount(r,e){return _performApiRequest(r,"POST","/v1/accounts:delete",e)}async function getAccountInfo(r,e){return _performApiRequest(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function getIdTokenResult(r,e=!1){const t=getModularInstance(r),_e=await t.getIdToken(e),Te=_parseToken(_e);_assert(Te&&Te.exp&&Te.auth_time&&Te.iat,t.auth,"internal-error");const Ee=typeof Te.firebase=="object"?Te.firebase:void 0,xe=Ee?.sign_in_provider;return{claims:Te,token:_e,authTime:utcTimestampToDateString(secondsStringToMilliseconds(Te.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(Te.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(Te.exp)),signInProvider:xe||null,signInSecondFactor:Ee?.sign_in_second_factor||null}}function secondsStringToMilliseconds(r){return Number(r)*1e3}function _parseToken(r){const[e,t,_e]=r.split(".");if(e===void 0||t===void 0||_e===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const Te=base64Decode(t);return Te?JSON.parse(Te):(_logError("Failed to decode base64 JWT payload"),null)}catch(Te){return _logError("Caught error parsing JWT payload as JSON",Te?.toString()),null}}function _tokenExpiresIn(r){const e=_parseToken(r);return _assert(e,"internal-error"),_assert(typeof e.exp<"u","internal-error"),_assert(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated(r,e,t=!1){if(t)return e;try{return await e}catch(_e){throw _e instanceof FirebaseError&&isUserInvalidated(_e)&&r.auth.currentUser===r&&await r.auth.signOut(),_e}}function isUserInvalidated({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProactiveRefresh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const _e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),_e}else{this.errorBackoff=3e4;const Te=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,Te)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserMetadata{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving(r){var e;const t=r.auth,_e=await r.getIdToken(),Te=await _logoutIfInvalidated(r,getAccountInfo(t,{idToken:_e}));_assert(Te?.users.length,t,"internal-error");const Ee=Te.users[0];r._notifyReloadListener(Ee);const xe=!((e=Ee.providerUserInfo)===null||e===void 0)&&e.length?extractProviderData(Ee.providerUserInfo):[],Pe=mergeProviderData(r.providerData,xe),Re=r.isAnonymous,ke=!(r.email&&Ee.passwordHash)&&!Pe?.length,Ce=Re?ke:!1,Se={uid:Ee.localId,displayName:Ee.displayName||null,photoURL:Ee.photoUrl||null,email:Ee.email||null,emailVerified:Ee.emailVerified||!1,phoneNumber:Ee.phoneNumber||null,tenantId:Ee.tenantId||null,providerData:Pe,metadata:new UserMetadata(Ee.createdAt,Ee.lastLoginAt),isAnonymous:Ce};Object.assign(r,Se)}async function reload(r){const e=getModularInstance(r);await _reloadWithoutSaving(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mergeProviderData(r,e){return[...r.filter(_e=>!e.some(Te=>Te.providerId===_e.providerId)),...e]}function extractProviderData(r){return r.map(e=>{var{providerId:t}=e,_e=__rest(e,["providerId"]);return{providerId:t,uid:_e.rawId||"",displayName:_e.displayName||null,email:_e.email||null,phoneNumber:_e.phoneNumber||null,photoURL:_e.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken(r,e){const t=await _performFetchWithErrorHandling(r,{},async()=>{const _e=querystring({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:Te,apiKey:Ee}=r.config,xe=await _getFinalTarget(r,Te,"/v1/token",`key=${Ee}`),Pe=await r._getAdditionalHeaders();Pe["Content-Type"]="application/x-www-form-urlencoded";const Re={method:"POST",headers:Pe,body:_e};return r.emulatorConfig&&isCloudWorkstation(r.emulatorConfig.host)&&(Re.credentials="include"),FetchProvider.fetch()(xe,Re)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function revokeToken(r,e){return _performApiRequest(r,"POST","/v2/accounts:revokeToken",_addTidIfNecessary(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_assert(e.idToken,"internal-error"),_assert(typeof e.idToken<"u","internal-error"),_assert(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_tokenExpiresIn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_assert(e.length!==0,"internal-error");const t=_tokenExpiresIn(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(_assert(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:_e,refreshToken:Te,expiresIn:Ee}=await requestStsToken(e,t);this.updateTokensAndExpiration(_e,Te,Number(Ee))}updateTokensAndExpiration(e,t,_e){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+_e*1e3}static fromJSON(e,t){const{refreshToken:_e,accessToken:Te,expirationTime:Ee}=t,xe=new StsTokenManager;return _e&&(_assert(typeof _e=="string","internal-error",{appName:e}),xe.refreshToken=_e),Te&&(_assert(typeof Te=="string","internal-error",{appName:e}),xe.accessToken=Te),Ee&&(_assert(typeof Ee=="number","internal-error",{appName:e}),xe.expirationTime=Ee),xe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(r,e){_assert(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class UserImpl{constructor(e){var{uid:t,auth:_e,stsTokenManager:Te}=e,Ee=__rest(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=_e,this.stsTokenManager=Te,this.accessToken=Te.accessToken,this.displayName=Ee.displayName||null,this.email=Ee.email||null,this.emailVerified=Ee.emailVerified||!1,this.phoneNumber=Ee.phoneNumber||null,this.photoURL=Ee.photoURL||null,this.isAnonymous=Ee.isAnonymous||!1,this.tenantId=Ee.tenantId||null,this.providerData=Ee.providerData?[...Ee.providerData]:[],this.metadata=new UserMetadata(Ee.createdAt||void 0,Ee.lastLoginAt||void 0)}async getIdToken(e){const t=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,e));return _assert(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return getIdTokenResult(this,e)}reload(){return reload(this)}_assign(e){this!==e&&(_assert(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new UserImpl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let _e=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),_e=!0),t&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),_e&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_isFirebaseServerApp(this.auth.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this.auth));const e=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var _e,Te,Ee,xe,Pe,Re,ke,Ce;const Se=(_e=t.displayName)!==null&&_e!==void 0?_e:void 0,Ae=(Te=t.email)!==null&&Te!==void 0?Te:void 0,Ie=(Ee=t.phoneNumber)!==null&&Ee!==void 0?Ee:void 0,Me=(xe=t.photoURL)!==null&&xe!==void 0?xe:void 0,Fe=(Pe=t.tenantId)!==null&&Pe!==void 0?Pe:void 0,Ve=(Re=t._redirectEventId)!==null&&Re!==void 0?Re:void 0,je=(ke=t.createdAt)!==null&&ke!==void 0?ke:void 0,Be=(Ce=t.lastLoginAt)!==null&&Ce!==void 0?Ce:void 0,{uid:qe,emailVerified:He,isAnonymous:Xe,providerData:Je,stsTokenManager:Qe}=t;_assert(qe&&Qe,e,"internal-error");const Ke=StsTokenManager.fromJSON(this.name,Qe);_assert(typeof qe=="string",e,"internal-error"),assertStringOrUndefined(Se,e.name),assertStringOrUndefined(Ae,e.name),_assert(typeof He=="boolean",e,"internal-error"),_assert(typeof Xe=="boolean",e,"internal-error"),assertStringOrUndefined(Ie,e.name),assertStringOrUndefined(Me,e.name),assertStringOrUndefined(Fe,e.name),assertStringOrUndefined(Ve,e.name),assertStringOrUndefined(je,e.name),assertStringOrUndefined(Be,e.name);const Ye=new UserImpl({uid:qe,auth:e,email:Ae,emailVerified:He,displayName:Se,isAnonymous:Xe,photoURL:Me,phoneNumber:Ie,tenantId:Fe,stsTokenManager:Ke,createdAt:je,lastLoginAt:Be});return Je&&Array.isArray(Je)&&(Ye.providerData=Je.map(pn=>Object.assign({},pn))),Ve&&(Ye._redirectEventId=Ve),Ye}static async _fromIdTokenResponse(e,t,_e=!1){const Te=new StsTokenManager;Te.updateFromServerResponse(t);const Ee=new UserImpl({uid:t.localId,auth:e,stsTokenManager:Te,isAnonymous:_e});return await _reloadWithoutSaving(Ee),Ee}static async _fromGetAccountInfoResponse(e,t,_e){const Te=t.users[0];_assert(Te.localId!==void 0,"internal-error");const Ee=Te.providerUserInfo!==void 0?extractProviderData(Te.providerUserInfo):[],xe=!(Te.email&&Te.passwordHash)&&!Ee?.length,Pe=new StsTokenManager;Pe.updateFromIdToken(_e);const Re=new UserImpl({uid:Te.localId,auth:e,stsTokenManager:Pe,isAnonymous:xe}),ke={uid:Te.localId,displayName:Te.displayName||null,photoURL:Te.photoUrl||null,email:Te.email||null,emailVerified:Te.emailVerified||!1,phoneNumber:Te.phoneNumber||null,tenantId:Te.tenantId||null,providerData:Ee,metadata:new UserMetadata(Te.createdAt,Te.lastLoginAt),isAnonymous:!(Te.email&&Te.passwordHash)&&!Ee?.length};return Object.assign(Re,ke),Re}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const instanceCache=new Map;function _getInstance(r){debugAssert(r instanceof Function,"Expected a class definition");let e=instanceCache.get(r);return e?(debugAssert(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,instanceCache.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(r,e,t){return`firebase:${r}:${e}:${t}`}class PersistenceUserManager{constructor(e,t,_e){this.persistence=e,this.auth=t,this.userKey=_e;const{config:Te,name:Ee}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,Te.apiKey,Ee),this.fullPersistenceKey=_persistenceKeyName("persistence",Te.apiKey,Ee),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await getAccountInfo(this.auth,{idToken:e}).catch(()=>{});return t?UserImpl._fromGetAccountInfoResponse(this.auth,t,e):null}return UserImpl._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,_e="authUser"){if(!t.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),e,_e);const Te=(await Promise.all(t.map(async ke=>{if(await ke._isAvailable())return ke}))).filter(ke=>ke);let Ee=Te[0]||_getInstance(inMemoryPersistence);const xe=_persistenceKeyName(_e,e.config.apiKey,e.name);let Pe=null;for(const ke of t)try{const Ce=await ke._get(xe);if(Ce){let Se;if(typeof Ce=="string"){const Ae=await getAccountInfo(e,{idToken:Ce}).catch(()=>{});if(!Ae)break;Se=await UserImpl._fromGetAccountInfoResponse(e,Ae,Ce)}else Se=UserImpl._fromJSON(e,Ce);ke!==Ee&&(Pe=Se),Ee=ke;break}}catch{}const Re=Te.filter(ke=>ke._shouldAllowMigration);return!Ee._shouldAllowMigration||!Re.length?new PersistenceUserManager(Ee,e,_e):(Ee=Re[0],Pe&&await Ee._set(xe,Pe.toJSON()),await Promise.all(t.map(async ke=>{if(ke!==Ee)try{await ke._remove(xe)}catch{}})),new PersistenceUserManager(Ee,e,_e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_isIEMobile(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_isFirefox(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_isBlackBerry(e))return"Blackberry";if(_isWebOS(e))return"Webos";if(_isSafari(e))return"Safari";if((e.includes("chrome/")||_isChromeIOS(e))&&!e.includes("edge/"))return"Chrome";if(_isAndroid(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,_e=r.match(t);if(_e?.length===2)return _e[1]}return"Other"}function _isFirefox(r=getUA()){return/firefox\//i.test(r)}function _isSafari(r=getUA()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _isChromeIOS(r=getUA()){return/crios\//i.test(r)}function _isIEMobile(r=getUA()){return/iemobile/i.test(r)}function _isAndroid(r=getUA()){return/android/i.test(r)}function _isBlackBerry(r=getUA()){return/blackberry/i.test(r)}function _isWebOS(r=getUA()){return/webos/i.test(r)}function _isIOS(r=getUA()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function _isIOSStandalone(r=getUA()){var e;return _isIOS(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser(r=getUA()){return _isIOS(r)||_isAndroid(r)||_isWebOS(r)||_isBlackBerry(r)||/windows phone/i.test(r)||_isIEMobile(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(r,e=[]){let t;switch(r){case"Browser":t=_getBrowserName(getUA());break;case"Worker":t=`${_getBrowserName(getUA())}-${r}`;break;default:t=r}const _e=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${SDK_VERSION}/${_e}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthMiddlewareQueue{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const _e=Ee=>new Promise((xe,Pe)=>{try{const Re=e(Ee);xe(Re)}catch(Re){Pe(Re)}});_e.onAbort=t,this.queue.push(_e);const Te=this.queue.length-1;return()=>{this.queue[Te]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const _e of this.queue)await _e(e),_e.onAbort&&t.push(_e.onAbort)}catch(_e){t.reverse();for(const Te of t)try{Te()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:_e?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getPasswordPolicy(r,e={}){return _performApiRequest(r,"GET","/v2/passwordPolicy",_addTidIfNecessary(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MINIMUM_MIN_PASSWORD_LENGTH=6;class PasswordPolicyImpl{constructor(e){var t,_e,Te,Ee;const xe=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=xe.minPasswordLength)!==null&&t!==void 0?t:MINIMUM_MIN_PASSWORD_LENGTH,xe.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=xe.maxPasswordLength),xe.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=xe.containsLowercaseCharacter),xe.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=xe.containsUppercaseCharacter),xe.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=xe.containsNumericCharacter),xe.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=xe.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(Te=(_e=e.allowedNonAlphanumericCharacters)===null||_e===void 0?void 0:_e.join(""))!==null&&Te!==void 0?Te:"",this.forceUpgradeOnSignin=(Ee=e.forceUpgradeOnSignin)!==null&&Ee!==void 0?Ee:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,_e,Te,Ee,xe,Pe;const Re={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,Re),this.validatePasswordCharacterOptions(e,Re),Re.isValid&&(Re.isValid=(t=Re.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),Re.isValid&&(Re.isValid=(_e=Re.meetsMaxPasswordLength)!==null&&_e!==void 0?_e:!0),Re.isValid&&(Re.isValid=(Te=Re.containsLowercaseLetter)!==null&&Te!==void 0?Te:!0),Re.isValid&&(Re.isValid=(Ee=Re.containsUppercaseLetter)!==null&&Ee!==void 0?Ee:!0),Re.isValid&&(Re.isValid=(xe=Re.containsNumericCharacter)!==null&&xe!==void 0?xe:!0),Re.isValid&&(Re.isValid=(Pe=Re.containsNonAlphanumericCharacter)!==null&&Pe!==void 0?Pe:!0),Re}validatePasswordLengthOptions(e,t){const _e=this.customStrengthOptions.minPasswordLength,Te=this.customStrengthOptions.maxPasswordLength;_e&&(t.meetsMinPasswordLength=e.length>=_e),Te&&(t.meetsMaxPasswordLength=e.length<=Te)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let _e;for(let Te=0;Te<e.length;Te++)_e=e.charAt(Te),this.updatePasswordCharacterOptionsStatuses(t,_e>="a"&&_e<="z",_e>="A"&&_e<="Z",_e>="0"&&_e<="9",this.allowedNonAlphanumericCharacters.includes(_e))}updatePasswordCharacterOptionsStatuses(e,t,_e,Te,Ee){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=_e)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=Te)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=Ee))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthImpl{constructor(e,t,_e,Te){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=_e,this.config=Te,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=Te.sdkClientVersion,this._persistenceManagerAvailable=new Promise(Ee=>this._resolvePersistenceManagerAvailable=Ee)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_getInstance(t)),this._initializationPromise=this.queue(async()=>{var _e,Te,Ee;if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,e),(_e=this._resolvePersistenceManagerAvailable)===null||_e===void 0||_e.call(this),!this._deleted)){if(!((Te=this._popupRedirectResolver)===null||Te===void 0)&&Te._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((Ee=this.currentUser)===null||Ee===void 0?void 0:Ee.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await getAccountInfo(this,{idToken:e}),_e=await UserImpl._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(_e)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(_isFirebaseServerApp(this.app)){const xe=this.app.settings.authIdToken;return xe?new Promise(Pe=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(xe).then(Pe,Pe))}):this.directlySetCurrentUser(null)}const _e=await this.assertedPersistence.getCurrentUser();let Te=_e,Ee=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const xe=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,Pe=Te?._redirectEventId,Re=await this.tryRedirectSignIn(e);(!xe||xe===Pe)&&Re?.user&&(Te=Re.user,Ee=!0)}if(!Te)return this.directlySetCurrentUser(null);if(!Te._redirectEventId){if(Ee)try{await this.beforeStateQueue.runMiddleware(Te)}catch(xe){Te=_e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(xe))}return Te?this.reloadAndSetCurrentUserOrClear(Te):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===Te._redirectEventId?this.directlySetCurrentUser(Te):this.reloadAndSetCurrentUserOrClear(Te)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _reloadWithoutSaving(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_isFirebaseServerApp(this.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this));const t=e?getModularInstance(e):null;return t&&_assert(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&_assert(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _getPasswordPolicy(this),t=new PasswordPolicyImpl(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ErrorFactory("auth","Firebase",e())}onAuthStateChanged(e,t,_e){return this.registerStateListener(this.authStateSubscription,e,t,_e)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,_e){return this.registerStateListener(this.idTokenSubscription,e,t,_e)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const _e=this.onAuthStateChanged(()=>{_e(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),_e={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(_e.tenantId=this.tenantId),await revokeToken(this,_e)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const _e=await this.getOrInitRedirectPersistenceManager(t);return e===null?_e.removeCurrentUser():_e.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_getInstance(e)||this._popupRedirectResolver;_assert(t,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,_e;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((_e=this.redirectUser)===null||_e===void 0?void 0:_e._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _e=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==_e&&(this.lastNotifiedUid=_e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,_e,Te){if(this._deleted)return()=>{};const Ee=typeof t=="function"?t:t.next.bind(t);let xe=!1;const Pe=this._isInitialized?Promise.resolve():this._initializationPromise;if(_assert(Pe,this,"internal-error"),Pe.then(()=>{xe||Ee(this.currentUser)}),typeof t=="function"){const Re=e.addObserver(t,_e,Te);return()=>{xe=!0,Re()}}else{const Re=e.addObserver(t);return()=>{xe=!0,Re()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const _e=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());_e&&(t["X-Firebase-Client"]=_e);const Te=await this._getAppCheckToken();return Te&&(t["X-Firebase-AppCheck"]=Te),t}async _getAppCheckToken(){var e;if(_isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&_logWarn(`Error while retrieving App Check token: ${t.error}`),t?.token}}function _castAuth(r){return getModularInstance(r)}class Subscription{constructor(e){this.auth=e,this.observer=null,this.addObserver=createSubscribe(t=>this.observer=t)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let externalJSProvider={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _setExternalJSProvider(r){externalJSProvider=r}function _loadJS(r){return externalJSProvider.loadJS(r)}function _recaptchaEnterpriseScriptUrl(){return externalJSProvider.recaptchaEnterpriseScript}function _gapiScriptUrl(){return externalJSProvider.gapiScript}function _generateCallbackName(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class MockGreCAPTCHATopLevel{constructor(){this.enterprise=new MockGreCAPTCHA}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class MockGreCAPTCHA{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const RECAPTCHA_ENTERPRISE_VERIFIER_TYPE="recaptcha-enterprise",FAKE_TOKEN="NO_RECAPTCHA";class RecaptchaEnterpriseVerifier{constructor(e){this.type=RECAPTCHA_ENTERPRISE_VERIFIER_TYPE,this.auth=_castAuth(e)}async verify(e="verify",t=!1){async function _e(Ee){if(!t){if(Ee.tenantId==null&&Ee._agentRecaptchaConfig!=null)return Ee._agentRecaptchaConfig.siteKey;if(Ee.tenantId!=null&&Ee._tenantRecaptchaConfigs[Ee.tenantId]!==void 0)return Ee._tenantRecaptchaConfigs[Ee.tenantId].siteKey}return new Promise(async(xe,Pe)=>{getRecaptchaConfig(Ee,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Re=>{if(Re.recaptchaKey===void 0)Pe(new Error("recaptcha Enterprise site key undefined"));else{const ke=new RecaptchaConfig(Re);return Ee.tenantId==null?Ee._agentRecaptchaConfig=ke:Ee._tenantRecaptchaConfigs[Ee.tenantId]=ke,xe(ke.siteKey)}}).catch(Re=>{Pe(Re)})})}function Te(Ee,xe,Pe){const Re=window.grecaptcha;isEnterprise(Re)?Re.enterprise.ready(()=>{Re.enterprise.execute(Ee,{action:e}).then(ke=>{xe(ke)}).catch(()=>{xe(FAKE_TOKEN)})}):Pe(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MockGreCAPTCHATopLevel().execute("siteKey",{action:"verify"}):new Promise((Ee,xe)=>{_e(this.auth).then(Pe=>{if(!t&&isEnterprise(window.grecaptcha))Te(Pe,Ee,xe);else{if(typeof window>"u"){xe(new Error("RecaptchaVerifier is only supported in browser"));return}let Re=_recaptchaEnterpriseScriptUrl();Re.length!==0&&(Re+=Pe),_loadJS(Re).then(()=>{Te(Pe,Ee,xe)}).catch(ke=>{xe(ke)})}}).catch(Pe=>{xe(Pe)})})}}async function injectRecaptchaFields(r,e,t,_e=!1,Te=!1){const Ee=new RecaptchaEnterpriseVerifier(r);let xe;if(Te)xe=FAKE_TOKEN;else try{xe=await Ee.verify(t)}catch{xe=await Ee.verify(t,!0)}const Pe=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in Pe){const Re=Pe.phoneEnrollmentInfo.phoneNumber,ke=Pe.phoneEnrollmentInfo.recaptchaToken;Object.assign(Pe,{phoneEnrollmentInfo:{phoneNumber:Re,recaptchaToken:ke,captchaResponse:xe,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in Pe){const Re=Pe.phoneSignInInfo.recaptchaToken;Object.assign(Pe,{phoneSignInInfo:{recaptchaToken:Re,captchaResponse:xe,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return Pe}return _e?Object.assign(Pe,{captchaResp:xe}):Object.assign(Pe,{captchaResponse:xe}),Object.assign(Pe,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Pe,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Pe}async function handleRecaptchaFlow(r,e,t,_e,Te){var Ee;if(!((Ee=r._getRecaptchaConfig())===null||Ee===void 0)&&Ee.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const xe=await injectRecaptchaFields(r,e,t,t==="getOobCode");return _e(r,xe)}else return _e(r,e).catch(async xe=>{if(xe.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Pe=await injectRecaptchaFields(r,e,t,t==="getOobCode");return _e(r,Pe)}else return Promise.reject(xe)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function initializeAuth(r,e){const t=_getProvider(r,"auth");if(t.isInitialized()){const Te=t.getImmediate(),Ee=t.getOptions();if(deepEqual(Ee,e??{}))return Te;_fail(Te,"already-initialized")}return t.initialize({options:e})}function _initializeAuthInstance(r,e){const t=e?.persistence||[],_e=(Array.isArray(t)?t:[t]).map(_getInstance);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(_e,e?.popupRedirectResolver)}function connectAuthEmulator(r,e,t){const _e=_castAuth(r);_assert(/^https?:\/\//.test(e),_e,"invalid-emulator-scheme");const Te=!1,Ee=extractProtocol(e),{host:xe,port:Pe}=extractHostAndPort(e),Re=Pe===null?"":`:${Pe}`,ke={url:`${Ee}//${xe}${Re}/`},Ce=Object.freeze({host:xe,port:Pe,protocol:Ee.replace(":",""),options:Object.freeze({disableWarnings:Te})});if(!_e._canInitEmulator){_assert(_e.config.emulator&&_e.emulatorConfig,_e,"emulator-config-failed"),_assert(deepEqual(ke,_e.config.emulator)&&deepEqual(Ce,_e.emulatorConfig),_e,"emulator-config-failed");return}_e.config.emulator=ke,_e.emulatorConfig=Ce,_e.settings.appVerificationDisabledForTesting=!0,isCloudWorkstation(xe)?(pingServer(`${Ee}//${xe}${Re}`),updateEmulatorBanner("Auth",!0)):emitEmulatorWarning()}function extractProtocol(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function extractHostAndPort(r){const e=extractProtocol(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const _e=t[2].split("@").pop()||"",Te=/^(\[[^\]]+\])(:|$)/.exec(_e);if(Te){const Ee=Te[1];return{host:Ee,port:parsePort(_e.substr(Ee.length+1))}}else{const[Ee,xe]=_e.split(":");return{host:Ee,port:parsePort(xe)}}}function parsePort(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function emitEmulatorWarning(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthCredential{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(e){return debugFail("not implemented")}_linkToIdToken(e,t){return debugFail("not implemented")}_getReauthenticationResolver(e){return debugFail("not implemented")}}async function linkEmailPassword(r,e){return _performApiRequest(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithPassword(r,e){return _performSignInRequest(r,"POST","/v1/accounts:signInWithPassword",_addTidIfNecessary(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithEmailLink$1(r,e){return _performSignInRequest(r,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(r,e))}async function signInWithEmailLinkForLinking(r,e){return _performSignInRequest(r,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthCredential extends AuthCredential{constructor(e,t,_e,Te=null){super("password",_e),this._email=e,this._password=t,this._tenantId=Te}static _fromEmailAndPassword(e,t){return new EmailAuthCredential(e,t,"password")}static _fromEmailAndCode(e,t,_e=null){return new EmailAuthCredential(e,t,"emailLink",_e)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(e,t,"signInWithPassword",signInWithPassword);case"emailLink":return signInWithEmailLink$1(e,{email:this._email,oobCode:this._password});default:_fail(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const _e={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(e,_e,"signUpPassword",linkEmailPassword);case"emailLink":return signInWithEmailLinkForLinking(e,{idToken:t,email:this._email,oobCode:this._password});default:_fail(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp(r,e){return _performSignInRequest(r,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new OAuthCredential(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):_fail("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:_e,signInMethod:Te}=t,Ee=__rest(t,["providerId","signInMethod"]);if(!_e||!Te)return null;const xe=new OAuthCredential(_e,Te);return xe.idToken=Ee.idToken||void 0,xe.accessToken=Ee.accessToken||void 0,xe.secret=Ee.secret,xe.nonce=Ee.nonce,xe.pendingToken=Ee.pendingToken||null,xe}_getIdTokenResponse(e){const t=this.buildRequest();return signInWithIdp(e,t)}_linkToIdToken(e,t){const _e=this.buildRequest();return _e.idToken=t,signInWithIdp(e,_e)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,signInWithIdp(e,t)}buildRequest(){const e={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=querystring(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parseMode(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function parseDeepLink(r){const e=querystringDecode(extractQuerystring(r)).link,t=e?querystringDecode(extractQuerystring(e)).deep_link_id:null,_e=querystringDecode(extractQuerystring(r)).deep_link_id;return(_e?querystringDecode(extractQuerystring(_e)).link:null)||_e||t||e||r}class ActionCodeURL{constructor(e){var t,_e,Te,Ee,xe,Pe;const Re=querystringDecode(extractQuerystring(e)),ke=(t=Re.apiKey)!==null&&t!==void 0?t:null,Ce=(_e=Re.oobCode)!==null&&_e!==void 0?_e:null,Se=parseMode((Te=Re.mode)!==null&&Te!==void 0?Te:null);_assert(ke&&Ce&&Se,"argument-error"),this.apiKey=ke,this.operation=Se,this.code=Ce,this.continueUrl=(Ee=Re.continueUrl)!==null&&Ee!==void 0?Ee:null,this.languageCode=(xe=Re.lang)!==null&&xe!==void 0?xe:null,this.tenantId=(Pe=Re.tenantId)!==null&&Pe!==void 0?Pe:null}static parseLink(e){const t=parseDeepLink(e);try{return new ActionCodeURL(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthProvider{constructor(){this.providerId=EmailAuthProvider.PROVIDER_ID}static credential(e,t){return EmailAuthCredential._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const _e=ActionCodeURL.parseLink(t);return _assert(_e,"argument-error"),EmailAuthCredential._fromEmailAndCode(e,_e.code,_e.tenantId)}}EmailAuthProvider.PROVIDER_ID="password";EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD="password";EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FederatedAuthProvider{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(e){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return FacebookAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return FacebookAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com";FacebookAuthProvider.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return GoogleAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GoogleAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:_e}=e;if(!t&&!_e)return null;try{return GoogleAuthProvider.credential(t,_e)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com";GoogleAuthProvider.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(e){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return GithubAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GithubAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return GithubAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com";GithubAuthProvider.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(e,t){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return TwitterAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return TwitterAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:_e}=e;if(!t||!_e)return null;try{return TwitterAuthProvider.credential(t,_e)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com";TwitterAuthProvider.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserCredentialImpl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,_e,Te=!1){const Ee=await UserImpl._fromIdTokenResponse(e,_e,Te),xe=providerIdForResponse(_e);return new UserCredentialImpl({user:Ee,providerId:xe,_tokenResponse:_e,operationType:t})}static async _forOperation(e,t,_e){await e._updateTokensIfNecessary(_e,!0);const Te=providerIdForResponse(_e);return new UserCredentialImpl({user:e,providerId:Te,_tokenResponse:_e,operationType:t})}}function providerIdForResponse(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MultiFactorError extends FirebaseError{constructor(e,t,_e,Te){var Ee;super(t.code,t.message),this.operationType=_e,this.user=Te,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:e.name,tenantId:(Ee=e.tenantId)!==null&&Ee!==void 0?Ee:void 0,_serverResponse:t.customData._serverResponse,operationType:_e}}static _fromErrorAndOperation(e,t,_e,Te){return new MultiFactorError(e,t,_e,Te)}}function _processCredentialSavingMfaContextIfNecessary(r,e,t,_e){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(Ee=>{throw Ee.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation(r,Ee,e,_e):Ee})}async function _link$1(r,e,t=!1){const _e=await _logoutIfInvalidated(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return UserCredentialImpl._forOperation(r,"link",_e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate(r,e,t=!1){const{auth:_e}=r;if(_isFirebaseServerApp(_e.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(_e));const Te="reauthenticate";try{const Ee=await _logoutIfInvalidated(r,_processCredentialSavingMfaContextIfNecessary(_e,Te,e,r),t);_assert(Ee.idToken,_e,"internal-error");const xe=_parseToken(Ee.idToken);_assert(xe,_e,"internal-error");const{sub:Pe}=xe;return _assert(r.uid===Pe,_e,"user-mismatch"),UserCredentialImpl._forOperation(r,Te,Ee)}catch(Ee){throw Ee?.code==="auth/user-not-found"&&_fail(_e,"user-mismatch"),Ee}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential(r,e,t=!1){if(_isFirebaseServerApp(r.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(r));const _e="signIn",Te=await _processCredentialSavingMfaContextIfNecessary(r,_e,e),Ee=await UserCredentialImpl._fromIdTokenResponse(r,_e,Te);return t||await r._updateCurrentUser(Ee.user),Ee}async function signInWithCredential(r,e){return _signInWithCredential(_castAuth(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function recachePasswordPolicy(r){const e=_castAuth(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function signInWithEmailAndPassword(r,e,t){return _isFirebaseServerApp(r.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(r)):signInWithCredential(getModularInstance(r),EmailAuthProvider.credential(e,t)).catch(async _e=>{throw _e.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(r),_e})}function onIdTokenChanged(r,e,t,_e){return getModularInstance(r).onIdTokenChanged(e,t,_e)}function beforeAuthStateChanged(r,e,t){return getModularInstance(r).beforeAuthStateChanged(e,t)}function onAuthStateChanged(r,e,t,_e){return getModularInstance(r).onAuthStateChanged(e,t,_e)}const STORAGE_AVAILABLE_KEY="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserPersistenceClass{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const _e=this.storage.getItem(t),Te=this.localCache[t];_e!==Te&&e(t,Te,_e)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((xe,Pe,Re)=>{this.notifyListeners(xe,Re)});return}const _e=e.key;t?this.detachListener():this.stopPolling();const Te=()=>{const xe=this.storage.getItem(_e);!t&&this.localCache[_e]===xe||this.notifyListeners(_e,xe)},Ee=this.storage.getItem(_e);_isIE10()&&Ee!==e.newValue&&e.newValue!==e.oldValue?setTimeout(Te,IE10_LOCAL_STORAGE_SYNC_DELAY):Te()}notifyListeners(e,t){this.localCache[e]=t;const _e=this.listeners[e];if(_e)for(const Te of Array.from(_e))Te(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,_e)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:_e}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _allSettled(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Receiver{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(Te=>Te.isListeningto(e));if(t)return t;const _e=new Receiver(e);return this.receivers.push(_e),_e}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:_e,eventType:Te,data:Ee}=t.data,xe=this.handlersMap[Te];if(!xe?.size)return;t.ports[0].postMessage({status:"ack",eventId:_e,eventType:Te});const Pe=Array.from(xe).map(async ke=>ke(t.origin,Ee)),Re=await _allSettled(Pe);t.ports[0].postMessage({status:"done",eventId:_e,eventType:Te,response:Re})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _generateEventId(r="",e=10){let t="";for(let _e=0;_e<e;_e++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sender{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,_e=50){const Te=typeof MessageChannel<"u"?new MessageChannel:null;if(!Te)throw new Error("connection_unavailable");let Ee,xe;return new Promise((Pe,Re)=>{const ke=_generateEventId("",20);Te.port1.start();const Ce=setTimeout(()=>{Re(new Error("unsupported_event"))},_e);xe={messageChannel:Te,onMessage(Se){const Ae=Se;if(Ae.data.eventId===ke)switch(Ae.data.status){case"ack":clearTimeout(Ce),Ee=setTimeout(()=>{Re(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ee),Pe(Ae.data.response);break;default:clearTimeout(Ce),clearTimeout(Ee),Re(new Error("invalid_response"));break}}},this.handlers.add(xe),Te.port1.addEventListener("message",xe.onMessage),this.target.postMessage({eventType:e,eventId:ke,data:t},[Te.port2])}).finally(()=>{xe&&this.removeMessageHandler(xe)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window(){return window}function _setWindowLocation(r){_window().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return typeof _window().WorkerGlobalScope<"u"&&typeof _window().importScripts=="function"}async function _getActiveServiceWorker(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){var r;return((r=navigator?.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function getObjectStore(r,e){return r.transaction([DB_OBJECTSTORE_NAME],e?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const r=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(r).toPromise()}function _openDatabase(){const r=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const _e=r.result;try{_e.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(Te){t(Te)}}),r.addEventListener("success",async()=>{const _e=r.result;_e.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?e(_e):(_e.close(),await _deleteDatabase(),e(await _openDatabase()))})})}async function _putObject(r,e,t){const _e=getObjectStore(r,!0).put({[DB_DATA_KEYPATH]:e,value:t});return new DBPromise(_e).toPromise()}async function getObject(r,e){const t=getObjectStore(r,!1).get(e),_e=await new DBPromise(t).toPromise();return _e===void 0?null:_e.value}function _deleteObject(r,e){const t=getObjectStore(r,!0).delete(e);return new DBPromise(t).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(e){let t=0;for(;;)try{const _e=await this._openDb();return await e(_e)}catch(_e){if(t++>_TRANSACTION_RETRY_COUNT)throw _e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const _e=await this.sender._send("ping",{},800);_e&&!((e=_e[0])===null||e===void 0)&&e.fulfilled&&!((t=_e[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _openDatabase();return await _putObject(e,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(e,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(_e=>_putObject(_e,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(_e=>getObject(_e,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>_deleteObject(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(Te=>{const Ee=getObjectStore(Te,!1).getAll();return new DBPromise(Ee).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],_e=new Set;if(e.length!==0)for(const{fbase_key:Te,value:Ee}of e)_e.add(Te),JSON.stringify(this.localCache[Te])!==JSON.stringify(Ee)&&(this.notifyListeners(Te,Ee),t.push(Te));for(const Te of Object.keys(this.localCache))this.localCache[Te]&&!_e.has(Te)&&(this.notifyListeners(Te,null),t.push(Te));return t}notifyListeners(e,t){this.localCache[e]=t;const _e=this.listeners[e];if(_e)for(const Te of Array.from(_e))Te(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;new Delay(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _withDefaultResolver(r,e){return e?_getInstance(e):(_assert(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IdpCredential extends AuthCredential{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return signInWithIdp(e,this._buildIdpRequest())}_linkToIdToken(e,t){return signInWithIdp(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return signInWithIdp(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function _signIn(r){return _signInWithCredential(r.auth,new IdpCredential(r),r.bypassAuthState)}function _reauth(r){const{auth:e,user:t}=r;return _assert(t,e,"internal-error"),_reauthenticate(t,new IdpCredential(r),r.bypassAuthState)}async function _link(r){const{auth:e,user:t}=r;return _assert(t,e,"internal-error"),_link$1(t,new IdpCredential(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AbstractPopupRedirectOperation{constructor(e,t,_e,Te,Ee=!1){this.auth=e,this.resolver=_e,this.user=Te,this.bypassAuthState=Ee,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(_e){this.reject(_e)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:_e,postBody:Te,tenantId:Ee,error:xe,type:Pe}=e;if(xe){this.reject(xe);return}const Re={auth:this.auth,requestUri:t,sessionId:_e,tenantId:Ee||void 0,postBody:Te||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(Pe)(Re))}catch(ke){this.reject(ke)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);class PopupOperation extends AbstractPopupRedirectOperation{constructor(e,t,_e,Te,Ee){super(e,t,Te,Ee),this.provider=_e,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _assert(e,this.auth,"internal-error"),e}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const e=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,_e;if(!((_e=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||_e===void 0)&&_e.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_POLL_WINDOW_CLOSE_TIMEOUT.get())};e()}}PopupOperation.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(e,t,_e=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,_e),this.eventId=null}async execute(){let e=redirectOutcomeMap.get(this.auth._key());if(!e){try{const _e=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(_e)}catch(t){e=()=>Promise.reject(t)}redirectOutcomeMap.set(this.auth._key(),e)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(r,e){const t=pendingRedirectKey(e),_e=resolverPersistence(r);if(!await _e._isAvailable())return!1;const Te=await _e._get(t)==="true";return await _e._remove(t),Te}function _overrideRedirectResult(r,e){redirectOutcomeMap.set(r._key(),e)}function resolverPersistence(r){return _getInstance(r._redirectPersistence)}function pendingRedirectKey(r){return _persistenceKeyName(PENDING_REDIRECT_KEY,r.config.apiKey,r.name)}async function _getRedirectResult(r,e,t=!1){if(_isFirebaseServerApp(r.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(r));const _e=_castAuth(r),Te=_withDefaultResolver(_e,e),xe=await new RedirectAction(_e,Te,t).execute();return xe&&!t&&(delete xe.user._redirectEventId,await _e._persistUserIfCurrent(xe.user),await _e._setRedirectUser(null,e)),xe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVENT_DUPLICATION_CACHE_DURATION_MS=10*60*1e3;class AuthEventManager{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(_e=>{this.isEventForConsumer(e,_e)&&(t=!0,this.sendToConsumer(e,_e),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!isRedirectEvent(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var _e;if(e.error&&!isNullRedirectEvent(e)){const Te=((_e=e.error.code)===null||_e===void 0?void 0:_e.split("auth/")[1])||"internal-error";t.onError(_createError(this.auth,Te))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const _e=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&_e}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(e))}saveEventToCache(e){this.cachedEventUids.add(eventUid(e)),this.lastProcessedEventTime=Date.now()}}function eventUid(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function isNullRedirectEvent({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function isRedirectEvent(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig(r,e={}){return _performApiRequest(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(r){if(r.config.emulator)return;const{authorizedDomains:e}=await _getProjectConfig(r);for(const t of e)try{if(matchDomain(t))return}catch{}_fail(r,"unauthorized-domain")}function matchDomain(r){const e=_getCurrentUrl(),{protocol:t,hostname:_e}=new URL(e);if(r.startsWith("chrome-extension://")){const xe=new URL(r);return xe.hostname===""&&_e===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&xe.hostname===_e}if(!HTTP_REGEX.test(t))return!1;if(IP_ADDRESS_REGEX.test(r))return _e===r;const Te=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+Te+"|"+Te+")$","i").test(_e)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const r=_window().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function loadGapi(r){return new Promise((e,t)=>{var _e,Te,Ee;function xe(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),t(_createError(r,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(!((Te=(_e=_window().gapi)===null||_e===void 0?void 0:_e.iframes)===null||Te===void 0)&&Te.Iframe)e(gapi.iframes.getContext());else if(!((Ee=_window().gapi)===null||Ee===void 0)&&Ee.load)xe();else{const Pe=_generateCallbackName("iframefcb");return _window()[Pe]=()=>{gapi.load?xe():t(_createError(r,"network-request-failed"))},_loadJS(`${_gapiScriptUrl()}?onload=${Pe}`).catch(Re=>t(Re))}}).catch(e=>{throw cachedGApiLoader=null,e})}let cachedGApiLoader=null;function _loadGapi(r){return cachedGApiLoader=cachedGApiLoader||loadGapi(r),cachedGApiLoader}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(r){const e=r.config;_assert(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?_emulatorUrl(e,EMULATED_IFRAME_PATH):`https://${r.config.authDomain}/${IFRAME_PATH}`,_e={apiKey:e.apiKey,appName:r.name,v:SDK_VERSION},Te=EID_FROM_APIHOST.get(r.config.apiHost);Te&&(_e.eid=Te);const Ee=r._getFrameworks();return Ee.length&&(_e.fw=Ee.join(",")),`${t}?${querystring(_e).slice(1)}`}async function _openIframe(r){const e=await _loadGapi(r),t=_window().gapi;return _assert(t,r,"internal-error"),e.open({where:document.body,url:getIframeUrl(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},_e=>new Promise(async(Te,Ee)=>{await _e.restyle({setHideOnLeave:!1});const xe=_createError(r,"network-request-failed"),Pe=_window().setTimeout(()=>{Ee(xe)},PING_TIMEOUT.get());function Re(){_window().clearTimeout(Pe),Te(_e)}_e.ping(Re).then(Re,()=>{Ee(xe)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open(r,e,t,_e=DEFAULT_WIDTH,Te=DEFAULT_HEIGHT){const Ee=Math.max((window.screen.availHeight-Te)/2,0).toString(),xe=Math.max((window.screen.availWidth-_e)/2,0).toString();let Pe="";const Re=Object.assign(Object.assign({},BASE_POPUP_OPTIONS),{width:_e.toString(),height:Te.toString(),top:Ee,left:xe}),ke=getUA().toLowerCase();t&&(Pe=_isChromeIOS(ke)?TARGET_BLANK:t),_isFirefox(ke)&&(e=e||FIREFOX_EMPTY_URL,Re.scrollbars="yes");const Ce=Object.entries(Re).reduce((Ae,[Ie,Me])=>`${Ae}${Ie}=${Me},`,"");if(_isIOSStandalone(ke)&&Pe!=="_self")return openAsNewWindowIOS(e||"",Pe),new AuthPopup(null);const Se=window.open(e||"",Pe,Ce);_assert(Se,r,"popup-blocked");try{Se.focus()}catch{}return new AuthPopup(Se)}function openAsNewWindowIOS(r,e){const t=document.createElement("a");t.href=r,t.target=e;const _e=document.createEvent("MouseEvent");_e.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(_e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler",FIREBASE_APP_CHECK_FRAGMENT_ID=encodeURIComponent("fac");async function _getRedirectUrl(r,e,t,_e,Te,Ee){_assert(r.config.authDomain,r,"auth-domain-config-required"),_assert(r.config.apiKey,r,"invalid-api-key");const xe={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:_e,v:SDK_VERSION,eventId:Te};if(e instanceof FederatedAuthProvider){e.setDefaultLanguage(r.languageCode),xe.providerId=e.providerId||"",isEmpty$2(e.getCustomParameters())||(xe.customParameters=JSON.stringify(e.getCustomParameters()));for(const[Ce,Se]of Object.entries({}))xe[Ce]=Se}if(e instanceof BaseOAuthProvider){const Ce=e.getScopes().filter(Se=>Se!=="");Ce.length>0&&(xe.scopes=Ce.join(","))}r.tenantId&&(xe.tid=r.tenantId);const Pe=xe;for(const Ce of Object.keys(Pe))Pe[Ce]===void 0&&delete Pe[Ce];const Re=await r._getAppCheckToken(),ke=Re?`#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent(Re)}`:"";return`${getHandlerBase(r)}?${querystring(Pe).slice(1)}${ke}`}function getHandlerBase({config:r}){return r.emulator?_emulatorUrl(r,EMULATOR_WIDGET_PATH):`https://${r.authDomain}/${WIDGET_PATH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(e,t,_e,Te){var Ee;debugAssert((Ee=this.eventManagers[e._key()])===null||Ee===void 0?void 0:Ee.manager,"_initialize() not called before _openPopup()");const xe=await _getRedirectUrl(e,t,_e,_getCurrentUrl(),Te);return _open(e,xe,_generateEventId())}async _openRedirect(e,t,_e,Te){await this._originValidation(e);const Ee=await _getRedirectUrl(e,t,_e,_getCurrentUrl(),Te);return _setWindowLocation(Ee),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:Te,promise:Ee}=this.eventManagers[t];return Te?Promise.resolve(Te):(debugAssert(Ee,"If manager is not set, promise should be"),Ee)}const _e=this.initAndGetManager(e);return this.eventManagers[t]={promise:_e},_e.catch(()=>{delete this.eventManagers[t]}),_e}async initAndGetManager(e){const t=await _openIframe(e),_e=new AuthEventManager(e);return t.register("authEvent",Te=>(_assert(Te?.authEvent,e,"invalid-auth-event"),{status:_e.onEvent(Te.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:_e},this.iframes[e._key()]=t,_e}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},Te=>{var Ee;const xe=(Ee=Te?.[0])===null||Ee===void 0?void 0:Ee[WEB_STORAGE_SUPPORT_KEY];xe!==void 0&&t(!!xe),_fail(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=_validateOrigin(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name$3="@firebase/auth",version$1="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthInterop{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(_e=>{e(_e?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVersionForPlatform(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function registerAuth(r){_registerComponent(new Component("auth",(e,{options:t})=>{const _e=e.getProvider("app").getImmediate(),Te=e.getProvider("heartbeat"),Ee=e.getProvider("app-check-internal"),{apiKey:xe,authDomain:Pe}=_e.options;_assert(xe&&!xe.includes(":"),"invalid-api-key",{appName:_e.name});const Re={apiKey:xe,authDomain:Pe,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(r)},ke=new AuthImpl(_e,Te,Ee,Re);return _initializeAuthInstance(ke,t),ke},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,_e)=>{e.getProvider("auth-internal").initialize()})),_registerComponent(new Component("auth-internal",e=>{const t=_castAuth(e.getProvider("auth").getImmediate());return(_e=>new AuthInterop(_e))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name$3,version$1,getVersionForPlatform(r)),registerVersion(name$3,version$1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ID_TOKEN_MAX_AGE=5*60,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=r=>async e=>{const t=e&&await e.getIdTokenResult(),_e=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(_e&&_e>authIdTokenMaxAge)return;const Te=t?.token;lastPostedIdToken!==Te&&(lastPostedIdToken=Te,await fetch(r,{method:Te?"POST":"DELETE",headers:Te?{Authorization:`Bearer ${Te}`}:{}}))};function getAuth(r=getApp()){const e=_getProvider(r,"auth");if(e.isInitialized())return e.getImmediate();const t=initializeAuth(r,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),_e=getExperimentalSetting("authTokenSyncURL");if(_e&&typeof isSecureContext=="boolean"&&isSecureContext){const Ee=new URL(_e,location.origin);if(location.origin===Ee.origin){const xe=mintCookieFactory(Ee.toString());beforeAuthStateChanged(t,xe,()=>xe(t.currentUser)),onIdTokenChanged(t,Pe=>xe(Pe))}}const Te=getDefaultEmulatorHost("auth");return Te&&connectAuthEmulator(t,`http://${Te}`),t}function getScriptParentElement(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}_setExternalJSProvider({loadJS(r){return new Promise((e,t)=>{const _e=document.createElement("script");_e.setAttribute("src",r),_e.onload=e,_e.onerror=Te=>{const Ee=_createError("internal-error");Ee.customData=Te,t(Ee)},_e.type="text/javascript",_e.charset="UTF-8",getScriptParentElement().appendChild(_e)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});registerAuth("Browser");var name$2="firebase",version="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name$2,version,"app");const firebaseConfig={apiKey:"AIzaSyCHS52OJz8dlhTOA3BFv3lhTT02v6BfZM8",authDomain:"edgex-e6582.firebaseapp.com",projectId:"edgex-e6582",storageBucket:"edgex-e6582.appspot.com",messagingSenderId:"1005678739291",appId:"1:1005678739291:web:29360b6d2d6f2ef884e47e",measurementId:"G-MX6KJMJH62"},app=initializeApp(firebaseConfig),db=getFirestore(app),auth=getAuth(app);var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),_excluded=["attr","size","title"];function _objectWithoutProperties(r,e){if(r==null)return{};var t=_objectWithoutPropertiesLoose(r,e),_e,Te;if(Object.getOwnPropertySymbols){var Ee=Object.getOwnPropertySymbols(r);for(Te=0;Te<Ee.length;Te++)_e=Ee[Te],!(e.indexOf(_e)>=0)&&Object.prototype.propertyIsEnumerable.call(r,_e)&&(t[_e]=r[_e])}return t}function _objectWithoutPropertiesLoose(r,e){if(r==null)return{};var t={};for(var _e in r)if(Object.prototype.hasOwnProperty.call(r,_e)){if(e.indexOf(_e)>=0)continue;t[_e]=r[_e]}return t}function _extends(){return _extends=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var _e in t)Object.prototype.hasOwnProperty.call(t,_e)&&(r[_e]=t[_e])}return r},_extends.apply(this,arguments)}function ownKeys(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(r);e&&(_e=_e.filter(function(Te){return Object.getOwnPropertyDescriptor(r,Te).enumerable})),t.push.apply(t,_e)}return t}function _objectSpread(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(t),!0).forEach(function(_e){_defineProperty(r,_e,t[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(_e){Object.defineProperty(r,_e,Object.getOwnPropertyDescriptor(t,_e))})}return r}function _defineProperty(r,e,t){return e=_toPropertyKey(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function _toPropertyKey(r){var e=_toPrimitive(r,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var _e=t.call(r,e);if(typeof _e!="object")return _e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Tree2Element(r){return r&&r.map((e,t)=>React.createElement(e.tag,_objectSpread({key:t},e.attr),Tree2Element(e.child)))}function GenIcon(r){return e=>React.createElement(IconBase,_extends({attr:_objectSpread({},r.attr)},e),Tree2Element(r.child))}function IconBase(r){var e=t=>{var{attr:_e,size:Te,title:Ee}=r,xe=_objectWithoutProperties(r,_excluded),Pe=Te||t.size||"1em",Re;return t.className&&(Re=t.className),r.className&&(Re=(Re?Re+" ":"")+r.className),React.createElement("svg",_extends({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,_e,xe,{className:Re,style:_objectSpread(_objectSpread({color:r.color||t.color},t.style),r.style),height:Pe,width:Pe,xmlns:"http://www.w3.org/2000/svg"}),Ee&&React.createElement("title",null,Ee),r.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,t=>e(t)):e(DefaultContext)}function FaRobot(r){return GenIcon({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M32,224H64V416H32A31.96166,31.96166,0,0,1,0,384V256A31.96166,31.96166,0,0,1,32,224Zm512-48V448a64.06328,64.06328,0,0,1-64,64H160a64.06328,64.06328,0,0,1-64-64V176a79.974,79.974,0,0,1,80-80H288V32a32,32,0,0,1,64,0V96H464A79.974,79.974,0,0,1,544,176ZM264,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,264,256Zm-8,128H192v32h64Zm96,0H288v32h64ZM456,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,456,256Zm-8,128H384v32h64ZM640,256V384a31.96166,31.96166,0,0,1-32,32H576V224h32A31.96166,31.96166,0,0,1,640,256Z"},child:[]}]})(r)}function FaUserCircle(r){return GenIcon({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(r)}const ChatBubble=({role:r,text:e})=>{const t=r==="user",_e=e==="__typing__",[Te,Ee]=reactExports.useState("");return reactExports.useEffect(()=>{if(_e)return;let xe=0;const Pe=setInterval(()=>{Ee(Re=>e.slice(0,xe+1)),xe++,xe>=e.length&&clearInterval(Pe)},8);return()=>clearInterval(Pe)},[e,_e]),jsxRuntimeExports.jsxs("div",{className:`flex items-start gap-3 mb-4 ${t?"justify-end flex-row-reverse":""}`,children:[jsxRuntimeExports.jsx("div",{className:"mt-1",children:t?jsxRuntimeExports.jsx(FaUserCircle,{className:"w-6 h-6 text-indigo-500 drop-shadow"}):jsxRuntimeExports.jsx(FaRobot,{className:"w-6 h-6 text-gray-500 drop-shadow"})}),jsxRuntimeExports.jsx("div",{className:`max-w-[80%] px-4 py-3 text-sm font-medium whitespace-pre-wrap transition-all duration-300
        ${t?"bg-gradient-to-br from-indigo-500 to-purple-500 text-white rounded-2xl rounded-br-none shadow-lg":"bg-white/20 text-gray-900 dark:text-white border border-white/30 backdrop-blur-lg rounded-2xl rounded-bl-none shadow-inner"}`,children:_e?jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1 h-5",children:[jsxRuntimeExports.jsx("span",{className:"animate-bounce",children:"•"}),jsxRuntimeExports.jsx("span",{className:"animate-bounce delay-100",children:"•"}),jsxRuntimeExports.jsx("span",{className:"animate-bounce delay-200",children:"•"})]}):Te})]})};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase$1=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,_e)=>_e?_e.toUpperCase():t.toLowerCase()),toPascalCase=r=>{const e=toCamelCase$1(r);return e.charAt(0).toUpperCase()+e.slice(1)},mergeClasses=(...r)=>r.filter((e,t,_e)=>!!e&&e.trim()!==""&&_e.indexOf(e)===t).join(" ").trim(),hasA11yProp=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:_e,className:Te="",children:Ee,iconNode:xe,...Pe},Re)=>reactExports.createElement("svg",{ref:Re,...defaultAttributes,width:e,height:e,stroke:r,strokeWidth:_e?Number(t)*24/Number(e):t,className:mergeClasses("lucide",Te),...!Ee&&!hasA11yProp(Pe)&&{"aria-hidden":"true"},...Pe},[...xe.map(([ke,Ce])=>reactExports.createElement(ke,Ce)),...Array.isArray(Ee)?Ee:[Ee]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(r,e)=>{const t=reactExports.forwardRef(({className:_e,...Te},Ee)=>reactExports.createElement(Icon,{ref:Ee,iconNode:e,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(r))}`,`lucide-${r}`,_e),...Te}));return t.displayName=toPascalCase(r),t};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$d=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ArrowRight=createLucideIcon("arrow-right",__iconNode$d);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$c=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],Brain=createLucideIcon("brain",__iconNode$c);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$b=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}],["path",{d:"M8 12h8",key:"1wcyev"}]],CircleArrowRight=createLucideIcon("circle-arrow-right",__iconNode$b);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$a=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],CirclePlus=createLucideIcon("circle-plus",__iconNode$a);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],CircleStop=createLucideIcon("circle-stop",__iconNode$9);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$8=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],FileText=createLucideIcon("file-text",__iconNode$8);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$7=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],GraduationCap=createLucideIcon("graduation-cap",__iconNode$7);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$6=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Mic=createLucideIcon("mic",__iconNode$6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$5=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],Moon=createLucideIcon("moon",__iconNode$5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],NotebookPen=createLucideIcon("notebook-pen",__iconNode$4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],SendHorizontal=createLucideIcon("send-horizontal",__iconNode$3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Sun=createLucideIcon("sun",__iconNode$2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Target=createLucideIcon("target",__iconNode$1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Volume2=createLucideIcon("volume-2",__iconNode);function bind(r,e){return function(){return r.apply(e,arguments)}}const{toString:toString$2}=Object.prototype,{getPrototypeOf}=Object,{iterator,toStringTag}=Symbol,kindOf=(r=>e=>{const t=toString$2.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=r=>(r=r.toLowerCase(),e=>kindOf(e)===r),typeOfTest=r=>e=>typeof e===r,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(r){return r!==null&&!isUndefined(r)&&r.constructor!==null&&!isUndefined(r.constructor)&&isFunction(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&isArrayBuffer(r.buffer),e}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject$1=r=>r!==null&&typeof r=="object",isBoolean=r=>r===!0||r===!1,isPlainObject$1=r=>{if(kindOf(r)!=="object")return!1;const e=getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(toStringTag in r)&&!(iterator in r)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=r=>isObject$1(r)&&isFunction(r.pipe),isFormData=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||isFunction(r.append)&&((e=kindOf(r))==="formdata"||e==="object"&&isFunction(r.toString)&&r.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(r,e,{allOwnKeys:t=!1}={}){if(r===null||typeof r>"u")return;let _e,Te;if(typeof r!="object"&&(r=[r]),isArray(r))for(_e=0,Te=r.length;_e<Te;_e++)e.call(null,r[_e],_e,r);else{const Ee=t?Object.getOwnPropertyNames(r):Object.keys(r),xe=Ee.length;let Pe;for(_e=0;_e<xe;_e++)Pe=Ee[_e],e.call(null,r[Pe],Pe,r)}}function findKey(r,e){e=e.toLowerCase();const t=Object.keys(r);let _e=t.length,Te;for(;_e-- >0;)if(Te=t[_e],e===Te.toLowerCase())return Te;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=r=>!isUndefined(r)&&r!==_global;function merge$1(){const{caseless:r}=isContextDefined(this)&&this||{},e={},t=(_e,Te)=>{const Ee=r&&findKey(e,Te)||Te;isPlainObject$1(e[Ee])&&isPlainObject$1(_e)?e[Ee]=merge$1(e[Ee],_e):isPlainObject$1(_e)?e[Ee]=merge$1({},_e):isArray(_e)?e[Ee]=_e.slice():e[Ee]=_e};for(let _e=0,Te=arguments.length;_e<Te;_e++)arguments[_e]&&forEach(arguments[_e],t);return e}const extend$2=(r,e,t,{allOwnKeys:_e}={})=>(forEach(e,(Te,Ee)=>{t&&isFunction(Te)?r[Ee]=bind(Te,t):r[Ee]=Te},{allOwnKeys:_e}),r),stripBOM=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),inherits=(r,e,t,_e)=>{r.prototype=Object.create(e.prototype,_e),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:e.prototype}),t&&Object.assign(r.prototype,t)},toFlatObject=(r,e,t,_e)=>{let Te,Ee,xe;const Pe={};if(e=e||{},r==null)return e;do{for(Te=Object.getOwnPropertyNames(r),Ee=Te.length;Ee-- >0;)xe=Te[Ee],(!_e||_e(xe,r,e))&&!Pe[xe]&&(e[xe]=r[xe],Pe[xe]=!0);r=t!==!1&&getPrototypeOf(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e},endsWith=(r,e,t)=>{r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;const _e=r.indexOf(e,t);return _e!==-1&&_e===t},toArray=r=>{if(!r)return null;if(isArray(r))return r;let e=r.length;if(!isNumber(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=r[e];return t},isTypedArray$1=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(r,e)=>{const _e=(r&&r[iterator]).call(r);let Te;for(;(Te=_e.next())&&!Te.done;){const Ee=Te.value;e.call(r,Ee[0],Ee[1])}},matchAll=(r,e)=>{let t;const _e=[];for(;(t=r.exec(e))!==null;)_e.push(t);return _e},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,_e,Te){return _e.toUpperCase()+Te}),hasOwnProperty$1=(({hasOwnProperty:r})=>(e,t)=>r.call(e,t))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(r,e)=>{const t=Object.getOwnPropertyDescriptors(r),_e={};forEach(t,(Te,Ee)=>{let xe;(xe=e(Te,Ee,r))!==!1&&(_e[Ee]=xe||Te)}),Object.defineProperties(r,_e)},freezeMethods=r=>{reduceDescriptors(r,(e,t)=>{if(isFunction(r)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const _e=r[t];if(isFunction(_e)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},toObjectSet=(r,e)=>{const t={},_e=Te=>{Te.forEach(Ee=>{t[Ee]=!0})};return isArray(r)?_e(r):_e(String(r).split(e)),t},noop$1=()=>{},toFiniteNumber=(r,e)=>r!=null&&Number.isFinite(r=+r)?r:e;function isSpecCompliantForm(r){return!!(r&&isFunction(r.append)&&r[toStringTag]==="FormData"&&r[iterator])}const toJSONObject=r=>{const e=new Array(10),t=(_e,Te)=>{if(isObject$1(_e)){if(e.indexOf(_e)>=0)return;if(!("toJSON"in _e)){e[Te]=_e;const Ee=isArray(_e)?[]:{};return forEach(_e,(xe,Pe)=>{const Re=t(xe,Te+1);!isUndefined(Re)&&(Ee[Pe]=Re)}),e[Te]=void 0,Ee}}return _e};return t(r,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=r=>r&&(isObject$1(r)||isFunction(r))&&isFunction(r.then)&&isFunction(r.catch),_setImmediate=((r,e)=>r?setImmediate:e?((t,_e)=>(_global.addEventListener("message",({source:Te,data:Ee})=>{Te===_global&&Ee===t&&_e.length&&_e.shift()()},!1),Te=>{_e.push(Te),_global.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",isFunction(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,isIterable=r=>r!=null&&isFunction(r[iterator]),utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject:isObject$1,isPlainObject:isPlainObject$1,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray:isTypedArray$1,isFileList,forEach,merge:merge$1,extend:extend$2,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty:hasOwnProperty$1,hasOwnProp:hasOwnProperty$1,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$1,toFiniteNumber,findKey,global:_global,isContextDefined,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap,isIterable};function AxiosError$1(r,e,t,_e,Te){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),_e&&(this.request=_e),Te&&(this.response=Te,this.status=Te.status?Te.status:null)}utils$1.inherits(AxiosError$1,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError$1.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{descriptors[r]={value:r}});Object.defineProperties(AxiosError$1,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError$1.from=(r,e,t,_e,Te,Ee)=>{const xe=Object.create(prototype$1);return utils$1.toFlatObject(r,xe,function(Re){return Re!==Error.prototype},Pe=>Pe!=="isAxiosError"),AxiosError$1.call(xe,r.message,e,t,_e,Te),xe.cause=r,xe.name=r.name,Ee&&Object.assign(xe,Ee),xe};const httpAdapter=null;function isVisitable(r){return utils$1.isPlainObject(r)||utils$1.isArray(r)}function removeBrackets(r){return utils$1.endsWith(r,"[]")?r.slice(0,-2):r}function renderKey(r,e,t){return r?r.concat(e).map(function(Te,Ee){return Te=removeBrackets(Te),!t&&Ee?"["+Te+"]":Te}).join(t?".":""):e}function isFlatArray(r){return utils$1.isArray(r)&&!r.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(e){return/^is[A-Z]/.test(e)});function toFormData$1(r,e,t){if(!utils$1.isObject(r))throw new TypeError("target must be an object");e=e||new FormData,t=utils$1.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Fe,Ve){return!utils$1.isUndefined(Ve[Fe])});const _e=t.metaTokens,Te=t.visitor||Ce,Ee=t.dots,xe=t.indexes,Re=(t.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(e);if(!utils$1.isFunction(Te))throw new TypeError("visitor must be a function");function ke(Me){if(Me===null)return"";if(utils$1.isDate(Me))return Me.toISOString();if(utils$1.isBoolean(Me))return Me.toString();if(!Re&&utils$1.isBlob(Me))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(Me)||utils$1.isTypedArray(Me)?Re&&typeof Blob=="function"?new Blob([Me]):Buffer.from(Me):Me}function Ce(Me,Fe,Ve){let je=Me;if(Me&&!Ve&&typeof Me=="object"){if(utils$1.endsWith(Fe,"{}"))Fe=_e?Fe:Fe.slice(0,-2),Me=JSON.stringify(Me);else if(utils$1.isArray(Me)&&isFlatArray(Me)||(utils$1.isFileList(Me)||utils$1.endsWith(Fe,"[]"))&&(je=utils$1.toArray(Me)))return Fe=removeBrackets(Fe),je.forEach(function(qe,He){!(utils$1.isUndefined(qe)||qe===null)&&e.append(xe===!0?renderKey([Fe],He,Ee):xe===null?Fe:Fe+"[]",ke(qe))}),!1}return isVisitable(Me)?!0:(e.append(renderKey(Ve,Fe,Ee),ke(Me)),!1)}const Se=[],Ae=Object.assign(predicates,{defaultVisitor:Ce,convertValue:ke,isVisitable});function Ie(Me,Fe){if(!utils$1.isUndefined(Me)){if(Se.indexOf(Me)!==-1)throw Error("Circular reference detected in "+Fe.join("."));Se.push(Me),utils$1.forEach(Me,function(je,Be){(!(utils$1.isUndefined(je)||je===null)&&Te.call(e,je,utils$1.isString(Be)?Be.trim():Be,Fe,Ae))===!0&&Ie(je,Fe?Fe.concat(Be):[Be])}),Se.pop()}}if(!utils$1.isObject(r))throw new TypeError("data must be an object");return Ie(r),e}function encode$1(r){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(_e){return e[_e]})}function AxiosURLSearchParams(r,e){this._pairs=[],r&&toFormData$1(r,this,e)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(e,t){this._pairs.push([e,t])};prototype.toString=function(e){const t=e?function(_e){return e.call(this,_e,encode$1)}:encode$1;return this._pairs.map(function(Te){return t(Te[0])+"="+t(Te[1])},"").join("&")};function encode(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(r,e,t){if(!e)return r;const _e=t&&t.encode||encode;utils$1.isFunction(t)&&(t={serialize:t});const Te=t&&t.serialize;let Ee;if(Te?Ee=Te(e,t):Ee=utils$1.isURLSearchParams(e)?e.toString():new AxiosURLSearchParams(e,t).toString(_e),Ee){const xe=r.indexOf("#");xe!==-1&&(r=r.slice(0,xe)),r+=(r.indexOf("?")===-1?"?":"&")+Ee}return r}class InterceptorManager{constructor(){this.handlers=[]}use(e,t,_e){return this.handlers.push({fulfilled:e,rejected:t,synchronous:_e?_e.synchronous:!1,runWhen:_e?_e.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){utils$1.forEach(this.handlers,function(_e){_e!==null&&e(_e)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(r,e){return toFormData$1(r,new platform.classes.URLSearchParams,Object.assign({visitor:function(t,_e,Te,Ee){return platform.isNode&&utils$1.isBuffer(t)?(this.append(_e,t.toString("base64")),!1):Ee.defaultVisitor.apply(this,arguments)}},e))}function parsePropPath(r){return utils$1.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function arrayToObject(r){const e={},t=Object.keys(r);let _e;const Te=t.length;let Ee;for(_e=0;_e<Te;_e++)Ee=t[_e],e[Ee]=r[Ee];return e}function formDataToJSON(r){function e(t,_e,Te,Ee){let xe=t[Ee++];if(xe==="__proto__")return!0;const Pe=Number.isFinite(+xe),Re=Ee>=t.length;return xe=!xe&&utils$1.isArray(Te)?Te.length:xe,Re?(utils$1.hasOwnProp(Te,xe)?Te[xe]=[Te[xe],_e]:Te[xe]=_e,!Pe):((!Te[xe]||!utils$1.isObject(Te[xe]))&&(Te[xe]=[]),e(t,_e,Te[xe],Ee)&&utils$1.isArray(Te[xe])&&(Te[xe]=arrayToObject(Te[xe])),!Pe)}if(utils$1.isFormData(r)&&utils$1.isFunction(r.entries)){const t={};return utils$1.forEachEntry(r,(_e,Te)=>{e(parsePropPath(_e),Te,t,0)}),t}return null}function stringifySafely(r,e,t){if(utils$1.isString(r))try{return(e||JSON.parse)(r),utils$1.trim(r)}catch(_e){if(_e.name!=="SyntaxError")throw _e}return(t||JSON.stringify)(r)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const _e=t.getContentType()||"",Te=_e.indexOf("application/json")>-1,Ee=utils$1.isObject(e);if(Ee&&utils$1.isHTMLForm(e)&&(e=new FormData(e)),utils$1.isFormData(e))return Te?JSON.stringify(formDataToJSON(e)):e;if(utils$1.isArrayBuffer(e)||utils$1.isBuffer(e)||utils$1.isStream(e)||utils$1.isFile(e)||utils$1.isBlob(e)||utils$1.isReadableStream(e))return e;if(utils$1.isArrayBufferView(e))return e.buffer;if(utils$1.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let Pe;if(Ee){if(_e.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(e,this.formSerializer).toString();if((Pe=utils$1.isFileList(e))||_e.indexOf("multipart/form-data")>-1){const Re=this.env&&this.env.FormData;return toFormData$1(Pe?{"files[]":e}:e,Re&&new Re,this.formSerializer)}}return Ee||Te?(t.setContentType("application/json",!1),stringifySafely(e)):e}],transformResponse:[function(e){const t=this.transitional||defaults.transitional,_e=t&&t.forcedJSONParsing,Te=this.responseType==="json";if(utils$1.isResponse(e)||utils$1.isReadableStream(e))return e;if(e&&utils$1.isString(e)&&(_e&&!this.responseType||Te)){const xe=!(t&&t.silentJSONParsing)&&Te;try{return JSON.parse(e)}catch(Pe){if(xe)throw Pe.name==="SyntaxError"?AxiosError$1.from(Pe,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):Pe}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],r=>{defaults.headers[r]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=r=>{const e={};let t,_e,Te;return r&&r.split(`
`).forEach(function(xe){Te=xe.indexOf(":"),t=xe.substring(0,Te).trim().toLowerCase(),_e=xe.substring(Te+1).trim(),!(!t||e[t]&&ignoreDuplicateOf[t])&&(t==="set-cookie"?e[t]?e[t].push(_e):e[t]=[_e]:e[t]=e[t]?e[t]+", "+_e:_e)}),e},$internals=Symbol("internals");function normalizeHeader(r){return r&&String(r).trim().toLowerCase()}function normalizeValue(r){return r===!1||r==null?r:utils$1.isArray(r)?r.map(normalizeValue):String(r)}function parseTokens(r){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let _e;for(;_e=t.exec(r);)e[_e[1]]=_e[2];return e}const isValidHeaderName=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function matchHeaderValue(r,e,t,_e,Te){if(utils$1.isFunction(_e))return _e.call(this,e,t);if(Te&&(e=t),!!utils$1.isString(e)){if(utils$1.isString(_e))return e.indexOf(_e)!==-1;if(utils$1.isRegExp(_e))return _e.test(e)}}function formatHeader(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,_e)=>t.toUpperCase()+_e)}function buildAccessors(r,e){const t=utils$1.toCamelCase(" "+e);["get","set","has"].forEach(_e=>{Object.defineProperty(r,_e+t,{value:function(Te,Ee,xe){return this[_e].call(this,e,Te,Ee,xe)},configurable:!0})})}let AxiosHeaders$1=class{constructor(e){e&&this.set(e)}set(e,t,_e){const Te=this;function Ee(Pe,Re,ke){const Ce=normalizeHeader(Re);if(!Ce)throw new Error("header name must be a non-empty string");const Se=utils$1.findKey(Te,Ce);(!Se||Te[Se]===void 0||ke===!0||ke===void 0&&Te[Se]!==!1)&&(Te[Se||Re]=normalizeValue(Pe))}const xe=(Pe,Re)=>utils$1.forEach(Pe,(ke,Ce)=>Ee(ke,Ce,Re));if(utils$1.isPlainObject(e)||e instanceof this.constructor)xe(e,t);else if(utils$1.isString(e)&&(e=e.trim())&&!isValidHeaderName(e))xe(parseHeaders(e),t);else if(utils$1.isObject(e)&&utils$1.isIterable(e)){let Pe={},Re,ke;for(const Ce of e){if(!utils$1.isArray(Ce))throw TypeError("Object iterator must return a key-value pair");Pe[ke=Ce[0]]=(Re=Pe[ke])?utils$1.isArray(Re)?[...Re,Ce[1]]:[Re,Ce[1]]:Ce[1]}xe(Pe,t)}else e!=null&&Ee(t,e,_e);return this}get(e,t){if(e=normalizeHeader(e),e){const _e=utils$1.findKey(this,e);if(_e){const Te=this[_e];if(!t)return Te;if(t===!0)return parseTokens(Te);if(utils$1.isFunction(t))return t.call(this,Te,_e);if(utils$1.isRegExp(t))return t.exec(Te);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=normalizeHeader(e),e){const _e=utils$1.findKey(this,e);return!!(_e&&this[_e]!==void 0&&(!t||matchHeaderValue(this,this[_e],_e,t)))}return!1}delete(e,t){const _e=this;let Te=!1;function Ee(xe){if(xe=normalizeHeader(xe),xe){const Pe=utils$1.findKey(_e,xe);Pe&&(!t||matchHeaderValue(_e,_e[Pe],Pe,t))&&(delete _e[Pe],Te=!0)}}return utils$1.isArray(e)?e.forEach(Ee):Ee(e),Te}clear(e){const t=Object.keys(this);let _e=t.length,Te=!1;for(;_e--;){const Ee=t[_e];(!e||matchHeaderValue(this,this[Ee],Ee,e,!0))&&(delete this[Ee],Te=!0)}return Te}normalize(e){const t=this,_e={};return utils$1.forEach(this,(Te,Ee)=>{const xe=utils$1.findKey(_e,Ee);if(xe){t[xe]=normalizeValue(Te),delete t[Ee];return}const Pe=e?formatHeader(Ee):String(Ee).trim();Pe!==Ee&&delete t[Ee],t[Pe]=normalizeValue(Te),_e[Pe]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return utils$1.forEach(this,(_e,Te)=>{_e!=null&&_e!==!1&&(t[Te]=e&&utils$1.isArray(_e)?_e.join(", "):_e)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const _e=new this(e);return t.forEach(Te=>_e.set(Te)),_e}static accessor(e){const _e=(this[$internals]=this[$internals]={accessors:{}}).accessors,Te=this.prototype;function Ee(xe){const Pe=normalizeHeader(xe);_e[Pe]||(buildAccessors(Te,xe),_e[Pe]=!0)}return utils$1.isArray(e)?e.forEach(Ee):Ee(e),this}};AxiosHeaders$1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders$1.prototype,({value:r},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>r,set(_e){this[t]=_e}}});utils$1.freezeMethods(AxiosHeaders$1);function transformData(r,e){const t=this||defaults,_e=e||t,Te=AxiosHeaders$1.from(_e.headers);let Ee=_e.data;return utils$1.forEach(r,function(Pe){Ee=Pe.call(t,Ee,Te.normalize(),e?e.status:void 0)}),Te.normalize(),Ee}function isCancel$1(r){return!!(r&&r.__CANCEL__)}function CanceledError$1(r,e,t){AxiosError$1.call(this,r??"canceled",AxiosError$1.ERR_CANCELED,e,t),this.name="CanceledError"}utils$1.inherits(CanceledError$1,AxiosError$1,{__CANCEL__:!0});function settle(r,e,t){const _e=t.config.validateStatus;!t.status||!_e||_e(t.status)?r(t):e(new AxiosError$1("Request failed with status code "+t.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function parseProtocol(r){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}function speedometer(r,e){r=r||10;const t=new Array(r),_e=new Array(r);let Te=0,Ee=0,xe;return e=e!==void 0?e:1e3,function(Re){const ke=Date.now(),Ce=_e[Ee];xe||(xe=ke),t[Te]=Re,_e[Te]=ke;let Se=Ee,Ae=0;for(;Se!==Te;)Ae+=t[Se++],Se=Se%r;if(Te=(Te+1)%r,Te===Ee&&(Ee=(Ee+1)%r),ke-xe<e)return;const Ie=Ce&&ke-Ce;return Ie?Math.round(Ae*1e3/Ie):void 0}}function throttle(r,e){let t=0,_e=1e3/e,Te,Ee;const xe=(ke,Ce=Date.now())=>{t=Ce,Te=null,Ee&&(clearTimeout(Ee),Ee=null),r.apply(null,ke)};return[(...ke)=>{const Ce=Date.now(),Se=Ce-t;Se>=_e?xe(ke,Ce):(Te=ke,Ee||(Ee=setTimeout(()=>{Ee=null,xe(Te)},_e-Se)))},()=>Te&&xe(Te)]}const progressEventReducer=(r,e,t=3)=>{let _e=0;const Te=speedometer(50,250);return throttle(Ee=>{const xe=Ee.loaded,Pe=Ee.lengthComputable?Ee.total:void 0,Re=xe-_e,ke=Te(Re),Ce=xe<=Pe;_e=xe;const Se={loaded:xe,total:Pe,progress:Pe?xe/Pe:void 0,bytes:Re,rate:ke||void 0,estimated:ke&&Pe&&Ce?(Pe-xe)/ke:void 0,event:Ee,lengthComputable:Pe!=null,[e?"download":"upload"]:!0};r(Se)},t)},progressEventDecorator=(r,e)=>{const t=r!=null;return[_e=>e[0]({lengthComputable:t,total:r,loaded:_e}),e[1]]},asyncDecorator=r=>(...e)=>utils$1.asap(()=>r(...e)),isURLSameOrigin=platform.hasStandardBrowserEnv?((r,e)=>t=>(t=new URL(t,platform.origin),r.protocol===t.protocol&&r.host===t.host&&(e||r.port===t.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(r,e,t,_e,Te,Ee){const xe=[r+"="+encodeURIComponent(e)];utils$1.isNumber(t)&&xe.push("expires="+new Date(t).toGMTString()),utils$1.isString(_e)&&xe.push("path="+_e),utils$1.isString(Te)&&xe.push("domain="+Te),Ee===!0&&xe.push("secure"),document.cookie=xe.join("; ")},read(r){const e=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(r){this.write(r,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function combineURLs(r,e){return e?r.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):r}function buildFullPath(r,e,t){let _e=!isAbsoluteURL(e);return r&&(_e||t==!1)?combineURLs(r,e):e}const headersToObject=r=>r instanceof AxiosHeaders$1?{...r}:r;function mergeConfig$1(r,e){e=e||{};const t={};function _e(ke,Ce,Se,Ae){return utils$1.isPlainObject(ke)&&utils$1.isPlainObject(Ce)?utils$1.merge.call({caseless:Ae},ke,Ce):utils$1.isPlainObject(Ce)?utils$1.merge({},Ce):utils$1.isArray(Ce)?Ce.slice():Ce}function Te(ke,Ce,Se,Ae){if(utils$1.isUndefined(Ce)){if(!utils$1.isUndefined(ke))return _e(void 0,ke,Se,Ae)}else return _e(ke,Ce,Se,Ae)}function Ee(ke,Ce){if(!utils$1.isUndefined(Ce))return _e(void 0,Ce)}function xe(ke,Ce){if(utils$1.isUndefined(Ce)){if(!utils$1.isUndefined(ke))return _e(void 0,ke)}else return _e(void 0,Ce)}function Pe(ke,Ce,Se){if(Se in e)return _e(ke,Ce);if(Se in r)return _e(void 0,ke)}const Re={url:Ee,method:Ee,data:Ee,baseURL:xe,transformRequest:xe,transformResponse:xe,paramsSerializer:xe,timeout:xe,timeoutMessage:xe,withCredentials:xe,withXSRFToken:xe,adapter:xe,responseType:xe,xsrfCookieName:xe,xsrfHeaderName:xe,onUploadProgress:xe,onDownloadProgress:xe,decompress:xe,maxContentLength:xe,maxBodyLength:xe,beforeRedirect:xe,transport:xe,httpAgent:xe,httpsAgent:xe,cancelToken:xe,socketPath:xe,responseEncoding:xe,validateStatus:Pe,headers:(ke,Ce,Se)=>Te(headersToObject(ke),headersToObject(Ce),Se,!0)};return utils$1.forEach(Object.keys(Object.assign({},r,e)),function(Ce){const Se=Re[Ce]||Te,Ae=Se(r[Ce],e[Ce],Ce);utils$1.isUndefined(Ae)&&Se!==Pe||(t[Ce]=Ae)}),t}const resolveConfig=r=>{const e=mergeConfig$1({},r);let{data:t,withXSRFToken:_e,xsrfHeaderName:Te,xsrfCookieName:Ee,headers:xe,auth:Pe}=e;e.headers=xe=AxiosHeaders$1.from(xe),e.url=buildURL(buildFullPath(e.baseURL,e.url,e.allowAbsoluteUrls),r.params,r.paramsSerializer),Pe&&xe.set("Authorization","Basic "+btoa((Pe.username||"")+":"+(Pe.password?unescape(encodeURIComponent(Pe.password)):"")));let Re;if(utils$1.isFormData(t)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)xe.setContentType(void 0);else if((Re=xe.getContentType())!==!1){const[ke,...Ce]=Re?Re.split(";").map(Se=>Se.trim()).filter(Boolean):[];xe.setContentType([ke||"multipart/form-data",...Ce].join("; "))}}if(platform.hasStandardBrowserEnv&&(_e&&utils$1.isFunction(_e)&&(_e=_e(e)),_e||_e!==!1&&isURLSameOrigin(e.url))){const ke=Te&&Ee&&cookies.read(Ee);ke&&xe.set(Te,ke)}return e},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(r){return new Promise(function(t,_e){const Te=resolveConfig(r);let Ee=Te.data;const xe=AxiosHeaders$1.from(Te.headers).normalize();let{responseType:Pe,onUploadProgress:Re,onDownloadProgress:ke}=Te,Ce,Se,Ae,Ie,Me;function Fe(){Ie&&Ie(),Me&&Me(),Te.cancelToken&&Te.cancelToken.unsubscribe(Ce),Te.signal&&Te.signal.removeEventListener("abort",Ce)}let Ve=new XMLHttpRequest;Ve.open(Te.method.toUpperCase(),Te.url,!0),Ve.timeout=Te.timeout;function je(){if(!Ve)return;const qe=AxiosHeaders$1.from("getAllResponseHeaders"in Ve&&Ve.getAllResponseHeaders()),Xe={data:!Pe||Pe==="text"||Pe==="json"?Ve.responseText:Ve.response,status:Ve.status,statusText:Ve.statusText,headers:qe,config:r,request:Ve};settle(function(Qe){t(Qe),Fe()},function(Qe){_e(Qe),Fe()},Xe),Ve=null}"onloadend"in Ve?Ve.onloadend=je:Ve.onreadystatechange=function(){!Ve||Ve.readyState!==4||Ve.status===0&&!(Ve.responseURL&&Ve.responseURL.indexOf("file:")===0)||setTimeout(je)},Ve.onabort=function(){Ve&&(_e(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,r,Ve)),Ve=null)},Ve.onerror=function(){_e(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,r,Ve)),Ve=null},Ve.ontimeout=function(){let He=Te.timeout?"timeout of "+Te.timeout+"ms exceeded":"timeout exceeded";const Xe=Te.transitional||transitionalDefaults;Te.timeoutErrorMessage&&(He=Te.timeoutErrorMessage),_e(new AxiosError$1(He,Xe.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,r,Ve)),Ve=null},Ee===void 0&&xe.setContentType(null),"setRequestHeader"in Ve&&utils$1.forEach(xe.toJSON(),function(He,Xe){Ve.setRequestHeader(Xe,He)}),utils$1.isUndefined(Te.withCredentials)||(Ve.withCredentials=!!Te.withCredentials),Pe&&Pe!=="json"&&(Ve.responseType=Te.responseType),ke&&([Ae,Me]=progressEventReducer(ke,!0),Ve.addEventListener("progress",Ae)),Re&&Ve.upload&&([Se,Ie]=progressEventReducer(Re),Ve.upload.addEventListener("progress",Se),Ve.upload.addEventListener("loadend",Ie)),(Te.cancelToken||Te.signal)&&(Ce=qe=>{Ve&&(_e(!qe||qe.type?new CanceledError$1(null,r,Ve):qe),Ve.abort(),Ve=null)},Te.cancelToken&&Te.cancelToken.subscribe(Ce),Te.signal&&(Te.signal.aborted?Ce():Te.signal.addEventListener("abort",Ce)));const Be=parseProtocol(Te.url);if(Be&&platform.protocols.indexOf(Be)===-1){_e(new AxiosError$1("Unsupported protocol "+Be+":",AxiosError$1.ERR_BAD_REQUEST,r));return}Ve.send(Ee||null)})},composeSignals=(r,e)=>{const{length:t}=r=r?r.filter(Boolean):[];if(e||t){let _e=new AbortController,Te;const Ee=function(ke){if(!Te){Te=!0,Pe();const Ce=ke instanceof Error?ke:this.reason;_e.abort(Ce instanceof AxiosError$1?Ce:new CanceledError$1(Ce instanceof Error?Ce.message:Ce))}};let xe=e&&setTimeout(()=>{xe=null,Ee(new AxiosError$1(`timeout ${e} of ms exceeded`,AxiosError$1.ETIMEDOUT))},e);const Pe=()=>{r&&(xe&&clearTimeout(xe),xe=null,r.forEach(ke=>{ke.unsubscribe?ke.unsubscribe(Ee):ke.removeEventListener("abort",Ee)}),r=null)};r.forEach(ke=>ke.addEventListener("abort",Ee));const{signal:Re}=_e;return Re.unsubscribe=()=>utils$1.asap(Pe),Re}},streamChunk=function*(r,e){let t=r.byteLength;if(t<e){yield r;return}let _e=0,Te;for(;_e<t;)Te=_e+e,yield r.slice(_e,Te),_e=Te},readBytes=async function*(r,e){for await(const t of readStream(r))yield*streamChunk(t,e)},readStream=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const e=r.getReader();try{for(;;){const{done:t,value:_e}=await e.read();if(t)break;yield _e}}finally{await e.cancel()}},trackStream=(r,e,t,_e)=>{const Te=readBytes(r,e);let Ee=0,xe,Pe=Re=>{xe||(xe=!0,_e&&_e(Re))};return new ReadableStream({async pull(Re){try{const{done:ke,value:Ce}=await Te.next();if(ke){Pe(),Re.close();return}let Se=Ce.byteLength;if(t){let Ae=Ee+=Se;t(Ae)}Re.enqueue(new Uint8Array(Ce))}catch(ke){throw Pe(ke),ke}},cancel(Re){return Pe(Re),Te.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(r=>e=>r.encode(e))(new TextEncoder):async r=>new Uint8Array(await new Response(r).arrayBuffer())),test$1=(r,...e)=>{try{return!!r(...e)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test$1(()=>{let r=!1;const e=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return r=!0,"half"}}).headers.has("Content-Type");return r&&!e}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test$1(()=>utils$1.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(r=>r.body)};isFetchSupported&&(r=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!resolvers[e]&&(resolvers[e]=utils$1.isFunction(r[e])?t=>t[e]():(t,_e)=>{throw new AxiosError$1(`Response type '${e}' is not supported`,AxiosError$1.ERR_NOT_SUPPORT,_e)})})})(new Response);const getBodyLength=async r=>{if(r==null)return 0;if(utils$1.isBlob(r))return r.size;if(utils$1.isSpecCompliantForm(r))return(await new Request(platform.origin,{method:"POST",body:r}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(r)||utils$1.isArrayBuffer(r))return r.byteLength;if(utils$1.isURLSearchParams(r)&&(r=r+""),utils$1.isString(r))return(await encodeText(r)).byteLength},resolveBodyLength=async(r,e)=>{const t=utils$1.toFiniteNumber(r.getContentLength());return t??getBodyLength(e)},fetchAdapter=isFetchSupported&&(async r=>{let{url:e,method:t,data:_e,signal:Te,cancelToken:Ee,timeout:xe,onDownloadProgress:Pe,onUploadProgress:Re,responseType:ke,headers:Ce,withCredentials:Se="same-origin",fetchOptions:Ae}=resolveConfig(r);ke=ke?(ke+"").toLowerCase():"text";let Ie=composeSignals([Te,Ee&&Ee.toAbortSignal()],xe),Me;const Fe=Ie&&Ie.unsubscribe&&(()=>{Ie.unsubscribe()});let Ve;try{if(Re&&supportsRequestStream&&t!=="get"&&t!=="head"&&(Ve=await resolveBodyLength(Ce,_e))!==0){let Xe=new Request(e,{method:"POST",body:_e,duplex:"half"}),Je;if(utils$1.isFormData(_e)&&(Je=Xe.headers.get("content-type"))&&Ce.setContentType(Je),Xe.body){const[Qe,Ke]=progressEventDecorator(Ve,progressEventReducer(asyncDecorator(Re)));_e=trackStream(Xe.body,DEFAULT_CHUNK_SIZE,Qe,Ke)}}utils$1.isString(Se)||(Se=Se?"include":"omit");const je="credentials"in Request.prototype;Me=new Request(e,{...Ae,signal:Ie,method:t.toUpperCase(),headers:Ce.normalize().toJSON(),body:_e,duplex:"half",credentials:je?Se:void 0});let Be=await fetch(Me,Ae);const qe=supportsResponseStream&&(ke==="stream"||ke==="response");if(supportsResponseStream&&(Pe||qe&&Fe)){const Xe={};["status","statusText","headers"].forEach(Ye=>{Xe[Ye]=Be[Ye]});const Je=utils$1.toFiniteNumber(Be.headers.get("content-length")),[Qe,Ke]=Pe&&progressEventDecorator(Je,progressEventReducer(asyncDecorator(Pe),!0))||[];Be=new Response(trackStream(Be.body,DEFAULT_CHUNK_SIZE,Qe,()=>{Ke&&Ke(),Fe&&Fe()}),Xe)}ke=ke||"text";let He=await resolvers[utils$1.findKey(resolvers,ke)||"text"](Be,r);return!qe&&Fe&&Fe(),await new Promise((Xe,Je)=>{settle(Xe,Je,{data:He,headers:AxiosHeaders$1.from(Be.headers),status:Be.status,statusText:Be.statusText,config:r,request:Me})})}catch(je){throw Fe&&Fe(),je&&je.name==="TypeError"&&/Load failed|fetch/i.test(je.message)?Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,r,Me),{cause:je.cause||je}):AxiosError$1.from(je,je&&je.code,r,Me)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});const renderReason=r=>`- ${r}`,isResolvedHandle=r=>utils$1.isFunction(r)||r===null||r===!1,adapters={getAdapter:r=>{r=utils$1.isArray(r)?r:[r];const{length:e}=r;let t,_e;const Te={};for(let Ee=0;Ee<e;Ee++){t=r[Ee];let xe;if(_e=t,!isResolvedHandle(t)&&(_e=knownAdapters[(xe=String(t)).toLowerCase()],_e===void 0))throw new AxiosError$1(`Unknown adapter '${xe}'`);if(_e)break;Te[xe||"#"+Ee]=_e}if(!_e){const Ee=Object.entries(Te).map(([Pe,Re])=>`adapter ${Pe} `+(Re===!1?"is not supported by the environment":"is not available in the build"));let xe=e?Ee.length>1?`since :
`+Ee.map(renderReason).join(`
`):" "+renderReason(Ee[0]):"as no adapter specified";throw new AxiosError$1("There is no suitable adapter to dispatch the request "+xe,"ERR_NOT_SUPPORT")}return _e},adapters:knownAdapters};function throwIfCancellationRequested(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new CanceledError$1(null,r)}function dispatchRequest(r){return throwIfCancellationRequested(r),r.headers=AxiosHeaders$1.from(r.headers),r.data=transformData.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(r.adapter||defaults.adapter)(r).then(function(_e){return throwIfCancellationRequested(r),_e.data=transformData.call(r,r.transformResponse,_e),_e.headers=AxiosHeaders$1.from(_e.headers),_e},function(_e){return isCancel$1(_e)||(throwIfCancellationRequested(r),_e&&_e.response&&(_e.response.data=transformData.call(r,r.transformResponse,_e.response),_e.response.headers=AxiosHeaders$1.from(_e.response.headers))),Promise.reject(_e)})}const VERSION$2="1.10.0",validators$1={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{validators$1[r]=function(_e){return typeof _e===r||"a"+(e<1?"n ":" ")+r}});const deprecatedWarnings={};validators$1.transitional=function(e,t,_e){function Te(Ee,xe){return"[Axios v"+VERSION$2+"] Transitional option '"+Ee+"'"+xe+(_e?". "+_e:"")}return(Ee,xe,Pe)=>{if(e===!1)throw new AxiosError$1(Te(xe," has been removed"+(t?" in "+t:"")),AxiosError$1.ERR_DEPRECATED);return t&&!deprecatedWarnings[xe]&&(deprecatedWarnings[xe]=!0,console.warn(Te(xe," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(Ee,xe,Pe):!0}};validators$1.spelling=function(e){return(t,_e)=>(console.warn(`${_e} is likely a misspelling of ${e}`),!0)};function assertOptions(r,e,t){if(typeof r!="object")throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const _e=Object.keys(r);let Te=_e.length;for(;Te-- >0;){const Ee=_e[Te],xe=e[Ee];if(xe){const Pe=r[Ee],Re=Pe===void 0||xe(Pe,Ee,r);if(Re!==!0)throw new AxiosError$1("option "+Ee+" must be "+Re,AxiosError$1.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new AxiosError$1("Unknown option "+Ee,AxiosError$1.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;let Axios$1=class{constructor(e){this.defaults=e||{},this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(e,t){try{return await this._request(e,t)}catch(_e){if(_e instanceof Error){let Te={};Error.captureStackTrace?Error.captureStackTrace(Te):Te=new Error;const Ee=Te.stack?Te.stack.replace(/^.+\n/,""):"";try{_e.stack?Ee&&!String(_e.stack).endsWith(Ee.replace(/^.+\n.+\n/,""))&&(_e.stack+=`
`+Ee):_e.stack=Ee}catch{}}throw _e}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=mergeConfig$1(this.defaults,t);const{transitional:_e,paramsSerializer:Te,headers:Ee}=t;_e!==void 0&&validator.assertOptions(_e,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),Te!=null&&(utils$1.isFunction(Te)?t.paramsSerializer={serialize:Te}:validator.assertOptions(Te,{encode:validators.function,serialize:validators.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),validator.assertOptions(t,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let xe=Ee&&utils$1.merge(Ee.common,Ee[t.method]);Ee&&utils$1.forEach(["delete","get","head","post","put","patch","common"],Me=>{delete Ee[Me]}),t.headers=AxiosHeaders$1.concat(xe,Ee);const Pe=[];let Re=!0;this.interceptors.request.forEach(function(Fe){typeof Fe.runWhen=="function"&&Fe.runWhen(t)===!1||(Re=Re&&Fe.synchronous,Pe.unshift(Fe.fulfilled,Fe.rejected))});const ke=[];this.interceptors.response.forEach(function(Fe){ke.push(Fe.fulfilled,Fe.rejected)});let Ce,Se=0,Ae;if(!Re){const Me=[dispatchRequest.bind(this),void 0];for(Me.unshift.apply(Me,Pe),Me.push.apply(Me,ke),Ae=Me.length,Ce=Promise.resolve(t);Se<Ae;)Ce=Ce.then(Me[Se++],Me[Se++]);return Ce}Ae=Pe.length;let Ie=t;for(Se=0;Se<Ae;){const Me=Pe[Se++],Fe=Pe[Se++];try{Ie=Me(Ie)}catch(Ve){Fe.call(this,Ve);break}}try{Ce=dispatchRequest.call(this,Ie)}catch(Me){return Promise.reject(Me)}for(Se=0,Ae=ke.length;Se<Ae;)Ce=Ce.then(ke[Se++],ke[Se++]);return Ce}getUri(e){e=mergeConfig$1(this.defaults,e);const t=buildFullPath(e.baseURL,e.url,e.allowAbsoluteUrls);return buildURL(t,e.params,e.paramsSerializer)}};utils$1.forEach(["delete","get","head","options"],function(e){Axios$1.prototype[e]=function(t,_e){return this.request(mergeConfig$1(_e||{},{method:e,url:t,data:(_e||{}).data}))}});utils$1.forEach(["post","put","patch"],function(e){function t(_e){return function(Ee,xe,Pe){return this.request(mergeConfig$1(Pe||{},{method:e,headers:_e?{"Content-Type":"multipart/form-data"}:{},url:Ee,data:xe}))}}Axios$1.prototype[e]=t(),Axios$1.prototype[e+"Form"]=t(!0)});let CancelToken$1=class _f{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(Ee){t=Ee});const _e=this;this.promise.then(Te=>{if(!_e._listeners)return;let Ee=_e._listeners.length;for(;Ee-- >0;)_e._listeners[Ee](Te);_e._listeners=null}),this.promise.then=Te=>{let Ee;const xe=new Promise(Pe=>{_e.subscribe(Pe),Ee=Pe}).then(Te);return xe.cancel=function(){_e.unsubscribe(Ee)},xe},e(function(Ee,xe,Pe){_e.reason||(_e.reason=new CanceledError$1(Ee,xe,Pe),t(_e.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=_e=>{e.abort(_e)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new _f(function(Te){e=Te}),cancel:e}}};function spread$1(r){return function(t){return r.apply(null,t)}}function isAxiosError$1(r){return utils$1.isObject(r)&&r.isAxiosError===!0}const HttpStatusCode$1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode$1).forEach(([r,e])=>{HttpStatusCode$1[e]=r});function createInstance(r){const e=new Axios$1(r),t=bind(Axios$1.prototype.request,e);return utils$1.extend(t,Axios$1.prototype,e,{allOwnKeys:!0}),utils$1.extend(t,e,null,{allOwnKeys:!0}),t.create=function(Te){return createInstance(mergeConfig$1(r,Te))},t}const axios=createInstance(defaults);axios.Axios=Axios$1;axios.CanceledError=CanceledError$1;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel$1;axios.VERSION=VERSION$2;axios.toFormData=toFormData$1;axios.AxiosError=AxiosError$1;axios.Cancel=axios.CanceledError;axios.all=function(e){return Promise.all(e)};axios.spread=spread$1;axios.isAxiosError=isAxiosError$1;axios.mergeConfig=mergeConfig$1;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=r=>formDataToJSON(utils$1.isHTMLForm(r)?new FormData(r):r);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const{Axios,AxiosError,CanceledError,isCancel,CancelToken,VERSION:VERSION$1,all:all$1,Cancel,isAxiosError,spread,toFormData,AxiosHeaders,HttpStatusCode,formToJSON,getAdapter,mergeConfig}=axios,scriptRel="modulepreload",assetsURL=function(r){return"/"+r},seen={},__vitePreload=function(e,t,_e){let Te=Promise.resolve();if(t&&t.length>0){let Re=function(ke){return Promise.all(ke.map(Ce=>Promise.resolve(Ce).then(Se=>({status:"fulfilled",value:Se}),Se=>({status:"rejected",reason:Se}))))};document.getElementsByTagName("link");const xe=document.querySelector("meta[property=csp-nonce]"),Pe=xe?.nonce||xe?.getAttribute("nonce");Te=Re(t.map(ke=>{if(ke=assetsURL(ke),ke in seen)return;seen[ke]=!0;const Ce=ke.endsWith(".css"),Se=Ce?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${ke}"]${Se}`))return;const Ae=document.createElement("link");if(Ae.rel=Ce?"stylesheet":scriptRel,Ce||(Ae.as="script"),Ae.crossOrigin="",Ae.href=ke,Pe&&Ae.setAttribute("nonce",Pe),document.head.appendChild(Ae),Ce)return new Promise((Ie,Me)=>{Ae.addEventListener("load",Ie),Ae.addEventListener("error",()=>Me(new Error(`Unable to preload CSS for ${ke}`)))})}))}function Ee(xe){const Pe=new Event("vite:preloadError",{cancelable:!0});if(Pe.payload=xe,window.dispatchEvent(Pe),!Pe.defaultPrevented)throw xe}return Te.then(xe=>{for(const Pe of xe||[])Pe.status==="rejected"&&Ee(Pe.reason);return e().catch(Ee)})};function _typeof(r){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(r)}var u8=Uint8Array,u16=Uint16Array,i32=Int32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(r,e){for(var t=new u16(31),_e=0;_e<31;++_e)t[_e]=e+=1<<r[_e-1];for(var Te=new i32(t[30]),_e=1;_e<30;++_e)for(var Ee=t[_e];Ee<t[_e+1];++Ee)Te[Ee]=Ee-t[_e]<<5|_e;return{b:t,r:Te}},_a=freb(fleb,2),fl=_a.b,revfl=_a.r;fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b.b,revfd=_b.r,rev=new u16(32768);for(var i$1=0;i$1<32768;++i$1){var x$1=(i$1&43690)>>1|(i$1&21845)<<1;x$1=(x$1&52428)>>2|(x$1&13107)<<2,x$1=(x$1&61680)>>4|(x$1&3855)<<4,rev[i$1]=((x$1&65280)>>8|(x$1&255)<<8)>>1}var hMap=function(r,e,t){for(var _e=r.length,Te=0,Ee=new u16(e);Te<_e;++Te)r[Te]&&++Ee[r[Te]-1];var xe=new u16(e);for(Te=1;Te<e;++Te)xe[Te]=xe[Te-1]+Ee[Te-1]<<1;var Pe;if(t){Pe=new u16(1<<e);var Re=15-e;for(Te=0;Te<_e;++Te)if(r[Te])for(var ke=Te<<4|r[Te],Ce=e-r[Te],Se=xe[r[Te]-1]++<<Ce,Ae=Se|(1<<Ce)-1;Se<=Ae;++Se)Pe[rev[Se]>>Re]=ke}else for(Pe=new u16(_e),Te=0;Te<_e;++Te)r[Te]&&(Pe[Te]=rev[xe[r[Te]-1]++]>>15-r[Te]);return Pe},flt=new u8(288);for(var i$1=0;i$1<144;++i$1)flt[i$1]=8;for(var i$1=144;i$1<256;++i$1)flt[i$1]=9;for(var i$1=256;i$1<280;++i$1)flt[i$1]=7;for(var i$1=280;i$1<288;++i$1)flt[i$1]=8;var fdt=new u8(32);for(var i$1=0;i$1<32;++i$1)fdt[i$1]=5;var flm=hMap(flt,9,0),flrm=hMap(flt,9,1),fdm=hMap(fdt,5,0),fdrm=hMap(fdt,5,1),max$1=function(r){for(var e=r[0],t=1;t<r.length;++t)r[t]>e&&(e=r[t]);return e},bits=function(r,e,t){var _e=e/8|0;return(r[_e]|r[_e+1]<<8)>>(e&7)&t},bits16=function(r,e){var t=e/8|0;return(r[t]|r[t+1]<<8|r[t+2]<<16)>>(e&7)},shft=function(r){return(r+7)/8|0},slc=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new u8(r.subarray(e,t))},ec=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function(r,e,t){var _e=new Error(e||ec[r]);if(_e.code=r,Error.captureStackTrace&&Error.captureStackTrace(_e,err),!t)throw _e;return _e},inflt=function(r,e,t,_e){var Te=r.length,Ee=0;if(!Te||e.f&&!e.l)return t||new u8(0);var xe=!t,Pe=xe||e.i!=2,Re=e.i;xe&&(t=new u8(Te*3));var ke=function(kr){var Vr=t.length;if(kr>Vr){var Lr=new u8(Math.max(Vr*2,kr));Lr.set(t),t=Lr}},Ce=e.f||0,Se=e.p||0,Ae=e.b||0,Ie=e.l,Me=e.d,Fe=e.m,Ve=e.n,je=Te*8;do{if(!Ie){Ce=bits(r,Se,1);var Be=bits(r,Se+1,3);if(Se+=3,Be)if(Be==1)Ie=flrm,Me=fdrm,Fe=9,Ve=5;else if(Be==2){var Je=bits(r,Se,31)+257,Qe=bits(r,Se+10,15)+4,Ke=Je+bits(r,Se+5,31)+1;Se+=14;for(var Ye=new u8(Ke),pn=new u8(19),un=0;un<Qe;++un)pn[clim[un]]=bits(r,Se+un*3,7);Se+=Qe*3;for(var fn=max$1(pn),mn=(1<<fn)-1,wn=hMap(pn,fn,1),un=0;un<Ke;){var Pn=wn[bits(r,Se,mn)];Se+=Pn&15;var qe=Pn>>4;if(qe<16)Ye[un++]=qe;else{var xn=0,In=0;for(qe==16?(In=3+bits(r,Se,3),Se+=2,xn=Ye[un-1]):qe==17?(In=3+bits(r,Se,7),Se+=3):qe==18&&(In=11+bits(r,Se,127),Se+=7);In--;)Ye[un++]=xn}}var Ln=Ye.subarray(0,Je),$n=Ye.subarray(Je);Fe=max$1(Ln),Ve=max$1($n),Ie=hMap(Ln,Fe,1),Me=hMap($n,Ve,1)}else err(1);else{var qe=shft(Se)+4,He=r[qe-4]|r[qe-3]<<8,Xe=qe+He;if(Xe>Te){Re&&err(0);break}Pe&&ke(Ae+He),t.set(r.subarray(qe,Xe),Ae),e.b=Ae+=He,e.p=Se=Xe*8,e.f=Ce;continue}if(Se>je){Re&&err(0);break}}Pe&&ke(Ae+131072);for(var Sn=(1<<Fe)-1,Bn=(1<<Ve)-1,Tn=Se;;Tn=Se){var xn=Ie[bits16(r,Se)&Sn],vn=xn>>4;if(Se+=xn&15,Se>je){Re&&err(0);break}if(xn||err(2),vn<256)t[Ae++]=vn;else if(vn==256){Tn=Se,Ie=null;break}else{var Un=vn-254;if(vn>264){var un=vn-257,zn=fleb[un];Un=bits(r,Se,(1<<zn)-1)+fl[un],Se+=zn}var Hn=Me[bits16(r,Se)&Bn],Jn=Hn>>4;Hn||err(3),Se+=Hn&15;var $n=fd[Jn];if(Jn>3){var zn=fdeb[Jn];$n+=bits16(r,Se)&(1<<zn)-1,Se+=zn}if(Se>je){Re&&err(0);break}Pe&&ke(Ae+131072);var nr=Ae+Un;if(Ae<$n){var or=Ee-$n,Sr=Math.min($n,nr);for(or+Ae<0&&err(3);Ae<Sr;++Ae)t[Ae]=_e[or+Ae]}for(;Ae<nr;++Ae)t[Ae]=t[Ae-$n]}}e.l=Ie,e.p=Tn,e.b=Ae,e.f=Ce,Ie&&(Ce=1,e.m=Fe,e.d=Me,e.n=Ve)}while(!Ce);return Ae!=t.length&&xe?slc(t,0,Ae):t.subarray(0,Ae)},wbits=function(r,e,t){t<<=e&7;var _e=e/8|0;r[_e]|=t,r[_e+1]|=t>>8},wbits16=function(r,e,t){t<<=e&7;var _e=e/8|0;r[_e]|=t,r[_e+1]|=t>>8,r[_e+2]|=t>>16},hTree=function(r,e){for(var t=[],_e=0;_e<r.length;++_e)r[_e]&&t.push({s:_e,f:r[_e]});var Te=t.length,Ee=t.slice();if(!Te)return{t:et$1,l:0};if(Te==1){var xe=new u8(t[0].s+1);return xe[t[0].s]=1,{t:xe,l:1}}t.sort(function(Xe,Je){return Xe.f-Je.f}),t.push({s:-1,f:25001});var Pe=t[0],Re=t[1],ke=0,Ce=1,Se=2;for(t[0]={s:-1,f:Pe.f+Re.f,l:Pe,r:Re};Ce!=Te-1;)Pe=t[t[ke].f<t[Se].f?ke++:Se++],Re=t[ke!=Ce&&t[ke].f<t[Se].f?ke++:Se++],t[Ce++]={s:-1,f:Pe.f+Re.f,l:Pe,r:Re};for(var Ae=Ee[0].s,_e=1;_e<Te;++_e)Ee[_e].s>Ae&&(Ae=Ee[_e].s);var Ie=new u16(Ae+1),Me=ln(t[Ce-1],Ie,0);if(Me>e){var _e=0,Fe=0,Ve=Me-e,je=1<<Ve;for(Ee.sort(function(Je,Qe){return Ie[Qe.s]-Ie[Je.s]||Je.f-Qe.f});_e<Te;++_e){var Be=Ee[_e].s;if(Ie[Be]>e)Fe+=je-(1<<Me-Ie[Be]),Ie[Be]=e;else break}for(Fe>>=Ve;Fe>0;){var qe=Ee[_e].s;Ie[qe]<e?Fe-=1<<e-Ie[qe]++-1:++_e}for(;_e>=0&&Fe;--_e){var He=Ee[_e].s;Ie[He]==e&&(--Ie[He],++Fe)}Me=e}return{t:new u8(Ie),l:Me}},ln=function(r,e,t){return r.s==-1?Math.max(ln(r.l,e,t+1),ln(r.r,e,t+1)):e[r.s]=t},lc=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new u16(++e),_e=0,Te=r[0],Ee=1,xe=function(Re){t[_e++]=Re},Pe=1;Pe<=e;++Pe)if(r[Pe]==Te&&Pe!=e)++Ee;else{if(!Te&&Ee>2){for(;Ee>138;Ee-=138)xe(32754);Ee>2&&(xe(Ee>10?Ee-11<<5|28690:Ee-3<<5|12305),Ee=0)}else if(Ee>3){for(xe(Te),--Ee;Ee>6;Ee-=6)xe(8304);Ee>2&&(xe(Ee-3<<5|8208),Ee=0)}for(;Ee--;)xe(Te);Ee=1,Te=r[Pe]}return{c:t.subarray(0,_e),n:e}},clen=function(r,e){for(var t=0,_e=0;_e<e.length;++_e)t+=r[_e]*e[_e];return t},wfblk=function(r,e,t){var _e=t.length,Te=shft(e+2);r[Te]=_e&255,r[Te+1]=_e>>8,r[Te+2]=r[Te]^255,r[Te+3]=r[Te+1]^255;for(var Ee=0;Ee<_e;++Ee)r[Te+Ee+4]=t[Ee];return(Te+4+_e)*8},wblk=function(r,e,t,_e,Te,Ee,xe,Pe,Re,ke,Ce){wbits(e,Ce++,t),++Te[256];for(var Se=hTree(Te,15),Ae=Se.t,Ie=Se.l,Me=hTree(Ee,15),Fe=Me.t,Ve=Me.l,je=lc(Ae),Be=je.c,qe=je.n,He=lc(Fe),Xe=He.c,Je=He.n,Qe=new u16(19),Ke=0;Ke<Be.length;++Ke)++Qe[Be[Ke]&31];for(var Ke=0;Ke<Xe.length;++Ke)++Qe[Xe[Ke]&31];for(var Ye=hTree(Qe,7),pn=Ye.t,un=Ye.l,fn=19;fn>4&&!pn[clim[fn-1]];--fn);var mn=ke+5<<3,wn=clen(Te,flt)+clen(Ee,fdt)+xe,Pn=clen(Te,Ae)+clen(Ee,Fe)+xe+14+3*fn+clen(Qe,pn)+2*Qe[16]+3*Qe[17]+7*Qe[18];if(Re>=0&&mn<=wn&&mn<=Pn)return wfblk(e,Ce,r.subarray(Re,Re+ke));var xn,In,Ln,$n;if(wbits(e,Ce,1+(Pn<wn)),Ce+=2,Pn<wn){xn=hMap(Ae,Ie,0),In=Ae,Ln=hMap(Fe,Ve,0),$n=Fe;var Sn=hMap(pn,un,0);wbits(e,Ce,qe-257),wbits(e,Ce+5,Je-1),wbits(e,Ce+10,fn-4),Ce+=14;for(var Ke=0;Ke<fn;++Ke)wbits(e,Ce+3*Ke,pn[clim[Ke]]);Ce+=3*fn;for(var Bn=[Be,Xe],Tn=0;Tn<2;++Tn)for(var vn=Bn[Tn],Ke=0;Ke<vn.length;++Ke){var Un=vn[Ke]&31;wbits(e,Ce,Sn[Un]),Ce+=pn[Un],Un>15&&(wbits(e,Ce,vn[Ke]>>5&127),Ce+=vn[Ke]>>12)}}else xn=flm,In=flt,Ln=fdm,$n=fdt;for(var Ke=0;Ke<Pe;++Ke){var zn=_e[Ke];if(zn>255){var Un=zn>>18&31;wbits16(e,Ce,xn[Un+257]),Ce+=In[Un+257],Un>7&&(wbits(e,Ce,zn>>23&31),Ce+=fleb[Un]);var Hn=zn&31;wbits16(e,Ce,Ln[Hn]),Ce+=$n[Hn],Hn>3&&(wbits16(e,Ce,zn>>5&8191),Ce+=fdeb[Hn])}else wbits16(e,Ce,xn[zn]),Ce+=In[zn]}return wbits16(e,Ce,xn[256]),Ce+In[256]},deo=new i32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et$1=new u8(0),dflt=function(r,e,t,_e,Te,Ee){var xe=Ee.z||r.length,Pe=new u8(_e+xe+5*(1+Math.ceil(xe/7e3))+Te),Re=Pe.subarray(_e,Pe.length-Te),ke=Ee.l,Ce=(Ee.r||0)&7;if(e){Ce&&(Re[0]=Ee.r>>3);for(var Se=deo[e-1],Ae=Se>>13,Ie=Se&8191,Me=(1<<t)-1,Fe=Ee.p||new u16(32768),Ve=Ee.h||new u16(Me+1),je=Math.ceil(t/3),Be=2*je,qe=function(Qr){return(r[Qr]^r[Qr+1]<<je^r[Qr+2]<<Be)&Me},He=new i32(25e3),Xe=new u16(288),Je=new u16(32),Qe=0,Ke=0,Ye=Ee.i||0,pn=0,un=Ee.w||0,fn=0;Ye+2<xe;++Ye){var mn=qe(Ye),wn=Ye&32767,Pn=Ve[mn];if(Fe[wn]=Pn,Ve[mn]=wn,un<=Ye){var xn=xe-Ye;if((Qe>7e3||pn>24576)&&(xn>423||!ke)){Ce=wblk(r,Re,0,He,Xe,Je,Ke,pn,fn,Ye-fn,Ce),pn=Qe=Ke=0,fn=Ye;for(var In=0;In<286;++In)Xe[In]=0;for(var In=0;In<30;++In)Je[In]=0}var Ln=2,$n=0,Sn=Ie,Bn=wn-Pn&32767;if(xn>2&&mn==qe(Ye-Bn))for(var Tn=Math.min(Ae,xn)-1,vn=Math.min(32767,Ye),Un=Math.min(258,xn);Bn<=vn&&--Sn&&wn!=Pn;){if(r[Ye+Ln]==r[Ye+Ln-Bn]){for(var zn=0;zn<Un&&r[Ye+zn]==r[Ye+zn-Bn];++zn);if(zn>Ln){if(Ln=zn,$n=Bn,zn>Tn)break;for(var Hn=Math.min(Bn,zn-2),Jn=0,In=0;In<Hn;++In){var nr=Ye-Bn+In&32767,or=Fe[nr],Sr=nr-or&32767;Sr>Jn&&(Jn=Sr,Pn=nr)}}}wn=Pn,Pn=Fe[wn],Bn+=wn-Pn&32767}if($n){He[pn++]=268435456|revfl[Ln]<<18|revfd[$n];var kr=revfl[Ln]&31,Vr=revfd[$n]&31;Ke+=fleb[kr]+fdeb[Vr],++Xe[257+kr],++Je[Vr],un=Ye+Ln,++Qe}else He[pn++]=r[Ye],++Xe[r[Ye]]}}for(Ye=Math.max(Ye,un);Ye<xe;++Ye)He[pn++]=r[Ye],++Xe[r[Ye]];Ce=wblk(r,Re,ke,He,Xe,Je,Ke,pn,fn,Ye-fn,Ce),ke||(Ee.r=Ce&7|Re[Ce/8|0]<<3,Ce-=7,Ee.h=Ve,Ee.p=Fe,Ee.i=Ye,Ee.w=un)}else{for(var Ye=Ee.w||0;Ye<xe+ke;Ye+=65535){var Lr=Ye+65535;Lr>=xe&&(Re[Ce/8|0]=ke,Lr=xe),Ce=wfblk(Re,Ce+1,r.subarray(Ye,Lr))}Ee.i=xe}return slc(Pe,0,_e+shft(Ce)+Te)},adler=function(){var r=1,e=0;return{p:function(t){for(var _e=r,Te=e,Ee=t.length|0,xe=0;xe!=Ee;){for(var Pe=Math.min(xe+2655,Ee);xe<Pe;++xe)Te+=_e+=t[xe];_e=(_e&65535)+15*(_e>>16),Te=(Te&65535)+15*(Te>>16)}r=_e,e=Te},d:function(){return r%=65521,e%=65521,(r&255)<<24|(r&65280)<<8|(e&255)<<8|e>>8}}},dopt=function(r,e,t,_e,Te){if(!Te&&(Te={l:1},e.dictionary)){var Ee=e.dictionary.subarray(-32768),xe=new u8(Ee.length+r.length);xe.set(Ee),xe.set(r,Ee.length),r=xe,Te.w=Ee.length}return dflt(r,e.level==null?6:e.level,e.mem==null?Te.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,_e,Te)},wbytes=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},zlh=function(r,e){var t=e.level,_e=t==0?0:t<6?1:t==9?3:2;if(r[0]=120,r[1]=_e<<6|(e.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,e.dictionary){var Te=adler();Te.p(e.dictionary),wbytes(r,2,Te.d())}},zls=function(r,e){return((r[0]&15)!=8||r[0]>>4>7||(r[0]<<8|r[1])%31)&&err(6,"invalid zlib data"),(r[1]>>5&1)==1&&err(6,"invalid zlib data: "+(r[1]&32?"need":"unexpected")+" dictionary"),(r[1]>>3&4)+2};function zlibSync(r,e){e||(e={});var t=adler();t.p(r);var _e=dopt(r,e,e.dictionary?6:2,4);return zlh(_e,e),wbytes(_e,_e.length-4,t.d()),_e}function unzlibSync(r,e){return inflt(r.subarray(zls(r),-4),{i:2},e,e)}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et$1,{stream:!0}),tds=1}catch{}var n=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function i(){n.console&&typeof n.console.log=="function"&&n.console.log.apply(n.console,arguments)}var a={log:i,warn:function(r){n.console&&(typeof n.console.warn=="function"?n.console.warn.apply(n.console,arguments):i.call(null,arguments))},error:function(r){n.console&&(typeof n.console.error=="function"?n.console.error.apply(n.console,arguments):i(r))}};function o(r,e,t){var _e=new XMLHttpRequest;_e.open("GET",r),_e.responseType="blob",_e.onload=function(){l(_e.response,e,t)},_e.onerror=function(){a.error("could not download file")},_e.send()}function s(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function c(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var u,h,l=n.saveAs||((typeof window>"u"?"undefined":_typeof(window))!=="object"||window!==n?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,e,t){var _e=n.URL||n.webkitURL,Te=document.createElement("a");e=e||r.name||"download",Te.download=e,Te.rel="noopener",typeof r=="string"?(Te.href=r,Te.origin!==location.origin?s(Te.href)?o(r,e,t):c(Te,Te.target="_blank"):c(Te)):(Te.href=_e.createObjectURL(r),setTimeout(function(){_e.revokeObjectURL(Te.href)},4e4),setTimeout(function(){c(Te)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,t){if(e=e||r.name||"download",typeof r=="string")if(s(r))o(r,e,t);else{var _e=document.createElement("a");_e.href=r,_e.target="_blank",setTimeout(function(){c(_e)})}else navigator.msSaveOrOpenBlob(function(Te,Ee){return Ee===void 0?Ee={autoBom:!1}:_typeof(Ee)!=="object"&&(a.warn("Deprecated: Expected third argument to be a object"),Ee={autoBom:!Ee}),Ee.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Te.type)?new Blob(["\uFEFF",Te],{type:Te.type}):Te}(r,t),e)}:function(r,e,t,_e){if((_e=_e||open("","_blank"))&&(_e.document.title=_e.document.body.innerText="downloading..."),typeof r=="string")return o(r,e,t);var Te=r.type==="application/octet-stream",Ee=/constructor/i.test(n.HTMLElement)||n.safari,xe=/CriOS\/[\d]+/.test(navigator.userAgent);if((xe||Te&&Ee)&&(typeof FileReader>"u"?"undefined":_typeof(FileReader))==="object"){var Pe=new FileReader;Pe.onloadend=function(){var Ce=Pe.result;Ce=xe?Ce:Ce.replace(/^data:[^;]*;/,"data:attachment/file;"),_e?_e.location.href=Ce:location=Ce,_e=null},Pe.readAsDataURL(r)}else{var Re=n.URL||n.webkitURL,ke=Re.createObjectURL(r);_e?_e.location=ke:location.href=ke,_e=null,setTimeout(function(){Re.revokeObjectURL(ke)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function f(r){var e;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(Pe){return[parseInt(Pe[1]),parseInt(Pe[2]),parseInt(Pe[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(Pe){return[parseInt(Pe[1],16),parseInt(Pe[2],16),parseInt(Pe[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(Pe){return[parseInt(Pe[1]+Pe[1],16),parseInt(Pe[2]+Pe[2],16),parseInt(Pe[3]+Pe[3],16)]}}],_e=0;_e<t.length;_e++){var Te=t[_e].re,Ee=t[_e].process,xe=Te.exec(r);xe&&(e=Ee(xe),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var Pe=this.r.toString(16),Re=this.g.toString(16),ke=this.b.toString(16);return Pe.length==1&&(Pe="0"+Pe),Re.length==1&&(Re="0"+Re),ke.length==1&&(ke="0"+ke),"#"+Pe+Re+ke}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function d(r,e){var t=r[0],_e=r[1],Te=r[2],Ee=r[3];t=g(t,_e,Te,Ee,e[0],7,-680876936),Ee=g(Ee,t,_e,Te,e[1],12,-389564586),Te=g(Te,Ee,t,_e,e[2],17,606105819),_e=g(_e,Te,Ee,t,e[3],22,-1044525330),t=g(t,_e,Te,Ee,e[4],7,-176418897),Ee=g(Ee,t,_e,Te,e[5],12,1200080426),Te=g(Te,Ee,t,_e,e[6],17,-1473231341),_e=g(_e,Te,Ee,t,e[7],22,-45705983),t=g(t,_e,Te,Ee,e[8],7,1770035416),Ee=g(Ee,t,_e,Te,e[9],12,-1958414417),Te=g(Te,Ee,t,_e,e[10],17,-42063),_e=g(_e,Te,Ee,t,e[11],22,-1990404162),t=g(t,_e,Te,Ee,e[12],7,1804603682),Ee=g(Ee,t,_e,Te,e[13],12,-40341101),Te=g(Te,Ee,t,_e,e[14],17,-1502002290),t=m(t,_e=g(_e,Te,Ee,t,e[15],22,1236535329),Te,Ee,e[1],5,-165796510),Ee=m(Ee,t,_e,Te,e[6],9,-1069501632),Te=m(Te,Ee,t,_e,e[11],14,643717713),_e=m(_e,Te,Ee,t,e[0],20,-373897302),t=m(t,_e,Te,Ee,e[5],5,-701558691),Ee=m(Ee,t,_e,Te,e[10],9,38016083),Te=m(Te,Ee,t,_e,e[15],14,-660478335),_e=m(_e,Te,Ee,t,e[4],20,-405537848),t=m(t,_e,Te,Ee,e[9],5,568446438),Ee=m(Ee,t,_e,Te,e[14],9,-1019803690),Te=m(Te,Ee,t,_e,e[3],14,-187363961),_e=m(_e,Te,Ee,t,e[8],20,1163531501),t=m(t,_e,Te,Ee,e[13],5,-1444681467),Ee=m(Ee,t,_e,Te,e[2],9,-51403784),Te=m(Te,Ee,t,_e,e[7],14,1735328473),t=v(t,_e=m(_e,Te,Ee,t,e[12],20,-1926607734),Te,Ee,e[5],4,-378558),Ee=v(Ee,t,_e,Te,e[8],11,-2022574463),Te=v(Te,Ee,t,_e,e[11],16,1839030562),_e=v(_e,Te,Ee,t,e[14],23,-35309556),t=v(t,_e,Te,Ee,e[1],4,-1530992060),Ee=v(Ee,t,_e,Te,e[4],11,1272893353),Te=v(Te,Ee,t,_e,e[7],16,-155497632),_e=v(_e,Te,Ee,t,e[10],23,-1094730640),t=v(t,_e,Te,Ee,e[13],4,681279174),Ee=v(Ee,t,_e,Te,e[0],11,-358537222),Te=v(Te,Ee,t,_e,e[3],16,-722521979),_e=v(_e,Te,Ee,t,e[6],23,76029189),t=v(t,_e,Te,Ee,e[9],4,-640364487),Ee=v(Ee,t,_e,Te,e[12],11,-421815835),Te=v(Te,Ee,t,_e,e[15],16,530742520),t=b(t,_e=v(_e,Te,Ee,t,e[2],23,-995338651),Te,Ee,e[0],6,-198630844),Ee=b(Ee,t,_e,Te,e[7],10,1126891415),Te=b(Te,Ee,t,_e,e[14],15,-1416354905),_e=b(_e,Te,Ee,t,e[5],21,-57434055),t=b(t,_e,Te,Ee,e[12],6,1700485571),Ee=b(Ee,t,_e,Te,e[3],10,-1894986606),Te=b(Te,Ee,t,_e,e[10],15,-1051523),_e=b(_e,Te,Ee,t,e[1],21,-2054922799),t=b(t,_e,Te,Ee,e[8],6,1873313359),Ee=b(Ee,t,_e,Te,e[15],10,-30611744),Te=b(Te,Ee,t,_e,e[6],15,-1560198380),_e=b(_e,Te,Ee,t,e[13],21,1309151649),t=b(t,_e,Te,Ee,e[4],6,-145523070),Ee=b(Ee,t,_e,Te,e[11],10,-1120210379),Te=b(Te,Ee,t,_e,e[2],15,718787259),_e=b(_e,Te,Ee,t,e[9],21,-343485551),r[0]=_(t,r[0]),r[1]=_(_e,r[1]),r[2]=_(Te,r[2]),r[3]=_(Ee,r[3])}function p(r,e,t,_e,Te,Ee){return e=_(_(e,r),_(_e,Ee)),_(e<<Te|e>>>32-Te,t)}function g(r,e,t,_e,Te,Ee,xe){return p(e&t|~e&_e,r,e,Te,Ee,xe)}function m(r,e,t,_e,Te,Ee,xe){return p(e&_e|t&~_e,r,e,Te,Ee,xe)}function v(r,e,t,_e,Te,Ee,xe){return p(e^t^_e,r,e,Te,Ee,xe)}function b(r,e,t,_e,Te,Ee,xe){return p(t^(e|~_e),r,e,Te,Ee,xe)}function y(r){var e,t=r.length,_e=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=r.length;e+=64)d(_e,w(r.substring(e-64,e)));r=r.substring(e-64);var Te=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r.length;e++)Te[e>>2]|=r.charCodeAt(e)<<(e%4<<3);if(Te[e>>2]|=128<<(e%4<<3),e>55)for(d(_e,Te),e=0;e<16;e++)Te[e]=0;return Te[14]=8*t,d(_e,Te),_e}function w(r){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=r.charCodeAt(e)+(r.charCodeAt(e+1)<<8)+(r.charCodeAt(e+2)<<16)+(r.charCodeAt(e+3)<<24);return t}u=n.atob.bind(n),h=n.btoa.bind(n);var N="0123456789abcdef".split("");function L(r){for(var e="",t=0;t<4;t++)e+=N[r>>8*t+4&15]+N[r>>8*t&15];return e}function A(r){return String.fromCharCode((255&r)>>0,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function x(r){return y(r).map(A).join("")}var S=function(r){for(var e=0;e<r.length;e++)r[e]=L(r[e]);return r.join("")}(y("hello"))!="5d41402abc4b2a76b9719d911017c592";function _(r,e){if(S){var t=(65535&r)+(65535&e);return(r>>16)+(e>>16)+(t>>16)<<16|65535&t}return r+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function P(r,e){var t,_e,Te,Ee;if(r!==t){for(var xe=(Te=r,Ee=1+(256/r.length>>0),new Array(Ee+1).join(Te)),Pe=[],Re=0;Re<256;Re++)Pe[Re]=Re;var ke=0;for(Re=0;Re<256;Re++){var Ce=Pe[Re];ke=(ke+Ce+xe.charCodeAt(Re))%256,Pe[Re]=Pe[ke],Pe[ke]=Ce}t=r,_e=Pe}else Pe=_e;var Se=e.length,Ae=0,Ie=0,Me="";for(Re=0;Re<Se;Re++)Ie=(Ie+(Ce=Pe[Ae=(Ae+1)%256]))%256,Pe[Ae]=Pe[Ie],Pe[Ie]=Ce,xe=Pe[(Pe[Ae]+Pe[Ie])%256],Me+=String.fromCharCode(e.charCodeAt(Re)^xe);return Me}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var k={print:4,modify:8,copy:16,"annot-forms":32};function I(r,e,t,_e){this.v=1,this.r=2;var Te=192;r.forEach(function(Pe){if(k.perm!==void 0)throw new Error("Invalid permission: "+Pe);Te+=k[Pe]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var Ee=(e+this.padding).substr(0,32),xe=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(Ee,xe),this.P=-(1+(255^Te)),this.encryptionKey=x(Ee+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(_e)).substr(0,5),this.U=P(this.encryptionKey,this.padding)}function F(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var e="",t=r.length,_e=0;_e<t;_e++){var Te=r.charCodeAt(_e);Te<33||Te===35||Te===37||Te===40||Te===41||Te===47||Te===60||Te===62||Te===91||Te===93||Te===123||Te===125||Te>126?e+="#"+("0"+Te.toString(16)).slice(-2):e+=r[_e]}return e}function C(r){if(_typeof(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,_e,Te){if(Te=Te||!1,typeof t!="string"||typeof _e!="function"||typeof Te!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var Ee=Math.random().toString(35);return e[t][Ee]=[_e,!!Te],Ee},this.unsubscribe=function(t){for(var _e in e)if(e[_e][t])return delete e[_e][t],Object.keys(e[_e]).length===0&&delete e[_e],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var _e=Array.prototype.slice.call(arguments,1),Te=[];for(var Ee in e[t]){var xe=e[t][Ee];try{xe[0].apply(r,_e)}catch(Pe){n.console&&a.error("jsPDF PubSub Error",Pe.message,Pe)}xe[1]&&Te.push(Ee)}Te.length&&Te.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function j(r){if(!(this instanceof j))return new j(r);var e="opacity,stroke-opacity".split(",");for(var t in r)r.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=r[t]);this.id="",this.objectNumber=-1}function O(r,e){this.gState=r,this.matrix=e,this.id="",this.objectNumber=-1}function B(r,e,t,_e,Te){if(!(this instanceof B))return new B(r,e,t,_e,Te);this.type=r==="axial"?2:3,this.coords=e,this.colors=t,O.call(this,_e,Te)}function M(r,e,t,_e,Te){if(!(this instanceof M))return new M(r,e,t,_e,Te);this.boundingBox=r,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,O.call(this,_e,Te)}function E(r){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",_e=arguments[1],Te=arguments[2],Ee=arguments[3],xe=[],Pe=1,Re=16,ke="S",Ce=null;_typeof(r=r||{})==="object"&&(t=r.orientation,_e=r.unit||_e,Te=r.format||Te,Ee=r.compress||r.compressPdf||Ee,(Ce=r.encryption||null)!==null&&(Ce.userPassword=Ce.userPassword||"",Ce.ownerPassword=Ce.ownerPassword||"",Ce.userPermissions=Ce.userPermissions||[]),Pe=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(e=r.precision),r.floatPrecision!==void 0&&(Re=r.floatPrecision),ke=r.defaultPathOperation||"S"),xe=r.filters||(Ee===!0?["FlateEncode"]:xe),_e=_e||"mm",t=(""+(t||"P")).toLowerCase();var Se=r.putOnlyUsedFonts||!1,Ae={},Ie={internal:{},__private__:{}};Ie.__private__.PubSub=C;var Me="1.3",Fe=Ie.__private__.getPdfVersion=function(){return Me};Ie.__private__.setPdfVersion=function(Ze){Me=Ze};var Ve={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};Ie.__private__.getPageFormats=function(){return Ve};var je=Ie.__private__.getPageFormat=function(Ze){return Ve[Ze]};Te=Te||"a4";var Be={COMPAT:"compat",ADVANCED:"advanced"},qe=Be.COMPAT;function He(){this.saveGraphicsState(),Yn(new ci(Wr,0,0,-Wr,0,Ao()*Wr).toString()+" cm"),this.setFontSize(this.getFontSize()/Wr),ke="n",qe=Be.ADVANCED}function Xe(){this.restoreGraphicsState(),ke="S",qe=Be.COMPAT}var Je=Ie.__private__.combineFontStyleAndFontWeight=function(Ze,kn){if(Ze=="bold"&&kn=="normal"||Ze=="bold"&&kn==400||Ze=="normal"&&kn=="italic"||Ze=="bold"&&kn=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return kn&&(Ze=kn==400||kn==="normal"?Ze==="italic"?"italic":"normal":kn!=700&&kn!=="bold"||Ze!=="normal"?(kn==700?"bold":kn)+""+Ze:"bold"),Ze};Ie.advancedAPI=function(Ze){var kn=qe===Be.COMPAT;return kn&&He.call(this),typeof Ze!="function"||(Ze(this),kn&&Xe.call(this)),this},Ie.compatAPI=function(Ze){var kn=qe===Be.ADVANCED;return kn&&Xe.call(this),typeof Ze!="function"||(Ze(this),kn&&He.call(this)),this},Ie.isAdvancedAPI=function(){return qe===Be.ADVANCED};var Qe,Ke=function(Ze){if(qe!==Be.ADVANCED)throw new Error(Ze+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Ye=Ie.roundToPrecision=Ie.__private__.roundToPrecision=function(Ze,kn){var Wn=e||kn;if(isNaN(Ze)||isNaN(Wn))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return Ze.toFixed(Wn).replace(/0+$/,"")};Qe=Ie.hpf=Ie.__private__.hpf=typeof Re=="number"?function(Ze){if(isNaN(Ze))throw new Error("Invalid argument passed to jsPDF.hpf");return Ye(Ze,Re)}:Re==="smart"?function(Ze){if(isNaN(Ze))throw new Error("Invalid argument passed to jsPDF.hpf");return Ye(Ze,Ze>-1&&Ze<1?16:5)}:function(Ze){if(isNaN(Ze))throw new Error("Invalid argument passed to jsPDF.hpf");return Ye(Ze,16)};var pn=Ie.f2=Ie.__private__.f2=function(Ze){if(isNaN(Ze))throw new Error("Invalid argument passed to jsPDF.f2");return Ye(Ze,2)},un=Ie.__private__.f3=function(Ze){if(isNaN(Ze))throw new Error("Invalid argument passed to jsPDF.f3");return Ye(Ze,3)},fn=Ie.scale=Ie.__private__.scale=function(Ze){if(isNaN(Ze))throw new Error("Invalid argument passed to jsPDF.scale");return qe===Be.COMPAT?Ze*Wr:qe===Be.ADVANCED?Ze:void 0},mn=function(Ze){return qe===Be.COMPAT?Ao()-Ze:qe===Be.ADVANCED?Ze:void 0},wn=function(Ze){return fn(mn(Ze))};Ie.__private__.setPrecision=Ie.setPrecision=function(Ze){typeof parseInt(Ze,10)=="number"&&(e=parseInt(Ze,10))};var Pn,xn="00000000000000000000000000000000",In=Ie.__private__.getFileId=function(){return xn},Ln=Ie.__private__.setFileId=function(Ze){return xn=Ze!==void 0&&/^[a-fA-F0-9]{32}$/.test(Ze)?Ze.toUpperCase():xn.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),Ce!==null&&(Ji=new I(Ce.userPermissions,Ce.userPassword,Ce.ownerPassword,xn)),xn};Ie.setFileId=function(Ze){return Ln(Ze),this},Ie.getFileId=function(){return In()};var $n=Ie.__private__.convertDateToPDFDate=function(Ze){var kn=Ze.getTimezoneOffset(),Wn=kn<0?"+":"-",Zn=Math.floor(Math.abs(kn/60)),dr=Math.abs(kn%60),Rr=[Wn,Un(Zn),"'",Un(dr),"'"].join("");return["D:",Ze.getFullYear(),Un(Ze.getMonth()+1),Un(Ze.getDate()),Un(Ze.getHours()),Un(Ze.getMinutes()),Un(Ze.getSeconds()),Rr].join("")},Sn=Ie.__private__.convertPDFDateToDate=function(Ze){var kn=parseInt(Ze.substr(2,4),10),Wn=parseInt(Ze.substr(6,2),10)-1,Zn=parseInt(Ze.substr(8,2),10),dr=parseInt(Ze.substr(10,2),10),Rr=parseInt(Ze.substr(12,2),10),jr=parseInt(Ze.substr(14,2),10);return new Date(kn,Wn,Zn,dr,Rr,jr,0)},Bn=Ie.__private__.setCreationDate=function(Ze){var kn;if(Ze===void 0&&(Ze=new Date),Ze instanceof Date)kn=$n(Ze);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(Ze))throw new Error("Invalid argument passed to jsPDF.setCreationDate");kn=Ze}return Pn=kn},Tn=Ie.__private__.getCreationDate=function(Ze){var kn=Pn;return Ze==="jsDate"&&(kn=Sn(Pn)),kn};Ie.setCreationDate=function(Ze){return Bn(Ze),this},Ie.getCreationDate=function(Ze){return Tn(Ze)};var vn,Un=Ie.__private__.padd2=function(Ze){return("0"+parseInt(Ze)).slice(-2)},zn=Ie.__private__.padd2Hex=function(Ze){return("00"+(Ze=Ze.toString())).substr(Ze.length)},Hn=0,Jn=[],nr=[],or=0,Sr=[],kr=[],Vr=!1,Lr=nr,Qr=function(){Hn=0,or=0,nr=[],Jn=[],Sr=[],co=os(),js=os()};Ie.__private__.setCustomOutputDestination=function(Ze){Vr=!0,Lr=Ze};var wr=function(Ze){Vr||(Lr=Ze)};Ie.__private__.resetCustomOutputDestination=function(){Vr=!1,Lr=nr};var Yn=Ie.__private__.out=function(Ze){return Ze=Ze.toString(),or+=Ze.length+1,Lr.push(Ze),Lr},gi=Ie.__private__.write=function(Ze){return Yn(arguments.length===1?Ze.toString():Array.prototype.join.call(arguments," "))},ui=Ie.__private__.getArrayBuffer=function(Ze){for(var kn=Ze.length,Wn=new ArrayBuffer(kn),Zn=new Uint8Array(Wn);kn--;)Zn[kn]=Ze.charCodeAt(kn);return Wn},Dr=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];Ie.__private__.getStandardFonts=function(){return Dr};var $r=r.fontSize||16;Ie.__private__.setFontSize=Ie.setFontSize=function(Ze){return $r=qe===Be.ADVANCED?Ze/Wr:Ze,this};var Kr,Fr=Ie.__private__.getFontSize=Ie.getFontSize=function(){return qe===Be.COMPAT?$r:$r*Wr},li=r.R2L||!1;Ie.__private__.setR2L=Ie.setR2L=function(Ze){return li=Ze,this},Ie.__private__.getR2L=Ie.getR2L=function(){return li};var yi,ei=Ie.__private__.setZoomMode=function(Ze){var kn=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(Ze))Kr=Ze;else if(isNaN(Ze)){if(kn.indexOf(Ze)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+Ze+'" is not recognized.');Kr=Ze}else Kr=parseInt(Ze,10)};Ie.__private__.getZoomMode=function(){return Kr};var fr,Pr=Ie.__private__.setPageMode=function(Ze){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(Ze)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+Ze+'" is not recognized.');yi=Ze};Ie.__private__.getPageMode=function(){return yi};var ti=Ie.__private__.setLayoutMode=function(Ze){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(Ze)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+Ze+'" is not recognized.');fr=Ze};Ie.__private__.getLayoutMode=function(){return fr},Ie.__private__.setDisplayMode=Ie.setDisplayMode=function(Ze,kn,Wn){return ei(Ze),ti(kn),Pr(Wn),this};var Gr={title:"",subject:"",author:"",keywords:"",creator:""};Ie.__private__.getDocumentProperty=function(Ze){if(Object.keys(Gr).indexOf(Ze)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Gr[Ze]},Ie.__private__.getDocumentProperties=function(){return Gr},Ie.__private__.setDocumentProperties=Ie.setProperties=Ie.setDocumentProperties=function(Ze){for(var kn in Gr)Gr.hasOwnProperty(kn)&&Ze[kn]&&(Gr[kn]=Ze[kn]);return this},Ie.__private__.setDocumentProperty=function(Ze,kn){if(Object.keys(Gr).indexOf(Ze)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Gr[Ze]=kn};var oi,Wr,Ci,xi,fi,Di={},Ni={},As=[],Ti={},Bi={},Qi={},vs={},Ss=null,di=0,Ur=[],ni=new C(Ie),ro=r.hotfixes||[],ps={},Os={},Hs=[],ci=function Ze(kn,Wn,Zn,dr,Rr,jr){if(!(this instanceof Ze))return new Ze(kn,Wn,Zn,dr,Rr,jr);isNaN(kn)&&(kn=1),isNaN(Wn)&&(Wn=0),isNaN(Zn)&&(Zn=0),isNaN(dr)&&(dr=1),isNaN(Rr)&&(Rr=0),isNaN(jr)&&(jr=0),this._matrix=[kn,Wn,Zn,dr,Rr,jr]};Object.defineProperty(ci.prototype,"sx",{get:function(){return this._matrix[0]},set:function(Ze){this._matrix[0]=Ze}}),Object.defineProperty(ci.prototype,"shy",{get:function(){return this._matrix[1]},set:function(Ze){this._matrix[1]=Ze}}),Object.defineProperty(ci.prototype,"shx",{get:function(){return this._matrix[2]},set:function(Ze){this._matrix[2]=Ze}}),Object.defineProperty(ci.prototype,"sy",{get:function(){return this._matrix[3]},set:function(Ze){this._matrix[3]=Ze}}),Object.defineProperty(ci.prototype,"tx",{get:function(){return this._matrix[4]},set:function(Ze){this._matrix[4]=Ze}}),Object.defineProperty(ci.prototype,"ty",{get:function(){return this._matrix[5]},set:function(Ze){this._matrix[5]=Ze}}),Object.defineProperty(ci.prototype,"a",{get:function(){return this._matrix[0]},set:function(Ze){this._matrix[0]=Ze}}),Object.defineProperty(ci.prototype,"b",{get:function(){return this._matrix[1]},set:function(Ze){this._matrix[1]=Ze}}),Object.defineProperty(ci.prototype,"c",{get:function(){return this._matrix[2]},set:function(Ze){this._matrix[2]=Ze}}),Object.defineProperty(ci.prototype,"d",{get:function(){return this._matrix[3]},set:function(Ze){this._matrix[3]=Ze}}),Object.defineProperty(ci.prototype,"e",{get:function(){return this._matrix[4]},set:function(Ze){this._matrix[4]=Ze}}),Object.defineProperty(ci.prototype,"f",{get:function(){return this._matrix[5]},set:function(Ze){this._matrix[5]=Ze}}),Object.defineProperty(ci.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ci.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ci.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ci.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ci.prototype.join=function(Ze){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Qe).join(Ze)},ci.prototype.multiply=function(Ze){var kn=Ze.sx*this.sx+Ze.shy*this.shx,Wn=Ze.sx*this.shy+Ze.shy*this.sy,Zn=Ze.shx*this.sx+Ze.sy*this.shx,dr=Ze.shx*this.shy+Ze.sy*this.sy,Rr=Ze.tx*this.sx+Ze.ty*this.shx+this.tx,jr=Ze.tx*this.shy+Ze.ty*this.sy+this.ty;return new ci(kn,Wn,Zn,dr,Rr,jr)},ci.prototype.decompose=function(){var Ze=this.sx,kn=this.shy,Wn=this.shx,Zn=this.sy,dr=this.tx,Rr=this.ty,jr=Math.sqrt(Ze*Ze+kn*kn),ii=(Ze/=jr)*Wn+(kn/=jr)*Zn;Wn-=Ze*ii,Zn-=kn*ii;var ze=Math.sqrt(Wn*Wn+Zn*Zn);return ii/=ze,Ze*(Zn/=ze)<kn*(Wn/=ze)&&(Ze=-Ze,kn=-kn,ii=-ii,jr=-jr),{scale:new ci(jr,0,0,ze,0,0),translate:new ci(1,0,0,1,dr,Rr),rotate:new ci(Ze,kn,-kn,Ze,0,0),skew:new ci(1,0,ii,1,0,0)}},ci.prototype.toString=function(Ze){return this.join(" ")},ci.prototype.inversed=function(){var Ze=this.sx,kn=this.shy,Wn=this.shx,Zn=this.sy,dr=this.tx,Rr=this.ty,jr=1/(Ze*Zn-kn*Wn),ii=Zn*jr,ze=-kn*jr,gn=-Wn*jr,En=Ze*jr;return new ci(ii,ze,gn,En,-ii*dr-gn*Rr,-ze*dr-En*Rr)},ci.prototype.applyToPoint=function(Ze){var kn=Ze.x*this.sx+Ze.y*this.shx+this.tx,Wn=Ze.x*this.shy+Ze.y*this.sy+this.ty;return new oa(kn,Wn)},ci.prototype.applyToRectangle=function(Ze){var kn=this.applyToPoint(Ze),Wn=this.applyToPoint(new oa(Ze.x+Ze.w,Ze.y+Ze.h));return new Fa(kn.x,kn.y,Wn.x-kn.x,Wn.y-kn.y)},ci.prototype.clone=function(){var Ze=this.sx,kn=this.shy,Wn=this.shx,Zn=this.sy,dr=this.tx,Rr=this.ty;return new ci(Ze,kn,Wn,Zn,dr,Rr)},Ie.Matrix=ci;var Vs=Ie.matrixMult=function(Ze,kn){return kn.multiply(Ze)},Ps=new ci(1,0,0,1,0,0);Ie.unitMatrix=Ie.identityMatrix=Ps;var Is=function(Ze,kn){if(!Bi[Ze]){var Wn=(kn instanceof B?"Sh":"P")+(Object.keys(Ti).length+1).toString(10);kn.id=Wn,Bi[Ze]=Wn,Ti[Wn]=kn,ni.publish("addPattern",kn)}};Ie.ShadingPattern=B,Ie.TilingPattern=M,Ie.addShadingPattern=function(Ze,kn){return Ke("addShadingPattern()"),Is(Ze,kn),this},Ie.beginTilingPattern=function(Ze){Ke("beginTilingPattern()"),Rl(Ze.boundingBox[0],Ze.boundingBox[1],Ze.boundingBox[2]-Ze.boundingBox[0],Ze.boundingBox[3]-Ze.boundingBox[1],Ze.matrix)},Ie.endTilingPattern=function(Ze,kn){Ke("endTilingPattern()"),kn.stream=kr[vn].join(`
`),Is(Ze,kn),ni.publish("endTilingPattern",kn),Hs.pop().restore()};var ss=Ie.__private__.newObject=function(){var Ze=os();return ms(Ze,!0),Ze},os=Ie.__private__.newObjectDeferred=function(){return Hn++,Jn[Hn]=function(){return or},Hn},ms=function(Ze,kn){return kn=typeof kn=="boolean"&&kn,Jn[Ze]=or,kn&&Yn(Ze+" 0 obj"),Ze},vo=Ie.__private__.newAdditionalObject=function(){var Ze={objId:os(),content:""};return Sr.push(Ze),Ze},co=os(),js=os(),Vn=Ie.__private__.decodeColorString=function(Ze){var kn=Ze.split(" ");if(kn.length!==2||kn[1]!=="g"&&kn[1]!=="G")kn.length===5&&(kn[4]==="k"||kn[4]==="K")&&(kn=[(1-kn[0])*(1-kn[3]),(1-kn[1])*(1-kn[3]),(1-kn[2])*(1-kn[3]),"r"]);else{var Wn=parseFloat(kn[0]);kn=[Wn,Wn,Wn,"r"]}for(var Zn="#",dr=0;dr<3;dr++)Zn+=("0"+Math.floor(255*parseFloat(kn[dr])).toString(16)).slice(-2);return Zn},Kn=Ie.__private__.encodeColorString=function(Ze){var kn;typeof Ze=="string"&&(Ze={ch1:Ze});var Wn=Ze.ch1,Zn=Ze.ch2,dr=Ze.ch3,Rr=Ze.ch4,jr=Ze.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Wn=="string"&&Wn.charAt(0)!=="#"){var ii=new f(Wn);if(ii.ok)Wn=ii.toHex();else if(!/^\d*\.?\d*$/.test(Wn))throw new Error('Invalid color "'+Wn+'" passed to jsPDF.encodeColorString.')}if(typeof Wn=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Wn)&&(Wn="#"+Wn[1]+Wn[1]+Wn[2]+Wn[2]+Wn[3]+Wn[3]),typeof Wn=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Wn)){var ze=parseInt(Wn.substr(1),16);Wn=ze>>16&255,Zn=ze>>8&255,dr=255&ze}if(Zn===void 0||Rr===void 0&&Wn===Zn&&Zn===dr)if(typeof Wn=="string")kn=Wn+" "+jr[0];else switch(Ze.precision){case 2:kn=pn(Wn/255)+" "+jr[0];break;case 3:default:kn=un(Wn/255)+" "+jr[0]}else if(Rr===void 0||_typeof(Rr)==="object"){if(Rr&&!isNaN(Rr.a)&&Rr.a===0)return kn=["1.","1.","1.",jr[1]].join(" ");if(typeof Wn=="string")kn=[Wn,Zn,dr,jr[1]].join(" ");else switch(Ze.precision){case 2:kn=[pn(Wn/255),pn(Zn/255),pn(dr/255),jr[1]].join(" ");break;default:case 3:kn=[un(Wn/255),un(Zn/255),un(dr/255),jr[1]].join(" ")}}else if(typeof Wn=="string")kn=[Wn,Zn,dr,Rr,jr[2]].join(" ");else switch(Ze.precision){case 2:kn=[pn(Wn),pn(Zn),pn(dr),pn(Rr),jr[2]].join(" ");break;case 3:default:kn=[un(Wn),un(Zn),un(dr),un(Rr),jr[2]].join(" ")}return kn},er=Ie.__private__.getFilters=function(){return xe},lr=Ie.__private__.putStream=function(Ze){var kn=(Ze=Ze||{}).data||"",Wn=Ze.filters||er(),Zn=Ze.alreadyAppliedFilters||[],dr=Ze.addLength1||!1,Rr=kn.length,jr=Ze.objectId,ii=function(qi){return qi};if(Ce!==null&&jr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");Ce!==null&&(ii=Ji.encryptor(jr,0));var ze={};Wn===!0&&(Wn=["FlateEncode"]);var gn=Ze.additionalKeyValues||[],En=(ze=E.API.processDataByFilters!==void 0?E.API.processDataByFilters(kn,Wn):{data:kn,reverseChain:[]}).reverseChain+(Array.isArray(Zn)?Zn.join(" "):Zn.toString());if(ze.data.length!==0&&(gn.push({key:"Length",value:ze.data.length}),dr===!0&&gn.push({key:"Length1",value:Rr})),En.length!=0)if(En.split("/").length-1==1)gn.push({key:"Filter",value:En});else{gn.push({key:"Filter",value:"["+En+"]"});for(var Fn=0;Fn<gn.length;Fn+=1)if(gn[Fn].key==="DecodeParms"){for(var ur=[],yr=0;yr<ze.reverseChain.split("/").length-1;yr+=1)ur.push("null");ur.push(gn[Fn].value),gn[Fn].value="["+ur.join(" ")+"]"}}Yn("<<");for(var Br=0;Br<gn.length;Br++)Yn("/"+gn[Br].key+" "+gn[Br].value);Yn(">>"),ze.data.length!==0&&(Yn("stream"),Yn(ii(ze.data)),Yn("endstream"))},gr=Ie.__private__.putPage=function(Ze){var kn=Ze.number,Wn=Ze.data,Zn=Ze.objId,dr=Ze.contentsObjId;ms(Zn,!0),Yn("<</Type /Page"),Yn("/Parent "+Ze.rootDictionaryObjId+" 0 R"),Yn("/Resources "+Ze.resourceDictionaryObjId+" 0 R"),Yn("/MediaBox ["+parseFloat(Qe(Ze.mediaBox.bottomLeftX))+" "+parseFloat(Qe(Ze.mediaBox.bottomLeftY))+" "+Qe(Ze.mediaBox.topRightX)+" "+Qe(Ze.mediaBox.topRightY)+"]"),Ze.cropBox!==null&&Yn("/CropBox ["+Qe(Ze.cropBox.bottomLeftX)+" "+Qe(Ze.cropBox.bottomLeftY)+" "+Qe(Ze.cropBox.topRightX)+" "+Qe(Ze.cropBox.topRightY)+"]"),Ze.bleedBox!==null&&Yn("/BleedBox ["+Qe(Ze.bleedBox.bottomLeftX)+" "+Qe(Ze.bleedBox.bottomLeftY)+" "+Qe(Ze.bleedBox.topRightX)+" "+Qe(Ze.bleedBox.topRightY)+"]"),Ze.trimBox!==null&&Yn("/TrimBox ["+Qe(Ze.trimBox.bottomLeftX)+" "+Qe(Ze.trimBox.bottomLeftY)+" "+Qe(Ze.trimBox.topRightX)+" "+Qe(Ze.trimBox.topRightY)+"]"),Ze.artBox!==null&&Yn("/ArtBox ["+Qe(Ze.artBox.bottomLeftX)+" "+Qe(Ze.artBox.bottomLeftY)+" "+Qe(Ze.artBox.topRightX)+" "+Qe(Ze.artBox.topRightY)+"]"),typeof Ze.userUnit=="number"&&Ze.userUnit!==1&&Yn("/UserUnit "+Ze.userUnit),ni.publish("putPage",{objId:Zn,pageContext:Ur[kn],pageNumber:kn,page:Wn}),Yn("/Contents "+dr+" 0 R"),Yn(">>"),Yn("endobj");var Rr=Wn.join(`
`);return qe===Be.ADVANCED&&(Rr+=`
Q`),ms(dr,!0),lr({data:Rr,filters:er(),objectId:dr}),Yn("endobj"),Zn},xr=Ie.__private__.putPages=function(){var Ze,kn,Wn=[];for(Ze=1;Ze<=di;Ze++)Ur[Ze].objId=os(),Ur[Ze].contentsObjId=os();for(Ze=1;Ze<=di;Ze++)Wn.push(gr({number:Ze,data:kr[Ze],objId:Ur[Ze].objId,contentsObjId:Ur[Ze].contentsObjId,mediaBox:Ur[Ze].mediaBox,cropBox:Ur[Ze].cropBox,bleedBox:Ur[Ze].bleedBox,trimBox:Ur[Ze].trimBox,artBox:Ur[Ze].artBox,userUnit:Ur[Ze].userUnit,rootDictionaryObjId:co,resourceDictionaryObjId:js}));ms(co,!0),Yn("<</Type /Pages");var Zn="/Kids [";for(kn=0;kn<di;kn++)Zn+=Wn[kn]+" 0 R ";Yn(Zn+"]"),Yn("/Count "+di),Yn(">>"),Yn("endobj"),ni.publish("postPutPages")},Hr=function(Ze){ni.publish("putFont",{font:Ze,out:Yn,newObject:ss,putStream:lr}),Ze.isAlreadyPutted!==!0&&(Ze.objectNumber=ss(),Yn("<<"),Yn("/Type /Font"),Yn("/BaseFont /"+F(Ze.postScriptName)),Yn("/Subtype /Type1"),typeof Ze.encoding=="string"&&Yn("/Encoding /"+Ze.encoding),Yn("/FirstChar 32"),Yn("/LastChar 255"),Yn(">>"),Yn("endobj"))},pi=function(){for(var Ze in Di)Di.hasOwnProperty(Ze)&&(Se===!1||Se===!0&&Ae.hasOwnProperty(Ze))&&Hr(Di[Ze])},ri=function(Ze){Ze.objectNumber=ss();var kn=[];kn.push({key:"Type",value:"/XObject"}),kn.push({key:"Subtype",value:"/Form"}),kn.push({key:"BBox",value:"["+[Qe(Ze.x),Qe(Ze.y),Qe(Ze.x+Ze.width),Qe(Ze.y+Ze.height)].join(" ")+"]"}),kn.push({key:"Matrix",value:"["+Ze.matrix.toString()+"]"});var Wn=Ze.pages[1].join(`
`);lr({data:Wn,additionalKeyValues:kn,objectId:Ze.objectNumber}),Yn("endobj")},Ii=function(){for(var Ze in ps)ps.hasOwnProperty(Ze)&&ri(ps[Ze])},Yi=function(Ze,kn){var Wn,Zn=[],dr=1/(kn-1);for(Wn=0;Wn<1;Wn+=dr)Zn.push(Wn);if(Zn.push(1),Ze[0].offset!=0){var Rr={offset:0,color:Ze[0].color};Ze.unshift(Rr)}if(Ze[Ze.length-1].offset!=1){var jr={offset:1,color:Ze[Ze.length-1].color};Ze.push(jr)}for(var ii="",ze=0,gn=0;gn<Zn.length;gn++){for(Wn=Zn[gn];Wn>Ze[ze+1].offset;)ze++;var En=Ze[ze].offset,Fn=(Wn-En)/(Ze[ze+1].offset-En),ur=Ze[ze].color,yr=Ze[ze+1].color;ii+=zn(Math.round((1-Fn)*ur[0]+Fn*yr[0]).toString(16))+zn(Math.round((1-Fn)*ur[1]+Fn*yr[1]).toString(16))+zn(Math.round((1-Fn)*ur[2]+Fn*yr[2]).toString(16))}return ii.trim()},Li=function(Ze,kn){kn||(kn=21);var Wn=ss(),Zn=Yi(Ze.colors,kn),dr=[];dr.push({key:"FunctionType",value:"0"}),dr.push({key:"Domain",value:"[0.0 1.0]"}),dr.push({key:"Size",value:"["+kn+"]"}),dr.push({key:"BitsPerSample",value:"8"}),dr.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),dr.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),lr({data:Zn,additionalKeyValues:dr,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Wn}),Yn("endobj"),Ze.objectNumber=ss(),Yn("<< /ShadingType "+Ze.type),Yn("/ColorSpace /DeviceRGB");var Rr="/Coords ["+Qe(parseFloat(Ze.coords[0]))+" "+Qe(parseFloat(Ze.coords[1]))+" ";Ze.type===2?Rr+=Qe(parseFloat(Ze.coords[2]))+" "+Qe(parseFloat(Ze.coords[3])):Rr+=Qe(parseFloat(Ze.coords[2]))+" "+Qe(parseFloat(Ze.coords[3]))+" "+Qe(parseFloat(Ze.coords[4]))+" "+Qe(parseFloat(Ze.coords[5])),Yn(Rr+="]"),Ze.matrix&&Yn("/Matrix ["+Ze.matrix.toString()+"]"),Yn("/Function "+Wn+" 0 R"),Yn("/Extend [true true]"),Yn(">>"),Yn("endobj")},Rs=function(Ze,kn){var Wn=os(),Zn=ss();kn.push({resourcesOid:Wn,objectOid:Zn}),Ze.objectNumber=Zn;var dr=[];dr.push({key:"Type",value:"/Pattern"}),dr.push({key:"PatternType",value:"1"}),dr.push({key:"PaintType",value:"1"}),dr.push({key:"TilingType",value:"1"}),dr.push({key:"BBox",value:"["+Ze.boundingBox.map(Qe).join(" ")+"]"}),dr.push({key:"XStep",value:Qe(Ze.xStep)}),dr.push({key:"YStep",value:Qe(Ze.yStep)}),dr.push({key:"Resources",value:Wn+" 0 R"}),Ze.matrix&&dr.push({key:"Matrix",value:"["+Ze.matrix.toString()+"]"}),lr({data:Ze.stream,additionalKeyValues:dr,objectId:Ze.objectNumber}),Yn("endobj")},Er=function(Ze){var kn;for(kn in Ti)Ti.hasOwnProperty(kn)&&(Ti[kn]instanceof B?Li(Ti[kn]):Ti[kn]instanceof M&&Rs(Ti[kn],Ze))},Oi=function(Ze){for(var kn in Ze.objectNumber=ss(),Yn("<<"),Ze)switch(kn){case"opacity":Yn("/ca "+pn(Ze[kn]));break;case"stroke-opacity":Yn("/CA "+pn(Ze[kn]))}Yn(">>"),Yn("endobj")},Wi=function(){var Ze;for(Ze in Qi)Qi.hasOwnProperty(Ze)&&Oi(Qi[Ze])},$s=function(){for(var Ze in Yn("/XObject <<"),ps)ps.hasOwnProperty(Ze)&&ps[Ze].objectNumber>=0&&Yn("/"+Ze+" "+ps[Ze].objectNumber+" 0 R");ni.publish("putXobjectDict"),Yn(">>")},wo=function(){Ji.oid=ss(),Yn("<<"),Yn("/Filter /Standard"),Yn("/V "+Ji.v),Yn("/R "+Ji.r),Yn("/U <"+Ji.toHexString(Ji.U)+">"),Yn("/O <"+Ji.toHexString(Ji.O)+">"),Yn("/P "+Ji.P),Yn(">>"),Yn("endobj")},Wo=function(){for(var Ze in Yn("/Font <<"),Di)Di.hasOwnProperty(Ze)&&(Se===!1||Se===!0&&Ae.hasOwnProperty(Ze))&&Yn("/"+Ze+" "+Di[Ze].objectNumber+" 0 R");Yn(">>")},io=function(){if(Object.keys(Ti).length>0){for(var Ze in Yn("/Shading <<"),Ti)Ti.hasOwnProperty(Ze)&&Ti[Ze]instanceof B&&Ti[Ze].objectNumber>=0&&Yn("/"+Ze+" "+Ti[Ze].objectNumber+" 0 R");ni.publish("putShadingPatternDict"),Yn(">>")}},ma=function(Ze){if(Object.keys(Ti).length>0){for(var kn in Yn("/Pattern <<"),Ti)Ti.hasOwnProperty(kn)&&Ti[kn]instanceof Ie.TilingPattern&&Ti[kn].objectNumber>=0&&Ti[kn].objectNumber<Ze&&Yn("/"+kn+" "+Ti[kn].objectNumber+" 0 R");ni.publish("putTilingPatternDict"),Yn(">>")}},ts=function(){if(Object.keys(Qi).length>0){var Ze;for(Ze in Yn("/ExtGState <<"),Qi)Qi.hasOwnProperty(Ze)&&Qi[Ze].objectNumber>=0&&Yn("/"+Ze+" "+Qi[Ze].objectNumber+" 0 R");ni.publish("putGStateDict"),Yn(">>")}},us=function(Ze){ms(Ze.resourcesOid,!0),Yn("<<"),Yn("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Wo(),io(),ma(Ze.objectOid),ts(),$s(),Yn(">>"),Yn("endobj")},Wa=function(){var Ze=[];pi(),Wi(),Ii(),Er(Ze),ni.publish("putResources"),Ze.forEach(us),us({resourcesOid:js,objectOid:Number.MAX_SAFE_INTEGER}),ni.publish("postPutResources")},Ha=function(){ni.publish("putAdditionalObjects");for(var Ze=0;Ze<Sr.length;Ze++){var kn=Sr[Ze];ms(kn.objId,!0),Yn(kn.content),Yn("endobj")}ni.publish("postPutAdditionalObjects")},ga=function(Ze){Ni[Ze.fontName]=Ni[Ze.fontName]||{},Ni[Ze.fontName][Ze.fontStyle]=Ze.id},ya=function(Ze,kn,Wn,Zn,dr){var Rr={id:"F"+(Object.keys(Di).length+1).toString(10),postScriptName:Ze,fontName:kn,fontStyle:Wn,encoding:Zn,isStandardFont:dr||!1,metadata:{}};return ni.publish("addFont",{font:Rr,instance:this}),Di[Rr.id]=Rr,ga(Rr),Rr.id},ba=function(Ze){for(var kn=0,Wn=Dr.length;kn<Wn;kn++){var Zn=ya.call(this,Ze[kn][0],Ze[kn][1],Ze[kn][2],Dr[kn][3],!0);Se===!1&&(Ae[Zn]=!0);var dr=Ze[kn][0].split("-");ga({id:Zn,fontName:dr[0],fontStyle:dr[1]||""})}ni.publish("addFonts",{fonts:Di,dictionary:Ni})},Bs=function(Ze){return Ze.foo=function(){try{return Ze.apply(this,arguments)}catch(Zn){var kn=Zn.stack||"";~kn.indexOf(" at ")&&(kn=kn.split(" at ")[1]);var Wn="Error in function "+kn.split(`
`)[0].split("<")[0]+": "+Zn.message;if(!n.console)throw new Error(Wn);n.console.error(Wn,Zn),n.alert&&alert(Wn)}},Ze.foo.bar=Ze,Ze.foo},va=function(Ze,kn){var Wn,Zn,dr,Rr,jr,ii,ze,gn,En;if(dr=(kn=kn||{}).sourceEncoding||"Unicode",jr=kn.outputEncoding,(kn.autoencode||jr)&&Di[oi].metadata&&Di[oi].metadata[dr]&&Di[oi].metadata[dr].encoding&&(Rr=Di[oi].metadata[dr].encoding,!jr&&Di[oi].encoding&&(jr=Di[oi].encoding),!jr&&Rr.codePages&&(jr=Rr.codePages[0]),typeof jr=="string"&&(jr=Rr[jr]),jr)){for(ze=!1,ii=[],Wn=0,Zn=Ze.length;Wn<Zn;Wn++)(gn=jr[Ze.charCodeAt(Wn)])?ii.push(String.fromCharCode(gn)):ii.push(Ze[Wn]),ii[Wn].charCodeAt(0)>>8&&(ze=!0);Ze=ii.join("")}for(Wn=Ze.length;ze===void 0&&Wn!==0;)Ze.charCodeAt(Wn-1)>>8&&(ze=!0),Wn--;if(!ze)return Ze;for(ii=kn.noBOM?[]:[254,255],Wn=0,Zn=Ze.length;Wn<Zn;Wn++){if((En=(gn=Ze.charCodeAt(Wn))>>8)>>8)throw new Error("Character at position "+Wn+" of string '"+Ze+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ii.push(En),ii.push(gn-(En<<8))}return String.fromCharCode.apply(void 0,ii)},ks=Ie.__private__.pdfEscape=Ie.pdfEscape=function(Ze,kn){return va(Ze,kn).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ks=Ie.__private__.beginPage=function(Ze){kr[++di]=[],Ur[di]={objId:0,contentsObjId:0,userUnit:Number(Pe),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(Ze[0]),topRightY:Number(Ze[1])}},To(di),wr(kr[vn])},na=function(Ze,kn){var Wn,Zn,dr;switch(t=kn||t,typeof Ze=="string"&&(Wn=je(Ze.toLowerCase()),Array.isArray(Wn)&&(Zn=Wn[0],dr=Wn[1])),Array.isArray(Ze)&&(Zn=Ze[0]*Wr,dr=Ze[1]*Wr),isNaN(Zn)&&(Zn=Te[0],dr=Te[1]),(Zn>14400||dr>14400)&&(a.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Zn=Math.min(14400,Zn),dr=Math.min(14400,dr)),Te=[Zn,dr],t.substr(0,1)){case"l":dr>Zn&&(Te=[dr,Zn]);break;case"p":Zn>dr&&(Te=[dr,Zn])}Ks(Te),es(Vi),Yn(Js),Ul!==0&&Yn(Ul+" J"),Ya!==0&&Yn(Ya+" j"),ni.publish("addPage",{pageNumber:di})},ra=function(Ze){Ze>0&&Ze<=di&&(kr.splice(Ze,1),Ur.splice(Ze,1),di--,vn>di&&(vn=di),this.setPage(vn))},To=function(Ze){Ze>0&&Ze<=di&&(vn=Ze)},ns=Ie.__private__.getNumberOfPages=Ie.getNumberOfPages=function(){return kr.length-1},Ho=function(Ze,kn,Wn){var Zn,dr=void 0;return Wn=Wn||{},Ze=Ze!==void 0?Ze:Di[oi].fontName,kn=kn!==void 0?kn:Di[oi].fontStyle,Zn=Ze.toLowerCase(),Ni[Zn]!==void 0&&Ni[Zn][kn]!==void 0?dr=Ni[Zn][kn]:Ni[Ze]!==void 0&&Ni[Ze][kn]!==void 0?dr=Ni[Ze][kn]:Wn.disableWarning===!1&&a.warn("Unable to look up font label for font '"+Ze+"', '"+kn+"'. Refer to getFontList() for available fonts."),dr||Wn.noFallback||(dr=Ni.times[kn])==null&&(dr=Ni.times.normal),dr},Hi=Ie.__private__.putInfo=function(){var Ze=ss(),kn=function(Zn){return Zn};for(var Wn in Ce!==null&&(kn=Ji.encryptor(Ze,0)),Yn("<<"),Yn("/Producer ("+ks(kn("jsPDF "+E.version))+")"),Gr)Gr.hasOwnProperty(Wn)&&Gr[Wn]&&Yn("/"+Wn.substr(0,1).toUpperCase()+Wn.substr(1)+" ("+ks(kn(Gr[Wn]))+")");Yn("/CreationDate ("+ks(kn(Pn))+")"),Yn(">>"),Yn("endobj")},Mo=Ie.__private__.putCatalog=function(Ze){var kn=(Ze=Ze||{}).rootDictionaryObjId||co;switch(ss(),Yn("<<"),Yn("/Type /Catalog"),Yn("/Pages "+kn+" 0 R"),Kr||(Kr="fullwidth"),Kr){case"fullwidth":Yn("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Yn("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Yn("/OpenAction [3 0 R /Fit]");break;case"original":Yn("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Wn=""+Kr;Wn.substr(Wn.length-1)==="%"&&(Kr=parseInt(Kr)/100),typeof Kr=="number"&&Yn("/OpenAction [3 0 R /XYZ null null "+pn(Kr)+"]")}switch(fr||(fr="continuous"),fr){case"continuous":Yn("/PageLayout /OneColumn");break;case"single":Yn("/PageLayout /SinglePage");break;case"two":case"twoleft":Yn("/PageLayout /TwoColumnLeft");break;case"tworight":Yn("/PageLayout /TwoColumnRight")}yi&&Yn("/PageMode /"+yi),ni.publish("putCatalog"),Yn(">>"),Yn("endobj")},Ui=Ie.__private__.putTrailer=function(){Yn("trailer"),Yn("<<"),Yn("/Size "+(Hn+1)),Yn("/Root "+Hn+" 0 R"),Yn("/Info "+(Hn-1)+" 0 R"),Ce!==null&&Yn("/Encrypt "+Ji.oid+" 0 R"),Yn("/ID [ <"+xn+"> <"+xn+"> ]"),Yn(">>")},Ma=Ie.__private__.putHeader=function(){Yn("%PDF-"+Me),Yn("%ºß¬à")},Fi=Ie.__private__.putXRef=function(){var Ze="0000000000";Yn("xref"),Yn("0 "+(Hn+1)),Yn("0000000000 65535 f ");for(var kn=1;kn<=Hn;kn++)typeof Jn[kn]=="function"?Yn((Ze+Jn[kn]()).slice(-10)+" 00000 n "):Jn[kn]!==void 0?Yn((Ze+Jn[kn]).slice(-10)+" 00000 n "):Yn("0000000000 00000 n ")},Si=Ie.__private__.buildDocument=function(){Qr(),wr(nr),ni.publish("buildDocument"),Ma(),xr(),Ha(),Wa(),Ce!==null&&wo(),Hi(),Mo();var Ze=or;return Fi(),Ui(),Yn("startxref"),Yn(""+Ze),Yn("%%EOF"),wr(kr[vn]),nr.join(`
`)},ia=Ie.__private__.getBlob=function(Ze){return new Blob([ui(Ze)],{type:"application/pdf"})},No=Ie.output=Ie.__private__.output=Bs(function(Ze,kn){switch(typeof(kn=kn||{})=="string"?kn={filename:kn}:kn.filename=kn.filename||"generated.pdf",Ze){case void 0:return Si();case"save":Ie.save(kn.filename);break;case"arraybuffer":return ui(Si());case"blob":return ia(Si());case"bloburi":case"bloburl":if(n.URL!==void 0&&typeof n.URL.createObjectURL=="function")return n.URL&&n.URL.createObjectURL(ia(Si()))||void 0;a.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Wn="",Zn=Si();try{Wn=h(Zn)}catch{Wn=h(unescape(encodeURIComponent(Zn)))}return"data:application/pdf;filename="+kn.filename+";base64,"+Wn;case"pdfobjectnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var dr="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Rr=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';kn.pdfObjectUrl&&(dr=kn.pdfObjectUrl,Rr="");var jr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+dr+'"'+Rr+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(kn)+");<\/script></body></html>",ii=n.open();return ii!==null&&ii.document.write(jr),ii}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var ze='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(kn.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+kn.filename+'" width="500px" height="400px" /></body></html>',gn=n.open();if(gn!==null){gn.document.write(ze);var En=this;gn.document.documentElement.querySelector("#pdfViewer").onload=function(){gn.document.title=kn.filename,gn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(En.output("bloburl"))}}return gn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(n)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Fn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",kn)+'"></iframe></body></html>',ur=n.open();if(ur!==null&&(ur.document.write(Fn),ur.document.title=kn.filename),ur||typeof safari>"u")return ur;break;case"datauri":case"dataurl":return n.document.location.href=this.output("datauristring",kn);default:return null}}),Eo=function(Ze){return Array.isArray(ro)===!0&&ro.indexOf(Ze)>-1};switch(_e){case"pt":Wr=1;break;case"mm":Wr=72/25.4;break;case"cm":Wr=72/2.54;break;case"in":Wr=72;break;case"px":Wr=Eo("px_scaling")==1?.75:96/72;break;case"pc":case"em":Wr=12;break;case"ex":Wr=6;break;default:if(typeof _e!="number")throw new Error("Invalid unit: "+_e);Wr=_e}var Ji=null;Bn(),Ln();var xo=function(Ze){return Ce!==null?Ji.encryptor(Ze,0):function(kn){return kn}},ho=Ie.__private__.getPageInfo=Ie.getPageInfo=function(Ze){if(isNaN(Ze)||Ze%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ur[Ze].objId,pageNumber:Ze,pageContext:Ur[Ze]}},Ei=Ie.__private__.getPageInfoByObjId=function(Ze){if(isNaN(Ze)||Ze%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var kn in Ur)if(Ur[kn].objId===Ze)break;return ho(kn)},fo=Ie.__private__.getCurrentPageInfo=Ie.getCurrentPageInfo=function(){return{objId:Ur[vn].objId,pageNumber:vn,pageContext:Ur[vn]}};Ie.addPage=function(){return na.apply(this,arguments),this},Ie.setPage=function(){return To.apply(this,arguments),wr.call(this,kr[vn]),this},Ie.insertPage=function(Ze){return this.addPage(),this.movePage(vn,Ze),this},Ie.movePage=function(Ze,kn){var Wn,Zn;if(Ze>kn){Wn=kr[Ze],Zn=Ur[Ze];for(var dr=Ze;dr>kn;dr--)kr[dr]=kr[dr-1],Ur[dr]=Ur[dr-1];kr[kn]=Wn,Ur[kn]=Zn,this.setPage(kn)}else if(Ze<kn){Wn=kr[Ze],Zn=Ur[Ze];for(var Rr=Ze;Rr<kn;Rr++)kr[Rr]=kr[Rr+1],Ur[Rr]=Ur[Rr+1];kr[kn]=Wn,Ur[kn]=Zn,this.setPage(kn)}return this},Ie.deletePage=function(){return ra.apply(this,arguments),this},Ie.__private__.text=Ie.text=function(Ze,kn,Wn,Zn,dr){var Rr,jr,ii,ze,gn,En,Fn,ur,yr,Br=(Zn=Zn||{}).scope||this;if(typeof Ze=="number"&&typeof kn=="number"&&(typeof Wn=="string"||Array.isArray(Wn))){var qi=Wn;Wn=kn,kn=Ze,Ze=qi}if(arguments[3]instanceof ci?(Ke("The transform parameter of text() with a Matrix value"),yr=dr):(ii=arguments[4],ze=arguments[5],_typeof(Fn=arguments[3])==="object"&&Fn!==null||(typeof ii=="string"&&(ze=ii,ii=null),typeof Fn=="string"&&(ze=Fn,Fn=null),typeof Fn=="number"&&(ii=Fn,Fn=null),Zn={flags:Fn,angle:ii,align:ze})),isNaN(kn)||isNaN(Wn)||Ze==null)throw new Error("Invalid arguments passed to jsPDF.text");if(Ze.length===0)return Br;var Xi="",Gi=!1,cs=typeof Zn.lineHeightFactor=="number"?Zn.lineHeightFactor:Jr,gs=Br.internal.scaleFactor;function Fo(Es){return Es=Es.split("	").join(Array(Zn.TabLen||9).join(" ")),ks(Es,Fn)}function mo(Es){for(var _s,zs=Es.concat(),Zs=[],Za=zs.length;Za--;)typeof(_s=zs.shift())=="string"?Zs.push(_s):Array.isArray(Es)&&(_s.length===1||_s[1]===void 0&&_s[2]===void 0)?Zs.push(_s[0]):Zs.push([_s[0],_s[1],_s[2]]);return Zs}function ja(Es,_s){var zs;if(typeof Es=="string")zs=_s(Es)[0];else if(Array.isArray(Es)){for(var Zs,Za,_u=Es.concat(),Yl=[],ju=_u.length;ju--;)typeof(Zs=_u.shift())=="string"?Yl.push(_s(Zs)[0]):Array.isArray(Zs)&&typeof Zs[0]=="string"&&(Za=_s(Zs[0],Zs[1],Zs[2]),Yl.push([Za[0],Za[1],Za[2]]));zs=Yl}return zs}var $a=!1,lu=!0;if(typeof Ze=="string")$a=!0;else if(Array.isArray(Ze)){var uu=Ze.concat();jr=[];for(var zl,Us=uu.length;Us--;)(typeof(zl=uu.shift())!="string"||Array.isArray(zl)&&typeof zl[0]!="string")&&(lu=!1);$a=lu}if($a===!1)throw new Error('Type of text must be string or Array. "'+Ze+'" is not recognized.');typeof Ze=="string"&&(Ze=Ze.match(/[\r?\n]/)?Ze.split(/\r\n|\r|\n/g):[Ze]);var cu=$r/Br.internal.scaleFactor,du=cu*(cs-1);switch(Zn.baseline){case"bottom":Wn-=du;break;case"top":Wn+=cu-du;break;case"hanging":Wn+=cu-2*du;break;case"middle":Wn+=cu/2-du}if((En=Zn.maxWidth||0)>0&&(typeof Ze=="string"?Ze=Br.splitTextToSize(Ze,En):Object.prototype.toString.call(Ze)==="[object Array]"&&(Ze=Ze.reduce(function(Es,_s){return Es.concat(Br.splitTextToSize(_s,En))},[]))),Rr={text:Ze,x:kn,y:Wn,options:Zn,mutex:{pdfEscape:ks,activeFontKey:oi,fonts:Di,activeFontSize:$r}},ni.publish("preProcessText",Rr),Ze=Rr.text,ii=(Zn=Rr.options).angle,!(yr instanceof ci)&&ii&&typeof ii=="number"){ii*=Math.PI/180,Zn.rotationDirection===0&&(ii=-ii),qe===Be.ADVANCED&&(ii=-ii);var hu=Math.cos(ii),fu=Math.sin(ii);yr=new ci(hu,fu,-fu,hu,0,0)}else ii&&ii instanceof ci&&(yr=ii);qe!==Be.ADVANCED||yr||(yr=Ps),(gn=Zn.charSpace||Da)!==void 0&&(Xi+=Qe(fn(gn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ur=Zn.horizontalScale)!==void 0&&(Xi+=Qe(100*ur)+` Tz
`),Zn.lang;var Vo=-1,ql=Zn.renderingMode!==void 0?Zn.renderingMode:Zn.stroke,ul=Br.internal.getCurrentPageInfo().pageContext;switch(ql){case 0:case!1:case"fill":Vo=0;break;case 1:case!0:case"stroke":Vo=1;break;case 2:case"fillThenStroke":Vo=2;break;case 3:case"invisible":Vo=3;break;case 4:case"fillAndAddForClipping":Vo=4;break;case 5:case"strokeAndAddPathForClipping":Vo=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Vo=6;break;case 7:case"addToPathForClipping":Vo=7}var ic=ul.usedRenderingMode!==void 0?ul.usedRenderingMode:-1;Vo!==-1?Xi+=Vo+` Tr
`:ic!==-1&&(Xi+=`0 Tr
`),Vo!==-1&&(ul.usedRenderingMode=Vo),ze=Zn.align||"left";var jo,pu=$r*cs,Fu=Br.internal.pageSize.getWidth(),mu=Di[oi];gn=Zn.charSpace||Da,En=Zn.maxWidth||0,Fn=Object.assign({autoencode:!0,noBOM:!0},Zn.flags);var Qa=[],Ol=function(Es){return Br.getStringUnitWidth(Es,{font:mu,charSpace:gn,fontSize:$r,doKerning:!1})*$r/gs};if(Object.prototype.toString.call(Ze)==="[object Array]"){var $o;jr=mo(Ze),ze!=="left"&&(jo=jr.map(Ol));var So,Ml=0;if(ze==="right"){kn-=jo[0],Ze=[],Us=jr.length;for(var cl=0;cl<Us;cl++)cl===0?(So=Pi(kn),$o=ji(Wn)):(So=fn(Ml-jo[cl]),$o=-pu),Ze.push([jr[cl],So,$o]),Ml=jo[cl]}else if(ze==="center"){kn-=jo[0]/2,Ze=[],Us=jr.length;for(var dl=0;dl<Us;dl++)dl===0?(So=Pi(kn),$o=ji(Wn)):(So=fn((Ml-jo[dl])/2),$o=-pu),Ze.push([jr[dl],So,$o]),Ml=jo[dl]}else if(ze==="left"){Ze=[],Us=jr.length;for(var gu=0;gu<Us;gu++)Ze.push(jr[gu])}else if(ze==="justify"&&mu.encoding==="Identity-H"){Ze=[],Us=jr.length,En=En!==0?En:Fu;for(var hl=0,as=0;as<Us;as++)if($o=as===0?ji(Wn):-pu,So=as===0?Pi(kn):hl,as<Us-1){var pl=fn((En-jo[as])/(jr[as].split(" ").length-1)),Po=jr[as].split(" ");Ze.push([Po[0]+" ",So,$o]),hl=0;for(var aa=1;aa<Po.length;aa++){var Gl=(Ol(Po[aa-1]+" "+Po[aa])-Ol(Po[aa]))*gs+pl;aa==Po.length-1?Ze.push([Po[aa],Gl,0]):Ze.push([Po[aa]+" ",Gl,0]),hl-=Gl}}else Ze.push([jr[as],So,$o]);Ze.push(["",hl,0])}else{if(ze!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(Ze=[],Us=jr.length,En=En!==0?En:Fu,as=0;as<Us;as++)$o=as===0?ji(Wn):-pu,So=as===0?Pi(kn):0,as<Us-1?Qa.push(Qe(fn((En-jo[as])/(jr[as].split(" ").length-1)))):Qa.push(0),Ze.push([jr[as],So,$o])}}var Vu=typeof Zn.R2L=="boolean"?Zn.R2L:li;Vu===!0&&(Ze=ja(Ze,function(Es,_s,zs){return[Es.split("").reverse().join(""),_s,zs]})),Rr={text:Ze,x:kn,y:Wn,options:Zn,mutex:{pdfEscape:ks,activeFontKey:oi,fonts:Di,activeFontSize:$r}},ni.publish("postProcessText",Rr),Ze=Rr.text,Gi=Rr.mutex.isHex||!1;var Wl=Di[oi].encoding;Wl!=="WinAnsiEncoding"&&Wl!=="StandardEncoding"||(Ze=ja(Ze,function(Es,_s,zs){return[Fo(Es),_s,zs]})),jr=mo(Ze),Ze=[];for(var Hl,Kl,la,ml=0,Ja=1,gl=Array.isArray(jr[0])?Ja:ml,_l="",Nl=function(Es,_s,zs){var Zs="";return zs instanceof ci?(zs=typeof Zn.angle=="number"?Vs(zs,new ci(1,0,0,1,Es,_s)):Vs(new ci(1,0,0,1,Es,_s),zs),qe===Be.ADVANCED&&(zs=Vs(new ci(1,0,0,-1,0,0),zs)),Zs=zs.join(" ")+` Tm
`):Zs=Qe(Es)+" "+Qe(_s)+` Td
`,Zs},go=0;go<jr.length;go++){switch(_l="",gl){case Ja:la=(Gi?"<":"(")+jr[go][0]+(Gi?">":")"),Hl=parseFloat(jr[go][1]),Kl=parseFloat(jr[go][2]);break;case ml:la=(Gi?"<":"(")+jr[go]+(Gi?">":")"),Hl=Pi(kn),Kl=ji(Wn)}Qa!==void 0&&Qa[go]!==void 0&&(_l=Qa[go]+` Tw
`),go===0?Ze.push(_l+Nl(Hl,Kl,yr)+la):gl===ml?Ze.push(_l+la):gl===Ja&&Ze.push(_l+Nl(Hl,Kl,yr)+la)}Ze=gl===ml?Ze.join(` Tj
T* `):Ze.join(` Tj
`),Ze+=` Tj
`;var Ko=`BT
/`;return Ko+=oi+" "+$r+` Tf
`,Ko+=Qe($r*cs)+` TL
`,Ko+=Ns+`
`,Ko+=Xi,Ko+=Ze,Yn(Ko+="ET"),Ae[oi]=!0,Br};var Lo=Ie.__private__.clip=Ie.clip=function(Ze){return Yn(Ze==="evenodd"?"W*":"W"),this};Ie.clipEvenOdd=function(){return Lo("evenodd")},Ie.__private__.discardPath=Ie.discardPath=function(){return Yn("n"),this};var Do=Ie.__private__.isValidStyle=function(Ze){var kn=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(Ze)!==-1&&(kn=!0),kn};Ie.__private__.setDefaultPathOperation=Ie.setDefaultPathOperation=function(Ze){return Do(Ze)&&(ke=Ze),this};var Ka=Ie.__private__.getStyle=Ie.getStyle=function(Ze){var kn=ke;switch(Ze){case"D":case"S":kn="S";break;case"F":kn="f";break;case"FD":case"DF":kn="B";break;case"f":case"f*":case"B":case"B*":kn=Ze}return kn},Ys=Ie.close=function(){return Yn("h"),this};Ie.stroke=function(){return Yn("S"),this},Ie.fill=function(Ze){return Na("f",Ze),this},Ie.fillEvenOdd=function(Ze){return Na("f*",Ze),this},Ie.fillStroke=function(Ze){return Na("B",Ze),this},Ie.fillStrokeEvenOdd=function(Ze){return Na("B*",Ze),this};var Na=function(Ze,kn){_typeof(kn)==="object"?Nn(kn,Ze):Yn(Ze)},La=function(Ze){Ze===null||qe===Be.ADVANCED&&Ze===void 0||(Ze=Ka(Ze),Yn(Ze))};function An(Ze,kn,Wn,Zn,dr){var Rr=new M(kn||this.boundingBox,Wn||this.xStep,Zn||this.yStep,this.gState,dr||this.matrix);Rr.stream=this.stream;var jr=Ze+"$$"+this.cloneIndex+++"$$";return Is(jr,Rr),Rr}var Nn=function(Ze,kn){var Wn=Bi[Ze.key],Zn=Ti[Wn];if(Zn instanceof B)Yn("q"),Yn(Gn(kn)),Zn.gState&&Ie.setGState(Zn.gState),Yn(Ze.matrix.toString()+" cm"),Yn("/"+Wn+" sh"),Yn("Q");else if(Zn instanceof M){var dr=new ci(1,0,0,-1,0,Ao());Ze.matrix&&(dr=dr.multiply(Ze.matrix||Ps),Wn=An.call(Zn,Ze.key,Ze.boundingBox,Ze.xStep,Ze.yStep,dr).id),Yn("q"),Yn("/Pattern cs"),Yn("/"+Wn+" scn"),Zn.gState&&Ie.setGState(Zn.gState),Yn(kn),Yn("Q")}},Gn=function(Ze){switch(Ze){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Qn=Ie.moveTo=function(Ze,kn){return Yn(Qe(fn(Ze))+" "+Qe(wn(kn))+" m"),this},hr=Ie.lineTo=function(Ze,kn){return Yn(Qe(fn(Ze))+" "+Qe(wn(kn))+" l"),this},vr=Ie.curveTo=function(Ze,kn,Wn,Zn,dr,Rr){return Yn([Qe(fn(Ze)),Qe(wn(kn)),Qe(fn(Wn)),Qe(wn(Zn)),Qe(fn(dr)),Qe(wn(Rr)),"c"].join(" ")),this};Ie.__private__.line=Ie.line=function(Ze,kn,Wn,Zn,dr){if(isNaN(Ze)||isNaN(kn)||isNaN(Wn)||isNaN(Zn)||!Do(dr))throw new Error("Invalid arguments passed to jsPDF.line");return qe===Be.COMPAT?this.lines([[Wn-Ze,Zn-kn]],Ze,kn,[1,1],dr||"S"):this.lines([[Wn-Ze,Zn-kn]],Ze,kn,[1,1]).stroke()},Ie.__private__.lines=Ie.lines=function(Ze,kn,Wn,Zn,dr,Rr){var jr,ii,ze,gn,En,Fn,ur,yr,Br,qi,Xi,Gi;if(typeof Ze=="number"&&(Gi=Wn,Wn=kn,kn=Ze,Ze=Gi),Zn=Zn||[1,1],Rr=Rr||!1,isNaN(kn)||isNaN(Wn)||!Array.isArray(Ze)||!Array.isArray(Zn)||!Do(dr)||typeof Rr!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Qn(kn,Wn),jr=Zn[0],ii=Zn[1],gn=Ze.length,qi=kn,Xi=Wn,ze=0;ze<gn;ze++)(En=Ze[ze]).length===2?(qi=En[0]*jr+qi,Xi=En[1]*ii+Xi,hr(qi,Xi)):(Fn=En[0]*jr+qi,ur=En[1]*ii+Xi,yr=En[2]*jr+qi,Br=En[3]*ii+Xi,qi=En[4]*jr+qi,Xi=En[5]*ii+Xi,vr(Fn,ur,yr,Br,qi,Xi));return Rr&&Ys(),La(dr),this},Ie.path=function(Ze){for(var kn=0;kn<Ze.length;kn++){var Wn=Ze[kn],Zn=Wn.c;switch(Wn.op){case"m":Qn(Zn[0],Zn[1]);break;case"l":hr(Zn[0],Zn[1]);break;case"c":vr.apply(this,Zn);break;case"h":Ys()}}return this},Ie.__private__.rect=Ie.rect=function(Ze,kn,Wn,Zn,dr){if(isNaN(Ze)||isNaN(kn)||isNaN(Wn)||isNaN(Zn)||!Do(dr))throw new Error("Invalid arguments passed to jsPDF.rect");return qe===Be.COMPAT&&(Zn=-Zn),Yn([Qe(fn(Ze)),Qe(wn(kn)),Qe(fn(Wn)),Qe(fn(Zn)),"re"].join(" ")),La(dr),this},Ie.__private__.triangle=Ie.triangle=function(Ze,kn,Wn,Zn,dr,Rr,jr){if(isNaN(Ze)||isNaN(kn)||isNaN(Wn)||isNaN(Zn)||isNaN(dr)||isNaN(Rr)||!Do(jr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Wn-Ze,Zn-kn],[dr-Wn,Rr-Zn],[Ze-dr,kn-Rr]],Ze,kn,[1,1],jr,!0),this},Ie.__private__.roundedRect=Ie.roundedRect=function(Ze,kn,Wn,Zn,dr,Rr,jr){if(isNaN(Ze)||isNaN(kn)||isNaN(Wn)||isNaN(Zn)||isNaN(dr)||isNaN(Rr)||!Do(jr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ii=4/3*(Math.SQRT2-1);return dr=Math.min(dr,.5*Wn),Rr=Math.min(Rr,.5*Zn),this.lines([[Wn-2*dr,0],[dr*ii,0,dr,Rr-Rr*ii,dr,Rr],[0,Zn-2*Rr],[0,Rr*ii,-dr*ii,Rr,-dr,Rr],[2*dr-Wn,0],[-dr*ii,0,-dr,-Rr*ii,-dr,-Rr],[0,2*Rr-Zn],[0,-Rr*ii,dr*ii,-Rr,dr,-Rr]],Ze+dr,kn,[1,1],jr,!0),this},Ie.__private__.ellipse=Ie.ellipse=function(Ze,kn,Wn,Zn,dr){if(isNaN(Ze)||isNaN(kn)||isNaN(Wn)||isNaN(Zn)||!Do(dr))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Rr=4/3*(Math.SQRT2-1)*Wn,jr=4/3*(Math.SQRT2-1)*Zn;return Qn(Ze+Wn,kn),vr(Ze+Wn,kn-jr,Ze+Rr,kn-Zn,Ze,kn-Zn),vr(Ze-Rr,kn-Zn,Ze-Wn,kn-jr,Ze-Wn,kn),vr(Ze-Wn,kn+jr,Ze-Rr,kn+Zn,Ze,kn+Zn),vr(Ze+Rr,kn+Zn,Ze+Wn,kn+jr,Ze+Wn,kn),La(dr),this},Ie.__private__.circle=Ie.circle=function(Ze,kn,Wn,Zn){if(isNaN(Ze)||isNaN(kn)||isNaN(Wn)||!Do(Zn))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(Ze,kn,Wn,Wn,Zn)},Ie.setFont=function(Ze,kn,Wn){return Wn&&(kn=Je(kn,Wn)),oi=Ho(Ze,kn,{disableWarning:!1}),this};var Yr=Ie.__private__.getFont=Ie.getFont=function(){return Di[Ho.apply(Ie,arguments)]};Ie.__private__.getFontList=Ie.getFontList=function(){var Ze,kn,Wn={};for(Ze in Ni)if(Ni.hasOwnProperty(Ze))for(kn in Wn[Ze]=[],Ni[Ze])Ni[Ze].hasOwnProperty(kn)&&Wn[Ze].push(kn);return Wn},Ie.addFont=function(Ze,kn,Wn,Zn,dr){var Rr=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Rr.indexOf(arguments[3])!==-1?dr=arguments[3]:arguments[3]&&Rr.indexOf(arguments[3])==-1&&(Wn=Je(Wn,Zn)),dr=dr||"Identity-H",ya.call(this,Ze,kn,Wn,dr)};var Jr,Vi=r.lineWidth||.200025,Mi=Ie.__private__.getLineWidth=Ie.getLineWidth=function(){return Vi},es=Ie.__private__.setLineWidth=Ie.setLineWidth=function(Ze){return Vi=Ze,Yn(Qe(fn(Ze))+" w"),this};Ie.__private__.setLineDash=E.API.setLineDash=E.API.setLineDashPattern=function(Ze,kn){if(Ze=Ze||[],kn=kn||0,isNaN(kn)||!Array.isArray(Ze))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return Ze=Ze.map(function(Wn){return Qe(fn(Wn))}).join(" "),kn=Qe(fn(kn)),Yn("["+Ze+"] "+kn+" d"),this};var Xs=Ie.__private__.getLineHeight=Ie.getLineHeight=function(){return $r*Jr};Ie.__private__.getLineHeight=Ie.getLineHeight=function(){return $r*Jr};var qs=Ie.__private__.setLineHeightFactor=Ie.setLineHeightFactor=function(Ze){return typeof(Ze=Ze||1.15)=="number"&&(Jr=Ze),this},Tr=Ie.__private__.getLineHeightFactor=Ie.getLineHeightFactor=function(){return Jr};qs(r.lineHeight);var Pi=Ie.__private__.getHorizontalCoordinate=function(Ze){return fn(Ze)},ji=Ie.__private__.getVerticalCoordinate=function(Ze){return qe===Be.ADVANCED?Ze:Ur[vn].mediaBox.topRightY-Ur[vn].mediaBox.bottomLeftY-fn(Ze)},po=Ie.__private__.getHorizontalCoordinateString=Ie.getHorizontalCoordinateString=function(Ze){return Qe(Pi(Ze))},Qs=Ie.__private__.getVerticalCoordinateString=Ie.getVerticalCoordinateString=function(Ze){return Qe(ji(Ze))},Js=r.strokeColor||"0 G";Ie.__private__.getStrokeColor=Ie.getDrawColor=function(){return Vn(Js)},Ie.__private__.setStrokeColor=Ie.setDrawColor=function(Ze,kn,Wn,Zn){return Js=Kn({ch1:Ze,ch2:kn,ch3:Wn,ch4:Zn,pdfColorType:"draw",precision:2}),Yn(Js),this};var ll=r.fillColor||"0 g";Ie.__private__.getFillColor=Ie.getFillColor=function(){return Vn(ll)},Ie.__private__.setFillColor=Ie.setFillColor=function(Ze,kn,Wn,Zn){return ll=Kn({ch1:Ze,ch2:kn,ch3:Wn,ch4:Zn,pdfColorType:"fill",precision:2}),Yn(ll),this};var Ns=r.textColor||"0 g",sa=Ie.__private__.getTextColor=Ie.getTextColor=function(){return Vn(Ns)};Ie.__private__.setTextColor=Ie.setTextColor=function(Ze,kn,Wn,Zn){return Ns=Kn({ch1:Ze,ch2:kn,ch3:Wn,ch4:Zn,pdfColorType:"text",precision:3}),this};var Da=r.charSpace,wa=Ie.__private__.getCharSpace=Ie.getCharSpace=function(){return parseFloat(Da||0)};Ie.__private__.setCharSpace=Ie.setCharSpace=function(Ze){if(isNaN(Ze))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Da=Ze,this};var Ul=0;Ie.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},Ie.__private__.setLineCap=Ie.setLineCap=function(Ze){var kn=Ie.CapJoinStyles[Ze];if(kn===void 0)throw new Error("Line cap style of '"+Ze+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ul=kn,Yn(kn+" J"),this};var Ya=0;Ie.__private__.setLineJoin=Ie.setLineJoin=function(Ze){var kn=Ie.CapJoinStyles[Ze];if(kn===void 0)throw new Error("Line join style of '"+Ze+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ya=kn,Yn(kn+" j"),this},Ie.__private__.setLineMiterLimit=Ie.__private__.setMiterLimit=Ie.setLineMiterLimit=Ie.setMiterLimit=function(Ze){if(Ze=Ze||0,isNaN(Ze))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Yn(Qe(fn(Ze))+" M"),this},Ie.GState=j,Ie.setGState=function(Ze){(Ze=typeof Ze=="string"?Qi[vs[Ze]]:Ta(null,Ze)).equals(Ss)||(Yn("/"+Ze.id+" gs"),Ss=Ze)};var Ta=function(Ze,kn){if(!Ze||!vs[Ze]){var Wn=!1;for(var Zn in Qi)if(Qi.hasOwnProperty(Zn)&&Qi[Zn].equals(kn)){Wn=!0;break}if(Wn)kn=Qi[Zn];else{var dr="GS"+(Object.keys(Qi).length+1).toString(10);Qi[dr]=kn,kn.id=dr}return Ze&&(vs[Ze]=kn.id),ni.publish("addGState",kn),kn}};Ie.addGState=function(Ze,kn){return Ta(Ze,kn),this},Ie.saveGraphicsState=function(){return Yn("q"),As.push({key:oi,size:$r,color:Ns}),this},Ie.restoreGraphicsState=function(){Yn("Q");var Ze=As.pop();return oi=Ze.key,$r=Ze.size,Ns=Ze.color,Ss=null,this},Ie.setCurrentTransformationMatrix=function(Ze){return Yn(Ze.toString()+" cm"),this},Ie.comment=function(Ze){return Yn("#"+Ze),this};var oa=function(Ze,kn){var Wn=Ze||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Wn},set:function(Rr){isNaN(Rr)||(Wn=parseFloat(Rr))}});var Zn=kn||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Zn},set:function(Rr){isNaN(Rr)||(Zn=parseFloat(Rr))}});var dr="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return dr},set:function(Rr){dr=Rr.toString()}}),this},Fa=function(Ze,kn,Wn,Zn){oa.call(this,Ze,kn),this.type="rect";var dr=Wn||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return dr},set:function(jr){isNaN(jr)||(dr=parseFloat(jr))}});var Rr=Zn||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Rr},set:function(jr){isNaN(jr)||(Rr=parseFloat(jr))}}),this},Xa=function(){this.page=di,this.currentPage=vn,this.pages=kr.slice(0),this.pagesContext=Ur.slice(0),this.x=Ci,this.y=xi,this.matrix=fi,this.width=Ea(vn),this.height=Ao(vn),this.outputDestination=Lr,this.id="",this.objectNumber=-1};Xa.prototype.restore=function(){di=this.page,vn=this.currentPage,Ur=this.pagesContext,kr=this.pages,Ci=this.x,xi=this.y,fi=this.matrix,kl(vn,this.width),Cl(vn,this.height),Lr=this.outputDestination};var Rl=function(Ze,kn,Wn,Zn,dr){Hs.push(new Xa),di=vn=0,kr=[],Ci=Ze,xi=kn,fi=dr,Ks([Wn,Zn])},au=function(Ze){if(Os[Ze])Hs.pop().restore();else{var kn=new Xa,Wn="Xo"+(Object.keys(ps).length+1).toString(10);kn.id=Wn,Os[Ze]=Wn,ps[Wn]=kn,ni.publish("addFormObject",kn),Hs.pop().restore()}};for(var Va in Ie.beginFormObject=function(Ze,kn,Wn,Zn,dr){return Rl(Ze,kn,Wn,Zn,dr),this},Ie.endFormObject=function(Ze){return au(Ze),this},Ie.doFormObject=function(Ze,kn){var Wn=ps[Os[Ze]];return Yn("q"),Yn(kn.toString()+" cm"),Yn("/"+Wn.id+" Do"),Yn("Q"),this},Ie.getFormObject=function(Ze){var kn=ps[Os[Ze]];return{x:kn.x,y:kn.y,width:kn.width,height:kn.height,matrix:kn.matrix}},Ie.save=function(Ze,kn){return Ze=Ze||"generated.pdf",(kn=kn||{}).returnPromise=kn.returnPromise||!1,kn.returnPromise===!1?(l(ia(Si()),Ze),typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),this):new Promise(function(Wn,Zn){try{var dr=l(ia(Si()),Ze);typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),Wn(dr)}catch(Rr){Zn(Rr.message)}})},E.API)E.API.hasOwnProperty(Va)&&(Va==="events"&&E.API.events.length?function(Ze,kn){var Wn,Zn,dr;for(dr=kn.length-1;dr!==-1;dr--)Wn=kn[dr][0],Zn=kn[dr][1],Ze.subscribe.apply(Ze,[Wn].concat(typeof Zn=="function"?[Zn]:Zn))}(ni,E.API.events):Ie[Va]=E.API[Va]);var Ea=Ie.getPageWidth=function(Ze){return(Ur[Ze=Ze||vn].mediaBox.topRightX-Ur[Ze].mediaBox.bottomLeftX)/Wr},kl=Ie.setPageWidth=function(Ze,kn){Ur[Ze].mediaBox.topRightX=kn*Wr+Ur[Ze].mediaBox.bottomLeftX},Ao=Ie.getPageHeight=function(Ze){return(Ur[Ze=Ze||vn].mediaBox.topRightY-Ur[Ze].mediaBox.bottomLeftY)/Wr},Cl=Ie.setPageHeight=function(Ze,kn){Ur[Ze].mediaBox.topRightY=kn*Wr+Ur[Ze].mediaBox.bottomLeftY};return Ie.internal={pdfEscape:ks,getStyle:Ka,getFont:Yr,getFontSize:Fr,getCharSpace:wa,getTextColor:sa,getLineHeight:Xs,getLineHeightFactor:Tr,getLineWidth:Mi,write:gi,getHorizontalCoordinate:Pi,getVerticalCoordinate:ji,getCoordinateString:po,getVerticalCoordinateString:Qs,collections:{},newObject:ss,newAdditionalObject:vo,newObjectDeferred:os,newObjectDeferredBegin:ms,getFilters:er,putStream:lr,events:ni,scaleFactor:Wr,pageSize:{getWidth:function(){return Ea(vn)},setWidth:function(Ze){kl(vn,Ze)},getHeight:function(){return Ao(vn)},setHeight:function(Ze){Cl(vn,Ze)}},encryptionOptions:Ce,encryption:Ji,getEncryptor:xo,output:No,getNumberOfPages:ns,pages:kr,out:Yn,f2:pn,f3:un,getPageInfo:ho,getPageInfoByObjId:Ei,getCurrentPageInfo:fo,getPDFVersion:Fe,Point:oa,Rectangle:Fa,Matrix:ci,hasHotfix:Eo},Object.defineProperty(Ie.internal.pageSize,"width",{get:function(){return Ea(vn)},set:function(Ze){kl(vn,Ze)},enumerable:!0,configurable:!0}),Object.defineProperty(Ie.internal.pageSize,"height",{get:function(){return Ao(vn)},set:function(Ze){Cl(vn,Ze)},enumerable:!0,configurable:!0}),ba.call(Ie,Dr),oi="F1",na(Te,t),ni.publish("initialized"),Ie}I.prototype.lsbFirstWord=function(r){return String.fromCharCode(r>>0&255,r>>8&255,r>>16&255,r>>24&255)},I.prototype.toHexString=function(r){return r.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},I.prototype.hexToBytes=function(r){for(var e=[],t=0;t<r.length;t+=2)e.push(String.fromCharCode(parseInt(r.substr(t,2),16)));return e.join("")},I.prototype.processOwnerPassword=function(r,e){return P(x(e).substr(0,5),r)},I.prototype.encryptor=function(r,e){var t=x(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&e,e>>8&255)).substr(0,10);return function(_e){return P(t,_e)}},j.prototype.equals=function(r){var e,t="id,objectNumber,equals";if(!r||_typeof(r)!==_typeof(this))return!1;var _e=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!r.hasOwnProperty(e)||this[e]!==r[e])return!1;_e++}for(e in r)r.hasOwnProperty(e)&&t.indexOf(e)<0&&_e--;return _e===0},E.API={events:[]},E.version="3.0.1";var q=E.API,D=1,R=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},T=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},U=function(r){return r.toFixed(2)},z=function(r){return r.toFixed(5)};q.__acroform__={};var H=function(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r},W=function(r){return r*D},V=function(r){var e=new ut,t=At.internal.getHeight(r)||0,_e=At.internal.getWidth(r)||0;return e.BBox=[0,0,Number(U(_e)),Number(U(t))],e},G=q.__acroform__.setBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|=1<<e},Y=q.__acroform__.clearBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&=~(1<<e)},J=q.__acroform__.getBit=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(r&1<<e)==0?0:1},X=q.__acroform__.getBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return J(r,e-1)},K=q.__acroform__.setBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return G(r,e-1)},Z=q.__acroform__.clearBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Y(r,e-1)},$=q.__acroform__.calculateCoordinates=function(r,e){var t=e.internal.getHorizontalCoordinate,_e=e.internal.getVerticalCoordinate,Te=r[0],Ee=r[1],xe=r[2],Pe=r[3],Re={};return Re.lowerLeft_X=t(Te)||0,Re.lowerLeft_Y=_e(Ee+Pe)||0,Re.upperRight_X=t(Te+xe)||0,Re.upperRight_Y=_e(Ee)||0,[Number(U(Re.lowerLeft_X)),Number(U(Re.lowerLeft_Y)),Number(U(Re.upperRight_X)),Number(U(Re.upperRight_Y))]},Q=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var e=[],t=r._V||r.DV,_e=tt(r,t),Te=r.scope.internal.getFont(r.fontName,r.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(r.scope.__private__.encodeColorString(r.color)),e.push("/"+Te+" "+U(_e.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(_e.text),e.push("ET"),e.push("Q"),e.push("EMC");var Ee=V(r);return Ee.scope=r.scope,Ee.stream=e.join(`
`),Ee}},tt=function(r,e){var t=r.fontSize===0?r.maxFontSize:r.fontSize,_e={text:"",fontSize:""},Te=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");Te=r.multiline?Te.map(function(un){return un.split(`
`)}):Te.map(function(un){return[un]});var Ee=t,xe=At.internal.getHeight(r)||0;xe=xe<0?-xe:xe;var Pe=At.internal.getWidth(r)||0;Pe=Pe<0?-Pe:Pe;var Re=function(un,fn,mn){if(un+1<Te.length){var wn=fn+" "+Te[un+1][0];return et(wn,r,mn).width<=Pe-4}return!1};Ee++;e:for(;Ee>0;){e="",Ee--;var ke,Ce,Se=et("3",r,Ee).height,Ae=r.multiline?xe-Ee:(xe-Se)/2,Ie=Ae+=2,Me=0,Fe=0,Ve=0;if(Ee<=0){e=`(...) Tj
`,e+="% Width of Text: "+et(e,r,Ee=12).width+", FieldWidth:"+Pe+`
`;break}for(var je="",Be=0,qe=0;qe<Te.length;qe++)if(Te.hasOwnProperty(qe)){var He=!1;if(Te[qe].length!==1&&Ve!==Te[qe].length-1){if((Se+2)*(Be+2)+2>xe)continue e;je+=Te[qe][Ve],He=!0,Fe=qe,qe--}else{je=(je+=Te[qe][Ve]+" ").substr(je.length-1)==" "?je.substr(0,je.length-1):je;var Xe=parseInt(qe),Je=Re(Xe,je,Ee),Qe=qe>=Te.length-1;if(Je&&!Qe){je+=" ",Ve=0;continue}if(Je||Qe){if(Qe)Fe=Xe;else if(r.multiline&&(Se+2)*(Be+2)+2>xe)continue e}else{if(!r.multiline||(Se+2)*(Be+2)+2>xe)continue e;Fe=Xe}}for(var Ke="",Ye=Me;Ye<=Fe;Ye++){var pn=Te[Ye];if(r.multiline){if(Ye===Fe){Ke+=pn[Ve]+" ",Ve=(Ve+1)%pn.length;continue}if(Ye===Me){Ke+=pn[pn.length-1]+" ";continue}}Ke+=pn[0]+" "}switch(Ke=Ke.substr(Ke.length-1)==" "?Ke.substr(0,Ke.length-1):Ke,Ce=et(Ke,r,Ee).width,r.textAlign){case"right":ke=Pe-Ce-2;break;case"center":ke=(Pe-Ce)/2;break;case"left":default:ke=2}e+=U(ke)+" "+U(Ie)+` Td
`,e+="("+R(Ke)+`) Tj
`,e+=-U(ke)+` 0 Td
`,Ie=-(Ee+2),Ce=0,Me=He?Fe:Fe+1,Be++,je=""}break}return _e.text=e,_e.fontSize=Ee,_e},et=function(r,e,t){var _e=e.scope.internal.getFont(e.fontName,e.fontStyle),Te=e.scope.getStringUnitWidth(r,{font:_e,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:_e,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:Te}},rt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},nt=function(r,e){var t={type:"reference",object:r};e.internal.getPageInfo(r.page).pageContext.annotations.find(function(_e){return _e.type===t.type&&_e.object===t.object})===void 0&&e.internal.getPageInfo(r.page).pageContext.annotations.push(t)},it=function(r,e){for(var t in r)if(r.hasOwnProperty(t)){var _e=t,Te=r[t];e.internal.newObjectDeferredBegin(Te.objId,!0),_typeof(Te)==="object"&&typeof Te.putStream=="function"&&Te.putStream(),delete r[_e]}},at=function(r,e){if(e.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(lt.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(rt)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");D=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new ht,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var _e=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var Te in _e)if(_e.hasOwnProperty(Te)){var Ee=_e[Te];Ee.objId=void 0,Ee.hasAnnotation&&nt(Ee,t)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(t){(function(_e,Te){var Ee=!_e;for(var xe in _e||(Te.internal.newObjectDeferredBegin(Te.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),Te.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),_e=_e||Te.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(_e.hasOwnProperty(xe)){var Pe=_e[xe],Re=[],ke=Pe.Rect;if(Pe.Rect&&(Pe.Rect=$(Pe.Rect,Te)),Te.internal.newObjectDeferredBegin(Pe.objId,!0),Pe.DA=At.createDefaultAppearanceStream(Pe),_typeof(Pe)==="object"&&typeof Pe.getKeyValueListForStream=="function"&&(Re=Pe.getKeyValueListForStream()),Pe.Rect=ke,Pe.hasAppearanceStream&&!Pe.appearanceStreamContent){var Ce=Q(Pe);Re.push({key:"AP",value:"<</N "+Ce+">>"}),Te.internal.acroformPlugin.xForms.push(Ce)}if(Pe.appearanceStreamContent){var Se="";for(var Ae in Pe.appearanceStreamContent)if(Pe.appearanceStreamContent.hasOwnProperty(Ae)){var Ie=Pe.appearanceStreamContent[Ae];if(Se+="/"+Ae+" ",Se+="<<",Object.keys(Ie).length>=1||Array.isArray(Ie)){for(var xe in Ie)if(Ie.hasOwnProperty(xe)){var Me=Ie[xe];typeof Me=="function"&&(Me=Me.call(Te,Pe)),Se+="/"+xe+" "+Me+" ",Te.internal.acroformPlugin.xForms.indexOf(Me)>=0||Te.internal.acroformPlugin.xForms.push(Me)}}else typeof(Me=Ie)=="function"&&(Me=Me.call(Te,Pe)),Se+="/"+xe+" "+Me,Te.internal.acroformPlugin.xForms.indexOf(Me)>=0||Te.internal.acroformPlugin.xForms.push(Me);Se+=">>"}Re.push({key:"AP",value:`<<
`+Se+">>"})}Te.internal.putStream({additionalKeyValues:Re,objectId:Pe.objId}),Te.internal.out("endobj")}Ee&&it(Te.internal.acroformPlugin.xForms,Te)})(t,r)}),r.internal.acroformPlugin.isInitialized=!0}},ot=q.__acroform__.arrayToPdfArray=function(r,e,t){var _e=function(xe){return xe};if(Array.isArray(r)){for(var Te="[",Ee=0;Ee<r.length;Ee++)switch(Ee!==0&&(Te+=" "),_typeof(r[Ee])){case"boolean":case"number":case"object":Te+=r[Ee].toString();break;case"string":r[Ee].substr(0,1)!=="/"?(e!==void 0&&t&&(_e=t.internal.getEncryptor(e)),Te+="("+R(_e(r[Ee].toString()))+")"):Te+=r[Ee].toString()}return Te+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},st=function(r,e,t){var _e=function(Te){return Te};return e!==void 0&&t&&(_e=t.internal.getEncryptor(e)),(r=r||"").toString(),r="("+R(_e(r))+")"},ct=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ct.prototype.toString=function(){return this.objId+" 0 R"},ct.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},ct.prototype.getKeyValueListForStream=function(){var r=[],e=Object.getOwnPropertyNames(this).filter(function(Ee){return Ee!="content"&&Ee!="appearanceStreamContent"&&Ee!="scope"&&Ee!="objId"&&Ee.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var _e=e[t],Te=this[_e];Te&&(Array.isArray(Te)?r.push({key:_e,value:ot(Te,this.objId,this.scope)}):Te instanceof ct?(Te.scope=this.scope,r.push({key:_e,value:Te.objId+" 0 R"})):typeof Te!="function"&&r.push({key:_e,value:Te}))}return r};var ut=function(){ct.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){r=t.trim()},get:function(){return r||null}})};H(ut,ct);var ht=function(){ct.call(this);var r,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var t=function(_e){return _e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+R(t(r))+")"}},set:function(t){r=t}})};H(ht,ct);var lt=function r(){ct.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(je){if(isNaN(je))throw new Error('Invalid value "'+je+'" for attribute F supplied.');e=je}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!X(e,3)},set:function(je){je?this.F=K(e,3):this.F=Z(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(je){if(isNaN(je))throw new Error('Invalid value "'+je+'" for attribute Ff supplied.');t=je}});var _e=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(_e.length!==0)return _e},set:function(je){_e=je!==void 0?je:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!_e||isNaN(_e[0])?0:_e[0]},set:function(je){_e[0]=je}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!_e||isNaN(_e[1])?0:_e[1]},set:function(je){_e[1]=je}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!_e||isNaN(_e[2])?0:_e[2]},set:function(je){_e[2]=je}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!_e||isNaN(_e[3])?0:_e[3]},set:function(je){_e[3]=je}});var Te="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return Te},set:function(je){switch(je){case"/Btn":case"/Tx":case"/Ch":case"/Sig":Te=je;break;default:throw new Error('Invalid value "'+je+'" for attribute FT supplied.')}}});var Ee=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!Ee||Ee.length<1){if(this instanceof yt)return;Ee="FieldObject"+r.FieldNum++}var je=function(Be){return Be};return this.scope&&(je=this.scope.internal.getEncryptor(this.objId)),"("+R(je(Ee))+")"},set:function(je){Ee=je.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return Ee},set:function(je){Ee=je}});var xe="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return xe},set:function(je){xe=je}});var Pe="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return Pe},set:function(je){Pe=je}});var Re=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return Re},set:function(je){Re=je}});var ke=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return ke===void 0?50/D:ke},set:function(je){ke=je}});var Ce="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return Ce},set:function(je){Ce=je}});var Se="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!Se||this instanceof yt||this instanceof Nt))return st(Se,this.objId,this.scope)},set:function(je){je=je.toString(),Se=je}});var Ae=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(Ae)return this instanceof mt?Ae:st(Ae,this.objId,this.scope)},set:function(je){je=je.toString(),Ae=this instanceof mt?je:je.substr(0,1)==="("?T(je.substr(1,je.length-2)):T(je)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(Ae.substr(1,Ae.length-1)):Ae},set:function(je){je=je.toString(),Ae=this instanceof mt?"/"+je:je}});var Ie=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(Ie)return Ie},set:function(je){this.V=je}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(Ie)return this instanceof mt?Ie:st(Ie,this.objId,this.scope)},set:function(je){je=je.toString(),Ie=this instanceof mt?je:je.substr(0,1)==="("?T(je.substr(1,je.length-2)):T(je)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(Ie.substr(1,Ie.length-1)):Ie},set:function(je){je=je.toString(),Ie=this instanceof mt?"/"+je:je}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var Me,Fe=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return Fe},set:function(je){je=!!je,Fe=je}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(Me)return Me},set:function(je){Me=je}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,1)},set:function(je){je?this.Ff=K(this.Ff,1):this.Ff=Z(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,2)},set:function(je){je?this.Ff=K(this.Ff,2):this.Ff=Z(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,3)},set:function(je){je?this.Ff=K(this.Ff,3):this.Ff=Z(this.Ff,3)}});var Ve=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(Ve!==null)return Ve},set:function(je){if([0,1,2].indexOf(je)===-1)throw new Error('Invalid value "'+je+'" for attribute Q supplied.');Ve=je}}),Object.defineProperty(this,"textAlign",{get:function(){var je;switch(Ve){case 0:default:je="left";break;case 1:je="center";break;case 2:je="right"}return je},configurable:!0,enumerable:!0,set:function(je){switch(je){case"right":case 2:Ve=2;break;case"center":case 1:Ve=1;break;case"left":case 0:default:Ve=0}}})};H(lt,ct);var ft=function(){lt.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){r=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ot(e,this.objId,this.scope)},set:function(t){var _e,Te;Te=[],typeof(_e=t)=="string"&&(Te=function(Ee,xe,Pe){Pe||(Pe=1);for(var Re,ke=[];Re=xe.exec(Ee);)ke.push(Re[Pe]);return ke}(_e,/\((.*?)\)/g)),e=Te}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,_e){for(_e=_e||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),_e!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,18)},set:function(t){t?this.Ff=K(this.Ff,18):this.Ff=Z(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=K(this.Ff,19):this.Ff=Z(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,20)},set:function(t){t?(this.Ff=K(this.Ff,20),e.sort()):this.Ff=Z(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,22)},set:function(t){t?this.Ff=K(this.Ff,22):this.Ff=Z(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,23)},set:function(t){t?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,27)},set:function(t){t?this.Ff=K(this.Ff,27):this.Ff=Z(this.Ff,27)}}),this.hasAppearanceStream=!1};H(ft,lt);var dt=function(){ft.call(this),this.fontName="helvetica",this.combo=!1};H(dt,ft);var pt=function(){dt.call(this),this.combo=!0};H(pt,dt);var gt=function(){pt.call(this),this.edit=!0};H(gt,pt);var mt=function(){lt.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,15)},set:function(t){t?this.Ff=K(this.Ff,15):this.Ff=Z(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,16)},set:function(t){t?this.Ff=K(this.Ff,16):this.Ff=Z(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,17)},set:function(t){t?this.Ff=K(this.Ff,17):this.Ff=Z(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,26)},set:function(t){t?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var r,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(Ee){return Ee};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var _e,Te=[];for(_e in Te.push("<<"),e)Te.push("/"+_e+" ("+R(t(e[_e]))+")");return Te.push(">>"),Te.join(`
`)}},set:function(t){_typeof(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}})};H(mt,lt);var vt=function(){mt.call(this),this.pushButton=!0};H(vt,mt);var bt=function(){mt.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e!==void 0?e:[]}})};H(bt,mt);var yt=function(){var r,e;lt.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(Te){r=Te}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(Te){e=Te}});var t,_e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var Te=function(Pe){return Pe};this.scope&&(Te=this.scope.internal.getEncryptor(this.objId));var Ee,xe=[];for(Ee in xe.push("<<"),_e)xe.push("/"+Ee+" ("+R(Te(_e[Ee]))+")");return xe.push(">>"),xe.join(`
`)},set:function(Te){_typeof(Te)==="object"&&(_e=Te)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return _e.CA||""},set:function(Te){typeof Te=="string"&&(_e.CA=Te)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(Te){t=Te}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(Te){t="/"+Te}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=At.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};H(yt,lt),bt.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=r.createAppearanceStream(t.optionName),t.caption=r.getCA()}},bt.prototype.createOption=function(r){var e=new yt;return e.Parent=this,e.optionName=r,this.Kids.push(e),xt.call(this.scope,e),e};var wt=function(){mt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=At.CheckBox.createAppearanceStream()};H(wt,mt);var Nt=function(){lt.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,13)},set:function(e){e?this.Ff=K(this.Ff,13):this.Ff=Z(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,21)},set:function(e){e?this.Ff=K(this.Ff,21):this.Ff=Z(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,23)},set:function(e){e?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,24)},set:function(e){e?this.Ff=K(this.Ff,24):this.Ff=Z(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,25)},set:function(e){e?this.Ff=K(this.Ff,25):this.Ff=Z(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,26)},set:function(e){e?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Number.isInteger(e)&&(r=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};H(Nt,lt);var Lt=function(){Nt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,14)},set:function(r){r?this.Ff=K(this.Ff,14):this.Ff=Z(this.Ff,14)}}),this.password=!0};H(Lt,Nt);var At={CheckBox:{createAppearanceStream:function(){return{N:{On:At.CheckBox.YesNormal},D:{On:At.CheckBox.YesPushDown,Off:At.CheckBox.OffPushDown}}},YesPushDown:function(r){var e=V(r);e.scope=r.scope;var t=[],_e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,Te=r.scope.__private__.encodeColorString(r.color),Ee=tt(r,r.caption);return t.push("0.749023 g"),t.push("0 0 "+U(At.internal.getWidth(r))+" "+U(At.internal.getHeight(r))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+_e+" "+U(Ee.fontSize)+" Tf "+Te),t.push("BT"),t.push(Ee.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(r){var e=V(r);e.scope=r.scope;var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,_e=r.scope.__private__.encodeColorString(r.color),Te=[],Ee=At.internal.getHeight(r),xe=At.internal.getWidth(r),Pe=tt(r,r.caption);return Te.push("1 g"),Te.push("0 0 "+U(xe)+" "+U(Ee)+" re"),Te.push("f"),Te.push("q"),Te.push("0 0 1 rg"),Te.push("0 0 "+U(xe-1)+" "+U(Ee-1)+" re"),Te.push("W"),Te.push("n"),Te.push("0 g"),Te.push("BT"),Te.push("/"+t+" "+U(Pe.fontSize)+" Tf "+_e),Te.push(Pe.text),Te.push("ET"),Te.push("Q"),e.stream=Te.join(`
`),e},OffPushDown:function(r){var e=V(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+U(At.internal.getWidth(r))+" "+U(At.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(r){var e={D:{Off:At.RadioButton.Circle.OffPushDown},N:{}};return e.N[r]=At.RadioButton.Circle.YesNormal,e.D[r]=At.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(r){var e=V(r);e.scope=r.scope;var t=[],_e=At.internal.getWidth(r)<=At.internal.getHeight(r)?At.internal.getWidth(r)/4:At.internal.getHeight(r)/4;_e=Number((.9*_e).toFixed(5));var Te=At.internal.Bezier_C,Ee=Number((_e*Te).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+z(At.internal.getWidth(r)/2)+" "+z(At.internal.getHeight(r)/2)+" cm"),t.push(_e+" 0 m"),t.push(_e+" "+Ee+" "+Ee+" "+_e+" 0 "+_e+" c"),t.push("-"+Ee+" "+_e+" -"+_e+" "+Ee+" -"+_e+" 0 c"),t.push("-"+_e+" -"+Ee+" -"+Ee+" -"+_e+" 0 -"+_e+" c"),t.push(Ee+" -"+_e+" "+_e+" -"+Ee+" "+_e+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=V(r);e.scope=r.scope;var t=[],_e=At.internal.getWidth(r)<=At.internal.getHeight(r)?At.internal.getWidth(r)/4:At.internal.getHeight(r)/4;_e=Number((.9*_e).toFixed(5));var Te=Number((2*_e).toFixed(5)),Ee=Number((Te*At.internal.Bezier_C).toFixed(5)),xe=Number((_e*At.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+z(At.internal.getWidth(r)/2)+" "+z(At.internal.getHeight(r)/2)+" cm"),t.push(Te+" 0 m"),t.push(Te+" "+Ee+" "+Ee+" "+Te+" 0 "+Te+" c"),t.push("-"+Ee+" "+Te+" -"+Te+" "+Ee+" -"+Te+" 0 c"),t.push("-"+Te+" -"+Ee+" -"+Ee+" -"+Te+" 0 -"+Te+" c"),t.push(Ee+" -"+Te+" "+Te+" -"+Ee+" "+Te+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+z(At.internal.getWidth(r)/2)+" "+z(At.internal.getHeight(r)/2)+" cm"),t.push(_e+" 0 m"),t.push(_e+" "+xe+" "+xe+" "+_e+" 0 "+_e+" c"),t.push("-"+xe+" "+_e+" -"+_e+" "+xe+" -"+_e+" 0 c"),t.push("-"+_e+" -"+xe+" -"+xe+" -"+_e+" 0 -"+_e+" c"),t.push(xe+" -"+_e+" "+_e+" -"+xe+" "+_e+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(r){var e=V(r);e.scope=r.scope;var t=[],_e=At.internal.getWidth(r)<=At.internal.getHeight(r)?At.internal.getWidth(r)/4:At.internal.getHeight(r)/4;_e=Number((.9*_e).toFixed(5));var Te=Number((2*_e).toFixed(5)),Ee=Number((Te*At.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+z(At.internal.getWidth(r)/2)+" "+z(At.internal.getHeight(r)/2)+" cm"),t.push(Te+" 0 m"),t.push(Te+" "+Ee+" "+Ee+" "+Te+" 0 "+Te+" c"),t.push("-"+Ee+" "+Te+" -"+Te+" "+Ee+" -"+Te+" 0 c"),t.push("-"+Te+" -"+Ee+" -"+Ee+" -"+Te+" 0 -"+Te+" c"),t.push(Ee+" -"+Te+" "+Te+" -"+Ee+" "+Te+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(r){var e={D:{Off:At.RadioButton.Cross.OffPushDown},N:{}};return e.N[r]=At.RadioButton.Cross.YesNormal,e.D[r]=At.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(r){var e=V(r);e.scope=r.scope;var t=[],_e=At.internal.calculateCross(r);return t.push("q"),t.push("1 1 "+U(At.internal.getWidth(r)-2)+" "+U(At.internal.getHeight(r)-2)+" re"),t.push("W"),t.push("n"),t.push(U(_e.x1.x)+" "+U(_e.x1.y)+" m"),t.push(U(_e.x2.x)+" "+U(_e.x2.y)+" l"),t.push(U(_e.x4.x)+" "+U(_e.x4.y)+" m"),t.push(U(_e.x3.x)+" "+U(_e.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=V(r);e.scope=r.scope;var t=At.internal.calculateCross(r),_e=[];return _e.push("0.749023 g"),_e.push("0 0 "+U(At.internal.getWidth(r))+" "+U(At.internal.getHeight(r))+" re"),_e.push("f"),_e.push("q"),_e.push("1 1 "+U(At.internal.getWidth(r)-2)+" "+U(At.internal.getHeight(r)-2)+" re"),_e.push("W"),_e.push("n"),_e.push(U(t.x1.x)+" "+U(t.x1.y)+" m"),_e.push(U(t.x2.x)+" "+U(t.x2.y)+" l"),_e.push(U(t.x4.x)+" "+U(t.x4.y)+" m"),_e.push(U(t.x3.x)+" "+U(t.x3.y)+" l"),_e.push("s"),_e.push("Q"),e.stream=_e.join(`
`),e},OffPushDown:function(r){var e=V(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+U(At.internal.getWidth(r))+" "+U(At.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(r){var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,t=r.scope.__private__.encodeColorString(r.color);return"/"+e+" "+r.fontSize+" Tf "+t}};At.internal={Bezier_C:.551915024494,calculateCross:function(r){var e=At.internal.getWidth(r),t=At.internal.getHeight(r),_e=Math.min(e,t);return{x1:{x:(e-_e)/2,y:(t-_e)/2+_e},x2:{x:(e-_e)/2+_e,y:(t-_e)/2},x3:{x:(e-_e)/2,y:(t-_e)/2},x4:{x:(e-_e)/2+_e,y:(t-_e)/2+_e}}}},At.internal.getWidth=function(r){var e=0;return _typeof(r)==="object"&&(e=W(r.Rect[2])),e},At.internal.getHeight=function(r){var e=0;return _typeof(r)==="object"&&(e=W(r.Rect[3])),e};var xt=q.addField=function(r){if(at(this,r),!(r instanceof lt))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=r).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};q.AcroFormChoiceField=ft,q.AcroFormListBox=dt,q.AcroFormComboBox=pt,q.AcroFormEditBox=gt,q.AcroFormButton=mt,q.AcroFormPushButton=vt,q.AcroFormRadioButton=bt,q.AcroFormCheckBox=wt,q.AcroFormTextField=Nt,q.AcroFormPasswordField=Lt,q.AcroFormAppearance=At,q.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At},E.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At};E.AcroForm;function _t(r){return r.reduce(function(e,t,_e){return e[t]=_e,e},{})}(function(r){r.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},_e=r.__addimage__.getImageFileTypeByImageData=function(un,fn){var mn,wn,Pn,xn,In,Ln=e;if((fn=fn||e)==="RGBA"||un.data!==void 0&&un.data instanceof Uint8ClampedArray&&"height"in un&&"width"in un)return"RGBA";if(Je(un))for(In in t)for(Pn=t[In],mn=0;mn<Pn.length;mn+=1){for(xn=!0,wn=0;wn<Pn[mn].length;wn+=1)if(Pn[mn][wn]!==void 0&&Pn[mn][wn]!==un[wn]){xn=!1;break}if(xn===!0){Ln=In;break}}else for(In in t)for(Pn=t[In],mn=0;mn<Pn.length;mn+=1){for(xn=!0,wn=0;wn<Pn[mn].length;wn+=1)if(Pn[mn][wn]!==void 0&&Pn[mn][wn]!==un.charCodeAt(wn)){xn=!1;break}if(xn===!0){Ln=In;break}}return Ln===e&&fn!==e&&(Ln=fn),Ln},Te=function un(fn){for(var mn=this.internal.write,wn=this.internal.putStream,Pn=(0,this.internal.getFilters)();Pn.indexOf("FlateEncode")!==-1;)Pn.splice(Pn.indexOf("FlateEncode"),1);fn.objectId=this.internal.newObject();var xn=[];if(xn.push({key:"Type",value:"/XObject"}),xn.push({key:"Subtype",value:"/Image"}),xn.push({key:"Width",value:fn.width}),xn.push({key:"Height",value:fn.height}),fn.colorSpace===Ve.INDEXED?xn.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(fn.palette.length/3-1)+" "+("sMask"in fn&&fn.sMask!==void 0?fn.objectId+2:fn.objectId+1)+" 0 R]"}):(xn.push({key:"ColorSpace",value:"/"+fn.colorSpace}),fn.colorSpace===Ve.DEVICE_CMYK&&xn.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),xn.push({key:"BitsPerComponent",value:fn.bitsPerComponent}),"decodeParameters"in fn&&fn.decodeParameters!==void 0&&xn.push({key:"DecodeParms",value:"<<"+fn.decodeParameters+">>"}),"transparency"in fn&&Array.isArray(fn.transparency)){for(var In="",Ln=0,$n=fn.transparency.length;Ln<$n;Ln++)In+=fn.transparency[Ln]+" "+fn.transparency[Ln]+" ";xn.push({key:"Mask",value:"["+In+"]"})}fn.sMask!==void 0&&xn.push({key:"SMask",value:fn.objectId+1+" 0 R"});var Sn=fn.filter!==void 0?["/"+fn.filter]:void 0;if(wn({data:fn.data,additionalKeyValues:xn,alreadyAppliedFilters:Sn,objectId:fn.objectId}),mn("endobj"),"sMask"in fn&&fn.sMask!==void 0){var Bn="/Predictor "+fn.predictor+" /Colors 1 /BitsPerComponent "+fn.bitsPerComponent+" /Columns "+fn.width,Tn={width:fn.width,height:fn.height,colorSpace:"DeviceGray",bitsPerComponent:fn.bitsPerComponent,decodeParameters:Bn,data:fn.sMask};"filter"in fn&&(Tn.filter=fn.filter),un.call(this,Tn)}if(fn.colorSpace===Ve.INDEXED){var vn=this.internal.newObject();wn({data:Ke(new Uint8Array(fn.palette)),objectId:vn}),mn("endobj")}},Ee=function(){var un=this.internal.collections.addImage_images;for(var fn in un)Te.call(this,un[fn])},xe=function(){var un,fn=this.internal.collections.addImage_images,mn=this.internal.write;for(var wn in fn)mn("/I"+(un=fn[wn]).index,un.objectId,"0","R")},Pe=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",Ee),this.internal.events.subscribe("putXobjectDict",xe))},Re=function(){var un=this.internal.collections.addImage_images;return Pe.call(this),un},ke=function(){return Object.keys(this.internal.collections.addImage_images).length},Ce=function(un){return typeof r["process"+un.toUpperCase()]=="function"},Se=function(un){return _typeof(un)==="object"&&un.nodeType===1},Ae=function(un,fn){if(un.nodeName==="IMG"&&un.hasAttribute("src")){var mn=""+un.getAttribute("src");if(mn.indexOf("data:image/")===0)return u(unescape(mn).split("base64,").pop());var wn=r.loadFile(mn,!0);if(wn!==void 0)return wn}if(un.nodeName==="CANVAS"){if(un.width===0||un.height===0)throw new Error("Given canvas must have data. Canvas width: "+un.width+", height: "+un.height);var Pn;switch(fn){case"PNG":Pn="image/png";break;case"WEBP":Pn="image/webp";break;case"JPEG":case"JPG":default:Pn="image/jpeg"}return u(un.toDataURL(Pn,1).split("base64,").pop())}},Ie=function(un){var fn=this.internal.collections.addImage_images;if(fn){for(var mn in fn)if(un===fn[mn].alias)return fn[mn]}},Me=function(un,fn,mn){return un||fn||(un=-96,fn=-96),un<0&&(un=-1*mn.width*72/un/this.internal.scaleFactor),fn<0&&(fn=-1*mn.height*72/fn/this.internal.scaleFactor),un===0&&(un=fn*mn.width/mn.height),fn===0&&(fn=un*mn.height/mn.width),[un,fn]},Fe=function(un,fn,mn,wn,Pn,xn){var In=Me.call(this,mn,wn,Pn),Ln=this.internal.getCoordinateString,$n=this.internal.getVerticalCoordinateString,Sn=Re.call(this);if(mn=In[0],wn=In[1],Sn[Pn.index]=Pn,xn){xn*=Math.PI/180;var Bn=Math.cos(xn),Tn=Math.sin(xn),vn=function(zn){return zn.toFixed(4)},Un=[vn(Bn),vn(Tn),vn(-1*Tn),vn(Bn),0,0,"cm"]}this.internal.write("q"),xn?(this.internal.write([1,"0","0",1,Ln(un),$n(fn+wn),"cm"].join(" ")),this.internal.write(Un.join(" ")),this.internal.write([Ln(mn),"0","0",Ln(wn),"0","0","cm"].join(" "))):this.internal.write([Ln(mn),"0","0",Ln(wn),Ln(un),$n(fn+wn),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Pn.index+" Do"),this.internal.write("Q")},Ve=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var je=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},Be=r.__addimage__.sHashCode=function(un){var fn,mn,wn=0;if(typeof un=="string")for(mn=un.length,fn=0;fn<mn;fn++)wn=(wn<<5)-wn+un.charCodeAt(fn),wn|=0;else if(Je(un))for(mn=un.byteLength/2,fn=0;fn<mn;fn++)wn=(wn<<5)-wn+un[fn],wn|=0;return wn},qe=r.__addimage__.validateStringAsBase64=function(un){(un=un||"").toString().trim();var fn=!0;return un.length===0&&(fn=!1),un.length%4!=0&&(fn=!1),/^[A-Za-z0-9+/]+$/.test(un.substr(0,un.length-2))===!1&&(fn=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(un.substr(-2))===!1&&(fn=!1),fn},He=r.__addimage__.extractImageFromDataUrl=function(un){if(un==null||!(un=un.trim()).startsWith("data:"))return null;var fn=un.indexOf(",");return fn<0?null:un.substring(0,fn).trim().endsWith("base64")?un.substring(fn+1):null},Xe=r.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};r.__addimage__.isArrayBuffer=function(un){return Xe()&&un instanceof ArrayBuffer};var Je=r.__addimage__.isArrayBufferView=function(un){return Xe()&&typeof Uint32Array<"u"&&(un instanceof Int8Array||un instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&un instanceof Uint8ClampedArray||un instanceof Int16Array||un instanceof Uint16Array||un instanceof Int32Array||un instanceof Uint32Array||un instanceof Float32Array||un instanceof Float64Array)},Qe=r.__addimage__.binaryStringToUint8Array=function(un){for(var fn=un.length,mn=new Uint8Array(fn),wn=0;wn<fn;wn++)mn[wn]=un.charCodeAt(wn);return mn},Ke=r.__addimage__.arrayBufferToBinaryString=function(un){for(var fn="",mn=Je(un)?un:new Uint8Array(un),wn=0;wn<mn.length;wn+=8192)fn+=String.fromCharCode.apply(null,mn.subarray(wn,wn+8192));return fn};r.addImage=function(){var un,fn,mn,wn,Pn,xn,In,Ln,$n;if(typeof arguments[1]=="number"?(fn=e,mn=arguments[1],wn=arguments[2],Pn=arguments[3],xn=arguments[4],In=arguments[5],Ln=arguments[6],$n=arguments[7]):(fn=arguments[1],mn=arguments[2],wn=arguments[3],Pn=arguments[4],xn=arguments[5],In=arguments[6],Ln=arguments[7],$n=arguments[8]),_typeof(un=arguments[0])==="object"&&!Se(un)&&"imageData"in un){var Sn=un;un=Sn.imageData,fn=Sn.format||fn||e,mn=Sn.x||mn||0,wn=Sn.y||wn||0,Pn=Sn.w||Sn.width||Pn,xn=Sn.h||Sn.height||xn,In=Sn.alias||In,Ln=Sn.compression||Ln,$n=Sn.rotation||Sn.angle||$n}var Bn=this.internal.getFilters();if(Ln===void 0&&Bn.indexOf("FlateEncode")!==-1&&(Ln="SLOW"),isNaN(mn)||isNaN(wn))throw new Error("Invalid coordinates passed to jsPDF.addImage");Pe.call(this);var Tn=Ye.call(this,un,fn,In,Ln);return Fe.call(this,mn,wn,Pn,xn,Tn,$n),this};var Ye=function(un,fn,mn,wn){var Pn,xn,In;if(typeof un=="string"&&_e(un)===e){un=unescape(un);var Ln=pn(un,!1);(Ln!==""||(Ln=r.loadFile(un,!0))!==void 0)&&(un=Ln)}if(Se(un)&&(un=Ae(un,fn)),fn=_e(un,fn),!Ce(fn))throw new Error("addImage does not support files of type '"+fn+"', please ensure that a plugin for '"+fn+"' support is added.");if(((In=mn)==null||In.length===0)&&(mn=function($n){return typeof $n=="string"||Je($n)?Be($n):Je($n.data)?Be($n.data):null}(un)),(Pn=Ie.call(this,mn))||(Xe()&&(un instanceof Uint8Array||fn==="RGBA"||(xn=un,un=Qe(un))),Pn=this["process"+fn.toUpperCase()](un,ke.call(this),mn,function($n){return $n&&typeof $n=="string"&&($n=$n.toUpperCase()),$n in r.image_compression?$n:je.NONE}(wn),xn)),!Pn)throw new Error("An unknown error occurred whilst processing the image.");return Pn},pn=r.__addimage__.convertBase64ToBinaryString=function(un,fn){fn=typeof fn!="boolean"||fn;var mn,wn="";if(typeof un=="string"){var Pn;mn=(Pn=He(un))!==null&&Pn!==void 0?Pn:un;try{wn=u(mn)}catch(xn){if(fn)throw qe(mn)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+xn.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return wn};r.getImageProperties=function(un){var fn,mn,wn="";if(Se(un)&&(un=Ae(un)),typeof un=="string"&&_e(un)===e&&((wn=pn(un,!1))===""&&(wn=r.loadFile(un)||""),un=wn),mn=_e(un),!Ce(mn))throw new Error("addImage does not support files of type '"+mn+"', please ensure that a plugin for '"+mn+"' support is added.");if(!Xe()||un instanceof Uint8Array||(un=Qe(un)),!(fn=this["process"+mn.toUpperCase()](un)))throw new Error("An unknown error occurred whilst processing the image");return fn.fileType=mn,fn}})(E.API),function(r){var e=function(t){if(t!==void 0&&t!="")return!0};E.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(t){for(var _e,Te,Ee,xe=this.internal.getCoordinateString,Pe=this.internal.getVerticalCoordinateString,Re=this.internal.getPageInfoByObjId(t.objId),ke=t.pageContext.annotations,Ce=!1,Se=0;Se<ke.length&&!Ce;Se++)switch((_e=ke[Se]).type){case"link":(e(_e.options.url)||e(_e.options.pageNumber))&&(Ce=!0);break;case"reference":case"text":case"freetext":Ce=!0}if(Ce!=0){this.internal.write("/Annots [");for(var Ae=0;Ae<ke.length;Ae++){_e=ke[Ae];var Ie=this.internal.pdfEscape,Me=this.internal.getEncryptor(t.objId);switch(_e.type){case"reference":this.internal.write(" "+_e.object.objId+" 0 R ");break;case"text":var Fe=this.internal.newAdditionalObject(),Ve=this.internal.newAdditionalObject(),je=this.internal.getEncryptor(Fe.objId),Be=_e.title||"Note";Ee="<</Type /Annot /Subtype /Text "+(Te="/Rect ["+xe(_e.bounds.x)+" "+Pe(_e.bounds.y+_e.bounds.h)+" "+xe(_e.bounds.x+_e.bounds.w)+" "+Pe(_e.bounds.y)+"] ")+"/Contents ("+Ie(je(_e.contents))+")",Ee+=" /Popup "+Ve.objId+" 0 R",Ee+=" /P "+Re.objId+" 0 R",Ee+=" /T ("+Ie(je(Be))+") >>",Fe.content=Ee;var qe=Fe.objId+" 0 R";Ee="<</Type /Annot /Subtype /Popup "+(Te="/Rect ["+xe(_e.bounds.x+30)+" "+Pe(_e.bounds.y+_e.bounds.h)+" "+xe(_e.bounds.x+_e.bounds.w+30)+" "+Pe(_e.bounds.y)+"] ")+" /Parent "+qe,_e.open&&(Ee+=" /Open true"),Ee+=" >>",Ve.content=Ee,this.internal.write(Fe.objId,"0 R",Ve.objId,"0 R");break;case"freetext":Te="/Rect ["+xe(_e.bounds.x)+" "+Pe(_e.bounds.y)+" "+xe(_e.bounds.x+_e.bounds.w)+" "+Pe(_e.bounds.y+_e.bounds.h)+"] ";var He=_e.color||"#000000";Ee="<</Type /Annot /Subtype /FreeText "+Te+"/Contents ("+Ie(Me(_e.contents))+")",Ee+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+He+")",Ee+=" /Border [0 0 0]",Ee+=" >>",this.internal.write(Ee);break;case"link":if(_e.options.name){var Xe=this.annotations._nameMap[_e.options.name];_e.options.pageNumber=Xe.page,_e.options.top=Xe.y}else _e.options.top||(_e.options.top=0);if(Te="/Rect ["+_e.finalBounds.x+" "+_e.finalBounds.y+" "+_e.finalBounds.w+" "+_e.finalBounds.h+"] ",Ee="",_e.options.url)Ee="<</Type /Annot /Subtype /Link "+Te+"/Border [0 0 0] /A <</S /URI /URI ("+Ie(Me(_e.options.url))+") >>";else if(_e.options.pageNumber)switch(Ee="<</Type /Annot /Subtype /Link "+Te+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(_e.options.pageNumber).objId+" 0 R",_e.options.magFactor=_e.options.magFactor||"XYZ",_e.options.magFactor){case"Fit":Ee+=" /Fit]";break;case"FitH":Ee+=" /FitH "+_e.options.top+"]";break;case"FitV":_e.options.left=_e.options.left||0,Ee+=" /FitV "+_e.options.left+"]";break;case"XYZ":default:var Je=Pe(_e.options.top);_e.options.left=_e.options.left||0,_e.options.zoom===void 0&&(_e.options.zoom=0),Ee+=" /XYZ "+_e.options.left+" "+Je+" "+_e.options.zoom+"]"}Ee!=""&&(Ee+=" >>",this.internal.write(Ee))}}this.internal.write("]")}}]),r.createAnnotation=function(t){var _e=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":_e.pageContext.annotations.push(t)}},r.link=function(t,_e,Te,Ee,xe){var Pe=this.internal.getCurrentPageInfo(),Re=this.internal.getCoordinateString,ke=this.internal.getVerticalCoordinateString;Pe.pageContext.annotations.push({finalBounds:{x:Re(t),y:ke(_e),w:Re(t+Te),h:ke(_e+Ee)},options:xe,type:"link"})},r.textWithLink=function(t,_e,Te,Ee){var xe,Pe,Re=this.getTextWidth(t),ke=this.internal.getLineHeight()/this.internal.scaleFactor;if(Ee.maxWidth!==void 0){Pe=Ee.maxWidth;var Ce=this.splitTextToSize(t,Pe).length;xe=Math.ceil(ke*Ce)}else Pe=Re,xe=ke;return this.text(t,_e,Te,Ee),Te+=.2*ke,Ee.align==="center"&&(_e-=Re/2),Ee.align==="right"&&(_e-=Re),this.link(_e,Te-ke,Pe,xe,Ee),Re},r.getTextWidth=function(t){var _e=this.internal.getFontSize();return this.getStringUnitWidth(t)*_e/this.internal.scaleFactor}}(E.API),function(r){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},_e={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},Te=[1570,1571,1573,1575];r.__arabicParser__={};var Ee=r.__arabicParser__.isInArabicSubstitutionA=function(Fe){return e[Fe.charCodeAt(0)]!==void 0},xe=r.__arabicParser__.isArabicLetter=function(Fe){return typeof Fe=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(Fe)},Pe=r.__arabicParser__.isArabicEndLetter=function(Fe){return xe(Fe)&&Ee(Fe)&&e[Fe.charCodeAt(0)].length<=2},Re=r.__arabicParser__.isArabicAlfLetter=function(Fe){return xe(Fe)&&Te.indexOf(Fe.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(Fe){return xe(Fe)&&Ee(Fe)&&e[Fe.charCodeAt(0)].length>=1};var ke=r.__arabicParser__.arabicLetterHasFinalForm=function(Fe){return xe(Fe)&&Ee(Fe)&&e[Fe.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(Fe){return xe(Fe)&&Ee(Fe)&&e[Fe.charCodeAt(0)].length>=3};var Ce=r.__arabicParser__.arabicLetterHasMedialForm=function(Fe){return xe(Fe)&&Ee(Fe)&&e[Fe.charCodeAt(0)].length==4},Se=r.__arabicParser__.resolveLigatures=function(Fe){var Ve=0,je=t,Be="",qe=0;for(Ve=0;Ve<Fe.length;Ve+=1)je[Fe.charCodeAt(Ve)]!==void 0?(qe++,typeof(je=je[Fe.charCodeAt(Ve)])=="number"&&(Be+=String.fromCharCode(je),je=t,qe=0),Ve===Fe.length-1&&(je=t,Be+=Fe.charAt(Ve-(qe-1)),Ve-=qe-1,qe=0)):(je=t,Be+=Fe.charAt(Ve-qe),Ve-=qe,qe=0);return Be};r.__arabicParser__.isArabicDiacritic=function(Fe){return Fe!==void 0&&_e[Fe.charCodeAt(0)]!==void 0};var Ae=r.__arabicParser__.getCorrectForm=function(Fe,Ve,je){return xe(Fe)?Ee(Fe)===!1?-1:!ke(Fe)||!xe(Ve)&&!xe(je)||!xe(je)&&Pe(Ve)||Pe(Fe)&&!xe(Ve)||Pe(Fe)&&Re(Ve)||Pe(Fe)&&Pe(Ve)?0:Ce(Fe)&&xe(Ve)&&!Pe(Ve)&&xe(je)&&ke(je)?3:Pe(Fe)||!xe(je)?1:2:-1},Ie=function(Fe){var Ve=0,je=0,Be=0,qe="",He="",Xe="",Je=(Fe=Fe||"").split("\\s+"),Qe=[];for(Ve=0;Ve<Je.length;Ve+=1){for(Qe.push(""),je=0;je<Je[Ve].length;je+=1)qe=Je[Ve][je],He=Je[Ve][je-1],Xe=Je[Ve][je+1],xe(qe)?(Be=Ae(qe,He,Xe),Qe[Ve]+=Be!==-1?String.fromCharCode(e[qe.charCodeAt(0)][Be]):qe):Qe[Ve]+=qe;Qe[Ve]=Se(Qe[Ve])}return Qe.join(" ")},Me=r.__arabicParser__.processArabic=r.processArabic=function(){var Fe,Ve=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,je=[];if(Array.isArray(Ve)){var Be=0;for(je=[],Be=0;Be<Ve.length;Be+=1)Array.isArray(Ve[Be])?je.push([Ie(Ve[Be][0]),Ve[Be][1],Ve[Be][2]]):je.push([Ie(Ve[Be])]);Fe=je}else Fe=Ie(Ve);return typeof arguments[0]=="string"?Fe:(arguments[0].text=Fe,arguments[0])};r.events.push(["preProcessText",Me])}(E.API),E.API.autoPrint=function(r){var e;switch((r=r||{}).variant=r.variant||"non-conform",r.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(r){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(Pe){t=Pe}});var _e=150;Object.defineProperty(this,"width",{get:function(){return _e},set:function(Pe){_e=isNaN(Pe)||Number.isInteger(Pe)===!1||Pe<0?150:Pe,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=_e+1)}});var Te=300;Object.defineProperty(this,"height",{get:function(){return Te},set:function(Pe){Te=isNaN(Pe)||Number.isInteger(Pe)===!1||Pe<0?300:Pe,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=Te+1)}});var Ee=[];Object.defineProperty(this,"childNodes",{get:function(){return Ee},set:function(Pe){Ee=Pe}});var xe={};Object.defineProperty(this,"style",{get:function(){return xe},set:function(Pe){xe=Pe}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,_e){var Te;if((t=t||"2d")!=="2d")return null;for(Te in _e)this.pdf.context2d.hasOwnProperty(Te)&&(this.pdf.context2d[Te]=_e[Te]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(E.API),function(r){var e={left:0,top:0,bottom:0,right:0},t=!1,_e=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),Te.call(this))},Te=function(){this.internal.__cell__.lastCell=new Ee,this.internal.__cell__.pages=1},Ee=function(){var Re=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Re},set:function(Fe){Re=Fe}});var ke=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ke},set:function(Fe){ke=Fe}});var Ce=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return Ce},set:function(Fe){Ce=Fe}});var Se=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return Se},set:function(Fe){Se=Fe}});var Ae=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return Ae},set:function(Fe){Ae=Fe}});var Ie=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return Ie},set:function(Fe){Ie=Fe}});var Me=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return Me},set:function(Fe){Me=Fe}}),this};Ee.prototype.clone=function(){return new Ee(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},Ee.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(Re){return _e.call(this),this.internal.__cell__.headerFunction=typeof Re=="function"?Re:void 0,this},r.getTextDimensions=function(Re,ke){_e.call(this);var Ce=(ke=ke||{}).fontSize||this.getFontSize(),Se=ke.font||this.getFont(),Ae=ke.scaleFactor||this.internal.scaleFactor,Ie=0,Me=0,Fe=0,Ve=this;if(!Array.isArray(Re)&&typeof Re!="string"){if(typeof Re!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");Re=String(Re)}var je=ke.maxWidth;je>0?typeof Re=="string"?Re=this.splitTextToSize(Re,je):Object.prototype.toString.call(Re)==="[object Array]"&&(Re=Re.reduce(function(qe,He){return qe.concat(Ve.splitTextToSize(He,je))},[])):Re=Array.isArray(Re)?Re:[Re];for(var Be=0;Be<Re.length;Be++)Ie<(Fe=this.getStringUnitWidth(Re[Be],{font:Se})*Ce)&&(Ie=Fe);return Ie!==0&&(Me=Re.length),{w:Ie/=Ae,h:Math.max((Me*Ce*this.getLineHeightFactor()-Ce*(this.getLineHeightFactor()-1))/Ae,0)}},r.cellAddPage=function(){_e.call(this),this.addPage();var Re=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new Ee(Re.left,Re.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var xe=r.cell=function(){var Re;Re=arguments[0]instanceof Ee?arguments[0]:new Ee(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),_e.call(this);var ke=this.internal.__cell__.lastCell,Ce=this.internal.__cell__.padding,Se=this.internal.__cell__.margins||e,Ae=this.internal.__cell__.tableHeaderRow,Ie=this.internal.__cell__.printHeaders;return ke.lineNumber!==void 0&&(ke.lineNumber===Re.lineNumber?(Re.x=(ke.x||0)+(ke.width||0),Re.y=ke.y||0):ke.y+ke.height+Re.height+Se.bottom>this.getPageHeight()?(this.cellAddPage(),Re.y=Se.top,Ie&&Ae&&(this.printHeaderRow(Re.lineNumber,!0),Re.y+=Ae[0].height)):Re.y=ke.y+ke.height||Re.y),Re.text[0]!==void 0&&(this.rect(Re.x,Re.y,Re.width,Re.height,t===!0?"FD":void 0),Re.align==="right"?this.text(Re.text,Re.x+Re.width-Ce,Re.y+Ce,{align:"right",baseline:"top"}):Re.align==="center"?this.text(Re.text,Re.x+Re.width/2,Re.y+Ce,{align:"center",baseline:"top",maxWidth:Re.width-Ce-Ce}):this.text(Re.text,Re.x+Ce,Re.y+Ce,{align:"left",baseline:"top",maxWidth:Re.width-Ce-Ce})),this.internal.__cell__.lastCell=Re,this};r.table=function(Re,ke,Ce,Se,Ae){if(_e.call(this),!Ce)throw new Error("No data for PDF table.");var Ie,Me,Fe,Ve,je=[],Be=[],qe=[],He={},Xe={},Je=[],Qe=[],Ke=(Ae=Ae||{}).autoSize||!1,Ye=Ae.printHeaders!==!1,pn=Ae.css&&Ae.css["font-size"]!==void 0?16*Ae.css["font-size"]:Ae.fontSize||12,un=Ae.margins||Object.assign({width:this.getPageWidth()},e),fn=typeof Ae.padding=="number"?Ae.padding:3,mn=Ae.headerBackgroundColor||"#c8c8c8",wn=Ae.headerTextColor||"#000";if(Te.call(this),this.internal.__cell__.printHeaders=Ye,this.internal.__cell__.margins=un,this.internal.__cell__.table_font_size=pn,this.internal.__cell__.padding=fn,this.internal.__cell__.headerBackgroundColor=mn,this.internal.__cell__.headerTextColor=wn,this.setFontSize(pn),Se==null)Be=je=Object.keys(Ce[0]),qe=je.map(function(){return"left"});else if(Array.isArray(Se)&&_typeof(Se[0])==="object")for(je=Se.map(function(Sn){return Sn.name}),Be=Se.map(function(Sn){return Sn.prompt||Sn.name||""}),qe=Se.map(function(Sn){return Sn.align||"left"}),Ie=0;Ie<Se.length;Ie+=1)Xe[Se[Ie].name]=Se[Ie].width*(19.049976/25.4);else Array.isArray(Se)&&typeof Se[0]=="string"&&(Be=je=Se,qe=je.map(function(){return"left"}));if(Ke||Array.isArray(Se)&&typeof Se[0]=="string")for(Ie=0;Ie<je.length;Ie+=1){for(He[Ve=je[Ie]]=Ce.map(function(Sn){return Sn[Ve]}),this.setFont(void 0,"bold"),Je.push(this.getTextDimensions(Be[Ie],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),Me=He[Ve],this.setFont(void 0,"normal"),Fe=0;Fe<Me.length;Fe+=1)Je.push(this.getTextDimensions(Me[Fe],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Xe[Ve]=Math.max.apply(null,Je)+fn+fn,Je=[]}if(Ye){var Pn={};for(Ie=0;Ie<je.length;Ie+=1)Pn[je[Ie]]={},Pn[je[Ie]].text=Be[Ie],Pn[je[Ie]].align=qe[Ie];var xn=Pe.call(this,Pn,Xe);Qe=je.map(function(Sn){return new Ee(Re,ke,Xe[Sn],xn,Pn[Sn].text,void 0,Pn[Sn].align)}),this.setTableHeaderRow(Qe),this.printHeaderRow(1,!1)}var In=Se.reduce(function(Sn,Bn){return Sn[Bn.name]=Bn.align,Sn},{});for(Ie=0;Ie<Ce.length;Ie+=1){"rowStart"in Ae&&Ae.rowStart instanceof Function&&Ae.rowStart({row:Ie,data:Ce[Ie]},this);var Ln=Pe.call(this,Ce[Ie],Xe);for(Fe=0;Fe<je.length;Fe+=1){var $n=Ce[Ie][je[Fe]];"cellStart"in Ae&&Ae.cellStart instanceof Function&&Ae.cellStart({row:Ie,col:Fe,data:$n},this),xe.call(this,new Ee(Re,ke,Xe[je[Fe]],Ln,$n,Ie+2,In[je[Fe]]))}}return this.internal.__cell__.table_x=Re,this.internal.__cell__.table_y=ke,this};var Pe=function(Re,ke){var Ce=this.internal.__cell__.padding,Se=this.internal.__cell__.table_font_size,Ae=this.internal.scaleFactor;return Object.keys(Re).map(function(Ie){var Me=Re[Ie];return this.splitTextToSize(Me.hasOwnProperty("text")?Me.text:Me,ke[Ie]-Ce-Ce)},this).map(function(Ie){return this.getLineHeightFactor()*Ie.length*Se/Ae+Ce+Ce},this).reduce(function(Ie,Me){return Math.max(Ie,Me)},0)};r.setTableHeaderRow=function(Re){_e.call(this),this.internal.__cell__.tableHeaderRow=Re},r.printHeaderRow=function(Re,ke){if(_e.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var Ce;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var Se=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new Ee(Se[0],Se[1],Se[2],Se[3],void 0,-1)}this.setFont(void 0,"bold");for(var Ae=[],Ie=0;Ie<this.internal.__cell__.tableHeaderRow.length;Ie+=1){Ce=this.internal.__cell__.tableHeaderRow[Ie].clone(),ke&&(Ce.y=this.internal.__cell__.margins.top||0,Ae.push(Ce)),Ce.lineNumber=Re;var Me=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),xe.call(this,Ce),this.setTextColor(Me)}Ae.length>0&&this.setTableHeaderRow(Ae),this.setFont(void 0,"normal"),t=!1}}(E.API);var Pt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},kt=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],It=_t(kt),Ft=[100,200,300,400,500,600,700,800,900],Ct=_t(Ft);function jt(r){var e=r.family.replace(/"|'/g,"").toLowerCase(),t=function(Ee){return Pt[Ee=Ee||"normal"]?Ee:"normal"}(r.style),_e=function(Ee){if(!Ee)return 400;if(typeof Ee=="number")return Ee>=100&&Ee<=900&&Ee%100==0?Ee:400;if(/^\d00$/.test(Ee))return parseInt(Ee);switch(Ee){case"bold":return 700;case"normal":default:return 400}}(r.weight),Te=function(Ee){return typeof It[Ee=Ee||"normal"]=="number"?Ee:"normal"}(r.stretch);return{family:e,style:t,weight:_e,stretch:Te,src:r.src||[],ref:r.ref||{name:e,style:[Te,t,_e].join(" ")}}}function Ot(r,e,t,_e){var Te;for(Te=t;Te>=0&&Te<e.length;Te+=_e)if(r[e[Te]])return r[e[Te]];for(Te=t;Te>=0&&Te<e.length;Te-=_e)if(r[e[Te]])return r[e[Te]]}var Bt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Mt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Et(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function qt(r,e,t){for(var _e=(t=t||{}).defaultFontFamily||"times",Te=Object.assign({},Bt,t.genericFontFamilies||{}),Ee=null,xe=null,Pe=0;Pe<e.length;++Pe)if(Te[(Ee=jt(e[Pe])).family]&&(Ee.family=Te[Ee.family]),r.hasOwnProperty(Ee.family)){xe=r[Ee.family];break}if(!(xe=xe||r[_e]))throw new Error("Could not find a font-family for the rule '"+Et(Ee)+"' and default family '"+_e+"'.");if(xe=function(Re,ke){if(ke[Re])return ke[Re];var Ce=It[Re],Se=Ce<=It.normal?-1:1,Ae=Ot(ke,kt,Ce,Se);if(!Ae)throw new Error("Could not find a matching font-stretch value for "+Re);return Ae}(Ee.stretch,xe),xe=function(Re,ke){if(ke[Re])return ke[Re];for(var Ce=Pt[Re],Se=0;Se<Ce.length;++Se)if(ke[Ce[Se]])return ke[Ce[Se]];throw new Error("Could not find a matching font-style for "+Re)}(Ee.style,xe),!(xe=function(Re,ke){if(ke[Re])return ke[Re];if(Re===400&&ke[500])return ke[500];if(Re===500&&ke[400])return ke[400];var Ce=Ct[Re],Se=Ot(ke,Ft,Ce,Re<400?-1:1);if(!Se)throw new Error("Could not find a matching font-weight for value "+Re);return Se}(Ee.weight,xe)))throw new Error("Failed to resolve a font for the rule '"+Et(Ee)+"'.");return xe}function Dt(r){return r.trimLeft()}function Rt(r,e){for(var t=0;t<r.length;){if(r.charAt(t)===e)return[r.substring(0,t),r.substring(t+1)];t+=1}return null}function Tt(r){var e=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],r.substring(e[0].length)]}var Ut,zt,Ht,Wt=["times"];(function(r){var e,t,_e,Te,Ee,xe,Pe,Re,ke,Ce=function(Tn){return Tn=Tn||{},this.isStrokeTransparent=Tn.isStrokeTransparent||!1,this.strokeOpacity=Tn.strokeOpacity||1,this.strokeStyle=Tn.strokeStyle||"#000000",this.fillStyle=Tn.fillStyle||"#000000",this.isFillTransparent=Tn.isFillTransparent||!1,this.fillOpacity=Tn.fillOpacity||1,this.font=Tn.font||"10px sans-serif",this.textBaseline=Tn.textBaseline||"alphabetic",this.textAlign=Tn.textAlign||"left",this.lineWidth=Tn.lineWidth||1,this.lineJoin=Tn.lineJoin||"miter",this.lineCap=Tn.lineCap||"butt",this.path=Tn.path||[],this.transform=Tn.transform!==void 0?Tn.transform.clone():new Re,this.globalCompositeOperation=Tn.globalCompositeOperation||"normal",this.globalAlpha=Tn.globalAlpha||1,this.clip_path=Tn.clip_path||[],this.currentPoint=Tn.currentPoint||new xe,this.miterLimit=Tn.miterLimit||10,this.lastPoint=Tn.lastPoint||new xe,this.lineDashOffset=Tn.lineDashOffset||0,this.lineDash=Tn.lineDash||[],this.margin=Tn.margin||[0,0,0,0],this.prevPageLastElemOffset=Tn.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Tn.ignoreClearRect!="boolean"||Tn.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new Se(this),e=this.internal.f2,t=this.internal.getCoordinateString,_e=this.internal.getVerticalCoordinateString,Te=this.internal.getHorizontalCoordinate,Ee=this.internal.getVerticalCoordinate,xe=this.internal.Point,Pe=this.internal.Rectangle,Re=this.internal.Matrix,ke=new Ce}]);var Se=function(Tn){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var vn=Tn;Object.defineProperty(this,"pdf",{get:function(){return vn}});var Un=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Un},set:function(wr){Un=!!wr}});var zn=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return zn},set:function(wr){zn=!!wr}});var Hn=0;Object.defineProperty(this,"posX",{get:function(){return Hn},set:function(wr){isNaN(wr)||(Hn=wr)}});var Jn=0;Object.defineProperty(this,"posY",{get:function(){return Jn},set:function(wr){isNaN(wr)||(Jn=wr)}}),Object.defineProperty(this,"margin",{get:function(){return ke.margin},set:function(wr){var Yn;typeof wr=="number"?Yn=[wr,wr,wr,wr]:((Yn=new Array(4))[0]=wr[0],Yn[1]=wr.length>=2?wr[1]:Yn[0],Yn[2]=wr.length>=3?wr[2]:Yn[0],Yn[3]=wr.length>=4?wr[3]:Yn[1]),ke.margin=Yn}});var nr=!1;Object.defineProperty(this,"autoPaging",{get:function(){return nr},set:function(wr){nr=wr}});var or=0;Object.defineProperty(this,"lastBreak",{get:function(){return or},set:function(wr){or=wr}});var Sr=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Sr},set:function(wr){Sr=wr}}),Object.defineProperty(this,"ctx",{get:function(){return ke},set:function(wr){wr instanceof Ce&&(ke=wr)}}),Object.defineProperty(this,"path",{get:function(){return ke.path},set:function(wr){ke.path=wr}});var kr=[];Object.defineProperty(this,"ctxStack",{get:function(){return kr},set:function(wr){kr=wr}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(wr){var Yn;Yn=Ae(wr),this.ctx.fillStyle=Yn.style,this.ctx.isFillTransparent=Yn.a===0,this.ctx.fillOpacity=Yn.a,this.pdf.setFillColor(Yn.r,Yn.g,Yn.b,{a:Yn.a}),this.pdf.setTextColor(Yn.r,Yn.g,Yn.b,{a:Yn.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(wr){var Yn=Ae(wr);this.ctx.strokeStyle=Yn.style,this.ctx.isStrokeTransparent=Yn.a===0,this.ctx.strokeOpacity=Yn.a,Yn.a===0?this.pdf.setDrawColor(255,255,255):(Yn.a,this.pdf.setDrawColor(Yn.r,Yn.g,Yn.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(wr){["butt","round","square"].indexOf(wr)!==-1&&(this.ctx.lineCap=wr,this.pdf.setLineCap(wr))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(wr){isNaN(wr)||(this.ctx.lineWidth=wr,this.pdf.setLineWidth(wr))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(wr){["bevel","round","miter"].indexOf(wr)!==-1&&(this.ctx.lineJoin=wr,this.pdf.setLineJoin(wr))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(wr){isNaN(wr)||(this.ctx.miterLimit=wr,this.pdf.setMiterLimit(wr))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(wr){this.ctx.textBaseline=wr}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(wr){["right","end","center","left","start"].indexOf(wr)!==-1&&(this.ctx.textAlign=wr)}});var Vr=null;function Lr(wr,Yn){if(Vr===null){var gi=function(ui){var Dr=[];return Object.keys(ui).forEach(function($r){ui[$r].forEach(function(Kr){var Fr=null;switch(Kr){case"bold":Fr={family:$r,weight:"bold"};break;case"italic":Fr={family:$r,style:"italic"};break;case"bolditalic":Fr={family:$r,weight:"bold",style:"italic"};break;case"":case"normal":Fr={family:$r}}Fr!==null&&(Fr.ref={name:$r,style:Kr},Dr.push(Fr))})}),Dr}(wr.getFontList());Vr=function(ui){for(var Dr={},$r=0;$r<ui.length;++$r){var Kr=jt(ui[$r]),Fr=Kr.family,li=Kr.stretch,yi=Kr.style,ei=Kr.weight;Dr[Fr]=Dr[Fr]||{},Dr[Fr][li]=Dr[Fr][li]||{},Dr[Fr][li][yi]=Dr[Fr][li][yi]||{},Dr[Fr][li][yi][ei]=Kr}return Dr}(gi.concat(Yn))}return Vr}var Qr=null;Object.defineProperty(this,"fontFaces",{get:function(){return Qr},set:function(wr){Vr=null,Qr=wr}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(wr){var Yn;if(this.ctx.font=wr,(Yn=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(wr))!==null){var gi=Yn[1];Yn[2];var ui=Yn[3],Dr=Yn[4];Yn[5];var $r=Yn[6],Kr=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Dr)[2];Dr=Math.floor(Kr==="px"?parseFloat(Dr)*this.pdf.internal.scaleFactor:Kr==="em"?parseFloat(Dr)*this.pdf.getFontSize():parseFloat(Dr)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Dr);var Fr=function(Gr){var oi,Wr,Ci=[],xi=Gr.trim();if(xi==="")return Wt;if(xi in Mt)return[Mt[xi]];for(;xi!=="";){switch(Wr=null,oi=(xi=Dt(xi)).charAt(0)){case'"':case"'":Wr=Rt(xi.substring(1),oi);break;default:Wr=Tt(xi)}if(Wr===null||(Ci.push(Wr[0]),(xi=Dt(Wr[1]))!==""&&xi.charAt(0)!==","))return Wt;xi=xi.replace(/^,/,"")}return Ci}($r);if(this.fontFaces){var li=qt(Lr(this.pdf,this.fontFaces),Fr.map(function(Gr){return{family:Gr,stretch:"normal",weight:ui,style:gi}}));this.pdf.setFont(li.ref.name,li.ref.style)}else{var yi="";(ui==="bold"||parseInt(ui,10)>=700||gi==="bold")&&(yi="bold"),gi==="italic"&&(yi+="italic"),yi.length===0&&(yi="normal");for(var ei="",fr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Pr=0;Pr<Fr.length;Pr++){if(this.pdf.internal.getFont(Fr[Pr],yi,{noFallback:!0,disableWarning:!0})!==void 0){ei=Fr[Pr];break}if(yi==="bolditalic"&&this.pdf.internal.getFont(Fr[Pr],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ei=Fr[Pr],yi="bold";else if(this.pdf.internal.getFont(Fr[Pr],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ei=Fr[Pr],yi="normal";break}}if(ei===""){for(var ti=0;ti<Fr.length;ti++)if(fr[Fr[ti]]){ei=fr[Fr[ti]];break}}ei=ei===""?"Times":ei,this.pdf.setFont(ei,yi)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(wr){this.ctx.globalCompositeOperation=wr}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(wr){this.ctx.globalAlpha=wr}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(wr){this.ctx.lineDashOffset=wr,Bn.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(wr){this.ctx.lineDash=wr,Bn.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(wr){this.ctx.ignoreClearRect=!!wr}})};Se.prototype.setLineDash=function(Tn){this.lineDash=Tn},Se.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},Se.prototype.fill=function(){He.call(this,"fill",!1)},Se.prototype.stroke=function(){He.call(this,"stroke",!1)},Se.prototype.beginPath=function(){this.path=[{type:"begin"}]},Se.prototype.moveTo=function(Tn,vn){if(isNaN(Tn)||isNaN(vn))throw a.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Un=this.ctx.transform.applyToPoint(new xe(Tn,vn));this.path.push({type:"mt",x:Un.x,y:Un.y}),this.ctx.lastPoint=new xe(Tn,vn)},Se.prototype.closePath=function(){var Tn=new xe(0,0),vn=0;for(vn=this.path.length-1;vn!==-1;vn--)if(this.path[vn].type==="begin"&&_typeof(this.path[vn+1])==="object"&&typeof this.path[vn+1].x=="number"){Tn=new xe(this.path[vn+1].x,this.path[vn+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new xe(Tn.x,Tn.y)},Se.prototype.lineTo=function(Tn,vn){if(isNaN(Tn)||isNaN(vn))throw a.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Un=this.ctx.transform.applyToPoint(new xe(Tn,vn));this.path.push({type:"lt",x:Un.x,y:Un.y}),this.ctx.lastPoint=new xe(Un.x,Un.y)},Se.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),He.call(this,null,!0)},Se.prototype.quadraticCurveTo=function(Tn,vn,Un,zn){if(isNaN(Un)||isNaN(zn)||isNaN(Tn)||isNaN(vn))throw a.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Hn=this.ctx.transform.applyToPoint(new xe(Un,zn)),Jn=this.ctx.transform.applyToPoint(new xe(Tn,vn));this.path.push({type:"qct",x1:Jn.x,y1:Jn.y,x:Hn.x,y:Hn.y}),this.ctx.lastPoint=new xe(Hn.x,Hn.y)},Se.prototype.bezierCurveTo=function(Tn,vn,Un,zn,Hn,Jn){if(isNaN(Hn)||isNaN(Jn)||isNaN(Tn)||isNaN(vn)||isNaN(Un)||isNaN(zn))throw a.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var nr=this.ctx.transform.applyToPoint(new xe(Hn,Jn)),or=this.ctx.transform.applyToPoint(new xe(Tn,vn)),Sr=this.ctx.transform.applyToPoint(new xe(Un,zn));this.path.push({type:"bct",x1:or.x,y1:or.y,x2:Sr.x,y2:Sr.y,x:nr.x,y:nr.y}),this.ctx.lastPoint=new xe(nr.x,nr.y)},Se.prototype.arc=function(Tn,vn,Un,zn,Hn,Jn){if(isNaN(Tn)||isNaN(vn)||isNaN(Un)||isNaN(zn)||isNaN(Hn))throw a.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Jn=!!Jn,!this.ctx.transform.isIdentity){var nr=this.ctx.transform.applyToPoint(new xe(Tn,vn));Tn=nr.x,vn=nr.y;var or=this.ctx.transform.applyToPoint(new xe(0,Un)),Sr=this.ctx.transform.applyToPoint(new xe(0,0));Un=Math.sqrt(Math.pow(or.x-Sr.x,2)+Math.pow(or.y-Sr.y,2))}Math.abs(Hn-zn)>=2*Math.PI&&(zn=0,Hn=2*Math.PI),this.path.push({type:"arc",x:Tn,y:vn,radius:Un,startAngle:zn,endAngle:Hn,counterclockwise:Jn})},Se.prototype.arcTo=function(Tn,vn,Un,zn,Hn){throw new Error("arcTo not implemented.")},Se.prototype.rect=function(Tn,vn,Un,zn){if(isNaN(Tn)||isNaN(vn)||isNaN(Un)||isNaN(zn))throw a.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Tn,vn),this.lineTo(Tn+Un,vn),this.lineTo(Tn+Un,vn+zn),this.lineTo(Tn,vn+zn),this.lineTo(Tn,vn),this.lineTo(Tn+Un,vn),this.lineTo(Tn,vn)},Se.prototype.fillRect=function(Tn,vn,Un,zn){if(isNaN(Tn)||isNaN(vn)||isNaN(Un)||isNaN(zn))throw a.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!Ie.call(this)){var Hn={};this.lineCap!=="butt"&&(Hn.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Hn.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Tn,vn,Un,zn),this.fill(),Hn.hasOwnProperty("lineCap")&&(this.lineCap=Hn.lineCap),Hn.hasOwnProperty("lineJoin")&&(this.lineJoin=Hn.lineJoin)}},Se.prototype.strokeRect=function(Tn,vn,Un,zn){if(isNaN(Tn)||isNaN(vn)||isNaN(Un)||isNaN(zn))throw a.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");Me.call(this)||(this.beginPath(),this.rect(Tn,vn,Un,zn),this.stroke())},Se.prototype.clearRect=function(Tn,vn,Un,zn){if(isNaN(Tn)||isNaN(vn)||isNaN(Un)||isNaN(zn))throw a.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Tn,vn,Un,zn))},Se.prototype.save=function(Tn){Tn=typeof Tn!="boolean"||Tn;for(var vn=this.pdf.internal.getCurrentPageInfo().pageNumber,Un=0;Un<this.pdf.internal.getNumberOfPages();Un++)this.pdf.setPage(Un+1),this.pdf.internal.out("q");if(this.pdf.setPage(vn),Tn){this.ctx.fontSize=this.pdf.internal.getFontSize();var zn=new Ce(this.ctx);this.ctxStack.push(this.ctx),this.ctx=zn}},Se.prototype.restore=function(Tn){Tn=typeof Tn!="boolean"||Tn;for(var vn=this.pdf.internal.getCurrentPageInfo().pageNumber,Un=0;Un<this.pdf.internal.getNumberOfPages();Un++)this.pdf.setPage(Un+1),this.pdf.internal.out("Q");this.pdf.setPage(vn),Tn&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},Se.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var Ae=function(Tn){var vn,Un,zn,Hn;if(Tn.isCanvasGradient===!0&&(Tn=Tn.getColor()),!Tn)return{r:0,g:0,b:0,a:0,style:Tn};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Tn))vn=0,Un=0,zn=0,Hn=0;else{var Jn=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Tn);if(Jn!==null)vn=parseInt(Jn[1]),Un=parseInt(Jn[2]),zn=parseInt(Jn[3]),Hn=1;else if((Jn=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Tn))!==null)vn=parseInt(Jn[1]),Un=parseInt(Jn[2]),zn=parseInt(Jn[3]),Hn=parseFloat(Jn[4]);else{if(Hn=1,typeof Tn=="string"&&Tn.charAt(0)!=="#"){var nr=new f(Tn);Tn=nr.ok?nr.toHex():"#000000"}Tn.length===4?(vn=Tn.substring(1,2),vn+=vn,Un=Tn.substring(2,3),Un+=Un,zn=Tn.substring(3,4),zn+=zn):(vn=Tn.substring(1,3),Un=Tn.substring(3,5),zn=Tn.substring(5,7)),vn=parseInt(vn,16),Un=parseInt(Un,16),zn=parseInt(zn,16)}}return{r:vn,g:Un,b:zn,a:Hn,style:Tn}},Ie=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},Me=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};Se.prototype.fillText=function(Tn,vn,Un,zn){if(isNaN(vn)||isNaN(Un)||typeof Tn!="string")throw a.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(zn=isNaN(zn)?void 0:zn,!Ie.call(this)){var Hn=Ln(this.ctx.transform.rotation),Jn=this.ctx.transform.scaleX;fn.call(this,{text:Tn,x:vn,y:Un,scale:Jn,angle:Hn,align:this.textAlign,maxWidth:zn})}},Se.prototype.strokeText=function(Tn,vn,Un,zn){if(isNaN(vn)||isNaN(Un)||typeof Tn!="string")throw a.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!Me.call(this)){zn=isNaN(zn)?void 0:zn;var Hn=Ln(this.ctx.transform.rotation),Jn=this.ctx.transform.scaleX;fn.call(this,{text:Tn,x:vn,y:Un,scale:Jn,renderingMode:"stroke",angle:Hn,align:this.textAlign,maxWidth:zn})}},Se.prototype.measureText=function(Tn){if(typeof Tn!="string")throw a.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var vn=this.pdf,Un=this.pdf.internal.scaleFactor,zn=vn.internal.getFontSize(),Hn=vn.getStringUnitWidth(Tn)*zn/vn.internal.scaleFactor,Jn=function(nr){var or=(nr=nr||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return or}}),this};return new Jn({width:Hn*=Math.round(96*Un/72*1e4)/1e4})},Se.prototype.scale=function(Tn,vn){if(isNaN(Tn)||isNaN(vn))throw a.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Un=new Re(Tn,0,0,vn,0,0);this.ctx.transform=this.ctx.transform.multiply(Un)},Se.prototype.rotate=function(Tn){if(isNaN(Tn))throw a.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var vn=new Re(Math.cos(Tn),Math.sin(Tn),-Math.sin(Tn),Math.cos(Tn),0,0);this.ctx.transform=this.ctx.transform.multiply(vn)},Se.prototype.translate=function(Tn,vn){if(isNaN(Tn)||isNaN(vn))throw a.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Un=new Re(1,0,0,1,Tn,vn);this.ctx.transform=this.ctx.transform.multiply(Un)},Se.prototype.transform=function(Tn,vn,Un,zn,Hn,Jn){if(isNaN(Tn)||isNaN(vn)||isNaN(Un)||isNaN(zn)||isNaN(Hn)||isNaN(Jn))throw a.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var nr=new Re(Tn,vn,Un,zn,Hn,Jn);this.ctx.transform=this.ctx.transform.multiply(nr)},Se.prototype.setTransform=function(Tn,vn,Un,zn,Hn,Jn){Tn=isNaN(Tn)?1:Tn,vn=isNaN(vn)?0:vn,Un=isNaN(Un)?0:Un,zn=isNaN(zn)?1:zn,Hn=isNaN(Hn)?0:Hn,Jn=isNaN(Jn)?0:Jn,this.ctx.transform=new Re(Tn,vn,Un,zn,Hn,Jn)};var Fe=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};Se.prototype.drawImage=function(Tn,vn,Un,zn,Hn,Jn,nr,or,Sr){var kr=this.pdf.getImageProperties(Tn),Vr=1,Lr=1,Qr=1,wr=1;zn!==void 0&&or!==void 0&&(Qr=or/zn,wr=Sr/Hn,Vr=kr.width/zn*or/zn,Lr=kr.height/Hn*Sr/Hn),Jn===void 0&&(Jn=vn,nr=Un,vn=0,Un=0),zn!==void 0&&or===void 0&&(or=zn,Sr=Hn),zn===void 0&&or===void 0&&(or=kr.width,Sr=kr.height);for(var Yn,gi=this.ctx.transform.decompose(),ui=Ln(gi.rotate.shx),Dr=new Re,$r=(Dr=(Dr=(Dr=Dr.multiply(gi.translate)).multiply(gi.skew)).multiply(gi.scale)).applyToRectangle(new Pe(Jn-vn*Qr,nr-Un*wr,zn*Vr,Hn*Lr)),Kr=Ve.call(this,$r),Fr=[],li=0;li<Kr.length;li+=1)Fr.indexOf(Kr[li])===-1&&Fr.push(Kr[li]);if(qe(Fr),this.autoPaging)for(var yi=Fr[0],ei=Fr[Fr.length-1],fr=yi;fr<ei+1;fr++){this.pdf.setPage(fr);var Pr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ti=fr===1?this.posY+this.margin[0]:this.margin[0],Gr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],oi=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Wr=fr===1?0:Gr+(fr-2)*oi;if(this.ctx.clip_path.length!==0){var Ci=this.path;Yn=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Be(Yn,this.posX+this.margin[3],-Wr+ti+this.ctx.prevPageLastElemOffset),Xe.call(this,"fill",!0),this.path=Ci}var xi=JSON.parse(JSON.stringify($r));xi=Be([xi],this.posX+this.margin[3],-Wr+ti+this.ctx.prevPageLastElemOffset)[0];var fi=(fr>yi||fr<ei)&&Fe.call(this);fi&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pr,oi,null).clip().discardPath()),this.pdf.addImage(Tn,"JPEG",xi.x,xi.y,xi.w,xi.h,null,null,ui),fi&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(Tn,"JPEG",$r.x,$r.y,$r.w,$r.h,null,null,ui)};var Ve=function(Tn,vn,Un){var zn=[];vn=vn||this.pdf.internal.pageSize.width,Un=Un||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Hn=this.posY+this.ctx.prevPageLastElemOffset;switch(Tn.type){default:case"mt":case"lt":zn.push(Math.floor((Tn.y+Hn)/Un)+1);break;case"arc":zn.push(Math.floor((Tn.y+Hn-Tn.radius)/Un)+1),zn.push(Math.floor((Tn.y+Hn+Tn.radius)/Un)+1);break;case"qct":var Jn=$n(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Tn.x1,Tn.y1,Tn.x,Tn.y);zn.push(Math.floor((Jn.y+Hn)/Un)+1),zn.push(Math.floor((Jn.y+Jn.h+Hn)/Un)+1);break;case"bct":var nr=Sn(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Tn.x1,Tn.y1,Tn.x2,Tn.y2,Tn.x,Tn.y);zn.push(Math.floor((nr.y+Hn)/Un)+1),zn.push(Math.floor((nr.y+nr.h+Hn)/Un)+1);break;case"rect":zn.push(Math.floor((Tn.y+Hn)/Un)+1),zn.push(Math.floor((Tn.y+Tn.h+Hn)/Un)+1)}for(var or=0;or<zn.length;or+=1)for(;this.pdf.internal.getNumberOfPages()<zn[or];)je.call(this);return zn},je=function(){var Tn=this.fillStyle,vn=this.strokeStyle,Un=this.font,zn=this.lineCap,Hn=this.lineWidth,Jn=this.lineJoin;this.pdf.addPage(),this.fillStyle=Tn,this.strokeStyle=vn,this.font=Un,this.lineCap=zn,this.lineWidth=Hn,this.lineJoin=Jn},Be=function(Tn,vn,Un){for(var zn=0;zn<Tn.length;zn++)switch(Tn[zn].type){case"bct":Tn[zn].x2+=vn,Tn[zn].y2+=Un;case"qct":Tn[zn].x1+=vn,Tn[zn].y1+=Un;case"mt":case"lt":case"arc":default:Tn[zn].x+=vn,Tn[zn].y+=Un}return Tn},qe=function(Tn){return Tn.sort(function(vn,Un){return vn-Un})},He=function(Tn,vn){for(var Un,zn,Hn=this.fillStyle,Jn=this.strokeStyle,nr=this.lineCap,or=this.lineWidth,Sr=Math.abs(or*this.ctx.transform.scaleX),kr=this.lineJoin,Vr=JSON.parse(JSON.stringify(this.path)),Lr=JSON.parse(JSON.stringify(this.path)),Qr=[],wr=0;wr<Lr.length;wr++)if(Lr[wr].x!==void 0)for(var Yn=Ve.call(this,Lr[wr]),gi=0;gi<Yn.length;gi+=1)Qr.indexOf(Yn[gi])===-1&&Qr.push(Yn[gi]);for(var ui=0;ui<Qr.length;ui++)for(;this.pdf.internal.getNumberOfPages()<Qr[ui];)je.call(this);if(qe(Qr),this.autoPaging)for(var Dr=Qr[0],$r=Qr[Qr.length-1],Kr=Dr;Kr<$r+1;Kr++){this.pdf.setPage(Kr),this.fillStyle=Hn,this.strokeStyle=Jn,this.lineCap=nr,this.lineWidth=Sr,this.lineJoin=kr;var Fr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],li=Kr===1?this.posY+this.margin[0]:this.margin[0],yi=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ei=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],fr=Kr===1?0:yi+(Kr-2)*ei;if(this.ctx.clip_path.length!==0){var Pr=this.path;Un=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Be(Un,this.posX+this.margin[3],-fr+li+this.ctx.prevPageLastElemOffset),Xe.call(this,Tn,!0),this.path=Pr}if(zn=JSON.parse(JSON.stringify(Vr)),this.path=Be(zn,this.posX+this.margin[3],-fr+li+this.ctx.prevPageLastElemOffset),vn===!1||Kr===0){var ti=(Kr>Dr||Kr<$r)&&Fe.call(this);ti&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Fr,ei,null).clip().discardPath()),Xe.call(this,Tn,vn),ti&&this.pdf.restoreGraphicsState()}this.lineWidth=or}else this.lineWidth=Sr,Xe.call(this,Tn,vn),this.lineWidth=or;this.path=Vr},Xe=function(Tn,vn){if((Tn!=="stroke"||vn||!Me.call(this))&&(Tn==="stroke"||vn||!Ie.call(this))){for(var Un,zn,Hn=[],Jn=this.path,nr=0;nr<Jn.length;nr++){var or=Jn[nr];switch(or.type){case"begin":Hn.push({begin:!0});break;case"close":Hn.push({close:!0});break;case"mt":Hn.push({start:or,deltas:[],abs:[]});break;case"lt":var Sr=Hn.length;if(Jn[nr-1]&&!isNaN(Jn[nr-1].x)&&(Un=[or.x-Jn[nr-1].x,or.y-Jn[nr-1].y],Sr>0)){for(;Sr>=0;Sr--)if(Hn[Sr-1].close!==!0&&Hn[Sr-1].begin!==!0){Hn[Sr-1].deltas.push(Un),Hn[Sr-1].abs.push(or);break}}break;case"bct":Un=[or.x1-Jn[nr-1].x,or.y1-Jn[nr-1].y,or.x2-Jn[nr-1].x,or.y2-Jn[nr-1].y,or.x-Jn[nr-1].x,or.y-Jn[nr-1].y],Hn[Hn.length-1].deltas.push(Un);break;case"qct":var kr=Jn[nr-1].x+2/3*(or.x1-Jn[nr-1].x),Vr=Jn[nr-1].y+2/3*(or.y1-Jn[nr-1].y),Lr=or.x+2/3*(or.x1-or.x),Qr=or.y+2/3*(or.y1-or.y),wr=or.x,Yn=or.y;Un=[kr-Jn[nr-1].x,Vr-Jn[nr-1].y,Lr-Jn[nr-1].x,Qr-Jn[nr-1].y,wr-Jn[nr-1].x,Yn-Jn[nr-1].y],Hn[Hn.length-1].deltas.push(Un);break;case"arc":Hn.push({deltas:[],abs:[],arc:!0}),Array.isArray(Hn[Hn.length-1].abs)&&Hn[Hn.length-1].abs.push(or)}}zn=vn?null:Tn==="stroke"?"stroke":"fill";for(var gi=!1,ui=0;ui<Hn.length;ui++)if(Hn[ui].arc)for(var Dr=Hn[ui].abs,$r=0;$r<Dr.length;$r++){var Kr=Dr[$r];Kr.type==="arc"?Ke.call(this,Kr.x,Kr.y,Kr.radius,Kr.startAngle,Kr.endAngle,Kr.counterclockwise,void 0,vn,!gi):mn.call(this,Kr.x,Kr.y),gi=!0}else if(Hn[ui].close===!0)this.pdf.internal.out("h"),gi=!1;else if(Hn[ui].begin!==!0){var Fr=Hn[ui].start.x,li=Hn[ui].start.y;wn.call(this,Hn[ui].deltas,Fr,li),gi=!0}zn&&Ye.call(this,zn),vn&&pn.call(this)}},Je=function(Tn){var vn=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Un=vn*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Tn-Un;case"top":return Tn+vn-Un;case"hanging":return Tn+vn-2*Un;case"middle":return Tn+vn/2-Un;case"ideographic":return Tn;case"alphabetic":default:return Tn}},Qe=function(Tn){return Tn+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};Se.prototype.createLinearGradient=function(){var Tn=function(){};return Tn.colorStops=[],Tn.addColorStop=function(vn,Un){this.colorStops.push([vn,Un])},Tn.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Tn.isCanvasGradient=!0,Tn},Se.prototype.createPattern=function(){return this.createLinearGradient()},Se.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Ke=function(Tn,vn,Un,zn,Hn,Jn,nr,or,Sr){for(var kr=xn.call(this,Un,zn,Hn,Jn),Vr=0;Vr<kr.length;Vr++){var Lr=kr[Vr];Vr===0&&(Sr?un.call(this,Lr.x1+Tn,Lr.y1+vn):mn.call(this,Lr.x1+Tn,Lr.y1+vn)),Pn.call(this,Tn,vn,Lr.x2,Lr.y2,Lr.x3,Lr.y3,Lr.x4,Lr.y4)}or?pn.call(this):Ye.call(this,nr)},Ye=function(Tn){switch(Tn){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},pn=function(){this.pdf.clip(),this.pdf.discardPath()},un=function(Tn,vn){this.pdf.internal.out(t(Tn)+" "+_e(vn)+" m")},fn=function(Tn){var vn;switch(Tn.align){case"right":case"end":vn="right";break;case"center":vn="center";break;case"left":case"start":default:vn="left"}var Un=this.pdf.getTextDimensions(Tn.text),zn=Je.call(this,Tn.y),Hn=Qe.call(this,zn)-Un.h,Jn=this.ctx.transform.applyToPoint(new xe(Tn.x,zn)),nr=this.ctx.transform.decompose(),or=new Re;or=(or=(or=or.multiply(nr.translate)).multiply(nr.skew)).multiply(nr.scale);for(var Sr,kr,Vr,Lr=this.ctx.transform.applyToRectangle(new Pe(Tn.x,zn,Un.w,Un.h)),Qr=or.applyToRectangle(new Pe(Tn.x,Hn,Un.w,Un.h)),wr=Ve.call(this,Qr),Yn=[],gi=0;gi<wr.length;gi+=1)Yn.indexOf(wr[gi])===-1&&Yn.push(wr[gi]);if(qe(Yn),this.autoPaging)for(var ui=Yn[0],Dr=Yn[Yn.length-1],$r=ui;$r<Dr+1;$r++){this.pdf.setPage($r);var Kr=$r===1?this.posY+this.margin[0]:this.margin[0],Fr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],li=this.pdf.internal.pageSize.height-this.margin[2],yi=li-this.margin[0],ei=this.pdf.internal.pageSize.width-this.margin[1],fr=ei-this.margin[3],Pr=$r===1?0:Fr+($r-2)*yi;if(this.ctx.clip_path.length!==0){var ti=this.path;Sr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Be(Sr,this.posX+this.margin[3],-1*Pr+Kr),Xe.call(this,"fill",!0),this.path=ti}var Gr=Be([JSON.parse(JSON.stringify(Qr))],this.posX+this.margin[3],-Pr+Kr+this.ctx.prevPageLastElemOffset)[0];Tn.scale>=.01&&(kr=this.pdf.internal.getFontSize(),this.pdf.setFontSize(kr*Tn.scale),Vr=this.lineWidth,this.lineWidth=Vr*Tn.scale);var oi=this.autoPaging!=="text";if(oi||Gr.y+Gr.h<=li){if(oi||Gr.y>=Kr&&Gr.x<=ei){var Wr=oi?Tn.text:this.pdf.splitTextToSize(Tn.text,Tn.maxWidth||ei-Gr.x)[0],Ci=Be([JSON.parse(JSON.stringify(Lr))],this.posX+this.margin[3],-Pr+Kr+this.ctx.prevPageLastElemOffset)[0],xi=oi&&($r>ui||$r<Dr)&&Fe.call(this);xi&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],fr,yi,null).clip().discardPath()),this.pdf.text(Wr,Ci.x,Ci.y,{angle:Tn.angle,align:vn,renderingMode:Tn.renderingMode}),xi&&this.pdf.restoreGraphicsState()}}else Gr.y<li&&(this.ctx.prevPageLastElemOffset+=li-Gr.y);Tn.scale>=.01&&(this.pdf.setFontSize(kr),this.lineWidth=Vr)}else Tn.scale>=.01&&(kr=this.pdf.internal.getFontSize(),this.pdf.setFontSize(kr*Tn.scale),Vr=this.lineWidth,this.lineWidth=Vr*Tn.scale),this.pdf.text(Tn.text,Jn.x+this.posX,Jn.y+this.posY,{angle:Tn.angle,align:vn,renderingMode:Tn.renderingMode,maxWidth:Tn.maxWidth}),Tn.scale>=.01&&(this.pdf.setFontSize(kr),this.lineWidth=Vr)},mn=function(Tn,vn,Un,zn){Un=Un||0,zn=zn||0,this.pdf.internal.out(t(Tn+Un)+" "+_e(vn+zn)+" l")},wn=function(Tn,vn,Un){return this.pdf.lines(Tn,vn,Un,null,null)},Pn=function(Tn,vn,Un,zn,Hn,Jn,nr,or){this.pdf.internal.out([e(Te(Un+Tn)),e(Ee(zn+vn)),e(Te(Hn+Tn)),e(Ee(Jn+vn)),e(Te(nr+Tn)),e(Ee(or+vn)),"c"].join(" "))},xn=function(Tn,vn,Un,zn){for(var Hn=2*Math.PI,Jn=Math.PI/2;vn>Un;)vn-=Hn;var nr=Math.abs(Un-vn);nr<Hn&&zn&&(nr=Hn-nr);for(var or=[],Sr=zn?-1:1,kr=vn;nr>1e-5;){var Vr=kr+Sr*Math.min(nr,Jn);or.push(In.call(this,Tn,kr,Vr)),nr-=Math.abs(Vr-kr),kr=Vr}return or},In=function(Tn,vn,Un){var zn=(Un-vn)/2,Hn=Tn*Math.cos(zn),Jn=Tn*Math.sin(zn),nr=Hn,or=-Jn,Sr=nr*nr+or*or,kr=Sr+nr*Hn+or*Jn,Vr=4/3*(Math.sqrt(2*Sr*kr)-kr)/(nr*Jn-or*Hn),Lr=nr-Vr*or,Qr=or+Vr*nr,wr=Lr,Yn=-Qr,gi=zn+vn,ui=Math.cos(gi),Dr=Math.sin(gi);return{x1:Tn*Math.cos(vn),y1:Tn*Math.sin(vn),x2:Lr*ui-Qr*Dr,y2:Lr*Dr+Qr*ui,x3:wr*ui-Yn*Dr,y3:wr*Dr+Yn*ui,x4:Tn*Math.cos(Un),y4:Tn*Math.sin(Un)}},Ln=function(Tn){return 180*Tn/Math.PI},$n=function(Tn,vn,Un,zn,Hn,Jn){var nr=Tn+.5*(Un-Tn),or=vn+.5*(zn-vn),Sr=Hn+.5*(Un-Hn),kr=Jn+.5*(zn-Jn),Vr=Math.min(Tn,Hn,nr,Sr),Lr=Math.max(Tn,Hn,nr,Sr),Qr=Math.min(vn,Jn,or,kr),wr=Math.max(vn,Jn,or,kr);return new Pe(Vr,Qr,Lr-Vr,wr-Qr)},Sn=function(Tn,vn,Un,zn,Hn,Jn,nr,or){var Sr,kr,Vr,Lr,Qr,wr,Yn,gi,ui,Dr,$r,Kr,Fr,li,yi=Un-Tn,ei=zn-vn,fr=Hn-Un,Pr=Jn-zn,ti=nr-Hn,Gr=or-Jn;for(kr=0;kr<41;kr++)ui=(Yn=(Vr=Tn+(Sr=kr/40)*yi)+Sr*((Qr=Un+Sr*fr)-Vr))+Sr*(Qr+Sr*(Hn+Sr*ti-Qr)-Yn),Dr=(gi=(Lr=vn+Sr*ei)+Sr*((wr=zn+Sr*Pr)-Lr))+Sr*(wr+Sr*(Jn+Sr*Gr-wr)-gi),kr==0?($r=ui,Kr=Dr,Fr=ui,li=Dr):($r=Math.min($r,ui),Kr=Math.min(Kr,Dr),Fr=Math.max(Fr,ui),li=Math.max(li,Dr));return new Pe(Math.round($r),Math.round(Kr),Math.round(Fr-$r),Math.round(li-Kr))},Bn=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Tn,vn,Un=(Tn=this.ctx.lineDash,vn=this.ctx.lineDashOffset,JSON.stringify({lineDash:Tn,lineDashOffset:vn}));this.prevLineDash!==Un&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Un)}}})(E.API),function(r){var e=function(Ee){var xe,Pe,Re,ke,Ce,Se,Ae,Ie,Me,Fe;for(Pe=[],Re=0,ke=(Ee+=xe="\0\0\0\0".slice(Ee.length%4||4)).length;ke>Re;Re+=4)(Ce=(Ee.charCodeAt(Re)<<24)+(Ee.charCodeAt(Re+1)<<16)+(Ee.charCodeAt(Re+2)<<8)+Ee.charCodeAt(Re+3))!==0?(Se=(Ce=((Ce=((Ce=((Ce=(Ce-(Fe=Ce%85))/85)-(Me=Ce%85))/85)-(Ie=Ce%85))/85)-(Ae=Ce%85))/85)%85,Pe.push(Se+33,Ae+33,Ie+33,Me+33,Fe+33)):Pe.push(122);return function(Ve,je){for(var Be=je;Be>0;Be--)Ve.pop()}(Pe,xe.length),String.fromCharCode.apply(String,Pe)+"~>"},t=function(Ee){var xe,Pe,Re,ke,Ce,Se=String,Ae="length",Ie=255,Me="charCodeAt",Fe="slice",Ve="replace";for(Ee[Fe](-2),Ee=Ee[Fe](0,-2)[Ve](/\s/g,"")[Ve]("z","!!!!!"),Re=[],ke=0,Ce=(Ee+=xe="uuuuu"[Fe](Ee[Ae]%5||5))[Ae];Ce>ke;ke+=5)Pe=52200625*(Ee[Me](ke)-33)+614125*(Ee[Me](ke+1)-33)+7225*(Ee[Me](ke+2)-33)+85*(Ee[Me](ke+3)-33)+(Ee[Me](ke+4)-33),Re.push(Ie&Pe>>24,Ie&Pe>>16,Ie&Pe>>8,Ie&Pe);return function(je,Be){for(var qe=Be;qe>0;qe--)je.pop()}(Re,xe[Ae]),Se.fromCharCode.apply(Se,Re)},_e=function(Ee){var xe=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((Ee=Ee.replace(/\s/g,"")).indexOf(">")!==-1&&(Ee=Ee.substr(0,Ee.indexOf(">"))),Ee.length%2&&(Ee+="0"),xe.test(Ee)===!1)return"";for(var Pe="",Re=0;Re<Ee.length;Re+=2)Pe+=String.fromCharCode("0x"+(Ee[Re]+Ee[Re+1]));return Pe},Te=function(Ee){for(var xe=new Uint8Array(Ee.length),Pe=Ee.length;Pe--;)xe[Pe]=Ee.charCodeAt(Pe);return Ee=(xe=zlibSync(xe)).reduce(function(Re,ke){return Re+String.fromCharCode(ke)},"")};r.processDataByFilters=function(Ee,xe){var Pe=0,Re=Ee||"",ke=[];for(typeof(xe=xe||[])=="string"&&(xe=[xe]),Pe=0;Pe<xe.length;Pe+=1)switch(xe[Pe]){case"ASCII85Decode":case"/ASCII85Decode":Re=t(Re),ke.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":Re=e(Re),ke.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":Re=_e(Re),ke.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":Re=Re.split("").map(function(Ce){return("0"+Ce.charCodeAt().toString(16)).slice(-2)}).join("")+">",ke.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":Re=Te(Re),ke.push("/FlateDecode");break;default:throw new Error('The filter: "'+xe[Pe]+'" is not implemented')}return{data:Re,reverseChain:ke.reverse().join(" ")}}}(E.API),function(r){r.loadFile=function(e,t,_e){return function(Te,Ee,xe){Ee=Ee!==!1,xe=typeof xe=="function"?xe:function(){};var Pe=void 0;try{Pe=function(Re,ke,Ce){var Se=new XMLHttpRequest,Ae=0,Ie=function(Me){var Fe=Me.length,Ve=[],je=String.fromCharCode;for(Ae=0;Ae<Fe;Ae+=1)Ve.push(je(255&Me.charCodeAt(Ae)));return Ve.join("")};if(Se.open("GET",Re,!ke),Se.overrideMimeType("text/plain; charset=x-user-defined"),ke===!1&&(Se.onload=function(){Se.status===200?Ce(Ie(this.responseText)):Ce(void 0)}),Se.send(null),ke&&Se.status===200)return Ie(Se.responseText)}(Te,Ee,xe)}catch{}return Pe}(e,t,_e)},r.loadImageFile=r.loadFile}(E.API),function(r){function e(){return(n.html2canvas?Promise.resolve(n.html2canvas):__vitePreload(()=>import("./html2canvas.esm-BfxBtG_O.js"),[])).catch(function(xe){return Promise.reject(new Error("Could not load html2canvas: "+xe))}).then(function(xe){return xe.default?xe.default:xe})}function t(){return(n.DOMPurify?Promise.resolve(n.DOMPurify):__vitePreload(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(xe){return Promise.reject(new Error("Could not load dompurify: "+xe))}).then(function(xe){return xe.default?xe.default:xe})}var _e=function(xe){var Pe=_typeof(xe);return Pe==="undefined"?"undefined":Pe==="string"||xe instanceof String?"string":Pe==="number"||xe instanceof Number?"number":Pe==="function"||xe instanceof Function?"function":xe&&xe.constructor===Array?"array":xe&&xe.nodeType===1?"element":Pe==="object"?"object":"unknown"},Te=function(xe,Pe){var Re=document.createElement(xe);for(var ke in Pe.className&&(Re.className=Pe.className),Pe.innerHTML&&Pe.dompurify&&(Re.innerHTML=Pe.dompurify.sanitize(Pe.innerHTML)),Pe.style)Re.style[ke]=Pe.style[ke];return Re},Ee=function xe(Pe){var Re=Object.assign(xe.convert(Promise.resolve()),JSON.parse(JSON.stringify(xe.template))),ke=xe.convert(Promise.resolve(),Re);return ke=(ke=ke.setProgress(1,xe,1,[xe])).set(Pe)};(Ee.prototype=Object.create(Promise.prototype)).constructor=Ee,Ee.convert=function(xe,Pe){return xe.__proto__=Pe||Ee.prototype,xe},Ee.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},Ee.prototype.from=function(xe,Pe){return this.then(function(){switch(Pe=Pe||function(Re){switch(_e(Re)){case"string":return"string";case"element":return Re.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(xe)){case"string":return this.then(t).then(function(Re){return this.set({src:Te("div",{innerHTML:xe,dompurify:Re})})});case"element":return this.set({src:xe});case"canvas":return this.set({canvas:xe});case"img":return this.set({img:xe});default:return this.error("Unknown source type.")}})},Ee.prototype.to=function(xe){switch(xe){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},Ee.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var xe={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},Pe=function Re(ke,Ce){for(var Se=ke.nodeType===3?document.createTextNode(ke.nodeValue):ke.cloneNode(!1),Ae=ke.firstChild;Ae;Ae=Ae.nextSibling)Ce!==!0&&Ae.nodeType===1&&Ae.nodeName==="SCRIPT"||Se.appendChild(Re(Ae,Ce));return ke.nodeType===1&&(ke.nodeName==="CANVAS"?(Se.width=ke.width,Se.height=ke.height,Se.getContext("2d").drawImage(ke,0,0)):ke.nodeName!=="TEXTAREA"&&ke.nodeName!=="SELECT"||(Se.value=ke.value),Se.addEventListener("load",function(){Se.scrollTop=ke.scrollTop,Se.scrollLeft=ke.scrollLeft},!0)),Se}(this.prop.src,this.opt.html2canvas.javascriptEnabled);Pe.tagName==="BODY"&&(xe.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=Te("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=Te("div",{className:"html2pdf__container",style:xe}),this.prop.container.appendChild(Pe),this.prop.container.firstChild.appendChild(Te("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},Ee.prototype.toCanvas=function(){var xe=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(xe).then(e).then(function(Pe){var Re=Object.assign({},this.opt.html2canvas);return delete Re.onrendered,Pe(this.prop.container,Re)}).then(function(Pe){(this.opt.html2canvas.onrendered||function(){})(Pe),this.prop.canvas=Pe,document.body.removeChild(this.prop.overlay)})},Ee.prototype.toContext2d=function(){var xe=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(xe).then(e).then(function(Pe){var Re=this.opt.jsPDF,ke=this.opt.fontFaces,Ce=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,Se=Object.assign({async:!0,allowTaint:!0,scale:Ce,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete Se.onrendered,Re.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,Re.context2d.posX=this.opt.x,Re.context2d.posY=this.opt.y,Re.context2d.margin=this.opt.margin,Re.context2d.fontFaces=ke,ke)for(var Ae=0;Ae<ke.length;++Ae){var Ie=ke[Ae],Me=Ie.src.find(function(Fe){return Fe.format==="truetype"});Me&&Re.addFont(Me.url,Ie.ref.name,Ie.ref.style)}return Se.windowHeight=Se.windowHeight||0,Se.windowHeight=Se.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):Se.windowHeight,Re.context2d.save(!0),Pe(this.prop.container,Se)}).then(function(Pe){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(Pe),this.prop.canvas=Pe,document.body.removeChild(this.prop.overlay)})},Ee.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var xe=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=xe})},Ee.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},Ee.prototype.output=function(xe,Pe,Re){return(Re=Re||"pdf").toLowerCase()==="img"||Re.toLowerCase()==="image"?this.outputImg(xe,Pe):this.outputPdf(xe,Pe)},Ee.prototype.outputPdf=function(xe,Pe){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(xe,Pe)})},Ee.prototype.outputImg=function(xe){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(xe){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+xe+'" is not supported.'}})},Ee.prototype.save=function(xe){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(xe?{filename:xe}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},Ee.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},Ee.prototype.set=function(xe){if(_e(xe)!=="object")return this;var Pe=Object.keys(xe||{}).map(function(Re){if(Re in Ee.template.prop)return function(){this.prop[Re]=xe[Re]};switch(Re){case"margin":return this.setMargin.bind(this,xe.margin);case"jsPDF":return function(){return this.opt.jsPDF=xe.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,xe.pageSize);default:return function(){this.opt[Re]=xe[Re]}}},this);return this.then(function(){return this.thenList(Pe)})},Ee.prototype.get=function(xe,Pe){return this.then(function(){var Re=xe in Ee.template.prop?this.prop[xe]:this.opt[xe];return Pe?Pe(Re):Re})},Ee.prototype.setMargin=function(xe){return this.then(function(){switch(_e(xe)){case"number":xe=[xe,xe,xe,xe];case"array":if(xe.length===2&&(xe=[xe[0],xe[1],xe[0],xe[1]]),xe.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=xe}).then(this.setPageSize)},Ee.prototype.setPageSize=function(xe){function Pe(Re,ke){return Math.floor(Re*ke/72*96)}return this.then(function(){(xe=xe||E.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(xe.inner={width:xe.width-this.opt.margin[1]-this.opt.margin[3],height:xe.height-this.opt.margin[0]-this.opt.margin[2]},xe.inner.px={width:Pe(xe.inner.width,xe.k),height:Pe(xe.inner.height,xe.k)},xe.inner.ratio=xe.inner.height/xe.inner.width),this.prop.pageSize=xe})},Ee.prototype.setProgress=function(xe,Pe,Re,ke){return xe!=null&&(this.progress.val=xe),Pe!=null&&(this.progress.state=Pe),Re!=null&&(this.progress.n=Re),ke!=null&&(this.progress.stack=ke),this.progress.ratio=this.progress.val/this.progress.state,this},Ee.prototype.updateProgress=function(xe,Pe,Re,ke){return this.setProgress(xe?this.progress.val+xe:null,Pe||null,Re?this.progress.n+Re:null,ke?this.progress.stack.concat(ke):null)},Ee.prototype.then=function(xe,Pe){var Re=this;return this.thenCore(xe,Pe,function(ke,Ce){return Re.updateProgress(null,null,1,[ke]),Promise.prototype.then.call(this,function(Se){return Re.updateProgress(null,ke),Se}).then(ke,Ce).then(function(Se){return Re.updateProgress(1),Se})})},Ee.prototype.thenCore=function(xe,Pe,Re){Re=Re||Promise.prototype.then,xe&&(xe=xe.bind(this)),Pe&&(Pe=Pe.bind(this));var ke=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:Ee.convert(Object.assign({},this),Promise.prototype),Ce=Re.call(ke,xe,Pe);return Ee.convert(Ce,this.__proto__)},Ee.prototype.thenExternal=function(xe,Pe){return Promise.prototype.then.call(this,xe,Pe)},Ee.prototype.thenList=function(xe){var Pe=this;return xe.forEach(function(Re){Pe=Pe.thenCore(Re)}),Pe},Ee.prototype.catch=function(xe){xe&&(xe=xe.bind(this));var Pe=Promise.prototype.catch.call(this,xe);return Ee.convert(Pe,this)},Ee.prototype.catchExternal=function(xe){return Promise.prototype.catch.call(this,xe)},Ee.prototype.error=function(xe){return this.then(function(){throw new Error(xe)})},Ee.prototype.using=Ee.prototype.set,Ee.prototype.saveAs=Ee.prototype.save,Ee.prototype.export=Ee.prototype.output,Ee.prototype.run=Ee.prototype.then,E.getPageSize=function(xe,Pe,Re){if(_typeof(xe)==="object"){var ke=xe;xe=ke.orientation,Pe=ke.unit||Pe,Re=ke.format||Re}Pe=Pe||"mm",Re=Re||"a4",xe=(""+(xe||"P")).toLowerCase();var Ce,Se=(""+Re).toLowerCase(),Ae={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(Pe){case"pt":Ce=1;break;case"mm":Ce=72/25.4;break;case"cm":Ce=72/2.54;break;case"in":Ce=72;break;case"px":Ce=.75;break;case"pc":case"em":Ce=12;break;case"ex":Ce=6;break;default:throw"Invalid unit: "+Pe}var Ie,Me=0,Fe=0;if(Ae.hasOwnProperty(Se))Me=Ae[Se][1]/Ce,Fe=Ae[Se][0]/Ce;else try{Me=Re[1],Fe=Re[0]}catch{throw new Error("Invalid format: "+Re)}if(xe==="p"||xe==="portrait")xe="p",Fe>Me&&(Ie=Fe,Fe=Me,Me=Ie);else{if(xe!=="l"&&xe!=="landscape")throw"Invalid orientation: "+xe;xe="l",Me>Fe&&(Ie=Fe,Fe=Me,Me=Ie)}return{width:Fe,height:Me,unit:Pe,k:Ce,orientation:xe}},r.html=function(xe,Pe){(Pe=Pe||{}).callback=Pe.callback||function(){},Pe.html2canvas=Pe.html2canvas||{},Pe.html2canvas.canvas=Pe.html2canvas.canvas||this.canvas,Pe.jsPDF=Pe.jsPDF||this,Pe.fontFaces=Pe.fontFaces?Pe.fontFaces.map(jt):null;var Re=new Ee(Pe);return Pe.worker?Re:Re.from(xe).doCallback()}}(E.API),E.API.addJS=function(r){return Ht=r,this.internal.events.subscribe("postPutResources",function(){Ut=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ut+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),zt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ht+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ut!==void 0&&zt!==void 0&&this.internal.out("/Names <</JavaScript "+Ut+" 0 R>>")}),this},function(r){var e;r.events.push(["postPutResources",function(){var t=this,_e=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var Te=t.outline.render().split(/\r\n/),Ee=0;Ee<Te.length;Ee++){var xe=Te[Ee],Pe=_e.exec(xe);if(Pe!=null){var Re=Pe[1];t.internal.newObjectDeferredBegin(Re,!1)}t.internal.write(xe)}if(this.outline.createNamedDestinations){var ke=this.internal.pages.length,Ce=[];for(Ee=0;Ee<ke;Ee++){var Se=t.internal.newObject();Ce.push(Se);var Ae=t.internal.getPageInfo(Ee+1);t.internal.write("<< /D["+Ae.objId+" 0 R /XYZ null null null]>> endobj")}var Ie=t.internal.newObject();for(t.internal.write("<< /Names [ "),Ee=0;Ee<Ce.length;Ee++)t.internal.write("(page_"+(Ee+1)+")"+Ce[Ee]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+Ie+" 0 R"),t.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),r.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(_e,Te,Ee){var xe={title:Te,options:Ee,children:[]};return _e==null&&(_e=this.root),_e.children.push(xe),xe},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(_e){_e.id=t.internal.newObjectDeferred();for(var Te=0;Te<_e.children.length;Te++)this.genIds_r(_e.children[Te])},t.outline.renderRoot=function(_e){this.objStart(_e),this.line("/Type /Outlines"),_e.children.length>0&&(this.line("/First "+this.makeRef(_e.children[0])),this.line("/Last "+this.makeRef(_e.children[_e.children.length-1]))),this.line("/Count "+this.count_r({count:0},_e)),this.objEnd()},t.outline.renderItems=function(_e){for(var Te=this.ctx.pdf.internal.getVerticalCoordinateString,Ee=0;Ee<_e.children.length;Ee++){var xe=_e.children[Ee];this.objStart(xe),this.line("/Title "+this.makeString(xe.title)),this.line("/Parent "+this.makeRef(_e)),Ee>0&&this.line("/Prev "+this.makeRef(_e.children[Ee-1])),Ee<_e.children.length-1&&this.line("/Next "+this.makeRef(_e.children[Ee+1])),xe.children.length>0&&(this.line("/First "+this.makeRef(xe.children[0])),this.line("/Last "+this.makeRef(xe.children[xe.children.length-1])));var Pe=this.count=this.count_r({count:0},xe);if(Pe>0&&this.line("/Count "+Pe),xe.options&&xe.options.pageNumber){var Re=t.internal.getPageInfo(xe.options.pageNumber);this.line("/Dest ["+Re.objId+" 0 R /XYZ 0 "+Te(0)+" 0]")}this.objEnd()}for(var ke=0;ke<_e.children.length;ke++)this.renderItems(_e.children[ke])},t.outline.line=function(_e){this.ctx.val+=_e+`\r
`},t.outline.makeRef=function(_e){return _e.id+" 0 R"},t.outline.makeString=function(_e){return"("+t.internal.pdfEscape(_e)+")"},t.outline.objStart=function(_e){this.ctx.val+=`\r
`+_e.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(_e,Te){for(var Ee=0;Ee<Te.children.length;Ee++)_e.count++,this.count_r(_e,Te.children[Ee]);return _e.count}}])}(E.API),function(r){var e=[192,193,194,195,196,197,198,199];r.processJPEG=function(t,_e,Te,Ee,xe,Pe){var Re,ke=this.decode.DCT_DECODE,Ce=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=xe||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(Re=function(Se){for(var Ae,Ie=256*Se.charCodeAt(4)+Se.charCodeAt(5),Me=Se.length,Fe={width:0,height:0,numcomponents:1},Ve=4;Ve<Me;Ve+=2){if(Ve+=Ie,e.indexOf(Se.charCodeAt(Ve+1))!==-1){Ae=256*Se.charCodeAt(Ve+5)+Se.charCodeAt(Ve+6),Fe={width:256*Se.charCodeAt(Ve+7)+Se.charCodeAt(Ve+8),height:Ae,numcomponents:Se.charCodeAt(Ve+9)};break}Ie=256*Se.charCodeAt(Ve+2)+Se.charCodeAt(Ve+3)}return Fe}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:Pe=this.color_spaces.DEVICE_GRAY;break;case 4:Pe=this.color_spaces.DEVICE_CMYK;break;case 3:Pe=this.color_spaces.DEVICE_RGB}Ce={data:t,width:Re.width,height:Re.height,colorSpace:Pe,bitsPerComponent:8,filter:ke,index:_e,alias:Te}}return Ce}}(E.API);var Vt,Gt,Yt,Jt,Xt,Kt=function(){var r,e,t;function _e(Ee){var xe,Pe,Re,ke,Ce,Se,Ae,Ie,Me,Fe,Ve,je,Be,qe;for(this.data=Ee,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},Se=null;;){switch(xe=this.readUInt32(),Me=(function(){var He,Xe;for(Xe=[],He=0;He<4;++He)Xe.push(String.fromCharCode(this.data[this.pos++]));return Xe}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(xe);break;case"fcTL":Se&&this.animation.frames.push(Se),this.pos+=4,Se={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},Ce=this.readUInt16(),ke=this.readUInt16()||100,Se.delay=1e3*Ce/ke,Se.disposeOp=this.data[this.pos++],Se.blendOp=this.data[this.pos++],Se.data=[];break;case"IDAT":case"fdAT":for(Me==="fdAT"&&(this.pos+=4,xe-=4),Ee=Se?.data||this.imgData,je=0;0<=xe?je<xe:je>xe;0<=xe?++je:--je)Ee.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(Re=this.palette.length/3,this.transparency.indexed=this.read(xe),this.transparency.indexed.length>Re)throw new Error("More transparent colors than palette size");if((Fe=Re-this.transparency.indexed.length)>0)for(Be=0;0<=Fe?Be<Fe:Be>Fe;0<=Fe?++Be:--Be)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(xe)[0];break;case 2:this.transparency.rgb=this.read(xe)}break;case"tEXt":Ae=(Ve=this.read(xe)).indexOf(0),Ie=String.fromCharCode.apply(String,Ve.slice(0,Ae)),this.text[Ie]=String.fromCharCode.apply(String,Ve.slice(Ae+1));break;case"IEND":return Se&&this.animation.frames.push(Se),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(qe=this.colorType)===4||qe===6,Pe=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*Pe,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=xe}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}_e.prototype.read=function(Ee){var xe,Pe;for(Pe=[],xe=0;0<=Ee?xe<Ee:xe>Ee;0<=Ee?++xe:--xe)Pe.push(this.data[this.pos++]);return Pe},_e.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},_e.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},_e.prototype.decodePixels=function(Ee){var xe=this.pixelBitlength/8,Pe=new Uint8Array(this.width*this.height*xe),Re=0,ke=this;if(Ee==null&&(Ee=this.imgData),Ee.length===0)return new Uint8Array(0);function Ce(Se,Ae,Ie,Me){var Fe,Ve,je,Be,qe,He,Xe,Je,Qe,Ke,Ye,pn,un,fn,mn,wn,Pn,xn,In,Ln,$n,Sn=Math.ceil((ke.width-Se)/Ie),Bn=Math.ceil((ke.height-Ae)/Me),Tn=ke.width==Sn&&ke.height==Bn;for(fn=xe*Sn,pn=Tn?Pe:new Uint8Array(fn*Bn),He=Ee.length,un=0,Ve=0;un<Bn&&Re<He;){switch(Ee[Re++]){case 0:for(Be=Pn=0;Pn<fn;Be=Pn+=1)pn[Ve++]=Ee[Re++];break;case 1:for(Be=xn=0;xn<fn;Be=xn+=1)Fe=Ee[Re++],qe=Be<xe?0:pn[Ve-xe],pn[Ve++]=(Fe+qe)%256;break;case 2:for(Be=In=0;In<fn;Be=In+=1)Fe=Ee[Re++],je=(Be-Be%xe)/xe,mn=un&&pn[(un-1)*fn+je*xe+Be%xe],pn[Ve++]=(mn+Fe)%256;break;case 3:for(Be=Ln=0;Ln<fn;Be=Ln+=1)Fe=Ee[Re++],je=(Be-Be%xe)/xe,qe=Be<xe?0:pn[Ve-xe],mn=un&&pn[(un-1)*fn+je*xe+Be%xe],pn[Ve++]=(Fe+Math.floor((qe+mn)/2))%256;break;case 4:for(Be=$n=0;$n<fn;Be=$n+=1)Fe=Ee[Re++],je=(Be-Be%xe)/xe,qe=Be<xe?0:pn[Ve-xe],un===0?mn=wn=0:(mn=pn[(un-1)*fn+je*xe+Be%xe],wn=je&&pn[(un-1)*fn+(je-1)*xe+Be%xe]),Xe=qe+mn-wn,Je=Math.abs(Xe-qe),Ke=Math.abs(Xe-mn),Ye=Math.abs(Xe-wn),Qe=Je<=Ke&&Je<=Ye?qe:Ke<=Ye?mn:wn,pn[Ve++]=(Fe+Qe)%256;break;default:throw new Error("Invalid filter algorithm: "+Ee[Re-1])}if(!Tn){var vn=((Ae+un*Me)*ke.width+Se)*xe,Un=un*fn;for(Be=0;Be<Sn;Be+=1){for(var zn=0;zn<xe;zn+=1)Pe[vn++]=pn[Un++];vn+=(Ie-1)*xe}}un++}}return Ee=unzlibSync(Ee),ke.interlaceMethod==1?(Ce(0,0,8,8),Ce(4,0,8,8),Ce(0,4,4,8),Ce(2,0,4,4),Ce(0,2,2,4),Ce(1,0,2,2),Ce(0,1,1,2)):Ce(0,0,1,1),Pe},_e.prototype.decodePalette=function(){var Ee,xe,Pe,Re,ke,Ce,Se,Ae,Ie;for(Pe=this.palette,Ce=this.transparency.indexed||[],ke=new Uint8Array((Ce.length||0)+Pe.length),Re=0,Ee=0,xe=Se=0,Ae=Pe.length;Se<Ae;xe=Se+=3)ke[Re++]=Pe[xe],ke[Re++]=Pe[xe+1],ke[Re++]=Pe[xe+2],ke[Re++]=(Ie=Ce[Ee++])!=null?Ie:255;return ke},_e.prototype.copyToImageData=function(Ee,xe){var Pe,Re,ke,Ce,Se,Ae,Ie,Me,Fe,Ve,je;if(Re=this.colors,Fe=null,Pe=this.hasAlphaChannel,this.palette.length&&(Fe=(je=this._decodedPalette)!=null?je:this._decodedPalette=this.decodePalette(),Re=4,Pe=!0),Me=(ke=Ee.data||Ee).length,Se=Fe||xe,Ce=Ae=0,Re===1)for(;Ce<Me;)Ie=Fe?4*xe[Ce/4]:Ae,Ve=Se[Ie++],ke[Ce++]=Ve,ke[Ce++]=Ve,ke[Ce++]=Ve,ke[Ce++]=Pe?Se[Ie++]:255,Ae=Ie;else for(;Ce<Me;)Ie=Fe?4*xe[Ce/4]:Ae,ke[Ce++]=Se[Ie++],ke[Ce++]=Se[Ie++],ke[Ce++]=Se[Ie++],ke[Ce++]=Pe?Se[Ie++]:255,Ae=Ie},_e.prototype.decode=function(){var Ee;return Ee=new Uint8Array(this.width*this.height*4),this.copyToImageData(Ee,this.decodePixels()),Ee};var Te=function(){if(Object.prototype.toString.call(n)==="[object Window]"){try{e=n.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return Te(),r=function(Ee){var xe;if(Te()===!0)return t.width=Ee.width,t.height=Ee.height,t.clearRect(0,0,Ee.width,Ee.height),t.putImageData(Ee,0,0),(xe=new Image).src=e.toDataURL(),xe;throw new Error("This method requires a Browser with Canvas-capability.")},_e.prototype.decodeFrames=function(Ee){var xe,Pe,Re,ke,Ce,Se,Ae,Ie;if(this.animation){for(Ie=[],Pe=Ce=0,Se=(Ae=this.animation.frames).length;Ce<Se;Pe=++Ce)xe=Ae[Pe],Re=Ee.createImageData(xe.width,xe.height),ke=this.decodePixels(new Uint8Array(xe.data)),this.copyToImageData(Re,ke),xe.imageData=Re,Ie.push(xe.image=r(Re));return Ie}},_e.prototype.renderFrame=function(Ee,xe){var Pe,Re,ke;return Pe=(Re=this.animation.frames)[xe],ke=Re[xe-1],xe===0&&Ee.clearRect(0,0,this.width,this.height),ke?.disposeOp===1?Ee.clearRect(ke.xOffset,ke.yOffset,ke.width,ke.height):ke?.disposeOp===2&&Ee.putImageData(ke.imageData,ke.xOffset,ke.yOffset),Pe.blendOp===0&&Ee.clearRect(Pe.xOffset,Pe.yOffset,Pe.width,Pe.height),Ee.drawImage(Pe.image,Pe.xOffset,Pe.yOffset)},_e.prototype.animate=function(Ee){var xe,Pe,Re,ke,Ce,Se,Ae=this;return Pe=0,Se=this.animation,ke=Se.numFrames,Re=Se.frames,Ce=Se.numPlays,(xe=function(){var Ie,Me;if(Ie=Pe++%ke,Me=Re[Ie],Ae.renderFrame(Ee,Ie),ke>1&&Pe/ke<Ce)return Ae.animation._timeout=setTimeout(xe,Me.delay)})()},_e.prototype.stopAnimation=function(){var Ee;return clearTimeout((Ee=this.animation)!=null?Ee._timeout:void 0)},_e.prototype.render=function(Ee){var xe,Pe;return Ee._png&&Ee._png.stopAnimation(),Ee._png=this,Ee.width=this.width,Ee.height=this.height,xe=Ee.getContext("2d"),this.animation?(this.decodeFrames(xe),this.animate(xe)):(Pe=xe.createImageData(this.width,this.height),this.copyToImageData(Pe,this.decodePixels()),xe.putImageData(Pe,0,0))},_e}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Zt(r){var e=0;if(r[e++]!==71||r[e++]!==73||r[e++]!==70||r[e++]!==56||(r[e++]+1&253)!=56||r[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,_e=r[e++]|r[e++]<<8,Te=r[e++],Ee=Te>>7,xe=1<<(7&Te)+1;r[e++],r[e++];var Pe=null,Re=null;Ee&&(Pe=e,Re=xe,e+=3*xe);var ke=!0,Ce=[],Se=0,Ae=null,Ie=0,Me=null;for(this.width=t,this.height=_e;ke&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(r[e]!==11||r[e+1]==78&&r[e+2]==69&&r[e+3]==84&&r[e+4]==83&&r[e+5]==67&&r[e+6]==65&&r[e+7]==80&&r[e+8]==69&&r[e+9]==50&&r[e+10]==46&&r[e+11]==48&&r[e+12]==3&&r[e+13]==1&&r[e+16]==0)e+=14,Me=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((un=r[e++])>=0))throw Error("Invalid block size");if(un===0)break;e+=un}break;case 249:if(r[e++]!==4||r[e+4]!==0)throw new Error("Invalid graphics extension block.");var Fe=r[e++];Se=r[e++]|r[e++]<<8,Ae=r[e++],(1&Fe)==0&&(Ae=null),Ie=Fe>>2&7,e++;break;case 254:for(;;){if(!((un=r[e++])>=0))throw Error("Invalid block size");if(un===0)break;e+=un}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var Ve=r[e++]|r[e++]<<8,je=r[e++]|r[e++]<<8,Be=r[e++]|r[e++]<<8,qe=r[e++]|r[e++]<<8,He=r[e++],Xe=He>>6&1,Je=1<<(7&He)+1,Qe=Pe,Ke=Re,Ye=!1;He>>7&&(Ye=!0,Qe=e,Ke=Je,e+=3*Je);var pn=e;for(e++;;){var un;if(!((un=r[e++])>=0))throw Error("Invalid block size");if(un===0)break;e+=un}Ce.push({x:Ve,y:je,width:Be,height:qe,has_local_palette:Ye,palette_offset:Qe,palette_size:Ke,data_offset:pn,data_length:e-pn,transparent_index:Ae,interlaced:!!Xe,delay:Se,disposal:Ie});break;case 59:ke=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return Ce.length},this.loopCount=function(){return Me},this.frameInfo=function(fn){if(fn<0||fn>=Ce.length)throw new Error("Frame index out of range.");return Ce[fn]},this.decodeAndBlitFrameBGRA=function(fn,mn){var wn=this.frameInfo(fn),Pn=wn.width*wn.height,xn=new Uint8Array(Pn);$t(r,wn.data_offset,xn,Pn);var In=wn.palette_offset,Ln=wn.transparent_index;Ln===null&&(Ln=256);var $n=wn.width,Sn=t-$n,Bn=$n,Tn=4*(wn.y*t+wn.x),vn=4*((wn.y+wn.height)*t+wn.x),Un=Tn,zn=4*Sn;wn.interlaced===!0&&(zn+=4*t*7);for(var Hn=8,Jn=0,nr=xn.length;Jn<nr;++Jn){var or=xn[Jn];if(Bn===0&&(Bn=$n,(Un+=zn)>=vn&&(zn=4*Sn+4*t*(Hn-1),Un=Tn+($n+Sn)*(Hn<<1),Hn>>=1)),or===Ln)Un+=4;else{var Sr=r[In+3*or],kr=r[In+3*or+1],Vr=r[In+3*or+2];mn[Un++]=Vr,mn[Un++]=kr,mn[Un++]=Sr,mn[Un++]=255}--Bn}},this.decodeAndBlitFrameRGBA=function(fn,mn){var wn=this.frameInfo(fn),Pn=wn.width*wn.height,xn=new Uint8Array(Pn);$t(r,wn.data_offset,xn,Pn);var In=wn.palette_offset,Ln=wn.transparent_index;Ln===null&&(Ln=256);var $n=wn.width,Sn=t-$n,Bn=$n,Tn=4*(wn.y*t+wn.x),vn=4*((wn.y+wn.height)*t+wn.x),Un=Tn,zn=4*Sn;wn.interlaced===!0&&(zn+=4*t*7);for(var Hn=8,Jn=0,nr=xn.length;Jn<nr;++Jn){var or=xn[Jn];if(Bn===0&&(Bn=$n,(Un+=zn)>=vn&&(zn=4*Sn+4*t*(Hn-1),Un=Tn+($n+Sn)*(Hn<<1),Hn>>=1)),or===Ln)Un+=4;else{var Sr=r[In+3*or],kr=r[In+3*or+1],Vr=r[In+3*or+2];mn[Un++]=Sr,mn[Un++]=kr,mn[Un++]=Vr,mn[Un++]=255}--Bn}}}function $t(r,e,t,_e){for(var Te=r[e++],Ee=1<<Te,xe=Ee+1,Pe=xe+1,Re=Te+1,ke=(1<<Re)-1,Ce=0,Se=0,Ae=0,Ie=r[e++],Me=new Int32Array(4096),Fe=null;;){for(;Ce<16&&Ie!==0;)Se|=r[e++]<<Ce,Ce+=8,Ie===1?Ie=r[e++]:--Ie;if(Ce<Re)break;var Ve=Se&ke;if(Se>>=Re,Ce-=Re,Ve!==Ee){if(Ve===xe)break;for(var je=Ve<Pe?Ve:Fe,Be=0,qe=je;qe>Ee;)qe=Me[qe]>>8,++Be;var He=qe;if(Ae+Be+(je!==Ve?1:0)>_e)return void a.log("Warning, gif stream longer than expected.");t[Ae++]=He;var Xe=Ae+=Be;for(je!==Ve&&(t[Ae++]=He),qe=je;Be--;)qe=Me[qe],t[--Xe]=255&qe,qe>>=8;Fe!==null&&Pe<4096&&(Me[Pe++]=Fe<<8|He,Pe>=ke+1&&Re<12&&(++Re,ke=ke<<1|1)),Fe=Ve}else Pe=xe+1,ke=(1<<(Re=Te+1))-1,Fe=null}return Ae!==_e&&a.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Qt(r){var e,t,_e,Te,Ee,xe=Math.floor,Pe=new Array(64),Re=new Array(64),ke=new Array(64),Ce=new Array(64),Se=new Array(65535),Ae=new Array(65535),Ie=new Array(64),Me=new Array(64),Fe=[],Ve=0,je=7,Be=new Array(64),qe=new Array(64),He=new Array(64),Xe=new Array(256),Je=new Array(2048),Qe=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Ke=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Ye=[0,1,2,3,4,5,6,7,8,9,10,11],pn=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],un=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],fn=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],mn=[0,1,2,3,4,5,6,7,8,9,10,11],wn=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Pn=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function xn(Tn,vn){for(var Un=0,zn=0,Hn=new Array,Jn=1;Jn<=16;Jn++){for(var nr=1;nr<=Tn[Jn];nr++)Hn[vn[zn]]=[],Hn[vn[zn]][0]=Un,Hn[vn[zn]][1]=Jn,zn++,Un++;Un*=2}return Hn}function In(Tn){for(var vn=Tn[0],Un=Tn[1]-1;Un>=0;)vn&1<<Un&&(Ve|=1<<je),Un--,--je<0&&(Ve==255?(Ln(255),Ln(0)):Ln(Ve),je=7,Ve=0)}function Ln(Tn){Fe.push(Tn)}function $n(Tn){Ln(Tn>>8&255),Ln(255&Tn)}function Sn(Tn,vn,Un,zn,Hn){for(var Jn,nr=Hn[0],or=Hn[240],Sr=function(Dr,$r){var Kr,Fr,li,yi,ei,fr,Pr,ti,Gr,oi,Wr=0;for(Gr=0;Gr<8;++Gr){Kr=Dr[Wr],Fr=Dr[Wr+1],li=Dr[Wr+2],yi=Dr[Wr+3],ei=Dr[Wr+4],fr=Dr[Wr+5],Pr=Dr[Wr+6];var Ci=Kr+(ti=Dr[Wr+7]),xi=Kr-ti,fi=Fr+Pr,Di=Fr-Pr,Ni=li+fr,As=li-fr,Ti=yi+ei,Bi=yi-ei,Qi=Ci+Ti,vs=Ci-Ti,Ss=fi+Ni,di=fi-Ni;Dr[Wr]=Qi+Ss,Dr[Wr+4]=Qi-Ss;var Ur=.707106781*(di+vs);Dr[Wr+2]=vs+Ur,Dr[Wr+6]=vs-Ur;var ni=.382683433*((Qi=Bi+As)-(di=Di+xi)),ro=.5411961*Qi+ni,ps=1.306562965*di+ni,Os=.707106781*(Ss=As+Di),Hs=xi+Os,ci=xi-Os;Dr[Wr+5]=ci+ro,Dr[Wr+3]=ci-ro,Dr[Wr+1]=Hs+ps,Dr[Wr+7]=Hs-ps,Wr+=8}for(Wr=0,Gr=0;Gr<8;++Gr){Kr=Dr[Wr],Fr=Dr[Wr+8],li=Dr[Wr+16],yi=Dr[Wr+24],ei=Dr[Wr+32],fr=Dr[Wr+40],Pr=Dr[Wr+48];var Vs=Kr+(ti=Dr[Wr+56]),Ps=Kr-ti,Is=Fr+Pr,ss=Fr-Pr,os=li+fr,ms=li-fr,vo=yi+ei,co=yi-ei,js=Vs+vo,Vn=Vs-vo,Kn=Is+os,er=Is-os;Dr[Wr]=js+Kn,Dr[Wr+32]=js-Kn;var lr=.707106781*(er+Vn);Dr[Wr+16]=Vn+lr,Dr[Wr+48]=Vn-lr;var gr=.382683433*((js=co+ms)-(er=ss+Ps)),xr=.5411961*js+gr,Hr=1.306562965*er+gr,pi=.707106781*(Kn=ms+ss),ri=Ps+pi,Ii=Ps-pi;Dr[Wr+40]=Ii+xr,Dr[Wr+24]=Ii-xr,Dr[Wr+8]=ri+Hr,Dr[Wr+56]=ri-Hr,Wr++}for(Gr=0;Gr<64;++Gr)oi=Dr[Gr]*$r[Gr],Ie[Gr]=oi>0?oi+.5|0:oi-.5|0;return Ie}(Tn,vn),kr=0;kr<64;++kr)Me[Qe[kr]]=Sr[kr];var Vr=Me[0]-Un;Un=Me[0],Vr==0?In(zn[0]):(In(zn[Ae[Jn=32767+Vr]]),In(Se[Jn]));for(var Lr=63;Lr>0&&Me[Lr]==0;)Lr--;if(Lr==0)return In(nr),Un;for(var Qr,wr=1;wr<=Lr;){for(var Yn=wr;Me[wr]==0&&wr<=Lr;)++wr;var gi=wr-Yn;if(gi>=16){Qr=gi>>4;for(var ui=1;ui<=Qr;++ui)In(or);gi&=15}Jn=32767+Me[wr],In(Hn[(gi<<4)+Ae[Jn]]),In(Se[Jn]),wr++}return Lr!=63&&In(nr),Un}function Bn(Tn){Tn=Math.min(Math.max(Tn,1),100),Ee!=Tn&&(function(vn){for(var Un=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],zn=0;zn<64;zn++){var Hn=xe((Un[zn]*vn+50)/100);Hn=Math.min(Math.max(Hn,1),255),Pe[Qe[zn]]=Hn}for(var Jn=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],nr=0;nr<64;nr++){var or=xe((Jn[nr]*vn+50)/100);or=Math.min(Math.max(or,1),255),Re[Qe[nr]]=or}for(var Sr=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],kr=0,Vr=0;Vr<8;Vr++)for(var Lr=0;Lr<8;Lr++)ke[kr]=1/(Pe[Qe[kr]]*Sr[Vr]*Sr[Lr]*8),Ce[kr]=1/(Re[Qe[kr]]*Sr[Vr]*Sr[Lr]*8),kr++}(Tn<50?Math.floor(5e3/Tn):Math.floor(200-2*Tn)),Ee=Tn)}this.encode=function(Tn,vn){vn&&Bn(vn),Fe=new Array,Ve=0,je=7,$n(65496),$n(65504),$n(16),Ln(74),Ln(70),Ln(73),Ln(70),Ln(0),Ln(1),Ln(1),Ln(0),$n(1),$n(1),Ln(0),Ln(0),function(){$n(65499),$n(132),Ln(0);for(var Fr=0;Fr<64;Fr++)Ln(Pe[Fr]);Ln(1);for(var li=0;li<64;li++)Ln(Re[li])}(),function(Fr,li){$n(65472),$n(17),Ln(8),$n(li),$n(Fr),Ln(3),Ln(1),Ln(17),Ln(0),Ln(2),Ln(17),Ln(1),Ln(3),Ln(17),Ln(1)}(Tn.width,Tn.height),function(){$n(65476),$n(418),Ln(0);for(var Fr=0;Fr<16;Fr++)Ln(Ke[Fr+1]);for(var li=0;li<=11;li++)Ln(Ye[li]);Ln(16);for(var yi=0;yi<16;yi++)Ln(pn[yi+1]);for(var ei=0;ei<=161;ei++)Ln(un[ei]);Ln(1);for(var fr=0;fr<16;fr++)Ln(fn[fr+1]);for(var Pr=0;Pr<=11;Pr++)Ln(mn[Pr]);Ln(17);for(var ti=0;ti<16;ti++)Ln(wn[ti+1]);for(var Gr=0;Gr<=161;Gr++)Ln(Pn[Gr])}(),$n(65498),$n(12),Ln(3),Ln(1),Ln(0),Ln(2),Ln(17),Ln(3),Ln(17),Ln(0),Ln(63),Ln(0);var Un=0,zn=0,Hn=0;Ve=0,je=7,this.encode.displayName="_encode_";for(var Jn,nr,or,Sr,kr,Vr,Lr,Qr,wr,Yn=Tn.data,gi=Tn.width,ui=Tn.height,Dr=4*gi,$r=0;$r<ui;){for(Jn=0;Jn<Dr;){for(kr=Dr*$r+Jn,Lr=-1,Qr=0,wr=0;wr<64;wr++)Vr=kr+(Qr=wr>>3)*Dr+(Lr=4*(7&wr)),$r+Qr>=ui&&(Vr-=Dr*($r+1+Qr-ui)),Jn+Lr>=Dr&&(Vr-=Jn+Lr-Dr+4),nr=Yn[Vr++],or=Yn[Vr++],Sr=Yn[Vr++],Be[wr]=(Je[nr]+Je[or+256>>0]+Je[Sr+512>>0]>>16)-128,qe[wr]=(Je[nr+768>>0]+Je[or+1024>>0]+Je[Sr+1280>>0]>>16)-128,He[wr]=(Je[nr+1280>>0]+Je[or+1536>>0]+Je[Sr+1792>>0]>>16)-128;Un=Sn(Be,ke,Un,e,_e),zn=Sn(qe,Ce,zn,t,Te),Hn=Sn(He,Ce,Hn,t,Te),Jn+=32}$r+=8}if(je>=0){var Kr=[];Kr[1]=je+1,Kr[0]=(1<<je+1)-1,In(Kr)}return $n(65497),new Uint8Array(Fe)},r=r||50,function(){for(var Tn=String.fromCharCode,vn=0;vn<256;vn++)Xe[vn]=Tn(vn)}(),e=xn(Ke,Ye),t=xn(fn,mn),_e=xn(pn,un),Te=xn(wn,Pn),function(){for(var Tn=1,vn=2,Un=1;Un<=15;Un++){for(var zn=Tn;zn<vn;zn++)Ae[32767+zn]=Un,Se[32767+zn]=[],Se[32767+zn][1]=Un,Se[32767+zn][0]=zn;for(var Hn=-(vn-1);Hn<=-Tn;Hn++)Ae[32767+Hn]=Un,Se[32767+Hn]=[],Se[32767+Hn][1]=Un,Se[32767+Hn][0]=vn-1+Hn;Tn<<=1,vn<<=1}}(),function(){for(var Tn=0;Tn<256;Tn++)Je[Tn]=19595*Tn,Je[Tn+256>>0]=38470*Tn,Je[Tn+512>>0]=7471*Tn+32768,Je[Tn+768>>0]=-11059*Tn,Je[Tn+1024>>0]=-21709*Tn,Je[Tn+1280>>0]=32768*Tn+8421375,Je[Tn+1536>>0]=-27439*Tn,Je[Tn+1792>>0]=-5329*Tn}(),Bn(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function te(r,e){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ee(r){function e(Ke){if(!Ke)throw Error("assert :P")}function t(Ke,Ye,pn){for(var un=0;4>un;un++)if(Ke[Ye+un]!=pn.charCodeAt(un))return!0;return!1}function _e(Ke,Ye,pn,un,fn){for(var mn=0;mn<fn;mn++)Ke[Ye+mn]=pn[un+mn]}function Te(Ke,Ye,pn,un){for(var fn=0;fn<un;fn++)Ke[Ye+fn]=pn}function Ee(Ke){return new Int32Array(Ke)}function xe(Ke,Ye){for(var pn=[],un=0;un<Ke;un++)pn.push(new Ye);return pn}function Pe(Ke,Ye){var pn=[];return function un(fn,mn,wn){for(var Pn=wn[mn],xn=0;xn<Pn&&(fn.push(wn.length>mn+1?[]:new Ye),!(wn.length<mn+1));xn++)un(fn[xn],mn+1,wn)}(pn,0,Ke),pn}var Re=function(){var Ke=this;function Ye(Ue,We){for(var hn=1<<We-1>>>0;Ue&hn;)hn>>>=1;return hn?(Ue&hn-1)+hn:Ue}function pn(Ue,We,hn,bn,Rn){e(!(bn%hn));do Ue[We+(bn-=hn)]=Rn;while(0<bn)}function un(Ue,We,hn,bn,Rn){if(e(2328>=Rn),512>=Rn)var Cn=Ee(512);else if((Cn=Ee(Rn))==null)return 0;return function(Mn,Dn,jn,qn,tr,pr){var mr,cr,Nr=Dn,Ir=1<<jn,ir=Ee(16),sr=Ee(16);for(e(tr!=0),e(qn!=null),e(Mn!=null),e(0<jn),cr=0;cr<tr;++cr){if(15<qn[cr])return 0;++ir[qn[cr]]}if(ir[0]==tr)return 0;for(sr[1]=0,mr=1;15>mr;++mr){if(ir[mr]>1<<mr)return 0;sr[mr+1]=sr[mr]+ir[mr]}for(cr=0;cr<tr;++cr)mr=qn[cr],0<qn[cr]&&(pr[sr[mr]++]=cr);if(sr[15]==1)return(qn=new fn).g=0,qn.value=pr[0],pn(Mn,Nr,1,Ir,qn),Ir;var Or,Cr=-1,Mr=Ir-1,hi=0,si=1,Ai=1,ai=1<<jn;for(cr=0,mr=1,tr=2;mr<=jn;++mr,tr<<=1){if(si+=Ai<<=1,0>(Ai-=ir[mr]))return 0;for(;0<ir[mr];--ir[mr])(qn=new fn).g=mr,qn.value=pr[cr++],pn(Mn,Nr+hi,tr,ai,qn),hi=Ye(hi,mr)}for(mr=jn+1,tr=2;15>=mr;++mr,tr<<=1){if(si+=Ai<<=1,0>(Ai-=ir[mr]))return 0;for(;0<ir[mr];--ir[mr]){if(qn=new fn,(hi&Mr)!=Cr){for(Nr+=ai,Or=1<<(Cr=mr)-jn;15>Cr&&!(0>=(Or-=ir[Cr]));)++Cr,Or<<=1;Ir+=ai=1<<(Or=Cr-jn),Mn[Dn+(Cr=hi&Mr)].g=Or+jn,Mn[Dn+Cr].value=Nr-Dn-Cr}qn.g=mr-jn,qn.value=pr[cr++],pn(Mn,Nr+(hi>>jn),tr,ai,qn),hi=Ye(hi,mr)}}return si!=2*sr[15]-1?0:Ir}(Ue,We,hn,bn,Rn,Cn)}function fn(){this.value=this.g=0}function mn(){this.value=this.g=0}function wn(){this.G=xe(5,fn),this.H=Ee(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=xe(Us,mn)}function Pn(Ue,We,hn,bn){e(Ue!=null),e(We!=null),e(2147483648>bn),Ue.Ca=254,Ue.I=0,Ue.b=-8,Ue.Ka=0,Ue.oa=We,Ue.pa=hn,Ue.Jd=We,Ue.Yc=hn+bn,Ue.Zc=4<=bn?hn+bn-4+1:hn,Jn(Ue)}function xn(Ue,We){for(var hn=0;0<We--;)hn|=or(Ue,128)<<We;return hn}function In(Ue,We){var hn=xn(Ue,We);return nr(Ue)?-hn:hn}function Ln(Ue,We,hn,bn){var Rn,Cn=0;for(e(Ue!=null),e(We!=null),e(4294967288>bn),Ue.Sb=bn,Ue.Ra=0,Ue.u=0,Ue.h=0,4<bn&&(bn=4),Rn=0;Rn<bn;++Rn)Cn+=We[hn+Rn]<<8*Rn;Ue.Ra=Cn,Ue.bb=bn,Ue.oa=We,Ue.pa=hn}function $n(Ue){for(;8<=Ue.u&&Ue.bb<Ue.Sb;)Ue.Ra>>>=8,Ue.Ra+=Ue.oa[Ue.pa+Ue.bb]<<hu-8>>>0,++Ue.bb,Ue.u-=8;Un(Ue)&&(Ue.h=1,Ue.u=0)}function Sn(Ue,We){if(e(0<=We),!Ue.h&&We<=du){var hn=vn(Ue)&cu[We];return Ue.u+=We,$n(Ue),hn}return Ue.h=1,Ue.u=0}function Bn(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Tn(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function vn(Ue){return Ue.Ra>>>(Ue.u&hu-1)>>>0}function Un(Ue){return e(Ue.bb<=Ue.Sb),Ue.h||Ue.bb==Ue.Sb&&Ue.u>hu}function zn(Ue,We){Ue.u=We,Ue.h=Un(Ue)}function Hn(Ue){Ue.u>=fu&&(e(Ue.u>=fu),$n(Ue))}function Jn(Ue){e(Ue!=null&&Ue.oa!=null),Ue.pa<Ue.Zc?(Ue.I=(Ue.oa[Ue.pa++]|Ue.I<<8)>>>0,Ue.b+=8):(e(Ue!=null&&Ue.oa!=null),Ue.pa<Ue.Yc?(Ue.b+=8,Ue.I=Ue.oa[Ue.pa++]|Ue.I<<8):Ue.Ka?Ue.b=0:(Ue.I<<=8,Ue.b+=8,Ue.Ka=1))}function nr(Ue){return xn(Ue,1)}function or(Ue,We){var hn=Ue.Ca;0>Ue.b&&Jn(Ue);var bn=Ue.b,Rn=hn*We>>>8,Cn=(Ue.I>>>bn>Rn)+0;for(Cn?(hn-=Rn,Ue.I-=Rn+1<<bn>>>0):hn=Rn+1,bn=hn,Rn=0;256<=bn;)Rn+=8,bn>>=8;return bn=7^Rn+Vo[bn],Ue.b-=bn,Ue.Ca=(hn<<bn)-1,Cn}function Sr(Ue,We,hn){Ue[We+0]=hn>>24&255,Ue[We+1]=hn>>16&255,Ue[We+2]=hn>>8&255,Ue[We+3]=hn>>0&255}function kr(Ue,We){return Ue[We+0]<<0|Ue[We+1]<<8}function Vr(Ue,We){return kr(Ue,We)|Ue[We+2]<<16}function Lr(Ue,We){return kr(Ue,We)|kr(Ue,We+2)<<16}function Qr(Ue,We){var hn=1<<We;return e(Ue!=null),e(0<We),Ue.X=Ee(hn),Ue.X==null?0:(Ue.Mb=32-We,Ue.Xa=We,1)}function wr(Ue,We){e(Ue!=null),e(We!=null),e(Ue.Xa==We.Xa),_e(We.X,0,Ue.X,0,1<<We.Xa)}function Yn(){this.X=[],this.Xa=this.Mb=0}function gi(Ue,We,hn,bn){e(hn!=null),e(bn!=null);var Rn=hn[0],Cn=bn[0];return Rn==0&&(Rn=(Ue*Cn+We/2)/We),Cn==0&&(Cn=(We*Rn+Ue/2)/Ue),0>=Rn||0>=Cn?0:(hn[0]=Rn,bn[0]=Cn,1)}function ui(Ue,We){return Ue+(1<<We)-1>>>We}function Dr(Ue,We){return((4278255360&Ue)+(4278255360&We)>>>0&4278255360)+((16711935&Ue)+(16711935&We)>>>0&16711935)>>>0}function $r(Ue,We){Ke[We]=function(hn,bn,Rn,Cn,Mn,Dn,jn){var qn;for(qn=0;qn<Mn;++qn){var tr=Ke[Ue](Dn[jn+qn-1],Rn,Cn+qn);Dn[jn+qn]=Dr(hn[bn+qn],tr)}}}function Kr(){this.ud=this.hd=this.jd=0}function Fr(Ue,We){return((4278124286&(Ue^We))>>>1)+(Ue&We)>>>0}function li(Ue){return 0<=Ue&&256>Ue?Ue:0>Ue?0:255<Ue?255:void 0}function yi(Ue,We){return li(Ue+(Ue-We+.5>>1))}function ei(Ue,We,hn){return Math.abs(We-hn)-Math.abs(Ue-hn)}function fr(Ue,We,hn,bn,Rn,Cn,Mn){for(bn=Cn[Mn-1],hn=0;hn<Rn;++hn)Cn[Mn+hn]=bn=Dr(Ue[We+hn],bn)}function Pr(Ue,We,hn,bn,Rn){var Cn;for(Cn=0;Cn<hn;++Cn){var Mn=Ue[We+Cn],Dn=Mn>>8&255,jn=16711935&(jn=(jn=16711935&Mn)+((Dn<<16)+Dn));bn[Rn+Cn]=(4278255360&Mn)+jn>>>0}}function ti(Ue,We){We.jd=Ue>>0&255,We.hd=Ue>>8&255,We.ud=Ue>>16&255}function Gr(Ue,We,hn,bn,Rn,Cn){var Mn;for(Mn=0;Mn<bn;++Mn){var Dn=We[hn+Mn],jn=Dn>>>8,qn=Dn,tr=255&(tr=(tr=Dn>>>16)+((Ue.jd<<24>>24)*(jn<<24>>24)>>>5));qn=255&(qn=(qn=qn+((Ue.hd<<24>>24)*(jn<<24>>24)>>>5))+((Ue.ud<<24>>24)*(tr<<24>>24)>>>5)),Rn[Cn+Mn]=(4278255360&Dn)+(tr<<16)+qn}}function oi(Ue,We,hn,bn,Rn){Ke[We]=function(Cn,Mn,Dn,jn,qn,tr,pr,mr,cr){for(jn=pr;jn<mr;++jn)for(pr=0;pr<cr;++pr)qn[tr++]=Rn(Dn[bn(Cn[Mn++])])},Ke[Ue]=function(Cn,Mn,Dn,jn,qn,tr,pr){var mr=8>>Cn.b,cr=Cn.Ea,Nr=Cn.K[0],Ir=Cn.w;if(8>mr)for(Cn=(1<<Cn.b)-1,Ir=(1<<mr)-1;Mn<Dn;++Mn){var ir,sr=0;for(ir=0;ir<cr;++ir)ir&Cn||(sr=bn(jn[qn++])),tr[pr++]=Rn(Nr[sr&Ir]),sr>>=mr}else Ke["VP8LMapColor"+hn](jn,qn,Nr,Ir,tr,pr,Mn,Dn,cr)}}function Wr(Ue,We,hn,bn,Rn){for(hn=We+hn;We<hn;){var Cn=Ue[We++];bn[Rn++]=Cn>>16&255,bn[Rn++]=Cn>>8&255,bn[Rn++]=Cn>>0&255}}function Ci(Ue,We,hn,bn,Rn){for(hn=We+hn;We<hn;){var Cn=Ue[We++];bn[Rn++]=Cn>>16&255,bn[Rn++]=Cn>>8&255,bn[Rn++]=Cn>>0&255,bn[Rn++]=Cn>>24&255}}function xi(Ue,We,hn,bn,Rn){for(hn=We+hn;We<hn;){var Cn=(Mn=Ue[We++])>>16&240|Mn>>12&15,Mn=Mn>>0&240|Mn>>28&15;bn[Rn++]=Cn,bn[Rn++]=Mn}}function fi(Ue,We,hn,bn,Rn){for(hn=We+hn;We<hn;){var Cn=(Mn=Ue[We++])>>16&248|Mn>>13&7,Mn=Mn>>5&224|Mn>>3&31;bn[Rn++]=Cn,bn[Rn++]=Mn}}function Di(Ue,We,hn,bn,Rn){for(hn=We+hn;We<hn;){var Cn=Ue[We++];bn[Rn++]=Cn>>0&255,bn[Rn++]=Cn>>8&255,bn[Rn++]=Cn>>16&255}}function Ni(Ue,We,hn,bn,Rn,Cn){if(Cn==0)for(hn=We+hn;We<hn;)Sr(bn,((Cn=Ue[We++])[0]>>24|Cn[1]>>8&65280|Cn[2]<<8&16711680|Cn[3]<<24)>>>0),Rn+=32;else _e(bn,Rn,Ue,We,hn)}function As(Ue,We){Ke[We][0]=Ke[Ue+"0"],Ke[We][1]=Ke[Ue+"1"],Ke[We][2]=Ke[Ue+"2"],Ke[We][3]=Ke[Ue+"3"],Ke[We][4]=Ke[Ue+"4"],Ke[We][5]=Ke[Ue+"5"],Ke[We][6]=Ke[Ue+"6"],Ke[We][7]=Ke[Ue+"7"],Ke[We][8]=Ke[Ue+"8"],Ke[We][9]=Ke[Ue+"9"],Ke[We][10]=Ke[Ue+"10"],Ke[We][11]=Ke[Ue+"11"],Ke[We][12]=Ke[Ue+"12"],Ke[We][13]=Ke[Ue+"13"],Ke[We][14]=Ke[Ue+"0"],Ke[We][15]=Ke[Ue+"0"]}function Ti(Ue){return Ue==bu||Ue==Xl||Ue==Uu||Ue==zu}function Bi(){this.eb=[],this.size=this.A=this.fb=0}function Qi(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function vs(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Bi,this.f.kb=new Qi,this.sd=null}function Ss(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function di(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ur(Ue){return alert("todo:WebPSamplerProcessPlane"),Ue.T}function ni(Ue,We){var hn=Ue.T,bn=We.ba.f.RGBA,Rn=bn.eb,Cn=bn.fb+Ue.ka*bn.A,Mn=Xo[We.ba.S],Dn=Ue.y,jn=Ue.O,qn=Ue.f,tr=Ue.N,pr=Ue.ea,mr=Ue.W,cr=We.cc,Nr=We.dc,Ir=We.Mc,ir=We.Nc,sr=Ue.ka,Or=Ue.ka+Ue.T,Cr=Ue.U,Mr=Cr+1>>1;for(sr==0?Mn(Dn,jn,null,null,qn,tr,pr,mr,qn,tr,pr,mr,Rn,Cn,null,null,Cr):(Mn(We.ec,We.fc,Dn,jn,cr,Nr,Ir,ir,qn,tr,pr,mr,Rn,Cn-bn.A,Rn,Cn,Cr),++hn);sr+2<Or;sr+=2)cr=qn,Nr=tr,Ir=pr,ir=mr,tr+=Ue.Rc,mr+=Ue.Rc,Cn+=2*bn.A,Mn(Dn,(jn+=2*Ue.fa)-Ue.fa,Dn,jn,cr,Nr,Ir,ir,qn,tr,pr,mr,Rn,Cn-bn.A,Rn,Cn,Cr);return jn+=Ue.fa,Ue.j+Or<Ue.o?(_e(We.ec,We.fc,Dn,jn,Cr),_e(We.cc,We.dc,qn,tr,Mr),_e(We.Mc,We.Nc,pr,mr,Mr),hn--):1&Or||Mn(Dn,jn,null,null,qn,tr,pr,mr,qn,tr,pr,mr,Rn,Cn+bn.A,null,null,Cr),hn}function ro(Ue,We,hn){var bn=Ue.F,Rn=[Ue.J];if(bn!=null){var Cn=Ue.U,Mn=We.ba.S,Dn=Mn==Bu||Mn==Uu;We=We.ba.f.RGBA;var jn=[0],qn=Ue.ka;jn[0]=Ue.T,Ue.Kb&&(qn==0?--jn[0]:(--qn,Rn[0]-=Ue.width),Ue.j+Ue.ka+Ue.T==Ue.o&&(jn[0]=Ue.o-Ue.j-qn));var tr=We.eb;qn=We.fb+qn*We.A,Ue=_s(bn,Rn[0],Ue.width,Cn,jn,tr,qn+(Dn?0:3),We.A),e(hn==jn),Ue&&Ti(Mn)&&Ko(tr,qn,Dn,Cn,jn,We.A)}return 0}function ps(Ue){var We=Ue.ma,hn=We.ba.S,bn=11>hn,Rn=hn==Ll||hn==$u||hn==Bu||hn==xs||hn==12||Ti(hn);if(We.memory=null,We.Ib=null,We.Jb=null,We.Nd=null,!lu(We.Oa,Ue,Rn?11:12))return 0;if(Rn&&Ti(hn)&&jr(),Ue.da)alert("todo:use_scaling");else{if(bn){if(We.Ib=Ur,Ue.Kb){if(hn=Ue.U+1>>1,We.memory=Ee(Ue.U+2*hn),We.memory==null)return 0;We.ec=We.memory,We.fc=0,We.cc=We.ec,We.dc=We.fc+Ue.U,We.Mc=We.cc,We.Nc=We.dc+hn,We.Ib=ni,jr()}}else alert("todo:EmitYUV");Rn&&(We.Jb=ro,bn&&dr())}if(bn&&!_o){for(Ue=0;256>Ue;++Ue)Qo[Ue]=89858*(Ue-128)+Ba>>yl,Jo[Ue]=-22014*(Ue-128)+Ba,Eu[Ue]=-45773*(Ue-128),eu[Ue]=113618*(Ue-128)+Ba>>yl;for(Ue=ys;Ue<ws;++Ue)We=76283*(Ue-16)+Ba>>yl,cc[Ue-ys]=cs(We,255),Kc[Ue-ys]=cs(We+8>>4,15);_o=1}return 1}function Os(Ue){var We=Ue.ma,hn=Ue.U,bn=Ue.T;return e(!(1&Ue.ka)),0>=hn||0>=bn?0:(hn=We.Ib(Ue,We),We.Jb!=null&&We.Jb(Ue,We,hn),We.Dc+=hn,1)}function Hs(Ue){Ue.ma.memory=null}function ci(Ue,We,hn,bn){return Sn(Ue,8)!=47?0:(We[0]=Sn(Ue,14)+1,hn[0]=Sn(Ue,14)+1,bn[0]=Sn(Ue,1),Sn(Ue,3)!=0?0:!Ue.h)}function Vs(Ue,We){if(4>Ue)return Ue+1;var hn=Ue-2>>1;return(2+(1&Ue)<<hn)+Sn(We,hn)+1}function Ps(Ue,We){return 120<We?We-120:1<=(hn=((hn=Pd[We-1])>>4)*Ue+(8-(15&hn)))?hn:1;var hn}function Is(Ue,We,hn){var bn=vn(hn),Rn=Ue[We+=255&bn].g-8;return 0<Rn&&(zn(hn,hn.u+8),bn=vn(hn),We+=Ue[We].value,We+=bn&(1<<Rn)-1),zn(hn,hn.u+Ue[We].g),Ue[We].value}function ss(Ue,We,hn){return hn.g+=Ue.g,hn.value+=Ue.value<<We>>>0,e(8>=hn.g),Ue.g}function os(Ue,We,hn){var bn=Ue.xc;return e((We=bn==0?0:Ue.vc[Ue.md*(hn>>bn)+(We>>bn)])<Ue.Wb),Ue.Ya[We]}function ms(Ue,We,hn,bn){var Rn=Ue.ab,Cn=Ue.c*We,Mn=Ue.C;We=Mn+We;var Dn=hn,jn=bn;for(bn=Ue.Ta,hn=Ue.Ua;0<Rn--;){var qn=Ue.gc[Rn],tr=Mn,pr=We,mr=Dn,cr=jn,Nr=(jn=bn,Dn=hn,qn.Ea);switch(e(tr<pr),e(pr<=qn.nc),qn.hc){case 2:ic(mr,cr,(pr-tr)*Nr,jn,Dn);break;case 0:var Ir=tr,ir=pr,sr=jn,Or=Dn,Cr=(ai=qn).Ea;Ir==0&&(ql(mr,cr,null,null,1,sr,Or),fr(mr,cr+1,0,0,Cr-1,sr,Or+1),cr+=Cr,Or+=Cr,++Ir);for(var Mr=1<<ai.b,hi=Mr-1,si=ui(Cr,ai.b),Ai=ai.K,ai=ai.w+(Ir>>ai.b)*si;Ir<ir;){var rs=Ai,is=ai,Zi=1;for(ul(mr,cr,sr,Or-Cr,1,sr,Or);Zi<Cr;){var Ki=(Zi&~hi)+Mr;Ki>Cr&&(Ki=Cr),(0,Qa[rs[is++]>>8&15])(mr,cr+ +Zi,sr,Or+Zi-Cr,Ki-Zi,sr,Or+Zi),Zi=Ki}cr+=Cr,Or+=Cr,++Ir&hi||(ai+=si)}pr!=qn.nc&&_e(jn,Dn-Nr,jn,Dn+(pr-tr-1)*Nr,Nr);break;case 1:for(Nr=mr,ir=cr,Cr=(mr=qn.Ea)-(Or=mr&~(sr=(cr=1<<qn.b)-1)),Ir=ui(mr,qn.b),Mr=qn.K,qn=qn.w+(tr>>qn.b)*Ir;tr<pr;){for(hi=Mr,si=qn,Ai=new Kr,ai=ir+Or,rs=ir+mr;ir<ai;)ti(hi[si++],Ai),Ol(Ai,Nr,ir,cr,jn,Dn),ir+=cr,Dn+=cr;ir<rs&&(ti(hi[si++],Ai),Ol(Ai,Nr,ir,Cr,jn,Dn),ir+=Cr,Dn+=Cr),++tr&sr||(qn+=Ir)}break;case 3:if(mr==jn&&cr==Dn&&0<qn.b){for(ir=jn,mr=Nr=Dn+(pr-tr)*Nr-(Or=(pr-tr)*ui(qn.Ea,qn.b)),cr=jn,sr=Dn,Ir=[],Or=(Cr=Or)-1;0<=Or;--Or)Ir[Or]=cr[sr+Or];for(Or=Cr-1;0<=Or;--Or)ir[mr+Or]=Ir[Or];jo(qn,tr,pr,jn,Nr,jn,Dn)}else jo(qn,tr,pr,mr,cr,jn,Dn)}Dn=bn,jn=hn}jn!=hn&&_e(bn,hn,Dn,jn,Cn)}function vo(Ue,We){var hn=Ue.V,bn=Ue.Ba+Ue.c*Ue.C,Rn=We-Ue.C;if(e(We<=Ue.l.o),e(16>=Rn),0<Rn){var Cn=Ue.l,Mn=Ue.Ta,Dn=Ue.Ua,jn=Cn.width;if(ms(Ue,Rn,hn,bn),Rn=Dn=[Dn],e((hn=Ue.C)<(bn=We)),e(Cn.v<Cn.va),bn>Cn.o&&(bn=Cn.o),hn<Cn.j){var qn=Cn.j-hn;hn=Cn.j,Rn[0]+=qn*jn}if(hn>=bn?hn=0:(Rn[0]+=4*Cn.v,Cn.ka=hn-Cn.j,Cn.U=Cn.va-Cn.v,Cn.T=bn-hn,hn=1),hn){if(Dn=Dn[0],11>(hn=Ue.ca).S){var tr=hn.f.RGBA,pr=(bn=hn.S,Rn=Cn.U,Cn=Cn.T,qn=tr.eb,tr.A),mr=Cn;for(tr=tr.fb+Ue.Ma*tr.A;0<mr--;){var cr=Mn,Nr=Dn,Ir=Rn,ir=qn,sr=tr;switch(bn){case sc:$o(cr,Nr,Ir,ir,sr);break;case Ll:So(cr,Nr,Ir,ir,sr);break;case bu:So(cr,Nr,Ir,ir,sr),Ko(ir,sr,0,Ir,1,0);break;case zc:dl(cr,Nr,Ir,ir,sr);break;case $u:Ni(cr,Nr,Ir,ir,sr,1);break;case Xl:Ni(cr,Nr,Ir,ir,sr,1),Ko(ir,sr,0,Ir,1,0);break;case Bu:Ni(cr,Nr,Ir,ir,sr,0);break;case Uu:Ni(cr,Nr,Ir,ir,sr,0),Ko(ir,sr,1,Ir,1,0);break;case xs:Ml(cr,Nr,Ir,ir,sr);break;case zu:Ml(cr,Nr,Ir,ir,sr),Es(ir,sr,Ir,1,0);break;case oc:cl(cr,Nr,Ir,ir,sr);break;default:e(0)}Dn+=jn,tr+=pr}Ue.Ma+=Cn}else alert("todo:EmitRescaledRowsYUVA");e(Ue.Ma<=hn.height)}}Ue.C=We,e(Ue.C<=Ue.i)}function co(Ue){var We;if(0<Ue.ua)return 0;for(We=0;We<Ue.Wb;++We){var hn=Ue.Ya[We].G,bn=Ue.Ya[We].H;if(0<hn[1][bn[1]+0].g||0<hn[2][bn[2]+0].g||0<hn[3][bn[3]+0].g)return 0}return 1}function js(Ue,We,hn,bn,Rn,Cn){if(Ue.Z!=0){var Mn=Ue.qd,Dn=Ue.rd;for(e(Io[Ue.Z]!=null);We<hn;++We)Io[Ue.Z](Mn,Dn,bn,Rn,bn,Rn,Cn),Mn=bn,Dn=Rn,Rn+=Cn;Ue.qd=Mn,Ue.rd=Dn}}function Vn(Ue,We){var hn=Ue.l.ma,bn=hn.Z==0||hn.Z==1?Ue.l.j:Ue.C;if(bn=Ue.C<bn?bn:Ue.C,e(We<=Ue.l.o),We>bn){var Rn=Ue.l.width,Cn=hn.ca,Mn=hn.tb+Rn*bn,Dn=Ue.V,jn=Ue.Ba+Ue.c*bn,qn=Ue.gc;e(Ue.ab==1),e(qn[0].hc==3),Fu(qn[0],bn,We,Dn,jn,Cn,Mn),js(hn,bn,We,Cn,Mn,Rn)}Ue.C=Ue.Ma=We}function Kn(Ue,We,hn,bn,Rn,Cn,Mn){var Dn=Ue.$/bn,jn=Ue.$%bn,qn=Ue.m,tr=Ue.s,pr=hn+Ue.$,mr=pr;Rn=hn+bn*Rn;var cr=hn+bn*Cn,Nr=280+tr.ua,Ir=Ue.Pb?Dn:16777216,ir=0<tr.ua?tr.Wa:null,sr=tr.wc,Or=pr<cr?os(tr,jn,Dn):null;e(Ue.C<Cn),e(cr<=Rn);var Cr=!1;e:for(;;){for(;Cr||pr<cr;){var Mr=0;if(Dn>=Ir){var hi=pr-hn;e((Ir=Ue).Pb),Ir.wd=Ir.m,Ir.xd=hi,0<Ir.s.ua&&wr(Ir.s.Wa,Ir.s.vb),Ir=Dn+uc}if(jn&sr||(Or=os(tr,jn,Dn)),e(Or!=null),Or.Qb&&(We[pr]=Or.qb,Cr=!0),!Cr)if(Hn(qn),Or.jc){Mr=qn,hi=We;var si=pr,Ai=Or.pd[vn(Mr)&Us-1];e(Or.jc),256>Ai.g?(zn(Mr,Mr.u+Ai.g),hi[si]=Ai.value,Mr=0):(zn(Mr,Mr.u+Ai.g-256),e(256<=Ai.value),Mr=Ai.value),Mr==0&&(Cr=!0)}else Mr=Is(Or.G[0],Or.H[0],qn);if(qn.h)break;if(Cr||256>Mr){if(!Cr)if(Or.nd)We[pr]=(Or.qb|Mr<<8)>>>0;else{if(Hn(qn),Cr=Is(Or.G[1],Or.H[1],qn),Hn(qn),hi=Is(Or.G[2],Or.H[2],qn),si=Is(Or.G[3],Or.H[3],qn),qn.h)break;We[pr]=(si<<24|Cr<<16|Mr<<8|hi)>>>0}if(Cr=!1,++pr,++jn>=bn&&(jn=0,++Dn,Mn!=null&&Dn<=Cn&&!(Dn%16)&&Mn(Ue,Dn),ir!=null))for(;mr<pr;)Mr=We[mr++],ir.X[(506832829*Mr&4294967295)>>>ir.Mb]=Mr}else if(280>Mr){if(Mr=Vs(Mr-256,qn),hi=Is(Or.G[4],Or.H[4],qn),Hn(qn),hi=Ps(bn,hi=Vs(hi,qn)),qn.h)break;if(pr-hn<hi||Rn-pr<Mr)break e;for(si=0;si<Mr;++si)We[pr+si]=We[pr+si-hi];for(pr+=Mr,jn+=Mr;jn>=bn;)jn-=bn,++Dn,Mn!=null&&Dn<=Cn&&!(Dn%16)&&Mn(Ue,Dn);if(e(pr<=Rn),jn&sr&&(Or=os(tr,jn,Dn)),ir!=null)for(;mr<pr;)Mr=We[mr++],ir.X[(506832829*Mr&4294967295)>>>ir.Mb]=Mr}else{if(!(Mr<Nr))break e;for(Cr=Mr-280,e(ir!=null);mr<pr;)Mr=We[mr++],ir.X[(506832829*Mr&4294967295)>>>ir.Mb]=Mr;Mr=pr,e(!(Cr>>>(hi=ir).Xa)),We[Mr]=hi.X[Cr],Cr=!0}Cr||e(qn.h==Un(qn))}if(Ue.Pb&&qn.h&&pr<Rn)e(Ue.m.h),Ue.a=5,Ue.m=Ue.wd,Ue.$=Ue.xd,0<Ue.s.ua&&wr(Ue.s.vb,Ue.s.Wa);else{if(qn.h)break e;Mn?.(Ue,Dn>Cn?Cn:Dn),Ue.a=0,Ue.$=pr-hn}return 1}return Ue.a=3,0}function er(Ue){e(Ue!=null),Ue.vc=null,Ue.yc=null,Ue.Ya=null;var We=Ue.Wa;We!=null&&(We.X=null),Ue.vb=null,e(Ue!=null)}function lr(){var Ue=new au;return Ue==null?null:(Ue.a=0,Ue.xb=wu,As("Predictor","VP8LPredictors"),As("Predictor","VP8LPredictors_C"),As("PredictorAdd","VP8LPredictorsAdd"),As("PredictorAdd","VP8LPredictorsAdd_C"),ic=Pr,Ol=Gr,$o=Wr,So=Ci,Ml=xi,cl=fi,dl=Di,Ke.VP8LMapColor32b=pu,Ke.VP8LMapColor8b=mu,Ue)}function gr(Ue,We,hn,bn,Rn){var Cn=1,Mn=[Ue],Dn=[We],jn=bn.m,qn=bn.s,tr=null,pr=0;e:for(;;){if(hn)for(;Cn&&Sn(jn,1);){var mr=Mn,cr=Dn,Nr=bn,Ir=1,ir=Nr.m,sr=Nr.gc[Nr.ab],Or=Sn(ir,2);if(Nr.Oc&1<<Or)Cn=0;else{switch(Nr.Oc|=1<<Or,sr.hc=Or,sr.Ea=mr[0],sr.nc=cr[0],sr.K=[null],++Nr.ab,e(4>=Nr.ab),Or){case 0:case 1:sr.b=Sn(ir,3)+2,Ir=gr(ui(sr.Ea,sr.b),ui(sr.nc,sr.b),0,Nr,sr.K),sr.K=sr.K[0];break;case 3:var Cr,Mr=Sn(ir,8)+1,hi=16<Mr?0:4<Mr?1:2<Mr?2:3;if(mr[0]=ui(sr.Ea,hi),sr.b=hi,Cr=Ir=gr(Mr,1,0,Nr,sr.K)){var si,Ai=Mr,ai=sr,rs=1<<(8>>ai.b),is=Ee(rs);if(is==null)Cr=0;else{var Zi=ai.K[0],Ki=ai.w;for(is[0]=ai.K[0][0],si=1;si<1*Ai;++si)is[si]=Dr(Zi[Ki+si],is[si-1]);for(;si<4*rs;++si)is[si]=0;ai.K[0]=null,ai.K[0]=is,Cr=1}}Ir=Cr;break;case 2:break;default:e(0)}Cn=Ir}}if(Mn=Mn[0],Dn=Dn[0],Cn&&Sn(jn,1)&&!(Cn=1<=(pr=Sn(jn,4))&&11>=pr)){bn.a=3;break e}var bs;if(bs=Cn)t:{var Ts,$i,Ls,zo=bn,Gs=Mn,so=Dn,ds=pr,Ro=hn,ko=zo.m,Ds=zo.s,oo=[null],yo=1,Zo=0,Sa=Gc[ds];n:for(;;){if(Ro&&Sn(ko,1)){var Fs=Sn(ko,3)+2,eo=ui(Gs,Fs),ua=ui(so,Fs),Vl=eo*ua;if(!gr(eo,ua,0,zo,oo))break n;for(oo=oo[0],Ds.xc=Fs,Ts=0;Ts<Vl;++Ts){var vl=oo[Ts]>>8&65535;oo[Ts]=vl,vl>=yo&&(yo=vl+1)}}if(ko.h)break n;for($i=0;5>$i;++$i){var hs=Ql[$i];!$i&&0<ds&&(hs+=1<<ds),Zo<hs&&(Zo=hs)}var nl=xe(yo*Sa,fn),dc=yo,Cc=xe(dc,wn);if(Cc==null)var Pa=null;else e(65536>=dc),Pa=Cc;var Ia=Ee(Zo);if(Pa==null||Ia==null||nl==null){zo.a=1;break n}var nu=nl;for(Ts=Ls=0;Ts<yo;++Ts){var Ra=Pa[Ts],wl=Ra.G,ru=Ra.H,xu=0,ca=1,Au=0;for($i=0;5>$i;++$i){hs=Ql[$i],wl[$i]=nu,ru[$i]=Ls,!$i&&0<ds&&(hs+=1<<ds);i:{var jl,Tl=hs,Su=zo,rl=Ia,Xc=nu,Oc=Ls,Cs=0,Ua=Su.m,Mc=Sn(Ua,1);if(Te(rl,0,0,Tl),Mc){var Nc=Sn(Ua,1)+1,hc=Sn(Ua,1),fc=Sn(Ua,hc==0?1:8);rl[fc]=1,Nc==2&&(rl[fc=Sn(Ua,8)]=1);var il=1}else{var Ms=Ee(19),to=Sn(Ua,4)+4;if(19<to){Su.a=3;var Ws=0;break i}for(jl=0;jl<to;++jl)Ms[Sd[jl]]=Sn(Ua,3);var Pu=void 0,El=void 0,Iu=Su,Od=Ms,ao=Tl,pc=rl,Ku=0,sl=Iu.m,za=8,da=xe(128,fn);r:for(;un(da,0,7,Od,19);){if(Sn(sl,1)){var Yu=2+2*Sn(sl,3);if((Pu=2+Sn(sl,Yu))>ao)break r}else Pu=ao;for(El=0;El<ao&&Pu--;){Hn(sl);var mc=da[0+(127&vn(sl))];zn(sl,sl.u+mc.g);var $l=mc.value;if(16>$l)pc[El++]=$l,$l!=0&&(za=$l);else{var Qc=$l==16,Lc=$l-16,Jc=ac[Lc],Dc=Sn(sl,qu[Lc])+Jc;if(El+Dc>ao)break r;for(var Zc=Qc?za:0;0<Dc--;)pc[El++]=Zc}}Ku=1;break r}Ku||(Iu.a=3),il=Ku}(il=il&&!Ua.h)&&(Cs=un(Xc,Oc,8,rl,Tl)),il&&Cs!=0?Ws=Cs:(Su.a=3,Ws=0)}if(Ws==0)break n;if(ca&&qc[$i]==1&&(ca=nu[Ls].g==0),xu+=nu[Ls].g,Ls+=Ws,3>=$i){var Ru,gc=Ia[0];for(Ru=1;Ru<hs;++Ru)Ia[Ru]>gc&&(gc=Ia[Ru]);Au+=gc}}if(Ra.nd=ca,Ra.Qb=0,ca&&(Ra.qb=(wl[3][ru[3]+0].value<<24|wl[1][ru[1]+0].value<<16|wl[2][ru[2]+0].value)>>>0,xu==0&&256>wl[0][ru[0]+0].value&&(Ra.Qb=1,Ra.qb+=wl[0][ru[0]+0].value<<8)),Ra.jc=!Ra.Qb&&6>Au,Ra.jc){var Xu,ha=Ra;for(Xu=0;Xu<Us;++Xu){var xl=Xu,qa=ha.pd[xl],iu=ha.G[0][ha.H[0]+xl];256<=iu.value?(qa.g=iu.g+256,qa.value=iu.value):(qa.g=0,qa.value=0,xl>>=ss(iu,8,qa),xl>>=ss(ha.G[1][ha.H[1]+xl],16,qa),xl>>=ss(ha.G[2][ha.H[2]+xl],0,qa),ss(ha.G[3][ha.H[3]+xl],24,qa))}}}Ds.vc=oo,Ds.Wb=yo,Ds.Ya=Pa,Ds.yc=nl,bs=1;break t}bs=0}if(!(Cn=bs)){bn.a=3;break e}if(0<pr){if(qn.ua=1<<pr,!Qr(qn.Wa,pr)){bn.a=1,Cn=0;break e}}else qn.ua=0;var _c=bn,yc=Mn,ed=Dn,bc=_c.s,vc=bc.xc;if(_c.c=yc,_c.i=ed,bc.md=ui(yc,vc),bc.wc=vc==0?-1:(1<<vc)-1,hn){bn.xb=tl;break e}if((tr=Ee(Mn*Dn))==null){bn.a=1,Cn=0;break e}Cn=(Cn=Kn(bn,tr,0,Mn,Dn,Dn,null))&&!jn.h;break e}return Cn?(Rn!=null?Rn[0]=tr:(e(tr==null),e(hn)),bn.$=0,hn||er(qn)):er(qn),Cn}function xr(Ue,We){var hn=Ue.c*Ue.i,bn=hn+We+16*We;return e(Ue.c<=We),Ue.V=Ee(bn),Ue.V==null?(Ue.Ta=null,Ue.Ua=0,Ue.a=1,0):(Ue.Ta=Ue.V,Ue.Ua=Ue.Ba+hn+We,1)}function Hr(Ue,We){var hn=Ue.C,bn=We-hn,Rn=Ue.V,Cn=Ue.Ba+Ue.c*hn;for(e(We<=Ue.l.o);0<bn;){var Mn=16<bn?16:bn,Dn=Ue.l.ma,jn=Ue.l.width,qn=jn*Mn,tr=Dn.ca,pr=Dn.tb+jn*hn,mr=Ue.Ta,cr=Ue.Ua;ms(Ue,Mn,Rn,Cn),zs(mr,cr,tr,pr,qn),js(Dn,hn,hn+Mn,tr,pr,jn),bn-=Mn,Rn+=Mn*Ue.c,hn+=Mn}e(hn==We),Ue.C=Ue.Ma=We}function pi(){this.ub=this.yd=this.td=this.Rb=0}function ri(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ii(){this.Fb=this.Bb=this.Cb=0,this.Zb=Ee(4),this.Lb=Ee(4)}function Yi(){this.Yb=function(){var Ue=[];return function We(hn,bn,Rn){for(var Cn=Rn[bn],Mn=0;Mn<Cn&&(hn.push(Rn.length>bn+1?[]:0),!(Rn.length<bn+1));Mn++)We(hn[Mn],bn+1,Rn)}(Ue,0,[3,11]),Ue}()}function Li(){this.jb=Ee(3),this.Wc=Pe([4,8],Yi),this.Xc=Pe([4,17],Yi)}function Rs(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new Ee(4),this.od=new Ee(4)}function Er(){this.ld=this.La=this.dd=this.tc=0}function Oi(){this.Na=this.la=0}function Wi(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function $s(){this.ad=Ee(384),this.Za=0,this.Ob=Ee(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function wo(){this.uc=this.M=this.Nb=0,this.wa=Array(new Er),this.Y=0,this.ya=Array(new $s),this.aa=0,this.l=new ma}function Wo(){this.y=Ee(16),this.f=Ee(8),this.ea=Ee(8)}function io(){this.cb=this.a=0,this.sc="",this.m=new Bn,this.Od=new pi,this.Kc=new ri,this.ed=new Rs,this.Qa=new Ii,this.Ic=this.$c=this.Aa=0,this.D=new wo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=xe(8,Bn),this.ia=0,this.pb=xe(4,Wi),this.Pa=new Li,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Wo),this.Hd=0,this.rb=Array(new Oi),this.sb=0,this.wa=Array(new Er),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new $s),this.L=this.aa=0,this.gd=Pe([4,2],Er),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ma(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ts(){var Ue=new io;return Ue!=null&&(Ue.a=0,Ue.sc="OK",Ue.cb=0,Ue.Xb=0,Jl||(Jl=ga)),Ue}function us(Ue,We,hn){return Ue.a==0&&(Ue.a=We,Ue.sc=hn,Ue.cb=0),0}function Wa(Ue,We,hn){return 3<=hn&&Ue[We+0]==157&&Ue[We+1]==1&&Ue[We+2]==42}function Ha(Ue,We){if(Ue==null)return 0;if(Ue.a=0,Ue.sc="OK",We==null)return us(Ue,2,"null VP8Io passed to VP8GetHeaders()");var hn=We.data,bn=We.w,Rn=We.ha;if(4>Rn)return us(Ue,7,"Truncated header.");var Cn=hn[bn+0]|hn[bn+1]<<8|hn[bn+2]<<16,Mn=Ue.Od;if(Mn.Rb=!(1&Cn),Mn.td=Cn>>1&7,Mn.yd=Cn>>4&1,Mn.ub=Cn>>5,3<Mn.td)return us(Ue,3,"Incorrect keyframe parameters.");if(!Mn.yd)return us(Ue,4,"Frame not displayable.");bn+=3,Rn-=3;var Dn=Ue.Kc;if(Mn.Rb){if(7>Rn)return us(Ue,7,"cannot parse picture header");if(!Wa(hn,bn,Rn))return us(Ue,3,"Bad code word");Dn.c=16383&(hn[bn+4]<<8|hn[bn+3]),Dn.Td=hn[bn+4]>>6,Dn.i=16383&(hn[bn+6]<<8|hn[bn+5]),Dn.Ud=hn[bn+6]>>6,bn+=7,Rn-=7,Ue.za=Dn.c+15>>4,Ue.Ub=Dn.i+15>>4,We.width=Dn.c,We.height=Dn.i,We.Da=0,We.j=0,We.v=0,We.va=We.width,We.o=We.height,We.da=0,We.ib=We.width,We.hb=We.height,We.U=We.width,We.T=We.height,Te((Cn=Ue.Pa).jb,0,255,Cn.jb.length),e((Cn=Ue.Qa)!=null),Cn.Cb=0,Cn.Bb=0,Cn.Fb=1,Te(Cn.Zb,0,0,Cn.Zb.length),Te(Cn.Lb,0,0,Cn.Lb)}if(Mn.ub>Rn)return us(Ue,7,"bad partition length");Pn(Cn=Ue.m,hn,bn,Mn.ub),bn+=Mn.ub,Rn-=Mn.ub,Mn.Rb&&(Dn.Ld=nr(Cn),Dn.Kd=nr(Cn)),Dn=Ue.Qa;var jn,qn=Ue.Pa;if(e(Cn!=null),e(Dn!=null),Dn.Cb=nr(Cn),Dn.Cb){if(Dn.Bb=nr(Cn),nr(Cn)){for(Dn.Fb=nr(Cn),jn=0;4>jn;++jn)Dn.Zb[jn]=nr(Cn)?In(Cn,7):0;for(jn=0;4>jn;++jn)Dn.Lb[jn]=nr(Cn)?In(Cn,6):0}if(Dn.Bb)for(jn=0;3>jn;++jn)qn.jb[jn]=nr(Cn)?xn(Cn,8):255}else Dn.Bb=0;if(Cn.Ka)return us(Ue,3,"cannot parse segment header");if((Dn=Ue.ed).zd=nr(Cn),Dn.Tb=xn(Cn,6),Dn.wb=xn(Cn,3),Dn.Pc=nr(Cn),Dn.Pc&&nr(Cn)){for(qn=0;4>qn;++qn)nr(Cn)&&(Dn.vd[qn]=In(Cn,6));for(qn=0;4>qn;++qn)nr(Cn)&&(Dn.od[qn]=In(Cn,6))}if(Ue.L=Dn.Tb==0?0:Dn.zd?1:2,Cn.Ka)return us(Ue,3,"cannot parse filter header");var tr=Rn;if(Rn=jn=bn,bn=jn+tr,Dn=tr,Ue.Xb=(1<<xn(Ue.m,2))-1,tr<3*(qn=Ue.Xb))hn=7;else{for(jn+=3*qn,Dn-=3*qn,tr=0;tr<qn;++tr){var pr=hn[Rn+0]|hn[Rn+1]<<8|hn[Rn+2]<<16;pr>Dn&&(pr=Dn),Pn(Ue.Jc[+tr],hn,jn,pr),jn+=pr,Dn-=pr,Rn+=3}Pn(Ue.Jc[+qn],hn,jn,Dn),hn=jn<bn?0:5}if(hn!=0)return us(Ue,hn,"cannot parse partitions");for(hn=xn(jn=Ue.m,7),Rn=nr(jn)?In(jn,4):0,bn=nr(jn)?In(jn,4):0,Dn=nr(jn)?In(jn,4):0,qn=nr(jn)?In(jn,4):0,jn=nr(jn)?In(jn,4):0,tr=Ue.Qa,pr=0;4>pr;++pr){if(tr.Cb){var mr=tr.Zb[pr];tr.Fb||(mr+=hn)}else{if(0<pr){Ue.pb[pr]=Ue.pb[0];continue}mr=hn}var cr=Ue.pb[pr];cr.Sc[0]=vu[cs(mr+Rn,127)],cr.Sc[1]=Gu[cs(mr+0,127)],cr.Eb[0]=2*vu[cs(mr+bn,127)],cr.Eb[1]=101581*Gu[cs(mr+Dn,127)]>>16,8>cr.Eb[1]&&(cr.Eb[1]=8),cr.Qc[0]=vu[cs(mr+qn,117)],cr.Qc[1]=Gu[cs(mr+jn,127)],cr.lc=mr+jn}if(!Mn.Rb)return us(Ue,4,"Not a key frame.");for(nr(Cn),Mn=Ue.Pa,hn=0;4>hn;++hn){for(Rn=0;8>Rn;++Rn)for(bn=0;3>bn;++bn)for(Dn=0;11>Dn;++Dn)qn=or(Cn,Rd[hn][Rn][bn][Dn])?xn(Cn,8):Hc[hn][Rn][bn][Dn],Mn.Wc[hn][Rn].Yb[bn][Dn]=qn;for(Rn=0;17>Rn;++Rn)Mn.Xc[hn][Rn]=Mn.Wc[hn][Ic[Rn]]}return Ue.kc=nr(Cn),Ue.kc&&(Ue.Bd=xn(Cn,8)),Ue.cb=1}function ga(Ue,We,hn,bn,Rn,Cn,Mn){var Dn=We[Rn].Yb[hn];for(hn=0;16>Rn;++Rn){if(!or(Ue,Dn[hn+0]))return Rn;for(;!or(Ue,Dn[hn+1]);)if(Dn=We[++Rn].Yb[0],hn=0,Rn==16)return 16;var jn=We[Rn+1].Yb;if(or(Ue,Dn[hn+2])){var qn=Ue,tr=0;if(or(qn,(mr=Dn)[(pr=hn)+3]))if(or(qn,mr[pr+6])){for(Dn=0,pr=2*(tr=or(qn,mr[pr+8]))+(mr=or(qn,mr[pr+9+tr])),tr=0,mr=Sc[pr];mr[Dn];++Dn)tr+=tr+or(qn,mr[Dn]);tr+=3+(8<<pr)}else or(qn,mr[pr+7])?(tr=7+2*or(qn,165),tr+=or(qn,145)):tr=5+or(qn,159);else tr=or(qn,mr[pr+4])?3+or(qn,mr[pr+5]):2;Dn=jn[2]}else tr=1,Dn=jn[1];jn=Mn+Pc[Rn],0>(qn=Ue).b&&Jn(qn);var pr,mr=qn.b,cr=(pr=qn.Ca>>1)-(qn.I>>mr)>>31;--qn.b,qn.Ca+=cr,qn.Ca|=1,qn.I-=(pr+1&cr)<<mr,Cn[jn]=((tr^cr)-cr)*bn[(0<Rn)+0]}return 16}function ya(Ue){var We=Ue.rb[Ue.sb-1];We.la=0,We.Na=0,Te(Ue.zc,0,0,Ue.zc.length),Ue.ja=0}function ba(Ue,We){if(Ue==null)return 0;if(We==null)return us(Ue,2,"NULL VP8Io parameter in VP8Decode().");if(!Ue.cb&&!Ha(Ue,We))return 0;if(e(Ue.cb),We.ac==null||We.ac(We)){We.ob&&(Ue.L=0);var hn=tu[Ue.L];if(Ue.L==2?(Ue.yb=0,Ue.zb=0):(Ue.yb=We.v-hn>>4,Ue.zb=We.j-hn>>4,0>Ue.yb&&(Ue.yb=0),0>Ue.zb&&(Ue.zb=0)),Ue.Va=We.o+15+hn>>4,Ue.Hb=We.va+15+hn>>4,Ue.Hb>Ue.za&&(Ue.Hb=Ue.za),Ue.Va>Ue.Ub&&(Ue.Va=Ue.Ub),0<Ue.L){var bn=Ue.ed;for(hn=0;4>hn;++hn){var Rn;if(Ue.Qa.Cb){var Cn=Ue.Qa.Lb[hn];Ue.Qa.Fb||(Cn+=bn.Tb)}else Cn=bn.Tb;for(Rn=0;1>=Rn;++Rn){var Mn=Ue.gd[hn][Rn],Dn=Cn;if(bn.Pc&&(Dn+=bn.vd[0],Rn&&(Dn+=bn.od[0])),0<(Dn=0>Dn?0:63<Dn?63:Dn)){var jn=Dn;0<bn.wb&&(jn=4<bn.wb?jn>>2:jn>>1)>9-bn.wb&&(jn=9-bn.wb),1>jn&&(jn=1),Mn.dd=jn,Mn.tc=2*Dn+jn,Mn.ld=40<=Dn?2:15<=Dn?1:0}else Mn.tc=0;Mn.La=Rn}}}hn=0}else us(Ue,6,"Frame setup failed"),hn=Ue.a;if(hn=hn==0){if(hn){Ue.$c=0,0<Ue.Aa||(Ue.Ic=bl);e:{hn=Ue.Ic,bn=4*(jn=Ue.za);var qn=32*jn,tr=jn+1,pr=0<Ue.L?jn*(0<Ue.Aa?2:1):0,mr=(Ue.Aa==2?2:1)*jn;if((Mn=bn+832+(Rn=3*(16*hn+tu[Ue.L])/2*qn)+(Cn=Ue.Fa!=null&&0<Ue.Fa.length?Ue.Kc.c*Ue.Kc.i:0))!=Mn)hn=0;else{if(Mn>Ue.Vb){if(Ue.Vb=0,Ue.Ec=Ee(Mn),Ue.Fc=0,Ue.Ec==null){hn=us(Ue,1,"no memory during frame initialization.");break e}Ue.Vb=Mn}Mn=Ue.Ec,Dn=Ue.Fc,Ue.Ac=Mn,Ue.Bc=Dn,Dn+=bn,Ue.Gd=xe(qn,Wo),Ue.Hd=0,Ue.rb=xe(tr+1,Oi),Ue.sb=1,Ue.wa=pr?xe(pr,Er):null,Ue.Y=0,Ue.D.Nb=0,Ue.D.wa=Ue.wa,Ue.D.Y=Ue.Y,0<Ue.Aa&&(Ue.D.Y+=jn),e(!0),Ue.oc=Mn,Ue.pc=Dn,Dn+=832,Ue.ya=xe(mr,$s),Ue.aa=0,Ue.D.ya=Ue.ya,Ue.D.aa=Ue.aa,Ue.Aa==2&&(Ue.D.aa+=jn),Ue.R=16*jn,Ue.B=8*jn,jn=(qn=tu[Ue.L])*Ue.R,qn=qn/2*Ue.B,Ue.sa=Mn,Ue.ta=Dn+jn,Ue.qa=Ue.sa,Ue.ra=Ue.ta+16*hn*Ue.R+qn,Ue.Ha=Ue.qa,Ue.Ia=Ue.ra+8*hn*Ue.B+qn,Ue.$c=0,Dn+=Rn,Ue.mb=Cn?Mn:null,Ue.nb=Cn?Dn:null,e(Dn+Cn<=Ue.Fc+Ue.Vb),ya(Ue),Te(Ue.Ac,Ue.Bc,0,bn),hn=1}}if(hn){if(We.ka=0,We.y=Ue.sa,We.O=Ue.ta,We.f=Ue.qa,We.N=Ue.ra,We.ea=Ue.Ha,We.Vd=Ue.Ia,We.fa=Ue.R,We.Rc=Ue.B,We.F=null,We.J=0,!ju){for(hn=-255;255>=hn;++hn)Zs[255+hn]=0>hn?-hn:hn;for(hn=-1020;1020>=hn;++hn)Za[1020+hn]=-128>hn?-128:127<hn?127:hn;for(hn=-112;112>=hn;++hn)_u[112+hn]=-16>hn?-16:15<hn?15:hn;for(hn=-255;510>=hn;++hn)Yl[255+hn]=0>hn?0:255<hn?255:hn;ju=1}gu=Hi,hl=ra,pl=To,Po=ns,aa=Ho,as=na,Gl=ll,Vu=Ns,Wl=wa,Hl=Ul,Kl=sa,la=Da,ml=Ya,Ja=Ta,gl=Tr,_l=Pi,Nl=ji,go=po,Aa[0]=Do,Aa[1]=Ui,Aa[2]=fo,Aa[3]=Lo,Aa[4]=Ka,Aa[5]=Na,Aa[6]=Ys,Aa[7]=La,Aa[8]=Nn,Aa[9]=An,Uo[0]=Eo,Uo[1]=Fi,Uo[2]=Si,Uo[3]=ia,Uo[4]=Ji,Uo[5]=xo,Uo[6]=ho,Yo[0]=vr,Yo[1]=Ma,Yo[2]=Gn,Yo[3]=Qn,Yo[4]=Jr,Yo[5]=Yr,Yo[6]=Vi,hn=1}else hn=0}hn&&(hn=function(cr,Nr){for(cr.M=0;cr.M<cr.Va;++cr.M){var Ir,ir=cr.Jc[cr.M&cr.Xb],sr=cr.m,Or=cr;for(Ir=0;Ir<Or.za;++Ir){var Cr=sr,Mr=Or,hi=Mr.Ac,si=Mr.Bc+4*Ir,Ai=Mr.zc,ai=Mr.ya[Mr.aa+Ir];if(Mr.Qa.Bb?ai.$b=or(Cr,Mr.Pa.jb[0])?2+or(Cr,Mr.Pa.jb[2]):or(Cr,Mr.Pa.jb[1]):ai.$b=0,Mr.kc&&(ai.Ad=or(Cr,Mr.Bd)),ai.Za=!or(Cr,145)+0,ai.Za){var rs=ai.Ob,is=0;for(Mr=0;4>Mr;++Mr){var Zi,Ki=Ai[0+Mr];for(Zi=0;4>Zi;++Zi){Ki=Id[hi[si+Zi]][Ki];for(var bs=Wc[or(Cr,Ki[0])];0<bs;)bs=Wc[2*bs+or(Cr,Ki[bs])];Ki=-bs,hi[si+Zi]=Ki}_e(rs,is,hi,si,4),is+=4,Ai[0+Mr]=Ki}}else Ki=or(Cr,156)?or(Cr,128)?1:3:or(Cr,163)?2:0,ai.Ob[0]=Ki,Te(hi,si,Ki,4),Te(Ai,0,Ki,4);ai.Dd=or(Cr,142)?or(Cr,114)?or(Cr,183)?1:3:2:0}if(Or.m.Ka)return us(cr,7,"Premature end-of-partition0 encountered.");for(;cr.ja<cr.za;++cr.ja){if(Or=ir,Cr=(sr=cr).rb[sr.sb-1],hi=sr.rb[sr.sb+sr.ja],Ir=sr.ya[sr.aa+sr.ja],si=sr.kc?Ir.Ad:0)Cr.la=hi.la=0,Ir.Za||(Cr.Na=hi.Na=0),Ir.Hc=0,Ir.Gc=0,Ir.ia=0;else{var Ts,$i;if(Cr=hi,hi=Or,si=sr.Pa.Xc,Ai=sr.ya[sr.aa+sr.ja],ai=sr.pb[Ai.$b],Mr=Ai.ad,rs=0,is=sr.rb[sr.sb-1],Ki=Zi=0,Te(Mr,rs,0,384),Ai.Za)var Ls=0,zo=si[3];else{bs=Ee(16);var Gs=Cr.Na+is.Na;if(Gs=Jl(hi,si[1],Gs,ai.Eb,0,bs,0),Cr.Na=is.Na=(0<Gs)+0,1<Gs)gu(bs,0,Mr,rs);else{var so=bs[0]+3>>3;for(bs=0;256>bs;bs+=16)Mr[rs+bs]=so}Ls=1,zo=si[0]}var ds=15&Cr.la,Ro=15&is.la;for(bs=0;4>bs;++bs){var ko=1&Ro;for(so=$i=0;4>so;++so)ds=ds>>1|(ko=(Gs=Jl(hi,zo,Gs=ko+(1&ds),ai.Sc,Ls,Mr,rs))>Ls)<<7,$i=$i<<2|(3<Gs?3:1<Gs?2:Mr[rs+0]!=0),rs+=16;ds>>=4,Ro=Ro>>1|ko<<7,Zi=(Zi<<8|$i)>>>0}for(zo=ds,Ls=Ro>>4,Ts=0;4>Ts;Ts+=2){for($i=0,ds=Cr.la>>4+Ts,Ro=is.la>>4+Ts,bs=0;2>bs;++bs){for(ko=1&Ro,so=0;2>so;++so)Gs=ko+(1&ds),ds=ds>>1|(ko=0<(Gs=Jl(hi,si[2],Gs,ai.Qc,0,Mr,rs)))<<3,$i=$i<<2|(3<Gs?3:1<Gs?2:Mr[rs+0]!=0),rs+=16;ds>>=2,Ro=Ro>>1|ko<<5}Ki|=$i<<4*Ts,zo|=ds<<4<<Ts,Ls|=(240&Ro)<<Ts}Cr.la=zo,is.la=Ls,Ai.Hc=Zi,Ai.Gc=Ki,Ai.ia=43690&Ki?0:ai.ia,si=!(Zi|Ki)}if(0<sr.L&&(sr.wa[sr.Y+sr.ja]=sr.gd[Ir.$b][Ir.Za],sr.wa[sr.Y+sr.ja].La|=!si),Or.Ka)return us(cr,7,"Premature end-of-file encountered.")}if(ya(cr),sr=Nr,Or=1,Ir=(ir=cr).D,Cr=0<ir.L&&ir.M>=ir.zb&&ir.M<=ir.Va,ir.Aa==0)e:{if(Ir.M=ir.M,Ir.uc=Cr,ja(ir,Ir),Or=1,Ir=($i=ir.D).Nb,Cr=(Ki=tu[ir.L])*ir.R,hi=Ki/2*ir.B,bs=16*Ir*ir.R,so=8*Ir*ir.B,si=ir.sa,Ai=ir.ta-Cr+bs,ai=ir.qa,Mr=ir.ra-hi+so,rs=ir.Ha,is=ir.Ia-hi+so,Ro=(ds=$i.M)==0,Zi=ds>=ir.Va-1,ir.Aa==2&&ja(ir,$i),$i.uc)for(ko=(Gs=ir).D.M,e(Gs.D.uc),$i=Gs.yb;$i<Gs.Hb;++$i){Ls=$i,zo=ko;var Ds=(oo=(hs=Gs).D).Nb;Ts=hs.R;var oo=oo.wa[oo.Y+Ls],yo=hs.sa,Zo=hs.ta+16*Ds*Ts+16*Ls,Sa=oo.dd,Fs=oo.tc;if(Fs!=0)if(e(3<=Fs),hs.L==1)0<Ls&&_l(yo,Zo,Ts,Fs+4),oo.La&&go(yo,Zo,Ts,Fs),0<zo&&gl(yo,Zo,Ts,Fs+4),oo.La&&Nl(yo,Zo,Ts,Fs);else{var eo=hs.B,ua=hs.qa,Vl=hs.ra+8*Ds*eo+8*Ls,vl=hs.Ha,hs=hs.Ia+8*Ds*eo+8*Ls;Ds=oo.ld,0<Ls&&(Vu(yo,Zo,Ts,Fs+4,Sa,Ds),Hl(ua,Vl,vl,hs,eo,Fs+4,Sa,Ds)),oo.La&&(la(yo,Zo,Ts,Fs,Sa,Ds),Ja(ua,Vl,vl,hs,eo,Fs,Sa,Ds)),0<zo&&(Gl(yo,Zo,Ts,Fs+4,Sa,Ds),Wl(ua,Vl,vl,hs,eo,Fs+4,Sa,Ds)),oo.La&&(Kl(yo,Zo,Ts,Fs,Sa,Ds),ml(ua,Vl,vl,hs,eo,Fs,Sa,Ds))}}if(ir.ia&&alert("todo:DitherRow"),sr.put!=null){if($i=16*ds,ds=16*(ds+1),Ro?(sr.y=ir.sa,sr.O=ir.ta+bs,sr.f=ir.qa,sr.N=ir.ra+so,sr.ea=ir.Ha,sr.W=ir.Ia+so):($i-=Ki,sr.y=si,sr.O=Ai,sr.f=ai,sr.N=Mr,sr.ea=rs,sr.W=is),Zi||(ds-=Ki),ds>sr.o&&(ds=sr.o),sr.F=null,sr.J=null,ir.Fa!=null&&0<ir.Fa.length&&$i<ds&&(sr.J=Cl(ir,sr,$i,ds-$i),sr.F=ir.mb,sr.F==null&&sr.F.length==0)){Or=us(ir,3,"Could not decode alpha data.");break e}$i<sr.j&&(Ki=sr.j-$i,$i=sr.j,e(!(1&Ki)),sr.O+=ir.R*Ki,sr.N+=ir.B*(Ki>>1),sr.W+=ir.B*(Ki>>1),sr.F!=null&&(sr.J+=sr.width*Ki)),$i<ds&&(sr.O+=sr.v,sr.N+=sr.v>>1,sr.W+=sr.v>>1,sr.F!=null&&(sr.J+=sr.v),sr.ka=$i-sr.j,sr.U=sr.va-sr.v,sr.T=ds-$i,Or=sr.put(sr))}Ir+1!=ir.Ic||Zi||(_e(ir.sa,ir.ta-Cr,si,Ai+16*ir.R,Cr),_e(ir.qa,ir.ra-hi,ai,Mr+8*ir.B,hi),_e(ir.Ha,ir.Ia-hi,rs,is+8*ir.B,hi))}if(!Or)return us(cr,6,"Output aborted.")}return 1}(Ue,We)),We.bc!=null&&We.bc(We),hn&=1}return hn?(Ue.cb=0,hn):0}function Bs(Ue,We,hn,bn,Rn){Rn=Ue[We+hn+32*bn]+(Rn>>3),Ue[We+hn+32*bn]=-256&Rn?0>Rn?0:255:Rn}function va(Ue,We,hn,bn,Rn,Cn){Bs(Ue,We,0,hn,bn+Rn),Bs(Ue,We,1,hn,bn+Cn),Bs(Ue,We,2,hn,bn-Cn),Bs(Ue,We,3,hn,bn-Rn)}function ks(Ue){return(20091*Ue>>16)+Ue}function Ks(Ue,We,hn,bn){var Rn,Cn=0,Mn=Ee(16);for(Rn=0;4>Rn;++Rn){var Dn=Ue[We+0]+Ue[We+8],jn=Ue[We+0]-Ue[We+8],qn=(35468*Ue[We+4]>>16)-ks(Ue[We+12]),tr=ks(Ue[We+4])+(35468*Ue[We+12]>>16);Mn[Cn+0]=Dn+tr,Mn[Cn+1]=jn+qn,Mn[Cn+2]=jn-qn,Mn[Cn+3]=Dn-tr,Cn+=4,We++}for(Rn=Cn=0;4>Rn;++Rn)Dn=(Ue=Mn[Cn+0]+4)+Mn[Cn+8],jn=Ue-Mn[Cn+8],qn=(35468*Mn[Cn+4]>>16)-ks(Mn[Cn+12]),Bs(hn,bn,0,0,Dn+(tr=ks(Mn[Cn+4])+(35468*Mn[Cn+12]>>16))),Bs(hn,bn,1,0,jn+qn),Bs(hn,bn,2,0,jn-qn),Bs(hn,bn,3,0,Dn-tr),Cn++,bn+=32}function na(Ue,We,hn,bn){var Rn=Ue[We+0]+4,Cn=35468*Ue[We+4]>>16,Mn=ks(Ue[We+4]),Dn=35468*Ue[We+1]>>16;va(hn,bn,0,Rn+Mn,Ue=ks(Ue[We+1]),Dn),va(hn,bn,1,Rn+Cn,Ue,Dn),va(hn,bn,2,Rn-Cn,Ue,Dn),va(hn,bn,3,Rn-Mn,Ue,Dn)}function ra(Ue,We,hn,bn,Rn){Ks(Ue,We,hn,bn),Rn&&Ks(Ue,We+16,hn,bn+4)}function To(Ue,We,hn,bn){hl(Ue,We+0,hn,bn,1),hl(Ue,We+32,hn,bn+128,1)}function ns(Ue,We,hn,bn){var Rn;for(Ue=Ue[We+0]+4,Rn=0;4>Rn;++Rn)for(We=0;4>We;++We)Bs(hn,bn,We,Rn,Ue)}function Ho(Ue,We,hn,bn){Ue[We+0]&&Po(Ue,We+0,hn,bn),Ue[We+16]&&Po(Ue,We+16,hn,bn+4),Ue[We+32]&&Po(Ue,We+32,hn,bn+128),Ue[We+48]&&Po(Ue,We+48,hn,bn+128+4)}function Hi(Ue,We,hn,bn){var Rn,Cn=Ee(16);for(Rn=0;4>Rn;++Rn){var Mn=Ue[We+0+Rn]+Ue[We+12+Rn],Dn=Ue[We+4+Rn]+Ue[We+8+Rn],jn=Ue[We+4+Rn]-Ue[We+8+Rn],qn=Ue[We+0+Rn]-Ue[We+12+Rn];Cn[0+Rn]=Mn+Dn,Cn[8+Rn]=Mn-Dn,Cn[4+Rn]=qn+jn,Cn[12+Rn]=qn-jn}for(Rn=0;4>Rn;++Rn)Mn=(Ue=Cn[0+4*Rn]+3)+Cn[3+4*Rn],Dn=Cn[1+4*Rn]+Cn[2+4*Rn],jn=Cn[1+4*Rn]-Cn[2+4*Rn],qn=Ue-Cn[3+4*Rn],hn[bn+0]=Mn+Dn>>3,hn[bn+16]=qn+jn>>3,hn[bn+32]=Mn-Dn>>3,hn[bn+48]=qn-jn>>3,bn+=64}function Mo(Ue,We,hn){var bn,Rn=We-32,Cn=Bo,Mn=255-Ue[Rn-1];for(bn=0;bn<hn;++bn){var Dn,jn=Cn,qn=Mn+Ue[We-1];for(Dn=0;Dn<hn;++Dn)Ue[We+Dn]=jn[qn+Ue[Rn+Dn]];We+=32}}function Ui(Ue,We){Mo(Ue,We,4)}function Ma(Ue,We){Mo(Ue,We,8)}function Fi(Ue,We){Mo(Ue,We,16)}function Si(Ue,We){var hn;for(hn=0;16>hn;++hn)_e(Ue,We+32*hn,Ue,We-32,16)}function ia(Ue,We){var hn;for(hn=16;0<hn;--hn)Te(Ue,We,Ue[We-1],16),We+=32}function No(Ue,We,hn){var bn;for(bn=0;16>bn;++bn)Te(We,hn+32*bn,Ue,16)}function Eo(Ue,We){var hn,bn=16;for(hn=0;16>hn;++hn)bn+=Ue[We-1+32*hn]+Ue[We+hn-32];No(bn>>5,Ue,We)}function Ji(Ue,We){var hn,bn=8;for(hn=0;16>hn;++hn)bn+=Ue[We-1+32*hn];No(bn>>4,Ue,We)}function xo(Ue,We){var hn,bn=8;for(hn=0;16>hn;++hn)bn+=Ue[We+hn-32];No(bn>>4,Ue,We)}function ho(Ue,We){No(128,Ue,We)}function Ei(Ue,We,hn){return Ue+2*We+hn+2>>2}function fo(Ue,We){var hn,bn=We-32;for(bn=new Uint8Array([Ei(Ue[bn-1],Ue[bn+0],Ue[bn+1]),Ei(Ue[bn+0],Ue[bn+1],Ue[bn+2]),Ei(Ue[bn+1],Ue[bn+2],Ue[bn+3]),Ei(Ue[bn+2],Ue[bn+3],Ue[bn+4])]),hn=0;4>hn;++hn)_e(Ue,We+32*hn,bn,0,bn.length)}function Lo(Ue,We){var hn=Ue[We-1],bn=Ue[We-1+32],Rn=Ue[We-1+64],Cn=Ue[We-1+96];Sr(Ue,We+0,16843009*Ei(Ue[We-1-32],hn,bn)),Sr(Ue,We+32,16843009*Ei(hn,bn,Rn)),Sr(Ue,We+64,16843009*Ei(bn,Rn,Cn)),Sr(Ue,We+96,16843009*Ei(Rn,Cn,Cn))}function Do(Ue,We){var hn,bn=4;for(hn=0;4>hn;++hn)bn+=Ue[We+hn-32]+Ue[We-1+32*hn];for(bn>>=3,hn=0;4>hn;++hn)Te(Ue,We+32*hn,bn,4)}function Ka(Ue,We){var hn=Ue[We-1+0],bn=Ue[We-1+32],Rn=Ue[We-1+64],Cn=Ue[We-1-32],Mn=Ue[We+0-32],Dn=Ue[We+1-32],jn=Ue[We+2-32],qn=Ue[We+3-32];Ue[We+0+96]=Ei(bn,Rn,Ue[We-1+96]),Ue[We+1+96]=Ue[We+0+64]=Ei(hn,bn,Rn),Ue[We+2+96]=Ue[We+1+64]=Ue[We+0+32]=Ei(Cn,hn,bn),Ue[We+3+96]=Ue[We+2+64]=Ue[We+1+32]=Ue[We+0+0]=Ei(Mn,Cn,hn),Ue[We+3+64]=Ue[We+2+32]=Ue[We+1+0]=Ei(Dn,Mn,Cn),Ue[We+3+32]=Ue[We+2+0]=Ei(jn,Dn,Mn),Ue[We+3+0]=Ei(qn,jn,Dn)}function Ys(Ue,We){var hn=Ue[We+1-32],bn=Ue[We+2-32],Rn=Ue[We+3-32],Cn=Ue[We+4-32],Mn=Ue[We+5-32],Dn=Ue[We+6-32],jn=Ue[We+7-32];Ue[We+0+0]=Ei(Ue[We+0-32],hn,bn),Ue[We+1+0]=Ue[We+0+32]=Ei(hn,bn,Rn),Ue[We+2+0]=Ue[We+1+32]=Ue[We+0+64]=Ei(bn,Rn,Cn),Ue[We+3+0]=Ue[We+2+32]=Ue[We+1+64]=Ue[We+0+96]=Ei(Rn,Cn,Mn),Ue[We+3+32]=Ue[We+2+64]=Ue[We+1+96]=Ei(Cn,Mn,Dn),Ue[We+3+64]=Ue[We+2+96]=Ei(Mn,Dn,jn),Ue[We+3+96]=Ei(Dn,jn,jn)}function Na(Ue,We){var hn=Ue[We-1+0],bn=Ue[We-1+32],Rn=Ue[We-1+64],Cn=Ue[We-1-32],Mn=Ue[We+0-32],Dn=Ue[We+1-32],jn=Ue[We+2-32],qn=Ue[We+3-32];Ue[We+0+0]=Ue[We+1+64]=Cn+Mn+1>>1,Ue[We+1+0]=Ue[We+2+64]=Mn+Dn+1>>1,Ue[We+2+0]=Ue[We+3+64]=Dn+jn+1>>1,Ue[We+3+0]=jn+qn+1>>1,Ue[We+0+96]=Ei(Rn,bn,hn),Ue[We+0+64]=Ei(bn,hn,Cn),Ue[We+0+32]=Ue[We+1+96]=Ei(hn,Cn,Mn),Ue[We+1+32]=Ue[We+2+96]=Ei(Cn,Mn,Dn),Ue[We+2+32]=Ue[We+3+96]=Ei(Mn,Dn,jn),Ue[We+3+32]=Ei(Dn,jn,qn)}function La(Ue,We){var hn=Ue[We+0-32],bn=Ue[We+1-32],Rn=Ue[We+2-32],Cn=Ue[We+3-32],Mn=Ue[We+4-32],Dn=Ue[We+5-32],jn=Ue[We+6-32],qn=Ue[We+7-32];Ue[We+0+0]=hn+bn+1>>1,Ue[We+1+0]=Ue[We+0+64]=bn+Rn+1>>1,Ue[We+2+0]=Ue[We+1+64]=Rn+Cn+1>>1,Ue[We+3+0]=Ue[We+2+64]=Cn+Mn+1>>1,Ue[We+0+32]=Ei(hn,bn,Rn),Ue[We+1+32]=Ue[We+0+96]=Ei(bn,Rn,Cn),Ue[We+2+32]=Ue[We+1+96]=Ei(Rn,Cn,Mn),Ue[We+3+32]=Ue[We+2+96]=Ei(Cn,Mn,Dn),Ue[We+3+64]=Ei(Mn,Dn,jn),Ue[We+3+96]=Ei(Dn,jn,qn)}function An(Ue,We){var hn=Ue[We-1+0],bn=Ue[We-1+32],Rn=Ue[We-1+64],Cn=Ue[We-1+96];Ue[We+0+0]=hn+bn+1>>1,Ue[We+2+0]=Ue[We+0+32]=bn+Rn+1>>1,Ue[We+2+32]=Ue[We+0+64]=Rn+Cn+1>>1,Ue[We+1+0]=Ei(hn,bn,Rn),Ue[We+3+0]=Ue[We+1+32]=Ei(bn,Rn,Cn),Ue[We+3+32]=Ue[We+1+64]=Ei(Rn,Cn,Cn),Ue[We+3+64]=Ue[We+2+64]=Ue[We+0+96]=Ue[We+1+96]=Ue[We+2+96]=Ue[We+3+96]=Cn}function Nn(Ue,We){var hn=Ue[We-1+0],bn=Ue[We-1+32],Rn=Ue[We-1+64],Cn=Ue[We-1+96],Mn=Ue[We-1-32],Dn=Ue[We+0-32],jn=Ue[We+1-32],qn=Ue[We+2-32];Ue[We+0+0]=Ue[We+2+32]=hn+Mn+1>>1,Ue[We+0+32]=Ue[We+2+64]=bn+hn+1>>1,Ue[We+0+64]=Ue[We+2+96]=Rn+bn+1>>1,Ue[We+0+96]=Cn+Rn+1>>1,Ue[We+3+0]=Ei(Dn,jn,qn),Ue[We+2+0]=Ei(Mn,Dn,jn),Ue[We+1+0]=Ue[We+3+32]=Ei(hn,Mn,Dn),Ue[We+1+32]=Ue[We+3+64]=Ei(bn,hn,Mn),Ue[We+1+64]=Ue[We+3+96]=Ei(Rn,bn,hn),Ue[We+1+96]=Ei(Cn,Rn,bn)}function Gn(Ue,We){var hn;for(hn=0;8>hn;++hn)_e(Ue,We+32*hn,Ue,We-32,8)}function Qn(Ue,We){var hn;for(hn=0;8>hn;++hn)Te(Ue,We,Ue[We-1],8),We+=32}function hr(Ue,We,hn){var bn;for(bn=0;8>bn;++bn)Te(We,hn+32*bn,Ue,8)}function vr(Ue,We){var hn,bn=8;for(hn=0;8>hn;++hn)bn+=Ue[We+hn-32]+Ue[We-1+32*hn];hr(bn>>4,Ue,We)}function Yr(Ue,We){var hn,bn=4;for(hn=0;8>hn;++hn)bn+=Ue[We+hn-32];hr(bn>>3,Ue,We)}function Jr(Ue,We){var hn,bn=4;for(hn=0;8>hn;++hn)bn+=Ue[We-1+32*hn];hr(bn>>3,Ue,We)}function Vi(Ue,We){hr(128,Ue,We)}function Mi(Ue,We,hn){var bn=Ue[We-hn],Rn=Ue[We+0],Cn=3*(Rn-bn)+el[1020+Ue[We-2*hn]-Ue[We+hn]],Mn=yu[112+(Cn+4>>3)];Ue[We-hn]=Bo[255+bn+yu[112+(Cn+3>>3)]],Ue[We+0]=Bo[255+Rn-Mn]}function es(Ue,We,hn,bn){var Rn=Ue[We+0],Cn=Ue[We+hn];return xa[255+Ue[We-2*hn]-Ue[We-hn]]>bn||xa[255+Cn-Rn]>bn}function Xs(Ue,We,hn,bn){return 4*xa[255+Ue[We-hn]-Ue[We+0]]+xa[255+Ue[We-2*hn]-Ue[We+hn]]<=bn}function qs(Ue,We,hn,bn,Rn){var Cn=Ue[We-3*hn],Mn=Ue[We-2*hn],Dn=Ue[We-hn],jn=Ue[We+0],qn=Ue[We+hn],tr=Ue[We+2*hn],pr=Ue[We+3*hn];return 4*xa[255+Dn-jn]+xa[255+Mn-qn]>bn?0:xa[255+Ue[We-4*hn]-Cn]<=Rn&&xa[255+Cn-Mn]<=Rn&&xa[255+Mn-Dn]<=Rn&&xa[255+pr-tr]<=Rn&&xa[255+tr-qn]<=Rn&&xa[255+qn-jn]<=Rn}function Tr(Ue,We,hn,bn){var Rn=2*bn+1;for(bn=0;16>bn;++bn)Xs(Ue,We+bn,hn,Rn)&&Mi(Ue,We+bn,hn)}function Pi(Ue,We,hn,bn){var Rn=2*bn+1;for(bn=0;16>bn;++bn)Xs(Ue,We+bn*hn,1,Rn)&&Mi(Ue,We+bn*hn,1)}function ji(Ue,We,hn,bn){var Rn;for(Rn=3;0<Rn;--Rn)Tr(Ue,We+=4*hn,hn,bn)}function po(Ue,We,hn,bn){var Rn;for(Rn=3;0<Rn;--Rn)Pi(Ue,We+=4,hn,bn)}function Qs(Ue,We,hn,bn,Rn,Cn,Mn,Dn){for(Cn=2*Cn+1;0<Rn--;){if(qs(Ue,We,hn,Cn,Mn))if(es(Ue,We,hn,Dn))Mi(Ue,We,hn);else{var jn=Ue,qn=We,tr=hn,pr=jn[qn-2*tr],mr=jn[qn-tr],cr=jn[qn+0],Nr=jn[qn+tr],Ir=jn[qn+2*tr],ir=27*(Or=el[1020+3*(cr-mr)+el[1020+pr-Nr]])+63>>7,sr=18*Or+63>>7,Or=9*Or+63>>7;jn[qn-3*tr]=Bo[255+jn[qn-3*tr]+Or],jn[qn-2*tr]=Bo[255+pr+sr],jn[qn-tr]=Bo[255+mr+ir],jn[qn+0]=Bo[255+cr-ir],jn[qn+tr]=Bo[255+Nr-sr],jn[qn+2*tr]=Bo[255+Ir-Or]}We+=bn}}function Js(Ue,We,hn,bn,Rn,Cn,Mn,Dn){for(Cn=2*Cn+1;0<Rn--;){if(qs(Ue,We,hn,Cn,Mn))if(es(Ue,We,hn,Dn))Mi(Ue,We,hn);else{var jn=Ue,qn=We,tr=hn,pr=jn[qn-tr],mr=jn[qn+0],cr=jn[qn+tr],Nr=yu[112+((Ir=3*(mr-pr))+4>>3)],Ir=yu[112+(Ir+3>>3)],ir=Nr+1>>1;jn[qn-2*tr]=Bo[255+jn[qn-2*tr]+ir],jn[qn-tr]=Bo[255+pr+Ir],jn[qn+0]=Bo[255+mr-Nr],jn[qn+tr]=Bo[255+cr-ir]}We+=bn}}function ll(Ue,We,hn,bn,Rn,Cn){Qs(Ue,We,hn,1,16,bn,Rn,Cn)}function Ns(Ue,We,hn,bn,Rn,Cn){Qs(Ue,We,1,hn,16,bn,Rn,Cn)}function sa(Ue,We,hn,bn,Rn,Cn){var Mn;for(Mn=3;0<Mn;--Mn)Js(Ue,We+=4*hn,hn,1,16,bn,Rn,Cn)}function Da(Ue,We,hn,bn,Rn,Cn){var Mn;for(Mn=3;0<Mn;--Mn)Js(Ue,We+=4,1,hn,16,bn,Rn,Cn)}function wa(Ue,We,hn,bn,Rn,Cn,Mn,Dn){Qs(Ue,We,Rn,1,8,Cn,Mn,Dn),Qs(hn,bn,Rn,1,8,Cn,Mn,Dn)}function Ul(Ue,We,hn,bn,Rn,Cn,Mn,Dn){Qs(Ue,We,1,Rn,8,Cn,Mn,Dn),Qs(hn,bn,1,Rn,8,Cn,Mn,Dn)}function Ya(Ue,We,hn,bn,Rn,Cn,Mn,Dn){Js(Ue,We+4*Rn,Rn,1,8,Cn,Mn,Dn),Js(hn,bn+4*Rn,Rn,1,8,Cn,Mn,Dn)}function Ta(Ue,We,hn,bn,Rn,Cn,Mn,Dn){Js(Ue,We+4,1,Rn,8,Cn,Mn,Dn),Js(hn,bn+4,1,Rn,8,Cn,Mn,Dn)}function oa(){this.ba=new vs,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new di,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Fa(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Xa(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Rl(){this.ua=0,this.Wa=new Yn,this.vb=new Yn,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new wn,this.yc=new fn}function au(){this.xb=this.a=0,this.l=new ma,this.ca=new vs,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Tn,this.Pb=0,this.wd=new Tn,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Rl,this.ab=0,this.gc=xe(4,Xa),this.Oc=0}function Va(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ma,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ea(Ue,We,hn,bn,Rn,Cn,Mn){for(Ue=Ue==null?0:Ue[We+0],We=0;We<Mn;++We)Rn[Cn+We]=Ue+hn[bn+We]&255,Ue=Rn[Cn+We]}function kl(Ue,We,hn,bn,Rn,Cn,Mn){var Dn;if(Ue==null)Ea(null,null,hn,bn,Rn,Cn,Mn);else for(Dn=0;Dn<Mn;++Dn)Rn[Cn+Dn]=Ue[We+Dn]+hn[bn+Dn]&255}function Ao(Ue,We,hn,bn,Rn,Cn,Mn){if(Ue==null)Ea(null,null,hn,bn,Rn,Cn,Mn);else{var Dn,jn=Ue[We+0],qn=jn,tr=jn;for(Dn=0;Dn<Mn;++Dn)qn=tr+(jn=Ue[We+Dn])-qn,tr=hn[bn+Dn]+(-256&qn?0>qn?0:255:qn)&255,qn=jn,Rn[Cn+Dn]=tr}}function Cl(Ue,We,hn,bn){var Rn=We.width,Cn=We.o;if(e(Ue!=null&&We!=null),0>hn||0>=bn||hn+bn>Cn)return null;if(!Ue.Cc){if(Ue.ga==null){var Mn;if(Ue.ga=new Va,(Mn=Ue.ga==null)||(Mn=We.width*We.o,e(Ue.Gb.length==0),Ue.Gb=Ee(Mn),Ue.Uc=0,Ue.Gb==null?Mn=0:(Ue.mb=Ue.Gb,Ue.nb=Ue.Uc,Ue.rc=null,Mn=1),Mn=!Mn),!Mn){Mn=Ue.ga;var Dn=Ue.Fa,jn=Ue.P,qn=Ue.qc,tr=Ue.mb,pr=Ue.nb,mr=jn+1,cr=qn-1,Nr=Mn.l;if(e(Dn!=null&&tr!=null&&We!=null),Io[0]=null,Io[1]=Ea,Io[2]=kl,Io[3]=Ao,Mn.ca=tr,Mn.tb=pr,Mn.c=We.width,Mn.i=We.height,e(0<Mn.c&&0<Mn.i),1>=qn)We=0;else if(Mn.$a=Dn[jn+0]>>0&3,Mn.Z=Dn[jn+0]>>2&3,Mn.Lc=Dn[jn+0]>>4&3,jn=Dn[jn+0]>>6&3,0>Mn.$a||1<Mn.$a||4<=Mn.Z||1<Mn.Lc||jn)We=0;else if(Nr.put=Os,Nr.ac=ps,Nr.bc=Hs,Nr.ma=Mn,Nr.width=We.width,Nr.height=We.height,Nr.Da=We.Da,Nr.v=We.v,Nr.va=We.va,Nr.j=We.j,Nr.o=We.o,Mn.$a)e:{e(Mn.$a==1),We=lr();t:for(;;){if(We==null){We=0;break e}if(e(Mn!=null),Mn.mc=We,We.c=Mn.c,We.i=Mn.i,We.l=Mn.l,We.l.ma=Mn,We.l.width=Mn.c,We.l.height=Mn.i,We.a=0,Ln(We.m,Dn,mr,cr),!gr(Mn.c,Mn.i,1,We,null)||(We.ab==1&&We.gc[0].hc==3&&co(We.s)?(Mn.ic=1,Dn=We.c*We.i,We.Ta=null,We.Ua=0,We.V=Ee(Dn),We.Ba=0,We.V==null?(We.a=1,We=0):We=1):(Mn.ic=0,We=xr(We,Mn.c)),!We))break t;We=1;break e}Mn.mc=null,We=0}else We=cr>=Mn.c*Mn.i;Mn=!We}if(Mn)return null;Ue.ga.Lc!=1?Ue.Ga=0:bn=Cn-hn}e(Ue.ga!=null),e(hn+bn<=Cn);e:{if(We=(Dn=Ue.ga).c,Cn=Dn.l.o,Dn.$a==0){if(mr=Ue.rc,cr=Ue.Vc,Nr=Ue.Fa,jn=Ue.P+1+hn*We,qn=Ue.mb,tr=Ue.nb+hn*We,e(jn<=Ue.P+Ue.qc),Dn.Z!=0)for(e(Io[Dn.Z]!=null),Mn=0;Mn<bn;++Mn)Io[Dn.Z](mr,cr,Nr,jn,qn,tr,We),mr=qn,cr=tr,tr+=We,jn+=We;else for(Mn=0;Mn<bn;++Mn)_e(qn,tr,Nr,jn,We),mr=qn,cr=tr,tr+=We,jn+=We;Ue.rc=mr,Ue.Vc=cr}else{if(e(Dn.mc!=null),We=hn+bn,e((Mn=Dn.mc)!=null),e(We<=Mn.i),Mn.C>=We)We=1;else if(Dn.ic||dr(),Dn.ic){Dn=Mn.V,mr=Mn.Ba,cr=Mn.c;var Ir=Mn.i,ir=(Nr=1,jn=Mn.$/cr,qn=Mn.$%cr,tr=Mn.m,pr=Mn.s,Mn.$),sr=cr*Ir,Or=cr*We,Cr=pr.wc,Mr=ir<Or?os(pr,qn,jn):null;e(ir<=sr),e(We<=Ir),e(co(pr));t:for(;;){for(;!tr.h&&ir<Or;){if(qn&Cr||(Mr=os(pr,qn,jn)),e(Mr!=null),Hn(tr),256>(Ir=Is(Mr.G[0],Mr.H[0],tr)))Dn[mr+ir]=Ir,++ir,++qn>=cr&&(qn=0,++jn<=We&&!(jn%16)&&Vn(Mn,jn));else{if(!(280>Ir)){Nr=0;break t}Ir=Vs(Ir-256,tr);var hi,si=Is(Mr.G[4],Mr.H[4],tr);if(Hn(tr),!(ir>=(si=Ps(cr,si=Vs(si,tr)))&&sr-ir>=Ir)){Nr=0;break t}for(hi=0;hi<Ir;++hi)Dn[mr+ir+hi]=Dn[mr+ir+hi-si];for(ir+=Ir,qn+=Ir;qn>=cr;)qn-=cr,++jn<=We&&!(jn%16)&&Vn(Mn,jn);ir<Or&&qn&Cr&&(Mr=os(pr,qn,jn))}e(tr.h==Un(tr))}Vn(Mn,jn>We?We:jn);break t}!Nr||tr.h&&ir<sr?(Nr=0,Mn.a=tr.h?5:3):Mn.$=ir,We=Nr}else We=Kn(Mn,Mn.V,Mn.Ba,Mn.c,Mn.i,We,Hr);if(!We){bn=0;break e}}hn+bn>=Cn&&(Ue.Cc=1),bn=1}if(!bn)return null;if(Ue.Cc&&((bn=Ue.ga)!=null&&(bn.mc=null),Ue.ga=null,0<Ue.Ga))return alert("todo:WebPDequantizeLevels"),null}return Ue.nb+hn*Rn}function Ze(Ue,We,hn,bn,Rn,Cn){for(;0<Rn--;){var Mn,Dn=Ue,jn=We+(hn?1:0),qn=Ue,tr=We+(hn?0:3);for(Mn=0;Mn<bn;++Mn){var pr=qn[tr+4*Mn];pr!=255&&(pr*=32897,Dn[jn+4*Mn+0]=Dn[jn+4*Mn+0]*pr>>23,Dn[jn+4*Mn+1]=Dn[jn+4*Mn+1]*pr>>23,Dn[jn+4*Mn+2]=Dn[jn+4*Mn+2]*pr>>23)}We+=Cn}}function kn(Ue,We,hn,bn,Rn){for(;0<bn--;){var Cn;for(Cn=0;Cn<hn;++Cn){var Mn=Ue[We+2*Cn+0],Dn=15&(qn=Ue[We+2*Cn+1]),jn=4369*Dn,qn=(240&qn|qn>>4)*jn>>16;Ue[We+2*Cn+0]=(240&Mn|Mn>>4)*jn>>16&240|(15&Mn|Mn<<4)*jn>>16>>4&15,Ue[We+2*Cn+1]=240&qn|Dn}We+=Rn}}function Wn(Ue,We,hn,bn,Rn,Cn,Mn,Dn){var jn,qn,tr=255;for(qn=0;qn<Rn;++qn){for(jn=0;jn<bn;++jn){var pr=Ue[We+jn];Cn[Mn+4*jn]=pr,tr&=pr}We+=hn,Mn+=Dn}return tr!=255}function Zn(Ue,We,hn,bn,Rn){var Cn;for(Cn=0;Cn<Rn;++Cn)hn[bn+Cn]=Ue[We+Cn]>>8}function dr(){Ko=Ze,Es=kn,_s=Wn,zs=Zn}function Rr(Ue,We,hn){Ke[Ue]=function(bn,Rn,Cn,Mn,Dn,jn,qn,tr,pr,mr,cr,Nr,Ir,ir,sr,Or,Cr){var Mr,hi=Cr-1>>1,si=Dn[jn+0]|qn[tr+0]<<16,Ai=pr[mr+0]|cr[Nr+0]<<16;e(bn!=null);var ai=3*si+Ai+131074>>2;for(We(bn[Rn+0],255&ai,ai>>16,Ir,ir),Cn!=null&&(ai=3*Ai+si+131074>>2,We(Cn[Mn+0],255&ai,ai>>16,sr,Or)),Mr=1;Mr<=hi;++Mr){var rs=Dn[jn+Mr]|qn[tr+Mr]<<16,is=pr[mr+Mr]|cr[Nr+Mr]<<16,Zi=si+rs+Ai+is+524296,Ki=Zi+2*(rs+Ai)>>3;ai=Ki+si>>1,si=(Zi=Zi+2*(si+is)>>3)+rs>>1,We(bn[Rn+2*Mr-1],255&ai,ai>>16,Ir,ir+(2*Mr-1)*hn),We(bn[Rn+2*Mr-0],255&si,si>>16,Ir,ir+(2*Mr-0)*hn),Cn!=null&&(ai=Zi+Ai>>1,si=Ki+is>>1,We(Cn[Mn+2*Mr-1],255&ai,ai>>16,sr,Or+(2*Mr-1)*hn),We(Cn[Mn+2*Mr+0],255&si,si>>16,sr,Or+(2*Mr+0)*hn)),si=rs,Ai=is}1&Cr||(ai=3*si+Ai+131074>>2,We(bn[Rn+Cr-1],255&ai,ai>>16,Ir,ir+(Cr-1)*hn),Cn!=null&&(ai=3*Ai+si+131074>>2,We(Cn[Mn+Cr-1],255&ai,ai>>16,sr,Or+(Cr-1)*hn)))}}function jr(){Xo[sc]=kd,Xo[Ll]=Dl,Xo[zc]=Cd,Xo[$u]=Tu,Xo[Bu]=Zl,Xo[xs]=Wu,Xo[oc]=Rc,Xo[bu]=Dl,Xo[Xl]=Tu,Xo[Uu]=Zl,Xo[zu]=Wu}function ii(Ue){return Ue&-16384?0>Ue?0:255:Ue>>Fl}function ze(Ue,We){return ii((19077*Ue>>8)+(26149*We>>8)-14234)}function gn(Ue,We,hn){return ii((19077*Ue>>8)-(6419*We>>8)-(13320*hn>>8)+8708)}function En(Ue,We){return ii((19077*Ue>>8)+(33050*We>>8)-17685)}function Fn(Ue,We,hn,bn,Rn){bn[Rn+0]=ze(Ue,hn),bn[Rn+1]=gn(Ue,We,hn),bn[Rn+2]=En(Ue,We)}function ur(Ue,We,hn,bn,Rn){bn[Rn+0]=En(Ue,We),bn[Rn+1]=gn(Ue,We,hn),bn[Rn+2]=ze(Ue,hn)}function yr(Ue,We,hn,bn,Rn){var Cn=gn(Ue,We,hn);We=Cn<<3&224|En(Ue,We)>>3,bn[Rn+0]=248&ze(Ue,hn)|Cn>>5,bn[Rn+1]=We}function Br(Ue,We,hn,bn,Rn){var Cn=240&En(Ue,We)|15;bn[Rn+0]=240&ze(Ue,hn)|gn(Ue,We,hn)>>4,bn[Rn+1]=Cn}function qi(Ue,We,hn,bn,Rn){bn[Rn+0]=255,Fn(Ue,We,hn,bn,Rn+1)}function Xi(Ue,We,hn,bn,Rn){ur(Ue,We,hn,bn,Rn),bn[Rn+3]=255}function Gi(Ue,We,hn,bn,Rn){Fn(Ue,We,hn,bn,Rn),bn[Rn+3]=255}function cs(Ue,We){return 0>Ue?0:Ue>We?We:Ue}function gs(Ue,We,hn){Ke[Ue]=function(bn,Rn,Cn,Mn,Dn,jn,qn,tr,pr){for(var mr=tr+(-2&pr)*hn;tr!=mr;)We(bn[Rn+0],Cn[Mn+0],Dn[jn+0],qn,tr),We(bn[Rn+1],Cn[Mn+0],Dn[jn+0],qn,tr+hn),Rn+=2,++Mn,++jn,tr+=2*hn;1&pr&&We(bn[Rn+0],Cn[Mn+0],Dn[jn+0],qn,tr)}}function Fo(Ue,We,hn){return hn==0?Ue==0?We==0?6:5:We==0?4:0:hn}function mo(Ue,We,hn,bn,Rn){switch(Ue>>>30){case 3:hl(We,hn,bn,Rn,0);break;case 2:as(We,hn,bn,Rn);break;case 1:Po(We,hn,bn,Rn)}}function ja(Ue,We){var hn,bn,Rn=We.M,Cn=We.Nb,Mn=Ue.oc,Dn=Ue.pc+40,jn=Ue.oc,qn=Ue.pc+584,tr=Ue.oc,pr=Ue.pc+600;for(hn=0;16>hn;++hn)Mn[Dn+32*hn-1]=129;for(hn=0;8>hn;++hn)jn[qn+32*hn-1]=129,tr[pr+32*hn-1]=129;for(0<Rn?Mn[Dn-1-32]=jn[qn-1-32]=tr[pr-1-32]=129:(Te(Mn,Dn-32-1,127,21),Te(jn,qn-32-1,127,9),Te(tr,pr-32-1,127,9)),bn=0;bn<Ue.za;++bn){var mr=We.ya[We.aa+bn];if(0<bn){for(hn=-1;16>hn;++hn)_e(Mn,Dn+32*hn-4,Mn,Dn+32*hn+12,4);for(hn=-1;8>hn;++hn)_e(jn,qn+32*hn-4,jn,qn+32*hn+4,4),_e(tr,pr+32*hn-4,tr,pr+32*hn+4,4)}var cr=Ue.Gd,Nr=Ue.Hd+bn,Ir=mr.ad,ir=mr.Hc;if(0<Rn&&(_e(Mn,Dn-32,cr[Nr].y,0,16),_e(jn,qn-32,cr[Nr].f,0,8),_e(tr,pr-32,cr[Nr].ea,0,8)),mr.Za){var sr=Mn,Or=Dn-32+16;for(0<Rn&&(bn>=Ue.za-1?Te(sr,Or,cr[Nr].y[15],4):_e(sr,Or,cr[Nr+1].y,0,4)),hn=0;4>hn;hn++)sr[Or+128+hn]=sr[Or+256+hn]=sr[Or+384+hn]=sr[Or+0+hn];for(hn=0;16>hn;++hn,ir<<=2)sr=Mn,Or=Dn+kc[hn],Aa[mr.Ob[hn]](sr,Or),mo(ir,Ir,16*+hn,sr,Or)}else if(sr=Fo(bn,Rn,mr.Ob[0]),Uo[sr](Mn,Dn),ir!=0)for(hn=0;16>hn;++hn,ir<<=2)mo(ir,Ir,16*+hn,Mn,Dn+kc[hn]);for(hn=mr.Gc,sr=Fo(bn,Rn,mr.Dd),Yo[sr](jn,qn),Yo[sr](tr,pr),ir=Ir,sr=jn,Or=qn,255&(mr=hn>>0)&&(170&mr?pl(ir,256,sr,Or):aa(ir,256,sr,Or)),mr=tr,ir=pr,255&(hn>>=8)&&(170&hn?pl(Ir,320,mr,ir):aa(Ir,320,mr,ir)),Rn<Ue.Ub-1&&(_e(cr[Nr].y,0,Mn,Dn+480,16),_e(cr[Nr].f,0,jn,qn+224,8),_e(cr[Nr].ea,0,tr,pr+224,8)),hn=8*Cn*Ue.B,cr=Ue.sa,Nr=Ue.ta+16*bn+16*Cn*Ue.R,Ir=Ue.qa,mr=Ue.ra+8*bn+hn,ir=Ue.Ha,sr=Ue.Ia+8*bn+hn,hn=0;16>hn;++hn)_e(cr,Nr+hn*Ue.R,Mn,Dn+32*hn,16);for(hn=0;8>hn;++hn)_e(Ir,mr+hn*Ue.B,jn,qn+32*hn,8),_e(ir,sr+hn*Ue.B,tr,pr+32*hn,8)}}function $a(Ue,We,hn,bn,Rn,Cn,Mn,Dn,jn){var qn=[0],tr=[0],pr=0,mr=jn!=null?jn.kd:0,cr=jn??new Fa;if(Ue==null||12>hn)return 7;cr.data=Ue,cr.w=We,cr.ha=hn,We=[We],hn=[hn],cr.gb=[cr.gb];e:{var Nr=We,Ir=hn,ir=cr.gb;if(e(Ue!=null),e(Ir!=null),e(ir!=null),ir[0]=0,12<=Ir[0]&&!t(Ue,Nr[0],"RIFF")){if(t(Ue,Nr[0]+8,"WEBP")){ir=3;break e}var sr=Lr(Ue,Nr[0]+4);if(12>sr||4294967286<sr){ir=3;break e}if(mr&&sr>Ir[0]-8){ir=7;break e}ir[0]=sr,Nr[0]+=12,Ir[0]-=12}ir=0}if(ir!=0)return ir;for(sr=0<cr.gb[0],hn=hn[0];;){e:{var Or=Ue;Ir=We,ir=hn;var Cr=qn,Mr=tr,hi=Nr=[0];if((ai=pr=[pr])[0]=0,8>ir[0])ir=7;else{if(!t(Or,Ir[0],"VP8X")){if(Lr(Or,Ir[0]+4)!=10){ir=3;break e}if(18>ir[0]){ir=7;break e}var si=Lr(Or,Ir[0]+8),Ai=1+Vr(Or,Ir[0]+12);if(2147483648<=Ai*(Or=1+Vr(Or,Ir[0]+15))){ir=3;break e}hi!=null&&(hi[0]=si),Cr!=null&&(Cr[0]=Ai),Mr!=null&&(Mr[0]=Or),Ir[0]+=18,ir[0]-=18,ai[0]=1}ir=0}}if(pr=pr[0],Nr=Nr[0],ir!=0)return ir;if(Ir=!!(2&Nr),!sr&&pr)return 3;if(Cn!=null&&(Cn[0]=!!(16&Nr)),Mn!=null&&(Mn[0]=Ir),Dn!=null&&(Dn[0]=0),Mn=qn[0],Nr=tr[0],pr&&Ir&&jn==null){ir=0;break}if(4>hn){ir=7;break}if(sr&&pr||!sr&&!pr&&!t(Ue,We[0],"ALPH")){hn=[hn],cr.na=[cr.na],cr.P=[cr.P],cr.Sa=[cr.Sa];e:{si=Ue,ir=We,sr=hn;var ai=cr.gb;Cr=cr.na,Mr=cr.P,hi=cr.Sa,Ai=22,e(si!=null),e(sr!=null),Or=ir[0];var rs=sr[0];for(e(Cr!=null),e(hi!=null),Cr[0]=null,Mr[0]=null,hi[0]=0;;){if(ir[0]=Or,sr[0]=rs,8>rs){ir=7;break e}var is=Lr(si,Or+4);if(4294967286<is){ir=3;break e}var Zi=8+is+1&-2;if(Ai+=Zi,0<ai&&Ai>ai){ir=3;break e}if(!t(si,Or,"VP8 ")||!t(si,Or,"VP8L")){ir=0;break e}if(rs[0]<Zi){ir=7;break e}t(si,Or,"ALPH")||(Cr[0]=si,Mr[0]=Or+8,hi[0]=is),Or+=Zi,rs-=Zi}}if(hn=hn[0],cr.na=cr.na[0],cr.P=cr.P[0],cr.Sa=cr.Sa[0],ir!=0)break}hn=[hn],cr.Ja=[cr.Ja],cr.xa=[cr.xa];e:if(ai=Ue,ir=We,sr=hn,Cr=cr.gb[0],Mr=cr.Ja,hi=cr.xa,si=ir[0],Or=!t(ai,si,"VP8 "),Ai=!t(ai,si,"VP8L"),e(ai!=null),e(sr!=null),e(Mr!=null),e(hi!=null),8>sr[0])ir=7;else{if(Or||Ai){if(ai=Lr(ai,si+4),12<=Cr&&ai>Cr-12){ir=3;break e}if(mr&&ai>sr[0]-8){ir=7;break e}Mr[0]=ai,ir[0]+=8,sr[0]-=8,hi[0]=Ai}else hi[0]=5<=sr[0]&&ai[si+0]==47&&!(ai[si+4]>>5),Mr[0]=sr[0];ir=0}if(hn=hn[0],cr.Ja=cr.Ja[0],cr.xa=cr.xa[0],We=We[0],ir!=0)break;if(4294967286<cr.Ja)return 3;if(Dn==null||Ir||(Dn[0]=cr.xa?2:1),Mn=[Mn],Nr=[Nr],cr.xa){if(5>hn){ir=7;break}Dn=Mn,mr=Nr,Ir=Cn,Ue==null||5>hn?Ue=0:5<=hn&&Ue[We+0]==47&&!(Ue[We+4]>>5)?(sr=[0],ai=[0],Cr=[0],Ln(Mr=new Tn,Ue,We,hn),ci(Mr,sr,ai,Cr)?(Dn!=null&&(Dn[0]=sr[0]),mr!=null&&(mr[0]=ai[0]),Ir!=null&&(Ir[0]=Cr[0]),Ue=1):Ue=0):Ue=0}else{if(10>hn){ir=7;break}Dn=Nr,Ue==null||10>hn||!Wa(Ue,We+3,hn-3)?Ue=0:(mr=Ue[We+0]|Ue[We+1]<<8|Ue[We+2]<<16,Ir=16383&(Ue[We+7]<<8|Ue[We+6]),Ue=16383&(Ue[We+9]<<8|Ue[We+8]),1&mr||3<(mr>>1&7)||!(mr>>4&1)||mr>>5>=cr.Ja||!Ir||!Ue?Ue=0:(Mn&&(Mn[0]=Ir),Dn&&(Dn[0]=Ue),Ue=1))}if(!Ue||(Mn=Mn[0],Nr=Nr[0],pr&&(qn[0]!=Mn||tr[0]!=Nr)))return 3;jn!=null&&(jn[0]=cr,jn.offset=We-jn.w,e(4294967286>We-jn.w),e(jn.offset==jn.ha-hn));break}return ir==0||ir==7&&pr&&jn==null?(Cn!=null&&(Cn[0]|=cr.na!=null&&0<cr.na.length),bn!=null&&(bn[0]=Mn),Rn!=null&&(Rn[0]=Nr),0):ir}function lu(Ue,We,hn){var bn=We.width,Rn=We.height,Cn=0,Mn=0,Dn=bn,jn=Rn;if(We.Da=Ue!=null&&0<Ue.Da,We.Da&&(Dn=Ue.cd,jn=Ue.bd,Cn=Ue.v,Mn=Ue.j,11>hn||(Cn&=-2,Mn&=-2),0>Cn||0>Mn||0>=Dn||0>=jn||Cn+Dn>bn||Mn+jn>Rn))return 0;if(We.v=Cn,We.j=Mn,We.va=Cn+Dn,We.o=Mn+jn,We.U=Dn,We.T=jn,We.da=Ue!=null&&0<Ue.da,We.da){if(!gi(Dn,jn,hn=[Ue.ib],Cn=[Ue.hb]))return 0;We.ib=hn[0],We.hb=Cn[0]}return We.ob=Ue!=null&&Ue.ob,We.Kb=Ue==null||!Ue.Sd,We.da&&(We.ob=We.ib<3*bn/4&&We.hb<3*Rn/4,We.Kb=0),1}function uu(Ue){if(Ue==null)return 2;if(11>Ue.S){var We=Ue.f.RGBA;We.fb+=(Ue.height-1)*We.A,We.A=-We.A}else We=Ue.f.kb,Ue=Ue.height,We.O+=(Ue-1)*We.fa,We.fa=-We.fa,We.N+=(Ue-1>>1)*We.Ab,We.Ab=-We.Ab,We.W+=(Ue-1>>1)*We.Db,We.Db=-We.Db,We.F!=null&&(We.J+=(Ue-1)*We.lb,We.lb=-We.lb);return 0}function zl(Ue,We,hn,bn){if(bn==null||0>=Ue||0>=We)return 2;if(hn!=null){if(hn.Da){var Rn=hn.cd,Cn=hn.bd,Mn=-2&hn.v,Dn=-2&hn.j;if(0>Mn||0>Dn||0>=Rn||0>=Cn||Mn+Rn>Ue||Dn+Cn>We)return 2;Ue=Rn,We=Cn}if(hn.da){if(!gi(Ue,We,Rn=[hn.ib],Cn=[hn.hb]))return 2;Ue=Rn[0],We=Cn[0]}}bn.width=Ue,bn.height=We;e:{var jn=bn.width,qn=bn.height;if(Ue=bn.S,0>=jn||0>=qn||!(Ue>=sc&&13>Ue))Ue=2;else{if(0>=bn.Rd&&bn.sd==null){Mn=Cn=Rn=We=0;var tr=(Dn=jn*Hu[Ue])*qn;if(11>Ue||(Cn=(qn+1)/2*(We=(jn+1)/2),Ue==12&&(Mn=(Rn=jn)*qn)),(qn=Ee(tr+2*Cn+Mn))==null){Ue=1;break e}bn.sd=qn,11>Ue?((jn=bn.f.RGBA).eb=qn,jn.fb=0,jn.A=Dn,jn.size=tr):((jn=bn.f.kb).y=qn,jn.O=0,jn.fa=Dn,jn.Fd=tr,jn.f=qn,jn.N=0+tr,jn.Ab=We,jn.Cd=Cn,jn.ea=qn,jn.W=0+tr+Cn,jn.Db=We,jn.Ed=Cn,Ue==12&&(jn.F=qn,jn.J=0+tr+2*Cn),jn.Tc=Mn,jn.lb=Rn)}if(We=1,Rn=bn.S,Cn=bn.width,Mn=bn.height,Rn>=sc&&13>Rn)if(11>Rn)Ue=bn.f.RGBA,We&=(Dn=Math.abs(Ue.A))*(Mn-1)+Cn<=Ue.size,We&=Dn>=Cn*Hu[Rn],We&=Ue.eb!=null;else{Ue=bn.f.kb,Dn=(Cn+1)/2,tr=(Mn+1)/2,jn=Math.abs(Ue.fa),qn=Math.abs(Ue.Ab);var pr=Math.abs(Ue.Db),mr=Math.abs(Ue.lb),cr=mr*(Mn-1)+Cn;We&=jn*(Mn-1)+Cn<=Ue.Fd,We&=qn*(tr-1)+Dn<=Ue.Cd,We=(We&=pr*(tr-1)+Dn<=Ue.Ed)&jn>=Cn&qn>=Dn&pr>=Dn,We&=Ue.y!=null,We&=Ue.f!=null,We&=Ue.ea!=null,Rn==12&&(We&=mr>=Cn,We&=cr<=Ue.Tc,We&=Ue.F!=null)}else We=0;Ue=We?0:2}}return Ue!=0||hn!=null&&hn.fd&&(Ue=uu(bn)),Ue}var Us=64,cu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],du=24,hu=32,fu=8,Vo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];$r("Predictor0","PredictorAdd0"),Ke.Predictor0=function(){return 4278190080},Ke.Predictor1=function(Ue){return Ue},Ke.Predictor2=function(Ue,We,hn){return We[hn+0]},Ke.Predictor3=function(Ue,We,hn){return We[hn+1]},Ke.Predictor4=function(Ue,We,hn){return We[hn-1]},Ke.Predictor5=function(Ue,We,hn){return Fr(Fr(Ue,We[hn+1]),We[hn+0])},Ke.Predictor6=function(Ue,We,hn){return Fr(Ue,We[hn-1])},Ke.Predictor7=function(Ue,We,hn){return Fr(Ue,We[hn+0])},Ke.Predictor8=function(Ue,We,hn){return Fr(We[hn-1],We[hn+0])},Ke.Predictor9=function(Ue,We,hn){return Fr(We[hn+0],We[hn+1])},Ke.Predictor10=function(Ue,We,hn){return Fr(Fr(Ue,We[hn-1]),Fr(We[hn+0],We[hn+1]))},Ke.Predictor11=function(Ue,We,hn){var bn=We[hn+0];return 0>=ei(bn>>24&255,Ue>>24&255,(We=We[hn-1])>>24&255)+ei(bn>>16&255,Ue>>16&255,We>>16&255)+ei(bn>>8&255,Ue>>8&255,We>>8&255)+ei(255&bn,255&Ue,255&We)?bn:Ue},Ke.Predictor12=function(Ue,We,hn){var bn=We[hn+0];return(li((Ue>>24&255)+(bn>>24&255)-((We=We[hn-1])>>24&255))<<24|li((Ue>>16&255)+(bn>>16&255)-(We>>16&255))<<16|li((Ue>>8&255)+(bn>>8&255)-(We>>8&255))<<8|li((255&Ue)+(255&bn)-(255&We)))>>>0},Ke.Predictor13=function(Ue,We,hn){var bn=We[hn-1];return(yi((Ue=Fr(Ue,We[hn+0]))>>24&255,bn>>24&255)<<24|yi(Ue>>16&255,bn>>16&255)<<16|yi(Ue>>8&255,bn>>8&255)<<8|yi(Ue>>0&255,bn>>0&255))>>>0};var ql=Ke.PredictorAdd0;Ke.PredictorAdd1=fr,$r("Predictor2","PredictorAdd2"),$r("Predictor3","PredictorAdd3"),$r("Predictor4","PredictorAdd4"),$r("Predictor5","PredictorAdd5"),$r("Predictor6","PredictorAdd6"),$r("Predictor7","PredictorAdd7"),$r("Predictor8","PredictorAdd8"),$r("Predictor9","PredictorAdd9"),$r("Predictor10","PredictorAdd10"),$r("Predictor11","PredictorAdd11"),$r("Predictor12","PredictorAdd12"),$r("Predictor13","PredictorAdd13");var ul=Ke.PredictorAdd2;oi("ColorIndexInverseTransform","MapARGB","32b",function(Ue){return Ue>>8&255},function(Ue){return Ue}),oi("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(Ue){return Ue},function(Ue){return Ue>>8&255});var ic,jo=Ke.ColorIndexInverseTransform,pu=Ke.MapARGB,Fu=Ke.VP8LColorIndexInverseTransformAlpha,mu=Ke.MapAlpha,Qa=Ke.VP8LPredictorsAdd=[];Qa.length=16,(Ke.VP8LPredictors=[]).length=16,(Ke.VP8LPredictorsAdd_C=[]).length=16,(Ke.VP8LPredictors_C=[]).length=16;var Ol,$o,So,Ml,cl,dl,gu,hl,as,pl,Po,aa,Gl,Vu,Wl,Hl,Kl,la,ml,Ja,gl,_l,Nl,go,Ko,Es,_s,zs,Zs=Ee(511),Za=Ee(2041),_u=Ee(225),Yl=Ee(767),ju=0,el=Za,yu=_u,Bo=Yl,xa=Zs,sc=0,Ll=1,zc=2,$u=3,Bu=4,xs=5,oc=6,bu=7,Xl=8,Uu=9,zu=10,qu=[2,3,7],ac=[3,3,11],Ql=[280,256,256,256,40],qc=[0,1,1,1,0],Sd=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Pd=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Gc=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],uc=8,vu=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Gu=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Jl=null,Sc=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Pc=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Wc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Hc=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Id=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Rd=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ic=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Uo=[],Aa=[],Yo=[],tl=1,wu=2,Io=[],Xo=[];Rr("UpsampleRgbLinePair",Fn,3),Rr("UpsampleBgrLinePair",ur,3),Rr("UpsampleRgbaLinePair",Gi,4),Rr("UpsampleBgraLinePair",Xi,4),Rr("UpsampleArgbLinePair",qi,4),Rr("UpsampleRgba4444LinePair",Br,2),Rr("UpsampleRgb565LinePair",yr,2);var kd=Ke.UpsampleRgbLinePair,Cd=Ke.UpsampleBgrLinePair,Dl=Ke.UpsampleRgbaLinePair,Tu=Ke.UpsampleBgraLinePair,Zl=Ke.UpsampleArgbLinePair,Wu=Ke.UpsampleRgba4444LinePair,Rc=Ke.UpsampleRgb565LinePair,yl=16,Ba=1<<yl-1,ys=-227,ws=482,Fl=6,_o=0,Qo=Ee(256),eu=Ee(256),Eu=Ee(256),Jo=Ee(256),cc=Ee(ws-ys),Kc=Ee(ws-ys);gs("YuvToRgbRow",Fn,3),gs("YuvToBgrRow",ur,3),gs("YuvToRgbaRow",Gi,4),gs("YuvToBgraRow",Xi,4),gs("YuvToArgbRow",qi,4),gs("YuvToRgba4444Row",Br,2),gs("YuvToRgb565Row",yr,2);var kc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],tu=[0,2,8],Yc=[8,7,6,4,4,2,2,2,1,1,1,1],bl=1;this.WebPDecodeRGBA=function(Ue,We,hn,bn,Rn){var Cn=Ll,Mn=new oa,Dn=new vs;Mn.ba=Dn,Dn.S=Cn,Dn.width=[Dn.width],Dn.height=[Dn.height];var jn=Dn.width,qn=Dn.height,tr=new Ss;if(tr==null||Ue==null)var pr=2;else e(tr!=null),pr=$a(Ue,We,hn,tr.width,tr.height,tr.Pd,tr.Qd,tr.format,null);if(pr!=0?jn=0:(jn!=null&&(jn[0]=tr.width[0]),qn!=null&&(qn[0]=tr.height[0]),jn=1),jn){Dn.width=Dn.width[0],Dn.height=Dn.height[0],bn!=null&&(bn[0]=Dn.width),Rn!=null&&(Rn[0]=Dn.height);e:{if(bn=new ma,(Rn=new Fa).data=Ue,Rn.w=We,Rn.ha=hn,Rn.kd=1,We=[0],e(Rn!=null),((Ue=$a(Rn.data,Rn.w,Rn.ha,null,null,null,We,null,Rn))==0||Ue==7)&&We[0]&&(Ue=4),(We=Ue)==0){if(e(Mn!=null),bn.data=Rn.data,bn.w=Rn.w+Rn.offset,bn.ha=Rn.ha-Rn.offset,bn.put=Os,bn.ac=ps,bn.bc=Hs,bn.ma=Mn,Rn.xa){if((Ue=lr())==null){Mn=1;break e}if(function(mr,cr){var Nr=[0],Ir=[0],ir=[0];t:for(;;){if(mr==null)return 0;if(cr==null)return mr.a=2,0;if(mr.l=cr,mr.a=0,Ln(mr.m,cr.data,cr.w,cr.ha),!ci(mr.m,Nr,Ir,ir)){mr.a=3;break t}if(mr.xb=wu,cr.width=Nr[0],cr.height=Ir[0],!gr(Nr[0],Ir[0],1,mr,null))break t;return 1}return e(mr.a!=0),0}(Ue,bn)){if(bn=(We=zl(bn.width,bn.height,Mn.Oa,Mn.ba))==0){t:{bn=Ue;n:for(;;){if(bn==null){bn=0;break t}if(e(bn.s.yc!=null),e(bn.s.Ya!=null),e(0<bn.s.Wb),e((hn=bn.l)!=null),e((Rn=hn.ma)!=null),bn.xb!=0){if(bn.ca=Rn.ba,bn.tb=Rn.tb,e(bn.ca!=null),!lu(Rn.Oa,hn,$u)){bn.a=2;break n}if(!xr(bn,hn.width)||hn.da)break n;if((hn.da||Ti(bn.ca.S))&&dr(),11>bn.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),bn.ca.f.kb.F!=null&&dr()),bn.Pb&&0<bn.s.ua&&bn.s.vb.X==null&&!Qr(bn.s.vb,bn.s.Wa.Xa)){bn.a=1;break n}bn.xb=0}if(!Kn(bn,bn.V,bn.Ba,bn.c,bn.i,hn.o,vo))break n;Rn.Dc=bn.Ma,bn=1;break t}e(bn.a!=0),bn=0}bn=!bn}bn&&(We=Ue.a)}else We=Ue.a}else{if((Ue=new ts)==null){Mn=1;break e}if(Ue.Fa=Rn.na,Ue.P=Rn.P,Ue.qc=Rn.Sa,Ha(Ue,bn)){if((We=zl(bn.width,bn.height,Mn.Oa,Mn.ba))==0){if(Ue.Aa=0,hn=Mn.Oa,e((Rn=Ue)!=null),hn!=null){if(0<(jn=0>(jn=hn.Md)?0:100<jn?255:255*jn/100)){for(qn=tr=0;4>qn;++qn)12>(pr=Rn.pb[qn]).lc&&(pr.ia=jn*Yc[0>pr.lc?0:pr.lc]>>3),tr|=pr.ia;tr&&(alert("todo:VP8InitRandom"),Rn.ia=1)}Rn.Ga=hn.Id,100<Rn.Ga?Rn.Ga=100:0>Rn.Ga&&(Rn.Ga=0)}ba(Ue,bn)||(We=Ue.a)}}else We=Ue.a}We==0&&Mn.Oa!=null&&Mn.Oa.fd&&(We=uu(Mn.ba))}Mn=We}Cn=Mn!=0?null:11>Cn?Dn.f.RGBA.eb:Dn.f.kb.y}else Cn=null;return Cn};var Hu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function ke(Ke,Ye){for(var pn="",un=0;un<4;un++)pn+=String.fromCharCode(Ke[Ye++]);return pn}function Ce(Ke,Ye){return(Ke[Ye+0]<<0|Ke[Ye+1]<<8|Ke[Ye+2]<<16)>>>0}function Se(Ke,Ye){return(Ke[Ye+0]<<0|Ke[Ye+1]<<8|Ke[Ye+2]<<16|Ke[Ye+3]<<24)>>>0}new Re;var Ae=[0],Ie=[0],Me=[],Fe=new Re,Ve=r,je=function(Ke,Ye){var pn={},un=0,fn=!1,mn=0,wn=0;if(pn.frames=[],!function(vn,Un,zn,Hn){for(var Jn=0;Jn<Hn;Jn++)if(vn[Un+Jn]!=zn.charCodeAt(Jn))return!0;return!1}(Ke,Ye,"RIFF",4)){for(Se(Ke,Ye+=4),Ye+=8;Ye<Ke.length;){var Pn=ke(Ke,Ye),xn=Se(Ke,Ye+=4);Ye+=4;var In=xn+(1&xn);switch(Pn){case"VP8 ":case"VP8L":pn.frames[un]===void 0&&(pn.frames[un]={}),(Sn=pn.frames[un]).src_off=fn?wn:Ye-8,Sn.src_size=mn+xn+8,un++,fn&&(fn=!1,mn=0,wn=0);break;case"VP8X":(Sn=pn.header={}).feature_flags=Ke[Ye];var Ln=Ye+4;Sn.canvas_width=1+Ce(Ke,Ln),Ln+=3,Sn.canvas_height=1+Ce(Ke,Ln),Ln+=3;break;case"ALPH":fn=!0,mn=In+8,wn=Ye-8;break;case"ANIM":(Sn=pn.header).bgcolor=Se(Ke,Ye),Ln=Ye+4,Sn.loop_count=(Bn=Ke)[(Tn=Ln)+0]<<0|Bn[Tn+1]<<8,Ln+=2;break;case"ANMF":var $n,Sn;(Sn=pn.frames[un]={}).offset_x=2*Ce(Ke,Ye),Ye+=3,Sn.offset_y=2*Ce(Ke,Ye),Ye+=3,Sn.width=1+Ce(Ke,Ye),Ye+=3,Sn.height=1+Ce(Ke,Ye),Ye+=3,Sn.duration=Ce(Ke,Ye),Ye+=3,$n=Ke[Ye++],Sn.dispose=1&$n,Sn.blend=$n>>1&1}Pn!="ANMF"&&(Ye+=In)}var Bn,Tn;return pn}}(Ve,0);je.response=Ve,je.rgbaoutput=!0,je.dataurl=!1;var Be=je.header?je.header:null,qe=je.frames?je.frames:null;if(Be){Be.loop_counter=Be.loop_count,Ae=[Be.canvas_height],Ie=[Be.canvas_width];for(var He=0;He<qe.length&&qe[He].blend!=0;He++);}var Xe=qe[0],Je=Fe.WebPDecodeRGBA(Ve,Xe.src_off,Xe.src_size,Ie,Ae);Xe.rgba=Je,Xe.imgwidth=Ie[0],Xe.imgheight=Ae[0];for(var Qe=0;Qe<Ie[0]*Ae[0]*4;Qe++)Me[Qe]=Je[Qe];return this.width=Ie,this.height=Ae,this.data=Me,this}(function(r){var e=function(){return typeof zlibSync=="function"},t=function(Ae,Ie,Me,Fe){var Ve=4,je=xe;switch(Fe){case r.image_compression.FAST:Ve=1,je=Ee;break;case r.image_compression.MEDIUM:Ve=6,je=Pe;break;case r.image_compression.SLOW:Ve=9,je=Re}Ae=_e(Ae,Ie,Me,je);var Be=zlibSync(Ae,{level:Ve});return r.__addimage__.arrayBufferToBinaryString(Be)},_e=function(Ae,Ie,Me,Fe){for(var Ve,je,Be,qe=Ae.length/Ie,He=new Uint8Array(Ae.length+qe),Xe=Ce(),Je=0;Je<qe;Je+=1){if(Be=Je*Ie,Ve=Ae.subarray(Be,Be+Ie),Fe)He.set(Fe(Ve,Me,je),Be+Je);else{for(var Qe,Ke=Xe.length,Ye=[];Qe<Ke;Qe+=1)Ye[Qe]=Xe[Qe](Ve,Me,je);var pn=Se(Ye.concat());He.set(Ye[pn],Be+Je)}je=Ve}return He},Te=function(Ae){var Ie=Array.apply([],Ae);return Ie.unshift(0),Ie},Ee=function(Ae,Ie){var Me,Fe=[],Ve=Ae.length;Fe[0]=1;for(var je=0;je<Ve;je+=1)Me=Ae[je-Ie]||0,Fe[je+1]=Ae[je]-Me+256&255;return Fe},xe=function(Ae,Ie,Me){var Fe,Ve=[],je=Ae.length;Ve[0]=2;for(var Be=0;Be<je;Be+=1)Fe=Me&&Me[Be]||0,Ve[Be+1]=Ae[Be]-Fe+256&255;return Ve},Pe=function(Ae,Ie,Me){var Fe,Ve,je=[],Be=Ae.length;je[0]=3;for(var qe=0;qe<Be;qe+=1)Fe=Ae[qe-Ie]||0,Ve=Me&&Me[qe]||0,je[qe+1]=Ae[qe]+256-(Fe+Ve>>>1)&255;return je},Re=function(Ae,Ie,Me){var Fe,Ve,je,Be,qe=[],He=Ae.length;qe[0]=4;for(var Xe=0;Xe<He;Xe+=1)Fe=Ae[Xe-Ie]||0,Ve=Me&&Me[Xe]||0,je=Me&&Me[Xe-Ie]||0,Be=ke(Fe,Ve,je),qe[Xe+1]=Ae[Xe]-Be+256&255;return qe},ke=function(Ae,Ie,Me){if(Ae===Ie&&Ie===Me)return Ae;var Fe=Math.abs(Ie-Me),Ve=Math.abs(Ae-Me),je=Math.abs(Ae+Ie-Me-Me);return Fe<=Ve&&Fe<=je?Ae:Ve<=je?Ie:Me},Ce=function(){return[Te,Ee,xe,Pe,Re]},Se=function(Ae){var Ie=Ae.map(function(Me){return Me.reduce(function(Fe,Ve){return Fe+Math.abs(Ve)},0)});return Ie.indexOf(Math.min.apply(null,Ie))};r.processPNG=function(Ae,Ie,Me,Fe){var Ve,je,Be,qe,He,Xe,Je,Qe,Ke,Ye,pn,un,fn,mn,wn,Pn=this.decode.FLATE_DECODE,xn="";if(this.__addimage__.isArrayBuffer(Ae)&&(Ae=new Uint8Array(Ae)),this.__addimage__.isArrayBufferView(Ae)){if(Ae=(Be=new Kt(Ae)).imgData,je=Be.bits,Ve=Be.colorSpace,He=Be.colors,[4,6].indexOf(Be.colorType)!==-1){if(Be.bits===8){Ke=(Qe=Be.pixelBitlength==32?new Uint32Array(Be.decodePixels().buffer):Be.pixelBitlength==16?new Uint16Array(Be.decodePixels().buffer):new Uint8Array(Be.decodePixels().buffer)).length,pn=new Uint8Array(Ke*Be.colors),Ye=new Uint8Array(Ke);var In,Ln=Be.pixelBitlength-Be.bits;for(mn=0,wn=0;mn<Ke;mn++){for(fn=Qe[mn],In=0;In<Ln;)pn[wn++]=fn>>>In&255,In+=Be.bits;Ye[mn]=fn>>>In&255}}if(Be.bits===16){Ke=(Qe=new Uint32Array(Be.decodePixels().buffer)).length,pn=new Uint8Array(Ke*(32/Be.pixelBitlength)*Be.colors),Ye=new Uint8Array(Ke*(32/Be.pixelBitlength)),un=Be.colors>1,mn=0,wn=0;for(var $n=0;mn<Ke;)fn=Qe[mn++],pn[wn++]=fn>>>0&255,un&&(pn[wn++]=fn>>>16&255,fn=Qe[mn++],pn[wn++]=fn>>>0&255),Ye[$n++]=fn>>>16&255;je=8}Fe!==r.image_compression.NONE&&e()?(Ae=t(pn,Be.width*Be.colors,Be.colors,Fe),Je=t(Ye,Be.width,1,Fe)):(Ae=pn,Je=Ye,Pn=void 0)}if(Be.colorType===3&&(Ve=this.color_spaces.INDEXED,Xe=Be.palette,Be.transparency.indexed)){var Sn=Be.transparency.indexed,Bn=0;for(mn=0,Ke=Sn.length;mn<Ke;++mn)Bn+=Sn[mn];if((Bn/=255)===Ke-1&&Sn.indexOf(0)!==-1)qe=[Sn.indexOf(0)];else if(Bn!==Ke){for(Qe=Be.decodePixels(),Ye=new Uint8Array(Qe.length),mn=0,Ke=Qe.length;mn<Ke;mn++)Ye[mn]=Sn[Qe[mn]];Je=t(Ye,Be.width,1)}}var Tn=function(vn){var Un;switch(vn){case r.image_compression.FAST:Un=11;break;case r.image_compression.MEDIUM:Un=13;break;case r.image_compression.SLOW:Un=14;break;default:Un=12}return Un}(Fe);return Pn===this.decode.FLATE_DECODE&&(xn="/Predictor "+Tn+" "),xn+="/Colors "+He+" /BitsPerComponent "+je+" /Columns "+Be.width,(this.__addimage__.isArrayBuffer(Ae)||this.__addimage__.isArrayBufferView(Ae))&&(Ae=this.__addimage__.arrayBufferToBinaryString(Ae)),(Je&&this.__addimage__.isArrayBuffer(Je)||this.__addimage__.isArrayBufferView(Je))&&(Je=this.__addimage__.arrayBufferToBinaryString(Je)),{alias:Me,data:Ae,index:Ie,filter:Pn,decodeParameters:xn,transparency:qe,palette:Xe,sMask:Je,predictor:Tn,width:Be.width,height:Be.height,bitsPerComponent:je,colorSpace:Ve}}}})(E.API),function(r){r.processGIF89A=function(e,t,_e,Te){var Ee=new Zt(e),xe=Ee.width,Pe=Ee.height,Re=[];Ee.decodeAndBlitFrameRGBA(0,Re);var ke={data:Re,width:xe,height:Pe},Ce=new Qt(100).encode(ke,100);return r.processJPEG.call(this,Ce,t,_e,Te)},r.processGIF87A=r.processGIF89A}(E.API),te.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var e=0;e<r;e++){var t=this.datav.getUint8(this.pos++,!0),_e=this.datav.getUint8(this.pos++,!0),Te=this.datav.getUint8(this.pos++,!0),Ee=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:Te,green:_e,blue:t,quad:Ee}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},te.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[r]()}catch(t){a.log("bit decode error:"+t)}},te.prototype.bit1=function(){var r,e=Math.ceil(this.width/8),t=e%4;for(r=this.height-1;r>=0;r--){for(var _e=this.bottom_up?r:this.height-1-r,Te=0;Te<e;Te++)for(var Ee=this.datav.getUint8(this.pos++,!0),xe=_e*this.width*4+8*Te*4,Pe=0;Pe<8&&8*Te+Pe<this.width;Pe++){var Re=this.palette[Ee>>7-Pe&1];this.data[xe+4*Pe]=Re.blue,this.data[xe+4*Pe+1]=Re.green,this.data[xe+4*Pe+2]=Re.red,this.data[xe+4*Pe+3]=255}t!==0&&(this.pos+=4-t)}},te.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),e=r%4,t=this.height-1;t>=0;t--){for(var _e=this.bottom_up?t:this.height-1-t,Te=0;Te<r;Te++){var Ee=this.datav.getUint8(this.pos++,!0),xe=_e*this.width*4+2*Te*4,Pe=Ee>>4,Re=15&Ee,ke=this.palette[Pe];if(this.data[xe]=ke.blue,this.data[xe+1]=ke.green,this.data[xe+2]=ke.red,this.data[xe+3]=255,2*Te+1>=this.width)break;ke=this.palette[Re],this.data[xe+4]=ke.blue,this.data[xe+4+1]=ke.green,this.data[xe+4+2]=ke.red,this.data[xe+4+3]=255}e!==0&&(this.pos+=4-e)}},te.prototype.bit8=function(){for(var r=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,_e=0;_e<this.width;_e++){var Te=this.datav.getUint8(this.pos++,!0),Ee=t*this.width*4+4*_e;if(Te<this.palette.length){var xe=this.palette[Te];this.data[Ee]=xe.red,this.data[Ee+1]=xe.green,this.data[Ee+2]=xe.blue,this.data[Ee+3]=255}else this.data[Ee]=255,this.data[Ee+1]=255,this.data[Ee+2]=255,this.data[Ee+3]=255}r!==0&&(this.pos+=4-r)}},te.prototype.bit15=function(){for(var r=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var _e=this.bottom_up?t:this.height-1-t,Te=0;Te<this.width;Te++){var Ee=this.datav.getUint16(this.pos,!0);this.pos+=2;var xe=(Ee&e)/e*255|0,Pe=(Ee>>5&e)/e*255|0,Re=(Ee>>10&e)/e*255|0,ke=Ee>>15?255:0,Ce=_e*this.width*4+4*Te;this.data[Ce]=Re,this.data[Ce+1]=Pe,this.data[Ce+2]=xe,this.data[Ce+3]=ke}this.pos+=r}},te.prototype.bit16=function(){for(var r=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),_e=this.height-1;_e>=0;_e--){for(var Te=this.bottom_up?_e:this.height-1-_e,Ee=0;Ee<this.width;Ee++){var xe=this.datav.getUint16(this.pos,!0);this.pos+=2;var Pe=(xe&e)/e*255|0,Re=(xe>>5&t)/t*255|0,ke=(xe>>11)/e*255|0,Ce=Te*this.width*4+4*Ee;this.data[Ce]=ke,this.data[Ce+1]=Re,this.data[Ce+2]=Pe,this.data[Ce+3]=255}this.pos+=r}},te.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var _e=this.datav.getUint8(this.pos++,!0),Te=this.datav.getUint8(this.pos++,!0),Ee=this.datav.getUint8(this.pos++,!0),xe=e*this.width*4+4*t;this.data[xe]=Ee,this.data[xe+1]=Te,this.data[xe+2]=_e,this.data[xe+3]=255}this.pos+=this.width%4}},te.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var _e=this.datav.getUint8(this.pos++,!0),Te=this.datav.getUint8(this.pos++,!0),Ee=this.datav.getUint8(this.pos++,!0),xe=this.datav.getUint8(this.pos++,!0),Pe=e*this.width*4+4*t;this.data[Pe]=Ee,this.data[Pe+1]=Te,this.data[Pe+2]=_e,this.data[Pe+3]=xe}},te.prototype.getData=function(){return this.data},function(r){r.processBMP=function(e,t,_e,Te){var Ee=new te(e,!1),xe=Ee.width,Pe=Ee.height,Re={data:Ee.getData(),width:xe,height:Pe},ke=new Qt(100).encode(Re,100);return r.processJPEG.call(this,ke,t,_e,Te)}}(E.API),ee.prototype.getData=function(){return this.data},function(r){r.processWEBP=function(e,t,_e,Te){var Ee=new ee(e),xe=Ee.width,Pe=Ee.height,Re={data:Ee.getData(),width:xe,height:Pe},ke=new Qt(100).encode(Re,100);return r.processJPEG.call(this,ke,t,_e,Te)}}(E.API),E.API.processRGBA=function(r,e,t){for(var _e=r.data,Te=_e.length,Ee=new Uint8Array(Te/4*3),xe=new Uint8Array(Te/4),Pe=0,Re=0,ke=0;ke<Te;ke+=4){var Ce=_e[ke],Se=_e[ke+1],Ae=_e[ke+2],Ie=_e[ke+3];Ee[Pe++]=Ce,Ee[Pe++]=Se,Ee[Pe++]=Ae,xe[Re++]=Ie}var Me=this.__addimage__.arrayBufferToBinaryString(Ee);return{alpha:this.__addimage__.arrayBufferToBinaryString(xe),data:Me,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},E.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Vt=E.API,Gt=Vt.getCharWidthsArray=function(r,e){var t,_e,Te=(e=e||{}).font||this.internal.getFont(),Ee=e.fontSize||this.internal.getFontSize(),xe=e.charSpace||this.internal.getCharSpace(),Pe=e.widths?e.widths:Te.metadata.Unicode.widths,Re=Pe.fof?Pe.fof:1,ke=e.kerning?e.kerning:Te.metadata.Unicode.kerning,Ce=ke.fof?ke.fof:1,Se=e.doKerning!==!1,Ae=0,Ie=r.length,Me=0,Fe=Pe[0]||Re,Ve=[];for(t=0;t<Ie;t++)_e=r.charCodeAt(t),typeof Te.metadata.widthOfString=="function"?Ve.push((Te.metadata.widthOfGlyph(Te.metadata.characterToGlyph(_e))+xe*(1e3/Ee)||0)/1e3):(Ae=Se&&_typeof(ke[_e])==="object"&&!isNaN(parseInt(ke[_e][Me],10))?ke[_e][Me]/Ce:0,Ve.push((Pe[_e]||Fe)/Re+Ae)),Me=_e;return Ve},Yt=Vt.getStringUnitWidth=function(r,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),_e=e.font||this.internal.getFont(),Te=e.charSpace||this.internal.getCharSpace();return Vt.processArabic&&(r=Vt.processArabic(r)),typeof _e.metadata.widthOfString=="function"?_e.metadata.widthOfString(r,t,Te)/t:Gt.apply(this,arguments).reduce(function(Ee,xe){return Ee+xe},0)},Jt=function(r,e,t,_e){for(var Te=[],Ee=0,xe=r.length,Pe=0;Ee!==xe&&Pe+e[Ee]<t;)Pe+=e[Ee],Ee++;Te.push(r.slice(0,Ee));var Re=Ee;for(Pe=0;Ee!==xe;)Pe+e[Ee]>_e&&(Te.push(r.slice(Re,Ee)),Pe=0,Re=Ee),Pe+=e[Ee],Ee++;return Re!==Ee&&Te.push(r.slice(Re,Ee)),Te},Xt=function(r,e,t){t||(t={});var _e,Te,Ee,xe,Pe,Re,ke,Ce=[],Se=[Ce],Ae=t.textIndent||0,Ie=0,Me=0,Fe=r.split(" "),Ve=Gt.apply(this,[" ",t])[0];if(Re=t.lineIndent===-1?Fe[0].length+2:t.lineIndent||0){var je=Array(Re).join(" "),Be=[];Fe.map(function(He){(He=He.split(/\s*\n/)).length>1?Be=Be.concat(He.map(function(Xe,Je){return(Je&&Xe.length?`
`:"")+Xe})):Be.push(He[0])}),Fe=Be,Re=Yt.apply(this,[je,t])}for(Ee=0,xe=Fe.length;Ee<xe;Ee++){var qe=0;if(_e=Fe[Ee],Re&&_e[0]==`
`&&(_e=_e.substr(1),qe=1),Ae+Ie+(Me=(Te=Gt.apply(this,[_e,t])).reduce(function(He,Xe){return He+Xe},0))>e||qe){if(Me>e){for(Pe=Jt.apply(this,[_e,Te,e-(Ae+Ie),e]),Ce.push(Pe.shift()),Ce=[Pe.pop()];Pe.length;)Se.push([Pe.shift()]);Me=Te.slice(_e.length-(Ce[0]?Ce[0].length:0)).reduce(function(He,Xe){return He+Xe},0)}else Ce=[_e];Se.push(Ce),Ae=Me+Re,Ie=Ve}else Ce.push(_e),Ae+=Ie+Me,Ie=Ve}return ke=Re?function(He,Xe){return(Xe?je:"")+He.join(" ")}:function(He){return He.join(" ")},Se.map(ke)},Vt.splitTextToSize=function(r,e,t){var _e,Te=(t=t||{}).fontSize||this.internal.getFontSize(),Ee=(function(Ce){if(Ce.widths&&Ce.kerning)return{widths:Ce.widths,kerning:Ce.kerning};var Se=this.internal.getFont(Ce.fontName,Ce.fontStyle);return Se.metadata.Unicode?{widths:Se.metadata.Unicode.widths||{0:1},kerning:Se.metadata.Unicode.kerning||{}}:{font:Se.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);_e=Array.isArray(r)?r:String(r).split(/\r?\n/);var xe=1*this.internal.scaleFactor*e/Te;Ee.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/Te:0,Ee.lineIndent=t.lineIndent;var Pe,Re,ke=[];for(Pe=0,Re=_e.length;Pe<Re;Pe++)ke=ke.concat(Xt.apply(this,[_e[Pe],xe,Ee]));return ke},function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},_e={},Te=0;Te<e.length;Te++)t[e[Te]]="0123456789abcdef"[Te],_e["0123456789abcdef"[Te]]=e[Te];var Ee=function(Se){return"0x"+parseInt(Se,10).toString(16)},xe=r.__fontmetrics__.compress=function(Se){var Ae,Ie,Me,Fe,Ve=["{"];for(var je in Se){if(Ae=Se[je],isNaN(parseInt(je,10))?Ie="'"+je+"'":(je=parseInt(je,10),Ie=(Ie=Ee(je).slice(2)).slice(0,-1)+_e[Ie.slice(-1)]),typeof Ae=="number")Ae<0?(Me=Ee(Ae).slice(3),Fe="-"):(Me=Ee(Ae).slice(2),Fe=""),Me=Fe+Me.slice(0,-1)+_e[Me.slice(-1)];else{if(_typeof(Ae)!=="object")throw new Error("Don't know what to do with value type "+_typeof(Ae)+".");Me=xe(Ae)}Ve.push(Ie+Me)}return Ve.push("}"),Ve.join("")},Pe=r.__fontmetrics__.uncompress=function(Se){if(typeof Se!="string")throw new Error("Invalid argument passed to uncompress.");for(var Ae,Ie,Me,Fe,Ve={},je=1,Be=Ve,qe=[],He="",Xe="",Je=Se.length-1,Qe=1;Qe<Je;Qe+=1)(Fe=Se[Qe])=="'"?Ae?(Me=Ae.join(""),Ae=void 0):Ae=[]:Ae?Ae.push(Fe):Fe=="{"?(qe.push([Be,Me]),Be={},Me=void 0):Fe=="}"?((Ie=qe.pop())[0][Ie[1]]=Be,Me=void 0,Be=Ie[0]):Fe=="-"?je=-1:Me===void 0?t.hasOwnProperty(Fe)?(He+=t[Fe],Me=parseInt(He,16)*je,je=1,He=""):He+=Fe:t.hasOwnProperty(Fe)?(Xe+=t[Fe],Be[Me]=parseInt(Xe,16)*je,je=1,Me=void 0,Xe=""):Xe+=Fe;return Ve},Re={codePages:["WinAnsiEncoding"],WinAnsiEncoding:Pe("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},ke={Unicode:{Courier:Re,"Courier-Bold":Re,"Courier-BoldOblique":Re,"Courier-Oblique":Re,Helvetica:Re,"Helvetica-Bold":Re,"Helvetica-BoldOblique":Re,"Helvetica-Oblique":Re,"Times-Roman":Re,"Times-Bold":Re,"Times-BoldItalic":Re,"Times-Italic":Re}},Ce={Unicode:{"Courier-Oblique":Pe("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":Pe("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":Pe("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:Pe("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":Pe("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":Pe("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:Pe("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:Pe("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":Pe("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:Pe("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":Pe("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":Pe("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":Pe("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":Pe("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(Se){var Ae=Se.font,Ie=Ce.Unicode[Ae.postScriptName];Ie&&(Ae.metadata.Unicode={},Ae.metadata.Unicode.widths=Ie.widths,Ae.metadata.Unicode.kerning=Ie.kerning);var Me=ke.Unicode[Ae.postScriptName];Me&&(Ae.metadata.Unicode.encoding=Me,Ae.encoding=Me.codePages[0])}])}(E.API),function(r){var e=function(t){for(var _e=t.length,Te=new Uint8Array(_e),Ee=0;Ee<_e;Ee++)Te[Ee]=t.charCodeAt(Ee);return Te};r.API.events.push(["addFont",function(t){var _e=void 0,Te=t.font,Ee=t.instance;if(!Te.isStandardFont){if(Ee===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+Te.postScriptName+"').");if(typeof(_e=Ee.existsFileInVFS(Te.postScriptName)===!1?Ee.loadFile(Te.postScriptName):Ee.getFileFromVFS(Te.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+Te.postScriptName+"').");(function(xe,Pe){Pe=/^\x00\x01\x00\x00/.test(Pe)?e(Pe):e(u(Pe)),xe.metadata=r.API.TTFFont.open(Pe),xe.metadata.Unicode=xe.metadata.Unicode||{encoding:{},kerning:{},widths:[]},xe.metadata.glyIdsUsed=[0]})(Te,_e)}}])}(E),function(r){function e(){return(n.canvg?Promise.resolve(n.canvg):__vitePreload(()=>import("./index.es-CpgzwqiH.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}E.API.addSvgAsImage=function(t,_e,Te,Ee,xe,Pe,Re,ke){if(isNaN(_e)||isNaN(Te))throw a.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(Ee)||isNaN(xe))throw a.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var Ce=document.createElement("canvas");Ce.width=Ee,Ce.height=xe;var Se=Ce.getContext("2d");Se.fillStyle="#fff",Se.fillRect(0,0,Ce.width,Ce.height);var Ae={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},Ie=this;return e().then(function(Me){return Me.fromString(Se,t,Ae)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(Me){return Me.render(Ae)}).then(function(){Ie.addImage(Ce.toDataURL("image/jpeg",1),_e,Te,Ee,xe,Re,ke)})}}(),E.API.putTotalPages=function(r){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(r,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var _e=1;_e<=this.internal.getNumberOfPages();_e++)for(var Te=0;Te<this.internal.pages[_e].length;Te++)this.internal.pages[_e][Te]=this.internal.pages[_e][Te].replace(e,t);return this},E.API.viewerPreferences=function(r,e){var t;r=r||{},e=e||!1;var _e,Te,Ee,xe={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},Pe=Object.keys(xe),Re=[],ke=0,Ce=0,Se=0;function Ae(Me,Fe){var Ve,je=!1;for(Ve=0;Ve<Me.length;Ve+=1)Me[Ve]===Fe&&(je=!0);return je}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(xe)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,r==="reset"||e===!0){var Ie=Pe.length;for(Se=0;Se<Ie;Se+=1)t[Pe[Se]].value=t[Pe[Se]].defaultValue,t[Pe[Se]].explicitSet=!1}if(_typeof(r)==="object"){for(Te in r)if(Ee=r[Te],Ae(Pe,Te)&&Ee!==void 0){if(t[Te].type==="boolean"&&typeof Ee=="boolean")t[Te].value=Ee;else if(t[Te].type==="name"&&Ae(t[Te].valueSet,Ee))t[Te].value=Ee;else if(t[Te].type==="integer"&&Number.isInteger(Ee))t[Te].value=Ee;else if(t[Te].type==="array"){for(ke=0;ke<Ee.length;ke+=1)if(_e=!0,Ee[ke].length===1&&typeof Ee[ke][0]=="number")Re.push(String(Ee[ke]-1));else if(Ee[ke].length>1){for(Ce=0;Ce<Ee[ke].length;Ce+=1)typeof Ee[ke][Ce]!="number"&&(_e=!1);_e===!0&&Re.push([Ee[ke][0]-1,Ee[ke][1]-1].join(" "))}t[Te].value="["+Re.join(" ")+"]"}else t[Te].value=t[Te].defaultValue;t[Te].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var Me,Fe=[];for(Me in t)t[Me].explicitSet===!0&&(t[Me].type==="name"?Fe.push("/"+Me+" /"+t[Me].value):Fe.push("/"+Me+" "+t[Me].value));Fe.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+Fe.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(r){var e=function(){var _e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',Te=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),Ee=unescape(encodeURIComponent(_e)),xe=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),Pe=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),Re=unescape(encodeURIComponent("</x:xmpmeta>")),ke=Ee.length+xe.length+Pe.length+Te.length+Re.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+ke+" >>"),this.internal.write("stream"),this.internal.write(Te+Ee+xe+Pe+Re),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(_e,Te){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:_e,namespaceuri:Te||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(E.API),function(r){var e=r.API,t=e.pdfEscape16=function(Ee,xe){for(var Pe,Re=xe.metadata.Unicode.widths,ke=["","0","00","000","0000"],Ce=[""],Se=0,Ae=Ee.length;Se<Ae;++Se){if(Pe=xe.metadata.characterToGlyph(Ee.charCodeAt(Se)),xe.metadata.glyIdsUsed.push(Pe),xe.metadata.toUnicode[Pe]=Ee.charCodeAt(Se),Re.indexOf(Pe)==-1&&(Re.push(Pe),Re.push([parseInt(xe.metadata.widthOfGlyph(Pe),10)])),Pe=="0")return Ce.join("");Pe=Pe.toString(16),Ce.push(ke[4-Pe.length],Pe)}return Ce.join("")},_e=function(Ee){var xe,Pe,Re,ke,Ce,Se,Ae;for(Ce=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,Re=[],Se=0,Ae=(Pe=Object.keys(Ee).sort(function(Ie,Me){return Ie-Me})).length;Se<Ae;Se++)xe=Pe[Se],Re.length>=100&&(Ce+=`
`+Re.length+` beginbfchar
`+Re.join(`
`)+`
endbfchar`,Re=[]),Ee[xe]!==void 0&&Ee[xe]!==null&&typeof Ee[xe].toString=="function"&&(ke=("0000"+Ee[xe].toString(16)).slice(-4),xe=("0000"+(+xe).toString(16)).slice(-4),Re.push("<"+xe+"><"+ke+">"));return Re.length&&(Ce+=`
`+Re.length+` beginbfchar
`+Re.join(`
`)+`
endbfchar
`),Ce+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(Ee){(function(xe){var Pe=xe.font,Re=xe.out,ke=xe.newObject,Ce=xe.putStream;if(Pe.metadata instanceof r.API.TTFFont&&Pe.encoding==="Identity-H"){for(var Se=Pe.metadata.Unicode.widths,Ae=Pe.metadata.subset.encode(Pe.metadata.glyIdsUsed,1),Ie="",Me=0;Me<Ae.length;Me++)Ie+=String.fromCharCode(Ae[Me]);var Fe=ke();Ce({data:Ie,addLength1:!0,objectId:Fe}),Re("endobj");var Ve=ke();Ce({data:_e(Pe.metadata.toUnicode),addLength1:!0,objectId:Ve}),Re("endobj");var je=ke();Re("<<"),Re("/Type /FontDescriptor"),Re("/FontName /"+F(Pe.fontName)),Re("/FontFile2 "+Fe+" 0 R"),Re("/FontBBox "+r.API.PDFObject.convert(Pe.metadata.bbox)),Re("/Flags "+Pe.metadata.flags),Re("/StemV "+Pe.metadata.stemV),Re("/ItalicAngle "+Pe.metadata.italicAngle),Re("/Ascent "+Pe.metadata.ascender),Re("/Descent "+Pe.metadata.decender),Re("/CapHeight "+Pe.metadata.capHeight),Re(">>"),Re("endobj");var Be=ke();Re("<<"),Re("/Type /Font"),Re("/BaseFont /"+F(Pe.fontName)),Re("/FontDescriptor "+je+" 0 R"),Re("/W "+r.API.PDFObject.convert(Se)),Re("/CIDToGIDMap /Identity"),Re("/DW 1000"),Re("/Subtype /CIDFontType2"),Re("/CIDSystemInfo"),Re("<<"),Re("/Supplement 0"),Re("/Registry (Adobe)"),Re("/Ordering ("+Pe.encoding+")"),Re(">>"),Re(">>"),Re("endobj"),Pe.objectNumber=ke(),Re("<<"),Re("/Type /Font"),Re("/Subtype /Type0"),Re("/ToUnicode "+Ve+" 0 R"),Re("/BaseFont /"+F(Pe.fontName)),Re("/Encoding /"+Pe.encoding),Re("/DescendantFonts ["+Be+" 0 R]"),Re(">>"),Re("endobj"),Pe.isAlreadyPutted=!0}})(Ee)}]),e.events.push(["putFont",function(Ee){(function(xe){var Pe=xe.font,Re=xe.out,ke=xe.newObject,Ce=xe.putStream;if(Pe.metadata instanceof r.API.TTFFont&&Pe.encoding==="WinAnsiEncoding"){for(var Se=Pe.metadata.rawData,Ae="",Ie=0;Ie<Se.length;Ie++)Ae+=String.fromCharCode(Se[Ie]);var Me=ke();Ce({data:Ae,addLength1:!0,objectId:Me}),Re("endobj");var Fe=ke();Ce({data:_e(Pe.metadata.toUnicode),addLength1:!0,objectId:Fe}),Re("endobj");var Ve=ke();Re("<<"),Re("/Descent "+Pe.metadata.decender),Re("/CapHeight "+Pe.metadata.capHeight),Re("/StemV "+Pe.metadata.stemV),Re("/Type /FontDescriptor"),Re("/FontFile2 "+Me+" 0 R"),Re("/Flags 96"),Re("/FontBBox "+r.API.PDFObject.convert(Pe.metadata.bbox)),Re("/FontName /"+F(Pe.fontName)),Re("/ItalicAngle "+Pe.metadata.italicAngle),Re("/Ascent "+Pe.metadata.ascender),Re(">>"),Re("endobj"),Pe.objectNumber=ke();for(var je=0;je<Pe.metadata.hmtx.widths.length;je++)Pe.metadata.hmtx.widths[je]=parseInt(Pe.metadata.hmtx.widths[je]*(1e3/Pe.metadata.head.unitsPerEm));Re("<</Subtype/TrueType/Type/Font/ToUnicode "+Fe+" 0 R/BaseFont/"+F(Pe.fontName)+"/FontDescriptor "+Ve+" 0 R/Encoding/"+Pe.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(Pe.metadata.hmtx.widths)+">>"),Re("endobj"),Pe.isAlreadyPutted=!0}})(Ee)}]);var Te=function(Ee){var xe,Pe=Ee.text||"",Re=Ee.x,ke=Ee.y,Ce=Ee.options||{},Se=Ee.mutex||{},Ae=Se.pdfEscape,Ie=Se.activeFontKey,Me=Se.fonts,Fe=Ie,Ve="",je=0,Be="",qe=Me[Fe].encoding;if(Me[Fe].encoding!=="Identity-H")return{text:Pe,x:Re,y:ke,options:Ce,mutex:Se};for(Be=Pe,Fe=Ie,Array.isArray(Pe)&&(Be=Pe[0]),je=0;je<Be.length;je+=1)Me[Fe].metadata.hasOwnProperty("cmap")&&(xe=Me[Fe].metadata.cmap.unicode.codeMap[Be[je].charCodeAt(0)]),xe||Be[je].charCodeAt(0)<256&&Me[Fe].metadata.hasOwnProperty("Unicode")?Ve+=Be[je]:Ve+="";var He="";return parseInt(Fe.slice(1))<14||qe==="WinAnsiEncoding"?He=Ae(Ve,Fe).split("").map(function(Xe){return Xe.charCodeAt(0).toString(16)}).join(""):qe==="Identity-H"&&(He=t(Ve,Me[Fe])),Se.isHex=!0,{text:He,x:Re,y:ke,options:Ce,mutex:Se}};e.events.push(["postProcessText",function(Ee){var xe=Ee.text||"",Pe=[],Re={text:xe,x:Ee.x,y:Ee.y,options:Ee.options,mutex:Ee.mutex};if(Array.isArray(xe)){var ke=0;for(ke=0;ke<xe.length;ke+=1)Array.isArray(xe[ke])&&xe[ke].length===3?Pe.push([Te(Object.assign({},Re,{text:xe[ke][0]})).text,xe[ke][1],xe[ke][2]]):Pe.push(Te(Object.assign({},Re,{text:xe[ke]})).text);Ee.text=Pe}else Ee.text=Te(Object.assign({},Re,{text:xe})).text}])}(E),function(r){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},r.addFileToVFS=function(t,_e){return e.call(this),this.internal.vFS[t]=_e,this},r.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(E.API),function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(_e){var Te,Ee,xe,Pe,Re,ke,Ce,Se=e,Ae=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],Ie=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],Me={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},Fe={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},Ve=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],je=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Be=!1,qe=0;this.__bidiEngine__={};var He=function(un){var fn=un.charCodeAt(),mn=fn>>8,wn=Fe[mn];return wn!==void 0?Se[256*wn+(255&fn)]:mn===252||mn===253?"AL":je.test(mn)?"L":mn===8?"R":"N"},Xe=function(un){for(var fn,mn=0;mn<un.length;mn++){if((fn=He(un.charAt(mn)))==="L")return!1;if(fn==="R")return!0}return!1},Je=function(un,fn,mn,wn){var Pn,xn,In,Ln,$n=fn[wn];switch($n){case"L":case"R":Be=!1;break;case"N":case"AN":break;case"EN":Be&&($n="AN");break;case"AL":Be=!0,$n="R";break;case"WS":$n="N";break;case"CS":wn<1||wn+1>=fn.length||(Pn=mn[wn-1])!=="EN"&&Pn!=="AN"||(xn=fn[wn+1])!=="EN"&&xn!=="AN"?$n="N":Be&&(xn="AN"),$n=xn===Pn?xn:"N";break;case"ES":$n=(Pn=wn>0?mn[wn-1]:"B")==="EN"&&wn+1<fn.length&&fn[wn+1]==="EN"?"EN":"N";break;case"ET":if(wn>0&&mn[wn-1]==="EN"){$n="EN";break}if(Be){$n="N";break}for(In=wn+1,Ln=fn.length;In<Ln&&fn[In]==="ET";)In++;$n=In<Ln&&fn[In]==="EN"?"EN":"N";break;case"NSM":if(xe&&!Pe){for(Ln=fn.length,In=wn+1;In<Ln&&fn[In]==="NSM";)In++;if(In<Ln){var Sn=un[wn],Bn=Sn>=1425&&Sn<=2303||Sn===64286;if(Pn=fn[In],Bn&&(Pn==="R"||Pn==="AL")){$n="R";break}}}$n=wn<1||(Pn=fn[wn-1])==="B"?"N":mn[wn-1];break;case"B":Be=!1,Te=!0,$n=qe;break;case"S":Ee=!0,$n="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Be=!1;break;case"BN":$n="N"}return $n},Qe=function(un,fn,mn){var wn=un.split("");return mn&&Ke(wn,mn,{hiLevel:qe}),wn.reverse(),fn&&fn.reverse(),wn.join("")},Ke=function(un,fn,mn){var wn,Pn,xn,In,Ln,$n=-1,Sn=un.length,Bn=0,Tn=[],vn=qe?Ie:Ae,Un=[];for(Be=!1,Te=!1,Ee=!1,Pn=0;Pn<Sn;Pn++)Un[Pn]=He(un[Pn]);for(xn=0;xn<Sn;xn++){if(Ln=Bn,Tn[xn]=Je(un,Un,Tn,xn),wn=240&(Bn=vn[Ln][Me[Tn[xn]]]),Bn&=15,fn[xn]=In=vn[Bn][5],wn>0)if(wn===16){for(Pn=$n;Pn<xn;Pn++)fn[Pn]=1;$n=-1}else $n=-1;if(vn[Bn][6])$n===-1&&($n=xn);else if($n>-1){for(Pn=$n;Pn<xn;Pn++)fn[Pn]=In;$n=-1}Un[xn]==="B"&&(fn[xn]=0),mn.hiLevel|=In}Ee&&function(zn,Hn,Jn){for(var nr=0;nr<Jn;nr++)if(zn[nr]==="S"){Hn[nr]=qe;for(var or=nr-1;or>=0&&zn[or]==="WS";or--)Hn[or]=qe}}(Un,fn,Sn)},Ye=function(un,fn,mn,wn,Pn){if(!(Pn.hiLevel<un)){if(un===1&&qe===1&&!Te)return fn.reverse(),void(mn&&mn.reverse());for(var xn,In,Ln,$n,Sn=fn.length,Bn=0;Bn<Sn;){if(wn[Bn]>=un){for(Ln=Bn+1;Ln<Sn&&wn[Ln]>=un;)Ln++;for($n=Bn,In=Ln-1;$n<In;$n++,In--)xn=fn[$n],fn[$n]=fn[In],fn[In]=xn,mn&&(xn=mn[$n],mn[$n]=mn[In],mn[In]=xn);Bn=Ln}Bn++}}},pn=function(un,fn,mn){var wn=un.split(""),Pn={hiLevel:qe};return mn||(mn=[]),Ke(wn,mn,Pn),function(xn,In,Ln){if(Ln.hiLevel!==0&&Ce)for(var $n,Sn=0;Sn<xn.length;Sn++)In[Sn]===1&&($n=Ve.indexOf(xn[Sn]))>=0&&(xn[Sn]=Ve[$n+1])}(wn,mn,Pn),Ye(2,wn,fn,mn,Pn),Ye(1,wn,fn,mn,Pn),wn.join("")};return this.__bidiEngine__.doBidiReorder=function(un,fn,mn){if(function(Pn,xn){if(xn)for(var In=0;In<Pn.length;In++)xn[In]=In;Pe===void 0&&(Pe=Xe(Pn)),ke===void 0&&(ke=Xe(Pn))}(un,fn),xe||!Re||ke)if(xe&&Re&&Pe^ke)qe=Pe?1:0,un=Qe(un,fn,mn);else if(!xe&&Re&&ke)qe=Pe?1:0,un=pn(un,fn,mn),un=Qe(un,fn);else if(!xe||Pe||Re||ke){if(xe&&!Re&&Pe^ke)un=Qe(un,fn),Pe?(qe=0,un=pn(un,fn,mn)):(qe=1,un=pn(un,fn,mn),un=Qe(un,fn));else if(xe&&Pe&&!Re&&ke)qe=1,un=pn(un,fn,mn),un=Qe(un,fn);else if(!xe&&!Re&&Pe^ke){var wn=Ce;Pe?(qe=1,un=pn(un,fn,mn),qe=0,Ce=!1,un=pn(un,fn,mn),Ce=wn):(qe=0,un=pn(un,fn,mn),un=Qe(un,fn),qe=1,Ce=!1,un=pn(un,fn,mn),Ce=wn,un=Qe(un,fn))}}else qe=0,un=pn(un,fn,mn);else qe=Pe?1:0,un=pn(un,fn,mn);return un},this.__bidiEngine__.setOptions=function(un){un&&(xe=un.isInputVisual,Re=un.isOutputVisual,Pe=un.isInputRtl,ke=un.isOutputRtl,Ce=un.isSymmetricSwapping)},this.__bidiEngine__.setOptions(_e),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(_e){var Te=_e.text;_e.x,_e.y;var Ee=_e.options||{};_e.mutex,Ee.lang;var xe=[];if(Ee.isInputVisual=typeof Ee.isInputVisual!="boolean"||Ee.isInputVisual,t.setOptions(Ee),Object.prototype.toString.call(Te)==="[object Array]"){var Pe=0;for(xe=[],Pe=0;Pe<Te.length;Pe+=1)Object.prototype.toString.call(Te[Pe])==="[object Array]"?xe.push([t.doBidiReorder(Te[Pe][0]),Te[Pe][1],Te[Pe][2]]):xe.push([t.doBidiReorder(Te[Pe])]);_e.text=xe}else _e.text=t.doBidiReorder(Te);t.setOptions({isInputVisual:!0})}])}(E),E.API.TTFFont=function(){function r(e){var t;if(this.rawData=e,t=this.contents=new ne(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Le(this),this.registerTTF()}return r.open=function(e){return new r(e)},r.prototype.parse=function(){return this.directory=new ie(this.contents),this.head=new se(this),this.name=new pe(this),this.cmap=new ue(this),this.toUnicode={},this.hhea=new he(this),this.maxp=new ge(this),this.hmtx=new me(this),this.post=new fe(this),this.os2=new le(this),this.loca=new Ne(this),this.glyf=new be(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var e,t,_e,Te,Ee;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var xe,Pe,Re,ke;for(ke=[],xe=0,Pe=(Re=this.bbox).length;xe<Pe;xe++)e=Re[xe],ke.push(Math.round(e*this.scaleFactor));return ke}).call(this),this.stemV=0,this.post.exists?(_e=255&(Te=this.post.italic_angle),(32768&(t=Te>>16))!=0&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+_e)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(Ee=this.familyClass)===1||Ee===2||Ee===3||Ee===4||Ee===5||Ee===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},r.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},r.prototype.widthOfString=function(e,t,_e){var Te,Ee,xe,Pe;for(xe=0,Ee=0,Pe=(e=""+e).length;0<=Pe?Ee<Pe:Ee>Pe;Ee=0<=Pe?++Ee:--Ee)Te=e.charCodeAt(Ee),xe+=this.widthOfGlyph(this.characterToGlyph(Te))+_e*(1e3/t)||0;return xe*(t/1e3)},r.prototype.lineHeight=function(e,t){var _e;return t==null&&(t=!1),_e=t?this.lineGap:0,(this.ascender+_e-this.decender)/1e3*e},r}();var re$1,ne=function(){function r(e){this.data=e??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(e){return this.data[this.pos++]=e},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},r.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},r.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},r.prototype.readString=function(e){var t,_e;for(_e=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)_e[t]=String.fromCharCode(this.readByte());return _e.join("")},r.prototype.writeString=function(e){var t,_e,Te;for(Te=[],t=0,_e=e.length;0<=_e?t<_e:t>_e;t=0<=_e?++t:--t)Te.push(this.writeByte(e.charCodeAt(t)));return Te},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(e){return this.writeInt16(e)},r.prototype.readLongLong=function(){var e,t,_e,Te,Ee,xe,Pe,Re;return e=this.readByte(),t=this.readByte(),_e=this.readByte(),Te=this.readByte(),Ee=this.readByte(),xe=this.readByte(),Pe=this.readByte(),Re=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^_e)+4294967296*(255^Te)+16777216*(255^Ee)+65536*(255^xe)+256*(255^Pe)+(255^Re)+1):72057594037927940*e+281474976710656*t+1099511627776*_e+4294967296*Te+16777216*Ee+65536*xe+256*Pe+Re},r.prototype.writeLongLong=function(e){var t,_e;return t=Math.floor(e/4294967296),_e=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(_e>>24&255),this.writeByte(_e>>16&255),this.writeByte(_e>>8&255),this.writeByte(255&_e)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(e){return this.writeInt32(e)},r.prototype.read=function(e){var t,_e;for(t=[],_e=0;0<=e?_e<e:_e>e;_e=0<=e?++_e:--_e)t.push(this.readByte());return t},r.prototype.write=function(e){var t,_e,Te,Ee;for(Ee=[],_e=0,Te=e.length;_e<Te;_e++)t=e[_e],Ee.push(this.writeByte(t));return Ee},r}(),ie=function(){var r;function e(t){var _e,Te,Ee;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},Te=0,Ee=this.tableCount;0<=Ee?Te<Ee:Te>Ee;Te=0<=Ee?++Te:--Te)_e={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[_e.tag]=_e}return e.prototype.encode=function(t){var _e,Te,Ee,xe,Pe,Re,ke,Ce,Se,Ae,Ie,Me,Fe;for(Fe in Ie=Object.keys(t).length,Re=Math.log(2),Se=16*Math.floor(Math.log(Ie)/Re),xe=Math.floor(Se/Re),Ce=16*Ie-Se,(Te=new ne).writeInt(this.scalarType),Te.writeShort(Ie),Te.writeShort(Se),Te.writeShort(xe),Te.writeShort(Ce),Ee=16*Ie,ke=Te.pos+Ee,Pe=null,Me=[],t)for(Ae=t[Fe],Te.writeString(Fe),Te.writeInt(r(Ae)),Te.writeInt(ke),Te.writeInt(Ae.length),Me=Me.concat(Ae),Fe==="head"&&(Pe=ke),ke+=Ae.length;ke%4;)Me.push(0),ke++;return Te.write(Me),_e=2981146554-r(Te.data),Te.pos=Pe+8,Te.writeUInt32(_e),Te.data},r=function(t){var _e,Te,Ee,xe;for(t=ve.call(t);t.length%4;)t.push(0);for(Ee=new ne(t),Te=0,_e=0,xe=t.length;_e<xe;_e=_e+=4)Te+=Ee.readUInt32();return 4294967295&Te},e}(),ae={}.hasOwnProperty,oe=function(r,e){for(var t in e)ae.call(e,t)&&(r[t]=e[t]);function _e(){this.constructor=r}return _e.prototype=e.prototype,r.prototype=new _e,r.__super__=e.prototype,r};re$1=function(){function r(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r}();var se=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re$1),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var _e;return(_e=new ne).writeInt(this.version),_e.writeInt(this.revision),_e.writeInt(this.checkSumAdjustment),_e.writeInt(this.magicNumber),_e.writeShort(this.flags),_e.writeShort(this.unitsPerEm),_e.writeLongLong(this.created),_e.writeLongLong(this.modified),_e.writeShort(this.xMin),_e.writeShort(this.yMin),_e.writeShort(this.xMax),_e.writeShort(this.yMax),_e.writeShort(this.macStyle),_e.writeShort(this.lowestRecPPEM),_e.writeShort(this.fontDirectionHint),_e.writeShort(t),_e.writeShort(this.glyphDataFormat),_e.data},e}(),ce=function(){function r(e,t){var _e,Te,Ee,xe,Pe,Re,ke,Ce,Se,Ae,Ie,Me,Fe,Ve,je,Be,qe;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),Se=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(Re=0;Re<256;++Re)this.codeMap[Re]=e.readByte();break;case 4:for(Ie=e.readUInt16(),Ae=Ie/2,e.pos+=6,Ee=function(){var He,Xe;for(Xe=[],Re=He=0;0<=Ae?He<Ae:He>Ae;Re=0<=Ae?++He:--He)Xe.push(e.readUInt16());return Xe}(),e.pos+=2,Fe=function(){var He,Xe;for(Xe=[],Re=He=0;0<=Ae?He<Ae:He>Ae;Re=0<=Ae?++He:--He)Xe.push(e.readUInt16());return Xe}(),ke=function(){var He,Xe;for(Xe=[],Re=He=0;0<=Ae?He<Ae:He>Ae;Re=0<=Ae?++He:--He)Xe.push(e.readUInt16());return Xe}(),Ce=function(){var He,Xe;for(Xe=[],Re=He=0;0<=Ae?He<Ae:He>Ae;Re=0<=Ae?++He:--He)Xe.push(e.readUInt16());return Xe}(),Te=(this.length-e.pos+this.offset)/2,Pe=function(){var He,Xe;for(Xe=[],Re=He=0;0<=Te?He<Te:He>Te;Re=0<=Te?++He:--He)Xe.push(e.readUInt16());return Xe}(),Re=je=0,qe=Ee.length;je<qe;Re=++je)for(Ve=Ee[Re],_e=Be=Me=Fe[Re];Me<=Ve?Be<=Ve:Be>=Ve;_e=Me<=Ve?++Be:--Be)Ce[Re]===0?xe=_e+ke[Re]:(xe=Pe[Ce[Re]/2+(_e-Me)-(Ae-Re)]||0)!==0&&(xe+=ke[Re]),this.codeMap[_e]=65535&xe}e.pos=Se}return r.encode=function(e,t){var _e,Te,Ee,xe,Pe,Re,ke,Ce,Se,Ae,Ie,Me,Fe,Ve,je,Be,qe,He,Xe,Je,Qe,Ke,Ye,pn,un,fn,mn,wn,Pn,xn,In,Ln,$n,Sn,Bn,Tn,vn,Un,zn,Hn,Jn,nr,or,Sr,kr,Vr;switch(wn=new ne,xe=Object.keys(e).sort(function(Lr,Qr){return Lr-Qr}),t){case"macroman":for(Fe=0,Ve=function(){var Lr=[];for(Me=0;Me<256;++Me)Lr.push(0);return Lr}(),Be={0:0},Ee={},Pn=0,$n=xe.length;Pn<$n;Pn++)Be[or=e[Te=xe[Pn]]]==null&&(Be[or]=++Fe),Ee[Te]={old:e[Te],new:Be[e[Te]]},Ve[Te]=Be[e[Te]];return wn.writeUInt16(1),wn.writeUInt16(0),wn.writeUInt32(12),wn.writeUInt16(0),wn.writeUInt16(262),wn.writeUInt16(0),wn.write(Ve),{charMap:Ee,subtable:wn.data,maxGlyphID:Fe+1};case"unicode":for(fn=[],Se=[],qe=0,Be={},_e={},je=ke=null,xn=0,Sn=xe.length;xn<Sn;xn++)Be[Xe=e[Te=xe[xn]]]==null&&(Be[Xe]=++qe),_e[Te]={old:Xe,new:Be[Xe]},Pe=Be[Xe]-Te,je!=null&&Pe===ke||(je&&Se.push(je),fn.push(Te),ke=Pe),je=Te;for(je&&Se.push(je),Se.push(65535),fn.push(65535),pn=2*(Ye=fn.length),Ke=2*Math.pow(Math.log(Ye)/Math.LN2,2),Ae=Math.log(Ke/2)/Math.LN2,Qe=2*Ye-Ke,Re=[],Je=[],Ie=[],Me=In=0,Bn=fn.length;In<Bn;Me=++In){if(un=fn[Me],Ce=Se[Me],un===65535){Re.push(0),Je.push(0);break}if(un-(mn=_e[un].new)>=32768)for(Re.push(0),Je.push(2*(Ie.length+Ye-Me)),Te=Ln=un;un<=Ce?Ln<=Ce:Ln>=Ce;Te=un<=Ce?++Ln:--Ln)Ie.push(_e[Te].new);else Re.push(mn-un),Je.push(0)}for(wn.writeUInt16(3),wn.writeUInt16(1),wn.writeUInt32(12),wn.writeUInt16(4),wn.writeUInt16(16+8*Ye+2*Ie.length),wn.writeUInt16(0),wn.writeUInt16(pn),wn.writeUInt16(Ke),wn.writeUInt16(Ae),wn.writeUInt16(Qe),Jn=0,Tn=Se.length;Jn<Tn;Jn++)Te=Se[Jn],wn.writeUInt16(Te);for(wn.writeUInt16(0),nr=0,vn=fn.length;nr<vn;nr++)Te=fn[nr],wn.writeUInt16(Te);for(Sr=0,Un=Re.length;Sr<Un;Sr++)Pe=Re[Sr],wn.writeUInt16(Pe);for(kr=0,zn=Je.length;kr<zn;kr++)He=Je[kr],wn.writeUInt16(He);for(Vr=0,Hn=Ie.length;Vr<Hn;Vr++)Fe=Ie[Vr],wn.writeUInt16(Fe);return{charMap:_e,subtable:wn.data,maxGlyphID:qe+1}}},r}(),ue=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re$1),e.prototype.tag="cmap",e.prototype.parse=function(t){var _e,Te,Ee;for(t.pos=this.offset,this.version=t.readUInt16(),Ee=t.readUInt16(),this.tables=[],this.unicode=null,Te=0;0<=Ee?Te<Ee:Te>Ee;Te=0<=Ee?++Te:--Te)_e=new ce(t,this.offset),this.tables.push(_e),_e.isUnicode&&this.unicode==null&&(this.unicode=_e);return!0},e.encode=function(t,_e){var Te,Ee;return _e==null&&(_e="macroman"),Te=ce.encode(t,_e),(Ee=new ne).writeUInt16(0),Ee.writeUInt16(1),Te.table=Ee.data.concat(Te.subtable),Te},e}(),he=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re$1),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),le=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re$1),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var _e,Te;for(Te=[],_e=0;_e<10;++_e)Te.push(t.readByte());return Te}(),this.charRange=function(){var _e,Te;for(Te=[],_e=0;_e<4;++_e)Te.push(t.readInt());return Te}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var _e,Te;for(Te=[],_e=0;_e<2;_e=++_e)Te.push(t.readInt());return Te}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),fe=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re$1),e.prototype.tag="post",e.prototype.parse=function(t){var _e,Te,Ee;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var xe;for(Te=t.readUInt16(),this.glyphNameIndex=[],xe=0;0<=Te?xe<Te:xe>Te;xe=0<=Te?++xe:--xe)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],Ee=[];t.pos<this.offset+this.length;)_e=t.readByte(),Ee.push(this.names.push(t.readString(_e)));return Ee;case 151552:return Te=t.readUInt16(),this.offsets=t.read(Te);case 196608:break;case 262144:return this.map=(function(){var Pe,Re,ke;for(ke=[],xe=Pe=0,Re=this.file.maxp.numGlyphs;0<=Re?Pe<Re:Pe>Re;xe=0<=Re?++Pe:--Pe)ke.push(t.readUInt32());return ke}).call(this)}},e}(),de=function(r,e){this.raw=r,this.length=r.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},pe=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re$1),e.prototype.tag="name",e.prototype.parse=function(t){var _e,Te,Ee,xe,Pe,Re,ke,Ce,Se,Ae,Ie;for(t.pos=this.offset,t.readShort(),_e=t.readShort(),Re=t.readShort(),Te=[],xe=0;0<=_e?xe<_e:xe>_e;xe=0<=_e?++xe:--xe)Te.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+Re+t.readShort()});for(ke={},xe=Se=0,Ae=Te.length;Se<Ae;xe=++Se)Ee=Te[xe],t.pos=Ee.offset,Ce=t.readString(Ee.length),Pe=new de(Ce,Ee),ke[Ie=Ee.nameID]==null&&(ke[Ie]=[]),ke[Ee.nameID].push(Pe);this.strings=ke,this.copyright=ke[0],this.fontFamily=ke[1],this.fontSubfamily=ke[2],this.uniqueSubfamily=ke[3],this.fontName=ke[4],this.version=ke[5];try{this.postscriptName=ke[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=ke[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=ke[7],this.manufacturer=ke[8],this.designer=ke[9],this.description=ke[10],this.vendorUrl=ke[11],this.designerUrl=ke[12],this.license=ke[13],this.licenseUrl=ke[14],this.preferredFamily=ke[15],this.preferredSubfamily=ke[17],this.compatibleFull=ke[18],this.sampleText=ke[19]},e}(),ge=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re$1),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),me=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re$1),e.prototype.tag="hmtx",e.prototype.parse=function(t){var _e,Te,Ee,xe,Pe,Re,ke;for(t.pos=this.offset,this.metrics=[],_e=0,Re=this.file.hhea.numberOfMetrics;0<=Re?_e<Re:_e>Re;_e=0<=Re?++_e:--_e)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(Ee=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var Ce,Se;for(Se=[],_e=Ce=0;0<=Ee?Ce<Ee:Ce>Ee;_e=0<=Ee?++Ce:--Ce)Se.push(t.readInt16());return Se}(),this.widths=(function(){var Ce,Se,Ae,Ie;for(Ie=[],Ce=0,Se=(Ae=this.metrics).length;Ce<Se;Ce++)xe=Ae[Ce],Ie.push(xe.advance);return Ie}).call(this),Te=this.widths[this.widths.length-1],ke=[],_e=Pe=0;0<=Ee?Pe<Ee:Pe>Ee;_e=0<=Ee?++Pe:--Pe)ke.push(this.widths.push(Te));return ke},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),ve=[].slice,be=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re$1),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var _e,Te,Ee,xe,Pe,Re,ke,Ce,Se,Ae;return t in this.cache?this.cache[t]:(xe=this.file.loca,_e=this.file.contents,Te=xe.indexOf(t),(Ee=xe.lengthOf(t))===0?this.cache[t]=null:(_e.pos=this.offset+Te,Pe=(Re=new ne(_e.read(Ee))).readShort(),Ce=Re.readShort(),Ae=Re.readShort(),ke=Re.readShort(),Se=Re.readShort(),this.cache[t]=Pe===-1?new we(Re,Ce,Ae,ke,Se):new ye(Re,Pe,Ce,Ae,ke,Se),this.cache[t]))},e.prototype.encode=function(t,_e,Te){var Ee,xe,Pe,Re,ke;for(Pe=[],xe=[],Re=0,ke=_e.length;Re<ke;Re++)Ee=t[_e[Re]],xe.push(Pe.length),Ee&&(Pe=Pe.concat(Ee.encode(Te)));return xe.push(Pe.length),{table:Pe,offsets:xe}},e}(),ye=function(){function r(e,t,_e,Te,Ee,xe){this.raw=e,this.numberOfContours=t,this.xMin=_e,this.yMin=Te,this.xMax=Ee,this.yMax=xe,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r}(),we=function(){function r(e,t,_e,Te,Ee){var xe,Pe;for(this.raw=e,this.xMin=t,this.yMin=_e,this.xMax=Te,this.yMax=Ee,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],xe=this.raw;Pe=xe.readShort(),this.glyphOffsets.push(xe.pos),this.glyphIDs.push(xe.readUInt16()),32&Pe;)xe.pos+=1&Pe?4:2,128&Pe?xe.pos+=8:64&Pe?xe.pos+=4:8&Pe&&(xe.pos+=2)}return r.prototype.encode=function(){var e,t,_e;for(t=new ne(ve.call(this.raw.data)),e=0,_e=this.glyphIDs.length;e<_e;++e)t.pos=this.glyphOffsets[e];return t.data},r}(),Ne=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re$1),e.prototype.tag="loca",e.prototype.parse=function(t){var _e,Te;return t.pos=this.offset,_e=this.file.head.indexToLocFormat,this.offsets=_e===0?(function(){var Ee,xe;for(xe=[],Te=0,Ee=this.length;Te<Ee;Te+=2)xe.push(2*t.readUInt16());return xe}).call(this):(function(){var Ee,xe;for(xe=[],Te=0,Ee=this.length;Te<Ee;Te+=4)xe.push(t.readUInt32());return xe}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,_e){for(var Te=new Uint32Array(this.offsets.length),Ee=0,xe=0,Pe=0;Pe<Te.length;++Pe)if(Te[Pe]=Ee,xe<_e.length&&_e[xe]==Pe){++xe,Te[Pe]=Ee;var Re=this.offsets[Pe],ke=this.offsets[Pe+1]-Re;ke>0&&(Ee+=ke)}for(var Ce=new Array(4*Te.length),Se=0;Se<Te.length;++Se)Ce[4*Se+3]=255&Te[Se],Ce[4*Se+2]=(65280&Te[Se])>>8,Ce[4*Se+1]=(16711680&Te[Se])>>16,Ce[4*Se]=(4278190080&Te[Se])>>24;return Ce},e}(),Le=function(){function r(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var e,t,_e,Te,Ee;for(t in Te=this.font.cmap.tables[0].codeMap,e={},Ee=this.subset)_e=Ee[t],e[t]=Te[_e];return e},r.prototype.glyphsFor=function(e){var t,_e,Te,Ee,xe,Pe,Re;for(Te={},xe=0,Pe=e.length;xe<Pe;xe++)Te[Ee=e[xe]]=this.font.glyf.glyphFor(Ee);for(Ee in t=[],Te)(_e=Te[Ee])!=null&&_e.compound&&t.push.apply(t,_e.glyphIDs);if(t.length>0)for(Ee in Re=this.glyphsFor(t))_e=Re[Ee],Te[Ee]=_e;return Te},r.prototype.encode=function(e,t){var _e,Te,Ee,xe,Pe,Re,ke,Ce,Se,Ae,Ie,Me,Fe,Ve,je;for(Te in _e=ue.encode(this.generateCmap(),"unicode"),xe=this.glyphsFor(e),Ie={0:0},je=_e.charMap)Ie[(Re=je[Te]).old]=Re.new;for(Me in Ae=_e.maxGlyphID,xe)Me in Ie||(Ie[Me]=Ae++);return Ce=function(Be){var qe,He;for(qe in He={},Be)He[Be[qe]]=qe;return He}(Ie),Se=Object.keys(Ce).sort(function(Be,qe){return Be-qe}),Fe=function(){var Be,qe,He;for(He=[],Be=0,qe=Se.length;Be<qe;Be++)Pe=Se[Be],He.push(Ce[Pe]);return He}(),Ee=this.font.glyf.encode(xe,Fe,Ie),ke=this.font.loca.encode(Ee.offsets,Fe),Ve={cmap:this.font.cmap.raw(),glyf:Ee.table,loca:ke,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(Ve["OS/2"]=this.font.os2.raw()),this.font.directory.encode(Ve)},r}();E.API.PDFObject=function(){var r;function e(){}return r=function(t,_e){return(Array(_e+1).join("0")+t).slice(-_e)},e.convert=function(t){var _e,Te,Ee,xe;if(Array.isArray(t))return"["+function(){var Pe,Re,ke;for(ke=[],Pe=0,Re=t.length;Pe<Re;Pe++)_e=t[Pe],ke.push(e.convert(_e));return ke}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+r(t.getUTCFullYear(),4)+r(t.getUTCMonth(),2)+r(t.getUTCDate(),2)+r(t.getUTCHours(),2)+r(t.getUTCMinutes(),2)+r(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(Te in Ee=["<<"],t)xe=t[Te],Ee.push("/"+Te+" "+e.convert(xe));return Ee.push(">>"),Ee.join(`
`)}return""+t},e}();const extractMemory=r=>{const e=r.match(/(?:I am|My name is)\s+(\w+)/i)?.[1],t=r.match(/(?:I like|enjoy|love)\s+(.+?)(?=[.,]|$)/i)?.[1],_e=r.match(/(?:want to be(?:come)?|dream of being)\s+(.+?)(?=[.,]|$)/i)?.[1];return{name:e||"friend",favSubject:t||"design",goal:_e||"a designer"}},LoginModal$1=({onLogin:r})=>{const[e,t]=reactExports.useState(""),[_e,Te]=reactExports.useState(""),[Ee,xe]=reactExports.useState(""),Pe=async Re=>{Re.preventDefault();try{const ke=await signInWithEmailAndPassword(auth,e,_e);r(ke.user.uid)}catch{xe("❌ Invalid email or password")}};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-900 p-6 rounded-xl shadow-md w-full max-w-md space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-center text-gray-800 dark:text-white",children:"🔐 Login to CareerCrack"}),Ee&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm text-center",children:Ee}),jsxRuntimeExports.jsxs("form",{onSubmit:Pe,className:"space-y-3",children:[jsxRuntimeExports.jsx("input",{type:"email",className:"w-full border px-3 py-2 rounded-lg",placeholder:"Email",value:e,onChange:Re=>t(Re.target.value)}),jsxRuntimeExports.jsx("input",{type:"password",className:"w-full border px-3 py-2 rounded-lg",placeholder:"Password",value:_e,onChange:Re=>Te(Re.target.value)}),jsxRuntimeExports.jsx("button",{className:"w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 transition",children:"Login"})]})]})})};function CareerCrack(){const[r,e]=reactExports.useState([]),[t,_e]=reactExports.useState(""),[Te,Ee]=reactExports.useState(null),[xe,Pe]=reactExports.useState([]),[Re,ke]=reactExports.useState(null),[Ce,Se]=reactExports.useState(!1),[Ae,Ie]=reactExports.useState(!0),Me=reactExports.useRef(null);reactExports.useEffect(()=>{Me.current?.scrollIntoView({behavior:"smooth"})},[r]),reactExports.useEffect(()=>{const Qe=onAuthStateChanged(auth,Ke=>{Ke&&(Ee(Ke.uid),Fe(Ke.uid),qe(Ke.uid))});return()=>Qe()},[]);const Fe=async Qe=>{const Ke=doc(db,"memory",Qe),Ye=await getDoc(Ke);if(Ye.exists()){const{name:pn,favSubject:un,goal:fn}=Ye.data();e([{role:"ai",text:`👋 Welcome back, ${pn}! I remember you like ${un} and dream of becoming ${fn}.`}])}},Ve=async Qe=>{const Ke=extractMemory(Qe);Te&&await setDoc(doc(db,"memory",Te),Ke)},je=async Qe=>{if(!Te)return;const Ke=Qe.find(pn=>pn.role==="user")?.text||"Untitled",Ye=await addDoc(collection(db,"chats",Te,"history"),{title:Ke.slice(0,25),messages:Qe,createdAt:serverTimestamp()});ke(Ye.id)},Be=async()=>{if(!t.trim())return;const Qe={role:"user",text:t},Ke={role:"ai",text:"__typing__"},Ye=[...r,Qe,Ke];e(Ye),_e("");try{let pn="";Ae?pn=(await axios.post("https://api.groq.com/openai/v1/chat/completions",{model:"llama3-8b-8192",messages:[{role:"system",content:"You're CareerCrack, an AI mentor helping students pick careers. Always refer to their memory and speak like a friendly guide."},{role:"user",content:t}],temperature:.7},{headers:{Authorization:"Bearer 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","Content-Type":"application/json"}})).data.choices[0].message.content:pn=(await axios.post("http://127.0.0.1:5000/ask",{prompt:t})).data.response,await Ve(t);const un=[...Ye.slice(0,-1),{role:"ai",text:pn}];e(un),await je(un)}catch(pn){console.error("AI error:",pn),e(un=>[...un.slice(0,-1),{role:"ai",text:"⚠️ Something went wrong. Try again!"}])}},qe=Qe=>{const Ke=query(collection(db,"chats",Qe,"history"),orderBy("createdAt","desc"));onSnapshot(Ke,Ye=>{const pn=Ye.docs.map(un=>({id:un.id,...un.data()}));Pe(pn)})},He=async(Qe,Ke)=>{const Ye=doc(db,"chats",Te,"history",Qe);await updateDoc(Ye,{title:Ke})},Xe=Qe=>{const Ke=xe.find(Ye=>Ye.id===Qe);Ke&&(e(Ke.messages||[]),ke(Qe))},Je=()=>{const Qe=new E;let Ke=10;Qe.setFont("helvetica","normal"),Qe.setFontSize(12),r.forEach(({role:Ye,text:pn})=>{const un=Ye==="user"?"🧍 You:":"🤖 CareerCrack:";Qe.splitTextToSize(`${un} ${pn}`,180).forEach(mn=>{Ke>280&&(Qe.addPage(),Ke=10),Qe.text(mn,10,Ke),Ke+=8}),Ke+=4}),Qe.save("CareerCrack_Chat.pdf")};return Te?jsxRuntimeExports.jsx("div",{className:`${Ce?"dark":""}`,children:jsxRuntimeExports.jsxs("div",{className:"flex min-h-screen bg-gradient-to-br from-[#c7d2fe] via-[#e0c3fc] to-[#f9f9f9] dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 text-gray-900 dark:text-white font-[Poppins] transition-all",children:[jsxRuntimeExports.jsxs("div",{className:"w-64 bg-white/40 dark:bg-gray-800/60 backdrop-blur-lg border-r border-white/20 p-4 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold",children:"💬 Your Chats"}),jsxRuntimeExports.jsx("button",{onClick:()=>Se(!Ce),className:"p-1 rounded hover:bg-white/20",title:"Toggle Dark Mode",children:Ce?jsxRuntimeExports.jsx(Sun,{className:"w-5 h-5"}):jsxRuntimeExports.jsx(Moon,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-2 py-1 bg-indigo-100 dark:bg-indigo-900/40 rounded-lg mb-3",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-semibold text-gray-800 dark:text-white",children:"🧠 Mode:"}),jsxRuntimeExports.jsx("button",{onClick:()=>Ie(!Ae),className:"text-xs bg-white dark:bg-gray-700 px-3 py-1 rounded-md font-bold hover:bg-gray-200 dark:hover:bg-gray-600 transition",children:Ae?"🌐 Groq":"💻 Local"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{e([]),ke(null)},className:"flex items-center gap-2 text-sm bg-indigo-600 text-white w-full py-2 px-3 rounded-md hover:bg-indigo-700",children:[jsxRuntimeExports.jsx(CirclePlus,{size:16})," New Chat"]}),xe.map(Qe=>jsxRuntimeExports.jsxs("div",{className:`p-2 rounded-md cursor-pointer hover:bg-white/20 ${Re===Qe.id?"bg-white/30":""}`,onClick:()=>Xe(Qe.id),children:[jsxRuntimeExports.jsx("input",{className:"bg-transparent font-medium text-sm w-full",defaultValue:Qe.title,onBlur:Ke=>He(Qe.id,Ke.target.value)}),Qe.createdAt?.seconds&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["🕒 ",new Date(Qe.createdAt.seconds*1e3).toLocaleString()]})]},Qe.id))]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 p-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold mb-4 text-center",children:"🎓 CareerCrack"}),jsxRuntimeExports.jsxs("div",{className:"h-96 overflow-y-auto space-y-4 p-4 bg-white/30 dark:bg-gray-800 rounded-2xl border border-white/20",children:[r.map((Qe,Ke)=>jsxRuntimeExports.jsx(ChatBubble,{role:Qe.role,text:Qe.text},Ke)),jsxRuntimeExports.jsx("div",{ref:Me})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 flex items-center bg-white/60 dark:bg-gray-700 border border-gray-300 rounded-xl px-3",children:[jsxRuntimeExports.jsx("input",{value:t,onChange:Qe=>_e(Qe.target.value),placeholder:"Your strengths, fav subjects, hobbies?",className:"flex-1 bg-transparent outline-none py-3 px-2 text-gray-800 dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400"}),jsxRuntimeExports.jsx("button",{onClick:Be,className:"hover:text-indigo-600 transition",children:jsxRuntimeExports.jsx(SendHorizontal,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("button",{onClick:Je,className:"mt-6 flex items-center gap-2 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white px-4 py-2 rounded-full shadow-lg hover:scale-105 hover:shadow-xl transition-all duration-300",children:["📄 Export Chat",jsxRuntimeExports.jsx("span",{className:"text-xs font-semibold bg-white/20 px-2 py-1 rounded-full",children:"PDF"})]})]})]})}):jsxRuntimeExports.jsx(LoginModal$1,{onLogin:Ee})}const LoginModal=({onLogin:r})=>{const[e,t]=reactExports.useState(""),[_e,Te]=reactExports.useState(""),[Ee,xe]=reactExports.useState(""),Pe=async Re=>{Re.preventDefault();try{const ke=await signInWithEmailAndPassword(auth,e,_e);r(ke.user.uid)}catch{xe("❌ Invalid email or password")}};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-900 p-6 rounded-xl shadow-md w-full max-w-md space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-center text-gray-800 dark:text-white",children:"🔐 Login to MoodMirror"}),Ee&&jsxRuntimeExports.jsx("p",{className:"text-red-600 text-sm text-center",children:Ee}),jsxRuntimeExports.jsxs("form",{onSubmit:Pe,className:"space-y-3",children:[jsxRuntimeExports.jsx("input",{type:"email",placeholder:"Email",className:"w-full border px-3 py-2 rounded-lg",value:e,onChange:Re=>t(Re.target.value),required:!0}),jsxRuntimeExports.jsx("input",{type:"password",placeholder:"Password",className:"w-full border px-3 py-2 rounded-lg",value:_e,onChange:Re=>Te(Re.target.value),required:!0}),jsxRuntimeExports.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 transition",children:"Login"})]})]})})};function MoodMirror(){const[r,e]=reactExports.useState([]),[t,_e]=reactExports.useState(""),[Te,Ee]=reactExports.useState(null),[xe,Pe]=reactExports.useState([]),[Re,ke]=reactExports.useState(null),[Ce,Se]=reactExports.useState(!1),Ae=reactExports.useRef(null);reactExports.useEffect(()=>{Ae.current?.scrollIntoView({behavior:"smooth"})},[r]),reactExports.useEffect(()=>{const qe=onAuthStateChanged(auth,He=>{He&&(Ee(He.uid),Ve(He.uid))});return()=>qe()},[]),reactExports.useEffect(()=>{document.documentElement.classList.toggle("dark",Ce)},[Ce]);const Ie=async()=>{if(!t.trim())return;const qe={role:"user",text:t},He={role:"ai",text:"__typing__"},Xe=[...r,qe,He];e(Xe),_e("");try{const Qe=(await axios.post("https://api.groq.com/openai/v1/chat/completions",{model:"llama3-8b-8192",messages:[{role:"system",content:"You are MoodMirror by Mindmorph, a friendly Gen Z AI big sibling who reads chats and gives brutally honest but warm analysis of relationships: flirt, rizz, friendzone, manipulation, or overthinking. End with real advice."},{role:"user",content:t}],temperature:.75},{headers:{Authorization:"Bearer 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","Content-Type":"application/json"}})).data.choices[0].message.content,Ke=[...Xe.slice(0,-1),{role:"ai",text:Qe}];e(Ke),await Me(Ke)}catch(Je){console.error("Groq error:",Je),e(Qe=>[...Qe.slice(0,-1),{role:"ai",text:"⚠️ Something went wrong. Try again!"}])}},Me=async qe=>{if(Te)if(Re){const He=doc(db,"moodmirror",Te,"history",Re);await updateDoc(He,{messages:qe})}else{const He=qe.find(Je=>Je.role==="user")?.text||"Untitled",Xe=await addDoc(collection(db,"moodmirror",Te,"history"),{title:He.slice(0,25),messages:qe,createdAt:serverTimestamp()});ke(Xe.id)}},Fe=async(qe,He)=>{const Xe=doc(db,"moodmirror",Te,"history",qe);await updateDoc(Xe,{title:He})},Ve=qe=>{const He=query(collection(db,"moodmirror",qe,"history"),orderBy("createdAt","desc"));onSnapshot(He,Xe=>{const Je=Xe.docs.map(Qe=>({id:Qe.id,...Qe.data()}));Pe(Je)})},je=qe=>{const He=xe.find(Xe=>Xe.id===qe);He&&(e(He.messages||[]),ke(qe))},Be=()=>{const qe=new E;let He=10;r.forEach(({role:Xe,text:Je})=>{const Qe=Xe==="user"?"🧍 You:":"🫀 MoodMirror:";qe.text(`${Qe} ${Je}`,10,He),He+=10}),qe.save("MoodMirror_Chat.pdf")};return Te?jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row min-h-screen bg-gradient-to-br from-pink-100 via-indigo-100 to-white dark:from-gray-900 dark:to-black font-[Poppins] text-gray-900 dark:text-white",children:[jsxRuntimeExports.jsxs("div",{className:"w-full md:w-64 bg-white/40 dark:bg-white/10 backdrop-blur-lg border-r border-white/20 p-4 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold",children:"🫀 MoodMirror"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{e([]),ke(null)},title:"New Chat",className:"text-indigo-600 dark:text-indigo-300 hover:text-indigo-800",children:jsxRuntimeExports.jsx(CirclePlus,{size:20})}),jsxRuntimeExports.jsx("button",{onClick:()=>Se(!Ce),title:"Toggle Dark Mode",className:"text-gray-700 dark:text-white",children:Ce?jsxRuntimeExports.jsx(Sun,{size:20}):jsxRuntimeExports.jsx(Moon,{size:20})})]})]}),xe.map(qe=>jsxRuntimeExports.jsxs("div",{className:`p-2 rounded-md cursor-pointer hover:bg-white/20 ${Re===qe.id?"bg-white/30":""}`,onClick:()=>je(qe.id),children:[jsxRuntimeExports.jsx("input",{className:"bg-transparent font-medium text-sm w-full dark:text-white",defaultValue:qe.title,onBlur:He=>Fe(qe.id,He.target.value)}),qe.createdAt?.seconds&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["🕒 ",new Date(qe.createdAt.seconds*1e3).toLocaleString()]})]},qe.id))]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 p-4 md:p-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-4 text-center",children:"🫀 MoodMirror: Decode the Vibe"}),jsxRuntimeExports.jsxs("div",{className:"h-[65vh] overflow-y-auto space-y-4 p-4 bg-white/30 dark:bg-white/10 rounded-2xl border border-white/20",children:[r.map((qe,He)=>jsxRuntimeExports.jsx(ChatBubble,{role:qe.role,text:qe.text},He)),jsxRuntimeExports.jsx("div",{ref:Ae})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 flex items-center bg-white/60 dark:bg-white/20 border border-gray-300 dark:border-gray-600 rounded-xl px-3",children:[jsxRuntimeExports.jsx("input",{value:t,onChange:qe=>_e(qe.target.value),placeholder:"Paste convo or type what happened...",className:"flex-1 bg-transparent outline-none py-3 px-2 text-gray-800 dark:text-white placeholder:text-gray-500"}),jsxRuntimeExports.jsx("button",{onClick:Ie,className:"hover:text-indigo-600 transition dark:text-white",children:jsxRuntimeExports.jsx(SendHorizontal,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("button",{onClick:Be,className:"mt-6 flex items-center gap-2 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white px-4 py-2 rounded-full shadow-lg hover:scale-105 hover:shadow-xl transition-all duration-300",children:["📄 Export Chat",jsxRuntimeExports.jsx("span",{className:"text-xs font-semibold bg-white/20 px-2 py-1 rounded-full",children:"PDF"})]})]})]}):jsxRuntimeExports.jsx(LoginModal,{onLogin:qe=>Ee(qe)})}function ok$1(){}function unreachable(){}function stringify$1(r,e){const t={};return(r[r.length-1]===""?[...r,""]:r).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const nameRe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,nameReJsx=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,emptyOptions$2={};function name$1(r,e){return(emptyOptions$2.jsx?nameReJsx:nameRe).test(r)}const re=/[ \t\n\f\r]/g;function whitespace(r){return typeof r=="object"?r.type==="text"?empty$1(r.value):!1:empty$1(r)}function empty$1(r){return r.replace(re,"")===""}class Schema{constructor(e,t,_e){this.normal=t,this.property=e,_e&&(this.space=_e)}}Schema.prototype.normal={};Schema.prototype.property={};Schema.prototype.space=void 0;function merge(r,e){const t={},_e={};for(const Te of r)Object.assign(t,Te.property),Object.assign(_e,Te.normal);return new Schema(t,_e,e)}function normalize$1(r){return r.toLowerCase()}class Info{constructor(e,t){this.attribute=t,this.property=e}}Info.prototype.attribute="";Info.prototype.booleanish=!1;Info.prototype.boolean=!1;Info.prototype.commaOrSpaceSeparated=!1;Info.prototype.commaSeparated=!1;Info.prototype.defined=!1;Info.prototype.mustUseProperty=!1;Info.prototype.number=!1;Info.prototype.overloadedBoolean=!1;Info.prototype.property="";Info.prototype.spaceSeparated=!1;Info.prototype.space=void 0;let powers=0;const boolean=increment(),booleanish=increment(),overloadedBoolean=increment(),number$1=increment(),spaceSeparated=increment(),commaSeparated=increment(),commaOrSpaceSeparated=increment();function increment(){return 2**++powers}const types=Object.freeze(Object.defineProperty({__proto__:null,boolean,booleanish,commaOrSpaceSeparated,commaSeparated,number:number$1,overloadedBoolean,spaceSeparated},Symbol.toStringTag,{value:"Module"})),checks=Object.keys(types);class DefinedInfo extends Info{constructor(e,t,_e,Te){let Ee=-1;if(super(e,t),mark(this,"space",Te),typeof _e=="number")for(;++Ee<checks.length;){const xe=checks[Ee];mark(this,checks[Ee],(_e&types[xe])===types[xe])}}}DefinedInfo.prototype.defined=!0;function mark(r,e,t){t&&(r[e]=t)}function create(r){const e={},t={};for(const[_e,Te]of Object.entries(r.properties)){const Ee=new DefinedInfo(_e,r.transform(r.attributes||{},_e),Te,r.space);r.mustUseProperty&&r.mustUseProperty.includes(_e)&&(Ee.mustUseProperty=!0),e[_e]=Ee,t[normalize$1(_e)]=_e,t[normalize$1(Ee.attribute)]=_e}return new Schema(e,t,r.space)}const aria=create({properties:{ariaActiveDescendant:null,ariaAtomic:booleanish,ariaAutoComplete:null,ariaBusy:booleanish,ariaChecked:booleanish,ariaColCount:number$1,ariaColIndex:number$1,ariaColSpan:number$1,ariaControls:spaceSeparated,ariaCurrent:null,ariaDescribedBy:spaceSeparated,ariaDetails:null,ariaDisabled:booleanish,ariaDropEffect:spaceSeparated,ariaErrorMessage:null,ariaExpanded:booleanish,ariaFlowTo:spaceSeparated,ariaGrabbed:booleanish,ariaHasPopup:null,ariaHidden:booleanish,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:spaceSeparated,ariaLevel:number$1,ariaLive:null,ariaModal:booleanish,ariaMultiLine:booleanish,ariaMultiSelectable:booleanish,ariaOrientation:null,ariaOwns:spaceSeparated,ariaPlaceholder:null,ariaPosInSet:number$1,ariaPressed:booleanish,ariaReadOnly:booleanish,ariaRelevant:null,ariaRequired:booleanish,ariaRoleDescription:spaceSeparated,ariaRowCount:number$1,ariaRowIndex:number$1,ariaRowSpan:number$1,ariaSelected:booleanish,ariaSetSize:number$1,ariaSort:null,ariaValueMax:number$1,ariaValueMin:number$1,ariaValueNow:number$1,ariaValueText:null,role:null},transform(r,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function caseSensitiveTransform(r,e){return e in r?r[e]:e}function caseInsensitiveTransform(r,e){return caseSensitiveTransform(r,e.toLowerCase())}const html$2=create({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:commaSeparated,acceptCharset:spaceSeparated,accessKey:spaceSeparated,action:null,allow:null,allowFullScreen:boolean,allowPaymentRequest:boolean,allowUserMedia:boolean,alt:null,as:null,async:boolean,autoCapitalize:null,autoComplete:spaceSeparated,autoFocus:boolean,autoPlay:boolean,blocking:spaceSeparated,capture:null,charSet:null,checked:boolean,cite:null,className:spaceSeparated,cols:number$1,colSpan:null,content:null,contentEditable:booleanish,controls:boolean,controlsList:spaceSeparated,coords:number$1|commaSeparated,crossOrigin:null,data:null,dateTime:null,decoding:null,default:boolean,defer:boolean,dir:null,dirName:null,disabled:boolean,download:overloadedBoolean,draggable:booleanish,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:boolean,formTarget:null,headers:spaceSeparated,height:number$1,hidden:overloadedBoolean,high:number$1,href:null,hrefLang:null,htmlFor:spaceSeparated,httpEquiv:spaceSeparated,id:null,imageSizes:null,imageSrcSet:null,inert:boolean,inputMode:null,integrity:null,is:null,isMap:boolean,itemId:null,itemProp:spaceSeparated,itemRef:spaceSeparated,itemScope:boolean,itemType:spaceSeparated,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:boolean,low:number$1,manifest:null,max:null,maxLength:number$1,media:null,method:null,min:null,minLength:number$1,multiple:boolean,muted:boolean,name:null,nonce:null,noModule:boolean,noValidate:boolean,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:boolean,optimum:number$1,pattern:null,ping:spaceSeparated,placeholder:null,playsInline:boolean,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:boolean,referrerPolicy:null,rel:spaceSeparated,required:boolean,reversed:boolean,rows:number$1,rowSpan:number$1,sandbox:spaceSeparated,scope:null,scoped:boolean,seamless:boolean,selected:boolean,shadowRootClonable:boolean,shadowRootDelegatesFocus:boolean,shadowRootMode:null,shape:null,size:number$1,sizes:null,slot:null,span:number$1,spellCheck:booleanish,src:null,srcDoc:null,srcLang:null,srcSet:null,start:number$1,step:null,style:null,tabIndex:number$1,target:null,title:null,translate:null,type:null,typeMustMatch:boolean,useMap:null,value:booleanish,width:number$1,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:spaceSeparated,axis:null,background:null,bgColor:null,border:number$1,borderColor:null,bottomMargin:number$1,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:boolean,declare:boolean,event:null,face:null,frame:null,frameBorder:null,hSpace:number$1,leftMargin:number$1,link:null,longDesc:null,lowSrc:null,marginHeight:number$1,marginWidth:number$1,noResize:boolean,noHref:boolean,noShade:boolean,noWrap:boolean,object:null,profile:null,prompt:null,rev:null,rightMargin:number$1,rules:null,scheme:null,scrolling:booleanish,standby:null,summary:null,text:null,topMargin:number$1,valueType:null,version:null,vAlign:null,vLink:null,vSpace:number$1,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:boolean,disableRemotePlayback:boolean,prefix:null,property:null,results:number$1,security:null,unselectable:null},space:"html",transform:caseInsensitiveTransform}),svg$1=create({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:commaOrSpaceSeparated,accentHeight:number$1,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:number$1,amplitude:number$1,arabicForm:null,ascent:number$1,attributeName:null,attributeType:null,azimuth:number$1,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:number$1,by:null,calcMode:null,capHeight:number$1,className:spaceSeparated,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:number$1,diffuseConstant:number$1,direction:null,display:null,dur:null,divisor:number$1,dominantBaseline:null,download:boolean,dx:null,dy:null,edgeMode:null,editable:null,elevation:number$1,enableBackground:null,end:null,event:null,exponent:number$1,externalResourcesRequired:null,fill:null,fillOpacity:number$1,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:commaSeparated,g2:commaSeparated,glyphName:commaSeparated,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:number$1,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:number$1,horizOriginX:number$1,horizOriginY:number$1,id:null,ideographic:number$1,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:number$1,k:number$1,k1:number$1,k2:number$1,k3:number$1,k4:number$1,kernelMatrix:commaOrSpaceSeparated,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:number$1,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:number$1,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:number$1,overlineThickness:number$1,paintOrder:null,panose1:null,path:null,pathLength:number$1,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:spaceSeparated,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:number$1,pointsAtY:number$1,pointsAtZ:number$1,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:commaOrSpaceSeparated,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:commaOrSpaceSeparated,rev:commaOrSpaceSeparated,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:commaOrSpaceSeparated,requiredFeatures:commaOrSpaceSeparated,requiredFonts:commaOrSpaceSeparated,requiredFormats:commaOrSpaceSeparated,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:number$1,specularExponent:number$1,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:number$1,strikethroughThickness:number$1,string:null,stroke:null,strokeDashArray:commaOrSpaceSeparated,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:number$1,strokeOpacity:number$1,strokeWidth:null,style:null,surfaceScale:number$1,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:commaOrSpaceSeparated,tabIndex:number$1,tableValues:null,target:null,targetX:number$1,targetY:number$1,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:commaOrSpaceSeparated,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:number$1,underlineThickness:number$1,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:number$1,values:null,vAlphabetic:number$1,vMathematical:number$1,vectorEffect:null,vHanging:number$1,vIdeographic:number$1,version:null,vertAdvY:number$1,vertOriginX:number$1,vertOriginY:number$1,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:number$1,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:caseSensitiveTransform}),xlink=create({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(r,e){return"xlink:"+e.slice(5).toLowerCase()}}),xmlns=create({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:caseInsensitiveTransform}),xml=create({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(r,e){return"xml:"+e.slice(3).toLowerCase()}}),hastToReact={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},cap$1=/[A-Z]/g,dash=/-[a-z]/g,valid=/^data[-\w.:]+$/i;function find(r,e){const t=normalize$1(e);let _e=e,Te=Info;if(t in r.normal)return r.property[r.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&valid.test(e)){if(e.charAt(4)==="-"){const Ee=e.slice(5).replace(dash,camelcase);_e="data"+Ee.charAt(0).toUpperCase()+Ee.slice(1)}else{const Ee=e.slice(4);if(!dash.test(Ee)){let xe=Ee.replace(cap$1,kebab);xe.charAt(0)!=="-"&&(xe="-"+xe),e="data"+xe}}Te=DefinedInfo}return new Te(_e,e)}function kebab(r){return"-"+r.toLowerCase()}function camelcase(r){return r.charAt(1).toUpperCase()}const html$1=merge([aria,html$2,xlink,xmlns,xml],"html"),svg=merge([aria,svg$1,xlink,xmlns,xml],"svg");function stringify(r){return r.join(" ").trim()}var cjs$1={},inlineStyleParser,hasRequiredInlineStyleParser;function requireInlineStyleParser(){if(hasRequiredInlineStyleParser)return inlineStyleParser;hasRequiredInlineStyleParser=1;var r=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,_e=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Te=/^:\s*/,Ee=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,xe=/^[;\s]*/,Pe=/^\s+|\s+$/g,Re=`
`,ke="/",Ce="*",Se="",Ae="comment",Ie="declaration";inlineStyleParser=function(Fe,Ve){if(typeof Fe!="string")throw new TypeError("First argument must be a string");if(!Fe)return[];Ve=Ve||{};var je=1,Be=1;function qe(mn){var wn=mn.match(e);wn&&(je+=wn.length);var Pn=mn.lastIndexOf(Re);Be=~Pn?mn.length-Pn:Be+mn.length}function He(){var mn={line:je,column:Be};return function(wn){return wn.position=new Xe(mn),Ke(),wn}}function Xe(mn){this.start=mn,this.end={line:je,column:Be},this.source=Ve.source}Xe.prototype.content=Fe;function Je(mn){var wn=new Error(Ve.source+":"+je+":"+Be+": "+mn);if(wn.reason=mn,wn.filename=Ve.source,wn.line=je,wn.column=Be,wn.source=Fe,!Ve.silent)throw wn}function Qe(mn){var wn=mn.exec(Fe);if(wn){var Pn=wn[0];return qe(Pn),Fe=Fe.slice(Pn.length),wn}}function Ke(){Qe(t)}function Ye(mn){var wn;for(mn=mn||[];wn=pn();)wn!==!1&&mn.push(wn);return mn}function pn(){var mn=He();if(!(ke!=Fe.charAt(0)||Ce!=Fe.charAt(1))){for(var wn=2;Se!=Fe.charAt(wn)&&(Ce!=Fe.charAt(wn)||ke!=Fe.charAt(wn+1));)++wn;if(wn+=2,Se===Fe.charAt(wn-1))return Je("End of comment missing");var Pn=Fe.slice(2,wn-2);return Be+=2,qe(Pn),Fe=Fe.slice(wn),Be+=2,mn({type:Ae,comment:Pn})}}function un(){var mn=He(),wn=Qe(_e);if(wn){if(pn(),!Qe(Te))return Je("property missing ':'");var Pn=Qe(Ee),xn=mn({type:Ie,property:Me(wn[0].replace(r,Se)),value:Pn?Me(Pn[0].replace(r,Se)):Se});return Qe(xe),xn}}function fn(){var mn=[];Ye(mn);for(var wn;wn=un();)wn!==!1&&(mn.push(wn),Ye(mn));return mn}return Ke(),fn()};function Me(Fe){return Fe?Fe.replace(Pe,Se):Se}return inlineStyleParser}var hasRequiredCjs$1;function requireCjs$1(){if(hasRequiredCjs$1)return cjs$1;hasRequiredCjs$1=1;var r=cjs$1&&cjs$1.__importDefault||function(_e){return _e&&_e.__esModule?_e:{default:_e}};Object.defineProperty(cjs$1,"__esModule",{value:!0}),cjs$1.default=t;var e=r(requireInlineStyleParser());function t(_e,Te){var Ee=null;if(!_e||typeof _e!="string")return Ee;var xe=(0,e.default)(_e),Pe=typeof Te=="function";return xe.forEach(function(Re){if(Re.type==="declaration"){var ke=Re.property,Ce=Re.value;Pe?Te(ke,Ce,Re):Ce&&(Ee=Ee||{},Ee[ke]=Ce)}}),Ee}return cjs$1}var utilities={},hasRequiredUtilities;function requireUtilities(){if(hasRequiredUtilities)return utilities;hasRequiredUtilities=1,Object.defineProperty(utilities,"__esModule",{value:!0}),utilities.camelCase=void 0;var r=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,_e=/^-(webkit|moz|ms|o|khtml)-/,Te=/^-(ms)-/,Ee=function(ke){return!ke||t.test(ke)||r.test(ke)},xe=function(ke,Ce){return Ce.toUpperCase()},Pe=function(ke,Ce){return"".concat(Ce,"-")},Re=function(ke,Ce){return Ce===void 0&&(Ce={}),Ee(ke)?ke:(ke=ke.toLowerCase(),Ce.reactCompat?ke=ke.replace(Te,Pe):ke=ke.replace(_e,Pe),ke.replace(e,xe))};return utilities.camelCase=Re,utilities}var cjs,hasRequiredCjs;function requireCjs(){if(hasRequiredCjs)return cjs;hasRequiredCjs=1;var r=cjs&&cjs.__importDefault||function(Te){return Te&&Te.__esModule?Te:{default:Te}},e=r(requireCjs$1()),t=requireUtilities();function _e(Te,Ee){var xe={};return!Te||typeof Te!="string"||(0,e.default)(Te,function(Pe,Re){Pe&&Re&&(xe[(0,t.camelCase)(Pe,Ee)]=Re)}),xe}return _e.default=_e,cjs=_e,cjs}var cjsExports=requireCjs();const styleToJs=getDefaultExportFromCjs(cjsExports),pointEnd=point$3("end"),pointStart=point$3("start");function point$3(r){return e;function e(t){const _e=t&&t.position&&t.position[r]||{};if(typeof _e.line=="number"&&_e.line>0&&typeof _e.column=="number"&&_e.column>0)return{line:_e.line,column:_e.column,offset:typeof _e.offset=="number"&&_e.offset>-1?_e.offset:void 0}}}function position$1(r){const e=pointStart(r),t=pointEnd(r);if(e&&t)return{start:e,end:t}}function stringifyPosition(r){return!r||typeof r!="object"?"":"position"in r||"type"in r?position(r.position):"start"in r||"end"in r?position(r):"line"in r||"column"in r?point$2(r):""}function point$2(r){return index(r&&r.line)+":"+index(r&&r.column)}function position(r){return point$2(r&&r.start)+"-"+point$2(r&&r.end)}function index(r){return r&&typeof r=="number"?r:1}class VFileMessage extends Error{constructor(e,t,_e){super(),typeof t=="string"&&(_e=t,t=void 0);let Te="",Ee={},xe=!1;if(t&&("line"in t&&"column"in t?Ee={place:t}:"start"in t&&"end"in t?Ee={place:t}:"type"in t?Ee={ancestors:[t],place:t.position}:Ee={...t}),typeof e=="string"?Te=e:!Ee.cause&&e&&(xe=!0,Te=e.message,Ee.cause=e),!Ee.ruleId&&!Ee.source&&typeof _e=="string"){const Re=_e.indexOf(":");Re===-1?Ee.ruleId=_e:(Ee.source=_e.slice(0,Re),Ee.ruleId=_e.slice(Re+1))}if(!Ee.place&&Ee.ancestors&&Ee.ancestors){const Re=Ee.ancestors[Ee.ancestors.length-1];Re&&(Ee.place=Re.position)}const Pe=Ee.place&&"start"in Ee.place?Ee.place.start:Ee.place;this.ancestors=Ee.ancestors||void 0,this.cause=Ee.cause||void 0,this.column=Pe?Pe.column:void 0,this.fatal=void 0,this.file,this.message=Te,this.line=Pe?Pe.line:void 0,this.name=stringifyPosition(Ee.place)||"1:1",this.place=Ee.place||void 0,this.reason=this.message,this.ruleId=Ee.ruleId||void 0,this.source=Ee.source||void 0,this.stack=xe&&Ee.cause&&typeof Ee.cause.stack=="string"?Ee.cause.stack:"",this.actual,this.expected,this.note,this.url}}VFileMessage.prototype.file="";VFileMessage.prototype.name="";VFileMessage.prototype.reason="";VFileMessage.prototype.message="";VFileMessage.prototype.stack="";VFileMessage.prototype.column=void 0;VFileMessage.prototype.line=void 0;VFileMessage.prototype.ancestors=void 0;VFileMessage.prototype.cause=void 0;VFileMessage.prototype.fatal=void 0;VFileMessage.prototype.place=void 0;VFileMessage.prototype.ruleId=void 0;VFileMessage.prototype.source=void 0;const own$3={}.hasOwnProperty,emptyMap=new Map,cap=/[A-Z]/g,tableElements=new Set(["table","tbody","thead","tfoot","tr"]),tableCellElement=new Set(["td","th"]),docs="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function toJsxRuntime(r,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let _e;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");_e=developmentCreate(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");_e=productionCreate(t,e.jsx,e.jsxs)}const Te={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:_e,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?svg:html$1,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},Ee=one$1(Te,r,void 0);return Ee&&typeof Ee!="string"?Ee:Te.create(r,Te.Fragment,{children:Ee||void 0},void 0)}function one$1(r,e,t){if(e.type==="element")return element$1(r,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return mdxExpression(r,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return mdxJsxElement(r,e,t);if(e.type==="mdxjsEsm")return mdxEsm(r,e);if(e.type==="root")return root$1(r,e,t);if(e.type==="text")return text$3(r,e)}function element$1(r,e,t){const _e=r.schema;let Te=_e;e.tagName.toLowerCase()==="svg"&&_e.space==="html"&&(Te=svg,r.schema=Te),r.ancestors.push(e);const Ee=findComponentFromName(r,e.tagName,!1),xe=createElementProps(r,e);let Pe=createChildren(r,e);return tableElements.has(e.tagName)&&(Pe=Pe.filter(function(Re){return typeof Re=="string"?!whitespace(Re):!0})),addNode(r,xe,Ee,e),addChildren(xe,Pe),r.ancestors.pop(),r.schema=_e,r.create(e,Ee,xe,t)}function mdxExpression(r,e){if(e.data&&e.data.estree&&r.evaluater){const _e=e.data.estree.body[0];return _e.type,r.evaluater.evaluateExpression(_e.expression)}crashEstree(r,e.position)}function mdxEsm(r,e){if(e.data&&e.data.estree&&r.evaluater)return r.evaluater.evaluateProgram(e.data.estree);crashEstree(r,e.position)}function mdxJsxElement(r,e,t){const _e=r.schema;let Te=_e;e.name==="svg"&&_e.space==="html"&&(Te=svg,r.schema=Te),r.ancestors.push(e);const Ee=e.name===null?r.Fragment:findComponentFromName(r,e.name,!0),xe=createJsxElementProps(r,e),Pe=createChildren(r,e);return addNode(r,xe,Ee,e),addChildren(xe,Pe),r.ancestors.pop(),r.schema=_e,r.create(e,Ee,xe,t)}function root$1(r,e,t){const _e={};return addChildren(_e,createChildren(r,e)),r.create(e,r.Fragment,_e,t)}function text$3(r,e){return e.value}function addNode(r,e,t,_e){typeof t!="string"&&t!==r.Fragment&&r.passNode&&(e.node=_e)}function addChildren(r,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(r.children=t)}}function productionCreate(r,e,t){return _e;function _e(Te,Ee,xe,Pe){const ke=Array.isArray(xe.children)?t:e;return Pe?ke(Ee,xe,Pe):ke(Ee,xe)}}function developmentCreate(r,e){return t;function t(_e,Te,Ee,xe){const Pe=Array.isArray(Ee.children),Re=pointStart(_e);return e(Te,Ee,xe,Pe,{columnNumber:Re?Re.column-1:void 0,fileName:r,lineNumber:Re?Re.line:void 0},void 0)}}function createElementProps(r,e){const t={};let _e,Te;for(Te in e.properties)if(Te!=="children"&&own$3.call(e.properties,Te)){const Ee=createProperty(r,Te,e.properties[Te]);if(Ee){const[xe,Pe]=Ee;r.tableCellAlignToStyle&&xe==="align"&&typeof Pe=="string"&&tableCellElement.has(e.tagName)?_e=Pe:t[xe]=Pe}}if(_e){const Ee=t.style||(t.style={});Ee[r.stylePropertyNameCase==="css"?"text-align":"textAlign"]=_e}return t}function createJsxElementProps(r,e){const t={};for(const _e of e.attributes)if(_e.type==="mdxJsxExpressionAttribute")if(_e.data&&_e.data.estree&&r.evaluater){const Ee=_e.data.estree.body[0];Ee.type;const xe=Ee.expression;xe.type;const Pe=xe.properties[0];Pe.type,Object.assign(t,r.evaluater.evaluateExpression(Pe.argument))}else crashEstree(r,e.position);else{const Te=_e.name;let Ee;if(_e.value&&typeof _e.value=="object")if(_e.value.data&&_e.value.data.estree&&r.evaluater){const Pe=_e.value.data.estree.body[0];Pe.type,Ee=r.evaluater.evaluateExpression(Pe.expression)}else crashEstree(r,e.position);else Ee=_e.value===null?!0:_e.value;t[Te]=Ee}return t}function createChildren(r,e){const t=[];let _e=-1;const Te=r.passKeys?new Map:emptyMap;for(;++_e<e.children.length;){const Ee=e.children[_e];let xe;if(r.passKeys){const Re=Ee.type==="element"?Ee.tagName:Ee.type==="mdxJsxFlowElement"||Ee.type==="mdxJsxTextElement"?Ee.name:void 0;if(Re){const ke=Te.get(Re)||0;xe=Re+"-"+ke,Te.set(Re,ke+1)}}const Pe=one$1(r,Ee,xe);Pe!==void 0&&t.push(Pe)}return t}function createProperty(r,e,t){const _e=find(r.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=_e.commaSeparated?stringify$1(t):stringify(t)),_e.property==="style"){let Te=typeof t=="object"?t:parseStyle(r,String(t));return r.stylePropertyNameCase==="css"&&(Te=transformStylesToCssCasing(Te)),["style",Te]}return[r.elementAttributeNameCase==="react"&&_e.space?hastToReact[_e.property]||_e.property:_e.attribute,t]}}function parseStyle(r,e){try{return styleToJs(e,{reactCompat:!0})}catch(t){if(r.ignoreInvalidStyle)return{};const _e=t,Te=new VFileMessage("Cannot parse `style` attribute",{ancestors:r.ancestors,cause:_e,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw Te.file=r.filePath||void 0,Te.url=docs+"#cannot-parse-style-attribute",Te}}function findComponentFromName(r,e,t){let _e;if(!t)_e={type:"Literal",value:e};else if(e.includes(".")){const Te=e.split(".");let Ee=-1,xe;for(;++Ee<Te.length;){const Pe=name$1(Te[Ee])?{type:"Identifier",name:Te[Ee]}:{type:"Literal",value:Te[Ee]};xe=xe?{type:"MemberExpression",object:xe,property:Pe,computed:!!(Ee&&Pe.type==="Literal"),optional:!1}:Pe}_e=xe}else _e=name$1(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(_e.type==="Literal"){const Te=_e.value;return own$3.call(r.components,Te)?r.components[Te]:Te}if(r.evaluater)return r.evaluater.evaluateExpression(_e);crashEstree(r)}function crashEstree(r,e){const t=new VFileMessage("Cannot handle MDX estrees without `createEvaluater`",{ancestors:r.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=r.filePath||void 0,t.url=docs+"#cannot-handle-mdx-estrees-without-createevaluater",t}function transformStylesToCssCasing(r){const e={};let t;for(t in r)own$3.call(r,t)&&(e[transformStyleToCssCasing(t)]=r[t]);return e}function transformStyleToCssCasing(r){let e=r.replace(cap,toDash);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function toDash(r){return"-"+r.toLowerCase()}const urlAttributes={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},emptyOptions$1={};function toString$1(r,e){const t=emptyOptions$1,_e=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,Te=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return one(r,_e,Te)}function one(r,e,t){if(node(r)){if("value"in r)return r.type==="html"&&!t?"":r.value;if(e&&"alt"in r&&r.alt)return r.alt;if("children"in r)return all(r.children,e,t)}return Array.isArray(r)?all(r,e,t):""}function all(r,e,t){const _e=[];let Te=-1;for(;++Te<r.length;)_e[Te]=one(r[Te],e,t);return _e.join("")}function node(r){return!!(r&&typeof r=="object")}const element=document.createElement("i");function decodeNamedCharacterReference(r){const e="&"+r+";";element.innerHTML=e;const t=element.textContent;return t.charCodeAt(t.length-1)===59&&r!=="semi"||t===e?!1:t}function splice(r,e,t,_e){const Te=r.length;let Ee=0,xe;if(e<0?e=-e>Te?0:Te+e:e=e>Te?Te:e,t=t>0?t:0,_e.length<1e4)xe=Array.from(_e),xe.unshift(e,t),r.splice(...xe);else for(t&&r.splice(e,t);Ee<_e.length;)xe=_e.slice(Ee,Ee+1e4),xe.unshift(e,0),r.splice(...xe),Ee+=1e4,e+=1e4}function push(r,e){return r.length>0?(splice(r,r.length,0,e),r):e}const hasOwnProperty={}.hasOwnProperty;function combineExtensions(r){const e={};let t=-1;for(;++t<r.length;)syntaxExtension(e,r[t]);return e}function syntaxExtension(r,e){let t;for(t in e){const Te=(hasOwnProperty.call(r,t)?r[t]:void 0)||(r[t]={}),Ee=e[t];let xe;if(Ee)for(xe in Ee){hasOwnProperty.call(Te,xe)||(Te[xe]=[]);const Pe=Ee[xe];constructs(Te[xe],Array.isArray(Pe)?Pe:Pe?[Pe]:[])}}}function constructs(r,e){let t=-1;const _e=[];for(;++t<e.length;)(e[t].add==="after"?r:_e).push(e[t]);splice(r,0,0,_e)}function decodeNumericCharacterReference(r,e){const t=Number.parseInt(r,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"�":String.fromCodePoint(t)}function normalizeIdentifier(r){return r.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const asciiAlpha=regexCheck(/[A-Za-z]/),asciiAlphanumeric=regexCheck(/[\dA-Za-z]/),asciiAtext=regexCheck(/[#-'*+\--9=?A-Z^-~]/);function asciiControl(r){return r!==null&&(r<32||r===127)}const asciiDigit=regexCheck(/\d/),asciiHexDigit=regexCheck(/[\dA-Fa-f]/),asciiPunctuation=regexCheck(/[!-/:-@[-`{-~]/);function markdownLineEnding(r){return r!==null&&r<-2}function markdownLineEndingOrSpace(r){return r!==null&&(r<0||r===32)}function markdownSpace(r){return r===-2||r===-1||r===32}const unicodePunctuation=regexCheck(new RegExp("\\p{P}|\\p{S}","u")),unicodeWhitespace=regexCheck(/\s/);function regexCheck(r){return e;function e(t){return t!==null&&t>-1&&r.test(String.fromCharCode(t))}}function normalizeUri(r){const e=[];let t=-1,_e=0,Te=0;for(;++t<r.length;){const Ee=r.charCodeAt(t);let xe="";if(Ee===37&&asciiAlphanumeric(r.charCodeAt(t+1))&&asciiAlphanumeric(r.charCodeAt(t+2)))Te=2;else if(Ee<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(Ee))||(xe=String.fromCharCode(Ee));else if(Ee>55295&&Ee<57344){const Pe=r.charCodeAt(t+1);Ee<56320&&Pe>56319&&Pe<57344?(xe=String.fromCharCode(Ee,Pe),Te=1):xe="�"}else xe=String.fromCharCode(Ee);xe&&(e.push(r.slice(_e,t),encodeURIComponent(xe)),_e=t+Te+1,xe=""),Te&&(t+=Te,Te=0)}return e.join("")+r.slice(_e)}function factorySpace(r,e,t,_e){const Te=_e?_e-1:Number.POSITIVE_INFINITY;let Ee=0;return xe;function xe(Re){return markdownSpace(Re)?(r.enter(t),Pe(Re)):e(Re)}function Pe(Re){return markdownSpace(Re)&&Ee++<Te?(r.consume(Re),Pe):(r.exit(t),e(Re))}}const content$1={tokenize:initializeContent};function initializeContent(r){const e=r.attempt(this.parser.constructs.contentInitial,_e,Te);let t;return e;function _e(Pe){if(Pe===null){r.consume(Pe);return}return r.enter("lineEnding"),r.consume(Pe),r.exit("lineEnding"),factorySpace(r,e,"linePrefix")}function Te(Pe){return r.enter("paragraph"),Ee(Pe)}function Ee(Pe){const Re=r.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=Re),t=Re,xe(Pe)}function xe(Pe){if(Pe===null){r.exit("chunkText"),r.exit("paragraph"),r.consume(Pe);return}return markdownLineEnding(Pe)?(r.consume(Pe),r.exit("chunkText"),Ee):(r.consume(Pe),xe)}}const document$2={tokenize:initializeDocument},containerConstruct={tokenize:tokenizeContainer};function initializeDocument(r){const e=this,t=[];let _e=0,Te,Ee,xe;return Pe;function Pe(qe){if(_e<t.length){const He=t[_e];return e.containerState=He[1],r.attempt(He[0].continuation,Re,ke)(qe)}return ke(qe)}function Re(qe){if(_e++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,Te&&Be();const He=e.events.length;let Xe=He,Je;for(;Xe--;)if(e.events[Xe][0]==="exit"&&e.events[Xe][1].type==="chunkFlow"){Je=e.events[Xe][1].end;break}je(_e);let Qe=He;for(;Qe<e.events.length;)e.events[Qe][1].end={...Je},Qe++;return splice(e.events,Xe+1,0,e.events.slice(He)),e.events.length=Qe,ke(qe)}return Pe(qe)}function ke(qe){if(_e===t.length){if(!Te)return Ae(qe);if(Te.currentConstruct&&Te.currentConstruct.concrete)return Me(qe);e.interrupt=!!(Te.currentConstruct&&!Te._gfmTableDynamicInterruptHack)}return e.containerState={},r.check(containerConstruct,Ce,Se)(qe)}function Ce(qe){return Te&&Be(),je(_e),Ae(qe)}function Se(qe){return e.parser.lazy[e.now().line]=_e!==t.length,xe=e.now().offset,Me(qe)}function Ae(qe){return e.containerState={},r.attempt(containerConstruct,Ie,Me)(qe)}function Ie(qe){return _e++,t.push([e.currentConstruct,e.containerState]),Ae(qe)}function Me(qe){if(qe===null){Te&&Be(),je(0),r.consume(qe);return}return Te=Te||e.parser.flow(e.now()),r.enter("chunkFlow",{_tokenizer:Te,contentType:"flow",previous:Ee}),Fe(qe)}function Fe(qe){if(qe===null){Ve(r.exit("chunkFlow"),!0),je(0),r.consume(qe);return}return markdownLineEnding(qe)?(r.consume(qe),Ve(r.exit("chunkFlow")),_e=0,e.interrupt=void 0,Pe):(r.consume(qe),Fe)}function Ve(qe,He){const Xe=e.sliceStream(qe);if(He&&Xe.push(null),qe.previous=Ee,Ee&&(Ee.next=qe),Ee=qe,Te.defineSkip(qe.start),Te.write(Xe),e.parser.lazy[qe.start.line]){let Je=Te.events.length;for(;Je--;)if(Te.events[Je][1].start.offset<xe&&(!Te.events[Je][1].end||Te.events[Je][1].end.offset>xe))return;const Qe=e.events.length;let Ke=Qe,Ye,pn;for(;Ke--;)if(e.events[Ke][0]==="exit"&&e.events[Ke][1].type==="chunkFlow"){if(Ye){pn=e.events[Ke][1].end;break}Ye=!0}for(je(_e),Je=Qe;Je<e.events.length;)e.events[Je][1].end={...pn},Je++;splice(e.events,Ke+1,0,e.events.slice(Qe)),e.events.length=Je}}function je(qe){let He=t.length;for(;He-- >qe;){const Xe=t[He];e.containerState=Xe[1],Xe[0].exit.call(e,r)}t.length=qe}function Be(){Te.write([null]),Ee=void 0,Te=void 0,e.containerState._closeFlow=void 0}}function tokenizeContainer(r,e,t){return factorySpace(r,r.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function classifyCharacter(r){if(r===null||markdownLineEndingOrSpace(r)||unicodeWhitespace(r))return 1;if(unicodePunctuation(r))return 2}function resolveAll(r,e,t){const _e=[];let Te=-1;for(;++Te<r.length;){const Ee=r[Te].resolveAll;Ee&&!_e.includes(Ee)&&(e=Ee(e,t),_e.push(Ee))}return e}const attention={name:"attention",resolveAll:resolveAllAttention,tokenize:tokenizeAttention};function resolveAllAttention(r,e){let t=-1,_e,Te,Ee,xe,Pe,Re,ke,Ce;for(;++t<r.length;)if(r[t][0]==="enter"&&r[t][1].type==="attentionSequence"&&r[t][1]._close){for(_e=t;_e--;)if(r[_e][0]==="exit"&&r[_e][1].type==="attentionSequence"&&r[_e][1]._open&&e.sliceSerialize(r[_e][1]).charCodeAt(0)===e.sliceSerialize(r[t][1]).charCodeAt(0)){if((r[_e][1]._close||r[t][1]._open)&&(r[t][1].end.offset-r[t][1].start.offset)%3&&!((r[_e][1].end.offset-r[_e][1].start.offset+r[t][1].end.offset-r[t][1].start.offset)%3))continue;Re=r[_e][1].end.offset-r[_e][1].start.offset>1&&r[t][1].end.offset-r[t][1].start.offset>1?2:1;const Se={...r[_e][1].end},Ae={...r[t][1].start};movePoint(Se,-Re),movePoint(Ae,Re),xe={type:Re>1?"strongSequence":"emphasisSequence",start:Se,end:{...r[_e][1].end}},Pe={type:Re>1?"strongSequence":"emphasisSequence",start:{...r[t][1].start},end:Ae},Ee={type:Re>1?"strongText":"emphasisText",start:{...r[_e][1].end},end:{...r[t][1].start}},Te={type:Re>1?"strong":"emphasis",start:{...xe.start},end:{...Pe.end}},r[_e][1].end={...xe.start},r[t][1].start={...Pe.end},ke=[],r[_e][1].end.offset-r[_e][1].start.offset&&(ke=push(ke,[["enter",r[_e][1],e],["exit",r[_e][1],e]])),ke=push(ke,[["enter",Te,e],["enter",xe,e],["exit",xe,e],["enter",Ee,e]]),ke=push(ke,resolveAll(e.parser.constructs.insideSpan.null,r.slice(_e+1,t),e)),ke=push(ke,[["exit",Ee,e],["enter",Pe,e],["exit",Pe,e],["exit",Te,e]]),r[t][1].end.offset-r[t][1].start.offset?(Ce=2,ke=push(ke,[["enter",r[t][1],e],["exit",r[t][1],e]])):Ce=0,splice(r,_e-1,t-_e+3,ke),t=_e+ke.length-Ce-2;break}}for(t=-1;++t<r.length;)r[t][1].type==="attentionSequence"&&(r[t][1].type="data");return r}function tokenizeAttention(r,e){const t=this.parser.constructs.attentionMarkers.null,_e=this.previous,Te=classifyCharacter(_e);let Ee;return xe;function xe(Re){return Ee=Re,r.enter("attentionSequence"),Pe(Re)}function Pe(Re){if(Re===Ee)return r.consume(Re),Pe;const ke=r.exit("attentionSequence"),Ce=classifyCharacter(Re),Se=!Ce||Ce===2&&Te||t.includes(Re),Ae=!Te||Te===2&&Ce||t.includes(_e);return ke._open=!!(Ee===42?Se:Se&&(Te||!Ae)),ke._close=!!(Ee===42?Ae:Ae&&(Ce||!Se)),e(Re)}}function movePoint(r,e){r.column+=e,r.offset+=e,r._bufferIndex+=e}const autolink={name:"autolink",tokenize:tokenizeAutolink};function tokenizeAutolink(r,e,t){let _e=0;return Te;function Te(Ie){return r.enter("autolink"),r.enter("autolinkMarker"),r.consume(Ie),r.exit("autolinkMarker"),r.enter("autolinkProtocol"),Ee}function Ee(Ie){return asciiAlpha(Ie)?(r.consume(Ie),xe):Ie===64?t(Ie):ke(Ie)}function xe(Ie){return Ie===43||Ie===45||Ie===46||asciiAlphanumeric(Ie)?(_e=1,Pe(Ie)):ke(Ie)}function Pe(Ie){return Ie===58?(r.consume(Ie),_e=0,Re):(Ie===43||Ie===45||Ie===46||asciiAlphanumeric(Ie))&&_e++<32?(r.consume(Ie),Pe):(_e=0,ke(Ie))}function Re(Ie){return Ie===62?(r.exit("autolinkProtocol"),r.enter("autolinkMarker"),r.consume(Ie),r.exit("autolinkMarker"),r.exit("autolink"),e):Ie===null||Ie===32||Ie===60||asciiControl(Ie)?t(Ie):(r.consume(Ie),Re)}function ke(Ie){return Ie===64?(r.consume(Ie),Ce):asciiAtext(Ie)?(r.consume(Ie),ke):t(Ie)}function Ce(Ie){return asciiAlphanumeric(Ie)?Se(Ie):t(Ie)}function Se(Ie){return Ie===46?(r.consume(Ie),_e=0,Ce):Ie===62?(r.exit("autolinkProtocol").type="autolinkEmail",r.enter("autolinkMarker"),r.consume(Ie),r.exit("autolinkMarker"),r.exit("autolink"),e):Ae(Ie)}function Ae(Ie){if((Ie===45||asciiAlphanumeric(Ie))&&_e++<63){const Me=Ie===45?Ae:Se;return r.consume(Ie),Me}return t(Ie)}}const blankLine={partial:!0,tokenize:tokenizeBlankLine};function tokenizeBlankLine(r,e,t){return _e;function _e(Ee){return markdownSpace(Ee)?factorySpace(r,Te,"linePrefix")(Ee):Te(Ee)}function Te(Ee){return Ee===null||markdownLineEnding(Ee)?e(Ee):t(Ee)}}const blockQuote={continuation:{tokenize:tokenizeBlockQuoteContinuation},exit,name:"blockQuote",tokenize:tokenizeBlockQuoteStart};function tokenizeBlockQuoteStart(r,e,t){const _e=this;return Te;function Te(xe){if(xe===62){const Pe=_e.containerState;return Pe.open||(r.enter("blockQuote",{_container:!0}),Pe.open=!0),r.enter("blockQuotePrefix"),r.enter("blockQuoteMarker"),r.consume(xe),r.exit("blockQuoteMarker"),Ee}return t(xe)}function Ee(xe){return markdownSpace(xe)?(r.enter("blockQuotePrefixWhitespace"),r.consume(xe),r.exit("blockQuotePrefixWhitespace"),r.exit("blockQuotePrefix"),e):(r.exit("blockQuotePrefix"),e(xe))}}function tokenizeBlockQuoteContinuation(r,e,t){const _e=this;return Te;function Te(xe){return markdownSpace(xe)?factorySpace(r,Ee,"linePrefix",_e.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(xe):Ee(xe)}function Ee(xe){return r.attempt(blockQuote,e,t)(xe)}}function exit(r){r.exit("blockQuote")}const characterEscape={name:"characterEscape",tokenize:tokenizeCharacterEscape};function tokenizeCharacterEscape(r,e,t){return _e;function _e(Ee){return r.enter("characterEscape"),r.enter("escapeMarker"),r.consume(Ee),r.exit("escapeMarker"),Te}function Te(Ee){return asciiPunctuation(Ee)?(r.enter("characterEscapeValue"),r.consume(Ee),r.exit("characterEscapeValue"),r.exit("characterEscape"),e):t(Ee)}}const characterReference={name:"characterReference",tokenize:tokenizeCharacterReference};function tokenizeCharacterReference(r,e,t){const _e=this;let Te=0,Ee,xe;return Pe;function Pe(Se){return r.enter("characterReference"),r.enter("characterReferenceMarker"),r.consume(Se),r.exit("characterReferenceMarker"),Re}function Re(Se){return Se===35?(r.enter("characterReferenceMarkerNumeric"),r.consume(Se),r.exit("characterReferenceMarkerNumeric"),ke):(r.enter("characterReferenceValue"),Ee=31,xe=asciiAlphanumeric,Ce(Se))}function ke(Se){return Se===88||Se===120?(r.enter("characterReferenceMarkerHexadecimal"),r.consume(Se),r.exit("characterReferenceMarkerHexadecimal"),r.enter("characterReferenceValue"),Ee=6,xe=asciiHexDigit,Ce):(r.enter("characterReferenceValue"),Ee=7,xe=asciiDigit,Ce(Se))}function Ce(Se){if(Se===59&&Te){const Ae=r.exit("characterReferenceValue");return xe===asciiAlphanumeric&&!decodeNamedCharacterReference(_e.sliceSerialize(Ae))?t(Se):(r.enter("characterReferenceMarker"),r.consume(Se),r.exit("characterReferenceMarker"),r.exit("characterReference"),e)}return xe(Se)&&Te++<Ee?(r.consume(Se),Ce):t(Se)}}const nonLazyContinuation={partial:!0,tokenize:tokenizeNonLazyContinuation},codeFenced={concrete:!0,name:"codeFenced",tokenize:tokenizeCodeFenced};function tokenizeCodeFenced(r,e,t){const _e=this,Te={partial:!0,tokenize:Xe};let Ee=0,xe=0,Pe;return Re;function Re(Je){return ke(Je)}function ke(Je){const Qe=_e.events[_e.events.length-1];return Ee=Qe&&Qe[1].type==="linePrefix"?Qe[2].sliceSerialize(Qe[1],!0).length:0,Pe=Je,r.enter("codeFenced"),r.enter("codeFencedFence"),r.enter("codeFencedFenceSequence"),Ce(Je)}function Ce(Je){return Je===Pe?(xe++,r.consume(Je),Ce):xe<3?t(Je):(r.exit("codeFencedFenceSequence"),markdownSpace(Je)?factorySpace(r,Se,"whitespace")(Je):Se(Je))}function Se(Je){return Je===null||markdownLineEnding(Je)?(r.exit("codeFencedFence"),_e.interrupt?e(Je):r.check(nonLazyContinuation,Fe,He)(Je)):(r.enter("codeFencedFenceInfo"),r.enter("chunkString",{contentType:"string"}),Ae(Je))}function Ae(Je){return Je===null||markdownLineEnding(Je)?(r.exit("chunkString"),r.exit("codeFencedFenceInfo"),Se(Je)):markdownSpace(Je)?(r.exit("chunkString"),r.exit("codeFencedFenceInfo"),factorySpace(r,Ie,"whitespace")(Je)):Je===96&&Je===Pe?t(Je):(r.consume(Je),Ae)}function Ie(Je){return Je===null||markdownLineEnding(Je)?Se(Je):(r.enter("codeFencedFenceMeta"),r.enter("chunkString",{contentType:"string"}),Me(Je))}function Me(Je){return Je===null||markdownLineEnding(Je)?(r.exit("chunkString"),r.exit("codeFencedFenceMeta"),Se(Je)):Je===96&&Je===Pe?t(Je):(r.consume(Je),Me)}function Fe(Je){return r.attempt(Te,He,Ve)(Je)}function Ve(Je){return r.enter("lineEnding"),r.consume(Je),r.exit("lineEnding"),je}function je(Je){return Ee>0&&markdownSpace(Je)?factorySpace(r,Be,"linePrefix",Ee+1)(Je):Be(Je)}function Be(Je){return Je===null||markdownLineEnding(Je)?r.check(nonLazyContinuation,Fe,He)(Je):(r.enter("codeFlowValue"),qe(Je))}function qe(Je){return Je===null||markdownLineEnding(Je)?(r.exit("codeFlowValue"),Be(Je)):(r.consume(Je),qe)}function He(Je){return r.exit("codeFenced"),e(Je)}function Xe(Je,Qe,Ke){let Ye=0;return pn;function pn(Pn){return Je.enter("lineEnding"),Je.consume(Pn),Je.exit("lineEnding"),un}function un(Pn){return Je.enter("codeFencedFence"),markdownSpace(Pn)?factorySpace(Je,fn,"linePrefix",_e.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Pn):fn(Pn)}function fn(Pn){return Pn===Pe?(Je.enter("codeFencedFenceSequence"),mn(Pn)):Ke(Pn)}function mn(Pn){return Pn===Pe?(Ye++,Je.consume(Pn),mn):Ye>=xe?(Je.exit("codeFencedFenceSequence"),markdownSpace(Pn)?factorySpace(Je,wn,"whitespace")(Pn):wn(Pn)):Ke(Pn)}function wn(Pn){return Pn===null||markdownLineEnding(Pn)?(Je.exit("codeFencedFence"),Qe(Pn)):Ke(Pn)}}}function tokenizeNonLazyContinuation(r,e,t){const _e=this;return Te;function Te(xe){return xe===null?t(xe):(r.enter("lineEnding"),r.consume(xe),r.exit("lineEnding"),Ee)}function Ee(xe){return _e.parser.lazy[_e.now().line]?t(xe):e(xe)}}const codeIndented={name:"codeIndented",tokenize:tokenizeCodeIndented},furtherStart={partial:!0,tokenize:tokenizeFurtherStart};function tokenizeCodeIndented(r,e,t){const _e=this;return Te;function Te(ke){return r.enter("codeIndented"),factorySpace(r,Ee,"linePrefix",5)(ke)}function Ee(ke){const Ce=_e.events[_e.events.length-1];return Ce&&Ce[1].type==="linePrefix"&&Ce[2].sliceSerialize(Ce[1],!0).length>=4?xe(ke):t(ke)}function xe(ke){return ke===null?Re(ke):markdownLineEnding(ke)?r.attempt(furtherStart,xe,Re)(ke):(r.enter("codeFlowValue"),Pe(ke))}function Pe(ke){return ke===null||markdownLineEnding(ke)?(r.exit("codeFlowValue"),xe(ke)):(r.consume(ke),Pe)}function Re(ke){return r.exit("codeIndented"),e(ke)}}function tokenizeFurtherStart(r,e,t){const _e=this;return Te;function Te(xe){return _e.parser.lazy[_e.now().line]?t(xe):markdownLineEnding(xe)?(r.enter("lineEnding"),r.consume(xe),r.exit("lineEnding"),Te):factorySpace(r,Ee,"linePrefix",5)(xe)}function Ee(xe){const Pe=_e.events[_e.events.length-1];return Pe&&Pe[1].type==="linePrefix"&&Pe[2].sliceSerialize(Pe[1],!0).length>=4?e(xe):markdownLineEnding(xe)?Te(xe):t(xe)}}const codeText={name:"codeText",previous,resolve:resolveCodeText,tokenize:tokenizeCodeText};function resolveCodeText(r){let e=r.length-4,t=3,_e,Te;if((r[t][1].type==="lineEnding"||r[t][1].type==="space")&&(r[e][1].type==="lineEnding"||r[e][1].type==="space")){for(_e=t;++_e<e;)if(r[_e][1].type==="codeTextData"){r[t][1].type="codeTextPadding",r[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(_e=t-1,e++;++_e<=e;)Te===void 0?_e!==e&&r[_e][1].type!=="lineEnding"&&(Te=_e):(_e===e||r[_e][1].type==="lineEnding")&&(r[Te][1].type="codeTextData",_e!==Te+2&&(r[Te][1].end=r[_e-1][1].end,r.splice(Te+2,_e-Te-2),e-=_e-Te-2,_e=Te+2),Te=void 0);return r}function previous(r){return r!==96||this.events[this.events.length-1][1].type==="characterEscape"}function tokenizeCodeText(r,e,t){let _e=0,Te,Ee;return xe;function xe(Se){return r.enter("codeText"),r.enter("codeTextSequence"),Pe(Se)}function Pe(Se){return Se===96?(r.consume(Se),_e++,Pe):(r.exit("codeTextSequence"),Re(Se))}function Re(Se){return Se===null?t(Se):Se===32?(r.enter("space"),r.consume(Se),r.exit("space"),Re):Se===96?(Ee=r.enter("codeTextSequence"),Te=0,Ce(Se)):markdownLineEnding(Se)?(r.enter("lineEnding"),r.consume(Se),r.exit("lineEnding"),Re):(r.enter("codeTextData"),ke(Se))}function ke(Se){return Se===null||Se===32||Se===96||markdownLineEnding(Se)?(r.exit("codeTextData"),Re(Se)):(r.consume(Se),ke)}function Ce(Se){return Se===96?(r.consume(Se),Te++,Ce):Te===_e?(r.exit("codeTextSequence"),r.exit("codeText"),e(Se)):(Ee.type="codeTextData",ke(Se))}}class SpliceBuffer{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const _e=t??Number.POSITIVE_INFINITY;return _e<this.left.length?this.left.slice(e,_e):e>this.left.length?this.right.slice(this.right.length-_e+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-_e+this.left.length).reverse())}splice(e,t,_e){const Te=t||0;this.setCursor(Math.trunc(e));const Ee=this.right.splice(this.right.length-Te,Number.POSITIVE_INFINITY);return _e&&chunkedPush(this.left,_e),Ee.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),chunkedPush(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),chunkedPush(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);chunkedPush(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);chunkedPush(this.left,t.reverse())}}}function chunkedPush(r,e){let t=0;if(e.length<1e4)r.push(...e);else for(;t<e.length;)r.push(...e.slice(t,t+1e4)),t+=1e4}function subtokenize(r){const e={};let t=-1,_e,Te,Ee,xe,Pe,Re,ke;const Ce=new SpliceBuffer(r);for(;++t<Ce.length;){for(;t in e;)t=e[t];if(_e=Ce.get(t),t&&_e[1].type==="chunkFlow"&&Ce.get(t-1)[1].type==="listItemPrefix"&&(Re=_e[1]._tokenizer.events,Ee=0,Ee<Re.length&&Re[Ee][1].type==="lineEndingBlank"&&(Ee+=2),Ee<Re.length&&Re[Ee][1].type==="content"))for(;++Ee<Re.length&&Re[Ee][1].type!=="content";)Re[Ee][1].type==="chunkText"&&(Re[Ee][1]._isInFirstContentOfListItem=!0,Ee++);if(_e[0]==="enter")_e[1].contentType&&(Object.assign(e,subcontent(Ce,t)),t=e[t],ke=!0);else if(_e[1]._container){for(Ee=t,Te=void 0;Ee--;)if(xe=Ce.get(Ee),xe[1].type==="lineEnding"||xe[1].type==="lineEndingBlank")xe[0]==="enter"&&(Te&&(Ce.get(Te)[1].type="lineEndingBlank"),xe[1].type="lineEnding",Te=Ee);else if(!(xe[1].type==="linePrefix"||xe[1].type==="listItemIndent"))break;Te&&(_e[1].end={...Ce.get(Te)[1].start},Pe=Ce.slice(Te,t),Pe.unshift(_e),Ce.splice(Te,t-Te+1,Pe))}}return splice(r,0,Number.POSITIVE_INFINITY,Ce.slice(0)),!ke}function subcontent(r,e){const t=r.get(e)[1],_e=r.get(e)[2];let Te=e-1;const Ee=[];let xe=t._tokenizer;xe||(xe=_e.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(xe._contentTypeTextTrailing=!0));const Pe=xe.events,Re=[],ke={};let Ce,Se,Ae=-1,Ie=t,Me=0,Fe=0;const Ve=[Fe];for(;Ie;){for(;r.get(++Te)[1]!==Ie;);Ee.push(Te),Ie._tokenizer||(Ce=_e.sliceStream(Ie),Ie.next||Ce.push(null),Se&&xe.defineSkip(Ie.start),Ie._isInFirstContentOfListItem&&(xe._gfmTasklistFirstContentOfListItem=!0),xe.write(Ce),Ie._isInFirstContentOfListItem&&(xe._gfmTasklistFirstContentOfListItem=void 0)),Se=Ie,Ie=Ie.next}for(Ie=t;++Ae<Pe.length;)Pe[Ae][0]==="exit"&&Pe[Ae-1][0]==="enter"&&Pe[Ae][1].type===Pe[Ae-1][1].type&&Pe[Ae][1].start.line!==Pe[Ae][1].end.line&&(Fe=Ae+1,Ve.push(Fe),Ie._tokenizer=void 0,Ie.previous=void 0,Ie=Ie.next);for(xe.events=[],Ie?(Ie._tokenizer=void 0,Ie.previous=void 0):Ve.pop(),Ae=Ve.length;Ae--;){const je=Pe.slice(Ve[Ae],Ve[Ae+1]),Be=Ee.pop();Re.push([Be,Be+je.length-1]),r.splice(Be,2,je)}for(Re.reverse(),Ae=-1;++Ae<Re.length;)ke[Me+Re[Ae][0]]=Me+Re[Ae][1],Me+=Re[Ae][1]-Re[Ae][0]-1;return ke}const content={resolve:resolveContent,tokenize:tokenizeContent},continuationConstruct={partial:!0,tokenize:tokenizeContinuation};function resolveContent(r){return subtokenize(r),r}function tokenizeContent(r,e){let t;return _e;function _e(Pe){return r.enter("content"),t=r.enter("chunkContent",{contentType:"content"}),Te(Pe)}function Te(Pe){return Pe===null?Ee(Pe):markdownLineEnding(Pe)?r.check(continuationConstruct,xe,Ee)(Pe):(r.consume(Pe),Te)}function Ee(Pe){return r.exit("chunkContent"),r.exit("content"),e(Pe)}function xe(Pe){return r.consume(Pe),r.exit("chunkContent"),t.next=r.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,Te}}function tokenizeContinuation(r,e,t){const _e=this;return Te;function Te(xe){return r.exit("chunkContent"),r.enter("lineEnding"),r.consume(xe),r.exit("lineEnding"),factorySpace(r,Ee,"linePrefix")}function Ee(xe){if(xe===null||markdownLineEnding(xe))return t(xe);const Pe=_e.events[_e.events.length-1];return!_e.parser.constructs.disable.null.includes("codeIndented")&&Pe&&Pe[1].type==="linePrefix"&&Pe[2].sliceSerialize(Pe[1],!0).length>=4?e(xe):r.interrupt(_e.parser.constructs.flow,t,e)(xe)}}function factoryDestination(r,e,t,_e,Te,Ee,xe,Pe,Re){const ke=Re||Number.POSITIVE_INFINITY;let Ce=0;return Se;function Se(je){return je===60?(r.enter(_e),r.enter(Te),r.enter(Ee),r.consume(je),r.exit(Ee),Ae):je===null||je===32||je===41||asciiControl(je)?t(je):(r.enter(_e),r.enter(xe),r.enter(Pe),r.enter("chunkString",{contentType:"string"}),Fe(je))}function Ae(je){return je===62?(r.enter(Ee),r.consume(je),r.exit(Ee),r.exit(Te),r.exit(_e),e):(r.enter(Pe),r.enter("chunkString",{contentType:"string"}),Ie(je))}function Ie(je){return je===62?(r.exit("chunkString"),r.exit(Pe),Ae(je)):je===null||je===60||markdownLineEnding(je)?t(je):(r.consume(je),je===92?Me:Ie)}function Me(je){return je===60||je===62||je===92?(r.consume(je),Ie):Ie(je)}function Fe(je){return!Ce&&(je===null||je===41||markdownLineEndingOrSpace(je))?(r.exit("chunkString"),r.exit(Pe),r.exit(xe),r.exit(_e),e(je)):Ce<ke&&je===40?(r.consume(je),Ce++,Fe):je===41?(r.consume(je),Ce--,Fe):je===null||je===32||je===40||asciiControl(je)?t(je):(r.consume(je),je===92?Ve:Fe)}function Ve(je){return je===40||je===41||je===92?(r.consume(je),Fe):Fe(je)}}function factoryLabel(r,e,t,_e,Te,Ee){const xe=this;let Pe=0,Re;return ke;function ke(Ie){return r.enter(_e),r.enter(Te),r.consume(Ie),r.exit(Te),r.enter(Ee),Ce}function Ce(Ie){return Pe>999||Ie===null||Ie===91||Ie===93&&!Re||Ie===94&&!Pe&&"_hiddenFootnoteSupport"in xe.parser.constructs?t(Ie):Ie===93?(r.exit(Ee),r.enter(Te),r.consume(Ie),r.exit(Te),r.exit(_e),e):markdownLineEnding(Ie)?(r.enter("lineEnding"),r.consume(Ie),r.exit("lineEnding"),Ce):(r.enter("chunkString",{contentType:"string"}),Se(Ie))}function Se(Ie){return Ie===null||Ie===91||Ie===93||markdownLineEnding(Ie)||Pe++>999?(r.exit("chunkString"),Ce(Ie)):(r.consume(Ie),Re||(Re=!markdownSpace(Ie)),Ie===92?Ae:Se)}function Ae(Ie){return Ie===91||Ie===92||Ie===93?(r.consume(Ie),Pe++,Se):Se(Ie)}}function factoryTitle(r,e,t,_e,Te,Ee){let xe;return Pe;function Pe(Ae){return Ae===34||Ae===39||Ae===40?(r.enter(_e),r.enter(Te),r.consume(Ae),r.exit(Te),xe=Ae===40?41:Ae,Re):t(Ae)}function Re(Ae){return Ae===xe?(r.enter(Te),r.consume(Ae),r.exit(Te),r.exit(_e),e):(r.enter(Ee),ke(Ae))}function ke(Ae){return Ae===xe?(r.exit(Ee),Re(xe)):Ae===null?t(Ae):markdownLineEnding(Ae)?(r.enter("lineEnding"),r.consume(Ae),r.exit("lineEnding"),factorySpace(r,ke,"linePrefix")):(r.enter("chunkString",{contentType:"string"}),Ce(Ae))}function Ce(Ae){return Ae===xe||Ae===null||markdownLineEnding(Ae)?(r.exit("chunkString"),ke(Ae)):(r.consume(Ae),Ae===92?Se:Ce)}function Se(Ae){return Ae===xe||Ae===92?(r.consume(Ae),Ce):Ce(Ae)}}function factoryWhitespace(r,e){let t;return _e;function _e(Te){return markdownLineEnding(Te)?(r.enter("lineEnding"),r.consume(Te),r.exit("lineEnding"),t=!0,_e):markdownSpace(Te)?factorySpace(r,_e,t?"linePrefix":"lineSuffix")(Te):e(Te)}}const definition={name:"definition",tokenize:tokenizeDefinition},titleBefore={partial:!0,tokenize:tokenizeTitleBefore};function tokenizeDefinition(r,e,t){const _e=this;let Te;return Ee;function Ee(Ie){return r.enter("definition"),xe(Ie)}function xe(Ie){return factoryLabel.call(_e,r,Pe,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(Ie)}function Pe(Ie){return Te=normalizeIdentifier(_e.sliceSerialize(_e.events[_e.events.length-1][1]).slice(1,-1)),Ie===58?(r.enter("definitionMarker"),r.consume(Ie),r.exit("definitionMarker"),Re):t(Ie)}function Re(Ie){return markdownLineEndingOrSpace(Ie)?factoryWhitespace(r,ke)(Ie):ke(Ie)}function ke(Ie){return factoryDestination(r,Ce,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(Ie)}function Ce(Ie){return r.attempt(titleBefore,Se,Se)(Ie)}function Se(Ie){return markdownSpace(Ie)?factorySpace(r,Ae,"whitespace")(Ie):Ae(Ie)}function Ae(Ie){return Ie===null||markdownLineEnding(Ie)?(r.exit("definition"),_e.parser.defined.push(Te),e(Ie)):t(Ie)}}function tokenizeTitleBefore(r,e,t){return _e;function _e(Pe){return markdownLineEndingOrSpace(Pe)?factoryWhitespace(r,Te)(Pe):t(Pe)}function Te(Pe){return factoryTitle(r,Ee,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(Pe)}function Ee(Pe){return markdownSpace(Pe)?factorySpace(r,xe,"whitespace")(Pe):xe(Pe)}function xe(Pe){return Pe===null||markdownLineEnding(Pe)?e(Pe):t(Pe)}}const hardBreakEscape={name:"hardBreakEscape",tokenize:tokenizeHardBreakEscape};function tokenizeHardBreakEscape(r,e,t){return _e;function _e(Ee){return r.enter("hardBreakEscape"),r.consume(Ee),Te}function Te(Ee){return markdownLineEnding(Ee)?(r.exit("hardBreakEscape"),e(Ee)):t(Ee)}}const headingAtx={name:"headingAtx",resolve:resolveHeadingAtx,tokenize:tokenizeHeadingAtx};function resolveHeadingAtx(r,e){let t=r.length-2,_e=3,Te,Ee;return r[_e][1].type==="whitespace"&&(_e+=2),t-2>_e&&r[t][1].type==="whitespace"&&(t-=2),r[t][1].type==="atxHeadingSequence"&&(_e===t-1||t-4>_e&&r[t-2][1].type==="whitespace")&&(t-=_e+1===t?2:4),t>_e&&(Te={type:"atxHeadingText",start:r[_e][1].start,end:r[t][1].end},Ee={type:"chunkText",start:r[_e][1].start,end:r[t][1].end,contentType:"text"},splice(r,_e,t-_e+1,[["enter",Te,e],["enter",Ee,e],["exit",Ee,e],["exit",Te,e]])),r}function tokenizeHeadingAtx(r,e,t){let _e=0;return Te;function Te(Ce){return r.enter("atxHeading"),Ee(Ce)}function Ee(Ce){return r.enter("atxHeadingSequence"),xe(Ce)}function xe(Ce){return Ce===35&&_e++<6?(r.consume(Ce),xe):Ce===null||markdownLineEndingOrSpace(Ce)?(r.exit("atxHeadingSequence"),Pe(Ce)):t(Ce)}function Pe(Ce){return Ce===35?(r.enter("atxHeadingSequence"),Re(Ce)):Ce===null||markdownLineEnding(Ce)?(r.exit("atxHeading"),e(Ce)):markdownSpace(Ce)?factorySpace(r,Pe,"whitespace")(Ce):(r.enter("atxHeadingText"),ke(Ce))}function Re(Ce){return Ce===35?(r.consume(Ce),Re):(r.exit("atxHeadingSequence"),Pe(Ce))}function ke(Ce){return Ce===null||Ce===35||markdownLineEndingOrSpace(Ce)?(r.exit("atxHeadingText"),Pe(Ce)):(r.consume(Ce),ke)}}const htmlBlockNames=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],htmlRawNames=["pre","script","style","textarea"],htmlFlow={concrete:!0,name:"htmlFlow",resolveTo:resolveToHtmlFlow,tokenize:tokenizeHtmlFlow},blankLineBefore={partial:!0,tokenize:tokenizeBlankLineBefore},nonLazyContinuationStart={partial:!0,tokenize:tokenizeNonLazyContinuationStart};function resolveToHtmlFlow(r){let e=r.length;for(;e--&&!(r[e][0]==="enter"&&r[e][1].type==="htmlFlow"););return e>1&&r[e-2][1].type==="linePrefix"&&(r[e][1].start=r[e-2][1].start,r[e+1][1].start=r[e-2][1].start,r.splice(e-2,2)),r}function tokenizeHtmlFlow(r,e,t){const _e=this;let Te,Ee,xe,Pe,Re;return ke;function ke(vn){return Ce(vn)}function Ce(vn){return r.enter("htmlFlow"),r.enter("htmlFlowData"),r.consume(vn),Se}function Se(vn){return vn===33?(r.consume(vn),Ae):vn===47?(r.consume(vn),Ee=!0,Fe):vn===63?(r.consume(vn),Te=3,_e.interrupt?e:Sn):asciiAlpha(vn)?(r.consume(vn),xe=String.fromCharCode(vn),Ve):t(vn)}function Ae(vn){return vn===45?(r.consume(vn),Te=2,Ie):vn===91?(r.consume(vn),Te=5,Pe=0,Me):asciiAlpha(vn)?(r.consume(vn),Te=4,_e.interrupt?e:Sn):t(vn)}function Ie(vn){return vn===45?(r.consume(vn),_e.interrupt?e:Sn):t(vn)}function Me(vn){const Un="CDATA[";return vn===Un.charCodeAt(Pe++)?(r.consume(vn),Pe===Un.length?_e.interrupt?e:fn:Me):t(vn)}function Fe(vn){return asciiAlpha(vn)?(r.consume(vn),xe=String.fromCharCode(vn),Ve):t(vn)}function Ve(vn){if(vn===null||vn===47||vn===62||markdownLineEndingOrSpace(vn)){const Un=vn===47,zn=xe.toLowerCase();return!Un&&!Ee&&htmlRawNames.includes(zn)?(Te=1,_e.interrupt?e(vn):fn(vn)):htmlBlockNames.includes(xe.toLowerCase())?(Te=6,Un?(r.consume(vn),je):_e.interrupt?e(vn):fn(vn)):(Te=7,_e.interrupt&&!_e.parser.lazy[_e.now().line]?t(vn):Ee?Be(vn):qe(vn))}return vn===45||asciiAlphanumeric(vn)?(r.consume(vn),xe+=String.fromCharCode(vn),Ve):t(vn)}function je(vn){return vn===62?(r.consume(vn),_e.interrupt?e:fn):t(vn)}function Be(vn){return markdownSpace(vn)?(r.consume(vn),Be):pn(vn)}function qe(vn){return vn===47?(r.consume(vn),pn):vn===58||vn===95||asciiAlpha(vn)?(r.consume(vn),He):markdownSpace(vn)?(r.consume(vn),qe):pn(vn)}function He(vn){return vn===45||vn===46||vn===58||vn===95||asciiAlphanumeric(vn)?(r.consume(vn),He):Xe(vn)}function Xe(vn){return vn===61?(r.consume(vn),Je):markdownSpace(vn)?(r.consume(vn),Xe):qe(vn)}function Je(vn){return vn===null||vn===60||vn===61||vn===62||vn===96?t(vn):vn===34||vn===39?(r.consume(vn),Re=vn,Qe):markdownSpace(vn)?(r.consume(vn),Je):Ke(vn)}function Qe(vn){return vn===Re?(r.consume(vn),Re=null,Ye):vn===null||markdownLineEnding(vn)?t(vn):(r.consume(vn),Qe)}function Ke(vn){return vn===null||vn===34||vn===39||vn===47||vn===60||vn===61||vn===62||vn===96||markdownLineEndingOrSpace(vn)?Xe(vn):(r.consume(vn),Ke)}function Ye(vn){return vn===47||vn===62||markdownSpace(vn)?qe(vn):t(vn)}function pn(vn){return vn===62?(r.consume(vn),un):t(vn)}function un(vn){return vn===null||markdownLineEnding(vn)?fn(vn):markdownSpace(vn)?(r.consume(vn),un):t(vn)}function fn(vn){return vn===45&&Te===2?(r.consume(vn),xn):vn===60&&Te===1?(r.consume(vn),In):vn===62&&Te===4?(r.consume(vn),Bn):vn===63&&Te===3?(r.consume(vn),Sn):vn===93&&Te===5?(r.consume(vn),$n):markdownLineEnding(vn)&&(Te===6||Te===7)?(r.exit("htmlFlowData"),r.check(blankLineBefore,Tn,mn)(vn)):vn===null||markdownLineEnding(vn)?(r.exit("htmlFlowData"),mn(vn)):(r.consume(vn),fn)}function mn(vn){return r.check(nonLazyContinuationStart,wn,Tn)(vn)}function wn(vn){return r.enter("lineEnding"),r.consume(vn),r.exit("lineEnding"),Pn}function Pn(vn){return vn===null||markdownLineEnding(vn)?mn(vn):(r.enter("htmlFlowData"),fn(vn))}function xn(vn){return vn===45?(r.consume(vn),Sn):fn(vn)}function In(vn){return vn===47?(r.consume(vn),xe="",Ln):fn(vn)}function Ln(vn){if(vn===62){const Un=xe.toLowerCase();return htmlRawNames.includes(Un)?(r.consume(vn),Bn):fn(vn)}return asciiAlpha(vn)&&xe.length<8?(r.consume(vn),xe+=String.fromCharCode(vn),Ln):fn(vn)}function $n(vn){return vn===93?(r.consume(vn),Sn):fn(vn)}function Sn(vn){return vn===62?(r.consume(vn),Bn):vn===45&&Te===2?(r.consume(vn),Sn):fn(vn)}function Bn(vn){return vn===null||markdownLineEnding(vn)?(r.exit("htmlFlowData"),Tn(vn)):(r.consume(vn),Bn)}function Tn(vn){return r.exit("htmlFlow"),e(vn)}}function tokenizeNonLazyContinuationStart(r,e,t){const _e=this;return Te;function Te(xe){return markdownLineEnding(xe)?(r.enter("lineEnding"),r.consume(xe),r.exit("lineEnding"),Ee):t(xe)}function Ee(xe){return _e.parser.lazy[_e.now().line]?t(xe):e(xe)}}function tokenizeBlankLineBefore(r,e,t){return _e;function _e(Te){return r.enter("lineEnding"),r.consume(Te),r.exit("lineEnding"),r.attempt(blankLine,e,t)}}const htmlText={name:"htmlText",tokenize:tokenizeHtmlText};function tokenizeHtmlText(r,e,t){const _e=this;let Te,Ee,xe;return Pe;function Pe(Sn){return r.enter("htmlText"),r.enter("htmlTextData"),r.consume(Sn),Re}function Re(Sn){return Sn===33?(r.consume(Sn),ke):Sn===47?(r.consume(Sn),Xe):Sn===63?(r.consume(Sn),qe):asciiAlpha(Sn)?(r.consume(Sn),Ke):t(Sn)}function ke(Sn){return Sn===45?(r.consume(Sn),Ce):Sn===91?(r.consume(Sn),Ee=0,Me):asciiAlpha(Sn)?(r.consume(Sn),Be):t(Sn)}function Ce(Sn){return Sn===45?(r.consume(Sn),Ie):t(Sn)}function Se(Sn){return Sn===null?t(Sn):Sn===45?(r.consume(Sn),Ae):markdownLineEnding(Sn)?(xe=Se,In(Sn)):(r.consume(Sn),Se)}function Ae(Sn){return Sn===45?(r.consume(Sn),Ie):Se(Sn)}function Ie(Sn){return Sn===62?xn(Sn):Sn===45?Ae(Sn):Se(Sn)}function Me(Sn){const Bn="CDATA[";return Sn===Bn.charCodeAt(Ee++)?(r.consume(Sn),Ee===Bn.length?Fe:Me):t(Sn)}function Fe(Sn){return Sn===null?t(Sn):Sn===93?(r.consume(Sn),Ve):markdownLineEnding(Sn)?(xe=Fe,In(Sn)):(r.consume(Sn),Fe)}function Ve(Sn){return Sn===93?(r.consume(Sn),je):Fe(Sn)}function je(Sn){return Sn===62?xn(Sn):Sn===93?(r.consume(Sn),je):Fe(Sn)}function Be(Sn){return Sn===null||Sn===62?xn(Sn):markdownLineEnding(Sn)?(xe=Be,In(Sn)):(r.consume(Sn),Be)}function qe(Sn){return Sn===null?t(Sn):Sn===63?(r.consume(Sn),He):markdownLineEnding(Sn)?(xe=qe,In(Sn)):(r.consume(Sn),qe)}function He(Sn){return Sn===62?xn(Sn):qe(Sn)}function Xe(Sn){return asciiAlpha(Sn)?(r.consume(Sn),Je):t(Sn)}function Je(Sn){return Sn===45||asciiAlphanumeric(Sn)?(r.consume(Sn),Je):Qe(Sn)}function Qe(Sn){return markdownLineEnding(Sn)?(xe=Qe,In(Sn)):markdownSpace(Sn)?(r.consume(Sn),Qe):xn(Sn)}function Ke(Sn){return Sn===45||asciiAlphanumeric(Sn)?(r.consume(Sn),Ke):Sn===47||Sn===62||markdownLineEndingOrSpace(Sn)?Ye(Sn):t(Sn)}function Ye(Sn){return Sn===47?(r.consume(Sn),xn):Sn===58||Sn===95||asciiAlpha(Sn)?(r.consume(Sn),pn):markdownLineEnding(Sn)?(xe=Ye,In(Sn)):markdownSpace(Sn)?(r.consume(Sn),Ye):xn(Sn)}function pn(Sn){return Sn===45||Sn===46||Sn===58||Sn===95||asciiAlphanumeric(Sn)?(r.consume(Sn),pn):un(Sn)}function un(Sn){return Sn===61?(r.consume(Sn),fn):markdownLineEnding(Sn)?(xe=un,In(Sn)):markdownSpace(Sn)?(r.consume(Sn),un):Ye(Sn)}function fn(Sn){return Sn===null||Sn===60||Sn===61||Sn===62||Sn===96?t(Sn):Sn===34||Sn===39?(r.consume(Sn),Te=Sn,mn):markdownLineEnding(Sn)?(xe=fn,In(Sn)):markdownSpace(Sn)?(r.consume(Sn),fn):(r.consume(Sn),wn)}function mn(Sn){return Sn===Te?(r.consume(Sn),Te=void 0,Pn):Sn===null?t(Sn):markdownLineEnding(Sn)?(xe=mn,In(Sn)):(r.consume(Sn),mn)}function wn(Sn){return Sn===null||Sn===34||Sn===39||Sn===60||Sn===61||Sn===96?t(Sn):Sn===47||Sn===62||markdownLineEndingOrSpace(Sn)?Ye(Sn):(r.consume(Sn),wn)}function Pn(Sn){return Sn===47||Sn===62||markdownLineEndingOrSpace(Sn)?Ye(Sn):t(Sn)}function xn(Sn){return Sn===62?(r.consume(Sn),r.exit("htmlTextData"),r.exit("htmlText"),e):t(Sn)}function In(Sn){return r.exit("htmlTextData"),r.enter("lineEnding"),r.consume(Sn),r.exit("lineEnding"),Ln}function Ln(Sn){return markdownSpace(Sn)?factorySpace(r,$n,"linePrefix",_e.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Sn):$n(Sn)}function $n(Sn){return r.enter("htmlTextData"),xe(Sn)}}const labelEnd={name:"labelEnd",resolveAll:resolveAllLabelEnd,resolveTo:resolveToLabelEnd,tokenize:tokenizeLabelEnd},resourceConstruct={tokenize:tokenizeResource},referenceFullConstruct={tokenize:tokenizeReferenceFull},referenceCollapsedConstruct={tokenize:tokenizeReferenceCollapsed};function resolveAllLabelEnd(r){let e=-1;const t=[];for(;++e<r.length;){const _e=r[e][1];if(t.push(r[e]),_e.type==="labelImage"||_e.type==="labelLink"||_e.type==="labelEnd"){const Te=_e.type==="labelImage"?4:2;_e.type="data",e+=Te}}return r.length!==t.length&&splice(r,0,r.length,t),r}function resolveToLabelEnd(r,e){let t=r.length,_e=0,Te,Ee,xe,Pe;for(;t--;)if(Te=r[t][1],Ee){if(Te.type==="link"||Te.type==="labelLink"&&Te._inactive)break;r[t][0]==="enter"&&Te.type==="labelLink"&&(Te._inactive=!0)}else if(xe){if(r[t][0]==="enter"&&(Te.type==="labelImage"||Te.type==="labelLink")&&!Te._balanced&&(Ee=t,Te.type!=="labelLink")){_e=2;break}}else Te.type==="labelEnd"&&(xe=t);const Re={type:r[Ee][1].type==="labelLink"?"link":"image",start:{...r[Ee][1].start},end:{...r[r.length-1][1].end}},ke={type:"label",start:{...r[Ee][1].start},end:{...r[xe][1].end}},Ce={type:"labelText",start:{...r[Ee+_e+2][1].end},end:{...r[xe-2][1].start}};return Pe=[["enter",Re,e],["enter",ke,e]],Pe=push(Pe,r.slice(Ee+1,Ee+_e+3)),Pe=push(Pe,[["enter",Ce,e]]),Pe=push(Pe,resolveAll(e.parser.constructs.insideSpan.null,r.slice(Ee+_e+4,xe-3),e)),Pe=push(Pe,[["exit",Ce,e],r[xe-2],r[xe-1],["exit",ke,e]]),Pe=push(Pe,r.slice(xe+1)),Pe=push(Pe,[["exit",Re,e]]),splice(r,Ee,r.length,Pe),r}function tokenizeLabelEnd(r,e,t){const _e=this;let Te=_e.events.length,Ee,xe;for(;Te--;)if((_e.events[Te][1].type==="labelImage"||_e.events[Te][1].type==="labelLink")&&!_e.events[Te][1]._balanced){Ee=_e.events[Te][1];break}return Pe;function Pe(Ae){return Ee?Ee._inactive?Se(Ae):(xe=_e.parser.defined.includes(normalizeIdentifier(_e.sliceSerialize({start:Ee.end,end:_e.now()}))),r.enter("labelEnd"),r.enter("labelMarker"),r.consume(Ae),r.exit("labelMarker"),r.exit("labelEnd"),Re):t(Ae)}function Re(Ae){return Ae===40?r.attempt(resourceConstruct,Ce,xe?Ce:Se)(Ae):Ae===91?r.attempt(referenceFullConstruct,Ce,xe?ke:Se)(Ae):xe?Ce(Ae):Se(Ae)}function ke(Ae){return r.attempt(referenceCollapsedConstruct,Ce,Se)(Ae)}function Ce(Ae){return e(Ae)}function Se(Ae){return Ee._balanced=!0,t(Ae)}}function tokenizeResource(r,e,t){return _e;function _e(Se){return r.enter("resource"),r.enter("resourceMarker"),r.consume(Se),r.exit("resourceMarker"),Te}function Te(Se){return markdownLineEndingOrSpace(Se)?factoryWhitespace(r,Ee)(Se):Ee(Se)}function Ee(Se){return Se===41?Ce(Se):factoryDestination(r,xe,Pe,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(Se)}function xe(Se){return markdownLineEndingOrSpace(Se)?factoryWhitespace(r,Re)(Se):Ce(Se)}function Pe(Se){return t(Se)}function Re(Se){return Se===34||Se===39||Se===40?factoryTitle(r,ke,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(Se):Ce(Se)}function ke(Se){return markdownLineEndingOrSpace(Se)?factoryWhitespace(r,Ce)(Se):Ce(Se)}function Ce(Se){return Se===41?(r.enter("resourceMarker"),r.consume(Se),r.exit("resourceMarker"),r.exit("resource"),e):t(Se)}}function tokenizeReferenceFull(r,e,t){const _e=this;return Te;function Te(Pe){return factoryLabel.call(_e,r,Ee,xe,"reference","referenceMarker","referenceString")(Pe)}function Ee(Pe){return _e.parser.defined.includes(normalizeIdentifier(_e.sliceSerialize(_e.events[_e.events.length-1][1]).slice(1,-1)))?e(Pe):t(Pe)}function xe(Pe){return t(Pe)}}function tokenizeReferenceCollapsed(r,e,t){return _e;function _e(Ee){return r.enter("reference"),r.enter("referenceMarker"),r.consume(Ee),r.exit("referenceMarker"),Te}function Te(Ee){return Ee===93?(r.enter("referenceMarker"),r.consume(Ee),r.exit("referenceMarker"),r.exit("reference"),e):t(Ee)}}const labelStartImage={name:"labelStartImage",resolveAll:labelEnd.resolveAll,tokenize:tokenizeLabelStartImage};function tokenizeLabelStartImage(r,e,t){const _e=this;return Te;function Te(Pe){return r.enter("labelImage"),r.enter("labelImageMarker"),r.consume(Pe),r.exit("labelImageMarker"),Ee}function Ee(Pe){return Pe===91?(r.enter("labelMarker"),r.consume(Pe),r.exit("labelMarker"),r.exit("labelImage"),xe):t(Pe)}function xe(Pe){return Pe===94&&"_hiddenFootnoteSupport"in _e.parser.constructs?t(Pe):e(Pe)}}const labelStartLink={name:"labelStartLink",resolveAll:labelEnd.resolveAll,tokenize:tokenizeLabelStartLink};function tokenizeLabelStartLink(r,e,t){const _e=this;return Te;function Te(xe){return r.enter("labelLink"),r.enter("labelMarker"),r.consume(xe),r.exit("labelMarker"),r.exit("labelLink"),Ee}function Ee(xe){return xe===94&&"_hiddenFootnoteSupport"in _e.parser.constructs?t(xe):e(xe)}}const lineEnding={name:"lineEnding",tokenize:tokenizeLineEnding};function tokenizeLineEnding(r,e){return t;function t(_e){return r.enter("lineEnding"),r.consume(_e),r.exit("lineEnding"),factorySpace(r,e,"linePrefix")}}const thematicBreak$1={name:"thematicBreak",tokenize:tokenizeThematicBreak};function tokenizeThematicBreak(r,e,t){let _e=0,Te;return Ee;function Ee(ke){return r.enter("thematicBreak"),xe(ke)}function xe(ke){return Te=ke,Pe(ke)}function Pe(ke){return ke===Te?(r.enter("thematicBreakSequence"),Re(ke)):_e>=3&&(ke===null||markdownLineEnding(ke))?(r.exit("thematicBreak"),e(ke)):t(ke)}function Re(ke){return ke===Te?(r.consume(ke),_e++,Re):(r.exit("thematicBreakSequence"),markdownSpace(ke)?factorySpace(r,Pe,"whitespace")(ke):Pe(ke))}}const list$1={continuation:{tokenize:tokenizeListContinuation},exit:tokenizeListEnd,name:"list",tokenize:tokenizeListStart},listItemPrefixWhitespaceConstruct={partial:!0,tokenize:tokenizeListItemPrefixWhitespace},indentConstruct={partial:!0,tokenize:tokenizeIndent};function tokenizeListStart(r,e,t){const _e=this,Te=_e.events[_e.events.length-1];let Ee=Te&&Te[1].type==="linePrefix"?Te[2].sliceSerialize(Te[1],!0).length:0,xe=0;return Pe;function Pe(Ie){const Me=_e.containerState.type||(Ie===42||Ie===43||Ie===45?"listUnordered":"listOrdered");if(Me==="listUnordered"?!_e.containerState.marker||Ie===_e.containerState.marker:asciiDigit(Ie)){if(_e.containerState.type||(_e.containerState.type=Me,r.enter(Me,{_container:!0})),Me==="listUnordered")return r.enter("listItemPrefix"),Ie===42||Ie===45?r.check(thematicBreak$1,t,ke)(Ie):ke(Ie);if(!_e.interrupt||Ie===49)return r.enter("listItemPrefix"),r.enter("listItemValue"),Re(Ie)}return t(Ie)}function Re(Ie){return asciiDigit(Ie)&&++xe<10?(r.consume(Ie),Re):(!_e.interrupt||xe<2)&&(_e.containerState.marker?Ie===_e.containerState.marker:Ie===41||Ie===46)?(r.exit("listItemValue"),ke(Ie)):t(Ie)}function ke(Ie){return r.enter("listItemMarker"),r.consume(Ie),r.exit("listItemMarker"),_e.containerState.marker=_e.containerState.marker||Ie,r.check(blankLine,_e.interrupt?t:Ce,r.attempt(listItemPrefixWhitespaceConstruct,Ae,Se))}function Ce(Ie){return _e.containerState.initialBlankLine=!0,Ee++,Ae(Ie)}function Se(Ie){return markdownSpace(Ie)?(r.enter("listItemPrefixWhitespace"),r.consume(Ie),r.exit("listItemPrefixWhitespace"),Ae):t(Ie)}function Ae(Ie){return _e.containerState.size=Ee+_e.sliceSerialize(r.exit("listItemPrefix"),!0).length,e(Ie)}}function tokenizeListContinuation(r,e,t){const _e=this;return _e.containerState._closeFlow=void 0,r.check(blankLine,Te,Ee);function Te(Pe){return _e.containerState.furtherBlankLines=_e.containerState.furtherBlankLines||_e.containerState.initialBlankLine,factorySpace(r,e,"listItemIndent",_e.containerState.size+1)(Pe)}function Ee(Pe){return _e.containerState.furtherBlankLines||!markdownSpace(Pe)?(_e.containerState.furtherBlankLines=void 0,_e.containerState.initialBlankLine=void 0,xe(Pe)):(_e.containerState.furtherBlankLines=void 0,_e.containerState.initialBlankLine=void 0,r.attempt(indentConstruct,e,xe)(Pe))}function xe(Pe){return _e.containerState._closeFlow=!0,_e.interrupt=void 0,factorySpace(r,r.attempt(list$1,e,t),"linePrefix",_e.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Pe)}}function tokenizeIndent(r,e,t){const _e=this;return factorySpace(r,Te,"listItemIndent",_e.containerState.size+1);function Te(Ee){const xe=_e.events[_e.events.length-1];return xe&&xe[1].type==="listItemIndent"&&xe[2].sliceSerialize(xe[1],!0).length===_e.containerState.size?e(Ee):t(Ee)}}function tokenizeListEnd(r){r.exit(this.containerState.type)}function tokenizeListItemPrefixWhitespace(r,e,t){const _e=this;return factorySpace(r,Te,"listItemPrefixWhitespace",_e.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function Te(Ee){const xe=_e.events[_e.events.length-1];return!markdownSpace(Ee)&&xe&&xe[1].type==="listItemPrefixWhitespace"?e(Ee):t(Ee)}}const setextUnderline={name:"setextUnderline",resolveTo:resolveToSetextUnderline,tokenize:tokenizeSetextUnderline};function resolveToSetextUnderline(r,e){let t=r.length,_e,Te,Ee;for(;t--;)if(r[t][0]==="enter"){if(r[t][1].type==="content"){_e=t;break}r[t][1].type==="paragraph"&&(Te=t)}else r[t][1].type==="content"&&r.splice(t,1),!Ee&&r[t][1].type==="definition"&&(Ee=t);const xe={type:"setextHeading",start:{...r[_e][1].start},end:{...r[r.length-1][1].end}};return r[Te][1].type="setextHeadingText",Ee?(r.splice(Te,0,["enter",xe,e]),r.splice(Ee+1,0,["exit",r[_e][1],e]),r[_e][1].end={...r[Ee][1].end}):r[_e][1]=xe,r.push(["exit",xe,e]),r}function tokenizeSetextUnderline(r,e,t){const _e=this;let Te;return Ee;function Ee(ke){let Ce=_e.events.length,Se;for(;Ce--;)if(_e.events[Ce][1].type!=="lineEnding"&&_e.events[Ce][1].type!=="linePrefix"&&_e.events[Ce][1].type!=="content"){Se=_e.events[Ce][1].type==="paragraph";break}return!_e.parser.lazy[_e.now().line]&&(_e.interrupt||Se)?(r.enter("setextHeadingLine"),Te=ke,xe(ke)):t(ke)}function xe(ke){return r.enter("setextHeadingLineSequence"),Pe(ke)}function Pe(ke){return ke===Te?(r.consume(ke),Pe):(r.exit("setextHeadingLineSequence"),markdownSpace(ke)?factorySpace(r,Re,"lineSuffix")(ke):Re(ke))}function Re(ke){return ke===null||markdownLineEnding(ke)?(r.exit("setextHeadingLine"),e(ke)):t(ke)}}const flow$1={tokenize:initializeFlow};function initializeFlow(r){const e=this,t=r.attempt(blankLine,_e,r.attempt(this.parser.constructs.flowInitial,Te,factorySpace(r,r.attempt(this.parser.constructs.flow,Te,r.attempt(content,Te)),"linePrefix")));return t;function _e(Ee){if(Ee===null){r.consume(Ee);return}return r.enter("lineEndingBlank"),r.consume(Ee),r.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function Te(Ee){if(Ee===null){r.consume(Ee);return}return r.enter("lineEnding"),r.consume(Ee),r.exit("lineEnding"),e.currentConstruct=void 0,t}}const resolver={resolveAll:createResolver()},string$1=initializeFactory("string"),text$2=initializeFactory("text");function initializeFactory(r){return{resolveAll:createResolver(r==="text"?resolveAllLineSuffixes:void 0),tokenize:e};function e(t){const _e=this,Te=this.parser.constructs[r],Ee=t.attempt(Te,xe,Pe);return xe;function xe(Ce){return ke(Ce)?Ee(Ce):Pe(Ce)}function Pe(Ce){if(Ce===null){t.consume(Ce);return}return t.enter("data"),t.consume(Ce),Re}function Re(Ce){return ke(Ce)?(t.exit("data"),Ee(Ce)):(t.consume(Ce),Re)}function ke(Ce){if(Ce===null)return!0;const Se=Te[Ce];let Ae=-1;if(Se)for(;++Ae<Se.length;){const Ie=Se[Ae];if(!Ie.previous||Ie.previous.call(_e,_e.previous))return!0}return!1}}}function createResolver(r){return e;function e(t,_e){let Te=-1,Ee;for(;++Te<=t.length;)Ee===void 0?t[Te]&&t[Te][1].type==="data"&&(Ee=Te,Te++):(!t[Te]||t[Te][1].type!=="data")&&(Te!==Ee+2&&(t[Ee][1].end=t[Te-1][1].end,t.splice(Ee+2,Te-Ee-2),Te=Ee+2),Ee=void 0);return r?r(t,_e):t}}function resolveAllLineSuffixes(r,e){let t=0;for(;++t<=r.length;)if((t===r.length||r[t][1].type==="lineEnding")&&r[t-1][1].type==="data"){const _e=r[t-1][1],Te=e.sliceStream(_e);let Ee=Te.length,xe=-1,Pe=0,Re;for(;Ee--;){const ke=Te[Ee];if(typeof ke=="string"){for(xe=ke.length;ke.charCodeAt(xe-1)===32;)Pe++,xe--;if(xe)break;xe=-1}else if(ke===-2)Re=!0,Pe++;else if(ke!==-1){Ee++;break}}if(e._contentTypeTextTrailing&&t===r.length&&(Pe=0),Pe){const ke={type:t===r.length||Re||Pe<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:Ee?xe:_e.start._bufferIndex+xe,_index:_e.start._index+Ee,line:_e.end.line,column:_e.end.column-Pe,offset:_e.end.offset-Pe},end:{..._e.end}};_e.end={...ke.start},_e.start.offset===_e.end.offset?Object.assign(_e,ke):(r.splice(t,0,["enter",ke,e],["exit",ke,e]),t+=2)}t++}return r}const document$1={42:list$1,43:list$1,45:list$1,48:list$1,49:list$1,50:list$1,51:list$1,52:list$1,53:list$1,54:list$1,55:list$1,56:list$1,57:list$1,62:blockQuote},contentInitial={91:definition},flowInitial={[-2]:codeIndented,[-1]:codeIndented,32:codeIndented},flow={35:headingAtx,42:thematicBreak$1,45:[setextUnderline,thematicBreak$1],60:htmlFlow,61:setextUnderline,95:thematicBreak$1,96:codeFenced,126:codeFenced},string={38:characterReference,92:characterEscape},text$1={[-5]:lineEnding,[-4]:lineEnding,[-3]:lineEnding,33:labelStartImage,38:characterReference,42:attention,60:[autolink,htmlText],91:labelStartLink,92:[hardBreakEscape,characterEscape],93:labelEnd,95:attention,96:codeText},insideSpan={null:[attention,resolver]},attentionMarkers={null:[42,95]},disable={null:[]},defaultConstructs=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers,contentInitial,disable,document:document$1,flow,flowInitial,insideSpan,string,text:text$1},Symbol.toStringTag,{value:"Module"}));function createTokenizer(r,e,t){let _e={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const Te={},Ee=[];let xe=[],Pe=[];const Re={attempt:Qe(Xe),check:Qe(Je),consume:Be,enter:qe,exit:He,interrupt:Qe(Je,{interrupt:!0})},ke={code:null,containerState:{},defineSkip:Fe,events:[],now:Me,parser:r,previous:null,sliceSerialize:Ae,sliceStream:Ie,write:Se};let Ce=e.tokenize.call(ke,Re);return e.resolveAll&&Ee.push(e),ke;function Se(un){return xe=push(xe,un),Ve(),xe[xe.length-1]!==null?[]:(Ke(e,0),ke.events=resolveAll(Ee,ke.events,ke),ke.events)}function Ae(un,fn){return serializeChunks(Ie(un),fn)}function Ie(un){return sliceChunks(xe,un)}function Me(){const{_bufferIndex:un,_index:fn,line:mn,column:wn,offset:Pn}=_e;return{_bufferIndex:un,_index:fn,line:mn,column:wn,offset:Pn}}function Fe(un){Te[un.line]=un.column,pn()}function Ve(){let un;for(;_e._index<xe.length;){const fn=xe[_e._index];if(typeof fn=="string")for(un=_e._index,_e._bufferIndex<0&&(_e._bufferIndex=0);_e._index===un&&_e._bufferIndex<fn.length;)je(fn.charCodeAt(_e._bufferIndex));else je(fn)}}function je(un){Ce=Ce(un)}function Be(un){markdownLineEnding(un)?(_e.line++,_e.column=1,_e.offset+=un===-3?2:1,pn()):un!==-1&&(_e.column++,_e.offset++),_e._bufferIndex<0?_e._index++:(_e._bufferIndex++,_e._bufferIndex===xe[_e._index].length&&(_e._bufferIndex=-1,_e._index++)),ke.previous=un}function qe(un,fn){const mn=fn||{};return mn.type=un,mn.start=Me(),ke.events.push(["enter",mn,ke]),Pe.push(mn),mn}function He(un){const fn=Pe.pop();return fn.end=Me(),ke.events.push(["exit",fn,ke]),fn}function Xe(un,fn){Ke(un,fn.from)}function Je(un,fn){fn.restore()}function Qe(un,fn){return mn;function mn(wn,Pn,xn){let In,Ln,$n,Sn;return Array.isArray(wn)?Tn(wn):"tokenize"in wn?Tn([wn]):Bn(wn);function Bn(Hn){return Jn;function Jn(nr){const or=nr!==null&&Hn[nr],Sr=nr!==null&&Hn.null,kr=[...Array.isArray(or)?or:or?[or]:[],...Array.isArray(Sr)?Sr:Sr?[Sr]:[]];return Tn(kr)(nr)}}function Tn(Hn){return In=Hn,Ln=0,Hn.length===0?xn:vn(Hn[Ln])}function vn(Hn){return Jn;function Jn(nr){return Sn=Ye(),$n=Hn,Hn.partial||(ke.currentConstruct=Hn),Hn.name&&ke.parser.constructs.disable.null.includes(Hn.name)?zn():Hn.tokenize.call(fn?Object.assign(Object.create(ke),fn):ke,Re,Un,zn)(nr)}}function Un(Hn){return un($n,Sn),Pn}function zn(Hn){return Sn.restore(),++Ln<In.length?vn(In[Ln]):xn}}}function Ke(un,fn){un.resolveAll&&!Ee.includes(un)&&Ee.push(un),un.resolve&&splice(ke.events,fn,ke.events.length-fn,un.resolve(ke.events.slice(fn),ke)),un.resolveTo&&(ke.events=un.resolveTo(ke.events,ke))}function Ye(){const un=Me(),fn=ke.previous,mn=ke.currentConstruct,wn=ke.events.length,Pn=Array.from(Pe);return{from:wn,restore:xn};function xn(){_e=un,ke.previous=fn,ke.currentConstruct=mn,ke.events.length=wn,Pe=Pn,pn()}}function pn(){_e.line in Te&&_e.column<2&&(_e.column=Te[_e.line],_e.offset+=Te[_e.line]-1)}}function sliceChunks(r,e){const t=e.start._index,_e=e.start._bufferIndex,Te=e.end._index,Ee=e.end._bufferIndex;let xe;if(t===Te)xe=[r[t].slice(_e,Ee)];else{if(xe=r.slice(t,Te),_e>-1){const Pe=xe[0];typeof Pe=="string"?xe[0]=Pe.slice(_e):xe.shift()}Ee>0&&xe.push(r[Te].slice(0,Ee))}return xe}function serializeChunks(r,e){let t=-1;const _e=[];let Te;for(;++t<r.length;){const Ee=r[t];let xe;if(typeof Ee=="string")xe=Ee;else switch(Ee){case-5:{xe="\r";break}case-4:{xe=`
`;break}case-3:{xe=`\r
`;break}case-2:{xe=e?" ":"	";break}case-1:{if(!e&&Te)continue;xe=" ";break}default:xe=String.fromCharCode(Ee)}Te=Ee===-2,_e.push(xe)}return _e.join("")}function parse$1(r){const _e={constructs:combineExtensions([defaultConstructs,...(r||{}).extensions||[]]),content:Te(content$1),defined:[],document:Te(document$2),flow:Te(flow$1),lazy:{},string:Te(string$1),text:Te(text$2)};return _e;function Te(Ee){return xe;function xe(Pe){return createTokenizer(_e,Ee,Pe)}}}function postprocess(r){for(;!subtokenize(r););return r}const search=/[\0\t\n\r]/g;function preprocess$1(){let r=1,e="",t=!0,_e;return Te;function Te(Ee,xe,Pe){const Re=[];let ke,Ce,Se,Ae,Ie;for(Ee=e+(typeof Ee=="string"?Ee.toString():new TextDecoder(xe||void 0).decode(Ee)),Se=0,e="",t&&(Ee.charCodeAt(0)===65279&&Se++,t=void 0);Se<Ee.length;){if(search.lastIndex=Se,ke=search.exec(Ee),Ae=ke&&ke.index!==void 0?ke.index:Ee.length,Ie=Ee.charCodeAt(Ae),!ke){e=Ee.slice(Se);break}if(Ie===10&&Se===Ae&&_e)Re.push(-3),_e=void 0;else switch(_e&&(Re.push(-5),_e=void 0),Se<Ae&&(Re.push(Ee.slice(Se,Ae)),r+=Ae-Se),Ie){case 0:{Re.push(65533),r++;break}case 9:{for(Ce=Math.ceil(r/4)*4,Re.push(-2);r++<Ce;)Re.push(-1);break}case 10:{Re.push(-4),r=1;break}default:_e=!0,r=1}Se=Ae+1}return Pe&&(_e&&Re.push(-5),e&&Re.push(e),Re.push(null)),Re}}const characterEscapeOrReference=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function decodeString(r){return r.replace(characterEscapeOrReference,decode)}function decode(r,e,t){if(e)return e;if(t.charCodeAt(0)===35){const Te=t.charCodeAt(1),Ee=Te===120||Te===88;return decodeNumericCharacterReference(t.slice(Ee?2:1),Ee?16:10)}return decodeNamedCharacterReference(t)||r}const own$2={}.hasOwnProperty;function fromMarkdown(r,e,t){return typeof e!="string"&&(t=e,e=void 0),compiler(t)(postprocess(parse$1(t).document().write(preprocess$1()(r,e,!0))))}function compiler(r){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:Ee(Dr),autolinkProtocol:Ye,autolinkEmail:Ye,atxHeading:Ee(wr),blockQuote:Ee(Sr),characterEscape:Ye,characterReference:Ye,codeFenced:Ee(kr),codeFencedFenceInfo:xe,codeFencedFenceMeta:xe,codeIndented:Ee(kr,xe),codeText:Ee(Vr,xe),codeTextData:Ye,data:Ye,codeFlowValue:Ye,definition:Ee(Lr),definitionDestinationString:xe,definitionLabelString:xe,definitionTitleString:xe,emphasis:Ee(Qr),hardBreakEscape:Ee(Yn),hardBreakTrailing:Ee(Yn),htmlFlow:Ee(gi,xe),htmlFlowData:Ye,htmlText:Ee(gi,xe),htmlTextData:Ye,image:Ee(ui),label:xe,link:Ee(Dr),listItem:Ee(Kr),listItemValue:Ae,listOrdered:Ee($r,Se),listUnordered:Ee($r),paragraph:Ee(Fr),reference:vn,referenceString:xe,resourceDestinationString:xe,resourceTitleString:xe,setextHeading:Ee(wr),strong:Ee(li),thematicBreak:Ee(ei)},exit:{atxHeading:Re(),atxHeadingSequence:Xe,autolink:Re(),autolinkEmail:or,autolinkProtocol:nr,blockQuote:Re(),characterEscapeValue:pn,characterReferenceMarkerHexadecimal:zn,characterReferenceMarkerNumeric:zn,characterReferenceValue:Hn,characterReference:Jn,codeFenced:Re(Ve),codeFencedFence:Fe,codeFencedFenceInfo:Ie,codeFencedFenceMeta:Me,codeFlowValue:pn,codeIndented:Re(je),codeText:Re(Pn),codeTextData:pn,data:pn,definition:Re(),definitionDestinationString:He,definitionLabelString:Be,definitionTitleString:qe,emphasis:Re(),hardBreakEscape:Re(fn),hardBreakTrailing:Re(fn),htmlFlow:Re(mn),htmlFlowData:pn,htmlText:Re(wn),htmlTextData:pn,image:Re(In),label:$n,labelText:Ln,lineEnding:un,link:Re(xn),listItem:Re(),listOrdered:Re(),listUnordered:Re(),paragraph:Re(),referenceString:Un,resourceDestinationString:Sn,resourceTitleString:Bn,resource:Tn,setextHeading:Re(Ke),setextHeadingLineSequence:Qe,setextHeadingText:Je,strong:Re(),thematicBreak:Re()}};configure(e,(r||{}).mdastExtensions||[]);const t={};return _e;function _e(fr){let Pr={type:"root",children:[]};const ti={stack:[Pr],tokenStack:[],config:e,enter:Pe,exit:ke,buffer:xe,resume:Ce,data:t},Gr=[];let oi=-1;for(;++oi<fr.length;)if(fr[oi][1].type==="listOrdered"||fr[oi][1].type==="listUnordered")if(fr[oi][0]==="enter")Gr.push(oi);else{const Wr=Gr.pop();oi=Te(fr,Wr,oi)}for(oi=-1;++oi<fr.length;){const Wr=e[fr[oi][0]];own$2.call(Wr,fr[oi][1].type)&&Wr[fr[oi][1].type].call(Object.assign({sliceSerialize:fr[oi][2].sliceSerialize},ti),fr[oi][1])}if(ti.tokenStack.length>0){const Wr=ti.tokenStack[ti.tokenStack.length-1];(Wr[1]||defaultOnError).call(ti,void 0,Wr[0])}for(Pr.position={start:point$1(fr.length>0?fr[0][1].start:{line:1,column:1,offset:0}),end:point$1(fr.length>0?fr[fr.length-2][1].end:{line:1,column:1,offset:0})},oi=-1;++oi<e.transforms.length;)Pr=e.transforms[oi](Pr)||Pr;return Pr}function Te(fr,Pr,ti){let Gr=Pr-1,oi=-1,Wr=!1,Ci,xi,fi,Di;for(;++Gr<=ti;){const Ni=fr[Gr];switch(Ni[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ni[0]==="enter"?oi++:oi--,Di=void 0;break}case"lineEndingBlank":{Ni[0]==="enter"&&(Ci&&!Di&&!oi&&!fi&&(fi=Gr),Di=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Di=void 0}if(!oi&&Ni[0]==="enter"&&Ni[1].type==="listItemPrefix"||oi===-1&&Ni[0]==="exit"&&(Ni[1].type==="listUnordered"||Ni[1].type==="listOrdered")){if(Ci){let As=Gr;for(xi=void 0;As--;){const Ti=fr[As];if(Ti[1].type==="lineEnding"||Ti[1].type==="lineEndingBlank"){if(Ti[0]==="exit")continue;xi&&(fr[xi][1].type="lineEndingBlank",Wr=!0),Ti[1].type="lineEnding",xi=As}else if(!(Ti[1].type==="linePrefix"||Ti[1].type==="blockQuotePrefix"||Ti[1].type==="blockQuotePrefixWhitespace"||Ti[1].type==="blockQuoteMarker"||Ti[1].type==="listItemIndent"))break}fi&&(!xi||fi<xi)&&(Ci._spread=!0),Ci.end=Object.assign({},xi?fr[xi][1].start:Ni[1].end),fr.splice(xi||Gr,0,["exit",Ci,Ni[2]]),Gr++,ti++}if(Ni[1].type==="listItemPrefix"){const As={type:"listItem",_spread:!1,start:Object.assign({},Ni[1].start),end:void 0};Ci=As,fr.splice(Gr,0,["enter",As,Ni[2]]),Gr++,ti++,fi=void 0,Di=!0}}}return fr[Pr][1]._spread=Wr,ti}function Ee(fr,Pr){return ti;function ti(Gr){Pe.call(this,fr(Gr),Gr),Pr&&Pr.call(this,Gr)}}function xe(){this.stack.push({type:"fragment",children:[]})}function Pe(fr,Pr,ti){this.stack[this.stack.length-1].children.push(fr),this.stack.push(fr),this.tokenStack.push([Pr,ti||void 0]),fr.position={start:point$1(Pr.start),end:void 0}}function Re(fr){return Pr;function Pr(ti){fr&&fr.call(this,ti),ke.call(this,ti)}}function ke(fr,Pr){const ti=this.stack.pop(),Gr=this.tokenStack.pop();if(Gr)Gr[0].type!==fr.type&&(Pr?Pr.call(this,fr,Gr[0]):(Gr[1]||defaultOnError).call(this,fr,Gr[0]));else throw new Error("Cannot close `"+fr.type+"` ("+stringifyPosition({start:fr.start,end:fr.end})+"): it’s not open");ti.position.end=point$1(fr.end)}function Ce(){return toString$1(this.stack.pop())}function Se(){this.data.expectingFirstListItemValue=!0}function Ae(fr){if(this.data.expectingFirstListItemValue){const Pr=this.stack[this.stack.length-2];Pr.start=Number.parseInt(this.sliceSerialize(fr),10),this.data.expectingFirstListItemValue=void 0}}function Ie(){const fr=this.resume(),Pr=this.stack[this.stack.length-1];Pr.lang=fr}function Me(){const fr=this.resume(),Pr=this.stack[this.stack.length-1];Pr.meta=fr}function Fe(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function Ve(){const fr=this.resume(),Pr=this.stack[this.stack.length-1];Pr.value=fr.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function je(){const fr=this.resume(),Pr=this.stack[this.stack.length-1];Pr.value=fr.replace(/(\r?\n|\r)$/g,"")}function Be(fr){const Pr=this.resume(),ti=this.stack[this.stack.length-1];ti.label=Pr,ti.identifier=normalizeIdentifier(this.sliceSerialize(fr)).toLowerCase()}function qe(){const fr=this.resume(),Pr=this.stack[this.stack.length-1];Pr.title=fr}function He(){const fr=this.resume(),Pr=this.stack[this.stack.length-1];Pr.url=fr}function Xe(fr){const Pr=this.stack[this.stack.length-1];if(!Pr.depth){const ti=this.sliceSerialize(fr).length;Pr.depth=ti}}function Je(){this.data.setextHeadingSlurpLineEnding=!0}function Qe(fr){const Pr=this.stack[this.stack.length-1];Pr.depth=this.sliceSerialize(fr).codePointAt(0)===61?1:2}function Ke(){this.data.setextHeadingSlurpLineEnding=void 0}function Ye(fr){const ti=this.stack[this.stack.length-1].children;let Gr=ti[ti.length-1];(!Gr||Gr.type!=="text")&&(Gr=yi(),Gr.position={start:point$1(fr.start),end:void 0},ti.push(Gr)),this.stack.push(Gr)}function pn(fr){const Pr=this.stack.pop();Pr.value+=this.sliceSerialize(fr),Pr.position.end=point$1(fr.end)}function un(fr){const Pr=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ti=Pr.children[Pr.children.length-1];ti.position.end=point$1(fr.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Pr.type)&&(Ye.call(this,fr),pn.call(this,fr))}function fn(){this.data.atHardBreak=!0}function mn(){const fr=this.resume(),Pr=this.stack[this.stack.length-1];Pr.value=fr}function wn(){const fr=this.resume(),Pr=this.stack[this.stack.length-1];Pr.value=fr}function Pn(){const fr=this.resume(),Pr=this.stack[this.stack.length-1];Pr.value=fr}function xn(){const fr=this.stack[this.stack.length-1];if(this.data.inReference){const Pr=this.data.referenceType||"shortcut";fr.type+="Reference",fr.referenceType=Pr,delete fr.url,delete fr.title}else delete fr.identifier,delete fr.label;this.data.referenceType=void 0}function In(){const fr=this.stack[this.stack.length-1];if(this.data.inReference){const Pr=this.data.referenceType||"shortcut";fr.type+="Reference",fr.referenceType=Pr,delete fr.url,delete fr.title}else delete fr.identifier,delete fr.label;this.data.referenceType=void 0}function Ln(fr){const Pr=this.sliceSerialize(fr),ti=this.stack[this.stack.length-2];ti.label=decodeString(Pr),ti.identifier=normalizeIdentifier(Pr).toLowerCase()}function $n(){const fr=this.stack[this.stack.length-1],Pr=this.resume(),ti=this.stack[this.stack.length-1];if(this.data.inReference=!0,ti.type==="link"){const Gr=fr.children;ti.children=Gr}else ti.alt=Pr}function Sn(){const fr=this.resume(),Pr=this.stack[this.stack.length-1];Pr.url=fr}function Bn(){const fr=this.resume(),Pr=this.stack[this.stack.length-1];Pr.title=fr}function Tn(){this.data.inReference=void 0}function vn(){this.data.referenceType="collapsed"}function Un(fr){const Pr=this.resume(),ti=this.stack[this.stack.length-1];ti.label=Pr,ti.identifier=normalizeIdentifier(this.sliceSerialize(fr)).toLowerCase(),this.data.referenceType="full"}function zn(fr){this.data.characterReferenceType=fr.type}function Hn(fr){const Pr=this.sliceSerialize(fr),ti=this.data.characterReferenceType;let Gr;ti?(Gr=decodeNumericCharacterReference(Pr,ti==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Gr=decodeNamedCharacterReference(Pr);const oi=this.stack[this.stack.length-1];oi.value+=Gr}function Jn(fr){const Pr=this.stack.pop();Pr.position.end=point$1(fr.end)}function nr(fr){pn.call(this,fr);const Pr=this.stack[this.stack.length-1];Pr.url=this.sliceSerialize(fr)}function or(fr){pn.call(this,fr);const Pr=this.stack[this.stack.length-1];Pr.url="mailto:"+this.sliceSerialize(fr)}function Sr(){return{type:"blockquote",children:[]}}function kr(){return{type:"code",lang:null,meta:null,value:""}}function Vr(){return{type:"inlineCode",value:""}}function Lr(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Qr(){return{type:"emphasis",children:[]}}function wr(){return{type:"heading",depth:0,children:[]}}function Yn(){return{type:"break"}}function gi(){return{type:"html",value:""}}function ui(){return{type:"image",title:null,url:"",alt:null}}function Dr(){return{type:"link",title:null,url:"",children:[]}}function $r(fr){return{type:"list",ordered:fr.type==="listOrdered",start:null,spread:fr._spread,children:[]}}function Kr(fr){return{type:"listItem",spread:fr._spread,checked:null,children:[]}}function Fr(){return{type:"paragraph",children:[]}}function li(){return{type:"strong",children:[]}}function yi(){return{type:"text",value:""}}function ei(){return{type:"thematicBreak"}}}function point$1(r){return{line:r.line,column:r.column,offset:r.offset}}function configure(r,e){let t=-1;for(;++t<e.length;){const _e=e[t];Array.isArray(_e)?configure(r,_e):extension(r,_e)}}function extension(r,e){let t;for(t in e)if(own$2.call(e,t))switch(t){case"canContainEols":{const _e=e[t];_e&&r[t].push(..._e);break}case"transforms":{const _e=e[t];_e&&r[t].push(..._e);break}case"enter":case"exit":{const _e=e[t];_e&&Object.assign(r[t],_e);break}}}function defaultOnError(r,e){throw r?new Error("Cannot close `"+r.type+"` ("+stringifyPosition({start:r.start,end:r.end})+"): a different token (`"+e.type+"`, "+stringifyPosition({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+stringifyPosition({start:e.start,end:e.end})+") is still open")}function remarkParse(r){const e=this;e.parser=t;function t(_e){return fromMarkdown(_e,{...e.data("settings"),...r,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function blockquote(r,e){const t={type:"element",tagName:"blockquote",properties:{},children:r.wrap(r.all(e),!0)};return r.patch(e,t),r.applyData(e,t)}function hardBreak(r,e){const t={type:"element",tagName:"br",properties:{},children:[]};return r.patch(e,t),[r.applyData(e,t),{type:"text",value:`
`}]}function code(r,e){const t=e.value?e.value+`
`:"",_e={};e.lang&&(_e.className=["language-"+e.lang]);let Te={type:"element",tagName:"code",properties:_e,children:[{type:"text",value:t}]};return e.meta&&(Te.data={meta:e.meta}),r.patch(e,Te),Te=r.applyData(e,Te),Te={type:"element",tagName:"pre",properties:{},children:[Te]},r.patch(e,Te),Te}function strikethrough(r,e){const t={type:"element",tagName:"del",properties:{},children:r.all(e)};return r.patch(e,t),r.applyData(e,t)}function emphasis(r,e){const t={type:"element",tagName:"em",properties:{},children:r.all(e)};return r.patch(e,t),r.applyData(e,t)}function footnoteReference(r,e){const t=typeof r.options.clobberPrefix=="string"?r.options.clobberPrefix:"user-content-",_e=String(e.identifier).toUpperCase(),Te=normalizeUri(_e.toLowerCase()),Ee=r.footnoteOrder.indexOf(_e);let xe,Pe=r.footnoteCounts.get(_e);Pe===void 0?(Pe=0,r.footnoteOrder.push(_e),xe=r.footnoteOrder.length):xe=Ee+1,Pe+=1,r.footnoteCounts.set(_e,Pe);const Re={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+Te,id:t+"fnref-"+Te+(Pe>1?"-"+Pe:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(xe)}]};r.patch(e,Re);const ke={type:"element",tagName:"sup",properties:{},children:[Re]};return r.patch(e,ke),r.applyData(e,ke)}function heading(r,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:r.all(e)};return r.patch(e,t),r.applyData(e,t)}function html(r,e){if(r.options.allowDangerousHtml){const t={type:"raw",value:e.value};return r.patch(e,t),r.applyData(e,t)}}function revert(r,e){const t=e.referenceType;let _e="]";if(t==="collapsed"?_e+="[]":t==="full"&&(_e+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+_e}];const Te=r.all(e),Ee=Te[0];Ee&&Ee.type==="text"?Ee.value="["+Ee.value:Te.unshift({type:"text",value:"["});const xe=Te[Te.length-1];return xe&&xe.type==="text"?xe.value+=_e:Te.push({type:"text",value:_e}),Te}function imageReference(r,e){const t=String(e.identifier).toUpperCase(),_e=r.definitionById.get(t);if(!_e)return revert(r,e);const Te={src:normalizeUri(_e.url||""),alt:e.alt};_e.title!==null&&_e.title!==void 0&&(Te.title=_e.title);const Ee={type:"element",tagName:"img",properties:Te,children:[]};return r.patch(e,Ee),r.applyData(e,Ee)}function image(r,e){const t={src:normalizeUri(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const _e={type:"element",tagName:"img",properties:t,children:[]};return r.patch(e,_e),r.applyData(e,_e)}function inlineCode(r,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};r.patch(e,t);const _e={type:"element",tagName:"code",properties:{},children:[t]};return r.patch(e,_e),r.applyData(e,_e)}function linkReference(r,e){const t=String(e.identifier).toUpperCase(),_e=r.definitionById.get(t);if(!_e)return revert(r,e);const Te={href:normalizeUri(_e.url||"")};_e.title!==null&&_e.title!==void 0&&(Te.title=_e.title);const Ee={type:"element",tagName:"a",properties:Te,children:r.all(e)};return r.patch(e,Ee),r.applyData(e,Ee)}function link(r,e){const t={href:normalizeUri(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const _e={type:"element",tagName:"a",properties:t,children:r.all(e)};return r.patch(e,_e),r.applyData(e,_e)}function listItem(r,e,t){const _e=r.all(e),Te=t?listLoose(t):listItemLoose(e),Ee={},xe=[];if(typeof e.checked=="boolean"){const Ce=_e[0];let Se;Ce&&Ce.type==="element"&&Ce.tagName==="p"?Se=Ce:(Se={type:"element",tagName:"p",properties:{},children:[]},_e.unshift(Se)),Se.children.length>0&&Se.children.unshift({type:"text",value:" "}),Se.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),Ee.className=["task-list-item"]}let Pe=-1;for(;++Pe<_e.length;){const Ce=_e[Pe];(Te||Pe!==0||Ce.type!=="element"||Ce.tagName!=="p")&&xe.push({type:"text",value:`
`}),Ce.type==="element"&&Ce.tagName==="p"&&!Te?xe.push(...Ce.children):xe.push(Ce)}const Re=_e[_e.length-1];Re&&(Te||Re.type!=="element"||Re.tagName!=="p")&&xe.push({type:"text",value:`
`});const ke={type:"element",tagName:"li",properties:Ee,children:xe};return r.patch(e,ke),r.applyData(e,ke)}function listLoose(r){let e=!1;if(r.type==="list"){e=r.spread||!1;const t=r.children;let _e=-1;for(;!e&&++_e<t.length;)e=listItemLoose(t[_e])}return e}function listItemLoose(r){const e=r.spread;return e??r.children.length>1}function list(r,e){const t={},_e=r.all(e);let Te=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++Te<_e.length;){const xe=_e[Te];if(xe.type==="element"&&xe.tagName==="li"&&xe.properties&&Array.isArray(xe.properties.className)&&xe.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const Ee={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:r.wrap(_e,!0)};return r.patch(e,Ee),r.applyData(e,Ee)}function paragraph(r,e){const t={type:"element",tagName:"p",properties:{},children:r.all(e)};return r.patch(e,t),r.applyData(e,t)}function root(r,e){const t={type:"root",children:r.wrap(r.all(e))};return r.patch(e,t),r.applyData(e,t)}function strong(r,e){const t={type:"element",tagName:"strong",properties:{},children:r.all(e)};return r.patch(e,t),r.applyData(e,t)}function table(r,e){const t=r.all(e),_e=t.shift(),Te=[];if(_e){const xe={type:"element",tagName:"thead",properties:{},children:r.wrap([_e],!0)};r.patch(e.children[0],xe),Te.push(xe)}if(t.length>0){const xe={type:"element",tagName:"tbody",properties:{},children:r.wrap(t,!0)},Pe=pointStart(e.children[1]),Re=pointEnd(e.children[e.children.length-1]);Pe&&Re&&(xe.position={start:Pe,end:Re}),Te.push(xe)}const Ee={type:"element",tagName:"table",properties:{},children:r.wrap(Te,!0)};return r.patch(e,Ee),r.applyData(e,Ee)}function tableRow(r,e,t){const _e=t?t.children:void 0,Ee=(_e?_e.indexOf(e):1)===0?"th":"td",xe=t&&t.type==="table"?t.align:void 0,Pe=xe?xe.length:e.children.length;let Re=-1;const ke=[];for(;++Re<Pe;){const Se=e.children[Re],Ae={},Ie=xe?xe[Re]:void 0;Ie&&(Ae.align=Ie);let Me={type:"element",tagName:Ee,properties:Ae,children:[]};Se&&(Me.children=r.all(Se),r.patch(Se,Me),Me=r.applyData(Se,Me)),ke.push(Me)}const Ce={type:"element",tagName:"tr",properties:{},children:r.wrap(ke,!0)};return r.patch(e,Ce),r.applyData(e,Ce)}function tableCell(r,e){const t={type:"element",tagName:"td",properties:{},children:r.all(e)};return r.patch(e,t),r.applyData(e,t)}const tab=9,space=32;function trimLines(r){const e=String(r),t=/\r?\n|\r/g;let _e=t.exec(e),Te=0;const Ee=[];for(;_e;)Ee.push(trimLine(e.slice(Te,_e.index),Te>0,!0),_e[0]),Te=_e.index+_e[0].length,_e=t.exec(e);return Ee.push(trimLine(e.slice(Te),Te>0,!1)),Ee.join("")}function trimLine(r,e,t){let _e=0,Te=r.length;if(e){let Ee=r.codePointAt(_e);for(;Ee===tab||Ee===space;)_e++,Ee=r.codePointAt(_e)}if(t){let Ee=r.codePointAt(Te-1);for(;Ee===tab||Ee===space;)Te--,Ee=r.codePointAt(Te-1)}return Te>_e?r.slice(_e,Te):""}function text(r,e){const t={type:"text",value:trimLines(String(e.value))};return r.patch(e,t),r.applyData(e,t)}function thematicBreak(r,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return r.patch(e,t),r.applyData(e,t)}const handlers={blockquote,break:hardBreak,code,delete:strikethrough,emphasis,footnoteReference,heading,html,imageReference,image,inlineCode,linkReference,link,listItem,list,paragraph,root,strong,table,tableCell,tableRow,text,thematicBreak,toml:ignore,yaml:ignore,definition:ignore,footnoteDefinition:ignore};function ignore(){}const VOID=-1,PRIMITIVE=0,ARRAY=1,OBJECT=2,DATE=3,REGEXP=4,MAP=5,SET=6,ERROR=7,BIGINT=8,env$3=typeof self=="object"?self:globalThis,deserializer=(r,e)=>{const t=(Te,Ee)=>(r.set(Ee,Te),Te),_e=Te=>{if(r.has(Te))return r.get(Te);const[Ee,xe]=e[Te];switch(Ee){case PRIMITIVE:case VOID:return t(xe,Te);case ARRAY:{const Pe=t([],Te);for(const Re of xe)Pe.push(_e(Re));return Pe}case OBJECT:{const Pe=t({},Te);for(const[Re,ke]of xe)Pe[_e(Re)]=_e(ke);return Pe}case DATE:return t(new Date(xe),Te);case REGEXP:{const{source:Pe,flags:Re}=xe;return t(new RegExp(Pe,Re),Te)}case MAP:{const Pe=t(new Map,Te);for(const[Re,ke]of xe)Pe.set(_e(Re),_e(ke));return Pe}case SET:{const Pe=t(new Set,Te);for(const Re of xe)Pe.add(_e(Re));return Pe}case ERROR:{const{name:Pe,message:Re}=xe;return t(new env$3[Pe](Re),Te)}case BIGINT:return t(BigInt(xe),Te);case"BigInt":return t(Object(BigInt(xe)),Te);case"ArrayBuffer":return t(new Uint8Array(xe).buffer,xe);case"DataView":{const{buffer:Pe}=new Uint8Array(xe);return t(new DataView(Pe),xe)}}return t(new env$3[Ee](xe),Te)};return _e},deserialize=r=>deserializer(new Map,r)(0),EMPTY="",{toString}={},{keys:keys$1}=Object,typeOf=r=>{const e=typeof r;if(e!=="object"||!r)return[PRIMITIVE,e];const t=toString.call(r).slice(8,-1);switch(t){case"Array":return[ARRAY,EMPTY];case"Object":return[OBJECT,EMPTY];case"Date":return[DATE,EMPTY];case"RegExp":return[REGEXP,EMPTY];case"Map":return[MAP,EMPTY];case"Set":return[SET,EMPTY];case"DataView":return[ARRAY,t]}return t.includes("Array")?[ARRAY,t]:t.includes("Error")?[ERROR,t]:[OBJECT,t]},shouldSkip=([r,e])=>r===PRIMITIVE&&(e==="function"||e==="symbol"),serializer=(r,e,t,_e)=>{const Te=(xe,Pe)=>{const Re=_e.push(xe)-1;return t.set(Pe,Re),Re},Ee=xe=>{if(t.has(xe))return t.get(xe);let[Pe,Re]=typeOf(xe);switch(Pe){case PRIMITIVE:{let Ce=xe;switch(Re){case"bigint":Pe=BIGINT,Ce=xe.toString();break;case"function":case"symbol":if(r)throw new TypeError("unable to serialize "+Re);Ce=null;break;case"undefined":return Te([VOID],xe)}return Te([Pe,Ce],xe)}case ARRAY:{if(Re){let Ae=xe;return Re==="DataView"?Ae=new Uint8Array(xe.buffer):Re==="ArrayBuffer"&&(Ae=new Uint8Array(xe)),Te([Re,[...Ae]],xe)}const Ce=[],Se=Te([Pe,Ce],xe);for(const Ae of xe)Ce.push(Ee(Ae));return Se}case OBJECT:{if(Re)switch(Re){case"BigInt":return Te([Re,xe.toString()],xe);case"Boolean":case"Number":case"String":return Te([Re,xe.valueOf()],xe)}if(e&&"toJSON"in xe)return Ee(xe.toJSON());const Ce=[],Se=Te([Pe,Ce],xe);for(const Ae of keys$1(xe))(r||!shouldSkip(typeOf(xe[Ae])))&&Ce.push([Ee(Ae),Ee(xe[Ae])]);return Se}case DATE:return Te([Pe,xe.toISOString()],xe);case REGEXP:{const{source:Ce,flags:Se}=xe;return Te([Pe,{source:Ce,flags:Se}],xe)}case MAP:{const Ce=[],Se=Te([Pe,Ce],xe);for(const[Ae,Ie]of xe)(r||!(shouldSkip(typeOf(Ae))||shouldSkip(typeOf(Ie))))&&Ce.push([Ee(Ae),Ee(Ie)]);return Se}case SET:{const Ce=[],Se=Te([Pe,Ce],xe);for(const Ae of xe)(r||!shouldSkip(typeOf(Ae)))&&Ce.push(Ee(Ae));return Se}}const{message:ke}=xe;return Te([Pe,{name:Re,message:ke}],xe)};return Ee},serialize=(r,{json:e,lossy:t}={})=>{const _e=[];return serializer(!(e||t),!!e,new Map,_e)(r),_e},structuredClone$1=typeof structuredClone=="function"?(r,e)=>e&&("json"in e||"lossy"in e)?deserialize(serialize(r,e)):structuredClone(r):(r,e)=>deserialize(serialize(r,e));function defaultFootnoteBackContent(r,e){const t=[{type:"text",value:"↩"}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function defaultFootnoteBackLabel(r,e){return"Back to reference "+(r+1)+(e>1?"-"+e:"")}function footer(r){const e=typeof r.options.clobberPrefix=="string"?r.options.clobberPrefix:"user-content-",t=r.options.footnoteBackContent||defaultFootnoteBackContent,_e=r.options.footnoteBackLabel||defaultFootnoteBackLabel,Te=r.options.footnoteLabel||"Footnotes",Ee=r.options.footnoteLabelTagName||"h2",xe=r.options.footnoteLabelProperties||{className:["sr-only"]},Pe=[];let Re=-1;for(;++Re<r.footnoteOrder.length;){const ke=r.footnoteById.get(r.footnoteOrder[Re]);if(!ke)continue;const Ce=r.all(ke),Se=String(ke.identifier).toUpperCase(),Ae=normalizeUri(Se.toLowerCase());let Ie=0;const Me=[],Fe=r.footnoteCounts.get(Se);for(;Fe!==void 0&&++Ie<=Fe;){Me.length>0&&Me.push({type:"text",value:" "});let Be=typeof t=="string"?t:t(Re,Ie);typeof Be=="string"&&(Be={type:"text",value:Be}),Me.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+Ae+(Ie>1?"-"+Ie:""),dataFootnoteBackref:"",ariaLabel:typeof _e=="string"?_e:_e(Re,Ie),className:["data-footnote-backref"]},children:Array.isArray(Be)?Be:[Be]})}const Ve=Ce[Ce.length-1];if(Ve&&Ve.type==="element"&&Ve.tagName==="p"){const Be=Ve.children[Ve.children.length-1];Be&&Be.type==="text"?Be.value+=" ":Ve.children.push({type:"text",value:" "}),Ve.children.push(...Me)}else Ce.push(...Me);const je={type:"element",tagName:"li",properties:{id:e+"fn-"+Ae},children:r.wrap(Ce,!0)};r.patch(ke,je),Pe.push(je)}if(Pe.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:Ee,properties:{...structuredClone$1(xe),id:"footnote-label"},children:[{type:"text",value:Te}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:r.wrap(Pe,!0)},{type:"text",value:`
`}]}}const convert=function(r){if(r==null)return ok;if(typeof r=="function")return castFactory(r);if(typeof r=="object")return Array.isArray(r)?anyFactory(r):propsFactory(r);if(typeof r=="string")return typeFactory(r);throw new Error("Expected function, string, or object as test")};function anyFactory(r){const e=[];let t=-1;for(;++t<r.length;)e[t]=convert(r[t]);return castFactory(_e);function _e(...Te){let Ee=-1;for(;++Ee<e.length;)if(e[Ee].apply(this,Te))return!0;return!1}}function propsFactory(r){const e=r;return castFactory(t);function t(_e){const Te=_e;let Ee;for(Ee in r)if(Te[Ee]!==e[Ee])return!1;return!0}}function typeFactory(r){return castFactory(e);function e(t){return t&&t.type===r}}function castFactory(r){return e;function e(t,_e,Te){return!!(looksLikeANode(t)&&r.call(this,t,typeof _e=="number"?_e:void 0,Te||void 0))}}function ok(){return!0}function looksLikeANode(r){return r!==null&&typeof r=="object"&&"type"in r}function color$1(r){return r}const empty=[],CONTINUE=!0,EXIT=!1,SKIP="skip";function visitParents(r,e,t,_e){let Te;typeof e=="function"&&typeof t!="function"?(_e=t,t=e):Te=e;const Ee=convert(Te),xe=_e?-1:1;Pe(r,void 0,[])();function Pe(Re,ke,Ce){const Se=Re&&typeof Re=="object"?Re:{};if(typeof Se.type=="string"){const Ie=typeof Se.tagName=="string"?Se.tagName:typeof Se.name=="string"?Se.name:void 0;Object.defineProperty(Ae,"name",{value:"node ("+(Re.type+(Ie?"<"+Ie+">":""))+")"})}return Ae;function Ae(){let Ie=empty,Me,Fe,Ve;if((!e||Ee(Re,ke,Ce[Ce.length-1]||void 0))&&(Ie=toResult(t(Re,Ce)),Ie[0]===EXIT))return Ie;if("children"in Re&&Re.children){const je=Re;if(je.children&&Ie[0]!==SKIP)for(Fe=(_e?je.children.length:-1)+xe,Ve=Ce.concat(je);Fe>-1&&Fe<je.children.length;){const Be=je.children[Fe];if(Me=Pe(Be,Fe,Ve)(),Me[0]===EXIT)return Me;Fe=typeof Me[1]=="number"?Me[1]:Fe+xe}}return Ie}}}function toResult(r){return Array.isArray(r)?r:typeof r=="number"?[CONTINUE,r]:r==null?empty:[r]}function visit(r,e,t,_e){let Te,Ee,xe;typeof e=="function"&&typeof t!="function"?(Ee=void 0,xe=e,Te=t):(Ee=e,xe=t,Te=_e),visitParents(r,Ee,Pe,Te);function Pe(Re,ke){const Ce=ke[ke.length-1],Se=Ce?Ce.children.indexOf(Re):void 0;return xe(Re,Se,Ce)}}const own$1={}.hasOwnProperty,emptyOptions={};function createState$1(r,e){const t=e||emptyOptions,_e=new Map,Te=new Map,Ee=new Map,xe={...handlers,...t.handlers},Pe={all:ke,applyData,definitionById:_e,footnoteById:Te,footnoteCounts:Ee,footnoteOrder:[],handlers:xe,one:Re,options:t,patch,wrap:wrap$1};return visit(r,function(Ce){if(Ce.type==="definition"||Ce.type==="footnoteDefinition"){const Se=Ce.type==="definition"?_e:Te,Ae=String(Ce.identifier).toUpperCase();Se.has(Ae)||Se.set(Ae,Ce)}}),Pe;function Re(Ce,Se){const Ae=Ce.type,Ie=Pe.handlers[Ae];if(own$1.call(Pe.handlers,Ae)&&Ie)return Ie(Pe,Ce,Se);if(Pe.options.passThrough&&Pe.options.passThrough.includes(Ae)){if("children"in Ce){const{children:Fe,...Ve}=Ce,je=structuredClone$1(Ve);return je.children=Pe.all(Ce),je}return structuredClone$1(Ce)}return(Pe.options.unknownHandler||defaultUnknownHandler)(Pe,Ce,Se)}function ke(Ce){const Se=[];if("children"in Ce){const Ae=Ce.children;let Ie=-1;for(;++Ie<Ae.length;){const Me=Pe.one(Ae[Ie],Ce);if(Me){if(Ie&&Ae[Ie-1].type==="break"&&(!Array.isArray(Me)&&Me.type==="text"&&(Me.value=trimMarkdownSpaceStart(Me.value)),!Array.isArray(Me)&&Me.type==="element")){const Fe=Me.children[0];Fe&&Fe.type==="text"&&(Fe.value=trimMarkdownSpaceStart(Fe.value))}Array.isArray(Me)?Se.push(...Me):Se.push(Me)}}}return Se}}function patch(r,e){r.position&&(e.position=position$1(r))}function applyData(r,e){let t=e;if(r&&r.data){const _e=r.data.hName,Te=r.data.hChildren,Ee=r.data.hProperties;if(typeof _e=="string")if(t.type==="element")t.tagName=_e;else{const xe="children"in t?t.children:[t];t={type:"element",tagName:_e,properties:{},children:xe}}t.type==="element"&&Ee&&Object.assign(t.properties,structuredClone$1(Ee)),"children"in t&&t.children&&Te!==null&&Te!==void 0&&(t.children=Te)}return t}function defaultUnknownHandler(r,e){const t=e.data||{},_e="value"in e&&!(own$1.call(t,"hProperties")||own$1.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:r.all(e)};return r.patch(e,_e),r.applyData(e,_e)}function wrap$1(r,e){const t=[];let _e=-1;for(e&&t.push({type:"text",value:`
`});++_e<r.length;)_e&&t.push({type:"text",value:`
`}),t.push(r[_e]);return e&&r.length>0&&t.push({type:"text",value:`
`}),t}function trimMarkdownSpaceStart(r){let e=0,t=r.charCodeAt(e);for(;t===9||t===32;)e++,t=r.charCodeAt(e);return r.slice(e)}function toHast(r,e){const t=createState$1(r,e),_e=t.one(r,void 0),Te=footer(t),Ee=Array.isArray(_e)?{type:"root",children:_e}:_e||{type:"root",children:[]};return Te&&Ee.children.push({type:"text",value:`
`},Te),Ee}function remarkRehype(r,e){return r&&"run"in r?async function(t,_e){const Te=toHast(t,{file:_e,...e});await r.run(Te,_e)}:function(t,_e){return toHast(t,{file:_e,...r||e})}}function bail(r){if(r)throw r}var extend$1,hasRequiredExtend;function requireExtend(){if(hasRequiredExtend)return extend$1;hasRequiredExtend=1;var r=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,_e=Object.getOwnPropertyDescriptor,Te=function(ke){return typeof Array.isArray=="function"?Array.isArray(ke):e.call(ke)==="[object Array]"},Ee=function(ke){if(!ke||e.call(ke)!=="[object Object]")return!1;var Ce=r.call(ke,"constructor"),Se=ke.constructor&&ke.constructor.prototype&&r.call(ke.constructor.prototype,"isPrototypeOf");if(ke.constructor&&!Ce&&!Se)return!1;var Ae;for(Ae in ke);return typeof Ae>"u"||r.call(ke,Ae)},xe=function(ke,Ce){t&&Ce.name==="__proto__"?t(ke,Ce.name,{enumerable:!0,configurable:!0,value:Ce.newValue,writable:!0}):ke[Ce.name]=Ce.newValue},Pe=function(ke,Ce){if(Ce==="__proto__")if(r.call(ke,Ce)){if(_e)return _e(ke,Ce).value}else return;return ke[Ce]};return extend$1=function Re(){var ke,Ce,Se,Ae,Ie,Me,Fe=arguments[0],Ve=1,je=arguments.length,Be=!1;for(typeof Fe=="boolean"&&(Be=Fe,Fe=arguments[1]||{},Ve=2),(Fe==null||typeof Fe!="object"&&typeof Fe!="function")&&(Fe={});Ve<je;++Ve)if(ke=arguments[Ve],ke!=null)for(Ce in ke)Se=Pe(Fe,Ce),Ae=Pe(ke,Ce),Fe!==Ae&&(Be&&Ae&&(Ee(Ae)||(Ie=Te(Ae)))?(Ie?(Ie=!1,Me=Se&&Te(Se)?Se:[]):Me=Se&&Ee(Se)?Se:{},xe(Fe,{name:Ce,newValue:Re(Be,Me,Ae)})):typeof Ae<"u"&&xe(Fe,{name:Ce,newValue:Ae}));return Fe},extend$1}var extendExports=requireExtend();const extend=getDefaultExportFromCjs(extendExports);function isPlainObject(r){if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)}function trough(){const r=[],e={run:t,use:_e};return e;function t(...Te){let Ee=-1;const xe=Te.pop();if(typeof xe!="function")throw new TypeError("Expected function as last argument, not "+xe);Pe(null,...Te);function Pe(Re,...ke){const Ce=r[++Ee];let Se=-1;if(Re){xe(Re);return}for(;++Se<Te.length;)(ke[Se]===null||ke[Se]===void 0)&&(ke[Se]=Te[Se]);Te=ke,Ce?wrap(Ce,Pe)(...ke):xe(null,...ke)}}function _e(Te){if(typeof Te!="function")throw new TypeError("Expected `middelware` to be a function, not "+Te);return r.push(Te),e}}function wrap(r,e){let t;return _e;function _e(...xe){const Pe=r.length>xe.length;let Re;Pe&&xe.push(Te);try{Re=r.apply(this,xe)}catch(ke){const Ce=ke;if(Pe&&t)throw Ce;return Te(Ce)}Pe||(Re&&Re.then&&typeof Re.then=="function"?Re.then(Ee,Te):Re instanceof Error?Te(Re):Ee(Re))}function Te(xe,...Pe){t||(t=!0,e(xe,...Pe))}function Ee(xe){Te(null,xe)}}const minpath={basename,dirname,extname,join,sep:"/"};function basename(r,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');assertPath$1(r);let t=0,_e=-1,Te=r.length,Ee;if(e===void 0||e.length===0||e.length>r.length){for(;Te--;)if(r.codePointAt(Te)===47){if(Ee){t=Te+1;break}}else _e<0&&(Ee=!0,_e=Te+1);return _e<0?"":r.slice(t,_e)}if(e===r)return"";let xe=-1,Pe=e.length-1;for(;Te--;)if(r.codePointAt(Te)===47){if(Ee){t=Te+1;break}}else xe<0&&(Ee=!0,xe=Te+1),Pe>-1&&(r.codePointAt(Te)===e.codePointAt(Pe--)?Pe<0&&(_e=Te):(Pe=-1,_e=xe));return t===_e?_e=xe:_e<0&&(_e=r.length),r.slice(t,_e)}function dirname(r){if(assertPath$1(r),r.length===0)return".";let e=-1,t=r.length,_e;for(;--t;)if(r.codePointAt(t)===47){if(_e){e=t;break}}else _e||(_e=!0);return e<0?r.codePointAt(0)===47?"/":".":e===1&&r.codePointAt(0)===47?"//":r.slice(0,e)}function extname(r){assertPath$1(r);let e=r.length,t=-1,_e=0,Te=-1,Ee=0,xe;for(;e--;){const Pe=r.codePointAt(e);if(Pe===47){if(xe){_e=e+1;break}continue}t<0&&(xe=!0,t=e+1),Pe===46?Te<0?Te=e:Ee!==1&&(Ee=1):Te>-1&&(Ee=-1)}return Te<0||t<0||Ee===0||Ee===1&&Te===t-1&&Te===_e+1?"":r.slice(Te,t)}function join(...r){let e=-1,t;for(;++e<r.length;)assertPath$1(r[e]),r[e]&&(t=t===void 0?r[e]:t+"/"+r[e]);return t===void 0?".":normalize(t)}function normalize(r){assertPath$1(r);const e=r.codePointAt(0)===47;let t=normalizeString(r,!e);return t.length===0&&!e&&(t="."),t.length>0&&r.codePointAt(r.length-1)===47&&(t+="/"),e?"/"+t:t}function normalizeString(r,e){let t="",_e=0,Te=-1,Ee=0,xe=-1,Pe,Re;for(;++xe<=r.length;){if(xe<r.length)Pe=r.codePointAt(xe);else{if(Pe===47)break;Pe=47}if(Pe===47){if(!(Te===xe-1||Ee===1))if(Te!==xe-1&&Ee===2){if(t.length<2||_e!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(Re=t.lastIndexOf("/"),Re!==t.length-1){Re<0?(t="",_e=0):(t=t.slice(0,Re),_e=t.length-1-t.lastIndexOf("/")),Te=xe,Ee=0;continue}}else if(t.length>0){t="",_e=0,Te=xe,Ee=0;continue}}e&&(t=t.length>0?t+"/..":"..",_e=2)}else t.length>0?t+="/"+r.slice(Te+1,xe):t=r.slice(Te+1,xe),_e=xe-Te-1;Te=xe,Ee=0}else Pe===46&&Ee>-1?Ee++:Ee=-1}return t}function assertPath$1(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}const minproc={cwd};function cwd(){return"/"}function isUrl(r){return!!(r!==null&&typeof r=="object"&&"href"in r&&r.href&&"protocol"in r&&r.protocol&&r.auth===void 0)}function urlToPath(r){if(typeof r=="string")r=new URL(r);else if(!isUrl(r)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+r+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(r.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return getPathFromURLPosix(r)}function getPathFromURLPosix(r){if(r.hostname!==""){const _e=new TypeError('File URL host must be "localhost" or empty on darwin');throw _e.code="ERR_INVALID_FILE_URL_HOST",_e}const e=r.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const _e=e.codePointAt(t+2);if(_e===70||_e===102){const Te=new TypeError("File URL path must not include encoded / characters");throw Te.code="ERR_INVALID_FILE_URL_PATH",Te}}return decodeURIComponent(e)}const order=["history","path","basename","stem","extname","dirname"];class VFile{constructor(e){let t;e?isUrl(e)?t={path:e}:typeof e=="string"||isUint8Array$1(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":minproc.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let _e=-1;for(;++_e<order.length;){const Ee=order[_e];Ee in t&&t[Ee]!==void 0&&t[Ee]!==null&&(this[Ee]=Ee==="history"?[...t[Ee]]:t[Ee])}let Te;for(Te in t)order.includes(Te)||(this[Te]=t[Te])}get basename(){return typeof this.path=="string"?minpath.basename(this.path):void 0}set basename(e){assertNonEmpty(e,"basename"),assertPart(e,"basename"),this.path=minpath.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?minpath.dirname(this.path):void 0}set dirname(e){assertPath(this.basename,"dirname"),this.path=minpath.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?minpath.extname(this.path):void 0}set extname(e){if(assertPart(e,"extname"),assertPath(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=minpath.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){isUrl(e)&&(e=urlToPath(e)),assertNonEmpty(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?minpath.basename(this.path,this.extname):void 0}set stem(e){assertNonEmpty(e,"stem"),assertPart(e,"stem"),this.path=minpath.join(this.dirname||"",e+(this.extname||""))}fail(e,t,_e){const Te=this.message(e,t,_e);throw Te.fatal=!0,Te}info(e,t,_e){const Te=this.message(e,t,_e);return Te.fatal=void 0,Te}message(e,t,_e){const Te=new VFileMessage(e,t,_e);return this.path&&(Te.name=this.path+":"+Te.name,Te.file=this.path),Te.fatal=!1,this.messages.push(Te),Te}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function assertPart(r,e){if(r&&r.includes(minpath.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+minpath.sep+"`")}function assertNonEmpty(r,e){if(!r)throw new Error("`"+e+"` cannot be empty")}function assertPath(r,e){if(!r)throw new Error("Setting `"+e+"` requires `path` to be set too")}function isUint8Array$1(r){return!!(r&&typeof r=="object"&&"byteLength"in r&&"byteOffset"in r)}const CallableInstance=function(r){const _e=this.constructor.prototype,Te=_e[r],Ee=function(){return Te.apply(Ee,arguments)};return Object.setPrototypeOf(Ee,_e),Ee},own={}.hasOwnProperty;let Processor$1=class yf extends CallableInstance{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=trough()}copy(){const e=new yf;let t=-1;for(;++t<this.attachers.length;){const _e=this.attachers[t];e.use(..._e)}return e.data(extend(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(assertUnfrozen("data",this.frozen),this.namespace[e]=t,this):own.call(this.namespace,e)&&this.namespace[e]||void 0:e?(assertUnfrozen("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,..._e]=this.attachers[this.freezeIndex];if(_e[0]===!1)continue;_e[0]===!0&&(_e[0]=void 0);const Te=t.call(e,..._e);typeof Te=="function"&&this.transformers.use(Te)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=vfile(e),_e=this.parser||this.Parser;return assertParser("parse",_e),_e(String(t),t)}process(e,t){const _e=this;return this.freeze(),assertParser("process",this.parser||this.Parser),assertCompiler("process",this.compiler||this.Compiler),t?Te(void 0,t):new Promise(Te);function Te(Ee,xe){const Pe=vfile(e),Re=_e.parse(Pe);_e.run(Re,Pe,function(Ce,Se,Ae){if(Ce||!Se||!Ae)return ke(Ce);const Ie=Se,Me=_e.stringify(Ie,Ae);looksLikeAValue(Me)?Ae.value=Me:Ae.result=Me,ke(Ce,Ae)});function ke(Ce,Se){Ce||!Se?xe(Ce):Ee?Ee(Se):t(void 0,Se)}}}processSync(e){let t=!1,_e;return this.freeze(),assertParser("processSync",this.parser||this.Parser),assertCompiler("processSync",this.compiler||this.Compiler),this.process(e,Te),assertDone("processSync","process",t),_e;function Te(Ee,xe){t=!0,bail(Ee),_e=xe}}run(e,t,_e){assertNode(e),this.freeze();const Te=this.transformers;return!_e&&typeof t=="function"&&(_e=t,t=void 0),_e?Ee(void 0,_e):new Promise(Ee);function Ee(xe,Pe){const Re=vfile(t);Te.run(e,Re,ke);function ke(Ce,Se,Ae){const Ie=Se||e;Ce?Pe(Ce):xe?xe(Ie):_e(void 0,Ie,Ae)}}}runSync(e,t){let _e=!1,Te;return this.run(e,t,Ee),assertDone("runSync","run",_e),Te;function Ee(xe,Pe){bail(xe),Te=Pe,_e=!0}}stringify(e,t){this.freeze();const _e=vfile(t),Te=this.compiler||this.Compiler;return assertCompiler("stringify",Te),assertNode(e),Te(e,_e)}use(e,...t){const _e=this.attachers,Te=this.namespace;if(assertUnfrozen("use",this.frozen),e!=null)if(typeof e=="function")Re(e,t);else if(typeof e=="object")Array.isArray(e)?Pe(e):xe(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function Ee(ke){if(typeof ke=="function")Re(ke,[]);else if(typeof ke=="object")if(Array.isArray(ke)){const[Ce,...Se]=ke;Re(Ce,Se)}else xe(ke);else throw new TypeError("Expected usable value, not `"+ke+"`")}function xe(ke){if(!("plugins"in ke)&&!("settings"in ke))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");Pe(ke.plugins),ke.settings&&(Te.settings=extend(!0,Te.settings,ke.settings))}function Pe(ke){let Ce=-1;if(ke!=null)if(Array.isArray(ke))for(;++Ce<ke.length;){const Se=ke[Ce];Ee(Se)}else throw new TypeError("Expected a list of plugins, not `"+ke+"`")}function Re(ke,Ce){let Se=-1,Ae=-1;for(;++Se<_e.length;)if(_e[Se][0]===ke){Ae=Se;break}if(Ae===-1)_e.push([ke,...Ce]);else if(Ce.length>0){let[Ie,...Me]=Ce;const Fe=_e[Ae][1];isPlainObject(Fe)&&isPlainObject(Ie)&&(Ie=extend(!0,Fe,Ie)),_e[Ae]=[ke,Ie,...Me]}}}};const unified=new Processor$1().freeze();function assertParser(r,e){if(typeof e!="function")throw new TypeError("Cannot `"+r+"` without `parser`")}function assertCompiler(r,e){if(typeof e!="function")throw new TypeError("Cannot `"+r+"` without `compiler`")}function assertUnfrozen(r,e){if(e)throw new Error("Cannot call `"+r+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function assertNode(r){if(!isPlainObject(r)||typeof r.type!="string")throw new TypeError("Expected node, got `"+r+"`")}function assertDone(r,e,t){if(!t)throw new Error("`"+r+"` finished async. Use `"+e+"` instead")}function vfile(r){return looksLikeAVFile(r)?r:new VFile(r)}function looksLikeAVFile(r){return!!(r&&typeof r=="object"&&"message"in r&&"messages"in r)}function looksLikeAValue(r){return typeof r=="string"||isUint8Array(r)}function isUint8Array(r){return!!(r&&typeof r=="object"&&"byteLength"in r&&"byteOffset"in r)}const changelog="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",emptyPlugins=[],emptyRemarkRehypeOptions={allowDangerousHtml:!0},safeProtocol=/^(https?|ircs?|mailto|xmpp)$/i,deprecations=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Markdown(r){const e=createProcessor(r),t=createFile(r);return post(e.runSync(e.parse(t),t),r)}function createProcessor(r){const e=r.rehypePlugins||emptyPlugins,t=r.remarkPlugins||emptyPlugins,_e=r.remarkRehypeOptions?{...r.remarkRehypeOptions,...emptyRemarkRehypeOptions}:emptyRemarkRehypeOptions;return unified().use(remarkParse).use(t).use(remarkRehype,_e).use(e)}function createFile(r){const e=r.children||"",t=new VFile;return typeof e=="string"&&(t.value=e),t}function post(r,e){const t=e.allowedElements,_e=e.allowElement,Te=e.components,Ee=e.disallowedElements,xe=e.skipHtml,Pe=e.unwrapDisallowed,Re=e.urlTransform||defaultUrlTransform;for(const Ce of deprecations)Object.hasOwn(e,Ce.from)&&(""+Ce.from+(Ce.to?"use `"+Ce.to+"` instead":"remove it")+changelog+Ce.id,void 0);return visit(r,ke),toJsxRuntime(r,{Fragment:jsxRuntimeExports.Fragment,components:Te,ignoreInvalidStyle:!0,jsx:jsxRuntimeExports.jsx,jsxs:jsxRuntimeExports.jsxs,passKeys:!0,passNode:!0});function ke(Ce,Se,Ae){if(Ce.type==="raw"&&Ae&&typeof Se=="number")return xe?Ae.children.splice(Se,1):Ae.children[Se]={type:"text",value:Ce.value},Se;if(Ce.type==="element"){let Ie;for(Ie in urlAttributes)if(Object.hasOwn(urlAttributes,Ie)&&Object.hasOwn(Ce.properties,Ie)){const Me=Ce.properties[Ie],Fe=urlAttributes[Ie];(Fe===null||Fe.includes(Ce.tagName))&&(Ce.properties[Ie]=Re(String(Me||""),Ie,Ce))}}if(Ce.type==="element"){let Ie=t?!t.includes(Ce.tagName):Ee?Ee.includes(Ce.tagName):!1;if(!Ie&&_e&&typeof Se=="number"&&(Ie=!_e(Ce,Se,Ae)),Ie&&Ae&&typeof Se=="number")return Pe&&Ce.children?Ae.children.splice(Se,1,...Ce.children):Ae.children.splice(Se,1),Se}}}function defaultUrlTransform(r){const e=r.indexOf(":"),t=r.indexOf("?"),_e=r.indexOf("#"),Te=r.indexOf("/");return e===-1||Te!==-1&&e>Te||t!==-1&&e>t||_e!==-1&&e>_e||safeProtocol.test(r.slice(0,e))?r:""}const scholarshipsData=[{name:"National Means-Cum-Merit Scholarship (NMMS)",states:["All"],grades:["9","10"],board:["CBSE","ICSE","State Board"],category:"All",income_limit:35e4,deadline:"2025-10-31",url:"https://scholarships.gov.in"},{name:"Inspire Scholarship (DST)",states:["All"],grades:["12","College"],board:["CBSE","ICSE","State Board"],category:"All",income_limit:8e5,deadline:"2025-11-30",url:"https://online-inspire.gov.in"},{name:"Kishore Vaigyanik Protsahan Yojana (KVPY)",states:["All"],grades:["11","12","College"],board:["CBSE","ICSE","State Board"],category:"All",income_limit:1e6,deadline:"2025-08-15",url:"https://kvpy.iisc.ac.in"},{name:"Maulana Azad National Fellowship (MANF)",states:["All"],grades:["College"],board:["CBSE","ICSE","State Board"],category:"Minority",income_limit:6e5,deadline:"2025-09-15",url:"https://minorityaffairs.gov.in"},{name:"ONGC Scholarship for SC/ST",states:["All"],grades:["College"],board:["CBSE","ICSE","State Board"],category:"SC",income_limit:45e4,deadline:"2025-12-01",url:"https://ongcindia.com"},{name:"Buddy4Study - Sardar Patel Scholarship",states:["All"],grades:["11","12"],board:["CBSE","ICSE","State Board"],category:"All",income_limit:6e5,deadline:"2025-09-20",url:"https://www.buddy4study.com"},{name:"Ishan Uday (North Eastern Region)",states:["Assam","Meghalaya","Manipur","Tripura","Nagaland","Arunachal Pradesh","Mizoram","Sikkim"],grades:["College"],board:["CBSE","ICSE","State Board"],category:"All",income_limit:45e4,deadline:"2025-10-10",url:"https://scholarships.gov.in"},{name:"Prime Minister’s Scholarship Scheme (PMSS)",states:["All"],grades:["College"],board:["CBSE","ICSE","State Board"],category:"All",income_limit:6e5,deadline:"2025-08-30",url:"https://ksb.gov.in"},{name:"NSP Post Matric Scholarship (SC Students)",states:["All"],grades:["11","12","College"],board:["CBSE","ICSE","State Board"],category:"SC",income_limit:25e4,deadline:"2025-10-15",url:"https://scholarships.gov.in"},{name:"NTSE (National Talent Search Exam)",states:["All"],grades:["10"],board:["CBSE","ICSE","State Board"],category:"All",income_limit:1e6,deadline:"2025-07-30",url:"https://ncert.nic.in"}];function ScholarshipScout(){const[r,e]=reactExports.useState({state:"",board:"",grade:"",category:"",income:"",interests:"",achievements:""}),[t,_e]=reactExports.useState(0),[Te,Ee]=reactExports.useState(!1),[xe,Pe]=reactExports.useState([]),Re=reactExports.useRef(null),ke=[{label:"State",key:"state",type:"select",options:["West Bengal","Bihar","Maharashtra","Tamil Nadu","All"]},{label:"Board",key:"board",type:"select",options:["CBSE","ICSE","State Board"]},{label:"Grade",key:"grade",type:"select",options:["9","10","11","12","College"]},{label:"Category",key:"category",type:"select",options:["General","SC","ST","OBC","EWS"]},{label:"Family Income (₹)",key:"income",type:"number"},{label:"Interests",key:"interests",type:"text",placeholder:"e.g. Science, Arts"},{label:"Achievements",key:"achievements",type:"text",placeholder:"Optional, e.g. Olympiad winner"}],Ce=Me=>{e(Fe=>({...Fe,[ke[t].key]:Me.target.value}))},Se=Me=>{try{const Fe=new URL(Me);return["gov.in","edu.in","ac.in","org","com"].some(Ve=>Fe.hostname.endsWith(Ve))}catch{return!1}},Ae=async()=>{if(t<ke.length-1){_e(t+1);return}Ee(!0);const Me=scholarshipsData.filter(Ve=>(Ve.states.includes(r.state)||Ve.states.includes("All"))&&Ve.board.includes(r.board)&&Ve.grades.includes(r.grade)&&Number(r.income)<=Ve.income_limit&&(Ve.category==="All"||Ve.category===r.category)&&Se(Ve.url)),Fe=`
You are ScholarshipScout, an accurate scholarship advisor for Indian students.

Only recommend real, safe, working scholarships. Use only this list to recommend.
Avoid fake or sketchy URLs. Prioritize trusted sources (NSP, UGC, DST, Buddy4Study, KVPY, etc).

Scholarship Data:
${JSON.stringify(Me,null,2)}

Student Profile:
- State: ${r.state}
- Board: ${r.board}
- Grade: ${r.grade}
- Category: ${r.category}
- Family Income: ₹${r.income}
- Interests: ${r.interests}
- Achievements: ${r.achievements}

Respond with max 5 matches in this format:
1. **Scholarship Name**
Why it's a good match.
🔗 [Apply here](link)
`.trim();try{const Be=((await axios.post("https://api.groq.com/openai/v1/chat/completions",{model:"llama3-70b-8192",messages:[{role:"system",content:"You're ScholarshipScout, an AI expert for verified Indian scholarships."},{role:"user",content:Fe}],temperature:.7},{headers:{Authorization:"Bearer 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"}})).data.choices[0].message.content||"").split(/\n{2,}/).filter(Boolean);Pe(Be)}catch(Ve){console.error("AI error, using fallback:",Ve);const je=Me.map(Be=>`**${Be.name}**
Deadline: **${Be.deadline}**
🔗 [Apply here](${Be.url})`);Pe(je)}finally{Ee(!1),Re.current?.scrollIntoView({behavior:"smooth"})}},Ie=ke[t];return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-yellow-100 via-pink-100 to-purple-100 p-6 font-poppins",children:jsxRuntimeExports.jsxs("div",{className:"max-w-2xl mx-auto bg-white/40 backdrop-blur-lg p-8 rounded-3xl border border-white/30 shadow-2xl",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold text-center text-purple-700 mb-6",children:"🎓 ScholarshipScout"}),xe.length===0&&jsxRuntimeExports.jsxs("div",{className:"space-y-4 animate-fade-in",children:[jsxRuntimeExports.jsx("label",{className:"block text-lg font-medium",children:Ie.label}),Ie.type==="select"?jsxRuntimeExports.jsxs("select",{value:r[Ie.key],onChange:Ce,className:"w-full p-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-purple-400",children:[jsxRuntimeExports.jsxs("option",{value:"",children:["Select ",Ie.label]}),Ie.options.map(Me=>jsxRuntimeExports.jsx("option",{value:Me,children:Me},Me))]}):jsxRuntimeExports.jsx("input",{type:Ie.type,placeholder:Ie.placeholder||Ie.label,value:r[Ie.key],onChange:Ce,className:"w-full p-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-purple-400"}),jsxRuntimeExports.jsxs("button",{onClick:Ae,disabled:!r[Ie.key]||Te,className:"mt-4 w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-full font-semibold flex justify-center items-center gap-2 disabled:opacity-50",children:[t<ke.length-1?"Next":Te?"🔎 Searching…":"🎯 Find Scholarships",jsxRuntimeExports.jsx(CircleArrowRight,{size:20})]})]}),xe.length>0&&jsxRuntimeExports.jsxs("div",{ref:Re,className:"mt-8 space-y-4 animate-fade-in",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-purple-800 mb-3",children:"✅ Top Matches for You:"}),xe.map((Me,Fe)=>jsxRuntimeExports.jsx("div",{className:"p-4 bg-white/60 rounded-2xl border border-white/30 backdrop-blur-md shadow-md hover:scale-[1.02] transition-transform duration-300",children:jsxRuntimeExports.jsx(Markdown,{components:{p:({node:Ve,...je})=>jsxRuntimeExports.jsx("p",{className:"whitespace-pre-wrap",...je}),strong:({node:Ve,...je})=>jsxRuntimeExports.jsx("strong",{className:"text-purple-800",...je}),a:({node:Ve,...je})=>jsxRuntimeExports.jsx("a",{className:"text-blue-600 underline hover:text-blue-800",target:"_blank",rel:"noopener noreferrer",...je})},children:Me})},Fe))]})]})})}const LayoutGroupContext=reactExports.createContext({});function useConstant(r){const e=reactExports.useRef(null);return e.current===null&&(e.current=r()),e.current}const isBrowser=typeof window<"u",useIsomorphicLayoutEffect=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect,PresenceContext=reactExports.createContext(null);function addUniqueItem(r,e){r.indexOf(e)===-1&&r.push(e)}function removeItem(r,e){const t=r.indexOf(e);t>-1&&r.splice(t,1)}const clamp=(r,e,t)=>t>e?e:t<r?r:t;let invariant=()=>{};const MotionGlobalConfig={},isNumericalString=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r);function isObject(r){return typeof r=="object"&&r!==null}const isZeroValueString=r=>/^0[^.\s]+$/u.test(r);function memo(r){let e;return()=>(e===void 0&&(e=r()),e)}const noop=r=>r,combineFunctions=(r,e)=>t=>e(r(t)),pipe=(...r)=>r.reduce(combineFunctions),progress=(r,e,t)=>{const _e=e-r;return _e===0?1:(t-r)/_e};class SubscriptionManager{constructor(){this.subscriptions=[]}add(e){return addUniqueItem(this.subscriptions,e),()=>removeItem(this.subscriptions,e)}notify(e,t,_e){const Te=this.subscriptions.length;if(Te)if(Te===1)this.subscriptions[0](e,t,_e);else for(let Ee=0;Ee<Te;Ee++){const xe=this.subscriptions[Ee];xe&&xe(e,t,_e)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const secondsToMilliseconds=r=>r*1e3,millisecondsToSeconds=r=>r/1e3;function velocityPerSecond(r,e){return e?r*(1e3/e):0}const calcBezier=(r,e,t)=>(((1-3*t+3*e)*r+(3*t-6*e))*r+3*e)*r,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(r,e,t,_e,Te){let Ee,xe,Pe=0;do xe=e+(t-e)/2,Ee=calcBezier(xe,_e,Te)-r,Ee>0?t=xe:e=xe;while(Math.abs(Ee)>subdivisionPrecision&&++Pe<subdivisionMaxIterations);return xe}function cubicBezier(r,e,t,_e){if(r===e&&t===_e)return noop;const Te=Ee=>binarySubdivide(Ee,0,1,r,t);return Ee=>Ee===0||Ee===1?Ee:calcBezier(Te(Ee),e,_e)}const mirrorEasing=r=>e=>e<=.5?r(2*e)/2:(2-r(2*(1-e)))/2,reverseEasing=r=>e=>1-r(1-e),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=r=>(r*=2)<1?.5*backIn(r):.5*(2-Math.pow(2,-10*(r-1))),circIn=r=>1-Math.sin(Math.acos(r)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=r=>Array.isArray(r)&&typeof r[0]!="number",isBezierDefinition=r=>Array.isArray(r)&&typeof r[0]=="number",easingLookup={linear:noop,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},isValidEasing=r=>typeof r=="string",easingDefinitionToFunction=r=>{if(isBezierDefinition(r)){invariant(r.length===4);const[e,t,_e,Te]=r;return cubicBezier(e,t,_e,Te)}else if(isValidEasing(r))return easingLookup[r];return r},stepsOrder=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function createRenderStep(r,e){let t=new Set,_e=new Set,Te=!1,Ee=!1;const xe=new WeakSet;let Pe={delta:0,timestamp:0,isProcessing:!1};function Re(Ce){xe.has(Ce)&&(ke.schedule(Ce),r()),Ce(Pe)}const ke={schedule:(Ce,Se=!1,Ae=!1)=>{const Me=Ae&&Te?t:_e;return Se&&xe.add(Ce),Me.has(Ce)||Me.add(Ce),Ce},cancel:Ce=>{_e.delete(Ce),xe.delete(Ce)},process:Ce=>{if(Pe=Ce,Te){Ee=!0;return}Te=!0,[t,_e]=[_e,t],t.forEach(Re),t.clear(),Te=!1,Ee&&(Ee=!1,ke.process(Ce))}};return ke}const maxElapsed$1=40;function createRenderBatcher(r,e){let t=!1,_e=!0;const Te={delta:0,timestamp:0,isProcessing:!1},Ee=()=>t=!0,xe=stepsOrder.reduce((qe,He)=>(qe[He]=createRenderStep(Ee),qe),{}),{setup:Pe,read:Re,resolveKeyframes:ke,preUpdate:Ce,update:Se,preRender:Ae,render:Ie,postRender:Me}=xe,Fe=()=>{const qe=MotionGlobalConfig.useManualTiming?Te.timestamp:performance.now();t=!1,MotionGlobalConfig.useManualTiming||(Te.delta=_e?1e3/60:Math.max(Math.min(qe-Te.timestamp,maxElapsed$1),1)),Te.timestamp=qe,Te.isProcessing=!0,Pe.process(Te),Re.process(Te),ke.process(Te),Ce.process(Te),Se.process(Te),Ae.process(Te),Ie.process(Te),Me.process(Te),Te.isProcessing=!1,t&&e&&(_e=!1,r(Fe))},Ve=()=>{t=!0,_e=!0,Te.isProcessing||r(Fe)};return{schedule:stepsOrder.reduce((qe,He)=>{const Xe=xe[He];return qe[He]=(Je,Qe=!1,Ke=!1)=>(t||Ve(),Xe.schedule(Je,Qe,Ke)),qe},{}),cancel:qe=>{for(let He=0;He<stepsOrder.length;He++)xe[stepsOrder[He]].cancel(qe)},state:Te,steps:xe}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop,!0);let now;function clearTime(){now=void 0}const time={now:()=>(now===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now),set:r=>{now=r,queueMicrotask(clearTime)}},checkStringStartsWith=r=>e=>typeof e=="string"&&e.startsWith(r),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=r=>startsAsVariableToken(r)?singleCssVariableRegex.test(r.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,number={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},alpha={...number,transform:r=>clamp(0,1,r)},scale={...number,default:1},sanitize=r=>Math.round(r*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(r){return r==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(r,e)=>t=>!!(typeof t=="string"&&singleColorRegex.test(t)&&t.startsWith(r)||e&&!isNullish(t)&&Object.prototype.hasOwnProperty.call(t,e)),splitColor=(r,e,t)=>_e=>{if(typeof _e!="string")return _e;const[Te,Ee,xe,Pe]=_e.match(floatRegex);return{[r]:parseFloat(Te),[e]:parseFloat(Ee),[t]:parseFloat(xe),alpha:Pe!==void 0?parseFloat(Pe):1}},clampRgbUnit=r=>clamp(0,255,r),rgbUnit={...number,transform:r=>Math.round(clampRgbUnit(r))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:r,green:e,blue:t,alpha:_e=1})=>"rgba("+rgbUnit.transform(r)+", "+rgbUnit.transform(e)+", "+rgbUnit.transform(t)+", "+sanitize(alpha.transform(_e))+")"};function parseHex(r){let e="",t="",_e="",Te="";return r.length>5?(e=r.substring(1,3),t=r.substring(3,5),_e=r.substring(5,7),Te=r.substring(7,9)):(e=r.substring(1,2),t=r.substring(2,3),_e=r.substring(3,4),Te=r.substring(4,5),e+=e,t+=t,_e+=_e,Te+=Te),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(_e,16),alpha:Te?parseInt(Te,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},createUnitType=r=>({test:e=>typeof e=="string"&&e.endsWith(r)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${r}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:r=>percent.parse(r)/100,transform:r=>percent.transform(r*100)},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:r,saturation:e,lightness:t,alpha:_e=1})=>"hsla("+Math.round(r)+", "+percent.transform(sanitize(e))+", "+percent.transform(sanitize(t))+", "+sanitize(alpha.transform(_e))+")"},color={test:r=>rgba.test(r)||hex.test(r)||hsla.test(r),parse:r=>rgba.test(r)?rgba.parse(r):hsla.test(r)?hsla.parse(r):hex.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?rgba.transform(r):hsla.transform(r),getAnimatableNone:r=>{const e=color.parse(r);return e.alpha=0,color.transform(e)}},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test(r){return isNaN(r)&&typeof r=="string"&&(r.match(floatRegex)?.length||0)+(r.match(colorRegex)?.length||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(r){const e=r.toString(),t=[],_e={color:[],number:[],var:[]},Te=[];let Ee=0;const Pe=e.replace(complexRegex,Re=>(color.test(Re)?(_e.color.push(Ee),Te.push(COLOR_TOKEN),t.push(color.parse(Re))):Re.startsWith(VAR_FUNCTION_TOKEN)?(_e.var.push(Ee),Te.push(VAR_TOKEN),t.push(Re)):(_e.number.push(Ee),Te.push(NUMBER_TOKEN),t.push(parseFloat(Re))),++Ee,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:t,split:Pe,indexes:_e,types:Te}}function parseComplexValue(r){return analyseComplexValue(r).values}function createTransformer(r){const{split:e,types:t}=analyseComplexValue(r),_e=e.length;return Te=>{let Ee="";for(let xe=0;xe<_e;xe++)if(Ee+=e[xe],Te[xe]!==void 0){const Pe=t[xe];Pe===NUMBER_TOKEN?Ee+=sanitize(Te[xe]):Pe===COLOR_TOKEN?Ee+=color.transform(Te[xe]):Ee+=Te[xe]}return Ee}}const convertNumbersToZero=r=>typeof r=="number"?0:color.test(r)?color.getAnimatableNone(r):r;function getAnimatableNone$1(r){const e=parseComplexValue(r);return createTransformer(r)(e.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1};function hueToRgb(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*(2/3-t)*6:r}function hslaToRgba({hue:r,saturation:e,lightness:t,alpha:_e}){r/=360,e/=100,t/=100;let Te=0,Ee=0,xe=0;if(!e)Te=Ee=xe=t;else{const Pe=t<.5?t*(1+e):t+e-t*e,Re=2*t-Pe;Te=hueToRgb(Re,Pe,r+1/3),Ee=hueToRgb(Re,Pe,r),xe=hueToRgb(Re,Pe,r-1/3)}return{red:Math.round(Te*255),green:Math.round(Ee*255),blue:Math.round(xe*255),alpha:_e}}function mixImmediate(r,e){return t=>t>0?e:r}const mixNumber$1=(r,e,t)=>r+(e-r)*t,mixLinearColor=(r,e,t)=>{const _e=r*r,Te=t*(e*e-_e)+_e;return Te<0?0:Math.sqrt(Te)},colorTypes=[hex,rgba,hsla],getColorType=r=>colorTypes.find(e=>e.test(r));function asRGBA(r){const e=getColorType(r);if(!e)return!1;let t=e.parse(r);return e===hsla&&(t=hslaToRgba(t)),t}const mixColor=(r,e)=>{const t=asRGBA(r),_e=asRGBA(e);if(!t||!_e)return mixImmediate(r,e);const Te={...t};return Ee=>(Te.red=mixLinearColor(t.red,_e.red,Ee),Te.green=mixLinearColor(t.green,_e.green,Ee),Te.blue=mixLinearColor(t.blue,_e.blue,Ee),Te.alpha=mixNumber$1(t.alpha,_e.alpha,Ee),rgba.transform(Te))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(r,e){return invisibleValues.has(r)?t=>t<=0?r:e:t=>t>=1?e:r}function mixNumber(r,e){return t=>mixNumber$1(r,e,t)}function getMixer(r){return typeof r=="number"?mixNumber:typeof r=="string"?isCSSVariableToken(r)?mixImmediate:color.test(r)?mixColor:mixComplex:Array.isArray(r)?mixArray:typeof r=="object"?color.test(r)?mixColor:mixObject:mixImmediate}function mixArray(r,e){const t=[...r],_e=t.length,Te=r.map((Ee,xe)=>getMixer(Ee)(Ee,e[xe]));return Ee=>{for(let xe=0;xe<_e;xe++)t[xe]=Te[xe](Ee);return t}}function mixObject(r,e){const t={...r,...e},_e={};for(const Te in t)r[Te]!==void 0&&e[Te]!==void 0&&(_e[Te]=getMixer(r[Te])(r[Te],e[Te]));return Te=>{for(const Ee in _e)t[Ee]=_e[Ee](Te);return t}}function matchOrder(r,e){const t=[],_e={color:0,var:0,number:0};for(let Te=0;Te<e.values.length;Te++){const Ee=e.types[Te],xe=r.indexes[Ee][_e[Ee]],Pe=r.values[xe]??0;t[Te]=Pe,_e[Ee]++}return t}const mixComplex=(r,e)=>{const t=complex.createTransformer(e),_e=analyseComplexValue(r),Te=analyseComplexValue(e);return _e.indexes.var.length===Te.indexes.var.length&&_e.indexes.color.length===Te.indexes.color.length&&_e.indexes.number.length>=Te.indexes.number.length?invisibleValues.has(r)&&!Te.values.length||invisibleValues.has(e)&&!_e.values.length?mixVisibility(r,e):pipe(mixArray(matchOrder(_e,Te),Te.values),t):mixImmediate(r,e)};function mix(r,e,t){return typeof r=="number"&&typeof e=="number"&&typeof t=="number"?mixNumber$1(r,e,t):getMixer(r)(r,e)}const frameloopDriver=r=>{const e=({timestamp:t})=>r(t);return{start:(t=!0)=>frame.update(e,t),stop:()=>cancelFrame(e),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generateLinearEasing=(r,e,t=10)=>{let _e="";const Te=Math.max(Math.round(e/t),2);for(let Ee=0;Ee<Te;Ee++)_e+=Math.round(r(Ee/(Te-1))*1e4)/1e4+", ";return`linear(${_e.substring(0,_e.length-2)})`},maxGeneratorDuration=2e4;function calcGeneratorDuration(r){let e=0;const t=50;let _e=r.next(e);for(;!_e.done&&e<maxGeneratorDuration;)e+=t,_e=r.next(e);return e>=maxGeneratorDuration?1/0:e}function createGeneratorEasing(r,e=100,t){const _e=t({...r,keyframes:[0,e]}),Te=Math.min(calcGeneratorDuration(_e),maxGeneratorDuration);return{type:"keyframes",ease:Ee=>_e.next(Te*Ee).value/e,duration:millisecondsToSeconds(Te)}}const velocitySampleDuration=5;function calcGeneratorVelocity(r,e,t){const _e=Math.max(e-velocitySampleDuration,0);return velocityPerSecond(t-r(_e),e-_e)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:r=springDefaults.duration,bounce:e=springDefaults.bounce,velocity:t=springDefaults.velocity,mass:_e=springDefaults.mass}){let Te,Ee,xe=1-e;xe=clamp(springDefaults.minDamping,springDefaults.maxDamping,xe),r=clamp(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(r)),xe<1?(Te=ke=>{const Ce=ke*xe,Se=Ce*r,Ae=Ce-t,Ie=calcAngularFreq(ke,xe),Me=Math.exp(-Se);return safeMin-Ae/Ie*Me},Ee=ke=>{const Se=ke*xe*r,Ae=Se*t+t,Ie=Math.pow(xe,2)*Math.pow(ke,2)*r,Me=Math.exp(-Se),Fe=calcAngularFreq(Math.pow(ke,2),xe);return(-Te(ke)+safeMin>0?-1:1)*((Ae-Ie)*Me)/Fe}):(Te=ke=>{const Ce=Math.exp(-ke*r),Se=(ke-t)*r+1;return-safeMin+Ce*Se},Ee=ke=>{const Ce=Math.exp(-ke*r),Se=(t-ke)*(r*r);return Ce*Se});const Pe=5/r,Re=approximateRoot(Te,Ee,Pe);if(r=secondsToMilliseconds(r),isNaN(Re))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:r};{const ke=Math.pow(Re,2)*_e;return{stiffness:ke,damping:xe*2*Math.sqrt(_e*ke),duration:r}}}const rootIterations=12;function approximateRoot(r,e,t){let _e=t;for(let Te=1;Te<rootIterations;Te++)_e=_e-r(_e)/e(_e);return _e}function calcAngularFreq(r,e){return r*Math.sqrt(1-e*e)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(r,e){return e.some(t=>r[t]!==void 0)}function getSpringOptions(r){let e={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...r};if(!isSpringType(r,physicsKeys)&&isSpringType(r,durationKeys))if(r.visualDuration){const t=r.visualDuration,_e=2*Math.PI/(t*1.2),Te=_e*_e,Ee=2*clamp(.05,1,1-(r.bounce||0))*Math.sqrt(Te);e={...e,mass:springDefaults.mass,stiffness:Te,damping:Ee}}else{const t=findSpring(r);e={...e,...t,mass:springDefaults.mass},e.isResolvedFromDuration=!0}return e}function spring(r=springDefaults.visualDuration,e=springDefaults.bounce){const t=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:e}:r;let{restSpeed:_e,restDelta:Te}=t;const Ee=t.keyframes[0],xe=t.keyframes[t.keyframes.length-1],Pe={done:!1,value:Ee},{stiffness:Re,damping:ke,mass:Ce,duration:Se,velocity:Ae,isResolvedFromDuration:Ie}=getSpringOptions({...t,velocity:-millisecondsToSeconds(t.velocity||0)}),Me=Ae||0,Fe=ke/(2*Math.sqrt(Re*Ce)),Ve=xe-Ee,je=millisecondsToSeconds(Math.sqrt(Re/Ce)),Be=Math.abs(Ve)<5;_e||(_e=Be?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),Te||(Te=Be?springDefaults.restDelta.granular:springDefaults.restDelta.default);let qe;if(Fe<1){const Xe=calcAngularFreq(je,Fe);qe=Je=>{const Qe=Math.exp(-Fe*je*Je);return xe-Qe*((Me+Fe*je*Ve)/Xe*Math.sin(Xe*Je)+Ve*Math.cos(Xe*Je))}}else if(Fe===1)qe=Xe=>xe-Math.exp(-je*Xe)*(Ve+(Me+je*Ve)*Xe);else{const Xe=je*Math.sqrt(Fe*Fe-1);qe=Je=>{const Qe=Math.exp(-Fe*je*Je),Ke=Math.min(Xe*Je,300);return xe-Qe*((Me+Fe*je*Ve)*Math.sinh(Ke)+Xe*Ve*Math.cosh(Ke))/Xe}}const He={calculatedDuration:Ie&&Se||null,next:Xe=>{const Je=qe(Xe);if(Ie)Pe.done=Xe>=Se;else{let Qe=Xe===0?Me:0;Fe<1&&(Qe=Xe===0?secondsToMilliseconds(Me):calcGeneratorVelocity(qe,Xe,Je));const Ke=Math.abs(Qe)<=_e,Ye=Math.abs(xe-Je)<=Te;Pe.done=Ke&&Ye}return Pe.value=Pe.done?xe:Je,Pe},toString:()=>{const Xe=Math.min(calcGeneratorDuration(He),maxGeneratorDuration),Je=generateLinearEasing(Qe=>He.next(Xe*Qe).value,Xe,30);return Xe+"ms "+Je},toTransition:()=>{}};return He}spring.applyToOptions=r=>{const e=createGeneratorEasing(r,100,spring);return r.ease=e.ease,r.duration=secondsToMilliseconds(e.duration),r.type="keyframes",r};function inertia({keyframes:r,velocity:e=0,power:t=.8,timeConstant:_e=325,bounceDamping:Te=10,bounceStiffness:Ee=500,modifyTarget:xe,min:Pe,max:Re,restDelta:ke=.5,restSpeed:Ce}){const Se=r[0],Ae={done:!1,value:Se},Ie=Ke=>Pe!==void 0&&Ke<Pe||Re!==void 0&&Ke>Re,Me=Ke=>Pe===void 0?Re:Re===void 0||Math.abs(Pe-Ke)<Math.abs(Re-Ke)?Pe:Re;let Fe=t*e;const Ve=Se+Fe,je=xe===void 0?Ve:xe(Ve);je!==Ve&&(Fe=je-Se);const Be=Ke=>-Fe*Math.exp(-Ke/_e),qe=Ke=>je+Be(Ke),He=Ke=>{const Ye=Be(Ke),pn=qe(Ke);Ae.done=Math.abs(Ye)<=ke,Ae.value=Ae.done?je:pn};let Xe,Je;const Qe=Ke=>{Ie(Ae.value)&&(Xe=Ke,Je=spring({keyframes:[Ae.value,Me(Ae.value)],velocity:calcGeneratorVelocity(qe,Ke,Ae.value),damping:Te,stiffness:Ee,restDelta:ke,restSpeed:Ce}))};return Qe(0),{calculatedDuration:null,next:Ke=>{let Ye=!1;return!Je&&Xe===void 0&&(Ye=!0,He(Ke),Qe(Ke)),Xe!==void 0&&Ke>=Xe?Je.next(Ke-Xe):(!Ye&&He(Ke),Ae)}}}function createMixers(r,e,t){const _e=[],Te=t||MotionGlobalConfig.mix||mix,Ee=r.length-1;for(let xe=0;xe<Ee;xe++){let Pe=Te(r[xe],r[xe+1]);if(e){const Re=Array.isArray(e)?e[xe]||noop:e;Pe=pipe(Re,Pe)}_e.push(Pe)}return _e}function interpolate$1(r,e,{clamp:t=!0,ease:_e,mixer:Te}={}){const Ee=r.length;if(invariant(Ee===e.length),Ee===1)return()=>e[0];if(Ee===2&&e[0]===e[1])return()=>e[1];const xe=r[0]===r[1];r[0]>r[Ee-1]&&(r=[...r].reverse(),e=[...e].reverse());const Pe=createMixers(e,_e,Te),Re=Pe.length,ke=Ce=>{if(xe&&Ce<r[0])return e[0];let Se=0;if(Re>1)for(;Se<r.length-2&&!(Ce<r[Se+1]);Se++);const Ae=progress(r[Se],r[Se+1],Ce);return Pe[Se](Ae)};return t?Ce=>ke(clamp(r[0],r[Ee-1],Ce)):ke}function fillOffset(r,e){const t=r[r.length-1];for(let _e=1;_e<=e;_e++){const Te=progress(0,e,_e);r.push(mixNumber$1(t,1,Te))}}function defaultOffset$1(r){const e=[0];return fillOffset(e,r.length-1),e}function convertOffsetToTimes(r,e){return r.map(t=>t*e)}function defaultEasing(r,e){return r.map(()=>e||easeInOut).splice(0,r.length-1)}function keyframes({duration:r=300,keyframes:e,times:t,ease:_e="easeInOut"}){const Te=isEasingArray(_e)?_e.map(easingDefinitionToFunction):easingDefinitionToFunction(_e),Ee={done:!1,value:e[0]},xe=convertOffsetToTimes(t&&t.length===e.length?t:defaultOffset$1(e),r),Pe=interpolate$1(xe,e,{ease:Array.isArray(Te)?Te:defaultEasing(e,Te)});return{calculatedDuration:r,next:Re=>(Ee.value=Pe(Re),Ee.done=Re>=r,Ee)}}const isNotNull$1=r=>r!==null;function getFinalKeyframe$1(r,{repeat:e,repeatType:t="loop"},_e,Te=1){const Ee=r.filter(isNotNull$1),Pe=Te<0||e&&t!=="loop"&&e%2===1?0:Ee.length-1;return!Pe||_e===void 0?Ee[Pe]:_e}const transitionTypeMap={decay:inertia,inertia,tween:keyframes,keyframes,spring};function replaceTransitionType(r){typeof r.type=="string"&&(r.type=transitionTypeMap[r.type])}class WithPromise{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const percentToProgress=r=>r/100;class JSAnimation extends WithPromise{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==time.now()&&this.tick(time.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;replaceTransitionType(e);const{type:t=keyframes,repeat:_e=0,repeatDelay:Te=0,repeatType:Ee,velocity:xe=0}=e;let{keyframes:Pe}=e;const Re=t||keyframes;Re!==keyframes&&typeof Pe[0]!="number"&&(this.mixKeyframes=pipe(percentToProgress,mix(Pe[0],Pe[1])),Pe=[0,100]);const ke=Re({...e,keyframes:Pe});Ee==="mirror"&&(this.mirroredGenerator=Re({...e,keyframes:[...Pe].reverse(),velocity:-xe})),ke.calculatedDuration===null&&(ke.calculatedDuration=calcGeneratorDuration(ke));const{calculatedDuration:Ce}=ke;this.calculatedDuration=Ce,this.resolvedDuration=Ce+Te,this.totalDuration=this.resolvedDuration*(_e+1)-Te,this.generator=ke}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:_e,totalDuration:Te,mixKeyframes:Ee,mirroredGenerator:xe,resolvedDuration:Pe,calculatedDuration:Re}=this;if(this.startTime===null)return _e.next(0);const{delay:ke=0,keyframes:Ce,repeat:Se,repeatType:Ae,repeatDelay:Ie,type:Me,onUpdate:Fe,finalKeyframe:Ve}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-Te/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const je=this.currentTime-ke*(this.playbackSpeed>=0?1:-1),Be=this.playbackSpeed>=0?je<0:je>Te;this.currentTime=Math.max(je,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=Te);let qe=this.currentTime,He=_e;if(Se){const Ke=Math.min(this.currentTime,Te)/Pe;let Ye=Math.floor(Ke),pn=Ke%1;!pn&&Ke>=1&&(pn=1),pn===1&&Ye--,Ye=Math.min(Ye,Se+1),!!(Ye%2)&&(Ae==="reverse"?(pn=1-pn,Ie&&(pn-=Ie/Pe)):Ae==="mirror"&&(He=xe)),qe=clamp(0,1,pn)*Pe}const Xe=Be?{done:!1,value:Ce[0]}:He.next(qe);Ee&&(Xe.value=Ee(Xe.value));let{done:Je}=Xe;!Be&&Re!==null&&(Je=this.playbackSpeed>=0?this.currentTime>=Te:this.currentTime<=0);const Qe=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Je);return Qe&&Me!==inertia&&(Xe.value=getFinalKeyframe$1(Ce,this.options,Ve,this.speed)),Fe&&Fe(Xe.value),Qe&&this.finish(),Xe}then(e,t){return this.finished.then(e,t)}get duration(){return millisecondsToSeconds(this.calculatedDuration)}get time(){return millisecondsToSeconds(this.currentTime)}set time(e){e=secondsToMilliseconds(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(time.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=frameloopDriver,startTime:t}=this.options;this.driver||(this.driver=e(Te=>this.tick(Te))),this.options.onPlay?.();const _e=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=_e):this.holdTime!==null?this.startTime=_e-this.holdTime:this.startTime||(this.startTime=t??_e),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(time.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function fillWildcards(r){for(let e=1;e<r.length;e++)r[e]??(r[e]=r[e-1])}const radToDeg=r=>r*180/Math.PI,rotate=r=>{const e=radToDeg(Math.atan2(r[1],r[0]));return rebaseAngle(e)},matrix2dParsers={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:r=>(Math.abs(r[0])+Math.abs(r[3]))/2,rotate,rotateZ:rotate,skewX:r=>radToDeg(Math.atan(r[1])),skewY:r=>radToDeg(Math.atan(r[2])),skew:r=>(Math.abs(r[1])+Math.abs(r[2]))/2},rebaseAngle=r=>(r=r%360,r<0&&(r+=360),r),rotateZ=rotate,scaleX=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]),scaleY=r=>Math.sqrt(r[4]*r[4]+r[5]*r[5]),matrix3dParsers={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX,scaleY,scale:r=>(scaleX(r)+scaleY(r))/2,rotateX:r=>rebaseAngle(radToDeg(Math.atan2(r[6],r[5]))),rotateY:r=>rebaseAngle(radToDeg(Math.atan2(-r[2],r[0]))),rotateZ,rotate:rotateZ,skewX:r=>radToDeg(Math.atan(r[4])),skewY:r=>radToDeg(Math.atan(r[1])),skew:r=>(Math.abs(r[1])+Math.abs(r[4]))/2};function defaultTransformValue(r){return r.includes("scale")?1:0}function parseValueFromTransform(r,e){if(!r||r==="none")return defaultTransformValue(e);const t=r.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let _e,Te;if(t)_e=matrix3dParsers,Te=t;else{const Pe=r.match(/^matrix\(([-\d.e\s,]+)\)$/u);_e=matrix2dParsers,Te=Pe}if(!Te)return defaultTransformValue(e);const Ee=_e[e],xe=Te[1].split(",").map(convertTransformToNumber);return typeof Ee=="function"?Ee(xe):xe[Ee]}const readTransformValue=(r,e)=>{const{transform:t="none"}=getComputedStyle(r);return parseValueFromTransform(t,e)};function convertTransformToNumber(r){return parseFloat(r.trim())}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),isNumOrPxType=r=>r===number||r===px,transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(r=>!transformKeys.has(r));function removeNonTranslationalTransform(r){const e=[];return nonTranslationalTransformKeys.forEach(t=>{const _e=r.getValue(t);_e!==void 0&&(e.push([t,_e.get()]),_e.set(t.startsWith("scale")?1:0))}),e}const positionalValues={width:({x:r},{paddingLeft:e="0",paddingRight:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),height:({y:r},{paddingTop:e="0",paddingBottom:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),top:(r,{top:e})=>parseFloat(e),left:(r,{left:e})=>parseFloat(e),bottom:({y:r},{top:e})=>parseFloat(e)+(r.max-r.min),right:({x:r},{left:e})=>parseFloat(e)+(r.max-r.min),x:(r,{transform:e})=>parseValueFromTransform(e,"x"),y:(r,{transform:e})=>parseValueFromTransform(e,"y")};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1,isForced=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const r=Array.from(toResolve).filter(_e=>_e.needsMeasurement),e=new Set(r.map(_e=>_e.element)),t=new Map;e.forEach(_e=>{const Te=removeNonTranslationalTransform(_e);Te.length&&(t.set(_e,Te),_e.render())}),r.forEach(_e=>_e.measureInitialState()),e.forEach(_e=>{_e.render();const Te=t.get(_e);Te&&Te.forEach(([Ee,xe])=>{_e.getValue(Ee)?.set(xe)})}),r.forEach(_e=>_e.measureEndState()),r.forEach(_e=>{_e.suspendedScrollY!==void 0&&window.scrollTo(0,_e.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(r=>r.complete(isForced)),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){isForced=!0,readAllKeyframes(),measureAllKeyframes(),isForced=!1}class KeyframeResolver{constructor(e,t,_e,Te,Ee,xe=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=_e,this.motionValue=Te,this.element=Ee,this.isAsync=xe}scheduleResolve(){this.state="scheduled",this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:_e,motionValue:Te}=this;if(e[0]===null){const Ee=Te?.get(),xe=e[e.length-1];if(Ee!==void 0)e[0]=Ee;else if(_e&&t){const Pe=_e.readValue(t,xe);Pe!=null&&(e[0]=Pe)}e[0]===void 0&&(e[0]=xe),Te&&Ee===void 0&&Te.set(e[0])}fillWildcards(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),toResolve.delete(this)}cancel(){this.state==="scheduled"&&(toResolve.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const isCSSVar=r=>r.startsWith("--");function setStyle(r,e,t){isCSSVar(e)?r.style.setProperty(e,t):r.style[e]=t}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0),supportsFlags={};function memoSupports(r,e){const t=memo(r);return()=>supportsFlags[e]??t()}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cubicBezierAsString=([r,e,t,_e])=>`cubic-bezier(${r}, ${e}, ${t}, ${_e})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(r,e){if(r)return typeof r=="function"?supportsLinearEasing()?generateLinearEasing(r,e):"ease-out":isBezierDefinition(r)?cubicBezierAsString(r):Array.isArray(r)?r.map(t=>mapEasingToNativeEasing(t,e)||supportedWaapiEasing.easeOut):supportedWaapiEasing[r]}function startWaapiAnimation(r,e,t,{delay:_e=0,duration:Te=300,repeat:Ee=0,repeatType:xe="loop",ease:Pe="easeOut",times:Re}={},ke=void 0){const Ce={[e]:t};Re&&(Ce.offset=Re);const Se=mapEasingToNativeEasing(Pe,Te);Array.isArray(Se)&&(Ce.easing=Se);const Ae={delay:_e,duration:Te,easing:Array.isArray(Se)?"linear":Se,fill:"both",iterations:Ee+1,direction:xe==="reverse"?"alternate":"normal"};return ke&&(Ae.pseudoElement=ke),r.animate(Ce,Ae)}function isGenerator(r){return typeof r=="function"&&"applyToOptions"in r}function applyGeneratorOptions({type:r,...e}){return isGenerator(r)&&supportsLinearEasing()?r.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class NativeAnimation extends WithPromise{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:_e,keyframes:Te,pseudoElement:Ee,allowFlatten:xe=!1,finalKeyframe:Pe,onComplete:Re}=e;this.isPseudoElement=!!Ee,this.allowFlatten=xe,this.options=e,invariant(typeof e.type!="string");const ke=applyGeneratorOptions(e);this.animation=startWaapiAnimation(t,_e,Te,ke,Ee),ke.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!Ee){const Ce=getFinalKeyframe$1(Te,this.options,Pe,this.speed);this.updateMotionValue?this.updateMotionValue(Ce):setStyle(t,_e,Ce),this.animation.cancel()}Re?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return millisecondsToSeconds(Number(e))}get time(){return millisecondsToSeconds(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=secondsToMilliseconds(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&supportsScrollTimeline()?(this.animation.timeline=e,noop):t(this)}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(r){return r in unsupportedEasingFunctions}function replaceStringEasing(r){typeof r.ease=="string"&&isUnsupportedEase(r.ease)&&(r.ease=unsupportedEasingFunctions[r.ease])}const sampleDelta=10;class NativeAnimationExtended extends NativeAnimation{constructor(e){replaceStringEasing(e),replaceTransitionType(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:_e,onComplete:Te,element:Ee,...xe}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const Pe=new JSAnimation({...xe,autoplay:!1}),Re=secondsToMilliseconds(this.finishedTime??this.time);t.setWithVelocity(Pe.sample(Re-sampleDelta).value,Pe.sample(Re).value,sampleDelta),Pe.stop()}}const isAnimatable=(r,e)=>e==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(complex.test(r)||r==="0")&&!r.startsWith("url("));function hasKeyframesChanged(r){const e=r[0];if(r.length===1)return!0;for(let t=0;t<r.length;t++)if(r[t]!==e)return!0}function canAnimate(r,e,t,_e){const Te=r[0];if(Te===null)return!1;if(e==="display"||e==="visibility")return!0;const Ee=r[r.length-1],xe=isAnimatable(Te,e),Pe=isAnimatable(Ee,e);return!xe||!Pe?!1:hasKeyframesChanged(r)||(t==="spring"||isGenerator(t))&&_e}function isHTMLElement(r){return isObject(r)&&"offsetHeight"in r}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]),supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function supportsBrowserAnimation(r){const{motionValue:e,name:t,repeatDelay:_e,repeatType:Te,damping:Ee,type:xe}=r;if(!isHTMLElement(e?.owner?.current))return!1;const{onUpdate:Pe,transformTemplate:Re}=e.owner.getProps();return supportsWaapi()&&t&&acceleratedValues.has(t)&&(t!=="transform"||!Re)&&!Pe&&!_e&&Te!=="mirror"&&Ee!==0&&xe!=="inertia"}const MAX_RESOLVE_DELAY=40;class AsyncMotionValueAnimation extends WithPromise{constructor({autoplay:e=!0,delay:t=0,type:_e="keyframes",repeat:Te=0,repeatDelay:Ee=0,repeatType:xe="loop",keyframes:Pe,name:Re,motionValue:ke,element:Ce,...Se}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=time.now();const Ae={autoplay:e,delay:t,type:_e,repeat:Te,repeatDelay:Ee,repeatType:xe,name:Re,motionValue:ke,element:Ce,...Se},Ie=Ce?.KeyframeResolver||KeyframeResolver;this.keyframeResolver=new Ie(Pe,(Me,Fe,Ve)=>this.onKeyframesResolved(Me,Fe,Ae,!Ve),Re,ke,Ce),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,_e,Te){this.keyframeResolver=void 0;const{name:Ee,type:xe,velocity:Pe,delay:Re,isHandoff:ke,onUpdate:Ce}=_e;this.resolvedAt=time.now(),canAnimate(e,Ee,xe,Pe)||((MotionGlobalConfig.instantAnimations||!Re)&&Ce?.(getFinalKeyframe$1(e,_e,t)),e[0]=e[e.length-1],_e.duration=0,_e.repeat=0);const Ae={startTime:Te?this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,..._e,keyframes:e},Ie=!ke&&supportsBrowserAnimation(Ae)?new NativeAnimationExtended({...Ae,element:Ae.motionValue.owner.current}):new JSAnimation(Ae);Ie.finished.then(()=>this.notifyFinished()).catch(noop),this.pendingTimeline&&(this.stopTimeline=Ie.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=Ie}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),flushKeyframeResolvers()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(r){const e=splitCSSVariableRegex.exec(r);if(!e)return[,];const[,t,_e,Te]=e;return[`--${t??_e}`,Te]}function getVariableValue(r,e,t=1){const[_e,Te]=parseCSSVariable(r);if(!_e)return;const Ee=window.getComputedStyle(e).getPropertyValue(_e);if(Ee){const xe=Ee.trim();return isNumericalString(xe)?parseFloat(xe):xe}return isCSSVariableToken(Te)?getVariableValue(Te,e,t+1):Te}function getValueTransition(r,e){return r?.[e]??r?.default??r}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]),auto={test:r=>r==="auto",parse:r=>r},testValueType=r=>e=>e.test(r),dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=r=>dimensionValueTypes.find(testValueType(r));function isNone(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||isZeroValueString(r):!0}const maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(r){const[e,t]=r.slice(0,-1).split("(");if(e==="drop-shadow")return r;const[_e]=t.match(floatRegex)||[];if(!_e)return r;const Te=t.replace(_e,"");let Ee=maxDefaults.has(e)?1:0;return _e!==t&&(Ee*=100),e+"("+Ee+Te+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:r=>{const e=r.match(functionRegex);return e?e.map(applyDefaultFilter).join(" "):r}},int={...number,transform:Math.round},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px,...transformValueTypes,zIndex:int,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=r=>defaultValueTypes[r];function getAnimatableNone(r,e){let t=getDefaultValueType(r);return t!==filter&&(t=complex),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(r,e,t){let _e=0,Te;for(;_e<r.length&&!Te;){const Ee=r[_e];typeof Ee=="string"&&!invalidTemplates.has(Ee)&&analyseComplexValue(Ee).values.length&&(Te=r[_e]),_e++}if(Te&&t)for(const Ee of e)r[Ee]=getAnimatableNone(t,Te)}class DOMKeyframesResolver extends KeyframeResolver{constructor(e,t,_e,Te,Ee){super(e,t,_e,Te,Ee,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:_e}=this;if(!t||!t.current)return;super.readKeyframes();for(let Re=0;Re<e.length;Re++){let ke=e[Re];if(typeof ke=="string"&&(ke=ke.trim(),isCSSVariableToken(ke))){const Ce=getVariableValue(ke,t.current);Ce!==void 0&&(e[Re]=Ce),Re===e.length-1&&(this.finalKeyframe=ke)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(_e)||e.length!==2)return;const[Te,Ee]=e,xe=findDimensionValueType(Te),Pe=findDimensionValueType(Ee);if(xe!==Pe)if(isNumOrPxType(xe)&&isNumOrPxType(Pe))for(let Re=0;Re<e.length;Re++){const ke=e[Re];typeof ke=="string"&&(e[Re]=parseFloat(ke))}else positionalValues[_e]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,_e=[];for(let Te=0;Te<e.length;Te++)(e[Te]===null||isNone(e[Te]))&&_e.push(Te);_e.length&&makeNoneKeyframesAnimatable(e,_e,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:_e}=this;if(!e||!e.current)return;_e==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[_e](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const Te=t[t.length-1];Te!==void 0&&e.getValue(_e,Te).jump(Te,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:_e}=this;if(!e||!e.current)return;const Te=e.getValue(t);Te&&Te.jump(this.measuredOrigin,!1);const Ee=_e.length-1,xe=_e[Ee];_e[Ee]=positionalValues[t](e.measureViewportBox(),window.getComputedStyle(e.current)),xe!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=xe),this.removedTransforms?.length&&this.removedTransforms.forEach(([Pe,Re])=>{e.getValue(Pe).set(Re)}),this.resolveNoneKeyframes()}}function resolveElements(r,e,t){if(r instanceof EventTarget)return[r];if(typeof r=="string"){const Te=document.querySelectorAll(r);return Te?Array.from(Te):[]}return Array.from(r)}const getValueAsType=(r,e)=>e&&typeof r=="number"?e.transform(r):r,MAX_VELOCITY_DELTA=30,isFloat=r=>!isNaN(parseFloat(r)),collectMotionValues={current:void 0};class MotionValue{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(_e,Te=!0)=>{const Ee=time.now();if(this.updatedAt!==Ee&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(_e),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const xe of this.dependents)xe.dirty();Te&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=time.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new SubscriptionManager);const _e=this.events[e].add(t);return e==="change"?()=>{_e(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:_e}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,_e){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-_e}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return collectMotionValues.current&&collectMotionValues.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(r,e){return new MotionValue(r,e)}const{schedule:microtask}=createRenderBatcher(queueMicrotask,!1),isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function setDragLock(r){return r==="x"||r==="y"?isDragging[r]?null:(isDragging[r]=!0,()=>{isDragging[r]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function setupGesture(r,e){const t=resolveElements(r),_e=new AbortController,Te={passive:!0,...e,signal:_e.signal};return[t,Te,()=>_e.abort()]}function isValidHover(r){return!(r.pointerType==="touch"||isDragActive())}function hover(r,e,t={}){const[_e,Te,Ee]=setupGesture(r,t),xe=Pe=>{if(!isValidHover(Pe))return;const{target:Re}=Pe,ke=e(Re,Pe);if(typeof ke!="function"||!Re)return;const Ce=Se=>{isValidHover(Se)&&(ke(Se),Re.removeEventListener("pointerleave",Ce))};Re.addEventListener("pointerleave",Ce,Te)};return _e.forEach(Pe=>{Pe.addEventListener("pointerenter",xe,Te)}),Ee}const isNodeOrChild=(r,e)=>e?r===e?!0:isNodeOrChild(r,e.parentElement):!1,isPrimaryPointer=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(r){return focusableElements.has(r.tagName)||r.tabIndex!==-1}const isPressing=new WeakSet;function filterEvents(r){return e=>{e.key==="Enter"&&r(e)}}function firePointerEvent(r,e){r.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(r,e)=>{const t=r.currentTarget;if(!t)return;const _e=filterEvents(()=>{if(isPressing.has(t))return;firePointerEvent(t,"down");const Te=filterEvents(()=>{firePointerEvent(t,"up")}),Ee=()=>firePointerEvent(t,"cancel");t.addEventListener("keyup",Te,e),t.addEventListener("blur",Ee,e)});t.addEventListener("keydown",_e,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",_e),e)};function isValidPressEvent(r){return isPrimaryPointer(r)&&!isDragActive()}function press(r,e,t={}){const[_e,Te,Ee]=setupGesture(r,t),xe=Pe=>{const Re=Pe.currentTarget;if(!isValidPressEvent(Pe))return;isPressing.add(Re);const ke=e(Re,Pe),Ce=(Ie,Me)=>{window.removeEventListener("pointerup",Se),window.removeEventListener("pointercancel",Ae),isPressing.has(Re)&&isPressing.delete(Re),isValidPressEvent(Ie)&&typeof ke=="function"&&ke(Ie,{success:Me})},Se=Ie=>{Ce(Ie,Re===window||Re===document||t.useGlobalTarget||isNodeOrChild(Re,Ie.target))},Ae=Ie=>{Ce(Ie,!1)};window.addEventListener("pointerup",Se,Te),window.addEventListener("pointercancel",Ae,Te)};return _e.forEach(Pe=>{(t.useGlobalTarget?window:Pe).addEventListener("pointerdown",xe,Te),isHTMLElement(Pe)&&(Pe.addEventListener("focus",ke=>enableKeyboardPress(ke,Te)),!isElementKeyboardAccessible(Pe)&&!Pe.hasAttribute("tabindex")&&(Pe.tabIndex=0))}),Ee}function isSVGElement(r){return isObject(r)&&"ownerSVGElement"in r}const resizeHandlers=new WeakMap;let observer;const getSize=(r,e,t)=>(_e,Te)=>Te&&Te[0]?Te[0][r+"Size"]:isSVGElement(_e)&&"getBBox"in _e?_e.getBBox()[e]:_e[t],getWidth=getSize("inline","width","offsetWidth"),getHeight=getSize("block","height","offsetHeight");function notifyTarget({target:r,borderBoxSize:e}){resizeHandlers.get(r)?.forEach(t=>{t(r,{get width(){return getWidth(r,e)},get height(){return getHeight(r,e)}})})}function notifyAll(r){r.forEach(notifyTarget)}function createResizeObserver(){typeof ResizeObserver>"u"||(observer=new ResizeObserver(notifyAll))}function resizeElement(r,e){observer||createResizeObserver();const t=resolveElements(r);return t.forEach(_e=>{let Te=resizeHandlers.get(_e);Te||(Te=new Set,resizeHandlers.set(_e,Te)),Te.add(e),observer?.observe(_e)}),()=>{t.forEach(_e=>{const Te=resizeHandlers.get(_e);Te?.delete(e),Te?.size||observer?.unobserve(_e)})}}const windowCallbacks=new Set;let windowResizeHandler;function createWindowResizeHandler(){windowResizeHandler=()=>{const r={get width(){return window.innerWidth},get height(){return window.innerHeight}};windowCallbacks.forEach(e=>e(r))},window.addEventListener("resize",windowResizeHandler)}function resizeWindow(r){return windowCallbacks.add(r),windowResizeHandler||createWindowResizeHandler(),()=>{windowCallbacks.delete(r),!windowCallbacks.size&&typeof windowResizeHandler=="function"&&(window.removeEventListener("resize",windowResizeHandler),windowResizeHandler=void 0)}}function resize(r,e){return typeof r=="function"?resizeWindow(r):resizeElement(r,e)}function observeTimeline(r,e){let t;const _e=()=>{const{currentTime:Te}=e,xe=(Te===null?0:Te.value)/100;t!==xe&&r(xe),t=xe};return frame.preUpdate(_e,!0),()=>cancelFrame(_e)}function isSVGSVGElement(r){return isSVGElement(r)&&r.tagName==="svg"}function transform(...r){const e=!Array.isArray(r[0]),t=e?0:-1,_e=r[0+t],Te=r[1+t],Ee=r[2+t],xe=r[3+t],Pe=interpolate$1(Te,Ee,xe);return e?Pe(_e):Pe}const isMotionValue=r=>!!(r&&r.getVelocity),valueTypes=[...dimensionValueTypes,color,complex],findValueType=r=>valueTypes.find(testValueType(r)),MotionConfigContext=reactExports.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const _e=t.offsetParent,Te=isHTMLElement(_e)&&_e.offsetWidth||0,Ee=this.props.sizeRef.current;Ee.height=t.offsetHeight||0,Ee.width=t.offsetWidth||0,Ee.top=t.offsetTop,Ee.left=t.offsetLeft,Ee.right=Te-Ee.width-Ee.left}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:r,isPresent:e,anchorX:t,root:_e}){const Te=reactExports.useId(),Ee=reactExports.useRef(null),xe=reactExports.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:Pe}=reactExports.useContext(MotionConfigContext);return reactExports.useInsertionEffect(()=>{const{width:Re,height:ke,top:Ce,left:Se,right:Ae}=xe.current;if(e||!Ee.current||!Re||!ke)return;const Ie=t==="left"?`left: ${Se}`:`right: ${Ae}`;Ee.current.dataset.motionPopId=Te;const Me=document.createElement("style");Pe&&(Me.nonce=Pe);const Fe=_e??document.head;return Fe.appendChild(Me),Me.sheet&&Me.sheet.insertRule(`
          [data-motion-pop-id="${Te}"] {
            position: absolute !important;
            width: ${Re}px !important;
            height: ${ke}px !important;
            ${Ie}px !important;
            top: ${Ce}px !important;
          }
        `),()=>{Fe.removeChild(Me),Fe.contains(Me)&&Fe.removeChild(Me)}},[e]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:e,childRef:Ee,sizeRef:xe,children:reactExports.cloneElement(r,{ref:Ee})})}const PresenceChild=({children:r,initial:e,isPresent:t,onExitComplete:_e,custom:Te,presenceAffectsLayout:Ee,mode:xe,anchorX:Pe,root:Re})=>{const ke=useConstant(newChildrenMap),Ce=reactExports.useId();let Se=!0,Ae=reactExports.useMemo(()=>(Se=!1,{id:Ce,initial:e,isPresent:t,custom:Te,onExitComplete:Ie=>{ke.set(Ie,!0);for(const Me of ke.values())if(!Me)return;_e&&_e()},register:Ie=>(ke.set(Ie,!1),()=>ke.delete(Ie))}),[t,ke,_e]);return Ee&&Se&&(Ae={...Ae}),reactExports.useMemo(()=>{ke.forEach((Ie,Me)=>ke.set(Me,!1))},[t]),reactExports.useEffect(()=>{!t&&!ke.size&&_e&&_e()},[t]),xe==="popLayout"&&(r=jsxRuntimeExports.jsx(PopChild,{isPresent:t,anchorX:Pe,root:Re,children:r})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:Ae,children:r})};function newChildrenMap(){return new Map}function usePresence(r=!0){const e=reactExports.useContext(PresenceContext);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:_e,register:Te}=e,Ee=reactExports.useId();reactExports.useEffect(()=>{if(r)return Te(Ee)},[r]);const xe=reactExports.useCallback(()=>r&&_e&&_e(Ee),[Ee,_e,r]);return!t&&_e?[!1,xe]:[!0]}const getChildKey=r=>r.key||"";function onlyElements(r){const e=[];return reactExports.Children.forEach(r,t=>{reactExports.isValidElement(t)&&e.push(t)}),e}const AnimatePresence=({children:r,custom:e,initial:t=!0,onExitComplete:_e,presenceAffectsLayout:Te=!0,mode:Ee="sync",propagate:xe=!1,anchorX:Pe="left",root:Re})=>{const[ke,Ce]=usePresence(xe),Se=reactExports.useMemo(()=>onlyElements(r),[r]),Ae=xe&&!ke?[]:Se.map(getChildKey),Ie=reactExports.useRef(!0),Me=reactExports.useRef(Se),Fe=useConstant(()=>new Map),[Ve,je]=reactExports.useState(Se),[Be,qe]=reactExports.useState(Se);useIsomorphicLayoutEffect(()=>{Ie.current=!1,Me.current=Se;for(let Je=0;Je<Be.length;Je++){const Qe=getChildKey(Be[Je]);Ae.includes(Qe)?Fe.delete(Qe):Fe.get(Qe)!==!0&&Fe.set(Qe,!1)}},[Be,Ae.length,Ae.join("-")]);const He=[];if(Se!==Ve){let Je=[...Se];for(let Qe=0;Qe<Be.length;Qe++){const Ke=Be[Qe],Ye=getChildKey(Ke);Ae.includes(Ye)||(Je.splice(Qe,0,Ke),He.push(Ke))}return Ee==="wait"&&He.length&&(Je=He),qe(onlyElements(Je)),je(Se),null}const{forceRender:Xe}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Be.map(Je=>{const Qe=getChildKey(Je),Ke=xe&&!ke?!1:Se===Be||Ae.includes(Qe),Ye=()=>{if(Fe.has(Qe))Fe.set(Qe,!0);else return;let pn=!0;Fe.forEach(un=>{un||(pn=!1)}),pn&&(Xe?.(),qe(Me.current),xe&&Ce?.(),_e&&_e())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:Ke,initial:!Ie.current||t?void 0:!1,custom:e,presenceAffectsLayout:Te,mode:Ee,root:Re,onExitComplete:Ke?void 0:Ye,anchorX:Pe,children:Je},Qe)})})},LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const r in featureProps)featureDefinitions[r]={isEnabled:e=>featureProps[r].some(t=>!!e[t])};function loadFeatures(r){for(const e in r)featureDefinitions[e]={...featureDefinitions[e],...r[e]}}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||validMotionProps.has(r)}let shouldForward=r=>!isValidMotionProp(r);function loadExternalIsValidProp(r){typeof r=="function"&&(shouldForward=e=>e.startsWith("on")?!isValidMotionProp(e):r(e))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(r,e,t){const _e={};for(const Te in r)Te==="values"&&typeof r.values=="object"||(shouldForward(Te)||t===!0&&isValidMotionProp(Te)||!e&&!isValidMotionProp(Te)||r.draggable&&Te.startsWith("onDrag"))&&(_e[Te]=r[Te]);return _e}function createDOMMotionComponentProxy(r){if(typeof Proxy>"u")return r;const e=new Map,t=(..._e)=>r(..._e);return new Proxy(t,{get:(_e,Te)=>Te==="create"?r:(e.has(Te)||e.set(Te,r(Te)),e.get(Te))})}const MotionContext=reactExports.createContext({});function isAnimationControls(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}function isVariantLabel(r){return typeof r=="string"||Array.isArray(r)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(r){return isAnimationControls(r.animate)||variantProps.some(e=>isVariantLabel(r[e]))}function isVariantNode(r){return!!(isControllingVariants(r)||r.variants)}function getCurrentTreeVariants(r,e){if(isControllingVariants(r)){const{initial:t,animate:_e}=r;return{initial:t===!1||isVariantLabel(t)?t:void 0,animate:isVariantLabel(_e)?_e:void 0}}return r.inherit!==!1?e:{}}function useCreateMotionContext(r){const{initial:e,animate:t}=getCurrentTreeVariants(r,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:e,animate:t}),[variantLabelsAsDependency(e),variantLabelsAsDependency(t)])}function variantLabelsAsDependency(r){return Array.isArray(r)?r.join(" "):r}const motionComponentSymbol=Symbol.for("motionComponentSymbol");function isRefObject(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function useMotionRef(r,e,t){return reactExports.useCallback(_e=>{_e&&r.onMount&&r.onMount(_e),e&&(_e?e.mount(_e):e.unmount()),t&&(typeof t=="function"?t(_e):isRefObject(t)&&(t.current=_e))},[e])}const camelToDash=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId),SwitchLayoutGroupContext=reactExports.createContext({});function useVisualElement(r,e,t,_e,Te){const{visualElement:Ee}=reactExports.useContext(MotionContext),xe=reactExports.useContext(LazyContext),Pe=reactExports.useContext(PresenceContext),Re=reactExports.useContext(MotionConfigContext).reducedMotion,ke=reactExports.useRef(null);_e=_e||xe.renderer,!ke.current&&_e&&(ke.current=_e(r,{visualState:e,parent:Ee,props:t,presenceContext:Pe,blockInitialAnimation:Pe?Pe.initial===!1:!1,reducedMotionConfig:Re}));const Ce=ke.current,Se=reactExports.useContext(SwitchLayoutGroupContext);Ce&&!Ce.projection&&Te&&(Ce.type==="html"||Ce.type==="svg")&&createProjectionNode$1(ke.current,t,Te,Se);const Ae=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{Ce&&Ae.current&&Ce.update(t,Pe)});const Ie=t[optimizedAppearDataAttribute],Me=reactExports.useRef(!!Ie&&!window.MotionHandoffIsComplete?.(Ie)&&window.MotionHasOptimisedAnimation?.(Ie));return useIsomorphicLayoutEffect(()=>{Ce&&(Ae.current=!0,window.MotionIsMounted=!0,Ce.updateFeatures(),microtask.render(Ce.render),Me.current&&Ce.animationState&&Ce.animationState.animateChanges())}),reactExports.useEffect(()=>{Ce&&(!Me.current&&Ce.animationState&&Ce.animationState.animateChanges(),Me.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(Ie)}),Me.current=!1))}),Ce}function createProjectionNode$1(r,e,t,_e){const{layoutId:Te,layout:Ee,drag:xe,dragConstraints:Pe,layoutScroll:Re,layoutRoot:ke,layoutCrossfade:Ce}=e;r.projection=new t(r.latestValues,e["data-framer-portal-id"]?void 0:getClosestProjectingNode(r.parent)),r.projection.setOptions({layoutId:Te,layout:Ee,alwaysMeasureLayout:!!xe||Pe&&isRefObject(Pe),visualElement:r,animationType:typeof Ee=="string"?Ee:"both",initialPromotionConfig:_e,crossfade:Ce,layoutScroll:Re,layoutRoot:ke})}function getClosestProjectingNode(r){if(r)return r.options.allowProjection!==!1?r.projection:getClosestProjectingNode(r.parent)}function createRendererMotionComponent({preloadedFeatures:r,createVisualElement:e,useRender:t,useVisualState:_e,Component:Te}){r&&loadFeatures(r);function Ee(Pe,Re){let ke;const Ce={...reactExports.useContext(MotionConfigContext),...Pe,layoutId:useLayoutId(Pe)},{isStatic:Se}=Ce,Ae=useCreateMotionContext(Pe),Ie=_e(Pe,Se);if(!Se&&isBrowser){useStrictMode();const Me=getProjectionFunctionality(Ce);ke=Me.MeasureLayout,Ae.visualElement=useVisualElement(Te,Ie,Ce,e,Me.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:Ae,children:[ke&&Ae.visualElement?jsxRuntimeExports.jsx(ke,{visualElement:Ae.visualElement,...Ce}):null,t(Te,Pe,useMotionRef(Ie,Ae.visualElement,Re),Ie,Se,Ae.visualElement)]})}Ee.displayName=`motion.${typeof Te=="string"?Te:`create(${Te.displayName??Te.name??""})`}`;const xe=reactExports.forwardRef(Ee);return xe[motionComponentSymbol]=Te,xe}function useLayoutId({layoutId:r}){const e=reactExports.useContext(LayoutGroupContext).id;return e&&r!==void 0?e+"-"+r:r}function useStrictMode(r,e){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(r){const{drag:e,layout:t}=featureDefinitions;if(!e&&!t)return{};const _e={...e,...t};return{MeasureLayout:e?.isEnabled(r)||t?.isEnabled(r)?_e.MeasureLayout:void 0,ProjectionNode:_e.ProjectionNode}}const scaleCorrectors={};function addScaleCorrector(r){for(const e in r)scaleCorrectors[e]=r[e],isCSSVariableName(e)&&(scaleCorrectors[e].isCSSVariable=!0)}function isForcedMotionValue(r,{layout:e,layoutId:t}){return transformProps.has(r)||r.startsWith("origin")||(e||t!==void 0)&&(!!scaleCorrectors[r]||r==="opacity")}const translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(r,e,t){let _e="",Te=!0;for(let Ee=0;Ee<numTransforms;Ee++){const xe=transformPropOrder[Ee],Pe=r[xe];if(Pe===void 0)continue;let Re=!0;if(typeof Pe=="number"?Re=Pe===(xe.startsWith("scale")?1:0):Re=parseFloat(Pe)===0,!Re||t){const ke=getValueAsType(Pe,numberValueTypes[xe]);if(!Re){Te=!1;const Ce=translateAlias[xe]||xe;_e+=`${Ce}(${ke}) `}t&&(e[xe]=ke)}}return _e=_e.trim(),t?_e=t(e,Te?"":_e):Te&&(_e="none"),_e}function buildHTMLStyles(r,e,t){const{style:_e,vars:Te,transformOrigin:Ee}=r;let xe=!1,Pe=!1;for(const Re in e){const ke=e[Re];if(transformProps.has(Re)){xe=!0;continue}else if(isCSSVariableName(Re)){Te[Re]=ke;continue}else{const Ce=getValueAsType(ke,numberValueTypes[Re]);Re.startsWith("origin")?(Pe=!0,Ee[Re]=Ce):_e[Re]=Ce}}if(e.transform||(xe||t?_e.transform=buildTransform(e,r.transform,t):_e.transform&&(_e.transform="none")),Pe){const{originX:Re="50%",originY:ke="50%",originZ:Ce=0}=Ee;_e.transformOrigin=`${Re} ${ke} ${Ce}`}}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(r,e,t){for(const _e in e)!isMotionValue(e[_e])&&!isForcedMotionValue(_e,t)&&(r[_e]=e[_e])}function useInitialMotionValues({transformTemplate:r},e){return reactExports.useMemo(()=>{const t=createHtmlRenderState();return buildHTMLStyles(t,e,r),Object.assign({},t.vars,t.style)},[e])}function useStyle(r,e){const t=r.style||{},_e={};return copyRawValuesOnly(_e,t,r),Object.assign(_e,useInitialMotionValues(r,e)),_e}function useHTMLProps(r,e){const t={},_e=useStyle(r,e);return r.drag&&r.dragListener!==!1&&(t.draggable=!1,_e.userSelect=_e.WebkitUserSelect=_e.WebkitTouchCallout="none",_e.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(t.tabIndex=0),t.style=_e,t}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(r,e,t=1,_e=0,Te=!0){r.pathLength=1;const Ee=Te?dashKeys:camelKeys;r[Ee.offset]=px.transform(-_e);const xe=px.transform(e),Pe=px.transform(t);r[Ee.array]=`${xe} ${Pe}`}function buildSVGAttrs(r,{attrX:e,attrY:t,attrScale:_e,pathLength:Te,pathSpacing:Ee=1,pathOffset:xe=0,...Pe},Re,ke,Ce){if(buildHTMLStyles(r,Pe,ke),Re){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:Se,style:Ae}=r;Se.transform&&(Ae.transform=Se.transform,delete Se.transform),(Ae.transform||Se.transformOrigin)&&(Ae.transformOrigin=Se.transformOrigin??"50% 50%",delete Se.transformOrigin),Ae.transform&&(Ae.transformBox=Ce?.transformBox??"fill-box",delete Se.transformBox),e!==void 0&&(Se.x=e),t!==void 0&&(Se.y=t),_e!==void 0&&(Se.scale=_e),Te!==void 0&&buildSVGPath(Se,Te,Ee,xe,!1)}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=r=>typeof r=="string"&&r.toLowerCase()==="svg";function useSVGProps(r,e,t,_e){const Te=reactExports.useMemo(()=>{const Ee=createSvgRenderState();return buildSVGAttrs(Ee,e,isSVGTag(_e),r.transformTemplate,r.style),{...Ee.attrs,style:{...Ee.style}}},[e]);if(r.style){const Ee={};copyRawValuesOnly(Ee,r.style,r),Te.style={...Ee,...Te.style}}return Te}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(r){return typeof r!="string"||r.includes("-")?!1:!!(lowercaseSVGElements.indexOf(r)>-1||/[A-Z]/u.test(r))}function createUseRender(r=!1){return(t,_e,Te,{latestValues:Ee},xe)=>{const Re=(isSVGComponent(t)?useSVGProps:useHTMLProps)(_e,Ee,xe,t),ke=filterProps(_e,typeof t=="string",r),Ce=t!==reactExports.Fragment?{...ke,...Re,ref:Te}:{},{children:Se}=_e,Ae=reactExports.useMemo(()=>isMotionValue(Se)?Se.get():Se,[Se]);return reactExports.createElement(t,{...Ce,children:Ae})}}function getValueState(r){const e=[{},{}];return r?.values.forEach((t,_e)=>{e[0][_e]=t.get(),e[1][_e]=t.getVelocity()}),e}function resolveVariantFromProps(r,e,t,_e){if(typeof e=="function"){const[Te,Ee]=getValueState(_e);e=e(t!==void 0?t:r.custom,Te,Ee)}if(typeof e=="string"&&(e=r.variants&&r.variants[e]),typeof e=="function"){const[Te,Ee]=getValueState(_e);e=e(t!==void 0?t:r.custom,Te,Ee)}return e}function resolveMotionValue(r){return isMotionValue(r)?r.get():r}function makeState({scrapeMotionValuesFromProps:r,createRenderState:e},t,_e,Te){return{latestValues:makeLatestValues(t,_e,Te,r),renderState:e()}}const makeUseVisualState=r=>(e,t)=>{const _e=reactExports.useContext(MotionContext),Te=reactExports.useContext(PresenceContext),Ee=()=>makeState(r,e,_e,Te);return t?Ee():useConstant(Ee)};function makeLatestValues(r,e,t,_e){const Te={},Ee=_e(r,{});for(const Ae in Ee)Te[Ae]=resolveMotionValue(Ee[Ae]);let{initial:xe,animate:Pe}=r;const Re=isControllingVariants(r),ke=isVariantNode(r);e&&ke&&!Re&&r.inherit!==!1&&(xe===void 0&&(xe=e.initial),Pe===void 0&&(Pe=e.animate));let Ce=t?t.initial===!1:!1;Ce=Ce||xe===!1;const Se=Ce?Pe:xe;if(Se&&typeof Se!="boolean"&&!isAnimationControls(Se)){const Ae=Array.isArray(Se)?Se:[Se];for(let Ie=0;Ie<Ae.length;Ie++){const Me=resolveVariantFromProps(r,Ae[Ie]);if(Me){const{transitionEnd:Fe,transition:Ve,...je}=Me;for(const Be in je){let qe=je[Be];if(Array.isArray(qe)){const He=Ce?qe.length-1:0;qe=qe[He]}qe!==null&&(Te[Be]=qe)}for(const Be in Fe)Te[Be]=Fe[Be]}}}return Te}function scrapeMotionValuesFromProps$1(r,e,t){const{style:_e}=r,Te={};for(const Ee in _e)(isMotionValue(_e[Ee])||e.style&&isMotionValue(e.style[Ee])||isForcedMotionValue(Ee,r)||t?.getValue(Ee)?.liveStyle!==void 0)&&(Te[Ee]=_e[Ee]);return Te}const htmlMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState})};function scrapeMotionValuesFromProps(r,e,t){const _e=scrapeMotionValuesFromProps$1(r,e,t);for(const Te in r)if(isMotionValue(r[Te])||isMotionValue(e[Te])){const Ee=transformPropOrder.indexOf(Te)!==-1?"attr"+Te.charAt(0).toUpperCase()+Te.substring(1):Te;_e[Ee]=r[Te]}return _e}const svgMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState})};function createMotionComponentFactory(r,e){return function(_e,{forwardMotionProps:Te}={forwardMotionProps:!1}){const xe={...isSVGComponent(_e)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:r,useRender:createUseRender(Te),createVisualElement:e,Component:_e};return createRendererMotionComponent(xe)}}function resolveVariant(r,e,t){const _e=r.getProps();return resolveVariantFromProps(_e,e,t!==void 0?t:_e.custom,r)}const isKeyframesTarget=r=>Array.isArray(r);function setMotionValue(r,e,t){r.hasValue(e)?r.getValue(e).set(t):r.addValue(e,motionValue(t))}function resolveFinalValueInKeyframes(r){return isKeyframesTarget(r)?r[r.length-1]||0:r}function setTarget(r,e){const t=resolveVariant(r,e);let{transitionEnd:_e={},transition:Te={},...Ee}=t||{};Ee={...Ee,..._e};for(const xe in Ee){const Pe=resolveFinalValueInKeyframes(Ee[xe]);setMotionValue(r,xe,Pe)}}function isWillChangeMotionValue(r){return!!(isMotionValue(r)&&r.add)}function addValueToWillChange(r,e){const t=r.getValue("willChange");if(isWillChangeMotionValue(t))return t.add(e);if(!t&&MotionGlobalConfig.WillChange){const _e=new MotionGlobalConfig.WillChange("auto");r.addValue("willChange",_e),_e.add(e)}}function getOptimisedAppearId(r){return r.props[optimizedAppearDataAttribute]}const isNotNull=r=>r!==null;function getFinalKeyframe(r,{repeat:e,repeatType:t="loop"},_e){const Te=r.filter(isNotNull),Ee=e&&t!=="loop"&&e%2===1?0:Te.length-1;return Te[Ee]}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(r,{keyframes:e})=>e.length>2?keyframesTransition:transformProps.has(r)?r.startsWith("scale")?criticallyDampedSpring(e[1]):underDampedSpring:ease;function isTransitionDefined({when:r,delay:e,delayChildren:t,staggerChildren:_e,staggerDirection:Te,repeat:Ee,repeatType:xe,repeatDelay:Pe,from:Re,elapsed:ke,...Ce}){return!!Object.keys(Ce).length}const animateMotionValue=(r,e,t,_e={},Te,Ee)=>xe=>{const Pe=getValueTransition(_e,r)||{},Re=Pe.delay||_e.delay||0;let{elapsed:ke=0}=_e;ke=ke-secondsToMilliseconds(Re);const Ce={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...Pe,delay:-ke,onUpdate:Ae=>{e.set(Ae),Pe.onUpdate&&Pe.onUpdate(Ae)},onComplete:()=>{xe(),Pe.onComplete&&Pe.onComplete()},name:r,motionValue:e,element:Ee?void 0:Te};isTransitionDefined(Pe)||Object.assign(Ce,getDefaultTransition(r,Ce)),Ce.duration&&(Ce.duration=secondsToMilliseconds(Ce.duration)),Ce.repeatDelay&&(Ce.repeatDelay=secondsToMilliseconds(Ce.repeatDelay)),Ce.from!==void 0&&(Ce.keyframes[0]=Ce.from);let Se=!1;if((Ce.type===!1||Ce.duration===0&&!Ce.repeatDelay)&&(Ce.duration=0,Ce.delay===0&&(Se=!0)),(MotionGlobalConfig.instantAnimations||MotionGlobalConfig.skipAnimations)&&(Se=!0,Ce.duration=0,Ce.delay=0),Ce.allowFlatten=!Pe.type&&!Pe.ease,Se&&!Ee&&e.get()!==void 0){const Ae=getFinalKeyframe(Ce.keyframes,Pe);if(Ae!==void 0){frame.update(()=>{Ce.onUpdate(Ae),Ce.onComplete()});return}}return Pe.isSync?new JSAnimation(Ce):new AsyncMotionValueAnimation(Ce)};function shouldBlockAnimation({protectedKeys:r,needsAnimating:e},t){const _e=r.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,_e}function animateTarget(r,e,{delay:t=0,transitionOverride:_e,type:Te}={}){let{transition:Ee=r.getDefaultTransition(),transitionEnd:xe,...Pe}=e;_e&&(Ee=_e);const Re=[],ke=Te&&r.animationState&&r.animationState.getState()[Te];for(const Ce in Pe){const Se=r.getValue(Ce,r.latestValues[Ce]??null),Ae=Pe[Ce];if(Ae===void 0||ke&&shouldBlockAnimation(ke,Ce))continue;const Ie={delay:t,...getValueTransition(Ee||{},Ce)},Me=Se.get();if(Me!==void 0&&!Se.isAnimating&&!Array.isArray(Ae)&&Ae===Me&&!Ie.velocity)continue;let Fe=!1;if(window.MotionHandoffAnimation){const je=getOptimisedAppearId(r);if(je){const Be=window.MotionHandoffAnimation(je,Ce,frame);Be!==null&&(Ie.startTime=Be,Fe=!0)}}addValueToWillChange(r,Ce),Se.start(animateMotionValue(Ce,Se,Ae,r.shouldReduceMotion&&positionalKeys.has(Ce)?{type:!1}:Ie,r,Fe));const Ve=Se.animation;Ve&&Re.push(Ve)}return xe&&Promise.all(Re).then(()=>{frame.update(()=>{xe&&setTarget(r,xe)})}),Re}function animateVariant(r,e,t={}){const _e=resolveVariant(r,e,t.type==="exit"?r.presenceContext?.custom:void 0);let{transition:Te=r.getDefaultTransition()||{}}=_e||{};t.transitionOverride&&(Te=t.transitionOverride);const Ee=_e?()=>Promise.all(animateTarget(r,_e,t)):()=>Promise.resolve(),xe=r.variantChildren&&r.variantChildren.size?(Re=0)=>{const{delayChildren:ke=0,staggerChildren:Ce,staggerDirection:Se}=Te;return animateChildren(r,e,Re,ke,Ce,Se,t)}:()=>Promise.resolve(),{when:Pe}=Te;if(Pe){const[Re,ke]=Pe==="beforeChildren"?[Ee,xe]:[xe,Ee];return Re().then(()=>ke())}else return Promise.all([Ee(),xe(t.delay)])}function animateChildren(r,e,t=0,_e=0,Te=0,Ee=1,xe){const Pe=[],Re=r.variantChildren.size,ke=(Re-1)*Te,Ce=typeof _e=="function",Se=Ce?Ae=>_e(Ae,Re):Ee===1?(Ae=0)=>Ae*Te:(Ae=0)=>ke-Ae*Te;return Array.from(r.variantChildren).sort(sortByTreeOrder).forEach((Ae,Ie)=>{Ae.notify("AnimationStart",e),Pe.push(animateVariant(Ae,e,{...xe,delay:t+(Ce?0:_e)+Se(Ie)}).then(()=>Ae.notify("AnimationComplete",e)))}),Promise.all(Pe)}function sortByTreeOrder(r,e){return r.sortNodePosition(e)}function animateVisualElement(r,e,t={}){r.notify("AnimationStart",e);let _e;if(Array.isArray(e)){const Te=e.map(Ee=>animateVariant(r,Ee,t));_e=Promise.all(Te)}else if(typeof e=="string")_e=animateVariant(r,e,t);else{const Te=typeof e=="function"?resolveVariant(r,e,t.custom):e;_e=Promise.all(animateTarget(r,Te,t))}return _e.then(()=>{r.notify("AnimationComplete",e)})}function shallowCompare(r,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==r.length)return!1;for(let _e=0;_e<t;_e++)if(e[_e]!==r[_e])return!1;return!0}const numVariantProps=variantProps.length;function getVariantContext(r){if(!r)return;if(!r.isControllingVariants){const t=r.parent?getVariantContext(r.parent)||{}:{};return r.props.initial!==void 0&&(t.initial=r.props.initial),t}const e={};for(let t=0;t<numVariantProps;t++){const _e=variantProps[t],Te=r.props[_e];(isVariantLabel(Te)||Te===!1)&&(e[_e]=Te)}return e}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(r){return e=>Promise.all(e.map(({animation:t,options:_e})=>animateVisualElement(r,t,_e)))}function createAnimationState(r){let e=animateList(r),t=createState(),_e=!0;const Te=Re=>(ke,Ce)=>{const Se=resolveVariant(r,Ce,Re==="exit"?r.presenceContext?.custom:void 0);if(Se){const{transition:Ae,transitionEnd:Ie,...Me}=Se;ke={...ke,...Me,...Ie}}return ke};function Ee(Re){e=Re(r)}function xe(Re){const{props:ke}=r,Ce=getVariantContext(r.parent)||{},Se=[],Ae=new Set;let Ie={},Me=1/0;for(let Ve=0;Ve<numAnimationTypes;Ve++){const je=reversePriorityOrder[Ve],Be=t[je],qe=ke[je]!==void 0?ke[je]:Ce[je],He=isVariantLabel(qe),Xe=je===Re?Be.isActive:null;Xe===!1&&(Me=Ve);let Je=qe===Ce[je]&&qe!==ke[je]&&He;if(Je&&_e&&r.manuallyAnimateOnMount&&(Je=!1),Be.protectedKeys={...Ie},!Be.isActive&&Xe===null||!qe&&!Be.prevProp||isAnimationControls(qe)||typeof qe=="boolean")continue;const Qe=checkVariantsDidChange(Be.prevProp,qe);let Ke=Qe||je===Re&&Be.isActive&&!Je&&He||Ve>Me&&He,Ye=!1;const pn=Array.isArray(qe)?qe:[qe];let un=pn.reduce(Te(je),{});Xe===!1&&(un={});const{prevResolvedValues:fn={}}=Be,mn={...fn,...un},wn=In=>{Ke=!0,Ae.has(In)&&(Ye=!0,Ae.delete(In)),Be.needsAnimating[In]=!0;const Ln=r.getValue(In);Ln&&(Ln.liveStyle=!1)};for(const In in mn){const Ln=un[In],$n=fn[In];if(Ie.hasOwnProperty(In))continue;let Sn=!1;isKeyframesTarget(Ln)&&isKeyframesTarget($n)?Sn=!shallowCompare(Ln,$n):Sn=Ln!==$n,Sn?Ln!=null?wn(In):Ae.add(In):Ln!==void 0&&Ae.has(In)?wn(In):Be.protectedKeys[In]=!0}Be.prevProp=qe,Be.prevResolvedValues=un,Be.isActive&&(Ie={...Ie,...un}),_e&&r.blockInitialAnimation&&(Ke=!1),Ke&&(!(Je&&Qe)||Ye)&&Se.push(...pn.map(In=>({animation:In,options:{type:je}})))}if(Ae.size){const Ve={};if(typeof ke.initial!="boolean"){const je=resolveVariant(r,Array.isArray(ke.initial)?ke.initial[0]:ke.initial);je&&je.transition&&(Ve.transition=je.transition)}Ae.forEach(je=>{const Be=r.getBaseTarget(je),qe=r.getValue(je);qe&&(qe.liveStyle=!0),Ve[je]=Be??null}),Se.push({animation:Ve})}let Fe=!!Se.length;return _e&&(ke.initial===!1||ke.initial===ke.animate)&&!r.manuallyAnimateOnMount&&(Fe=!1),_e=!1,Fe?e(Se):Promise.resolve()}function Pe(Re,ke){if(t[Re].isActive===ke)return Promise.resolve();r.variantChildren?.forEach(Se=>Se.animationState?.setActive(Re,ke)),t[Re].isActive=ke;const Ce=xe(Re);for(const Se in t)t[Se].protectedKeys={};return Ce}return{animateChanges:xe,setActive:Pe,setAnimateFunction:Ee,getState:()=>t,reset:()=>{t=createState(),_e=!0}}}function checkVariantsDidChange(r,e){return typeof e=="string"?e!==r:Array.isArray(e)?!shallowCompare(e,r):!1}function createTypeState(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(e){this.isMounted=!1,this.node=e}update(){}}class AnimationFeature extends Feature{constructor(e){super(e),e.animationState||(e.animationState=createAnimationState(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();isAnimationControls(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:_e}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===_e)return;const Te=this.node.animationState.setActive("exit",!e);t&&!e&&Te.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function addDomEvent(r,e,t,_e={passive:!0}){return r.addEventListener(e,t,_e),()=>r.removeEventListener(e,t)}function extractEventInfo(r){return{point:{x:r.pageX,y:r.pageY}}}const addPointerInfo=r=>e=>isPrimaryPointer(e)&&r(e,extractEventInfo(e));function addPointerEvent(r,e,t,_e){return addDomEvent(r,e,addPointerInfo(t),_e)}function convertBoundingBoxToBox({top:r,left:e,right:t,bottom:_e}){return{x:{min:e,max:t},y:{min:r,max:_e}}}function convertBoxToBoundingBox({x:r,y:e}){return{top:e.min,right:r.max,bottom:e.max,left:r.min}}function transformBoxPoints(r,e){if(!e)return r;const t=e({x:r.left,y:r.top}),_e=e({x:r.right,y:r.bottom});return{top:t.y,left:t.x,bottom:_e.y,right:_e.x}}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(r){return r.max-r.min}function isNear(r,e,t){return Math.abs(r-e)<=t}function calcAxisDelta(r,e,t,_e=.5){r.origin=_e,r.originPoint=mixNumber$1(e.min,e.max,r.origin),r.scale=calcLength(t)/calcLength(e),r.translate=mixNumber$1(t.min,t.max,r.origin)-r.originPoint,(r.scale>=SCALE_MIN&&r.scale<=SCALE_MAX||isNaN(r.scale))&&(r.scale=1),(r.translate>=TRANSLATE_MIN&&r.translate<=TRANSLATE_MAX||isNaN(r.translate))&&(r.translate=0)}function calcBoxDelta(r,e,t,_e){calcAxisDelta(r.x,e.x,t.x,_e?_e.originX:void 0),calcAxisDelta(r.y,e.y,t.y,_e?_e.originY:void 0)}function calcRelativeAxis(r,e,t){r.min=t.min+e.min,r.max=r.min+calcLength(e)}function calcRelativeBox(r,e,t){calcRelativeAxis(r.x,e.x,t.x),calcRelativeAxis(r.y,e.y,t.y)}function calcRelativeAxisPosition(r,e,t){r.min=e.min-t.min,r.max=r.min+calcLength(e)}function calcRelativePosition(r,e,t){calcRelativeAxisPosition(r.x,e.x,t.x),calcRelativeAxisPosition(r.y,e.y,t.y)}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()});function eachAxis(r){return[r("x"),r("y")]}function isIdentityScale(r){return r===void 0||r===1}function hasScale({scale:r,scaleX:e,scaleY:t}){return!isIdentityScale(r)||!isIdentityScale(e)||!isIdentityScale(t)}function hasTransform(r){return hasScale(r)||has2DTranslate(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function has2DTranslate(r){return is2DTranslate(r.x)||is2DTranslate(r.y)}function is2DTranslate(r){return r&&r!=="0%"}function scalePoint(r,e,t){const _e=r-t,Te=e*_e;return t+Te}function applyPointDelta(r,e,t,_e,Te){return Te!==void 0&&(r=scalePoint(r,Te,_e)),scalePoint(r,t,_e)+e}function applyAxisDelta(r,e=0,t=1,_e,Te){r.min=applyPointDelta(r.min,e,t,_e,Te),r.max=applyPointDelta(r.max,e,t,_e,Te)}function applyBoxDelta(r,{x:e,y:t}){applyAxisDelta(r.x,e.translate,e.scale,e.originPoint),applyAxisDelta(r.y,t.translate,t.scale,t.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(r,e,t,_e=!1){const Te=t.length;if(!Te)return;e.x=e.y=1;let Ee,xe;for(let Pe=0;Pe<Te;Pe++){Ee=t[Pe],xe=Ee.projectionDelta;const{visualElement:Re}=Ee.options;Re&&Re.props.style&&Re.props.style.display==="contents"||(_e&&Ee.options.layoutScroll&&Ee.scroll&&Ee!==Ee.root&&transformBox(r,{x:-Ee.scroll.offset.x,y:-Ee.scroll.offset.y}),xe&&(e.x*=xe.x.scale,e.y*=xe.y.scale,applyBoxDelta(r,xe)),_e&&hasTransform(Ee.latestValues)&&transformBox(r,Ee.latestValues))}e.x<TREE_SCALE_SNAP_MAX&&e.x>TREE_SCALE_SNAP_MIN&&(e.x=1),e.y<TREE_SCALE_SNAP_MAX&&e.y>TREE_SCALE_SNAP_MIN&&(e.y=1)}function translateAxis(r,e){r.min=r.min+e,r.max=r.max+e}function transformAxis(r,e,t,_e,Te=.5){const Ee=mixNumber$1(r.min,r.max,Te);applyAxisDelta(r,e,t,Ee,_e)}function transformBox(r,e){transformAxis(r.x,e.x,e.scaleX,e.scale,e.originX),transformAxis(r.y,e.y,e.scaleY,e.scale,e.originY)}function measureViewportBox(r,e){return convertBoundingBoxToBox(transformBoxPoints(r.getBoundingClientRect(),e))}function measurePageBox(r,e,t){const _e=measureViewportBox(r,t),{scroll:Te}=e;return Te&&(translateAxis(_e.x,Te.offset.x),translateAxis(_e.y,Te.offset.y)),_e}const getContextWindow=({current:r})=>r?r.ownerDocument.defaultView:null,distance=(r,e)=>Math.abs(r-e);function distance2D(r,e){const t=distance(r.x,e.x),_e=distance(r.y,e.y);return Math.sqrt(t**2+_e**2)}class PanSession{constructor(e,t,{transformPagePoint:_e,contextWindow:Te=window,dragSnapToOrigin:Ee=!1,distanceThreshold:xe=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Ae=getPanInfo(this.lastMoveEventInfo,this.history),Ie=this.startEvent!==null,Me=distance2D(Ae.offset,{x:0,y:0})>=this.distanceThreshold;if(!Ie&&!Me)return;const{point:Fe}=Ae,{timestamp:Ve}=frameData;this.history.push({...Fe,timestamp:Ve});const{onStart:je,onMove:Be}=this.handlers;Ie||(je&&je(this.lastMoveEvent,Ae),this.startEvent=this.lastMoveEvent),Be&&Be(this.lastMoveEvent,Ae)},this.handlePointerMove=(Ae,Ie)=>{this.lastMoveEvent=Ae,this.lastMoveEventInfo=transformPoint(Ie,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(Ae,Ie)=>{this.end();const{onEnd:Me,onSessionEnd:Fe,resumeAnimation:Ve}=this.handlers;if(this.dragSnapToOrigin&&Ve&&Ve(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const je=getPanInfo(Ae.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(Ie,this.transformPagePoint),this.history);this.startEvent&&Me&&Me(Ae,je),Fe&&Fe(Ae,je)},!isPrimaryPointer(e))return;this.dragSnapToOrigin=Ee,this.handlers=t,this.transformPagePoint=_e,this.distanceThreshold=xe,this.contextWindow=Te||window;const Pe=extractEventInfo(e),Re=transformPoint(Pe,this.transformPagePoint),{point:ke}=Re,{timestamp:Ce}=frameData;this.history=[{...ke,timestamp:Ce}];const{onSessionStart:Se}=t;Se&&Se(e,getPanInfo(Re,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(r,e){return e?{point:e(r.point)}:r}function subtractPoint(r,e){return{x:r.x-e.x,y:r.y-e.y}}function getPanInfo({point:r},e){return{point:r,delta:subtractPoint(r,lastDevicePoint(e)),offset:subtractPoint(r,startDevicePoint(e)),velocity:getVelocity(e,.1)}}function startDevicePoint(r){return r[0]}function lastDevicePoint(r){return r[r.length-1]}function getVelocity(r,e){if(r.length<2)return{x:0,y:0};let t=r.length-1,_e=null;const Te=lastDevicePoint(r);for(;t>=0&&(_e=r[t],!(Te.timestamp-_e.timestamp>secondsToMilliseconds(e)));)t--;if(!_e)return{x:0,y:0};const Ee=millisecondsToSeconds(Te.timestamp-_e.timestamp);if(Ee===0)return{x:0,y:0};const xe={x:(Te.x-_e.x)/Ee,y:(Te.y-_e.y)/Ee};return xe.x===1/0&&(xe.x=0),xe.y===1/0&&(xe.y=0),xe}function applyConstraints(r,{min:e,max:t},_e){return e!==void 0&&r<e?r=_e?mixNumber$1(e,r,_e.min):Math.max(r,e):t!==void 0&&r>t&&(r=_e?mixNumber$1(t,r,_e.max):Math.min(r,t)),r}function calcRelativeAxisConstraints(r,e,t){return{min:e!==void 0?r.min+e:void 0,max:t!==void 0?r.max+t-(r.max-r.min):void 0}}function calcRelativeConstraints(r,{top:e,left:t,bottom:_e,right:Te}){return{x:calcRelativeAxisConstraints(r.x,t,Te),y:calcRelativeAxisConstraints(r.y,e,_e)}}function calcViewportAxisConstraints(r,e){let t=e.min-r.min,_e=e.max-r.max;return e.max-e.min<r.max-r.min&&([t,_e]=[_e,t]),{min:t,max:_e}}function calcViewportConstraints(r,e){return{x:calcViewportAxisConstraints(r.x,e.x),y:calcViewportAxisConstraints(r.y,e.y)}}function calcOrigin(r,e){let t=.5;const _e=calcLength(r),Te=calcLength(e);return Te>_e?t=progress(e.min,e.max-_e,r.min):_e>Te&&(t=progress(r.min,r.max-Te,e.min)),clamp(0,1,t)}function rebaseAxisConstraints(r,e){const t={};return e.min!==void 0&&(t.min=e.min-r.min),e.max!==void 0&&(t.max=e.max-r.min),t}const defaultElastic=.35;function resolveDragElastic(r=defaultElastic){return r===!1?r=0:r===!0&&(r=defaultElastic),{x:resolveAxisElastic(r,"left","right"),y:resolveAxisElastic(r,"top","bottom")}}function resolveAxisElastic(r,e,t){return{min:resolvePointElastic(r,e),max:resolvePointElastic(r,t)}}function resolvePointElastic(r,e){return typeof r=="number"?r:r[e]||0}const elementDragControls=new WeakMap;class VisualElementDragControls{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:_e}={}){const{presenceContext:Te}=this.visualElement;if(Te&&Te.isPresent===!1)return;const Ee=Se=>{const{dragSnapToOrigin:Ae}=this.getProps();Ae?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(extractEventInfo(Se).point)},xe=(Se,Ae)=>{const{drag:Ie,dragPropagation:Me,onDragStart:Fe}=this.getProps();if(Ie&&!Me&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(Ie),!this.openDragLock))return;this.latestPointerEvent=Se,this.latestPanInfo=Ae,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(je=>{let Be=this.getAxisMotionValue(je).get()||0;if(percent.test(Be)){const{projection:qe}=this.visualElement;if(qe&&qe.layout){const He=qe.layout.layoutBox[je];He&&(Be=calcLength(He)*(parseFloat(Be)/100))}}this.originPoint[je]=Be}),Fe&&frame.postRender(()=>Fe(Se,Ae)),addValueToWillChange(this.visualElement,"transform");const{animationState:Ve}=this.visualElement;Ve&&Ve.setActive("whileDrag",!0)},Pe=(Se,Ae)=>{this.latestPointerEvent=Se,this.latestPanInfo=Ae;const{dragPropagation:Ie,dragDirectionLock:Me,onDirectionLock:Fe,onDrag:Ve}=this.getProps();if(!Ie&&!this.openDragLock)return;const{offset:je}=Ae;if(Me&&this.currentDirection===null){this.currentDirection=getCurrentDirection(je),this.currentDirection!==null&&Fe&&Fe(this.currentDirection);return}this.updateAxis("x",Ae.point,je),this.updateAxis("y",Ae.point,je),this.visualElement.render(),Ve&&Ve(Se,Ae)},Re=(Se,Ae)=>{this.latestPointerEvent=Se,this.latestPanInfo=Ae,this.stop(Se,Ae),this.latestPointerEvent=null,this.latestPanInfo=null},ke=()=>eachAxis(Se=>this.getAnimationState(Se)==="paused"&&this.getAxisMotionValue(Se).animation?.play()),{dragSnapToOrigin:Ce}=this.getProps();this.panSession=new PanSession(e,{onSessionStart:Ee,onStart:xe,onMove:Pe,onSessionEnd:Re,resumeAnimation:ke},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:Ce,distanceThreshold:_e,contextWindow:getContextWindow(this.visualElement)})}stop(e,t){const _e=e||this.latestPointerEvent,Te=t||this.latestPanInfo,Ee=this.isDragging;if(this.cancel(),!Ee||!Te||!_e)return;const{velocity:xe}=Te;this.startAnimation(xe);const{onDragEnd:Pe}=this.getProps();Pe&&frame.postRender(()=>Pe(_e,Te))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:_e}=this.getProps();!_e&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,_e){const{drag:Te}=this.getProps();if(!_e||!shouldDrag(e,Te,this.currentDirection))return;const Ee=this.getAxisMotionValue(e);let xe=this.originPoint[e]+_e[e];this.constraints&&this.constraints[e]&&(xe=applyConstraints(xe,this.constraints[e],this.elastic[e])),Ee.set(xe)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),_e=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,Te=this.constraints;e&&isRefObject(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&_e?this.constraints=calcRelativeConstraints(_e.layoutBox,e):this.constraints=!1,this.elastic=resolveDragElastic(t),Te!==this.constraints&&_e&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(Ee=>{this.constraints!==!1&&this.getAxisMotionValue(Ee)&&(this.constraints[Ee]=rebaseAxisConstraints(_e.layoutBox[Ee],this.constraints[Ee]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!isRefObject(e))return!1;const _e=e.current,{projection:Te}=this.visualElement;if(!Te||!Te.layout)return!1;const Ee=measurePageBox(_e,Te.root,this.visualElement.getTransformPagePoint());let xe=calcViewportConstraints(Te.layout.layoutBox,Ee);if(t){const Pe=t(convertBoxToBoundingBox(xe));this.hasMutatedConstraints=!!Pe,Pe&&(xe=convertBoundingBoxToBox(Pe))}return xe}startAnimation(e){const{drag:t,dragMomentum:_e,dragElastic:Te,dragTransition:Ee,dragSnapToOrigin:xe,onDragTransitionEnd:Pe}=this.getProps(),Re=this.constraints||{},ke=eachAxis(Ce=>{if(!shouldDrag(Ce,t,this.currentDirection))return;let Se=Re&&Re[Ce]||{};xe&&(Se={min:0,max:0});const Ae=Te?200:1e6,Ie=Te?40:1e7,Me={type:"inertia",velocity:_e?e[Ce]:0,bounceStiffness:Ae,bounceDamping:Ie,timeConstant:750,restDelta:1,restSpeed:10,...Ee,...Se};return this.startAxisValueAnimation(Ce,Me)});return Promise.all(ke).then(Pe)}startAxisValueAnimation(e,t){const _e=this.getAxisMotionValue(e);return addValueToWillChange(this.visualElement,e),_e.start(animateMotionValue(e,_e,0,t,this.visualElement,!1))}stopAnimation(){eachAxis(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){eachAxis(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,_e=this.visualElement.getProps(),Te=_e[t];return Te||this.visualElement.getValue(e,(_e.initial?_e.initial[e]:void 0)||0)}snapToCursor(e){eachAxis(t=>{const{drag:_e}=this.getProps();if(!shouldDrag(t,_e,this.currentDirection))return;const{projection:Te}=this.visualElement,Ee=this.getAxisMotionValue(t);if(Te&&Te.layout){const{min:xe,max:Pe}=Te.layout.layoutBox[t];Ee.set(e[t]-mixNumber$1(xe,Pe,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:_e}=this.visualElement;if(!isRefObject(t)||!_e||!this.constraints)return;this.stopAnimation();const Te={x:0,y:0};eachAxis(xe=>{const Pe=this.getAxisMotionValue(xe);if(Pe&&this.constraints!==!1){const Re=Pe.get();Te[xe]=calcOrigin({min:Re,max:Re},this.constraints[xe])}});const{transformTemplate:Ee}=this.visualElement.getProps();this.visualElement.current.style.transform=Ee?Ee({},""):"none",_e.root&&_e.root.updateScroll(),_e.updateLayout(),this.resolveConstraints(),eachAxis(xe=>{if(!shouldDrag(xe,e,null))return;const Pe=this.getAxisMotionValue(xe),{min:Re,max:ke}=this.constraints[xe];Pe.set(mixNumber$1(Re,ke,Te[xe]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const e=this.visualElement.current,t=addPointerEvent(e,"pointerdown",Re=>{const{drag:ke,dragListener:Ce=!0}=this.getProps();ke&&Ce&&this.start(Re)}),_e=()=>{const{dragConstraints:Re}=this.getProps();isRefObject(Re)&&Re.current&&(this.constraints=this.resolveRefConstraints())},{projection:Te}=this.visualElement,Ee=Te.addEventListener("measure",_e);Te&&!Te.layout&&(Te.root&&Te.root.updateScroll(),Te.updateLayout()),frame.read(_e);const xe=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),Pe=Te.addEventListener("didUpdate",({delta:Re,hasLayoutChanged:ke})=>{this.isDragging&&ke&&(eachAxis(Ce=>{const Se=this.getAxisMotionValue(Ce);Se&&(this.originPoint[Ce]+=Re[Ce].translate,Se.set(Se.get()+Re[Ce].translate))}),this.visualElement.render())});return()=>{xe(),t(),Ee(),Pe&&Pe()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:_e=!1,dragPropagation:Te=!1,dragConstraints:Ee=!1,dragElastic:xe=defaultElastic,dragMomentum:Pe=!0}=e;return{...e,drag:t,dragDirectionLock:_e,dragPropagation:Te,dragConstraints:Ee,dragElastic:xe,dragMomentum:Pe}}}function shouldDrag(r,e,t){return(e===!0||e===r)&&(t===null||t===r)}function getCurrentDirection(r,e=10){let t=null;return Math.abs(r.y)>e?t="y":Math.abs(r.x)>e&&(t="x"),t}class DragGesture extends Feature{constructor(e){super(e),this.removeGroupControls=noop,this.removeListeners=noop,this.controls=new VisualElementDragControls(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=r=>(e,t)=>{r&&frame.postRender(()=>r(e,t))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop}onPointerDown(e){this.session=new PanSession(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:_e,onPanEnd:Te}=this.node.getProps();return{onSessionStart:asyncHandler(e),onStart:asyncHandler(t),onMove:_e,onEnd:(Ee,xe)=>{delete this.session,Te&&frame.postRender(()=>Te(Ee,xe))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(r,e){return e.max===e.min?0:r/(e.max-e.min)*100}const correctBorderRadius={correct:(r,e)=>{if(!e.target)return r;if(typeof r=="string")if(px.test(r))r=parseFloat(r);else return r;const t=pixelsToPercent(r,e.target.x),_e=pixelsToPercent(r,e.target.y);return`${t}% ${_e}%`}},correctBoxShadow={correct:(r,{treeScale:e,projectionDelta:t})=>{const _e=r,Te=complex.parse(r);if(Te.length>5)return _e;const Ee=complex.createTransformer(r),xe=typeof Te[0]!="number"?1:0,Pe=t.x.scale*e.x,Re=t.y.scale*e.y;Te[0+xe]/=Pe,Te[1+xe]/=Re;const ke=mixNumber$1(Pe,Re,.5);return typeof Te[2+xe]=="number"&&(Te[2+xe]/=ke),typeof Te[3+xe]=="number"&&(Te[3+xe]/=ke),Ee(Te)}};let hasTakenAnySnapshot=!1;class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:_e,layoutId:Te}=this.props,{projection:Ee}=e;addScaleCorrector(defaultScaleCorrectors),Ee&&(t.group&&t.group.add(Ee),_e&&_e.register&&Te&&_e.register(Ee),hasTakenAnySnapshot&&Ee.root.didUpdate(),Ee.addEventListener("animationComplete",()=>{this.safeToRemove()}),Ee.setOptions({...Ee.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:_e,drag:Te,isPresent:Ee}=this.props,{projection:xe}=_e;return xe&&(xe.isPresent=Ee,hasTakenAnySnapshot=!0,Te||e.layoutDependency!==t||t===void 0||e.isPresent!==Ee?xe.willUpdate():this.safeToRemove(),e.isPresent!==Ee&&(Ee?xe.promote():xe.relegate()||frame.postRender(()=>{const Pe=xe.getStack();(!Pe||!Pe.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),microtask.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:_e}=this.props,{projection:Te}=e;Te&&(Te.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(Te),_e&&_e.deregister&&_e.deregister(Te))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function MeasureLayout(r){const[e,t]=usePresence(),_e=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...r,layoutGroup:_e,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:e,safeToRemove:t})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function animateSingleValue(r,e,t){const _e=isMotionValue(r)?r:motionValue(r);return _e.start(animateMotionValue("",_e,e,t)),_e.animation}const compareByDepth=(r,e)=>r.depth-e.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(e){addUniqueItem(this.children,e),this.isDirty=!0}remove(e){removeItem(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(e)}}function delay(r,e){const t=time.now(),_e=({timestamp:Te})=>{const Ee=Te-t;Ee>=e&&(cancelFrame(_e),r(Ee-e))};return frame.setup(_e,!0),()=>cancelFrame(_e)}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=r=>typeof r=="string"?parseFloat(r):r,isPx=r=>typeof r=="number"||px.test(r);function mixValues(r,e,t,_e,Te,Ee){Te?(r.opacity=mixNumber$1(0,t.opacity??1,easeCrossfadeIn(_e)),r.opacityExit=mixNumber$1(e.opacity??1,0,easeCrossfadeOut(_e))):Ee&&(r.opacity=mixNumber$1(e.opacity??1,t.opacity??1,_e));for(let xe=0;xe<numBorders;xe++){const Pe=`border${borders[xe]}Radius`;let Re=getRadius(e,Pe),ke=getRadius(t,Pe);if(Re===void 0&&ke===void 0)continue;Re||(Re=0),ke||(ke=0),Re===0||ke===0||isPx(Re)===isPx(ke)?(r[Pe]=Math.max(mixNumber$1(asNumber(Re),asNumber(ke),_e),0),(percent.test(ke)||percent.test(Re))&&(r[Pe]+="%")):r[Pe]=ke}(e.rotate||t.rotate)&&(r.rotate=mixNumber$1(e.rotate||0,t.rotate||0,_e))}function getRadius(r,e){return r[e]!==void 0?r[e]:r.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop);function compress(r,e,t){return _e=>_e<r?0:_e>e?1:t(progress(r,e,_e))}function copyAxisInto(r,e){r.min=e.min,r.max=e.max}function copyBoxInto(r,e){copyAxisInto(r.x,e.x),copyAxisInto(r.y,e.y)}function copyAxisDeltaInto(r,e){r.translate=e.translate,r.scale=e.scale,r.originPoint=e.originPoint,r.origin=e.origin}function removePointDelta(r,e,t,_e,Te){return r-=e,r=scalePoint(r,1/t,_e),Te!==void 0&&(r=scalePoint(r,1/Te,_e)),r}function removeAxisDelta(r,e=0,t=1,_e=.5,Te,Ee=r,xe=r){if(percent.test(e)&&(e=parseFloat(e),e=mixNumber$1(xe.min,xe.max,e/100)-xe.min),typeof e!="number")return;let Pe=mixNumber$1(Ee.min,Ee.max,_e);r===Ee&&(Pe-=e),r.min=removePointDelta(r.min,e,t,Pe,Te),r.max=removePointDelta(r.max,e,t,Pe,Te)}function removeAxisTransforms(r,e,[t,_e,Te],Ee,xe){removeAxisDelta(r,e[t],e[_e],e[Te],e.scale,Ee,xe)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(r,e,t,_e){removeAxisTransforms(r.x,e,xKeys,t?t.x:void 0,_e?_e.x:void 0),removeAxisTransforms(r.y,e,yKeys,t?t.y:void 0,_e?_e.y:void 0)}function isAxisDeltaZero(r){return r.translate===0&&r.scale===1}function isDeltaZero(r){return isAxisDeltaZero(r.x)&&isAxisDeltaZero(r.y)}function axisEquals(r,e){return r.min===e.min&&r.max===e.max}function boxEquals(r,e){return axisEquals(r.x,e.x)&&axisEquals(r.y,e.y)}function axisEqualsRounded(r,e){return Math.round(r.min)===Math.round(e.min)&&Math.round(r.max)===Math.round(e.max)}function boxEqualsRounded(r,e){return axisEqualsRounded(r.x,e.x)&&axisEqualsRounded(r.y,e.y)}function aspectRatio(r){return calcLength(r.x)/calcLength(r.y)}function axisDeltaEquals(r,e){return r.translate===e.translate&&r.scale===e.scale&&r.originPoint===e.originPoint}class NodeStack{constructor(){this.members=[]}add(e){addUniqueItem(this.members,e),e.scheduleRender()}remove(e){if(removeItem(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(Te=>e===Te);if(t===0)return!1;let _e;for(let Te=t;Te>=0;Te--){const Ee=this.members[Te];if(Ee.isPresent!==!1){_e=Ee;break}}return _e?(this.promote(_e),!0):!1}promote(e,t){const _e=this.lead;if(e!==_e&&(this.prevLead=_e,this.lead=e,e.show(),_e)){_e.instance&&_e.scheduleRender(),e.scheduleRender(),e.resumeFrom=_e,t&&(e.resumeFrom.preserveOpacity=!0),_e.snapshot&&(e.snapshot=_e.snapshot,e.snapshot.latestValues=_e.animationValues||_e.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:Te}=e.options;Te===!1&&_e.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:_e}=e;t.onExitComplete&&t.onExitComplete(),_e&&_e.options.onExitComplete&&_e.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(r,e,t){let _e="";const Te=r.x.translate/e.x,Ee=r.y.translate/e.y,xe=t?.z||0;if((Te||Ee||xe)&&(_e=`translate3d(${Te}px, ${Ee}px, ${xe}px) `),(e.x!==1||e.y!==1)&&(_e+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:ke,rotate:Ce,rotateX:Se,rotateY:Ae,skewX:Ie,skewY:Me}=t;ke&&(_e=`perspective(${ke}px) ${_e}`),Ce&&(_e+=`rotate(${Ce}deg) `),Se&&(_e+=`rotateX(${Se}deg) `),Ae&&(_e+=`rotateY(${Ae}deg) `),Ie&&(_e+=`skewX(${Ie}deg) `),Me&&(_e+=`skewY(${Me}deg) `)}const Pe=r.x.scale*e.x,Re=r.y.scale*e.y;return(Pe!==1||Re!==1)&&(_e+=`scale(${Pe}, ${Re})`),_e||"none"}const transformAxes=["","X","Y","Z"],animationTarget=1e3;let id=0;function resetDistortingTransform(r,e,t,_e){const{latestValues:Te}=e;Te[r]&&(t[r]=Te[r],e.setStaticValue(r,0),_e&&(_e[r]=0))}function cancelTreeOptimisedTransformAnimations(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:e}=r.options;if(!e)return;const t=getOptimisedAppearId(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:Te,layoutId:Ee}=r.options;window.MotionCancelOptimisedAnimation(t,"transform",frame,!(Te||Ee))}const{parent:_e}=r;_e&&!_e.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(_e)}function createProjectionNode({attachResizeListener:r,defaultParent:e,measureScroll:t,checkIsScrollRoot:_e,resetTransform:Te}){return class{constructor(xe={},Pe=e?.()){this.id=id++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=xe,this.root=Pe?Pe.root||Pe:this,this.path=Pe?[...Pe.path,Pe]:[],this.parent=Pe,this.depth=Pe?Pe.depth+1:0;for(let Re=0;Re<this.path.length;Re++)this.path[Re].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(xe,Pe){return this.eventHandlers.has(xe)||this.eventHandlers.set(xe,new SubscriptionManager),this.eventHandlers.get(xe).add(Pe)}notifyListeners(xe,...Pe){const Re=this.eventHandlers.get(xe);Re&&Re.notify(...Pe)}hasListeners(xe){return this.eventHandlers.has(xe)}mount(xe){if(this.instance)return;this.isSVG=isSVGElement(xe)&&!isSVGSVGElement(xe),this.instance=xe;const{layoutId:Pe,layout:Re,visualElement:ke}=this.options;if(ke&&!ke.current&&ke.mount(xe),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(Re||Pe)&&(this.isLayoutDirty=!0),r){let Ce,Se=0;const Ae=()=>this.root.updateBlockedByResize=!1;frame.read(()=>{Se=window.innerWidth}),r(xe,()=>{const Ie=window.innerWidth;Ie!==Se&&(Se=Ie,this.root.updateBlockedByResize=!0,Ce&&Ce(),Ce=delay(Ae,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation)))})}Pe&&this.root.registerSharedNode(Pe,this),this.options.animate!==!1&&ke&&(Pe||Re)&&this.addEventListener("didUpdate",({delta:Ce,hasLayoutChanged:Se,hasRelativeLayoutChanged:Ae,layout:Ie})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const Me=this.options.transition||ke.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:Fe,onLayoutAnimationComplete:Ve}=ke.getProps(),je=!this.targetLayout||!boxEqualsRounded(this.targetLayout,Ie),Be=!Se&&Ae;if(this.options.layoutRoot||this.resumeFrom||Be||Se&&(je||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const qe={...getValueTransition(Me,"layout"),onPlay:Fe,onComplete:Ve};(ke.shouldReduceMotion||this.options.layoutRoot)&&(qe.delay=0,qe.type=!1),this.startAnimation(qe),this.setAnimationOrigin(Ce,Be)}else Se||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=Ie})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const xe=this.getStack();xe&&xe.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:xe}=this.options;return xe&&xe.getProps().transformTemplate}willUpdate(xe=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let Ce=0;Ce<this.path.length;Ce++){const Se=this.path[Ce];Se.shouldResetTransform=!0,Se.updateScroll("snapshot"),Se.options.layoutRoot&&Se.willUpdate(!1)}const{layoutId:Pe,layout:Re}=this.options;if(Pe===void 0&&!Re)return;const ke=this.getTransformTemplate();this.prevTransformTemplateValue=ke?ke(this.latestValues,""):void 0,this.updateSnapshot(),xe&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(clearIsLayoutDirty);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate)):this.nodes.forEach(clearIsLayoutDirty),this.clearAllSnapshots();const Pe=time.now();frameData.delta=clamp(0,1e3/60,Pe-frameData.timestamp),frameData.timestamp=Pe,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!calcLength(this.snapshot.measuredBox.x)&&!calcLength(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let Re=0;Re<this.path.length;Re++)this.path[Re].updateScroll();const xe=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:Pe}=this.options;Pe&&Pe.notify("LayoutMeasure",this.layout.layoutBox,xe?xe.layoutBox:void 0)}updateScroll(xe="measure"){let Pe=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===xe&&(Pe=!1),Pe&&this.instance){const Re=_e(this.instance);this.scroll={animationId:this.root.animationId,phase:xe,isRoot:Re,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:Re}}}resetTransform(){if(!Te)return;const xe=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,Pe=this.projectionDelta&&!isDeltaZero(this.projectionDelta),Re=this.getTransformTemplate(),ke=Re?Re(this.latestValues,""):void 0,Ce=ke!==this.prevTransformTemplateValue;xe&&this.instance&&(Pe||hasTransform(this.latestValues)||Ce)&&(Te(this.instance,ke),this.shouldResetTransform=!1,this.scheduleRender())}measure(xe=!0){const Pe=this.measurePageBox();let Re=this.removeElementScroll(Pe);return xe&&(Re=this.removeTransform(Re)),roundBox(Re),{animationId:this.root.animationId,measuredBox:Pe,layoutBox:Re,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:xe}=this.options;if(!xe)return createBox();const Pe=xe.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(checkNodeWasScrollRoot))){const{scroll:ke}=this.root;ke&&(translateAxis(Pe.x,ke.offset.x),translateAxis(Pe.y,ke.offset.y))}return Pe}removeElementScroll(xe){const Pe=createBox();if(copyBoxInto(Pe,xe),this.scroll?.wasRoot)return Pe;for(let Re=0;Re<this.path.length;Re++){const ke=this.path[Re],{scroll:Ce,options:Se}=ke;ke!==this.root&&Ce&&Se.layoutScroll&&(Ce.wasRoot&&copyBoxInto(Pe,xe),translateAxis(Pe.x,Ce.offset.x),translateAxis(Pe.y,Ce.offset.y))}return Pe}applyTransform(xe,Pe=!1){const Re=createBox();copyBoxInto(Re,xe);for(let ke=0;ke<this.path.length;ke++){const Ce=this.path[ke];!Pe&&Ce.options.layoutScroll&&Ce.scroll&&Ce!==Ce.root&&transformBox(Re,{x:-Ce.scroll.offset.x,y:-Ce.scroll.offset.y}),hasTransform(Ce.latestValues)&&transformBox(Re,Ce.latestValues)}return hasTransform(this.latestValues)&&transformBox(Re,this.latestValues),Re}removeTransform(xe){const Pe=createBox();copyBoxInto(Pe,xe);for(let Re=0;Re<this.path.length;Re++){const ke=this.path[Re];if(!ke.instance||!hasTransform(ke.latestValues))continue;hasScale(ke.latestValues)&&ke.updateSnapshot();const Ce=createBox(),Se=ke.measurePageBox();copyBoxInto(Ce,Se),removeBoxTransforms(Pe,ke.latestValues,ke.snapshot?ke.snapshot.layoutBox:void 0,Ce)}return hasTransform(this.latestValues)&&removeBoxTransforms(Pe,this.latestValues),Pe}setTargetDelta(xe){this.targetDelta=xe,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(xe){this.options={...this.options,...xe,crossfade:xe.crossfade!==void 0?xe.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(xe=!1){const Pe=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=Pe.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=Pe.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=Pe.isSharedProjectionDirty);const Re=!!this.resumingFrom||this!==Pe;if(!(xe||Re&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:Ce,layoutId:Se}=this.options;if(!(!this.layout||!(Ce||Se))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const Ae=this.getClosestProjectingParent();Ae&&Ae.layout&&this.animationProgress!==1?(this.relativeParent=Ae,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,Ae.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const Ae=this.getClosestProjectingParent();Ae&&!!Ae.resumingFrom==!!this.resumingFrom&&!Ae.options.layoutScroll&&Ae.target&&this.animationProgress!==1?(this.relativeParent=Ae,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,Ae.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const xe=this.getLead(),Pe=!!this.resumingFrom||this!==xe;let Re=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(Re=!1),Pe&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(Re=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(Re=!1),Re)return;const{layout:ke,layoutId:Ce}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(ke||Ce))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const Se=this.treeScale.x,Ae=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,Pe),xe.layout&&!xe.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(xe.target=xe.layout.layoutBox,xe.targetWithTransforms=createBox());const{target:Ie}=xe;if(!Ie){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,Ie,this.latestValues),(this.treeScale.x!==Se||this.treeScale.y!==Ae||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",Ie))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(xe=!0){if(this.options.visualElement?.scheduleRender(),xe){const Pe=this.getStack();Pe&&Pe.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(xe,Pe=!1){const Re=this.snapshot,ke=Re?Re.latestValues:{},Ce={...this.latestValues},Se=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!Pe;const Ae=createBox(),Ie=Re?Re.source:void 0,Me=this.layout?this.layout.source:void 0,Fe=Ie!==Me,Ve=this.getStack(),je=!Ve||Ve.members.length<=1,Be=!!(Fe&&!je&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let qe;this.mixTargetDelta=He=>{const Xe=He/1e3;mixAxisDelta(Se.x,xe.x,Xe),mixAxisDelta(Se.y,xe.y,Xe),this.setTargetDelta(Se),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(Ae,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,Ae,Xe),qe&&boxEquals(this.relativeTarget,qe)&&(this.isProjectionDirty=!1),qe||(qe=createBox()),copyBoxInto(qe,this.relativeTarget)),Fe&&(this.animationValues=Ce,mixValues(Ce,ke,this.latestValues,Xe,Be,je)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Xe},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(xe){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=motionValue(0)),this.currentAnimation=animateSingleValue(this.motionValue,[0,1e3],{...xe,velocity:0,isSync:!0,onUpdate:Pe=>{this.mixTargetDelta(Pe),xe.onUpdate&&xe.onUpdate(Pe)},onStop:()=>{},onComplete:()=>{xe.onComplete&&xe.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const xe=this.getStack();xe&&xe.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const xe=this.getLead();let{targetWithTransforms:Pe,target:Re,layout:ke,latestValues:Ce}=xe;if(!(!Pe||!Re||!ke)){if(this!==xe&&this.layout&&ke&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,ke.layoutBox)){Re=this.target||createBox();const Se=calcLength(this.layout.layoutBox.x);Re.x.min=xe.target.x.min,Re.x.max=Re.x.min+Se;const Ae=calcLength(this.layout.layoutBox.y);Re.y.min=xe.target.y.min,Re.y.max=Re.y.min+Ae}copyBoxInto(Pe,Re),transformBox(Pe,Ce),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,Pe,Ce)}}registerSharedNode(xe,Pe){this.sharedNodes.has(xe)||this.sharedNodes.set(xe,new NodeStack),this.sharedNodes.get(xe).add(Pe);const ke=Pe.options.initialPromotionConfig;Pe.promote({transition:ke?ke.transition:void 0,preserveFollowOpacity:ke&&ke.shouldPreserveFollowOpacity?ke.shouldPreserveFollowOpacity(Pe):void 0})}isLead(){const xe=this.getStack();return xe?xe.lead===this:!0}getLead(){const{layoutId:xe}=this.options;return xe?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:xe}=this.options;return xe?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:xe}=this.options;if(xe)return this.root.sharedNodes.get(xe)}promote({needsReset:xe,transition:Pe,preserveFollowOpacity:Re}={}){const ke=this.getStack();ke&&ke.promote(this,Re),xe&&(this.projectionDelta=void 0,this.needsReset=!0),Pe&&this.setOptions({transition:Pe})}relegate(){const xe=this.getStack();return xe?xe.relegate(this):!1}resetSkewAndRotation(){const{visualElement:xe}=this.options;if(!xe)return;let Pe=!1;const{latestValues:Re}=xe;if((Re.z||Re.rotate||Re.rotateX||Re.rotateY||Re.rotateZ||Re.skewX||Re.skewY)&&(Pe=!0),!Pe)return;const ke={};Re.z&&resetDistortingTransform("z",xe,ke,this.animationValues);for(let Ce=0;Ce<transformAxes.length;Ce++)resetDistortingTransform(`rotate${transformAxes[Ce]}`,xe,ke,this.animationValues),resetDistortingTransform(`skew${transformAxes[Ce]}`,xe,ke,this.animationValues);xe.render();for(const Ce in ke)xe.setStaticValue(Ce,ke[Ce]),this.animationValues&&(this.animationValues[Ce]=ke[Ce]);xe.scheduleRender()}applyProjectionStyles(xe,Pe){if(!this.instance||this.isSVG)return;if(!this.isVisible){xe.visibility="hidden";return}const Re=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,xe.visibility="",xe.opacity="",xe.pointerEvents=resolveMotionValue(Pe?.pointerEvents)||"",xe.transform=Re?Re(this.latestValues,""):"none";return}const ke=this.getLead();if(!this.projectionDelta||!this.layout||!ke.target){this.options.layoutId&&(xe.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,xe.pointerEvents=resolveMotionValue(Pe?.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(xe.transform=Re?Re({},""):"none",this.hasProjected=!1);return}xe.visibility="";const Ce=ke.animationValues||ke.latestValues;this.applyTransformsToTarget();let Se=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,Ce);Re&&(Se=Re(Ce,Se)),xe.transform=Se;const{x:Ae,y:Ie}=this.projectionDelta;xe.transformOrigin=`${Ae.origin*100}% ${Ie.origin*100}% 0`,ke.animationValues?xe.opacity=ke===this?Ce.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:Ce.opacityExit:xe.opacity=ke===this?Ce.opacity!==void 0?Ce.opacity:"":Ce.opacityExit!==void 0?Ce.opacityExit:0;for(const Me in scaleCorrectors){if(Ce[Me]===void 0)continue;const{correct:Fe,applyTo:Ve,isCSSVariable:je}=scaleCorrectors[Me],Be=Se==="none"?Ce[Me]:Fe(Ce[Me],ke);if(Ve){const qe=Ve.length;for(let He=0;He<qe;He++)xe[Ve[He]]=Be}else je?this.options.visualElement.renderState.vars[Me]=Be:xe[Me]=Be}this.options.layoutId&&(xe.pointerEvents=ke===this?resolveMotionValue(Pe?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(xe=>xe.currentAnimation?.stop()),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(r){r.updateLayout()}function notifyLayoutUpdate(r){const e=r.resumeFrom?.snapshot||r.snapshot;if(r.isLead()&&r.layout&&e&&r.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:_e}=r.layout,{animationType:Te}=r.options,Ee=e.source!==r.layout.source;Te==="size"?eachAxis(Ce=>{const Se=Ee?e.measuredBox[Ce]:e.layoutBox[Ce],Ae=calcLength(Se);Se.min=t[Ce].min,Se.max=Se.min+Ae}):shouldAnimatePositionOnly(Te,e.layoutBox,t)&&eachAxis(Ce=>{const Se=Ee?e.measuredBox[Ce]:e.layoutBox[Ce],Ae=calcLength(t[Ce]);Se.max=Se.min+Ae,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[Ce].max=r.relativeTarget[Ce].min+Ae)});const xe=createDelta();calcBoxDelta(xe,t,e.layoutBox);const Pe=createDelta();Ee?calcBoxDelta(Pe,r.applyTransform(_e,!0),e.measuredBox):calcBoxDelta(Pe,t,e.layoutBox);const Re=!isDeltaZero(xe);let ke=!1;if(!r.resumeFrom){const Ce=r.getClosestProjectingParent();if(Ce&&!Ce.resumeFrom){const{snapshot:Se,layout:Ae}=Ce;if(Se&&Ae){const Ie=createBox();calcRelativePosition(Ie,e.layoutBox,Se.layoutBox);const Me=createBox();calcRelativePosition(Me,t,Ae.layoutBox),boxEqualsRounded(Ie,Me)||(ke=!0),Ce.options.layoutRoot&&(r.relativeTarget=Me,r.relativeTargetOrigin=Ie,r.relativeParent=Ce)}}}r.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:Pe,layoutDelta:xe,hasLayoutChanged:Re,hasRelativeLayoutChanged:ke})}else if(r.isLead()){const{onExitComplete:t}=r.options;t&&t()}r.options.transition=void 0}function propagateDirtyNodes(r){r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function cleanDirtyNodes(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function clearSnapshot(r){r.clearSnapshot()}function clearMeasurements(r){r.clearMeasurements()}function clearIsLayoutDirty(r){r.isLayoutDirty=!1}function resetTransformStyle(r){const{visualElement:e}=r.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),r.resetTransform()}function finishAnimation(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function resolveTargetDelta(r){r.resolveTargetDelta()}function calcProjection(r){r.calcProjection()}function resetSkewAndRotation(r){r.resetSkewAndRotation()}function removeLeadSnapshots(r){r.removeLeadSnapshot()}function mixAxisDelta(r,e,t){r.translate=mixNumber$1(e.translate,0,t),r.scale=mixNumber$1(e.scale,1,t),r.origin=e.origin,r.originPoint=e.originPoint}function mixAxis(r,e,t,_e){r.min=mixNumber$1(e.min,t.min,_e),r.max=mixNumber$1(e.max,t.max,_e)}function mixBox(r,e,t,_e){mixAxis(r.x,e.x,t.x,_e),mixAxis(r.y,e.y,t.y,_e)}function hasOpacityCrossfade(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop;function roundAxis(r){r.min=roundPoint(r.min),r.max=roundPoint(r.max)}function roundBox(r){roundAxis(r.x),roundAxis(r.y)}function shouldAnimatePositionOnly(r,e,t){return r==="position"||r==="preserve-aspect"&&!isNear(aspectRatio(e),aspectRatio(t),.2)}function checkNodeWasScrollRoot(r){return r!==r.root&&r.scroll?.wasRoot}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(r,e)=>addDomEvent(r,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const r=new DocumentProjectionNode({});r.mount(window),r.setOptions({layoutScroll:!0}),rootProjectionNode.current=r}return rootProjectionNode.current},resetTransform:(r,e)=>{r.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(r,e,t){const{props:_e}=r;r.animationState&&_e.whileHover&&r.animationState.setActive("whileHover",t==="Start");const Te="onHover"+t,Ee=_e[Te];Ee&&frame.postRender(()=>Ee(e,extractEventInfo(e)))}class HoverGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=hover(e,(t,_e)=>(handleHoverEvent(this.node,_e,"Start"),Te=>handleHoverEvent(this.node,Te,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(r,e,t){const{props:_e}=r;if(r.current instanceof HTMLButtonElement&&r.current.disabled)return;r.animationState&&_e.whileTap&&r.animationState.setActive("whileTap",t==="Start");const Te="onTap"+(t==="End"?"":t),Ee=_e[Te];Ee&&frame.postRender(()=>Ee(e,extractEventInfo(e)))}class PressGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=press(e,(t,_e)=>(handlePressEvent(this.node,_e,"Start"),(Te,{success:Ee})=>handlePressEvent(this.node,Te,Ee?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=r=>{const e=observerCallbacks.get(r.target);e&&e(r)},fireAllObserverCallbacks=r=>{r.forEach(fireObserverCallback)};function initIntersectionObserver({root:r,...e}){const t=r||document;observers.has(t)||observers.set(t,{});const _e=observers.get(t),Te=JSON.stringify(e);return _e[Te]||(_e[Te]=new IntersectionObserver(fireAllObserverCallbacks,{root:r,...e})),_e[Te]}function observeIntersection(r,e,t){const _e=initIntersectionObserver(e);return observerCallbacks.set(r,t),_e.observe(r),()=>{observerCallbacks.delete(r),_e.unobserve(r)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:_e,amount:Te="some",once:Ee}=e,xe={root:t?t.current:void 0,rootMargin:_e,threshold:typeof Te=="number"?Te:thresholdNames[Te]},Pe=Re=>{const{isIntersecting:ke}=Re;if(this.isInView===ke||(this.isInView=ke,Ee&&!ke&&this.hasEnteredView))return;ke&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",ke);const{onViewportEnter:Ce,onViewportLeave:Se}=this.node.getProps(),Ae=ke?Ce:Se;Ae&&Ae(Re)};return observeIntersection(this.node.current,xe,Pe)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(e,t))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:r={}},{viewport:e={}}={}){return t=>r[t]!==e[t]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),e=()=>prefersReducedMotion.current=r.matches;r.addEventListener("change",e),e()}else prefersReducedMotion.current=!1}const visualElementStore=new WeakMap;function updateMotionValuesFromProps(r,e,t){for(const _e in e){const Te=e[_e],Ee=t[_e];if(isMotionValue(Te))r.addValue(_e,Te);else if(isMotionValue(Ee))r.addValue(_e,motionValue(Te,{owner:r}));else if(Ee!==Te)if(r.hasValue(_e)){const xe=r.getValue(_e);xe.liveStyle===!0?xe.jump(Te):xe.hasAnimated||xe.set(Te)}else{const xe=r.getStaticValue(_e);r.addValue(_e,motionValue(xe!==void 0?xe:Te,{owner:r}))}}for(const _e in t)e[_e]===void 0&&r.removeValue(_e);return e}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(e,t,_e){return{}}constructor({parent:e,props:t,presenceContext:_e,reducedMotionConfig:Te,blockInitialAnimation:Ee,visualState:xe},Pe={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const Ae=time.now();this.renderScheduledAt<Ae&&(this.renderScheduledAt=Ae,frame.render(this.render,!1,!0))};const{latestValues:Re,renderState:ke}=xe;this.latestValues=Re,this.baseTarget={...Re},this.initialValues=t.initial?{...Re}:{},this.renderState=ke,this.parent=e,this.props=t,this.presenceContext=_e,this.depth=e?e.depth+1:0,this.reducedMotionConfig=Te,this.options=Pe,this.blockInitialAnimation=!!Ee,this.isControllingVariants=isControllingVariants(t),this.isVariantNode=isVariantNode(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:Ce,...Se}=this.scrapeMotionValuesFromProps(t,{},this);for(const Ae in Se){const Ie=Se[Ae];Re[Ae]!==void 0&&isMotionValue(Ie)&&Ie.set(Re[Ae],!1)}}mount(e){this.current=e,visualElementStore.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,_e)=>this.bindToMotionValue(_e,t)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const _e=transformProps.has(e);_e&&this.onBindTransform&&this.onBindTransform();const Te=t.on("change",Pe=>{this.latestValues[e]=Pe,this.props.onUpdate&&frame.preRender(this.notifyUpdate),_e&&this.projection&&(this.projection.isTransformDirty=!0)}),Ee=t.on("renderRequest",this.scheduleRender);let xe;window.MotionCheckAppearSync&&(xe=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{Te(),Ee(),xe&&xe(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in featureDefinitions){const t=featureDefinitions[e];if(!t)continue;const{isEnabled:_e,Feature:Te}=t;if(!this.features[e]&&Te&&_e(this.props)&&(this.features[e]=new Te(this)),this.features[e]){const Ee=this.features[e];Ee.isMounted?Ee.update():(Ee.mount(),Ee.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let _e=0;_e<propEventHandlers.length;_e++){const Te=propEventHandlers[_e];this.propEventSubscriptions[Te]&&(this.propEventSubscriptions[Te](),delete this.propEventSubscriptions[Te]);const Ee="on"+Te,xe=e[Ee];xe&&(this.propEventSubscriptions[Te]=this.on(Te,xe))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const _e=this.values.get(e);t!==_e&&(_e&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let _e=this.values.get(e);return _e===void 0&&t!==void 0&&(_e=motionValue(t===null?void 0:t,{owner:this}),this.addValue(e,_e)),_e}readValue(e,t){let _e=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return _e!=null&&(typeof _e=="string"&&(isNumericalString(_e)||isZeroValueString(_e))?_e=parseFloat(_e):!findValueType(_e)&&complex.test(t)&&(_e=getAnimatableNone(e,t)),this.setBaseTarget(e,isMotionValue(_e)?_e.get():_e)),isMotionValue(_e)?_e.get():_e}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let _e;if(typeof t=="string"||typeof t=="object"){const Ee=resolveVariantFromProps(this.props,t,this.presenceContext?.custom);Ee&&(_e=Ee[e])}if(t&&_e!==void 0)return _e;const Te=this.getBaseTargetFromProps(this.props,e);return Te!==void 0&&!isMotionValue(Te)?Te:this.initialValues[e]!==void 0&&_e===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new SubscriptionManager),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:_e}){delete t[e],delete _e[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;isMotionValue(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function renderHTML(r,{style:e,vars:t},_e,Te){const Ee=r.style;let xe;for(xe in e)Ee[xe]=e[xe];Te?.applyProjectionStyles(Ee,_e);for(xe in t)Ee.setProperty(xe,t[xe])}function getComputedStyle$1(r){return window.getComputedStyle(r)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(e,t){if(transformProps.has(t))return this.projection?.isProjecting?defaultTransformValue(t):readTransformValue(e,t);{const _e=getComputedStyle$1(e),Te=(isCSSVariableName(t)?_e.getPropertyValue(t):_e[t])||0;return typeof Te=="string"?Te.trim():Te}}measureInstanceViewportBox(e,{transformPagePoint:t}){return measureViewportBox(e,t)}build(e,t,_e){buildHTMLStyles(e,t,_e.transformTemplate)}scrapeMotionValuesFromProps(e,t,_e){return scrapeMotionValuesFromProps$1(e,t,_e)}}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(r,e,t,_e){renderHTML(r,e,void 0,_e);for(const Te in e.attrs)r.setAttribute(camelCaseAttributes.has(Te)?Te:camelToDash(Te),e.attrs[Te])}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(transformProps.has(t)){const _e=getDefaultValueType(t);return _e&&_e.default||0}return t=camelCaseAttributes.has(t)?t:camelToDash(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,_e){return scrapeMotionValuesFromProps(e,t,_e)}build(e,t,_e){buildSVGAttrs(e,t,this.isSVGTag,_e.transformTemplate,_e.style)}renderInstance(e,t,_e,Te){renderSVG(e,t,_e,Te)}mount(e){this.isSVGTag=isSVGTag(e.tagName),super.mount(e)}}const createDomVisualElement=(r,e)=>isSVGComponent(r)?new SVGVisualElement(e):new HTMLVisualElement(e,{allowProjection:r!==reactExports.Fragment}),createMotionComponent=createMotionComponentFactory({...animations,...gestureAnimations,...drag,...layout},createDomVisualElement),motion=createDOMMotionComponentProxy(createMotionComponent),maxElapsed=50,createAxisInfo=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),createScrollInfo=()=>({time:0,x:createAxisInfo(),y:createAxisInfo()}),keys={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function updateAxisInfo(r,e,t,_e){const Te=t[e],{length:Ee,position:xe}=keys[e],Pe=Te.current,Re=t.time;Te.current=r[`scroll${xe}`],Te.scrollLength=r[`scroll${Ee}`]-r[`client${Ee}`],Te.offset.length=0,Te.offset[0]=0,Te.offset[1]=Te.scrollLength,Te.progress=progress(0,Te.scrollLength,Te.current);const ke=_e-Re;Te.velocity=ke>maxElapsed?0:velocityPerSecond(Te.current-Pe,ke)}function updateScrollInfo(r,e,t){updateAxisInfo(r,"x",e,t),updateAxisInfo(r,"y",e,t),e.time=t}function calcInset(r,e){const t={x:0,y:0};let _e=r;for(;_e&&_e!==e;)if(isHTMLElement(_e))t.x+=_e.offsetLeft,t.y+=_e.offsetTop,_e=_e.offsetParent;else if(_e.tagName==="svg"){const Te=_e.getBoundingClientRect();_e=_e.parentElement;const Ee=_e.getBoundingClientRect();t.x+=Te.left-Ee.left,t.y+=Te.top-Ee.top}else if(_e instanceof SVGGraphicsElement){const{x:Te,y:Ee}=_e.getBBox();t.x+=Te,t.y+=Ee;let xe=null,Pe=_e.parentNode;for(;!xe;)Pe.tagName==="svg"&&(xe=Pe),Pe=_e.parentNode;_e=xe}else break;return t}const namedEdges={start:0,center:.5,end:1};function resolveEdge(r,e,t=0){let _e=0;if(r in namedEdges&&(r=namedEdges[r]),typeof r=="string"){const Te=parseFloat(r);r.endsWith("px")?_e=Te:r.endsWith("%")?r=Te/100:r.endsWith("vw")?_e=Te/100*document.documentElement.clientWidth:r.endsWith("vh")?_e=Te/100*document.documentElement.clientHeight:r=Te}return typeof r=="number"&&(_e=e*r),t+_e}const defaultOffset=[0,0];function resolveOffset(r,e,t,_e){let Te=Array.isArray(r)?r:defaultOffset,Ee=0,xe=0;return typeof r=="number"?Te=[r,r]:typeof r=="string"&&(r=r.trim(),r.includes(" ")?Te=r.split(" "):Te=[r,namedEdges[r]?r:"0"]),Ee=resolveEdge(Te[0],t,_e),xe=resolveEdge(Te[1],e),Ee-xe}const ScrollOffset={All:[[0,0],[1,1]]},point={x:0,y:0};function getTargetSize(r){return"getBBox"in r&&r.tagName!=="svg"?r.getBBox():{width:r.clientWidth,height:r.clientHeight}}function resolveOffsets(r,e,t){const{offset:_e=ScrollOffset.All}=t,{target:Te=r,axis:Ee="y"}=t,xe=Ee==="y"?"height":"width",Pe=Te!==r?calcInset(Te,r):point,Re=Te===r?{width:r.scrollWidth,height:r.scrollHeight}:getTargetSize(Te),ke={width:r.clientWidth,height:r.clientHeight};e[Ee].offset.length=0;let Ce=!e[Ee].interpolate;const Se=_e.length;for(let Ae=0;Ae<Se;Ae++){const Ie=resolveOffset(_e[Ae],ke[xe],Re[xe],Pe[Ee]);!Ce&&Ie!==e[Ee].interpolatorOffsets[Ae]&&(Ce=!0),e[Ee].offset[Ae]=Ie}Ce&&(e[Ee].interpolate=interpolate$1(e[Ee].offset,defaultOffset$1(_e),{clamp:!1}),e[Ee].interpolatorOffsets=[...e[Ee].offset]),e[Ee].progress=clamp(0,1,e[Ee].interpolate(e[Ee].current))}function measure(r,e=r,t){if(t.x.targetOffset=0,t.y.targetOffset=0,e!==r){let _e=e;for(;_e&&_e!==r;)t.x.targetOffset+=_e.offsetLeft,t.y.targetOffset+=_e.offsetTop,_e=_e.offsetParent}t.x.targetLength=e===r?e.scrollWidth:e.clientWidth,t.y.targetLength=e===r?e.scrollHeight:e.clientHeight,t.x.containerLength=r.clientWidth,t.y.containerLength=r.clientHeight}function createOnScrollHandler(r,e,t,_e={}){return{measure:Te=>{measure(r,_e.target,t),updateScrollInfo(r,t,Te),(_e.offset||_e.target)&&resolveOffsets(r,t,_e)},notify:()=>e(t)}}const scrollListeners=new WeakMap,resizeListeners=new WeakMap,onScrollHandlers=new WeakMap,getEventTarget=r=>r===document.scrollingElement?window:r;function scrollInfo(r,{container:e=document.scrollingElement,...t}={}){if(!e)return noop;let _e=onScrollHandlers.get(e);_e||(_e=new Set,onScrollHandlers.set(e,_e));const Te=createScrollInfo(),Ee=createOnScrollHandler(e,r,Te,t);if(_e.add(Ee),!scrollListeners.has(e)){const Pe=()=>{for(const Se of _e)Se.measure(frameData.timestamp);frame.preUpdate(Re)},Re=()=>{for(const Se of _e)Se.notify()},ke=()=>frame.read(Pe);scrollListeners.set(e,ke);const Ce=getEventTarget(e);window.addEventListener("resize",ke,{passive:!0}),e!==document.documentElement&&resizeListeners.set(e,resize(e,ke)),Ce.addEventListener("scroll",ke,{passive:!0}),ke()}const xe=scrollListeners.get(e);return frame.read(xe,!1,!0),()=>{cancelFrame(xe);const Pe=onScrollHandlers.get(e);if(!Pe||(Pe.delete(Ee),Pe.size))return;const Re=scrollListeners.get(e);scrollListeners.delete(e),Re&&(getEventTarget(e).removeEventListener("scroll",Re),resizeListeners.get(e)?.(),window.removeEventListener("resize",Re))}}const timelineCache=new Map;function scrollTimelineFallback(r){const e={value:0},t=scrollInfo(_e=>{e.value=_e[r.axis].progress*100},r);return{currentTime:e,cancel:t}}function getTimeline({source:r,container:e,...t}){const{axis:_e}=t;r&&(e=r);const Te=timelineCache.get(e)??new Map;timelineCache.set(e,Te);const Ee=t.target??"self",xe=Te.get(Ee)??{},Pe=_e+(t.offset??[]).join(",");return xe[Pe]||(xe[Pe]=!t.target&&supportsScrollTimeline()?new ScrollTimeline({source:e,axis:_e}):scrollTimelineFallback({container:e,...t})),xe[Pe]}function attachToAnimation(r,e){const t=getTimeline(e);return r.attachTimeline({timeline:e.target?void 0:t,observe:_e=>(_e.pause(),observeTimeline(Te=>{_e.time=_e.duration*Te},t))})}function isOnScrollWithInfo(r){return r.length===2}function attachToFunction(r,e){return isOnScrollWithInfo(r)?scrollInfo(t=>{r(t[e.axis].progress,t)},e):observeTimeline(r,getTimeline(e))}function scroll(r,{axis:e="y",container:t=document.scrollingElement,..._e}={}){if(!t)return noop;const Te={axis:e,container:t,..._e};return typeof r=="function"?attachToFunction(r,Te):attachToAnimation(r,Te)}const createScrollMotionValues=()=>({scrollX:motionValue(0),scrollY:motionValue(0),scrollXProgress:motionValue(0),scrollYProgress:motionValue(0)}),isRefPending=r=>r?!r.current:!1;function useScroll({container:r,target:e,...t}={}){const _e=useConstant(createScrollMotionValues),Te=reactExports.useRef(null),Ee=reactExports.useRef(!1),xe=reactExports.useCallback(()=>(Te.current=scroll((Pe,{x:Re,y:ke})=>{_e.scrollX.set(Re.current),_e.scrollXProgress.set(Re.progress),_e.scrollY.set(ke.current),_e.scrollYProgress.set(ke.progress)},{...t,container:r?.current||void 0,target:e?.current||void 0}),()=>{Te.current?.()}),[r,e,JSON.stringify(t.offset)]);return useIsomorphicLayoutEffect(()=>{if(Ee.current=!1,isRefPending(r)||isRefPending(e)){Ee.current=!0;return}else return xe()},[xe]),reactExports.useEffect(()=>{if(Ee.current)return invariant(!isRefPending(r)),invariant(!isRefPending(e)),xe()},[xe]),_e}function useMotionValue(r){const e=useConstant(()=>motionValue(r)),{isStatic:t}=reactExports.useContext(MotionConfigContext);if(t){const[,_e]=reactExports.useState(r);reactExports.useEffect(()=>e.on("change",_e),[])}return e}function useCombineMotionValues(r,e){const t=useMotionValue(e()),_e=()=>t.set(e());return _e(),useIsomorphicLayoutEffect(()=>{const Te=()=>frame.preRender(_e,!1,!0),Ee=r.map(xe=>xe.on("change",Te));return()=>{Ee.forEach(xe=>xe()),cancelFrame(_e)}}),t}function useComputed(r){collectMotionValues.current=[],r();const e=useCombineMotionValues(collectMotionValues.current,r);return collectMotionValues.current=void 0,e}function useTransform(r,e,t,_e){if(typeof r=="function")return useComputed(r);const Te=typeof e=="function"?e:transform(e,t,_e);return Array.isArray(r)?useListTransform(r,Te):useListTransform([r],([Ee])=>Te(Ee))}function useListTransform(r,e){const t=useConstant(()=>[]);return useCombineMotionValues(r,()=>{t.length=0;const _e=r.length;for(let Te=0;Te<_e;Te++)t[Te]=r[Te].get();return e(t)})}function SmartNotes(){const[r,e]=reactExports.useState([{from:"bot",text:"Hi! Paste your class notes and I’ll summarize and tag them for you."}]),[t,_e]=reactExports.useState(""),Te=async()=>{if(!t.trim())return;const xe={from:"user",text:t};e(Pe=>[...Pe,xe]),_e(""),e(Pe=>[...Pe,{from:"bot",text:"Thinking..."}]),setTimeout(()=>{const Pe={from:"bot",text:`✅ Summary:
- ${t.split(".").slice(0,3).map(Re=>Re.trim()).filter(Boolean).join(`
- `)}

🏷️ Tags: [Conceptual, Important, Notes]`};e(Re=>[...Re.slice(0,-1),Pe])},1e3)},Ee=xe=>{xe.key==="Enter"&&!xe.shiftKey&&(xe.preventDefault(),Te())};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-[#0a0a14] text-white flex flex-col",children:[jsxRuntimeExports.jsx("header",{className:"p-4 bg-[#12121c] text-center shadow-md text-xl font-bold text-purple-400",children:"📝 Smart Notes AI"}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-6 space-y-4",children:r.map((xe,Pe)=>jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`max-w-xl p-4 rounded-lg ${xe.from==="user"?"ml-auto bg-purple-600 text-white":"bg-[#1a1a2e] text-gray-200"}`,children:xe.text.split(`
`).map((Re,ke)=>jsxRuntimeExports.jsx("p",{children:Re},ke))},Pe))}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-[#0e0e1a] flex gap-2 border-t border-white/10",children:[jsxRuntimeExports.jsx("textarea",{value:t,onChange:xe=>_e(xe.target.value),onKeyDown:Ee,placeholder:"Paste your class notes or questions...",className:"flex-1 p-3 bg-[#12121c] rounded-lg resize-none text-white border border-white/10 outline-none",rows:2}),jsxRuntimeExports.jsx("button",{onClick:Te,className:"bg-purple-600 hover:bg-purple-700 p-3 rounded-lg text-white flex items-center gap-2",children:jsxRuntimeExports.jsx(ArrowRight,{})})]})]})}function dispatchCallback(r,e){r&&r(e)}function reverseDictionary(r){return Object.fromEntries(Object.entries(r).map(([e,t])=>[t,e]))}function escapeRegExp(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const Callable=class{constructor(){let r=function(...e){return r._call(...e)};return Object.setPrototypeOf(r,new.target.prototype)}_call(...r){throw Error("Must implement _call method in subclass")}};function isTypedArray(r){return r?.prototype?.__proto__?.constructor?.name==="TypedArray"}function isIntegralNumber(r){return Number.isInteger(r)||typeof r=="bigint"}function exists(r){return r!=null}function calculateDimensions(r){const e=[];let t=r;for(;Array.isArray(t);)e.push(t.length),t=t[0];return e}function pop(r,e,t=void 0){const _e=r[e];if(_e!==void 0)return delete r[e],_e;if(t===void 0)throw Error(`Key ${e} does not exist in object.`);return t}function mergeArrays(...r){return Array.prototype.concat.apply([],r)}function product(...r){return r.reduce((e,t)=>e.flatMap(_e=>t.map(Te=>[_e,Te])))}function calculateReflectOffset(r,e){return Math.abs((r+e)%(2*e)-e)}const sharp={},ONNX_NODE=Object.freeze(Object.defineProperty({__proto__:null,default:sharp},Symbol.toStringTag,{value:"Module"}));var ortWeb_min$1={exports:{}};const backends={},backendsSortedByPriority=[],registerBackend=(r,e,t)=>{if(e&&typeof e.init=="function"&&typeof e.createSessionHandler=="function"){const _e=backends[r];if(_e===void 0)backends[r]={backend:e,priority:t};else{if(_e.priority>t)return;if(_e.priority===t&&_e.backend!==e)throw new Error(`cannot register backend "${r}" using priority ${t}`)}if(t>=0){const Te=backendsSortedByPriority.indexOf(r);Te!==-1&&backendsSortedByPriority.splice(Te,1);for(let Ee=0;Ee<backendsSortedByPriority.length;Ee++)if(backends[backendsSortedByPriority[Ee]].priority<=t){backendsSortedByPriority.splice(Ee,0,r);return}backendsSortedByPriority.push(r)}return}throw new TypeError("not a valid backend")},resolveBackend=async r=>{const e=r.length===0?backendsSortedByPriority:r,t=[];for(const _e of e){const Te=backends[_e];if(Te){if(Te.initialized)return Te.backend;if(Te.aborted)continue;const Ee=!!Te.initPromise;try{return Ee||(Te.initPromise=Te.backend.init()),await Te.initPromise,Te.initialized=!0,Te.backend}catch(xe){Ee||t.push({name:_e,err:xe}),Te.aborted=!0}finally{delete Te.initPromise}}}throw new Error(`no available backend found. ERR: ${t.map(_e=>`[${_e.name}] ${_e.err}`).join(", ")}`)};class EnvImpl{constructor(){this.wasm={},this.webgl={},this.logLevelInternal="warning"}set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);this.logLevelInternal=e}}get logLevel(){return this.logLevelInternal}}const env$2=new EnvImpl,isBigInt64ArrayAvailable=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",isBigUint64ArrayAvailable=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function",NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);isBigInt64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("int64",BigInt64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigInt64Array,"int64"));isBigUint64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("uint64",BigUint64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigUint64Array,"uint64"));const calculateSize=r=>{let e=1;for(let t=0;t<r.length;t++){const _e=r[t];if(typeof _e!="number"||!Number.isSafeInteger(_e))throw new TypeError(`dims[${t}] must be an integer, got: ${_e}`);if(_e<0)throw new RangeError(`dims[${t}] must be a non-negative integer, got: ${_e}`);e*=_e}return e};let Tensor$2=class rc{constructor(e,t,_e){let Te,Ee,xe;if(typeof e=="string")if(Te=e,xe=_e,e==="string"){if(!Array.isArray(t))throw new TypeError("A string tensor's data must be a string array.");Ee=t}else{const Re=NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.get(e);if(Re===void 0)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(t))Ee=Re.from(t);else if(t instanceof Re)Ee=t;else throw new TypeError(`A ${Te} tensor's data must be type of ${Re}`)}else if(xe=t,Array.isArray(e)){if(e.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const Re=typeof e[0];if(Re==="string")Te="string",Ee=e;else if(Re==="boolean")Te="bool",Ee=Uint8Array.from(e);else throw new TypeError(`Invalid element type of data array: ${Re}.`)}else{const Re=NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.get(e.constructor);if(Re===void 0)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);Te=Re,Ee=e}if(xe===void 0)xe=[Ee.length];else if(!Array.isArray(xe))throw new TypeError("A tensor's dims must be a number array");const Pe=calculateSize(xe);if(Pe!==Ee.length)throw new Error(`Tensor's size(${Pe}) does not match data length(${Ee.length}).`);this.dims=xe,this.type=Te,this.data=Ee,this.size=Pe}static bufferToTensor(e,t){if(e===void 0)throw new Error("Image buffer must be defined");if(t.height===void 0||t.width===void 0)throw new Error("Image height and width must be defined");const{height:_e,width:Te}=t,Ee=t.norm;let xe,Pe;Ee===void 0||Ee.mean===void 0?xe=255:xe=Ee.mean,Ee===void 0||Ee.bias===void 0?Pe=0:Pe=Ee.bias;const Re=t.bitmapFormat!==void 0?t.bitmapFormat:"RGBA",ke=t.tensorFormat!==void 0&&t.tensorFormat!==void 0?t.tensorFormat:"RGB",Ce=_e*Te,Se=ke==="RGBA"?new Float32Array(Ce*4):new Float32Array(Ce*3);let Ae=4,Ie=0,Me=1,Fe=2,Ve=3,je=0,Be=Ce,qe=Ce*2,He=-1;Re==="RGB"&&(Ae=3,Ie=0,Me=1,Fe=2,Ve=-1),ke==="RGBA"?He=Ce*3:ke==="RBG"?(je=0,qe=Ce,Be=Ce*2):ke==="BGR"&&(qe=0,Be=Ce,je=Ce*2);for(let Je=0;Je<Ce;Je++,Ie+=Ae,Fe+=Ae,Me+=Ae,Ve+=Ae)Se[je++]=(e[Ie]+Pe)/xe,Se[Be++]=(e[Me]+Pe)/xe,Se[qe++]=(e[Fe]+Pe)/xe,He!==-1&&Ve!==-1&&(Se[He++]=(e[Ve]+Pe)/xe);return ke==="RGBA"?new rc("float32",Se,[1,4,_e,Te]):new rc("float32",Se,[1,3,_e,Te])}static async fromImage(e,t){const _e=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,Te=typeof ImageData<"u"&&e instanceof ImageData,Ee=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,xe=typeof String<"u"&&(e instanceof String||typeof e=="string");let Pe,Re={};if(_e){const ke=document.createElement("canvas"),Ce=ke.getContext("2d");if(Ce!=null){let Se=e.naturalHeight,Ae=e.naturalWidth;if(t!==void 0&&t.resizedHeight!==void 0&&t.resizedWidth!==void 0&&(Se=t.resizedHeight,Ae=t.resizedWidth),t!==void 0){if(Re=t,t.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");if(Re.tensorFormat="RGBA",t.height!==void 0&&t.height!==Se)throw new Error("Image input config height doesn't match HTMLImageElement height");if(Re.height=Se,t.width!==void 0&&t.width!==Ae)throw new Error("Image input config width doesn't match HTMLImageElement width");Re.width=Ae}else Re.tensorFormat="RGBA",Re.height=Se,Re.width=Ae;ke.width=Ae,ke.height=Se,Ce.drawImage(e,0,0,Ae,Se),Pe=Ce.getImageData(0,0,Ae,Se).data}else throw new Error("Can not access image data")}else if(Te){const ke="RGBA";let Ce,Se;if(t!==void 0&&t.resizedWidth!==void 0&&t.resizedHeight!==void 0?(Ce=t.resizedHeight,Se=t.resizedWidth):(Ce=e.height,Se=e.width),t!==void 0){if(Re=t,t.bitmapFormat!==void 0&&t.bitmapFormat!==ke)throw new Error("Image input config format must be RGBA for ImageData");Re.bitmapFormat="RGBA"}else Re.bitmapFormat="RGBA";if(Re.height=Ce,Re.width=Se,t!==void 0){const Ae=document.createElement("canvas");Ae.width=Se,Ae.height=Ce;const Ie=Ae.getContext("2d");if(Ie!=null)Ie.putImageData(e,0,0),Pe=Ie.getImageData(0,0,Se,Ce).data;else throw new Error("Can not access image data")}else Pe=e.data}else if(Ee){if(t===void 0)throw new Error("Please provide image config with format for Imagebitmap");if(t.bitmapFormat!==void 0)throw new Error("Image input config format must be defined for ImageBitmap");const ke=document.createElement("canvas").getContext("2d");if(ke!=null){const Ce=e.height,Se=e.width;if(ke.drawImage(e,0,0,Se,Ce),Pe=ke.getImageData(0,0,Se,Ce).data,t!==void 0){if(t.height!==void 0&&t.height!==Ce)throw new Error("Image input config height doesn't match ImageBitmap height");if(Re.height=Ce,t.width!==void 0&&t.width!==Se)throw new Error("Image input config width doesn't match ImageBitmap width");Re.width=Se}else Re.height=Ce,Re.width=Se;return rc.bufferToTensor(Pe,Re)}else throw new Error("Can not access image data")}else{if(xe)return new Promise((ke,Ce)=>{const Se=document.createElement("canvas"),Ae=Se.getContext("2d");if(!e||!Ae)return Ce();const Ie=new Image;Ie.crossOrigin="Anonymous",Ie.src=e,Ie.onload=()=>{Se.width=Ie.width,Se.height=Ie.height,Ae.drawImage(Ie,0,0,Se.width,Se.height);const Me=Ae.getImageData(0,0,Se.width,Se.height);if(t!==void 0){if(t.height!==void 0&&t.height!==Se.height)throw new Error("Image input config height doesn't match ImageBitmap height");if(Re.height=Se.height,t.width!==void 0&&t.width!==Se.width)throw new Error("Image input config width doesn't match ImageBitmap width");Re.width=Se.width}else Re.height=Se.height,Re.width=Se.width;ke(rc.bufferToTensor(Me.data,Re))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(Pe!==void 0)return rc.bufferToTensor(Pe,Re);throw new Error("Input data provided is not supported - aborted tensor creation")}toImageData(e){var t,_e;const Te=document.createElement("canvas").getContext("2d");let Ee;if(Te!=null){const xe=this.dims[3],Pe=this.dims[2],Re=this.dims[1],ke=e!==void 0&&e.format!==void 0?e.format:"RGB",Ce=e!==void 0&&((t=e.norm)===null||t===void 0?void 0:t.mean)!==void 0?e.norm.mean:255,Se=e!==void 0&&((_e=e.norm)===null||_e===void 0?void 0:_e.bias)!==void 0?e.norm.bias:0,Ae=Pe*xe;if(e!==void 0){if(e.height!==void 0&&e.height!==Pe)throw new Error("Image output config height doesn't match tensor height");if(e.width!==void 0&&e.width!==xe)throw new Error("Image output config width doesn't match tensor width");if(e.format!==void 0&&Re===4&&e.format!=="RGBA"||Re===3&&e.format!=="RGB"&&e.format!=="BGR")throw new Error("Tensor format doesn't match input tensor dims")}const Ie=4;let Me=0,Fe=1,Ve=2,je=3,Be=0,qe=Ae,He=Ae*2,Xe=-1;ke==="RGBA"?(Be=0,qe=Ae,He=Ae*2,Xe=Ae*3):ke==="RGB"?(Be=0,qe=Ae,He=Ae*2):ke==="RBG"&&(Be=0,He=Ae,qe=Ae*2),Ee=Te.createImageData(xe,Pe);for(let Je=0;Je<Pe*xe;Me+=Ie,Fe+=Ie,Ve+=Ie,je+=Ie,Je++)Ee.data[Me]=(this.data[Be++]-Se)*Ce,Ee.data[Fe]=(this.data[qe++]-Se)*Ce,Ee.data[Ve]=(this.data[He++]-Se)*Ce,Ee.data[je]=Xe===-1?255:(this.data[Xe++]-Se)*Ce}else throw new Error("Can not access image data");return Ee}reshape(e){return new rc(this.type,this.data,e)}};const Tensor$1=Tensor$2;let InferenceSession$2=class bf{constructor(e){this.handler=e}async run(e,t,_e){const Te={};let Ee={};if(typeof e!="object"||e===null||e instanceof Tensor$1||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let xe=!0;if(typeof t=="object"){if(t===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(t instanceof Tensor$1)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(t)){if(t.length===0)throw new TypeError("'fetches' cannot be an empty array.");xe=!1;for(const ke of t){if(typeof ke!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(ke)===-1)throw new RangeError(`'fetches' contains invalid output name: ${ke}.`);Te[ke]=null}if(typeof _e=="object"&&_e!==null)Ee=_e;else if(typeof _e<"u")throw new TypeError("'options' must be an object.")}else{let ke=!1;const Ce=Object.getOwnPropertyNames(t);for(const Se of this.outputNames)if(Ce.indexOf(Se)!==-1){const Ae=t[Se];(Ae===null||Ae instanceof Tensor$1)&&(ke=!0,xe=!1,Te[Se]=Ae)}if(ke){if(typeof _e=="object"&&_e!==null)Ee=_e;else if(typeof _e<"u")throw new TypeError("'options' must be an object.")}else Ee=t}}else if(typeof t<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const ke of this.inputNames)if(typeof e[ke]>"u")throw new Error(`input '${ke}' is missing in 'feeds'.`);if(xe)for(const ke of this.outputNames)Te[ke]=null;const Pe=await this.handler.run(e,Te,Ee),Re={};for(const ke in Pe)Object.hasOwnProperty.call(Pe,ke)&&(Re[ke]=new Tensor$1(Pe[ke].type,Pe[ke].data,Pe[ke].dims));return Re}static async create(e,t,_e,Te){let Ee,xe={};if(typeof e=="string"){if(Ee=e,typeof t=="object"&&t!==null)xe=t;else if(typeof t<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof Uint8Array){if(Ee=e,typeof t=="object"&&t!==null)xe=t;else if(typeof t<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer){const Se=e;let Ae=0,Ie=e.byteLength;if(typeof t=="object"&&t!==null)xe=t;else if(typeof t=="number"){if(Ae=t,!Number.isSafeInteger(Ae))throw new RangeError("'byteOffset' must be an integer.");if(Ae<0||Ae>=Se.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${Se.byteLength}).`);if(Ie=e.byteLength-Ae,typeof _e=="number"){if(Ie=_e,!Number.isSafeInteger(Ie))throw new RangeError("'byteLength' must be an integer.");if(Ie<=0||Ae+Ie>Se.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${Se.byteLength-Ae}].`);if(typeof Te=="object"&&Te!==null)xe=Te;else if(typeof Te<"u")throw new TypeError("'options' must be an object.")}else if(typeof _e<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof t<"u")throw new TypeError("'options' must be an object.");Ee=new Uint8Array(Se,Ae,Ie)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");const Re=(xe.executionProviders||[]).map(Se=>typeof Se=="string"?Se:Se.name),Ce=await(await resolveBackend(Re)).createSessionHandler(Ee,xe);return new bf(Ce)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}};const InferenceSession$1=InferenceSession$2,lib=Object.freeze(Object.defineProperty({__proto__:null,InferenceSession:InferenceSession$1,Tensor:Tensor$1,env:env$2,registerBackend},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(lib);/*!
* ONNX Runtime Web v1.14.0
* Copyright (c) Microsoft Corporation. All rights reserved.
* Licensed under the MIT License.
*/var hasRequiredOrtWeb_min;function requireOrtWeb_min(){return hasRequiredOrtWeb_min||(hasRequiredOrtWeb_min=1,function(module,exports){(function(r,e){module.exports=e(require$$0)})(self,__WEBPACK_EXTERNAL_MODULE__1670__=>(()=>{var __webpack_modules__={3474:(r,e,t)=>{var _e,Te=(_e=(_e=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(Ee){function xe(){return $n.buffer!=Bn&&Lr($n.buffer),Tn}function Pe(){return $n.buffer!=Bn&&Lr($n.buffer),vn}function Re(){return $n.buffer!=Bn&&Lr($n.buffer),Un}function ke(){return $n.buffer!=Bn&&Lr($n.buffer),zn}function Ce(){return $n.buffer!=Bn&&Lr($n.buffer),Hn}var Se,Ae,Ie;Ee=Ee||{},Se||(Se=Ee!==void 0?Ee:{}),Se.ready=new Promise(function(An,Nn){Ae=An,Ie=Nn});var Me,Fe,Ve,je,Be,qe,He=Object.assign({},Se),Xe="./this.program",Je=(An,Nn)=>{throw Nn},Qe=typeof window=="object",Ke=typeof importScripts=="function",Ye=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",pn=Se.ENVIRONMENT_IS_PTHREAD||!1,un="";function fn(An){return Se.locateFile?Se.locateFile(An,un):un+An}if(Ye){let An;un=Ke?t(908).dirname(un)+"/":"//",qe=()=>{Be||(je=t(1384),Be=t(908))},Me=function(Nn,Gn){return qe(),Nn=Be.normalize(Nn),je.readFileSync(Nn,Gn?void 0:"utf8")},Ve=Nn=>((Nn=Me(Nn,!0)).buffer||(Nn=new Uint8Array(Nn)),Nn),Fe=(Nn,Gn,Qn)=>{qe(),Nn=Be.normalize(Nn),je.readFile(Nn,function(hr,vr){hr?Qn(hr):Gn(vr.buffer)})},1<process.argv.length&&(Xe=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(Nn){if(!(Nn instanceof Gr))throw Nn}),process.on("unhandledRejection",function(Nn){throw Nn}),Je=(Nn,Gn)=>{if($r())throw process.exitCode=Nn,Gn;Gn instanceof Gr||In("exiting due to exception: "+Gn),process.exit(Nn)},Se.inspect=function(){return"[Emscripten Module object]"};try{An=t(9925)}catch(Nn){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),Nn}t.g.Worker=An.Worker}else(Qe||Ke)&&(Ke?un=self.location.href:typeof document<"u"&&document.currentScript&&(un=document.currentScript.src),_e&&(un=_e),un=un.indexOf("blob:")!==0?un.substr(0,un.replace(/[?#].*/,"").lastIndexOf("/")+1):"",Ye||(Me=An=>{var Nn=new XMLHttpRequest;return Nn.open("GET",An,!1),Nn.send(null),Nn.responseText},Ke&&(Ve=An=>{var Nn=new XMLHttpRequest;return Nn.open("GET",An,!1),Nn.responseType="arraybuffer",Nn.send(null),new Uint8Array(Nn.response)}),Fe=(An,Nn,Gn)=>{var Qn=new XMLHttpRequest;Qn.open("GET",An,!0),Qn.responseType="arraybuffer",Qn.onload=()=>{Qn.status==200||Qn.status==0&&Qn.response?Nn(Qn.response):Gn()},Qn.onerror=Gn,Qn.send(null)}));Ye&&typeof performance>"u"&&(t.g.performance=t(6953).performance);var mn=console.log.bind(console),wn=console.warn.bind(console);Ye&&(qe(),mn=An=>je.writeSync(1,An+`
`),wn=An=>je.writeSync(2,An+`
`));var Pn,xn=Se.print||mn,In=Se.printErr||wn;Object.assign(Se,He),He=null,Se.thisProgram&&(Xe=Se.thisProgram),Se.quit&&(Je=Se.quit),Se.wasmBinary&&(Pn=Se.wasmBinary);var Ln=Se.noExitRuntime||!1;typeof WebAssembly!="object"&&ei("no native wasm support detected");var $n,Sn,Bn,Tn,vn,Un,zn,Hn,Jn=!1,nr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function or(An,Nn,Gn){var Qn=(Nn>>>=0)+Gn;for(Gn=Nn;An[Gn]&&!(Gn>=Qn);)++Gn;if(16<Gn-Nn&&An.buffer&&nr)return nr.decode(An.buffer instanceof SharedArrayBuffer?An.slice(Nn,Gn):An.subarray(Nn,Gn));for(Qn="";Nn<Gn;){var hr=An[Nn++];if(128&hr){var vr=63&An[Nn++];if((224&hr)==192)Qn+=String.fromCharCode((31&hr)<<6|vr);else{var Yr=63&An[Nn++];65536>(hr=(240&hr)==224?(15&hr)<<12|vr<<6|Yr:(7&hr)<<18|vr<<12|Yr<<6|63&An[Nn++])?Qn+=String.fromCharCode(hr):(hr-=65536,Qn+=String.fromCharCode(55296|hr>>10,56320|1023&hr))}}else Qn+=String.fromCharCode(hr)}return Qn}function Sr(An,Nn){return(An>>>=0)?or(Pe(),An,Nn):""}function kr(An,Nn,Gn,Qn){if(!(0<Qn))return 0;var hr=Gn>>>=0;Qn=Gn+Qn-1;for(var vr=0;vr<An.length;++vr){var Yr=An.charCodeAt(vr);if(55296<=Yr&&57343>=Yr&&(Yr=65536+((1023&Yr)<<10)|1023&An.charCodeAt(++vr)),127>=Yr){if(Gn>=Qn)break;Nn[Gn++>>>0]=Yr}else{if(2047>=Yr){if(Gn+1>=Qn)break;Nn[Gn++>>>0]=192|Yr>>6}else{if(65535>=Yr){if(Gn+2>=Qn)break;Nn[Gn++>>>0]=224|Yr>>12}else{if(Gn+3>=Qn)break;Nn[Gn++>>>0]=240|Yr>>18,Nn[Gn++>>>0]=128|Yr>>12&63}Nn[Gn++>>>0]=128|Yr>>6&63}Nn[Gn++>>>0]=128|63&Yr}}return Nn[Gn>>>0]=0,Gn-hr}function Vr(An){for(var Nn=0,Gn=0;Gn<An.length;++Gn){var Qn=An.charCodeAt(Gn);127>=Qn?Nn++:2047>=Qn?Nn+=2:55296<=Qn&&57343>=Qn?(Nn+=4,++Gn):Nn+=3}return Nn}function Lr(An){Bn=An,Se.HEAP8=Tn=new Int8Array(An),Se.HEAP16=new Int16Array(An),Se.HEAP32=Un=new Int32Array(An),Se.HEAPU8=vn=new Uint8Array(An),Se.HEAPU16=new Uint16Array(An),Se.HEAPU32=zn=new Uint32Array(An),Se.HEAPF32=new Float32Array(An),Se.HEAPF64=Hn=new Float64Array(An)}pn&&(Bn=Se.buffer);var Qr=Se.INITIAL_MEMORY||16777216;if(pn)$n=Se.wasmMemory,Bn=Se.buffer;else if(Se.wasmMemory)$n=Se.wasmMemory;else if(!(($n=new WebAssembly.Memory({initial:Qr/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw In("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),Ye&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");$n&&(Bn=$n.buffer),Qr=Bn.byteLength,Lr(Bn);var wr,Yn=[],gi=[],ui=[],Dr=[];function $r(){return Ln||!1}function Kr(){var An=Se.preRun.shift();Yn.unshift(An)}var Fr,li=0,yi=null;function ei(An){throw pn?postMessage({cmd:"onAbort",arg:An}):Se.onAbort&&Se.onAbort(An),In(An="Aborted("+An+")"),Jn=!0,An=new WebAssembly.RuntimeError(An+". Build with -sASSERTIONS for more info."),Ie(An),An}function fr(){return Fr.startsWith("data:application/octet-stream;base64,")}function Pr(){var An=Fr;try{if(An==Fr&&Pn)return new Uint8Array(Pn);if(Ve)return Ve(An);throw"both async and sync fetching of the wasm failed"}catch(Nn){ei(Nn)}}Fr="ort-wasm-threaded.wasm",fr()||(Fr=fn(Fr));var ti={};function Gr(An){this.name="ExitStatus",this.message="Program terminated with exit("+An+")",this.status=An}function oi(An){(An=fi.Vb[An])||ei(),fi.mc(An)}function Wr(An){var Nn=fi.Cc();if(!Nn)return 6;fi.ac.push(Nn),fi.Vb[An.Ub]=Nn,Nn.Ub=An.Ub;var Gn={cmd:"run",start_routine:An.Ic,arg:An.zc,pthread_ptr:An.Ub};return Nn.$b=()=>{Gn.time=performance.now(),Nn.postMessage(Gn,An.Nc)},Nn.loaded&&(Nn.$b(),delete Nn.$b),0}function Ci(An){if(pn)return ri(1,1,An);$r()||(fi.oc(),Se.onExit&&Se.onExit(An),Jn=!0),Je(An,new Gr(An))}function xi(An,Nn){if(!Nn&&pn)throw As(An),"unwind";$r()||pn||(na(),Di(ui),Ks(0),Wo[1].length&&io(1,10),Wo[2].length&&io(2,10),fi.oc()),Ci(An)}var fi={Yb:[],ac:[],qc:[],Vb:{},fc:function(){pn&&fi.Ec()},Pc:function(){},Ec:function(){fi.receiveObjectTransfer=fi.Gc,fi.threadInitTLS=fi.pc,fi.setExitStatus=fi.nc,Ln=!1},nc:function(){},oc:function(){for(var An of Object.values(fi.Vb))fi.mc(An);for(An of fi.Yb)An.terminate();fi.Yb=[]},mc:function(An){var Nn=An.Ub;delete fi.Vb[Nn],fi.Yb.push(An),fi.ac.splice(fi.ac.indexOf(An),1),An.Ub=0,Hi(Nn)},Gc:function(){},pc:function(){fi.qc.forEach(An=>An())},Fc:function(An,Nn){An.onmessage=Gn=>{var Qn=(Gn=Gn.data).cmd;if(An.Ub&&(fi.Bc=An.Ub),Gn.targetThread&&Gn.targetThread!=Bs()){var hr=fi.Vb[Gn.Qc];hr?hr.postMessage(Gn,Gn.transferList):In('Internal error! Worker sent a message "'+Qn+'" to target pthread '+Gn.targetThread+", but that thread no longer exists!")}else Qn==="processProxyingQueue"?er(Gn.queue):Qn==="spawnThread"?Wr(Gn):Qn==="cleanupThread"?oi(Gn.thread):Qn==="killThread"?(Gn=Gn.thread,Qn=fi.Vb[Gn],delete fi.Vb[Gn],Qn.terminate(),Hi(Gn),fi.ac.splice(fi.ac.indexOf(Qn),1),Qn.Ub=0):Qn==="cancelThread"?fi.Vb[Gn.thread].postMessage({cmd:"cancel"}):Qn==="loaded"?(An.loaded=!0,Nn&&Nn(An),An.$b&&(An.$b(),delete An.$b)):Qn==="print"?xn("Thread "+Gn.threadId+": "+Gn.text):Qn==="printErr"?In("Thread "+Gn.threadId+": "+Gn.text):Qn==="alert"?alert("Thread "+Gn.threadId+": "+Gn.text):Gn.target==="setimmediate"?An.postMessage(Gn):Qn==="onAbort"?Se.onAbort&&Se.onAbort(Gn.arg):Qn&&In("worker sent an unknown command "+Qn);fi.Bc=void 0},An.onerror=Gn=>{throw In("worker sent an error! "+Gn.filename+":"+Gn.lineno+": "+Gn.message),Gn},Ye&&(An.on("message",function(Gn){An.onmessage({data:Gn})}),An.on("error",function(Gn){An.onerror(Gn)}),An.on("detachedExit",function(){})),An.postMessage({cmd:"load",urlOrBlob:Se.mainScriptUrlOrBlob||_e,wasmMemory:$n,wasmModule:Sn})},yc:function(){var An=fn("ort-wasm-threaded.worker.js");fi.Yb.push(new Worker(An))},Cc:function(){return fi.Yb.length==0&&(fi.yc(),fi.Fc(fi.Yb[0])),fi.Yb.pop()}};function Di(An){for(;0<An.length;)An.shift()(Se)}function Ni(An){var Nn=Fi();return An=An(),Si(Nn),An}function As(An){if(pn)return ri(2,0,An);try{xi(An)}catch(Nn){Nn instanceof Gr||Nn=="unwind"||Je(1,Nn)}}Se.PThread=fi,Se.establishStackSpace=function(){var An=Bs(),Nn=Re()[An+44>>2>>>0];An=Re()[An+48>>2>>>0],Ma(Nn,Nn-An),Si(Nn)};var Ti=[];function Bi(An){var Nn=Ti[An];return Nn||(An>=Ti.length&&(Ti.length=An+1),Ti[An]=Nn=wr.get(An)),Nn}Se.invokeEntryPoint=function(An,Nn){An=Bi(An)(Nn),$r()?fi.nc(An):Mo(An)};var Qi,vs,Ss=[],di=0,Ur=0;function ni(An){this.Zb=An,this.Sb=An-24,this.xc=function(Nn){ke()[this.Sb+4>>2>>>0]=Nn},this.bc=function(){return ke()[this.Sb+4>>2>>>0]},this.wc=function(Nn){ke()[this.Sb+8>>2>>>0]=Nn},this.Dc=function(){return ke()[this.Sb+8>>2>>>0]},this.rc=function(){Re()[this.Sb>>2>>>0]=0},this.hc=function(Nn){Nn=Nn?1:0,xe()[this.Sb+12>>0>>>0]=Nn},this.uc=function(){return xe()[this.Sb+12>>0>>>0]!=0},this.ic=function(Nn){Nn=Nn?1:0,xe()[this.Sb+13>>0>>>0]=Nn},this.kc=function(){return xe()[this.Sb+13>>0>>>0]!=0},this.fc=function(Nn,Gn){this.cc(0),this.xc(Nn),this.wc(Gn),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(Re(),this.Sb>>2,1)},this.Hc=function(){return Atomics.sub(Re(),this.Sb>>2,1)===1},this.cc=function(Nn){ke()[this.Sb+16>>2>>>0]=Nn},this.tc=function(){return ke()[this.Sb+16>>2>>>0]},this.vc=function(){if(Eo(this.bc()))return ke()[this.Zb>>2>>>0];var Nn=this.tc();return Nn!==0?Nn:this.Zb}}function ro(An){return ks(new ni(An).Sb)}function ps(An,Nn,Gn,Qn){return pn?ri(3,1,An,Nn,Gn,Qn):Os(An,Nn,Gn,Qn)}function Os(An,Nn,Gn,Qn){if(typeof SharedArrayBuffer>"u")return In("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var hr=[];return pn&&hr.length===0?ps(An,Nn,Gn,Qn):(An={Ic:Gn,Ub:An,zc:Qn,Nc:hr},pn?(An.Oc="spawnThread",postMessage(An,hr),0):Wr(An))}function Hs(An,Nn,Gn){return pn?ri(4,1,An,Nn,Gn):0}function ci(An,Nn){if(pn)return ri(5,1,An,Nn)}function Vs(An,Nn){if(pn)return ri(6,1,An,Nn)}function Ps(An,Nn,Gn){if(pn)return ri(7,1,An,Nn,Gn)}function Is(An,Nn,Gn){return pn?ri(8,1,An,Nn,Gn):0}function ss(An,Nn){if(pn)return ri(9,1,An,Nn)}function os(An,Nn,Gn){if(pn)return ri(10,1,An,Nn,Gn)}function ms(An,Nn,Gn,Qn){if(pn)return ri(11,1,An,Nn,Gn,Qn)}function vo(An,Nn,Gn,Qn){if(pn)return ri(12,1,An,Nn,Gn,Qn)}function co(An,Nn,Gn,Qn){if(pn)return ri(13,1,An,Nn,Gn,Qn)}function js(An){if(pn)return ri(14,1,An)}function Vn(An,Nn){if(pn)return ri(15,1,An,Nn)}function Kn(An,Nn,Gn){if(pn)return ri(16,1,An,Nn,Gn)}function er(An){Atomics.store(Re(),An>>2,1),Bs()&&Ho(An),Atomics.compareExchange(Re(),An>>2,1,0)}function lr(An){return ke()[An>>>2]+4294967296*Re()[An+4>>>2]}function gr(An,Nn,Gn,Qn,hr,vr){return pn?ri(17,1,An,Nn,Gn,Qn,hr,vr):-52}function xr(An,Nn,Gn,Qn,hr,vr){if(pn)return ri(18,1,An,Nn,Gn,Qn,hr,vr)}function Hr(An){var Nn=Vr(An)+1,Gn=va(Nn);return Gn&&kr(An,xe(),Gn,Nn),Gn}function pi(An,Nn,Gn){function Qn(Mi){return(Mi=Mi.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Mi[1]:"GMT"}if(pn)return ri(19,1,An,Nn,Gn);var hr=new Date().getFullYear(),vr=new Date(hr,0,1),Yr=new Date(hr,6,1);hr=vr.getTimezoneOffset();var Jr=Yr.getTimezoneOffset(),Vi=Math.max(hr,Jr);Re()[An>>2>>>0]=60*Vi,Re()[Nn>>2>>>0]=+(hr!=Jr),An=Qn(vr),Nn=Qn(Yr),An=Hr(An),Nn=Hr(Nn),Jr<hr?(ke()[Gn>>2>>>0]=An,ke()[Gn+4>>2>>>0]=Nn):(ke()[Gn>>2>>>0]=Nn,ke()[Gn+4>>2>>>0]=An)}function ri(An,Nn){var Gn=arguments.length-2,Qn=arguments;return Ni(()=>{for(var hr=ia(8*Gn),vr=hr>>3,Yr=0;Yr<Gn;Yr++){var Jr=Qn[2+Yr];Ce()[vr+Yr>>>0]=Jr}return ns(An,Gn,hr,Nn)})}Se.executeNotifiedProxyingQueue=er,vs=Ye?()=>{var An=process.hrtime();return 1e3*An[0]+An[1]/1e6}:pn?()=>performance.now()-Se.__performance_now_clock_drift:()=>performance.now();var Ii,Yi=[],Li={};function Rs(){if(!Ii){var An,Nn={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:Xe||"./this.program"};for(An in Li)Li[An]===void 0?delete Nn[An]:Nn[An]=Li[An];var Gn=[];for(An in Nn)Gn.push(An+"="+Nn[An]);Ii=Gn}return Ii}function Er(An,Nn){if(pn)return ri(20,1,An,Nn);var Gn=0;return Rs().forEach(function(Qn,hr){var vr=Nn+Gn;for(hr=ke()[An+4*hr>>2>>>0]=vr,vr=0;vr<Qn.length;++vr)xe()[hr++>>0>>>0]=Qn.charCodeAt(vr);xe()[hr>>0>>>0]=0,Gn+=Qn.length+1}),0}function Oi(An,Nn){if(pn)return ri(21,1,An,Nn);var Gn=Rs();ke()[An>>2>>>0]=Gn.length;var Qn=0;return Gn.forEach(function(hr){Qn+=hr.length+1}),ke()[Nn>>2>>>0]=Qn,0}function Wi(An){return pn?ri(22,1,An):52}function $s(An,Nn,Gn,Qn){return pn?ri(23,1,An,Nn,Gn,Qn):52}function wo(An,Nn,Gn,Qn,hr){return pn?ri(24,1,An,Nn,Gn,Qn,hr):70}var Wo=[null,[],[]];function io(An,Nn){var Gn=Wo[An];Nn===0||Nn===10?((An===1?xn:In)(or(Gn,0)),Gn.length=0):Gn.push(Nn)}function ma(An,Nn,Gn,Qn){if(pn)return ri(25,1,An,Nn,Gn,Qn);for(var hr=0,vr=0;vr<Gn;vr++){var Yr=ke()[Nn>>2>>>0],Jr=ke()[Nn+4>>2>>>0];Nn+=8;for(var Vi=0;Vi<Jr;Vi++)io(An,Pe()[Yr+Vi>>>0]);hr+=Jr}return ke()[Qn>>2>>>0]=hr,0}var ts=0;function us(An){return An%4==0&&(An%100!=0||An%400==0)}var Wa=[31,29,31,30,31,30,31,31,30,31,30,31],Ha=[31,28,31,30,31,30,31,31,30,31,30,31];function ga(An,Nn,Gn,Qn){function hr(Tr,Pi,ji){for(Tr=typeof Tr=="number"?Tr.toString():Tr||"";Tr.length<Pi;)Tr=ji[0]+Tr;return Tr}function vr(Tr,Pi){return hr(Tr,Pi,"0")}function Yr(Tr,Pi){function ji(Qs){return 0>Qs?-1:0<Qs?1:0}var po;return(po=ji(Tr.getFullYear()-Pi.getFullYear()))===0&&(po=ji(Tr.getMonth()-Pi.getMonth()))===0&&(po=ji(Tr.getDate()-Pi.getDate())),po}function Jr(Tr){switch(Tr.getDay()){case 0:return new Date(Tr.getFullYear()-1,11,29);case 1:return Tr;case 2:return new Date(Tr.getFullYear(),0,3);case 3:return new Date(Tr.getFullYear(),0,2);case 4:return new Date(Tr.getFullYear(),0,1);case 5:return new Date(Tr.getFullYear()-1,11,31);case 6:return new Date(Tr.getFullYear()-1,11,30)}}function Vi(Tr){var Pi=Tr.Wb;for(Tr=new Date(new Date(Tr.Xb+1900,0,1).getTime());0<Pi;){var ji=Tr.getMonth(),po=(us(Tr.getFullYear())?Wa:Ha)[ji];if(!(Pi>po-Tr.getDate())){Tr.setDate(Tr.getDate()+Pi);break}Pi-=po-Tr.getDate()+1,Tr.setDate(1),11>ji?Tr.setMonth(ji+1):(Tr.setMonth(0),Tr.setFullYear(Tr.getFullYear()+1))}return ji=new Date(Tr.getFullYear()+1,0,4),Pi=Jr(new Date(Tr.getFullYear(),0,4)),ji=Jr(ji),0>=Yr(Pi,Tr)?0>=Yr(ji,Tr)?Tr.getFullYear()+1:Tr.getFullYear():Tr.getFullYear()-1}var Mi=Re()[Qn+40>>2>>>0];for(var es in Qn={Lc:Re()[Qn>>2>>>0],Kc:Re()[Qn+4>>2>>>0],dc:Re()[Qn+8>>2>>>0],jc:Re()[Qn+12>>2>>>0],ec:Re()[Qn+16>>2>>>0],Xb:Re()[Qn+20>>2>>>0],Tb:Re()[Qn+24>>2>>>0],Wb:Re()[Qn+28>>2>>>0],Rc:Re()[Qn+32>>2>>>0],Jc:Re()[Qn+36>>2>>>0],Mc:Mi?Sr(Mi):""},Gn=Sr(Gn),Mi={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})Gn=Gn.replace(new RegExp(es,"g"),Mi[es]);var Xs="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),qs="January February March April May June July August September October November December".split(" ");for(es in Mi={"%a":function(Tr){return Xs[Tr.Tb].substring(0,3)},"%A":function(Tr){return Xs[Tr.Tb]},"%b":function(Tr){return qs[Tr.ec].substring(0,3)},"%B":function(Tr){return qs[Tr.ec]},"%C":function(Tr){return vr((Tr.Xb+1900)/100|0,2)},"%d":function(Tr){return vr(Tr.jc,2)},"%e":function(Tr){return hr(Tr.jc,2," ")},"%g":function(Tr){return Vi(Tr).toString().substring(2)},"%G":function(Tr){return Vi(Tr)},"%H":function(Tr){return vr(Tr.dc,2)},"%I":function(Tr){return(Tr=Tr.dc)==0?Tr=12:12<Tr&&(Tr-=12),vr(Tr,2)},"%j":function(Tr){for(var Pi=0,ji=0;ji<=Tr.ec-1;Pi+=(us(Tr.Xb+1900)?Wa:Ha)[ji++]);return vr(Tr.jc+Pi,3)},"%m":function(Tr){return vr(Tr.ec+1,2)},"%M":function(Tr){return vr(Tr.Kc,2)},"%n":function(){return`
`},"%p":function(Tr){return 0<=Tr.dc&&12>Tr.dc?"AM":"PM"},"%S":function(Tr){return vr(Tr.Lc,2)},"%t":function(){return"	"},"%u":function(Tr){return Tr.Tb||7},"%U":function(Tr){return vr(Math.floor((Tr.Wb+7-Tr.Tb)/7),2)},"%V":function(Tr){var Pi=Math.floor((Tr.Wb+7-(Tr.Tb+6)%7)/7);if(2>=(Tr.Tb+371-Tr.Wb-2)%7&&Pi++,Pi)Pi==53&&((ji=(Tr.Tb+371-Tr.Wb)%7)==4||ji==3&&us(Tr.Xb)||(Pi=1));else{Pi=52;var ji=(Tr.Tb+7-Tr.Wb-1)%7;(ji==4||ji==5&&us(Tr.Xb%400-1))&&Pi++}return vr(Pi,2)},"%w":function(Tr){return Tr.Tb},"%W":function(Tr){return vr(Math.floor((Tr.Wb+7-(Tr.Tb+6)%7)/7),2)},"%y":function(Tr){return(Tr.Xb+1900).toString().substring(2)},"%Y":function(Tr){return Tr.Xb+1900},"%z":function(Tr){var Pi=0<=(Tr=Tr.Jc);return Tr=Math.abs(Tr)/60,(Pi?"+":"-")+("0000"+(Tr/60*100+Tr%60)).slice(-4)},"%Z":function(Tr){return Tr.Mc},"%%":function(){return"%"}},Gn=Gn.replace(/%%/g,"\0\0"),Mi)Gn.includes(es)&&(Gn=Gn.replace(new RegExp(es,"g"),Mi[es](Qn)));return es=function(Tr){var Pi=Array(Vr(Tr)+1);return kr(Tr,Pi,0,Pi.length),Pi}(Gn=Gn.replace(/\0\0/g,"%")),es.length>Nn?0:(function(Tr,Pi){xe().set(Tr,Pi>>>0)}(es,An),es.length-1)}fi.fc();var ya=[null,Ci,As,ps,Hs,ci,Vs,Ps,Is,ss,os,ms,vo,co,js,Vn,Kn,gr,xr,pi,Er,Oi,Wi,$s,wo,ma],ba={b:function(An){return va(An+24)+24},n:function(An){return(An=new ni(An)).uc()||(An.hc(!0),di--),An.ic(!1),Ss.push(An),An.sc(),An.vc()},ma:function(An){throw In("Unexpected exception thrown, this is not properly supported - aborting"),Jn=!0,An},x:function(){Ui(0);var An=Ss.pop();if(An.Hc()&&!An.kc()){var Nn=An.Dc();Nn&&Bi(Nn)(An.Zb),ro(An.Zb)}Ur=0},e:function(){var An=Ur;if(!An)return ts=0;var Nn=new ni(An);Nn.cc(An);var Gn=Nn.bc();if(!Gn)return ts=0,An;for(var Qn=Array.prototype.slice.call(arguments),hr=0;hr<Qn.length;hr++){var vr=Qn[hr];if(vr===0||vr===Gn)break;if(No(vr,Gn,Nn.Sb+16))return ts=vr,An}return ts=Gn,An},l:function(){var An=Ur;if(!An)return ts=0;var Nn=new ni(An);Nn.cc(An);var Gn=Nn.bc();if(!Gn)return ts=0,An;for(var Qn=Array.prototype.slice.call(arguments),hr=0;hr<Qn.length;hr++){var vr=Qn[hr];if(vr===0||vr===Gn)break;if(No(vr,Gn,Nn.Sb+16))return ts=vr,An}return ts=Gn,An},h:function(){var An=Ur;if(!An)return ts=0;var Nn=new ni(An);Nn.cc(An);var Gn=Nn.bc();if(!Gn)return ts=0,An;for(var Qn=Array.prototype.slice.call(arguments),hr=0;hr<Qn.length;hr++){var vr=Qn[hr];if(vr===0||vr===Gn)break;if(No(vr,Gn,Nn.Sb+16))return ts=vr,An}return ts=Gn,An},t:ro,M:function(){var An=Ss.pop();An||ei("no exception to throw");var Nn=An.Zb;throw An.kc()||(Ss.push(An),An.ic(!0),An.hc(!1),di++),Ur=Nn,Nn},c:function(An,Nn,Gn){throw new ni(An).fc(Nn,Gn),Ur=An,di++,An},pa:function(){return di},Fa:function(An){ra(An,!Ke,1,!Qe),fi.pc()},T:function(An){pn?postMessage({cmd:"cleanupThread",thread:An}):oi(An)},xa:Os,j:function(An){throw Ur||(Ur=An),An},H:Hs,Ma:ci,ua:Vs,wa:Ps,oa:Is,Ka:ss,Ca:os,Ja:ms,V:vo,va:co,sa:js,La:Vn,ta:Kn,Ta:function(){},X:function(){ei("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){ei("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(An,Nn,Gn,Qn){if(An==Nn)setTimeout(()=>er(Qn));else if(pn)postMessage({targetThread:An,cmd:"processProxyingQueue",queue:Qn});else{if(!(An=fi.Vb[An]))return;An.postMessage({cmd:"processProxyingQueue",queue:Qn})}return 1},Ea:function(){return-1},Pa:function(An,Nn){An=new Date(1e3*lr(An)),Re()[Nn>>2>>>0]=An.getUTCSeconds(),Re()[Nn+4>>2>>>0]=An.getUTCMinutes(),Re()[Nn+8>>2>>>0]=An.getUTCHours(),Re()[Nn+12>>2>>>0]=An.getUTCDate(),Re()[Nn+16>>2>>>0]=An.getUTCMonth(),Re()[Nn+20>>2>>>0]=An.getUTCFullYear()-1900,Re()[Nn+24>>2>>>0]=An.getUTCDay(),An=(An.getTime()-Date.UTC(An.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,Re()[Nn+28>>2>>>0]=An},Qa:function(An,Nn){An=new Date(1e3*lr(An)),Re()[Nn>>2>>>0]=An.getSeconds(),Re()[Nn+4>>2>>>0]=An.getMinutes(),Re()[Nn+8>>2>>>0]=An.getHours(),Re()[Nn+12>>2>>>0]=An.getDate(),Re()[Nn+16>>2>>>0]=An.getMonth(),Re()[Nn+20>>2>>>0]=An.getFullYear()-1900,Re()[Nn+24>>2>>>0]=An.getDay();var Gn=new Date(An.getFullYear(),0,1),Qn=(An.getTime()-Gn.getTime())/864e5|0;Re()[Nn+28>>2>>>0]=Qn,Re()[Nn+36>>2>>>0]=-60*An.getTimezoneOffset(),Qn=new Date(An.getFullYear(),6,1).getTimezoneOffset(),An=0|(Qn!=(Gn=Gn.getTimezoneOffset())&&An.getTimezoneOffset()==Math.min(Gn,Qn)),Re()[Nn+32>>2>>>0]=An},Ra:function(An){var Nn=new Date(Re()[An+20>>2>>>0]+1900,Re()[An+16>>2>>>0],Re()[An+12>>2>>>0],Re()[An+8>>2>>>0],Re()[An+4>>2>>>0],Re()[An>>2>>>0],0),Gn=Re()[An+32>>2>>>0],Qn=Nn.getTimezoneOffset(),hr=new Date(Nn.getFullYear(),0,1),vr=new Date(Nn.getFullYear(),6,1).getTimezoneOffset(),Yr=hr.getTimezoneOffset(),Jr=Math.min(Yr,vr);return 0>Gn?Re()[An+32>>2>>>0]=+(vr!=Yr&&Jr==Qn):0<Gn!=(Jr==Qn)&&(vr=Math.max(Yr,vr),Nn.setTime(Nn.getTime()+6e4*((0<Gn?Jr:vr)-Qn))),Re()[An+24>>2>>>0]=Nn.getDay(),Gn=(Nn.getTime()-hr.getTime())/864e5|0,Re()[An+28>>2>>>0]=Gn,Re()[An>>2>>>0]=Nn.getSeconds(),Re()[An+4>>2>>>0]=Nn.getMinutes(),Re()[An+8>>2>>>0]=Nn.getHours(),Re()[An+12>>2>>>0]=Nn.getDate(),Re()[An+16>>2>>>0]=Nn.getMonth(),Nn.getTime()/1e3|0},Aa:gr,Ba:xr,Sa:function An(Nn,Gn,Qn){An.Ac||(An.Ac=!0,pi(Nn,Gn,Qn))},y:function(){ei("")},U:function(){if(!Ye&&!Ke){var An="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";Qi||(Qi={}),Qi[An]||(Qi[An]=1,Ye&&(An="warning: "+An),In(An))}},ra:function(){return 4294901760},B:vs,Ia:function(An,Nn,Gn){Pe().copyWithin(An>>>0,Nn>>>0,Nn+Gn>>>0)},F:function(){return Ye?t(3993).cpus().length:navigator.hardwareConcurrency},Da:function(An,Nn,Gn){Yi.length=Nn,Gn>>=3;for(var Qn=0;Qn<Nn;Qn++)Yi[Qn]=Ce()[Gn+Qn>>>0];return(0>An?ti[-An-1]:ya[An]).apply(null,Yi)},qa:function(An){var Nn=Pe().length;if((An>>>=0)<=Nn||4294901760<An)return!1;for(var Gn=1;4>=Gn;Gn*=2){var Qn=Nn*(1+.2/Gn);Qn=Math.min(Qn,An+100663296);var hr=Math;Qn=Math.max(An,Qn),hr=hr.min.call(hr,4294901760,Qn+(65536-Qn%65536)%65536);e:{try{$n.grow(hr-Bn.byteLength+65535>>>16),Lr($n.buffer);var vr=1;break e}catch{}vr=void 0}if(vr)return!0}return!1},Na:function(){throw"unwind"},Ga:Er,Ha:Oi,J:xi,I:Wi,S:$s,ga:wo,R:ma,d:function(){return ts},na:function An(Nn,Gn){An.lc||(An.lc=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var hr=new Uint8Array(1);return()=>(crypto.getRandomValues(hr),hr[0])}if(Ye)try{var vr=t(Object(function(){var Yr=new Error("Cannot find module 'crypto'");throw Yr.code="MODULE_NOT_FOUND",Yr}()));return()=>vr.randomBytes(1)[0]}catch{}return()=>ei("randomDevice")}());for(var Qn=0;Qn<Gn;Qn++)xe()[Nn+Qn>>0>>>0]=An.lc();return 0},ia:function(An,Nn,Gn){var Qn=Fi();try{return Bi(An)(Nn,Gn)}catch(hr){if(Si(Qn),hr!==hr+0)throw hr;Ui(1,0)}},ja:function(An,Nn,Gn){var Qn=Fi();try{return Bi(An)(Nn,Gn)}catch(hr){if(Si(Qn),hr!==hr+0)throw hr;Ui(1,0)}},K:function(An){var Nn=Fi();try{return Bi(An)()}catch(Gn){if(Si(Nn),Gn!==Gn+0)throw Gn;Ui(1,0)}},f:function(An,Nn){var Gn=Fi();try{return Bi(An)(Nn)}catch(Qn){if(Si(Gn),Qn!==Qn+0)throw Qn;Ui(1,0)}},P:function(An,Nn,Gn){var Qn=Fi();try{return Bi(An)(Nn,Gn)}catch(hr){if(Si(Qn),hr!==hr+0)throw hr;Ui(1,0)}},Q:function(An,Nn,Gn){var Qn=Fi();try{return Bi(An)(Nn,Gn)}catch(hr){if(Si(Qn),hr!==hr+0)throw hr;Ui(1,0)}},k:function(An,Nn,Gn){var Qn=Fi();try{return Bi(An)(Nn,Gn)}catch(hr){if(Si(Qn),hr!==hr+0)throw hr;Ui(1,0)}},p:function(An,Nn,Gn,Qn){var hr=Fi();try{return Bi(An)(Nn,Gn,Qn)}catch(vr){if(Si(hr),vr!==vr+0)throw vr;Ui(1,0)}},q:function(An,Nn,Gn,Qn,hr){var vr=Fi();try{return Bi(An)(Nn,Gn,Qn,hr)}catch(Yr){if(Si(vr),Yr!==Yr+0)throw Yr;Ui(1,0)}},N:function(An,Nn,Gn,Qn,hr,vr){var Yr=Fi();try{return Bi(An)(Nn,Gn,Qn,hr,vr)}catch(Jr){if(Si(Yr),Jr!==Jr+0)throw Jr;Ui(1,0)}},s:function(An,Nn,Gn,Qn,hr,vr){var Yr=Fi();try{return Bi(An)(Nn,Gn,Qn,hr,vr)}catch(Jr){if(Si(Yr),Jr!==Jr+0)throw Jr;Ui(1,0)}},w:function(An,Nn,Gn,Qn,hr,vr,Yr){var Jr=Fi();try{return Bi(An)(Nn,Gn,Qn,hr,vr,Yr)}catch(Vi){if(Si(Jr),Vi!==Vi+0)throw Vi;Ui(1,0)}},L:function(An,Nn,Gn,Qn,hr,vr,Yr,Jr){var Vi=Fi();try{return Bi(An)(Nn,Gn,Qn,hr,vr,Yr,Jr)}catch(Mi){if(Si(Vi),Mi!==Mi+0)throw Mi;Ui(1,0)}},E:function(An,Nn,Gn,Qn,hr,vr,Yr,Jr,Vi,Mi,es,Xs){var qs=Fi();try{return Bi(An)(Nn,Gn,Qn,hr,vr,Yr,Jr,Vi,Mi,es,Xs)}catch(Tr){if(Si(qs),Tr!==Tr+0)throw Tr;Ui(1,0)}},aa:function(An,Nn,Gn,Qn,hr,vr,Yr,Jr){var Vi=Fi();try{return Ys(An,Nn,Gn,Qn,hr,vr,Yr,Jr)}catch(Mi){if(Si(Vi),Mi!==Mi+0)throw Mi;Ui(1,0)}},_:function(An,Nn,Gn,Qn,hr,vr,Yr){var Jr=Fi();try{return xo(An,Nn,Gn,Qn,hr,vr,Yr)}catch(Vi){if(Si(Jr),Vi!==Vi+0)throw Vi;Ui(1,0)}},Z:function(An,Nn,Gn,Qn,hr){var vr=Fi();try{return Na(An,Nn,Gn,Qn,hr)}catch(Yr){if(Si(vr),Yr!==Yr+0)throw Yr;Ui(1,0)}},ca:function(An,Nn,Gn,Qn){var hr=Fi();try{return Do(An,Nn,Gn,Qn)}catch(vr){if(Si(hr),vr!==vr+0)throw vr;Ui(1,0)}},$:function(An){var Nn=Fi();try{return Ji(An)}catch(Gn){if(Si(Nn),Gn!==Gn+0)throw Gn;Ui(1,0)}},ba:function(An,Nn){var Gn=Fi();try{return Ka(An,Nn)}catch(Qn){if(Si(Gn),Qn!==Qn+0)throw Qn;Ui(1,0)}},Y:function(An,Nn,Gn){var Qn=Fi();try{return ho(An,Nn,Gn)}catch(hr){if(Si(Qn),hr!==hr+0)throw hr;Ui(1,0)}},g:function(An){var Nn=Fi();try{Bi(An)()}catch(Gn){if(Si(Nn),Gn!==Gn+0)throw Gn;Ui(1,0)}},r:function(An,Nn){var Gn=Fi();try{Bi(An)(Nn)}catch(Qn){if(Si(Gn),Qn!==Qn+0)throw Qn;Ui(1,0)}},i:function(An,Nn,Gn){var Qn=Fi();try{Bi(An)(Nn,Gn)}catch(hr){if(Si(Qn),hr!==hr+0)throw hr;Ui(1,0)}},ha:function(An,Nn,Gn,Qn){var hr=Fi();try{Bi(An)(Nn,Gn,Qn)}catch(vr){if(Si(hr),vr!==vr+0)throw vr;Ui(1,0)}},m:function(An,Nn,Gn,Qn){var hr=Fi();try{Bi(An)(Nn,Gn,Qn)}catch(vr){if(Si(hr),vr!==vr+0)throw vr;Ui(1,0)}},v:function(An,Nn,Gn,Qn,hr){var vr=Fi();try{Bi(An)(Nn,Gn,Qn,hr)}catch(Yr){if(Si(vr),Yr!==Yr+0)throw Yr;Ui(1,0)}},u:function(An,Nn,Gn,Qn,hr,vr){var Yr=Fi();try{Bi(An)(Nn,Gn,Qn,hr,vr)}catch(Jr){if(Si(Yr),Jr!==Jr+0)throw Jr;Ui(1,0)}},O:function(An,Nn,Gn,Qn,hr,vr,Yr){var Jr=Fi();try{Bi(An)(Nn,Gn,Qn,hr,vr,Yr)}catch(Vi){if(Si(Jr),Vi!==Vi+0)throw Vi;Ui(1,0)}},A:function(An,Nn,Gn,Qn,hr,vr,Yr,Jr){var Vi=Fi();try{Bi(An)(Nn,Gn,Qn,hr,vr,Yr,Jr)}catch(Mi){if(Si(Vi),Mi!==Mi+0)throw Mi;Ui(1,0)}},ka:function(An,Nn,Gn,Qn,hr,vr,Yr,Jr,Vi){var Mi=Fi();try{Bi(An)(Nn,Gn,Qn,hr,vr,Yr,Jr,Vi)}catch(es){if(Si(Mi),es!==es+0)throw es;Ui(1,0)}},C:function(An,Nn,Gn,Qn,hr,vr,Yr,Jr,Vi,Mi,es){var Xs=Fi();try{Bi(An)(Nn,Gn,Qn,hr,vr,Yr,Jr,Vi,Mi,es)}catch(qs){if(Si(Xs),qs!==qs+0)throw qs;Ui(1,0)}},D:function(An,Nn,Gn,Qn,hr,vr,Yr,Jr,Vi,Mi,es,Xs,qs,Tr,Pi,ji){var po=Fi();try{Bi(An)(Nn,Gn,Qn,hr,vr,Yr,Jr,Vi,Mi,es,Xs,qs,Tr,Pi,ji)}catch(Qs){if(Si(po),Qs!==Qs+0)throw Qs;Ui(1,0)}},fa:function(An,Nn,Gn,Qn,hr,vr,Yr,Jr){var Vi=Fi();try{Ei(An,Nn,Gn,Qn,hr,vr,Yr,Jr)}catch(Mi){if(Si(Vi),Mi!==Mi+0)throw Mi;Ui(1,0)}},da:function(An,Nn,Gn,Qn,hr,vr,Yr,Jr,Vi,Mi,es,Xs){var qs=Fi();try{Lo(An,Nn,Gn,Qn,hr,vr,Yr,Jr,Vi,Mi,es,Xs)}catch(Tr){if(Si(qs),Tr!==Tr+0)throw Tr;Ui(1,0)}},ea:function(An,Nn,Gn,Qn,hr,vr){var Yr=Fi();try{fo(An,Nn,Gn,Qn,hr,vr)}catch(Jr){if(Si(Yr),Jr!==Jr+0)throw Jr;Ui(1,0)}},o:function(An){return An},a:$n||Se.wasmMemory,G:function(An){ts=An},la:ga,z:function(An,Nn,Gn,Qn){return ga(An,Nn,Gn,Qn)}};(function(){function An(hr,vr){Se.asm=hr.exports,fi.qc.push(Se.asm.sb),wr=Se.asm.ub,gi.unshift(Se.asm.Va),Sn=vr,pn||(li--,Se.monitorRunDependencies&&Se.monitorRunDependencies(li),li==0&&yi&&(hr=yi,yi=null,hr()))}function Nn(hr){An(hr.instance,hr.module)}function Gn(hr){return function(){if(!Pn&&(Qe||Ke)){if(typeof fetch=="function"&&!Fr.startsWith("file://"))return fetch(Fr,{credentials:"same-origin"}).then(function(vr){if(!vr.ok)throw"failed to load wasm binary file at '"+Fr+"'";return vr.arrayBuffer()}).catch(function(){return Pr()});if(Fe)return new Promise(function(vr,Yr){Fe(Fr,function(Jr){vr(new Uint8Array(Jr))},Yr)})}return Promise.resolve().then(function(){return Pr()})}().then(function(vr){return WebAssembly.instantiate(vr,Qn)}).then(function(vr){return vr}).then(hr,function(vr){In("failed to asynchronously prepare wasm: "+vr),ei(vr)})}var Qn={a:ba};if(pn||(li++,Se.monitorRunDependencies&&Se.monitorRunDependencies(li)),Se.instantiateWasm)try{return Se.instantiateWasm(Qn,An)}catch(hr){return In("Module.instantiateWasm callback failed with error: "+hr),!1}(Pn||typeof WebAssembly.instantiateStreaming!="function"||fr()||Fr.startsWith("file://")||Ye||typeof fetch!="function"?Gn(Nn):fetch(Fr,{credentials:"same-origin"}).then(function(hr){return WebAssembly.instantiateStreaming(hr,Qn).then(Nn,function(vr){return In("wasm streaming compile failed: "+vr),In("falling back to ArrayBuffer instantiation"),Gn(Nn)})})).catch(Ie)})(),Se.___wasm_call_ctors=function(){return(Se.___wasm_call_ctors=Se.asm.Va).apply(null,arguments)},Se._OrtInit=function(){return(Se._OrtInit=Se.asm.Wa).apply(null,arguments)},Se._OrtCreateSessionOptions=function(){return(Se._OrtCreateSessionOptions=Se.asm.Xa).apply(null,arguments)},Se._OrtAppendExecutionProvider=function(){return(Se._OrtAppendExecutionProvider=Se.asm.Ya).apply(null,arguments)},Se._OrtAddSessionConfigEntry=function(){return(Se._OrtAddSessionConfigEntry=Se.asm.Za).apply(null,arguments)},Se._OrtReleaseSessionOptions=function(){return(Se._OrtReleaseSessionOptions=Se.asm._a).apply(null,arguments)},Se._OrtCreateSession=function(){return(Se._OrtCreateSession=Se.asm.$a).apply(null,arguments)},Se._OrtReleaseSession=function(){return(Se._OrtReleaseSession=Se.asm.ab).apply(null,arguments)},Se._OrtGetInputCount=function(){return(Se._OrtGetInputCount=Se.asm.bb).apply(null,arguments)},Se._OrtGetOutputCount=function(){return(Se._OrtGetOutputCount=Se.asm.cb).apply(null,arguments)},Se._OrtGetInputName=function(){return(Se._OrtGetInputName=Se.asm.db).apply(null,arguments)},Se._OrtGetOutputName=function(){return(Se._OrtGetOutputName=Se.asm.eb).apply(null,arguments)},Se._OrtFree=function(){return(Se._OrtFree=Se.asm.fb).apply(null,arguments)},Se._OrtCreateTensor=function(){return(Se._OrtCreateTensor=Se.asm.gb).apply(null,arguments)},Se._OrtGetTensorData=function(){return(Se._OrtGetTensorData=Se.asm.hb).apply(null,arguments)},Se._OrtReleaseTensor=function(){return(Se._OrtReleaseTensor=Se.asm.ib).apply(null,arguments)},Se._OrtCreateRunOptions=function(){return(Se._OrtCreateRunOptions=Se.asm.jb).apply(null,arguments)},Se._OrtAddRunConfigEntry=function(){return(Se._OrtAddRunConfigEntry=Se.asm.kb).apply(null,arguments)},Se._OrtReleaseRunOptions=function(){return(Se._OrtReleaseRunOptions=Se.asm.lb).apply(null,arguments)},Se._OrtRun=function(){return(Se._OrtRun=Se.asm.mb).apply(null,arguments)},Se._OrtEndProfiling=function(){return(Se._OrtEndProfiling=Se.asm.nb).apply(null,arguments)};var Bs=Se._pthread_self=function(){return(Bs=Se._pthread_self=Se.asm.ob).apply(null,arguments)},va=Se._malloc=function(){return(va=Se._malloc=Se.asm.pb).apply(null,arguments)},ks=Se._free=function(){return(ks=Se._free=Se.asm.qb).apply(null,arguments)},Ks=Se._fflush=function(){return(Ks=Se._fflush=Se.asm.rb).apply(null,arguments)};Se.__emscripten_tls_init=function(){return(Se.__emscripten_tls_init=Se.asm.sb).apply(null,arguments)};var na=Se.___funcs_on_exit=function(){return(na=Se.___funcs_on_exit=Se.asm.tb).apply(null,arguments)},ra=Se.__emscripten_thread_init=function(){return(ra=Se.__emscripten_thread_init=Se.asm.vb).apply(null,arguments)};Se.__emscripten_thread_crashed=function(){return(Se.__emscripten_thread_crashed=Se.asm.wb).apply(null,arguments)};var To,ns=Se._emscripten_run_in_main_runtime_thread_js=function(){return(ns=Se._emscripten_run_in_main_runtime_thread_js=Se.asm.xb).apply(null,arguments)},Ho=Se.__emscripten_proxy_execute_task_queue=function(){return(Ho=Se.__emscripten_proxy_execute_task_queue=Se.asm.yb).apply(null,arguments)},Hi=Se.__emscripten_thread_free_data=function(){return(Hi=Se.__emscripten_thread_free_data=Se.asm.zb).apply(null,arguments)},Mo=Se.__emscripten_thread_exit=function(){return(Mo=Se.__emscripten_thread_exit=Se.asm.Ab).apply(null,arguments)},Ui=Se._setThrew=function(){return(Ui=Se._setThrew=Se.asm.Bb).apply(null,arguments)},Ma=Se._emscripten_stack_set_limits=function(){return(Ma=Se._emscripten_stack_set_limits=Se.asm.Cb).apply(null,arguments)},Fi=Se.stackSave=function(){return(Fi=Se.stackSave=Se.asm.Db).apply(null,arguments)},Si=Se.stackRestore=function(){return(Si=Se.stackRestore=Se.asm.Eb).apply(null,arguments)},ia=Se.stackAlloc=function(){return(ia=Se.stackAlloc=Se.asm.Fb).apply(null,arguments)},No=Se.___cxa_can_catch=function(){return(No=Se.___cxa_can_catch=Se.asm.Gb).apply(null,arguments)},Eo=Se.___cxa_is_pointer_type=function(){return(Eo=Se.___cxa_is_pointer_type=Se.asm.Hb).apply(null,arguments)},Ji=Se.dynCall_j=function(){return(Ji=Se.dynCall_j=Se.asm.Ib).apply(null,arguments)},xo=Se.dynCall_iiiiij=function(){return(xo=Se.dynCall_iiiiij=Se.asm.Jb).apply(null,arguments)},ho=Se.dynCall_jii=function(){return(ho=Se.dynCall_jii=Se.asm.Kb).apply(null,arguments)},Ei=Se.dynCall_viiiiij=function(){return(Ei=Se.dynCall_viiiiij=Se.asm.Lb).apply(null,arguments)},fo=Se.dynCall_vjji=function(){return(fo=Se.dynCall_vjji=Se.asm.Mb).apply(null,arguments)},Lo=Se.dynCall_viiijjjii=function(){return(Lo=Se.dynCall_viiijjjii=Se.asm.Nb).apply(null,arguments)},Do=Se.dynCall_iij=function(){return(Do=Se.dynCall_iij=Se.asm.Ob).apply(null,arguments)},Ka=Se.dynCall_ji=function(){return(Ka=Se.dynCall_ji=Se.asm.Pb).apply(null,arguments)},Ys=Se.dynCall_iiiiiij=function(){return(Ys=Se.dynCall_iiiiiij=Se.asm.Qb).apply(null,arguments)},Na=Se.dynCall_iiij=function(){return(Na=Se.dynCall_iiij=Se.asm.Rb).apply(null,arguments)};function La(){function An(){if(!To&&(To=!0,Se.calledRun=!0,!Jn)&&(pn||Di(gi),Ae(Se),Se.onRuntimeInitialized&&Se.onRuntimeInitialized(),!pn)){if(Se.postRun)for(typeof Se.postRun=="function"&&(Se.postRun=[Se.postRun]);Se.postRun.length;){var Nn=Se.postRun.shift();Dr.unshift(Nn)}Di(Dr)}}if(!(0<li))if(pn)Ae(Se),pn||Di(gi),postMessage({cmd:"loaded"});else{if(Se.preRun)for(typeof Se.preRun=="function"&&(Se.preRun=[Se.preRun]);Se.preRun.length;)Kr();Di(Yn),0<li||(Se.setStatus?(Se.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Se.setStatus("")},1),An()},1)):An())}}if(Se.UTF8ToString=Sr,Se.stringToUTF8=function(An,Nn,Gn){return kr(An,Pe(),Nn,Gn)},Se.lengthBytesUTF8=Vr,Se.keepRuntimeAlive=$r,Se.wasmMemory=$n,Se.stackSave=Fi,Se.stackRestore=Si,Se.stackAlloc=ia,Se.ExitStatus=Gr,Se.PThread=fi,yi=function An(){To||La(),To||(yi=An)},Se.preInit)for(typeof Se.preInit=="function"&&(Se.preInit=[Se.preInit]);0<Se.preInit.length;)Se.preInit.pop()();return La(),Ee.ready});r.exports=Te},932:(r,e,t)=>{var _e,Te=(_e=(_e=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(Ee){var xe,Pe,Re;Ee=Ee||{},xe||(xe=Ee!==void 0?Ee:{}),xe.ready=new Promise(function(Vn,Kn){Pe=Vn,Re=Kn});var ke,Ce,Se,Ae,Ie,Me,Fe=Object.assign({},xe),Ve="./this.program",je=(Vn,Kn)=>{throw Kn},Be=typeof window=="object",qe=typeof importScripts=="function",He=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",Xe="";He?(Xe=qe?t(908).dirname(Xe)+"/":"//",Me=()=>{Ie||(Ae=t(1384),Ie=t(908))},ke=function(Vn,Kn){return Me(),Vn=Ie.normalize(Vn),Ae.readFileSync(Vn,Kn?void 0:"utf8")},Se=Vn=>((Vn=ke(Vn,!0)).buffer||(Vn=new Uint8Array(Vn)),Vn),Ce=(Vn,Kn,er)=>{Me(),Vn=Ie.normalize(Vn),Ae.readFile(Vn,function(lr,gr){lr?er(lr):Kn(gr.buffer)})},1<process.argv.length&&(Ve=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(Vn){if(!(Vn instanceof gi))throw Vn}),process.on("unhandledRejection",function(Vn){throw Vn}),je=(Vn,Kn)=>{if(Ye||0<nr)throw process.exitCode=Vn,Kn;Kn instanceof gi||Ke("exiting due to exception: "+Kn),process.exit(Vn)},xe.inspect=function(){return"[Emscripten Module object]"}):(Be||qe)&&(qe?Xe=self.location.href:typeof document<"u"&&document.currentScript&&(Xe=document.currentScript.src),_e&&(Xe=_e),Xe=Xe.indexOf("blob:")!==0?Xe.substr(0,Xe.replace(/[?#].*/,"").lastIndexOf("/")+1):"",ke=Vn=>{var Kn=new XMLHttpRequest;return Kn.open("GET",Vn,!1),Kn.send(null),Kn.responseText},qe&&(Se=Vn=>{var Kn=new XMLHttpRequest;return Kn.open("GET",Vn,!1),Kn.responseType="arraybuffer",Kn.send(null),new Uint8Array(Kn.response)}),Ce=(Vn,Kn,er)=>{var lr=new XMLHttpRequest;lr.open("GET",Vn,!0),lr.responseType="arraybuffer",lr.onload=()=>{lr.status==200||lr.status==0&&lr.response?Kn(lr.response):er()},lr.onerror=er,lr.send(null)});var Je,Qe=xe.print||console.log.bind(console),Ke=xe.printErr||console.warn.bind(console);Object.assign(xe,Fe),Fe=null,xe.thisProgram&&(Ve=xe.thisProgram),xe.quit&&(je=xe.quit),xe.wasmBinary&&(Je=xe.wasmBinary);var Ye=xe.noExitRuntime||!1;typeof WebAssembly!="object"&&Lr("no native wasm support detected");var pn,un,fn,mn,wn,Pn,xn=!1,In=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Ln(Vn,Kn,er){var lr=(Kn>>>=0)+er;for(er=Kn;Vn[er]&&!(er>=lr);)++er;if(16<er-Kn&&Vn.buffer&&In)return In.decode(Vn.subarray(Kn,er));for(lr="";Kn<er;){var gr=Vn[Kn++];if(128&gr){var xr=63&Vn[Kn++];if((224&gr)==192)lr+=String.fromCharCode((31&gr)<<6|xr);else{var Hr=63&Vn[Kn++];65536>(gr=(240&gr)==224?(15&gr)<<12|xr<<6|Hr:(7&gr)<<18|xr<<12|Hr<<6|63&Vn[Kn++])?lr+=String.fromCharCode(gr):(gr-=65536,lr+=String.fromCharCode(55296|gr>>10,56320|1023&gr))}}else lr+=String.fromCharCode(gr)}return lr}function $n(Vn,Kn){return(Vn>>>=0)?Ln(mn,Vn,Kn):""}function Sn(Vn,Kn,er,lr){if(!(0<lr))return 0;var gr=er>>>=0;lr=er+lr-1;for(var xr=0;xr<Vn.length;++xr){var Hr=Vn.charCodeAt(xr);if(55296<=Hr&&57343>=Hr&&(Hr=65536+((1023&Hr)<<10)|1023&Vn.charCodeAt(++xr)),127>=Hr){if(er>=lr)break;Kn[er++>>>0]=Hr}else{if(2047>=Hr){if(er+1>=lr)break;Kn[er++>>>0]=192|Hr>>6}else{if(65535>=Hr){if(er+2>=lr)break;Kn[er++>>>0]=224|Hr>>12}else{if(er+3>=lr)break;Kn[er++>>>0]=240|Hr>>18,Kn[er++>>>0]=128|Hr>>12&63}Kn[er++>>>0]=128|Hr>>6&63}Kn[er++>>>0]=128|63&Hr}}return Kn[er>>>0]=0,er-gr}function Bn(Vn){for(var Kn=0,er=0;er<Vn.length;++er){var lr=Vn.charCodeAt(er);127>=lr?Kn++:2047>=lr?Kn+=2:55296<=lr&&57343>=lr?(Kn+=4,++er):Kn+=3}return Kn}function Tn(){var Vn=pn.buffer;un=Vn,xe.HEAP8=fn=new Int8Array(Vn),xe.HEAP16=new Int16Array(Vn),xe.HEAP32=wn=new Int32Array(Vn),xe.HEAPU8=mn=new Uint8Array(Vn),xe.HEAPU16=new Uint16Array(Vn),xe.HEAPU32=Pn=new Uint32Array(Vn),xe.HEAPF32=new Float32Array(Vn),xe.HEAPF64=new Float64Array(Vn)}var vn,Un=[],zn=[],Hn=[],Jn=[],nr=0;function or(){var Vn=xe.preRun.shift();Un.unshift(Vn)}var Sr,kr=0,Vr=null;function Lr(Vn){throw xe.onAbort&&xe.onAbort(Vn),Ke(Vn="Aborted("+Vn+")"),xn=!0,Vn=new WebAssembly.RuntimeError(Vn+". Build with -sASSERTIONS for more info."),Re(Vn),Vn}function Qr(){return Sr.startsWith("data:application/octet-stream;base64,")}if(Sr="ort-wasm.wasm",!Qr()){var wr=Sr;Sr=xe.locateFile?xe.locateFile(wr,Xe):Xe+wr}function Yn(){var Vn=Sr;try{if(Vn==Sr&&Je)return new Uint8Array(Je);if(Se)return Se(Vn);throw"both async and sync fetching of the wasm failed"}catch(Kn){Lr(Kn)}}function gi(Vn){this.name="ExitStatus",this.message="Program terminated with exit("+Vn+")",this.status=Vn}function ui(Vn){for(;0<Vn.length;)Vn.shift()(xe)}var Dr=[],$r=0,Kr=0;function Fr(Vn){this.Db=Vn,this.zb=Vn-24,this.Ub=function(Kn){Pn[this.zb+4>>2>>>0]=Kn},this.Eb=function(){return Pn[this.zb+4>>2>>>0]},this.Sb=function(Kn){Pn[this.zb+8>>2>>>0]=Kn},this.Wb=function(){return Pn[this.zb+8>>2>>>0]},this.Tb=function(){wn[this.zb>>2>>>0]=0},this.Ib=function(Kn){fn[this.zb+12>>0>>>0]=Kn?1:0},this.Pb=function(){return fn[this.zb+12>>0>>>0]!=0},this.Jb=function(Kn){fn[this.zb+13>>0>>>0]=Kn?1:0},this.Lb=function(){return fn[this.zb+13>>0>>>0]!=0},this.Rb=function(Kn,er){this.Fb(0),this.Ub(Kn),this.Sb(er),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){wn[this.zb>>2>>>0]+=1},this.Xb=function(){var Kn=wn[this.zb>>2>>>0];return wn[this.zb>>2>>>0]=Kn-1,Kn===1},this.Fb=function(Kn){Pn[this.zb+16>>2>>>0]=Kn},this.Ob=function(){return Pn[this.zb+16>>2>>>0]},this.Qb=function(){if(Os(this.Eb()))return Pn[this.Db>>2>>>0];var Kn=this.Ob();return Kn!==0?Kn:this.Db}}function li(Vn){return Qi(new Fr(Vn).zb)}var yi=[];function ei(Vn){var Kn=yi[Vn];return Kn||(Vn>=yi.length&&(yi.length=Vn+1),yi[Vn]=Kn=vn.get(Vn)),Kn}function fr(Vn){var Kn=Bn(Vn)+1,er=Bi(Kn);return er&&Sn(Vn,fn,er,Kn),er}var Pr={};function ti(){if(!Gr){var Vn,Kn={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:Ve||"./this.program"};for(Vn in Pr)Pr[Vn]===void 0?delete Kn[Vn]:Kn[Vn]=Pr[Vn];var er=[];for(Vn in Kn)er.push(Vn+"="+Kn[Vn]);Gr=er}return Gr}var Gr,oi=[null,[],[]];function Wr(Vn,Kn){var er=oi[Vn];Kn===0||Kn===10?((Vn===1?Qe:Ke)(Ln(er,0)),er.length=0):er.push(Kn)}var Ci=0;function xi(Vn){return Vn%4==0&&(Vn%100!=0||Vn%400==0)}var fi=[31,29,31,30,31,30,31,31,30,31,30,31],Di=[31,28,31,30,31,30,31,31,30,31,30,31];function Ni(Vn,Kn,er,lr){function gr(Er,Oi,Wi){for(Er=typeof Er=="number"?Er.toString():Er||"";Er.length<Oi;)Er=Wi[0]+Er;return Er}function xr(Er,Oi){return gr(Er,Oi,"0")}function Hr(Er,Oi){function Wi(wo){return 0>wo?-1:0<wo?1:0}var $s;return($s=Wi(Er.getFullYear()-Oi.getFullYear()))===0&&($s=Wi(Er.getMonth()-Oi.getMonth()))===0&&($s=Wi(Er.getDate()-Oi.getDate())),$s}function pi(Er){switch(Er.getDay()){case 0:return new Date(Er.getFullYear()-1,11,29);case 1:return Er;case 2:return new Date(Er.getFullYear(),0,3);case 3:return new Date(Er.getFullYear(),0,2);case 4:return new Date(Er.getFullYear(),0,1);case 5:return new Date(Er.getFullYear()-1,11,31);case 6:return new Date(Er.getFullYear()-1,11,30)}}function ri(Er){var Oi=Er.Bb;for(Er=new Date(new Date(Er.Cb+1900,0,1).getTime());0<Oi;){var Wi=Er.getMonth(),$s=(xi(Er.getFullYear())?fi:Di)[Wi];if(!(Oi>$s-Er.getDate())){Er.setDate(Er.getDate()+Oi);break}Oi-=$s-Er.getDate()+1,Er.setDate(1),11>Wi?Er.setMonth(Wi+1):(Er.setMonth(0),Er.setFullYear(Er.getFullYear()+1))}return Wi=new Date(Er.getFullYear()+1,0,4),Oi=pi(new Date(Er.getFullYear(),0,4)),Wi=pi(Wi),0>=Hr(Oi,Er)?0>=Hr(Wi,Er)?Er.getFullYear()+1:Er.getFullYear():Er.getFullYear()-1}var Ii=wn[lr+40>>2>>>0];for(var Yi in lr={$b:wn[lr>>2>>>0],Zb:wn[lr+4>>2>>>0],Gb:wn[lr+8>>2>>>0],Kb:wn[lr+12>>2>>>0],Hb:wn[lr+16>>2>>>0],Cb:wn[lr+20>>2>>>0],Ab:wn[lr+24>>2>>>0],Bb:wn[lr+28>>2>>>0],bc:wn[lr+32>>2>>>0],Yb:wn[lr+36>>2>>>0],ac:Ii?$n(Ii):""},er=$n(er),Ii={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})er=er.replace(new RegExp(Yi,"g"),Ii[Yi]);var Li="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Rs="January February March April May June July August September October November December".split(" ");for(Yi in Ii={"%a":function(Er){return Li[Er.Ab].substring(0,3)},"%A":function(Er){return Li[Er.Ab]},"%b":function(Er){return Rs[Er.Hb].substring(0,3)},"%B":function(Er){return Rs[Er.Hb]},"%C":function(Er){return xr((Er.Cb+1900)/100|0,2)},"%d":function(Er){return xr(Er.Kb,2)},"%e":function(Er){return gr(Er.Kb,2," ")},"%g":function(Er){return ri(Er).toString().substring(2)},"%G":function(Er){return ri(Er)},"%H":function(Er){return xr(Er.Gb,2)},"%I":function(Er){return(Er=Er.Gb)==0?Er=12:12<Er&&(Er-=12),xr(Er,2)},"%j":function(Er){for(var Oi=0,Wi=0;Wi<=Er.Hb-1;Oi+=(xi(Er.Cb+1900)?fi:Di)[Wi++]);return xr(Er.Kb+Oi,3)},"%m":function(Er){return xr(Er.Hb+1,2)},"%M":function(Er){return xr(Er.Zb,2)},"%n":function(){return`
`},"%p":function(Er){return 0<=Er.Gb&&12>Er.Gb?"AM":"PM"},"%S":function(Er){return xr(Er.$b,2)},"%t":function(){return"	"},"%u":function(Er){return Er.Ab||7},"%U":function(Er){return xr(Math.floor((Er.Bb+7-Er.Ab)/7),2)},"%V":function(Er){var Oi=Math.floor((Er.Bb+7-(Er.Ab+6)%7)/7);if(2>=(Er.Ab+371-Er.Bb-2)%7&&Oi++,Oi)Oi==53&&((Wi=(Er.Ab+371-Er.Bb)%7)==4||Wi==3&&xi(Er.Cb)||(Oi=1));else{Oi=52;var Wi=(Er.Ab+7-Er.Bb-1)%7;(Wi==4||Wi==5&&xi(Er.Cb%400-1))&&Oi++}return xr(Oi,2)},"%w":function(Er){return Er.Ab},"%W":function(Er){return xr(Math.floor((Er.Bb+7-(Er.Ab+6)%7)/7),2)},"%y":function(Er){return(Er.Cb+1900).toString().substring(2)},"%Y":function(Er){return Er.Cb+1900},"%z":function(Er){var Oi=0<=(Er=Er.Yb);return Er=Math.abs(Er)/60,(Oi?"+":"-")+("0000"+(Er/60*100+Er%60)).slice(-4)},"%Z":function(Er){return Er.ac},"%%":function(){return"%"}},er=er.replace(/%%/g,"\0\0"),Ii)er.includes(Yi)&&(er=er.replace(new RegExp(Yi,"g"),Ii[Yi](lr)));return Yi=function(Er){var Oi=Array(Bn(Er)+1);return Sn(Er,Oi,0,Oi.length),Oi}(er=er.replace(/\0\0/g,"%")),Yi.length>Kn?0:(fn.set(Yi,Vn>>>0),Yi.length-1)}var As={a:function(Vn){return Bi(Vn+24)+24},m:function(Vn){return(Vn=new Fr(Vn)).Pb()||(Vn.Ib(!0),$r--),Vn.Jb(!1),Dr.push(Vn),Vn.Nb(),Vn.Qb()},ia:function(Vn){throw Ke("Unexpected exception thrown, this is not properly supported - aborting"),xn=!0,Vn},w:function(){di(0);var Vn=Dr.pop();if(Vn.Xb()&&!Vn.Lb()){var Kn=Vn.Wb();Kn&&ei(Kn)(Vn.Db),li(Vn.Db)}Kr=0},d:function(){var Vn=Kr;if(!Vn)return Ci=0;var Kn=new Fr(Vn);Kn.Fb(Vn);var er=Kn.Eb();if(!er)return Ci=0,Vn;for(var lr=Array.prototype.slice.call(arguments),gr=0;gr<lr.length;gr++){var xr=lr[gr];if(xr===0||xr===er)break;if(ps(xr,er,Kn.zb+16))return Ci=xr,Vn}return Ci=er,Vn},k:function(){var Vn=Kr;if(!Vn)return Ci=0;var Kn=new Fr(Vn);Kn.Fb(Vn);var er=Kn.Eb();if(!er)return Ci=0,Vn;for(var lr=Array.prototype.slice.call(arguments),gr=0;gr<lr.length;gr++){var xr=lr[gr];if(xr===0||xr===er)break;if(ps(xr,er,Kn.zb+16))return Ci=xr,Vn}return Ci=er,Vn},g:function(){var Vn=Kr;if(!Vn)return Ci=0;var Kn=new Fr(Vn);Kn.Fb(Vn);var er=Kn.Eb();if(!er)return Ci=0,Vn;for(var lr=Array.prototype.slice.call(arguments),gr=0;gr<lr.length;gr++){var xr=lr[gr];if(xr===0||xr===er)break;if(ps(xr,er,Kn.zb+16))return Ci=xr,Vn}return Ci=er,Vn},s:li,L:function(){var Vn=Dr.pop();Vn||Lr("no exception to throw");var Kn=Vn.Db;throw Vn.Lb()||(Dr.push(Vn),Vn.Jb(!0),Vn.Ib(!1),$r++),Kr=Kn,Kn},b:function(Vn,Kn,er){throw new Fr(Vn).Rb(Kn,er),Kr=Vn,$r++,Vn},la:function(){return $r},i:function(Vn){throw Kr||(Kr=Vn),Vn},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){Lr("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){Lr("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(Vn,Kn){Vn=new Date(1e3*(Pn[Vn>>>2]+4294967296*wn[Vn+4>>>2])),wn[Kn>>2>>>0]=Vn.getUTCSeconds(),wn[Kn+4>>2>>>0]=Vn.getUTCMinutes(),wn[Kn+8>>2>>>0]=Vn.getUTCHours(),wn[Kn+12>>2>>>0]=Vn.getUTCDate(),wn[Kn+16>>2>>>0]=Vn.getUTCMonth(),wn[Kn+20>>2>>>0]=Vn.getUTCFullYear()-1900,wn[Kn+24>>2>>>0]=Vn.getUTCDay(),wn[Kn+28>>2>>>0]=(Vn.getTime()-Date.UTC(Vn.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(Vn,Kn){Vn=new Date(1e3*(Pn[Vn>>>2]+4294967296*wn[Vn+4>>>2])),wn[Kn>>2>>>0]=Vn.getSeconds(),wn[Kn+4>>2>>>0]=Vn.getMinutes(),wn[Kn+8>>2>>>0]=Vn.getHours(),wn[Kn+12>>2>>>0]=Vn.getDate(),wn[Kn+16>>2>>>0]=Vn.getMonth(),wn[Kn+20>>2>>>0]=Vn.getFullYear()-1900,wn[Kn+24>>2>>>0]=Vn.getDay();var er=new Date(Vn.getFullYear(),0,1);wn[Kn+28>>2>>>0]=(Vn.getTime()-er.getTime())/864e5|0,wn[Kn+36>>2>>>0]=-60*Vn.getTimezoneOffset();var lr=new Date(Vn.getFullYear(),6,1).getTimezoneOffset();er=er.getTimezoneOffset(),wn[Kn+32>>2>>>0]=0|(lr!=er&&Vn.getTimezoneOffset()==Math.min(er,lr))},Fa:function(Vn){var Kn=new Date(wn[Vn+20>>2>>>0]+1900,wn[Vn+16>>2>>>0],wn[Vn+12>>2>>>0],wn[Vn+8>>2>>>0],wn[Vn+4>>2>>>0],wn[Vn>>2>>>0],0),er=wn[Vn+32>>2>>>0],lr=Kn.getTimezoneOffset(),gr=new Date(Kn.getFullYear(),0,1),xr=new Date(Kn.getFullYear(),6,1).getTimezoneOffset(),Hr=gr.getTimezoneOffset(),pi=Math.min(Hr,xr);return 0>er?wn[Vn+32>>2>>>0]=+(xr!=Hr&&pi==lr):0<er!=(pi==lr)&&(xr=Math.max(Hr,xr),Kn.setTime(Kn.getTime()+6e4*((0<er?pi:xr)-lr))),wn[Vn+24>>2>>>0]=Kn.getDay(),wn[Vn+28>>2>>>0]=(Kn.getTime()-gr.getTime())/864e5|0,wn[Vn>>2>>>0]=Kn.getSeconds(),wn[Vn+4>>2>>>0]=Kn.getMinutes(),wn[Vn+8>>2>>>0]=Kn.getHours(),wn[Vn+12>>2>>>0]=Kn.getDate(),wn[Vn+16>>2>>>0]=Kn.getMonth(),Kn.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function Vn(Kn,er,lr){Vn.Vb||(Vn.Vb=!0,function(gr,xr,Hr){function pi(Rs){return(Rs=Rs.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Rs[1]:"GMT"}var ri=new Date().getFullYear(),Ii=new Date(ri,0,1),Yi=new Date(ri,6,1);ri=Ii.getTimezoneOffset();var Li=Yi.getTimezoneOffset();wn[gr>>2>>>0]=60*Math.max(ri,Li),wn[xr>>2>>>0]=+(ri!=Li),gr=pi(Ii),xr=pi(Yi),gr=fr(gr),xr=fr(xr),Li<ri?(Pn[Hr>>2>>>0]=gr,Pn[Hr+4>>2>>>0]=xr):(Pn[Hr>>2>>>0]=xr,Pn[Hr+4>>2>>>0]=gr)}(Kn,er,lr))},B:function(){Lr("")},ma:function(){return 4294901760},I:He?()=>{var Vn=process.hrtime();return 1e3*Vn[0]+Vn[1]/1e6}:()=>performance.now(),xa:function(Vn,Kn,er){mn.copyWithin(Vn>>>0,Kn>>>0,Kn+er>>>0)},G:function(Vn){var Kn=mn.length;if(4294901760<(Vn>>>=0))return!1;for(var er=1;4>=er;er*=2){var lr=Kn*(1+.2/er);lr=Math.min(lr,Vn+100663296);var gr=Math;lr=Math.max(Vn,lr),gr=gr.min.call(gr,4294901760,lr+(65536-lr%65536)%65536);e:{try{pn.grow(gr-un.byteLength+65535>>>16),Tn();var xr=1;break e}catch{}xr=void 0}if(xr)return!0}return!1},va:function(Vn,Kn){var er=0;return ti().forEach(function(lr,gr){var xr=Kn+er;for(gr=Pn[Vn+4*gr>>2>>>0]=xr,xr=0;xr<lr.length;++xr)fn[gr++>>0>>>0]=lr.charCodeAt(xr);fn[gr>>0>>>0]=0,er+=lr.length+1}),0},wa:function(Vn,Kn){var er=ti();Pn[Vn>>2>>>0]=er.length;var lr=0;return er.forEach(function(gr){lr+=gr.length+1}),Pn[Kn>>2>>>0]=lr,0},ba:function(Vn){Ye||0<nr||(Ss(),ui(Hn),vs(0),oi[1].length&&Wr(1,10),oi[2].length&&Wr(2,10)),Ye||0<nr||(xe.onExit&&xe.onExit(Vn),xn=!0),je(Vn,new gi(Vn))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(Vn,Kn,er,lr){for(var gr=0,xr=0;xr<er;xr++){var Hr=Pn[Kn>>2>>>0],pi=Pn[Kn+4>>2>>>0];Kn+=8;for(var ri=0;ri<pi;ri++)Wr(Vn,mn[Hr+ri>>>0]);gr+=pi}return Pn[lr>>2>>>0]=gr,0},c:function(){return Ci},ja:function Vn(Kn,er){Vn.Mb||(Vn.Mb=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var gr=new Uint8Array(1);return()=>(crypto.getRandomValues(gr),gr[0])}if(He)try{var xr=t(Object(function(){var Hr=new Error("Cannot find module 'crypto'");throw Hr.code="MODULE_NOT_FOUND",Hr}()));return()=>xr.randomBytes(1)[0]}catch{}return()=>Lr("randomDevice")}());for(var lr=0;lr<er;lr++)fn[Kn+lr>>0>>>0]=Vn.Mb();return 0},ea:function(Vn,Kn,er){var lr=Ur();try{return ei(Vn)(Kn,er)}catch(gr){if(ni(lr),gr!==gr+0)throw gr;di(1,0)}},fa:function(Vn,Kn,er){var lr=Ur();try{return ei(Vn)(Kn,er)}catch(gr){if(ni(lr),gr!==gr+0)throw gr;di(1,0)}},J:function(Vn){var Kn=Ur();try{return ei(Vn)()}catch(er){if(ni(Kn),er!==er+0)throw er;di(1,0)}},e:function(Vn,Kn){var er=Ur();try{return ei(Vn)(Kn)}catch(lr){if(ni(er),lr!==lr+0)throw lr;di(1,0)}},N:function(Vn,Kn,er){var lr=Ur();try{return ei(Vn)(Kn,er)}catch(gr){if(ni(lr),gr!==gr+0)throw gr;di(1,0)}},O:function(Vn,Kn,er){var lr=Ur();try{return ei(Vn)(Kn,er)}catch(gr){if(ni(lr),gr!==gr+0)throw gr;di(1,0)}},j:function(Vn,Kn,er){var lr=Ur();try{return ei(Vn)(Kn,er)}catch(gr){if(ni(lr),gr!==gr+0)throw gr;di(1,0)}},o:function(Vn,Kn,er,lr){var gr=Ur();try{return ei(Vn)(Kn,er,lr)}catch(xr){if(ni(gr),xr!==xr+0)throw xr;di(1,0)}},p:function(Vn,Kn,er,lr,gr){var xr=Ur();try{return ei(Vn)(Kn,er,lr,gr)}catch(Hr){if(ni(xr),Hr!==Hr+0)throw Hr;di(1,0)}},M:function(Vn,Kn,er,lr,gr,xr){var Hr=Ur();try{return ei(Vn)(Kn,er,lr,gr,xr)}catch(pi){if(ni(Hr),pi!==pi+0)throw pi;di(1,0)}},r:function(Vn,Kn,er,lr,gr,xr){var Hr=Ur();try{return ei(Vn)(Kn,er,lr,gr,xr)}catch(pi){if(ni(Hr),pi!==pi+0)throw pi;di(1,0)}},v:function(Vn,Kn,er,lr,gr,xr,Hr){var pi=Ur();try{return ei(Vn)(Kn,er,lr,gr,xr,Hr)}catch(ri){if(ni(pi),ri!==ri+0)throw ri;di(1,0)}},K:function(Vn,Kn,er,lr,gr,xr,Hr,pi){var ri=Ur();try{return ei(Vn)(Kn,er,lr,gr,xr,Hr,pi)}catch(Ii){if(ni(ri),Ii!==Ii+0)throw Ii;di(1,0)}},D:function(Vn,Kn,er,lr,gr,xr,Hr,pi,ri,Ii,Yi,Li){var Rs=Ur();try{return ei(Vn)(Kn,er,lr,gr,xr,Hr,pi,ri,Ii,Yi,Li)}catch(Er){if(ni(Rs),Er!==Er+0)throw Er;di(1,0)}},X:function(Vn,Kn,er,lr,gr,xr,Hr,pi){var ri=Ur();try{return vo(Vn,Kn,er,lr,gr,xr,Hr,pi)}catch(Ii){if(ni(ri),Ii!==Ii+0)throw Ii;di(1,0)}},V:function(Vn,Kn,er,lr,gr,xr,Hr){var pi=Ur();try{return ci(Vn,Kn,er,lr,gr,xr,Hr)}catch(ri){if(ni(pi),ri!==ri+0)throw ri;di(1,0)}},U:function(Vn,Kn,er,lr,gr){var xr=Ur();try{return co(Vn,Kn,er,lr,gr)}catch(Hr){if(ni(xr),Hr!==Hr+0)throw Hr;di(1,0)}},Z:function(Vn,Kn,er,lr){var gr=Ur();try{return os(Vn,Kn,er,lr)}catch(xr){if(ni(gr),xr!==xr+0)throw xr;di(1,0)}},W:function(Vn){var Kn=Ur();try{return Hs(Vn)}catch(er){if(ni(Kn),er!==er+0)throw er;di(1,0)}},Y:function(Vn,Kn){var er=Ur();try{return ms(Vn,Kn)}catch(lr){if(ni(er),lr!==lr+0)throw lr;di(1,0)}},T:function(Vn,Kn,er){var lr=Ur();try{return Vs(Vn,Kn,er)}catch(gr){if(ni(lr),gr!==gr+0)throw gr;di(1,0)}},f:function(Vn){var Kn=Ur();try{ei(Vn)()}catch(er){if(ni(Kn),er!==er+0)throw er;di(1,0)}},q:function(Vn,Kn){var er=Ur();try{ei(Vn)(Kn)}catch(lr){if(ni(er),lr!==lr+0)throw lr;di(1,0)}},h:function(Vn,Kn,er){var lr=Ur();try{ei(Vn)(Kn,er)}catch(gr){if(ni(lr),gr!==gr+0)throw gr;di(1,0)}},da:function(Vn,Kn,er,lr){var gr=Ur();try{ei(Vn)(Kn,er,lr)}catch(xr){if(ni(gr),xr!==xr+0)throw xr;di(1,0)}},l:function(Vn,Kn,er,lr){var gr=Ur();try{ei(Vn)(Kn,er,lr)}catch(xr){if(ni(gr),xr!==xr+0)throw xr;di(1,0)}},t:function(Vn,Kn,er,lr,gr){var xr=Ur();try{ei(Vn)(Kn,er,lr,gr)}catch(Hr){if(ni(xr),Hr!==Hr+0)throw Hr;di(1,0)}},u:function(Vn,Kn,er,lr,gr,xr){var Hr=Ur();try{ei(Vn)(Kn,er,lr,gr,xr)}catch(pi){if(ni(Hr),pi!==pi+0)throw pi;di(1,0)}},x:function(Vn,Kn,er,lr,gr,xr,Hr){var pi=Ur();try{ei(Vn)(Kn,er,lr,gr,xr,Hr)}catch(ri){if(ni(pi),ri!==ri+0)throw ri;di(1,0)}},z:function(Vn,Kn,er,lr,gr,xr,Hr,pi){var ri=Ur();try{ei(Vn)(Kn,er,lr,gr,xr,Hr,pi)}catch(Ii){if(ni(ri),Ii!==Ii+0)throw Ii;di(1,0)}},ga:function(Vn,Kn,er,lr,gr,xr,Hr,pi,ri){var Ii=Ur();try{ei(Vn)(Kn,er,lr,gr,xr,Hr,pi,ri)}catch(Yi){if(ni(Ii),Yi!==Yi+0)throw Yi;di(1,0)}},A:function(Vn,Kn,er,lr,gr,xr,Hr,pi,ri,Ii,Yi){var Li=Ur();try{ei(Vn)(Kn,er,lr,gr,xr,Hr,pi,ri,Ii,Yi)}catch(Rs){if(ni(Li),Rs!==Rs+0)throw Rs;di(1,0)}},C:function(Vn,Kn,er,lr,gr,xr,Hr,pi,ri,Ii,Yi,Li,Rs,Er,Oi,Wi){var $s=Ur();try{ei(Vn)(Kn,er,lr,gr,xr,Hr,pi,ri,Ii,Yi,Li,Rs,Er,Oi,Wi)}catch(wo){if(ni($s),wo!==wo+0)throw wo;di(1,0)}},aa:function(Vn,Kn,er,lr,gr,xr,Hr,pi){var ri=Ur();try{Ps(Vn,Kn,er,lr,gr,xr,Hr,pi)}catch(Ii){if(ni(ri),Ii!==Ii+0)throw Ii;di(1,0)}},_:function(Vn,Kn,er,lr,gr,xr,Hr,pi,ri,Ii,Yi,Li){var Rs=Ur();try{ss(Vn,Kn,er,lr,gr,xr,Hr,pi,ri,Ii,Yi,Li)}catch(Er){if(ni(Rs),Er!==Er+0)throw Er;di(1,0)}},$:function(Vn,Kn,er,lr,gr,xr){var Hr=Ur();try{Is(Vn,Kn,er,lr,gr,xr)}catch(pi){if(ni(Hr),pi!==pi+0)throw pi;di(1,0)}},n:function(Vn){return Vn},F:function(Vn){Ci=Vn},ha:Ni,y:function(Vn,Kn,er,lr){return Ni(Vn,Kn,er,lr)}};(function(){function Vn(gr){xe.asm=gr.exports,pn=xe.asm.Ka,Tn(),vn=xe.asm.ib,zn.unshift(xe.asm.La),kr--,xe.monitorRunDependencies&&xe.monitorRunDependencies(kr),kr==0&&Vr&&(gr=Vr,Vr=null,gr())}function Kn(gr){Vn(gr.instance)}function er(gr){return function(){if(!Je&&(Be||qe)){if(typeof fetch=="function"&&!Sr.startsWith("file://"))return fetch(Sr,{credentials:"same-origin"}).then(function(xr){if(!xr.ok)throw"failed to load wasm binary file at '"+Sr+"'";return xr.arrayBuffer()}).catch(function(){return Yn()});if(Ce)return new Promise(function(xr,Hr){Ce(Sr,function(pi){xr(new Uint8Array(pi))},Hr)})}return Promise.resolve().then(function(){return Yn()})}().then(function(xr){return WebAssembly.instantiate(xr,lr)}).then(function(xr){return xr}).then(gr,function(xr){Ke("failed to asynchronously prepare wasm: "+xr),Lr(xr)})}var lr={a:As};if(kr++,xe.monitorRunDependencies&&xe.monitorRunDependencies(kr),xe.instantiateWasm)try{return xe.instantiateWasm(lr,Vn)}catch(gr){return Ke("Module.instantiateWasm callback failed with error: "+gr),!1}(Je||typeof WebAssembly.instantiateStreaming!="function"||Qr()||Sr.startsWith("file://")||He||typeof fetch!="function"?er(Kn):fetch(Sr,{credentials:"same-origin"}).then(function(gr){return WebAssembly.instantiateStreaming(gr,lr).then(Kn,function(xr){return Ke("wasm streaming compile failed: "+xr),Ke("falling back to ArrayBuffer instantiation"),er(Kn)})})).catch(Re)})(),xe.___wasm_call_ctors=function(){return(xe.___wasm_call_ctors=xe.asm.La).apply(null,arguments)},xe._OrtInit=function(){return(xe._OrtInit=xe.asm.Ma).apply(null,arguments)},xe._OrtCreateSessionOptions=function(){return(xe._OrtCreateSessionOptions=xe.asm.Na).apply(null,arguments)},xe._OrtAppendExecutionProvider=function(){return(xe._OrtAppendExecutionProvider=xe.asm.Oa).apply(null,arguments)},xe._OrtAddSessionConfigEntry=function(){return(xe._OrtAddSessionConfigEntry=xe.asm.Pa).apply(null,arguments)},xe._OrtReleaseSessionOptions=function(){return(xe._OrtReleaseSessionOptions=xe.asm.Qa).apply(null,arguments)},xe._OrtCreateSession=function(){return(xe._OrtCreateSession=xe.asm.Ra).apply(null,arguments)},xe._OrtReleaseSession=function(){return(xe._OrtReleaseSession=xe.asm.Sa).apply(null,arguments)},xe._OrtGetInputCount=function(){return(xe._OrtGetInputCount=xe.asm.Ta).apply(null,arguments)},xe._OrtGetOutputCount=function(){return(xe._OrtGetOutputCount=xe.asm.Ua).apply(null,arguments)},xe._OrtGetInputName=function(){return(xe._OrtGetInputName=xe.asm.Va).apply(null,arguments)},xe._OrtGetOutputName=function(){return(xe._OrtGetOutputName=xe.asm.Wa).apply(null,arguments)},xe._OrtFree=function(){return(xe._OrtFree=xe.asm.Xa).apply(null,arguments)},xe._OrtCreateTensor=function(){return(xe._OrtCreateTensor=xe.asm.Ya).apply(null,arguments)},xe._OrtGetTensorData=function(){return(xe._OrtGetTensorData=xe.asm.Za).apply(null,arguments)},xe._OrtReleaseTensor=function(){return(xe._OrtReleaseTensor=xe.asm._a).apply(null,arguments)},xe._OrtCreateRunOptions=function(){return(xe._OrtCreateRunOptions=xe.asm.$a).apply(null,arguments)},xe._OrtAddRunConfigEntry=function(){return(xe._OrtAddRunConfigEntry=xe.asm.ab).apply(null,arguments)},xe._OrtReleaseRunOptions=function(){return(xe._OrtReleaseRunOptions=xe.asm.bb).apply(null,arguments)},xe._OrtRun=function(){return(xe._OrtRun=xe.asm.cb).apply(null,arguments)},xe._OrtEndProfiling=function(){return(xe._OrtEndProfiling=xe.asm.db).apply(null,arguments)};var Ti,Bi=xe._malloc=function(){return(Bi=xe._malloc=xe.asm.eb).apply(null,arguments)},Qi=xe._free=function(){return(Qi=xe._free=xe.asm.fb).apply(null,arguments)},vs=xe._fflush=function(){return(vs=xe._fflush=xe.asm.gb).apply(null,arguments)},Ss=xe.___funcs_on_exit=function(){return(Ss=xe.___funcs_on_exit=xe.asm.hb).apply(null,arguments)},di=xe._setThrew=function(){return(di=xe._setThrew=xe.asm.jb).apply(null,arguments)},Ur=xe.stackSave=function(){return(Ur=xe.stackSave=xe.asm.kb).apply(null,arguments)},ni=xe.stackRestore=function(){return(ni=xe.stackRestore=xe.asm.lb).apply(null,arguments)},ro=xe.stackAlloc=function(){return(ro=xe.stackAlloc=xe.asm.mb).apply(null,arguments)},ps=xe.___cxa_can_catch=function(){return(ps=xe.___cxa_can_catch=xe.asm.nb).apply(null,arguments)},Os=xe.___cxa_is_pointer_type=function(){return(Os=xe.___cxa_is_pointer_type=xe.asm.ob).apply(null,arguments)},Hs=xe.dynCall_j=function(){return(Hs=xe.dynCall_j=xe.asm.pb).apply(null,arguments)},ci=xe.dynCall_iiiiij=function(){return(ci=xe.dynCall_iiiiij=xe.asm.qb).apply(null,arguments)},Vs=xe.dynCall_jii=function(){return(Vs=xe.dynCall_jii=xe.asm.rb).apply(null,arguments)},Ps=xe.dynCall_viiiiij=function(){return(Ps=xe.dynCall_viiiiij=xe.asm.sb).apply(null,arguments)},Is=xe.dynCall_vjji=function(){return(Is=xe.dynCall_vjji=xe.asm.tb).apply(null,arguments)},ss=xe.dynCall_viiijjjii=function(){return(ss=xe.dynCall_viiijjjii=xe.asm.ub).apply(null,arguments)},os=xe.dynCall_iij=function(){return(os=xe.dynCall_iij=xe.asm.vb).apply(null,arguments)},ms=xe.dynCall_ji=function(){return(ms=xe.dynCall_ji=xe.asm.wb).apply(null,arguments)},vo=xe.dynCall_iiiiiij=function(){return(vo=xe.dynCall_iiiiiij=xe.asm.xb).apply(null,arguments)},co=xe.dynCall_iiij=function(){return(co=xe.dynCall_iiij=xe.asm.yb).apply(null,arguments)};function js(){function Vn(){if(!Ti&&(Ti=!0,xe.calledRun=!0,!xn)){if(ui(zn),Pe(xe),xe.onRuntimeInitialized&&xe.onRuntimeInitialized(),xe.postRun)for(typeof xe.postRun=="function"&&(xe.postRun=[xe.postRun]);xe.postRun.length;){var Kn=xe.postRun.shift();Jn.unshift(Kn)}ui(Jn)}}if(!(0<kr)){if(xe.preRun)for(typeof xe.preRun=="function"&&(xe.preRun=[xe.preRun]);xe.preRun.length;)or();ui(Un),0<kr||(xe.setStatus?(xe.setStatus("Running..."),setTimeout(function(){setTimeout(function(){xe.setStatus("")},1),Vn()},1)):Vn())}}if(xe.UTF8ToString=$n,xe.stringToUTF8=function(Vn,Kn,er){return Sn(Vn,mn,Kn,er)},xe.lengthBytesUTF8=Bn,xe.stackSave=Ur,xe.stackRestore=ni,xe.stackAlloc=ro,Vr=function Vn(){Ti||js(),Ti||(Vr=Vn)},xe.preInit)for(typeof xe.preInit=="function"&&(xe.preInit=[xe.preInit]);0<xe.preInit.length;)xe.preInit.pop()();return js(),Ee.ready});r.exports=Te},4537:r=>{r.exports=function(e,t){for(var _e=new Array(arguments.length-1),Te=0,Ee=2,xe=!0;Ee<arguments.length;)_e[Te++]=arguments[Ee++];return new Promise(function(Pe,Re){_e[Te]=function(ke){if(xe)if(xe=!1,ke)Re(ke);else{for(var Ce=new Array(arguments.length-1),Se=0;Se<Ce.length;)Ce[Se++]=arguments[Se];Pe.apply(null,Ce)}};try{e.apply(t||null,_e)}catch(ke){xe&&(xe=!1,Re(ke))}})}},7419:(r,e)=>{var t=e;t.length=function(Pe){var Re=Pe.length;if(!Re)return 0;for(var ke=0;--Re%4>1&&Pe.charAt(Re)==="=";)++ke;return Math.ceil(3*Pe.length)/4-ke};for(var _e=new Array(64),Te=new Array(123),Ee=0;Ee<64;)Te[_e[Ee]=Ee<26?Ee+65:Ee<52?Ee+71:Ee<62?Ee-4:Ee-59|43]=Ee++;t.encode=function(Pe,Re,ke){for(var Ce,Se=null,Ae=[],Ie=0,Me=0;Re<ke;){var Fe=Pe[Re++];switch(Me){case 0:Ae[Ie++]=_e[Fe>>2],Ce=(3&Fe)<<4,Me=1;break;case 1:Ae[Ie++]=_e[Ce|Fe>>4],Ce=(15&Fe)<<2,Me=2;break;case 2:Ae[Ie++]=_e[Ce|Fe>>6],Ae[Ie++]=_e[63&Fe],Me=0}Ie>8191&&((Se||(Se=[])).push(String.fromCharCode.apply(String,Ae)),Ie=0)}return Me&&(Ae[Ie++]=_e[Ce],Ae[Ie++]=61,Me===1&&(Ae[Ie++]=61)),Se?(Ie&&Se.push(String.fromCharCode.apply(String,Ae.slice(0,Ie))),Se.join("")):String.fromCharCode.apply(String,Ae.slice(0,Ie))};var xe="invalid encoding";t.decode=function(Pe,Re,ke){for(var Ce,Se=ke,Ae=0,Ie=0;Ie<Pe.length;){var Me=Pe.charCodeAt(Ie++);if(Me===61&&Ae>1)break;if((Me=Te[Me])===void 0)throw Error(xe);switch(Ae){case 0:Ce=Me,Ae=1;break;case 1:Re[ke++]=Ce<<2|(48&Me)>>4,Ce=Me,Ae=2;break;case 2:Re[ke++]=(15&Ce)<<4|(60&Me)>>2,Ce=Me,Ae=3;break;case 3:Re[ke++]=(3&Ce)<<6|Me,Ae=0}}if(Ae===1)throw Error(xe);return ke-Se},t.test=function(Pe){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(Pe)}},9211:r=>{function e(){this._listeners={}}r.exports=e,e.prototype.on=function(t,_e,Te){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:_e,ctx:Te||this}),this},e.prototype.off=function(t,_e){if(t===void 0)this._listeners={};else if(_e===void 0)this._listeners[t]=[];else for(var Te=this._listeners[t],Ee=0;Ee<Te.length;)Te[Ee].fn===_e?Te.splice(Ee,1):++Ee;return this},e.prototype.emit=function(t){var _e=this._listeners[t];if(_e){for(var Te=[],Ee=1;Ee<arguments.length;)Te.push(arguments[Ee++]);for(Ee=0;Ee<_e.length;)_e[Ee].fn.apply(_e[Ee++].ctx,Te)}return this}},945:r=>{function e(xe){return typeof Float32Array<"u"?function(){var Pe=new Float32Array([-0]),Re=new Uint8Array(Pe.buffer),ke=Re[3]===128;function Ce(Me,Fe,Ve){Pe[0]=Me,Fe[Ve]=Re[0],Fe[Ve+1]=Re[1],Fe[Ve+2]=Re[2],Fe[Ve+3]=Re[3]}function Se(Me,Fe,Ve){Pe[0]=Me,Fe[Ve]=Re[3],Fe[Ve+1]=Re[2],Fe[Ve+2]=Re[1],Fe[Ve+3]=Re[0]}function Ae(Me,Fe){return Re[0]=Me[Fe],Re[1]=Me[Fe+1],Re[2]=Me[Fe+2],Re[3]=Me[Fe+3],Pe[0]}function Ie(Me,Fe){return Re[3]=Me[Fe],Re[2]=Me[Fe+1],Re[1]=Me[Fe+2],Re[0]=Me[Fe+3],Pe[0]}xe.writeFloatLE=ke?Ce:Se,xe.writeFloatBE=ke?Se:Ce,xe.readFloatLE=ke?Ae:Ie,xe.readFloatBE=ke?Ie:Ae}():function(){function Pe(ke,Ce,Se,Ae){var Ie=Ce<0?1:0;if(Ie&&(Ce=-Ce),Ce===0)ke(1/Ce>0?0:2147483648,Se,Ae);else if(isNaN(Ce))ke(2143289344,Se,Ae);else if(Ce>34028234663852886e22)ke((Ie<<31|2139095040)>>>0,Se,Ae);else if(Ce<11754943508222875e-54)ke((Ie<<31|Math.round(Ce/1401298464324817e-60))>>>0,Se,Ae);else{var Me=Math.floor(Math.log(Ce)/Math.LN2);ke((Ie<<31|Me+127<<23|8388607&Math.round(Ce*Math.pow(2,-Me)*8388608))>>>0,Se,Ae)}}function Re(ke,Ce,Se){var Ae=ke(Ce,Se),Ie=2*(Ae>>31)+1,Me=Ae>>>23&255,Fe=8388607&Ae;return Me===255?Fe?NaN:Ie*(1/0):Me===0?1401298464324817e-60*Ie*Fe:Ie*Math.pow(2,Me-150)*(Fe+8388608)}xe.writeFloatLE=Pe.bind(null,t),xe.writeFloatBE=Pe.bind(null,_e),xe.readFloatLE=Re.bind(null,Te),xe.readFloatBE=Re.bind(null,Ee)}(),typeof Float64Array<"u"?function(){var Pe=new Float64Array([-0]),Re=new Uint8Array(Pe.buffer),ke=Re[7]===128;function Ce(Me,Fe,Ve){Pe[0]=Me,Fe[Ve]=Re[0],Fe[Ve+1]=Re[1],Fe[Ve+2]=Re[2],Fe[Ve+3]=Re[3],Fe[Ve+4]=Re[4],Fe[Ve+5]=Re[5],Fe[Ve+6]=Re[6],Fe[Ve+7]=Re[7]}function Se(Me,Fe,Ve){Pe[0]=Me,Fe[Ve]=Re[7],Fe[Ve+1]=Re[6],Fe[Ve+2]=Re[5],Fe[Ve+3]=Re[4],Fe[Ve+4]=Re[3],Fe[Ve+5]=Re[2],Fe[Ve+6]=Re[1],Fe[Ve+7]=Re[0]}function Ae(Me,Fe){return Re[0]=Me[Fe],Re[1]=Me[Fe+1],Re[2]=Me[Fe+2],Re[3]=Me[Fe+3],Re[4]=Me[Fe+4],Re[5]=Me[Fe+5],Re[6]=Me[Fe+6],Re[7]=Me[Fe+7],Pe[0]}function Ie(Me,Fe){return Re[7]=Me[Fe],Re[6]=Me[Fe+1],Re[5]=Me[Fe+2],Re[4]=Me[Fe+3],Re[3]=Me[Fe+4],Re[2]=Me[Fe+5],Re[1]=Me[Fe+6],Re[0]=Me[Fe+7],Pe[0]}xe.writeDoubleLE=ke?Ce:Se,xe.writeDoubleBE=ke?Se:Ce,xe.readDoubleLE=ke?Ae:Ie,xe.readDoubleBE=ke?Ie:Ae}():function(){function Pe(ke,Ce,Se,Ae,Ie,Me){var Fe=Ae<0?1:0;if(Fe&&(Ae=-Ae),Ae===0)ke(0,Ie,Me+Ce),ke(1/Ae>0?0:2147483648,Ie,Me+Se);else if(isNaN(Ae))ke(0,Ie,Me+Ce),ke(2146959360,Ie,Me+Se);else if(Ae>17976931348623157e292)ke(0,Ie,Me+Ce),ke((Fe<<31|2146435072)>>>0,Ie,Me+Se);else{var Ve;if(Ae<22250738585072014e-324)ke((Ve=Ae/5e-324)>>>0,Ie,Me+Ce),ke((Fe<<31|Ve/4294967296)>>>0,Ie,Me+Se);else{var je=Math.floor(Math.log(Ae)/Math.LN2);je===1024&&(je=1023),ke(4503599627370496*(Ve=Ae*Math.pow(2,-je))>>>0,Ie,Me+Ce),ke((Fe<<31|je+1023<<20|1048576*Ve&1048575)>>>0,Ie,Me+Se)}}}function Re(ke,Ce,Se,Ae,Ie){var Me=ke(Ae,Ie+Ce),Fe=ke(Ae,Ie+Se),Ve=2*(Fe>>31)+1,je=Fe>>>20&2047,Be=4294967296*(1048575&Fe)+Me;return je===2047?Be?NaN:Ve*(1/0):je===0?5e-324*Ve*Be:Ve*Math.pow(2,je-1075)*(Be+4503599627370496)}xe.writeDoubleLE=Pe.bind(null,t,0,4),xe.writeDoubleBE=Pe.bind(null,_e,4,0),xe.readDoubleLE=Re.bind(null,Te,0,4),xe.readDoubleBE=Re.bind(null,Ee,4,0)}(),xe}function t(xe,Pe,Re){Pe[Re]=255&xe,Pe[Re+1]=xe>>>8&255,Pe[Re+2]=xe>>>16&255,Pe[Re+3]=xe>>>24}function _e(xe,Pe,Re){Pe[Re]=xe>>>24,Pe[Re+1]=xe>>>16&255,Pe[Re+2]=xe>>>8&255,Pe[Re+3]=255&xe}function Te(xe,Pe){return(xe[Pe]|xe[Pe+1]<<8|xe[Pe+2]<<16|xe[Pe+3]<<24)>>>0}function Ee(xe,Pe){return(xe[Pe]<<24|xe[Pe+1]<<16|xe[Pe+2]<<8|xe[Pe+3])>>>0}r.exports=e(e)},7199:module=>{function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(r){}return null}module.exports=inquire},6662:r=>{r.exports=function(e,t,_e){var Te=_e||8192,Ee=Te>>>1,xe=null,Pe=Te;return function(Re){if(Re<1||Re>Ee)return e(Re);Pe+Re>Te&&(xe=e(Te),Pe=0);var ke=t.call(xe,Pe,Pe+=Re);return 7&Pe&&(Pe=1+(7|Pe)),ke}}},4997:(r,e)=>{var t=e;t.length=function(_e){for(var Te=0,Ee=0,xe=0;xe<_e.length;++xe)(Ee=_e.charCodeAt(xe))<128?Te+=1:Ee<2048?Te+=2:(64512&Ee)==55296&&(64512&_e.charCodeAt(xe+1))==56320?(++xe,Te+=4):Te+=3;return Te},t.read=function(_e,Te,Ee){if(Ee-Te<1)return"";for(var xe,Pe=null,Re=[],ke=0;Te<Ee;)(xe=_e[Te++])<128?Re[ke++]=xe:xe>191&&xe<224?Re[ke++]=(31&xe)<<6|63&_e[Te++]:xe>239&&xe<365?(xe=((7&xe)<<18|(63&_e[Te++])<<12|(63&_e[Te++])<<6|63&_e[Te++])-65536,Re[ke++]=55296+(xe>>10),Re[ke++]=56320+(1023&xe)):Re[ke++]=(15&xe)<<12|(63&_e[Te++])<<6|63&_e[Te++],ke>8191&&((Pe||(Pe=[])).push(String.fromCharCode.apply(String,Re)),ke=0);return Pe?(ke&&Pe.push(String.fromCharCode.apply(String,Re.slice(0,ke))),Pe.join("")):String.fromCharCode.apply(String,Re.slice(0,ke))},t.write=function(_e,Te,Ee){for(var xe,Pe,Re=Ee,ke=0;ke<_e.length;++ke)(xe=_e.charCodeAt(ke))<128?Te[Ee++]=xe:xe<2048?(Te[Ee++]=xe>>6|192,Te[Ee++]=63&xe|128):(64512&xe)==55296&&(64512&(Pe=_e.charCodeAt(ke+1)))==56320?(xe=65536+((1023&xe)<<10)+(1023&Pe),++ke,Te[Ee++]=xe>>18|240,Te[Ee++]=xe>>12&63|128,Te[Ee++]=xe>>6&63|128,Te[Ee++]=63&xe|128):(Te[Ee++]=xe>>12|224,Te[Ee++]=xe>>6&63|128,Te[Ee++]=63&xe|128);return Ee-Re}},3442:(r,e)=>{e.__esModule=!0;var t=function(){function _e(Te){if(!Te)throw new TypeError("Invalid argument; `value` has no value.");this.value=_e.EMPTY,Te&&_e.isGuid(Te)&&(this.value=Te)}return _e.isGuid=function(Te){var Ee=Te.toString();return Te&&(Te instanceof _e||_e.validator.test(Ee))},_e.create=function(){return new _e([_e.gen(2),_e.gen(1),_e.gen(1),_e.gen(1),_e.gen(3)].join("-"))},_e.createEmpty=function(){return new _e("emptyguid")},_e.parse=function(Te){return new _e(Te)},_e.raw=function(){return[_e.gen(2),_e.gen(1),_e.gen(1),_e.gen(1),_e.gen(3)].join("-")},_e.gen=function(Te){for(var Ee="",xe=0;xe<Te;xe++)Ee+=(65536*(1+Math.random())|0).toString(16).substring(1);return Ee},_e.prototype.equals=function(Te){return _e.isGuid(Te)&&this.value===Te.toString()},_e.prototype.isEmpty=function(){return this.value===_e.EMPTY},_e.prototype.toString=function(){return this.value},_e.prototype.toJSON=function(){return{value:this.value}},_e.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),_e.EMPTY="00000000-0000-0000-0000-000000000000",_e}();e.Guid=t},3720:r=>{r.exports=t;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function t(Ye,pn,un){this.low=0|Ye,this.high=0|pn,this.unsigned=!!un}function _e(Ye){return(Ye&&Ye.__isLong__)===!0}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0}),t.isLong=_e;var Te={},Ee={};function xe(Ye,pn){var un,fn,mn;return pn?(mn=0<=(Ye>>>=0)&&Ye<256)&&(fn=Ee[Ye])?fn:(un=Re(Ye,(0|Ye)<0?-1:0,!0),mn&&(Ee[Ye]=un),un):(mn=-128<=(Ye|=0)&&Ye<128)&&(fn=Te[Ye])?fn:(un=Re(Ye,Ye<0?-1:0,!1),mn&&(Te[Ye]=un),un)}function Pe(Ye,pn){if(isNaN(Ye))return pn?je:Ve;if(pn){if(Ye<0)return je;if(Ye>=Ie)return Je}else{if(Ye<=-Me)return Qe;if(Ye+1>=Me)return Xe}return Ye<0?Pe(-Ye,pn).neg():Re(Ye%Ae|0,Ye/Ae|0,pn)}function Re(Ye,pn,un){return new t(Ye,pn,un)}t.fromInt=xe,t.fromNumber=Pe,t.fromBits=Re;var ke=Math.pow;function Ce(Ye,pn,un){if(Ye.length===0)throw Error("empty string");if(Ye==="NaN"||Ye==="Infinity"||Ye==="+Infinity"||Ye==="-Infinity")return Ve;if(typeof pn=="number"?(un=pn,pn=!1):pn=!!pn,(un=un||10)<2||36<un)throw RangeError("radix");var fn;if((fn=Ye.indexOf("-"))>0)throw Error("interior hyphen");if(fn===0)return Ce(Ye.substring(1),pn,un).neg();for(var mn=Pe(ke(un,8)),wn=Ve,Pn=0;Pn<Ye.length;Pn+=8){var xn=Math.min(8,Ye.length-Pn),In=parseInt(Ye.substring(Pn,Pn+xn),un);if(xn<8){var Ln=Pe(ke(un,xn));wn=wn.mul(Ln).add(Pe(In))}else wn=(wn=wn.mul(mn)).add(Pe(In))}return wn.unsigned=pn,wn}function Se(Ye,pn){return typeof Ye=="number"?Pe(Ye,pn):typeof Ye=="string"?Ce(Ye,pn):Re(Ye.low,Ye.high,typeof pn=="boolean"?pn:Ye.unsigned)}t.fromString=Ce,t.fromValue=Se;var Ae=4294967296,Ie=Ae*Ae,Me=Ie/2,Fe=xe(1<<24),Ve=xe(0);t.ZERO=Ve;var je=xe(0,!0);t.UZERO=je;var Be=xe(1);t.ONE=Be;var qe=xe(1,!0);t.UONE=qe;var He=xe(-1);t.NEG_ONE=He;var Xe=Re(-1,2147483647,!1);t.MAX_VALUE=Xe;var Je=Re(-1,-1,!0);t.MAX_UNSIGNED_VALUE=Je;var Qe=Re(0,-2147483648,!1);t.MIN_VALUE=Qe;var Ke=t.prototype;Ke.toInt=function(){return this.unsigned?this.low>>>0:this.low},Ke.toNumber=function(){return this.unsigned?(this.high>>>0)*Ae+(this.low>>>0):this.high*Ae+(this.low>>>0)},Ke.toString=function(Ye){if((Ye=Ye||10)<2||36<Ye)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(Qe)){var pn=Pe(Ye),un=this.div(pn),fn=un.mul(pn).sub(this);return un.toString(Ye)+fn.toInt().toString(Ye)}return"-"+this.neg().toString(Ye)}for(var mn=Pe(ke(Ye,6),this.unsigned),wn=this,Pn="";;){var xn=wn.div(mn),In=(wn.sub(xn.mul(mn)).toInt()>>>0).toString(Ye);if((wn=xn).isZero())return In+Pn;for(;In.length<6;)In="0"+In;Pn=""+In+Pn}},Ke.getHighBits=function(){return this.high},Ke.getHighBitsUnsigned=function(){return this.high>>>0},Ke.getLowBits=function(){return this.low},Ke.getLowBitsUnsigned=function(){return this.low>>>0},Ke.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Qe)?64:this.neg().getNumBitsAbs();for(var Ye=this.high!=0?this.high:this.low,pn=31;pn>0&&(Ye&1<<pn)==0;pn--);return this.high!=0?pn+33:pn+1},Ke.isZero=function(){return this.high===0&&this.low===0},Ke.eqz=Ke.isZero,Ke.isNegative=function(){return!this.unsigned&&this.high<0},Ke.isPositive=function(){return this.unsigned||this.high>=0},Ke.isOdd=function(){return(1&this.low)==1},Ke.isEven=function(){return(1&this.low)==0},Ke.equals=function(Ye){return _e(Ye)||(Ye=Se(Ye)),(this.unsigned===Ye.unsigned||this.high>>>31!=1||Ye.high>>>31!=1)&&this.high===Ye.high&&this.low===Ye.low},Ke.eq=Ke.equals,Ke.notEquals=function(Ye){return!this.eq(Ye)},Ke.neq=Ke.notEquals,Ke.ne=Ke.notEquals,Ke.lessThan=function(Ye){return this.comp(Ye)<0},Ke.lt=Ke.lessThan,Ke.lessThanOrEqual=function(Ye){return this.comp(Ye)<=0},Ke.lte=Ke.lessThanOrEqual,Ke.le=Ke.lessThanOrEqual,Ke.greaterThan=function(Ye){return this.comp(Ye)>0},Ke.gt=Ke.greaterThan,Ke.greaterThanOrEqual=function(Ye){return this.comp(Ye)>=0},Ke.gte=Ke.greaterThanOrEqual,Ke.ge=Ke.greaterThanOrEqual,Ke.compare=function(Ye){if(_e(Ye)||(Ye=Se(Ye)),this.eq(Ye))return 0;var pn=this.isNegative(),un=Ye.isNegative();return pn&&!un?-1:!pn&&un?1:this.unsigned?Ye.high>>>0>this.high>>>0||Ye.high===this.high&&Ye.low>>>0>this.low>>>0?-1:1:this.sub(Ye).isNegative()?-1:1},Ke.comp=Ke.compare,Ke.negate=function(){return!this.unsigned&&this.eq(Qe)?Qe:this.not().add(Be)},Ke.neg=Ke.negate,Ke.add=function(Ye){_e(Ye)||(Ye=Se(Ye));var pn=this.high>>>16,un=65535&this.high,fn=this.low>>>16,mn=65535&this.low,wn=Ye.high>>>16,Pn=65535&Ye.high,xn=Ye.low>>>16,In=0,Ln=0,$n=0,Sn=0;return $n+=(Sn+=mn+(65535&Ye.low))>>>16,Ln+=($n+=fn+xn)>>>16,In+=(Ln+=un+Pn)>>>16,In+=pn+wn,Re(($n&=65535)<<16|(Sn&=65535),(In&=65535)<<16|(Ln&=65535),this.unsigned)},Ke.subtract=function(Ye){return _e(Ye)||(Ye=Se(Ye)),this.add(Ye.neg())},Ke.sub=Ke.subtract,Ke.multiply=function(Ye){if(this.isZero())return Ve;if(_e(Ye)||(Ye=Se(Ye)),e)return Re(e.mul(this.low,this.high,Ye.low,Ye.high),e.get_high(),this.unsigned);if(Ye.isZero())return Ve;if(this.eq(Qe))return Ye.isOdd()?Qe:Ve;if(Ye.eq(Qe))return this.isOdd()?Qe:Ve;if(this.isNegative())return Ye.isNegative()?this.neg().mul(Ye.neg()):this.neg().mul(Ye).neg();if(Ye.isNegative())return this.mul(Ye.neg()).neg();if(this.lt(Fe)&&Ye.lt(Fe))return Pe(this.toNumber()*Ye.toNumber(),this.unsigned);var pn=this.high>>>16,un=65535&this.high,fn=this.low>>>16,mn=65535&this.low,wn=Ye.high>>>16,Pn=65535&Ye.high,xn=Ye.low>>>16,In=65535&Ye.low,Ln=0,$n=0,Sn=0,Bn=0;return Sn+=(Bn+=mn*In)>>>16,$n+=(Sn+=fn*In)>>>16,Sn&=65535,$n+=(Sn+=mn*xn)>>>16,Ln+=($n+=un*In)>>>16,$n&=65535,Ln+=($n+=fn*xn)>>>16,$n&=65535,Ln+=($n+=mn*Pn)>>>16,Ln+=pn*In+un*xn+fn*Pn+mn*wn,Re((Sn&=65535)<<16|(Bn&=65535),(Ln&=65535)<<16|($n&=65535),this.unsigned)},Ke.mul=Ke.multiply,Ke.divide=function(Ye){if(_e(Ye)||(Ye=Se(Ye)),Ye.isZero())throw Error("division by zero");var pn,un,fn;if(e)return this.unsigned||this.high!==-2147483648||Ye.low!==-1||Ye.high!==-1?Re((this.unsigned?e.div_u:e.div_s)(this.low,this.high,Ye.low,Ye.high),e.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?je:Ve;if(this.unsigned){if(Ye.unsigned||(Ye=Ye.toUnsigned()),Ye.gt(this))return je;if(Ye.gt(this.shru(1)))return qe;fn=je}else{if(this.eq(Qe))return Ye.eq(Be)||Ye.eq(He)?Qe:Ye.eq(Qe)?Be:(pn=this.shr(1).div(Ye).shl(1)).eq(Ve)?Ye.isNegative()?Be:He:(un=this.sub(Ye.mul(pn)),fn=pn.add(un.div(Ye)));if(Ye.eq(Qe))return this.unsigned?je:Ve;if(this.isNegative())return Ye.isNegative()?this.neg().div(Ye.neg()):this.neg().div(Ye).neg();if(Ye.isNegative())return this.div(Ye.neg()).neg();fn=Ve}for(un=this;un.gte(Ye);){pn=Math.max(1,Math.floor(un.toNumber()/Ye.toNumber()));for(var mn=Math.ceil(Math.log(pn)/Math.LN2),wn=mn<=48?1:ke(2,mn-48),Pn=Pe(pn),xn=Pn.mul(Ye);xn.isNegative()||xn.gt(un);)xn=(Pn=Pe(pn-=wn,this.unsigned)).mul(Ye);Pn.isZero()&&(Pn=Be),fn=fn.add(Pn),un=un.sub(xn)}return fn},Ke.div=Ke.divide,Ke.modulo=function(Ye){return _e(Ye)||(Ye=Se(Ye)),e?Re((this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,Ye.low,Ye.high),e.get_high(),this.unsigned):this.sub(this.div(Ye).mul(Ye))},Ke.mod=Ke.modulo,Ke.rem=Ke.modulo,Ke.not=function(){return Re(~this.low,~this.high,this.unsigned)},Ke.and=function(Ye){return _e(Ye)||(Ye=Se(Ye)),Re(this.low&Ye.low,this.high&Ye.high,this.unsigned)},Ke.or=function(Ye){return _e(Ye)||(Ye=Se(Ye)),Re(this.low|Ye.low,this.high|Ye.high,this.unsigned)},Ke.xor=function(Ye){return _e(Ye)||(Ye=Se(Ye)),Re(this.low^Ye.low,this.high^Ye.high,this.unsigned)},Ke.shiftLeft=function(Ye){return _e(Ye)&&(Ye=Ye.toInt()),(Ye&=63)==0?this:Ye<32?Re(this.low<<Ye,this.high<<Ye|this.low>>>32-Ye,this.unsigned):Re(0,this.low<<Ye-32,this.unsigned)},Ke.shl=Ke.shiftLeft,Ke.shiftRight=function(Ye){return _e(Ye)&&(Ye=Ye.toInt()),(Ye&=63)==0?this:Ye<32?Re(this.low>>>Ye|this.high<<32-Ye,this.high>>Ye,this.unsigned):Re(this.high>>Ye-32,this.high>=0?0:-1,this.unsigned)},Ke.shr=Ke.shiftRight,Ke.shiftRightUnsigned=function(Ye){if(_e(Ye)&&(Ye=Ye.toInt()),(Ye&=63)==0)return this;var pn=this.high;return Ye<32?Re(this.low>>>Ye|pn<<32-Ye,pn>>>Ye,this.unsigned):Re(Ye===32?pn:pn>>>Ye-32,0,this.unsigned)},Ke.shru=Ke.shiftRightUnsigned,Ke.shr_u=Ke.shiftRightUnsigned,Ke.toSigned=function(){return this.unsigned?Re(this.low,this.high,!1):this},Ke.toUnsigned=function(){return this.unsigned?this:Re(this.low,this.high,!0)},Ke.toBytes=function(Ye){return Ye?this.toBytesLE():this.toBytesBE()},Ke.toBytesLE=function(){var Ye=this.high,pn=this.low;return[255&pn,pn>>>8&255,pn>>>16&255,pn>>>24,255&Ye,Ye>>>8&255,Ye>>>16&255,Ye>>>24]},Ke.toBytesBE=function(){var Ye=this.high,pn=this.low;return[Ye>>>24,Ye>>>16&255,Ye>>>8&255,255&Ye,pn>>>24,pn>>>16&255,pn>>>8&255,255&pn]},t.fromBytes=function(Ye,pn,un){return un?t.fromBytesLE(Ye,pn):t.fromBytesBE(Ye,pn)},t.fromBytesLE=function(Ye,pn){return new t(Ye[0]|Ye[1]<<8|Ye[2]<<16|Ye[3]<<24,Ye[4]|Ye[5]<<8|Ye[6]<<16|Ye[7]<<24,pn)},t.fromBytesBE=function(Ye,pn){return new t(Ye[4]<<24|Ye[5]<<16|Ye[6]<<8|Ye[7],Ye[0]<<24|Ye[1]<<16|Ye[2]<<8|Ye[3],pn)}},1446:(r,e,t)=>{var _e,Te,Ee,xe=t(2100),Pe=xe.Reader,Re=xe.Writer,ke=xe.util,Ce=xe.roots.default||(xe.roots.default={});Ce.onnx=((Ee={}).Version=(_e={},(Te=Object.create(_e))[_e[0]="_START_VERSION"]=0,Te[_e[1]="IR_VERSION_2017_10_10"]=1,Te[_e[2]="IR_VERSION_2017_10_30"]=2,Te[_e[3]="IR_VERSION_2017_11_3"]=3,Te[_e[4]="IR_VERSION_2019_1_22"]=4,Te[_e[5]="IR_VERSION"]=5,Te),Ee.AttributeProto=function(){function Se(Ae){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],Ae)for(var Ie=Object.keys(Ae),Me=0;Me<Ie.length;++Me)Ae[Ie[Me]]!=null&&(this[Ie[Me]]=Ae[Ie[Me]])}return Se.prototype.name="",Se.prototype.refAttrName="",Se.prototype.docString="",Se.prototype.type=0,Se.prototype.f=0,Se.prototype.i=ke.Long?ke.Long.fromBits(0,0,!1):0,Se.prototype.s=ke.newBuffer([]),Se.prototype.t=null,Se.prototype.g=null,Se.prototype.floats=ke.emptyArray,Se.prototype.ints=ke.emptyArray,Se.prototype.strings=ke.emptyArray,Se.prototype.tensors=ke.emptyArray,Se.prototype.graphs=ke.emptyArray,Se.create=function(Ae){return new Se(Ae)},Se.encode=function(Ae,Ie){if(Ie||(Ie=Re.create()),Ae.name!=null&&Ae.hasOwnProperty("name")&&Ie.uint32(10).string(Ae.name),Ae.f!=null&&Ae.hasOwnProperty("f")&&Ie.uint32(21).float(Ae.f),Ae.i!=null&&Ae.hasOwnProperty("i")&&Ie.uint32(24).int64(Ae.i),Ae.s!=null&&Ae.hasOwnProperty("s")&&Ie.uint32(34).bytes(Ae.s),Ae.t!=null&&Ae.hasOwnProperty("t")&&Ce.onnx.TensorProto.encode(Ae.t,Ie.uint32(42).fork()).ldelim(),Ae.g!=null&&Ae.hasOwnProperty("g")&&Ce.onnx.GraphProto.encode(Ae.g,Ie.uint32(50).fork()).ldelim(),Ae.floats!=null&&Ae.floats.length){Ie.uint32(58).fork();for(var Me=0;Me<Ae.floats.length;++Me)Ie.float(Ae.floats[Me]);Ie.ldelim()}if(Ae.ints!=null&&Ae.ints.length){for(Ie.uint32(66).fork(),Me=0;Me<Ae.ints.length;++Me)Ie.int64(Ae.ints[Me]);Ie.ldelim()}if(Ae.strings!=null&&Ae.strings.length)for(Me=0;Me<Ae.strings.length;++Me)Ie.uint32(74).bytes(Ae.strings[Me]);if(Ae.tensors!=null&&Ae.tensors.length)for(Me=0;Me<Ae.tensors.length;++Me)Ce.onnx.TensorProto.encode(Ae.tensors[Me],Ie.uint32(82).fork()).ldelim();if(Ae.graphs!=null&&Ae.graphs.length)for(Me=0;Me<Ae.graphs.length;++Me)Ce.onnx.GraphProto.encode(Ae.graphs[Me],Ie.uint32(90).fork()).ldelim();return Ae.docString!=null&&Ae.hasOwnProperty("docString")&&Ie.uint32(106).string(Ae.docString),Ae.type!=null&&Ae.hasOwnProperty("type")&&Ie.uint32(160).int32(Ae.type),Ae.refAttrName!=null&&Ae.hasOwnProperty("refAttrName")&&Ie.uint32(170).string(Ae.refAttrName),Ie},Se.encodeDelimited=function(Ae,Ie){return this.encode(Ae,Ie).ldelim()},Se.decode=function(Ae,Ie){Ae instanceof Pe||(Ae=Pe.create(Ae));for(var Me=Ie===void 0?Ae.len:Ae.pos+Ie,Fe=new Ce.onnx.AttributeProto;Ae.pos<Me;){var Ve=Ae.uint32();switch(Ve>>>3){case 1:Fe.name=Ae.string();break;case 21:Fe.refAttrName=Ae.string();break;case 13:Fe.docString=Ae.string();break;case 20:Fe.type=Ae.int32();break;case 2:Fe.f=Ae.float();break;case 3:Fe.i=Ae.int64();break;case 4:Fe.s=Ae.bytes();break;case 5:Fe.t=Ce.onnx.TensorProto.decode(Ae,Ae.uint32());break;case 6:Fe.g=Ce.onnx.GraphProto.decode(Ae,Ae.uint32());break;case 7:if(Fe.floats&&Fe.floats.length||(Fe.floats=[]),(7&Ve)==2)for(var je=Ae.uint32()+Ae.pos;Ae.pos<je;)Fe.floats.push(Ae.float());else Fe.floats.push(Ae.float());break;case 8:if(Fe.ints&&Fe.ints.length||(Fe.ints=[]),(7&Ve)==2)for(je=Ae.uint32()+Ae.pos;Ae.pos<je;)Fe.ints.push(Ae.int64());else Fe.ints.push(Ae.int64());break;case 9:Fe.strings&&Fe.strings.length||(Fe.strings=[]),Fe.strings.push(Ae.bytes());break;case 10:Fe.tensors&&Fe.tensors.length||(Fe.tensors=[]),Fe.tensors.push(Ce.onnx.TensorProto.decode(Ae,Ae.uint32()));break;case 11:Fe.graphs&&Fe.graphs.length||(Fe.graphs=[]),Fe.graphs.push(Ce.onnx.GraphProto.decode(Ae,Ae.uint32()));break;default:Ae.skipType(7&Ve)}}return Fe},Se.decodeDelimited=function(Ae){return Ae instanceof Pe||(Ae=new Pe(Ae)),this.decode(Ae,Ae.uint32())},Se.verify=function(Ae){if(typeof Ae!="object"||Ae===null)return"object expected";if(Ae.name!=null&&Ae.hasOwnProperty("name")&&!ke.isString(Ae.name))return"name: string expected";if(Ae.refAttrName!=null&&Ae.hasOwnProperty("refAttrName")&&!ke.isString(Ae.refAttrName))return"refAttrName: string expected";if(Ae.docString!=null&&Ae.hasOwnProperty("docString")&&!ke.isString(Ae.docString))return"docString: string expected";if(Ae.type!=null&&Ae.hasOwnProperty("type"))switch(Ae.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(Ae.f!=null&&Ae.hasOwnProperty("f")&&typeof Ae.f!="number")return"f: number expected";if(Ae.i!=null&&Ae.hasOwnProperty("i")&&!(ke.isInteger(Ae.i)||Ae.i&&ke.isInteger(Ae.i.low)&&ke.isInteger(Ae.i.high)))return"i: integer|Long expected";if(Ae.s!=null&&Ae.hasOwnProperty("s")&&!(Ae.s&&typeof Ae.s.length=="number"||ke.isString(Ae.s)))return"s: buffer expected";if(Ae.t!=null&&Ae.hasOwnProperty("t")&&(Me=Ce.onnx.TensorProto.verify(Ae.t)))return"t."+Me;if(Ae.g!=null&&Ae.hasOwnProperty("g")&&(Me=Ce.onnx.GraphProto.verify(Ae.g)))return"g."+Me;if(Ae.floats!=null&&Ae.hasOwnProperty("floats")){if(!Array.isArray(Ae.floats))return"floats: array expected";for(var Ie=0;Ie<Ae.floats.length;++Ie)if(typeof Ae.floats[Ie]!="number")return"floats: number[] expected"}if(Ae.ints!=null&&Ae.hasOwnProperty("ints")){if(!Array.isArray(Ae.ints))return"ints: array expected";for(Ie=0;Ie<Ae.ints.length;++Ie)if(!(ke.isInteger(Ae.ints[Ie])||Ae.ints[Ie]&&ke.isInteger(Ae.ints[Ie].low)&&ke.isInteger(Ae.ints[Ie].high)))return"ints: integer|Long[] expected"}if(Ae.strings!=null&&Ae.hasOwnProperty("strings")){if(!Array.isArray(Ae.strings))return"strings: array expected";for(Ie=0;Ie<Ae.strings.length;++Ie)if(!(Ae.strings[Ie]&&typeof Ae.strings[Ie].length=="number"||ke.isString(Ae.strings[Ie])))return"strings: buffer[] expected"}if(Ae.tensors!=null&&Ae.hasOwnProperty("tensors")){if(!Array.isArray(Ae.tensors))return"tensors: array expected";for(Ie=0;Ie<Ae.tensors.length;++Ie)if(Me=Ce.onnx.TensorProto.verify(Ae.tensors[Ie]))return"tensors."+Me}if(Ae.graphs!=null&&Ae.hasOwnProperty("graphs")){if(!Array.isArray(Ae.graphs))return"graphs: array expected";for(Ie=0;Ie<Ae.graphs.length;++Ie){var Me;if(Me=Ce.onnx.GraphProto.verify(Ae.graphs[Ie]))return"graphs."+Me}}return null},Se.fromObject=function(Ae){if(Ae instanceof Ce.onnx.AttributeProto)return Ae;var Ie=new Ce.onnx.AttributeProto;switch(Ae.name!=null&&(Ie.name=String(Ae.name)),Ae.refAttrName!=null&&(Ie.refAttrName=String(Ae.refAttrName)),Ae.docString!=null&&(Ie.docString=String(Ae.docString)),Ae.type){case"UNDEFINED":case 0:Ie.type=0;break;case"FLOAT":case 1:Ie.type=1;break;case"INT":case 2:Ie.type=2;break;case"STRING":case 3:Ie.type=3;break;case"TENSOR":case 4:Ie.type=4;break;case"GRAPH":case 5:Ie.type=5;break;case"FLOATS":case 6:Ie.type=6;break;case"INTS":case 7:Ie.type=7;break;case"STRINGS":case 8:Ie.type=8;break;case"TENSORS":case 9:Ie.type=9;break;case"GRAPHS":case 10:Ie.type=10}if(Ae.f!=null&&(Ie.f=Number(Ae.f)),Ae.i!=null&&(ke.Long?(Ie.i=ke.Long.fromValue(Ae.i)).unsigned=!1:typeof Ae.i=="string"?Ie.i=parseInt(Ae.i,10):typeof Ae.i=="number"?Ie.i=Ae.i:typeof Ae.i=="object"&&(Ie.i=new ke.LongBits(Ae.i.low>>>0,Ae.i.high>>>0).toNumber())),Ae.s!=null&&(typeof Ae.s=="string"?ke.base64.decode(Ae.s,Ie.s=ke.newBuffer(ke.base64.length(Ae.s)),0):Ae.s.length&&(Ie.s=Ae.s)),Ae.t!=null){if(typeof Ae.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");Ie.t=Ce.onnx.TensorProto.fromObject(Ae.t)}if(Ae.g!=null){if(typeof Ae.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");Ie.g=Ce.onnx.GraphProto.fromObject(Ae.g)}if(Ae.floats){if(!Array.isArray(Ae.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");Ie.floats=[];for(var Me=0;Me<Ae.floats.length;++Me)Ie.floats[Me]=Number(Ae.floats[Me])}if(Ae.ints){if(!Array.isArray(Ae.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(Ie.ints=[],Me=0;Me<Ae.ints.length;++Me)ke.Long?(Ie.ints[Me]=ke.Long.fromValue(Ae.ints[Me])).unsigned=!1:typeof Ae.ints[Me]=="string"?Ie.ints[Me]=parseInt(Ae.ints[Me],10):typeof Ae.ints[Me]=="number"?Ie.ints[Me]=Ae.ints[Me]:typeof Ae.ints[Me]=="object"&&(Ie.ints[Me]=new ke.LongBits(Ae.ints[Me].low>>>0,Ae.ints[Me].high>>>0).toNumber())}if(Ae.strings){if(!Array.isArray(Ae.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(Ie.strings=[],Me=0;Me<Ae.strings.length;++Me)typeof Ae.strings[Me]=="string"?ke.base64.decode(Ae.strings[Me],Ie.strings[Me]=ke.newBuffer(ke.base64.length(Ae.strings[Me])),0):Ae.strings[Me].length&&(Ie.strings[Me]=Ae.strings[Me])}if(Ae.tensors){if(!Array.isArray(Ae.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(Ie.tensors=[],Me=0;Me<Ae.tensors.length;++Me){if(typeof Ae.tensors[Me]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");Ie.tensors[Me]=Ce.onnx.TensorProto.fromObject(Ae.tensors[Me])}}if(Ae.graphs){if(!Array.isArray(Ae.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(Ie.graphs=[],Me=0;Me<Ae.graphs.length;++Me){if(typeof Ae.graphs[Me]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");Ie.graphs[Me]=Ce.onnx.GraphProto.fromObject(Ae.graphs[Me])}}return Ie},Se.toObject=function(Ae,Ie){Ie||(Ie={});var Me={};if((Ie.arrays||Ie.defaults)&&(Me.floats=[],Me.ints=[],Me.strings=[],Me.tensors=[],Me.graphs=[]),Ie.defaults){if(Me.name="",Me.f=0,ke.Long){var Fe=new ke.Long(0,0,!1);Me.i=Ie.longs===String?Fe.toString():Ie.longs===Number?Fe.toNumber():Fe}else Me.i=Ie.longs===String?"0":0;Ie.bytes===String?Me.s="":(Me.s=[],Ie.bytes!==Array&&(Me.s=ke.newBuffer(Me.s))),Me.t=null,Me.g=null,Me.docString="",Me.type=Ie.enums===String?"UNDEFINED":0,Me.refAttrName=""}if(Ae.name!=null&&Ae.hasOwnProperty("name")&&(Me.name=Ae.name),Ae.f!=null&&Ae.hasOwnProperty("f")&&(Me.f=Ie.json&&!isFinite(Ae.f)?String(Ae.f):Ae.f),Ae.i!=null&&Ae.hasOwnProperty("i")&&(typeof Ae.i=="number"?Me.i=Ie.longs===String?String(Ae.i):Ae.i:Me.i=Ie.longs===String?ke.Long.prototype.toString.call(Ae.i):Ie.longs===Number?new ke.LongBits(Ae.i.low>>>0,Ae.i.high>>>0).toNumber():Ae.i),Ae.s!=null&&Ae.hasOwnProperty("s")&&(Me.s=Ie.bytes===String?ke.base64.encode(Ae.s,0,Ae.s.length):Ie.bytes===Array?Array.prototype.slice.call(Ae.s):Ae.s),Ae.t!=null&&Ae.hasOwnProperty("t")&&(Me.t=Ce.onnx.TensorProto.toObject(Ae.t,Ie)),Ae.g!=null&&Ae.hasOwnProperty("g")&&(Me.g=Ce.onnx.GraphProto.toObject(Ae.g,Ie)),Ae.floats&&Ae.floats.length){Me.floats=[];for(var Ve=0;Ve<Ae.floats.length;++Ve)Me.floats[Ve]=Ie.json&&!isFinite(Ae.floats[Ve])?String(Ae.floats[Ve]):Ae.floats[Ve]}if(Ae.ints&&Ae.ints.length)for(Me.ints=[],Ve=0;Ve<Ae.ints.length;++Ve)typeof Ae.ints[Ve]=="number"?Me.ints[Ve]=Ie.longs===String?String(Ae.ints[Ve]):Ae.ints[Ve]:Me.ints[Ve]=Ie.longs===String?ke.Long.prototype.toString.call(Ae.ints[Ve]):Ie.longs===Number?new ke.LongBits(Ae.ints[Ve].low>>>0,Ae.ints[Ve].high>>>0).toNumber():Ae.ints[Ve];if(Ae.strings&&Ae.strings.length)for(Me.strings=[],Ve=0;Ve<Ae.strings.length;++Ve)Me.strings[Ve]=Ie.bytes===String?ke.base64.encode(Ae.strings[Ve],0,Ae.strings[Ve].length):Ie.bytes===Array?Array.prototype.slice.call(Ae.strings[Ve]):Ae.strings[Ve];if(Ae.tensors&&Ae.tensors.length)for(Me.tensors=[],Ve=0;Ve<Ae.tensors.length;++Ve)Me.tensors[Ve]=Ce.onnx.TensorProto.toObject(Ae.tensors[Ve],Ie);if(Ae.graphs&&Ae.graphs.length)for(Me.graphs=[],Ve=0;Ve<Ae.graphs.length;++Ve)Me.graphs[Ve]=Ce.onnx.GraphProto.toObject(Ae.graphs[Ve],Ie);return Ae.docString!=null&&Ae.hasOwnProperty("docString")&&(Me.docString=Ae.docString),Ae.type!=null&&Ae.hasOwnProperty("type")&&(Me.type=Ie.enums===String?Ce.onnx.AttributeProto.AttributeType[Ae.type]:Ae.type),Ae.refAttrName!=null&&Ae.hasOwnProperty("refAttrName")&&(Me.refAttrName=Ae.refAttrName),Me},Se.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},Se.AttributeType=function(){var Ae={},Ie=Object.create(Ae);return Ie[Ae[0]="UNDEFINED"]=0,Ie[Ae[1]="FLOAT"]=1,Ie[Ae[2]="INT"]=2,Ie[Ae[3]="STRING"]=3,Ie[Ae[4]="TENSOR"]=4,Ie[Ae[5]="GRAPH"]=5,Ie[Ae[6]="FLOATS"]=6,Ie[Ae[7]="INTS"]=7,Ie[Ae[8]="STRINGS"]=8,Ie[Ae[9]="TENSORS"]=9,Ie[Ae[10]="GRAPHS"]=10,Ie}(),Se}(),Ee.ValueInfoProto=function(){function Se(Ae){if(Ae)for(var Ie=Object.keys(Ae),Me=0;Me<Ie.length;++Me)Ae[Ie[Me]]!=null&&(this[Ie[Me]]=Ae[Ie[Me]])}return Se.prototype.name="",Se.prototype.type=null,Se.prototype.docString="",Se.create=function(Ae){return new Se(Ae)},Se.encode=function(Ae,Ie){return Ie||(Ie=Re.create()),Ae.name!=null&&Ae.hasOwnProperty("name")&&Ie.uint32(10).string(Ae.name),Ae.type!=null&&Ae.hasOwnProperty("type")&&Ce.onnx.TypeProto.encode(Ae.type,Ie.uint32(18).fork()).ldelim(),Ae.docString!=null&&Ae.hasOwnProperty("docString")&&Ie.uint32(26).string(Ae.docString),Ie},Se.encodeDelimited=function(Ae,Ie){return this.encode(Ae,Ie).ldelim()},Se.decode=function(Ae,Ie){Ae instanceof Pe||(Ae=Pe.create(Ae));for(var Me=Ie===void 0?Ae.len:Ae.pos+Ie,Fe=new Ce.onnx.ValueInfoProto;Ae.pos<Me;){var Ve=Ae.uint32();switch(Ve>>>3){case 1:Fe.name=Ae.string();break;case 2:Fe.type=Ce.onnx.TypeProto.decode(Ae,Ae.uint32());break;case 3:Fe.docString=Ae.string();break;default:Ae.skipType(7&Ve)}}return Fe},Se.decodeDelimited=function(Ae){return Ae instanceof Pe||(Ae=new Pe(Ae)),this.decode(Ae,Ae.uint32())},Se.verify=function(Ae){if(typeof Ae!="object"||Ae===null)return"object expected";if(Ae.name!=null&&Ae.hasOwnProperty("name")&&!ke.isString(Ae.name))return"name: string expected";if(Ae.type!=null&&Ae.hasOwnProperty("type")){var Ie=Ce.onnx.TypeProto.verify(Ae.type);if(Ie)return"type."+Ie}return Ae.docString!=null&&Ae.hasOwnProperty("docString")&&!ke.isString(Ae.docString)?"docString: string expected":null},Se.fromObject=function(Ae){if(Ae instanceof Ce.onnx.ValueInfoProto)return Ae;var Ie=new Ce.onnx.ValueInfoProto;if(Ae.name!=null&&(Ie.name=String(Ae.name)),Ae.type!=null){if(typeof Ae.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");Ie.type=Ce.onnx.TypeProto.fromObject(Ae.type)}return Ae.docString!=null&&(Ie.docString=String(Ae.docString)),Ie},Se.toObject=function(Ae,Ie){Ie||(Ie={});var Me={};return Ie.defaults&&(Me.name="",Me.type=null,Me.docString=""),Ae.name!=null&&Ae.hasOwnProperty("name")&&(Me.name=Ae.name),Ae.type!=null&&Ae.hasOwnProperty("type")&&(Me.type=Ce.onnx.TypeProto.toObject(Ae.type,Ie)),Ae.docString!=null&&Ae.hasOwnProperty("docString")&&(Me.docString=Ae.docString),Me},Se.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},Se}(),Ee.NodeProto=function(){function Se(Ae){if(this.input=[],this.output=[],this.attribute=[],Ae)for(var Ie=Object.keys(Ae),Me=0;Me<Ie.length;++Me)Ae[Ie[Me]]!=null&&(this[Ie[Me]]=Ae[Ie[Me]])}return Se.prototype.input=ke.emptyArray,Se.prototype.output=ke.emptyArray,Se.prototype.name="",Se.prototype.opType="",Se.prototype.domain="",Se.prototype.attribute=ke.emptyArray,Se.prototype.docString="",Se.create=function(Ae){return new Se(Ae)},Se.encode=function(Ae,Ie){if(Ie||(Ie=Re.create()),Ae.input!=null&&Ae.input.length)for(var Me=0;Me<Ae.input.length;++Me)Ie.uint32(10).string(Ae.input[Me]);if(Ae.output!=null&&Ae.output.length)for(Me=0;Me<Ae.output.length;++Me)Ie.uint32(18).string(Ae.output[Me]);if(Ae.name!=null&&Ae.hasOwnProperty("name")&&Ie.uint32(26).string(Ae.name),Ae.opType!=null&&Ae.hasOwnProperty("opType")&&Ie.uint32(34).string(Ae.opType),Ae.attribute!=null&&Ae.attribute.length)for(Me=0;Me<Ae.attribute.length;++Me)Ce.onnx.AttributeProto.encode(Ae.attribute[Me],Ie.uint32(42).fork()).ldelim();return Ae.docString!=null&&Ae.hasOwnProperty("docString")&&Ie.uint32(50).string(Ae.docString),Ae.domain!=null&&Ae.hasOwnProperty("domain")&&Ie.uint32(58).string(Ae.domain),Ie},Se.encodeDelimited=function(Ae,Ie){return this.encode(Ae,Ie).ldelim()},Se.decode=function(Ae,Ie){Ae instanceof Pe||(Ae=Pe.create(Ae));for(var Me=Ie===void 0?Ae.len:Ae.pos+Ie,Fe=new Ce.onnx.NodeProto;Ae.pos<Me;){var Ve=Ae.uint32();switch(Ve>>>3){case 1:Fe.input&&Fe.input.length||(Fe.input=[]),Fe.input.push(Ae.string());break;case 2:Fe.output&&Fe.output.length||(Fe.output=[]),Fe.output.push(Ae.string());break;case 3:Fe.name=Ae.string();break;case 4:Fe.opType=Ae.string();break;case 7:Fe.domain=Ae.string();break;case 5:Fe.attribute&&Fe.attribute.length||(Fe.attribute=[]),Fe.attribute.push(Ce.onnx.AttributeProto.decode(Ae,Ae.uint32()));break;case 6:Fe.docString=Ae.string();break;default:Ae.skipType(7&Ve)}}return Fe},Se.decodeDelimited=function(Ae){return Ae instanceof Pe||(Ae=new Pe(Ae)),this.decode(Ae,Ae.uint32())},Se.verify=function(Ae){if(typeof Ae!="object"||Ae===null)return"object expected";if(Ae.input!=null&&Ae.hasOwnProperty("input")){if(!Array.isArray(Ae.input))return"input: array expected";for(var Ie=0;Ie<Ae.input.length;++Ie)if(!ke.isString(Ae.input[Ie]))return"input: string[] expected"}if(Ae.output!=null&&Ae.hasOwnProperty("output")){if(!Array.isArray(Ae.output))return"output: array expected";for(Ie=0;Ie<Ae.output.length;++Ie)if(!ke.isString(Ae.output[Ie]))return"output: string[] expected"}if(Ae.name!=null&&Ae.hasOwnProperty("name")&&!ke.isString(Ae.name))return"name: string expected";if(Ae.opType!=null&&Ae.hasOwnProperty("opType")&&!ke.isString(Ae.opType))return"opType: string expected";if(Ae.domain!=null&&Ae.hasOwnProperty("domain")&&!ke.isString(Ae.domain))return"domain: string expected";if(Ae.attribute!=null&&Ae.hasOwnProperty("attribute")){if(!Array.isArray(Ae.attribute))return"attribute: array expected";for(Ie=0;Ie<Ae.attribute.length;++Ie){var Me=Ce.onnx.AttributeProto.verify(Ae.attribute[Ie]);if(Me)return"attribute."+Me}}return Ae.docString!=null&&Ae.hasOwnProperty("docString")&&!ke.isString(Ae.docString)?"docString: string expected":null},Se.fromObject=function(Ae){if(Ae instanceof Ce.onnx.NodeProto)return Ae;var Ie=new Ce.onnx.NodeProto;if(Ae.input){if(!Array.isArray(Ae.input))throw TypeError(".onnx.NodeProto.input: array expected");Ie.input=[];for(var Me=0;Me<Ae.input.length;++Me)Ie.input[Me]=String(Ae.input[Me])}if(Ae.output){if(!Array.isArray(Ae.output))throw TypeError(".onnx.NodeProto.output: array expected");for(Ie.output=[],Me=0;Me<Ae.output.length;++Me)Ie.output[Me]=String(Ae.output[Me])}if(Ae.name!=null&&(Ie.name=String(Ae.name)),Ae.opType!=null&&(Ie.opType=String(Ae.opType)),Ae.domain!=null&&(Ie.domain=String(Ae.domain)),Ae.attribute){if(!Array.isArray(Ae.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(Ie.attribute=[],Me=0;Me<Ae.attribute.length;++Me){if(typeof Ae.attribute[Me]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");Ie.attribute[Me]=Ce.onnx.AttributeProto.fromObject(Ae.attribute[Me])}}return Ae.docString!=null&&(Ie.docString=String(Ae.docString)),Ie},Se.toObject=function(Ae,Ie){Ie||(Ie={});var Me={};if((Ie.arrays||Ie.defaults)&&(Me.input=[],Me.output=[],Me.attribute=[]),Ie.defaults&&(Me.name="",Me.opType="",Me.docString="",Me.domain=""),Ae.input&&Ae.input.length){Me.input=[];for(var Fe=0;Fe<Ae.input.length;++Fe)Me.input[Fe]=Ae.input[Fe]}if(Ae.output&&Ae.output.length)for(Me.output=[],Fe=0;Fe<Ae.output.length;++Fe)Me.output[Fe]=Ae.output[Fe];if(Ae.name!=null&&Ae.hasOwnProperty("name")&&(Me.name=Ae.name),Ae.opType!=null&&Ae.hasOwnProperty("opType")&&(Me.opType=Ae.opType),Ae.attribute&&Ae.attribute.length)for(Me.attribute=[],Fe=0;Fe<Ae.attribute.length;++Fe)Me.attribute[Fe]=Ce.onnx.AttributeProto.toObject(Ae.attribute[Fe],Ie);return Ae.docString!=null&&Ae.hasOwnProperty("docString")&&(Me.docString=Ae.docString),Ae.domain!=null&&Ae.hasOwnProperty("domain")&&(Me.domain=Ae.domain),Me},Se.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},Se}(),Ee.ModelProto=function(){function Se(Ae){if(this.opsetImport=[],this.metadataProps=[],Ae)for(var Ie=Object.keys(Ae),Me=0;Me<Ie.length;++Me)Ae[Ie[Me]]!=null&&(this[Ie[Me]]=Ae[Ie[Me]])}return Se.prototype.irVersion=ke.Long?ke.Long.fromBits(0,0,!1):0,Se.prototype.opsetImport=ke.emptyArray,Se.prototype.producerName="",Se.prototype.producerVersion="",Se.prototype.domain="",Se.prototype.modelVersion=ke.Long?ke.Long.fromBits(0,0,!1):0,Se.prototype.docString="",Se.prototype.graph=null,Se.prototype.metadataProps=ke.emptyArray,Se.create=function(Ae){return new Se(Ae)},Se.encode=function(Ae,Ie){if(Ie||(Ie=Re.create()),Ae.irVersion!=null&&Ae.hasOwnProperty("irVersion")&&Ie.uint32(8).int64(Ae.irVersion),Ae.producerName!=null&&Ae.hasOwnProperty("producerName")&&Ie.uint32(18).string(Ae.producerName),Ae.producerVersion!=null&&Ae.hasOwnProperty("producerVersion")&&Ie.uint32(26).string(Ae.producerVersion),Ae.domain!=null&&Ae.hasOwnProperty("domain")&&Ie.uint32(34).string(Ae.domain),Ae.modelVersion!=null&&Ae.hasOwnProperty("modelVersion")&&Ie.uint32(40).int64(Ae.modelVersion),Ae.docString!=null&&Ae.hasOwnProperty("docString")&&Ie.uint32(50).string(Ae.docString),Ae.graph!=null&&Ae.hasOwnProperty("graph")&&Ce.onnx.GraphProto.encode(Ae.graph,Ie.uint32(58).fork()).ldelim(),Ae.opsetImport!=null&&Ae.opsetImport.length)for(var Me=0;Me<Ae.opsetImport.length;++Me)Ce.onnx.OperatorSetIdProto.encode(Ae.opsetImport[Me],Ie.uint32(66).fork()).ldelim();if(Ae.metadataProps!=null&&Ae.metadataProps.length)for(Me=0;Me<Ae.metadataProps.length;++Me)Ce.onnx.StringStringEntryProto.encode(Ae.metadataProps[Me],Ie.uint32(114).fork()).ldelim();return Ie},Se.encodeDelimited=function(Ae,Ie){return this.encode(Ae,Ie).ldelim()},Se.decode=function(Ae,Ie){Ae instanceof Pe||(Ae=Pe.create(Ae));for(var Me=Ie===void 0?Ae.len:Ae.pos+Ie,Fe=new Ce.onnx.ModelProto;Ae.pos<Me;){var Ve=Ae.uint32();switch(Ve>>>3){case 1:Fe.irVersion=Ae.int64();break;case 8:Fe.opsetImport&&Fe.opsetImport.length||(Fe.opsetImport=[]),Fe.opsetImport.push(Ce.onnx.OperatorSetIdProto.decode(Ae,Ae.uint32()));break;case 2:Fe.producerName=Ae.string();break;case 3:Fe.producerVersion=Ae.string();break;case 4:Fe.domain=Ae.string();break;case 5:Fe.modelVersion=Ae.int64();break;case 6:Fe.docString=Ae.string();break;case 7:Fe.graph=Ce.onnx.GraphProto.decode(Ae,Ae.uint32());break;case 14:Fe.metadataProps&&Fe.metadataProps.length||(Fe.metadataProps=[]),Fe.metadataProps.push(Ce.onnx.StringStringEntryProto.decode(Ae,Ae.uint32()));break;default:Ae.skipType(7&Ve)}}return Fe},Se.decodeDelimited=function(Ae){return Ae instanceof Pe||(Ae=new Pe(Ae)),this.decode(Ae,Ae.uint32())},Se.verify=function(Ae){if(typeof Ae!="object"||Ae===null)return"object expected";if(Ae.irVersion!=null&&Ae.hasOwnProperty("irVersion")&&!(ke.isInteger(Ae.irVersion)||Ae.irVersion&&ke.isInteger(Ae.irVersion.low)&&ke.isInteger(Ae.irVersion.high)))return"irVersion: integer|Long expected";if(Ae.opsetImport!=null&&Ae.hasOwnProperty("opsetImport")){if(!Array.isArray(Ae.opsetImport))return"opsetImport: array expected";for(var Ie=0;Ie<Ae.opsetImport.length;++Ie)if(Me=Ce.onnx.OperatorSetIdProto.verify(Ae.opsetImport[Ie]))return"opsetImport."+Me}if(Ae.producerName!=null&&Ae.hasOwnProperty("producerName")&&!ke.isString(Ae.producerName))return"producerName: string expected";if(Ae.producerVersion!=null&&Ae.hasOwnProperty("producerVersion")&&!ke.isString(Ae.producerVersion))return"producerVersion: string expected";if(Ae.domain!=null&&Ae.hasOwnProperty("domain")&&!ke.isString(Ae.domain))return"domain: string expected";if(Ae.modelVersion!=null&&Ae.hasOwnProperty("modelVersion")&&!(ke.isInteger(Ae.modelVersion)||Ae.modelVersion&&ke.isInteger(Ae.modelVersion.low)&&ke.isInteger(Ae.modelVersion.high)))return"modelVersion: integer|Long expected";if(Ae.docString!=null&&Ae.hasOwnProperty("docString")&&!ke.isString(Ae.docString))return"docString: string expected";if(Ae.graph!=null&&Ae.hasOwnProperty("graph")&&(Me=Ce.onnx.GraphProto.verify(Ae.graph)))return"graph."+Me;if(Ae.metadataProps!=null&&Ae.hasOwnProperty("metadataProps")){if(!Array.isArray(Ae.metadataProps))return"metadataProps: array expected";for(Ie=0;Ie<Ae.metadataProps.length;++Ie){var Me;if(Me=Ce.onnx.StringStringEntryProto.verify(Ae.metadataProps[Ie]))return"metadataProps."+Me}}return null},Se.fromObject=function(Ae){if(Ae instanceof Ce.onnx.ModelProto)return Ae;var Ie=new Ce.onnx.ModelProto;if(Ae.irVersion!=null&&(ke.Long?(Ie.irVersion=ke.Long.fromValue(Ae.irVersion)).unsigned=!1:typeof Ae.irVersion=="string"?Ie.irVersion=parseInt(Ae.irVersion,10):typeof Ae.irVersion=="number"?Ie.irVersion=Ae.irVersion:typeof Ae.irVersion=="object"&&(Ie.irVersion=new ke.LongBits(Ae.irVersion.low>>>0,Ae.irVersion.high>>>0).toNumber())),Ae.opsetImport){if(!Array.isArray(Ae.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");Ie.opsetImport=[];for(var Me=0;Me<Ae.opsetImport.length;++Me){if(typeof Ae.opsetImport[Me]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");Ie.opsetImport[Me]=Ce.onnx.OperatorSetIdProto.fromObject(Ae.opsetImport[Me])}}if(Ae.producerName!=null&&(Ie.producerName=String(Ae.producerName)),Ae.producerVersion!=null&&(Ie.producerVersion=String(Ae.producerVersion)),Ae.domain!=null&&(Ie.domain=String(Ae.domain)),Ae.modelVersion!=null&&(ke.Long?(Ie.modelVersion=ke.Long.fromValue(Ae.modelVersion)).unsigned=!1:typeof Ae.modelVersion=="string"?Ie.modelVersion=parseInt(Ae.modelVersion,10):typeof Ae.modelVersion=="number"?Ie.modelVersion=Ae.modelVersion:typeof Ae.modelVersion=="object"&&(Ie.modelVersion=new ke.LongBits(Ae.modelVersion.low>>>0,Ae.modelVersion.high>>>0).toNumber())),Ae.docString!=null&&(Ie.docString=String(Ae.docString)),Ae.graph!=null){if(typeof Ae.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");Ie.graph=Ce.onnx.GraphProto.fromObject(Ae.graph)}if(Ae.metadataProps){if(!Array.isArray(Ae.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(Ie.metadataProps=[],Me=0;Me<Ae.metadataProps.length;++Me){if(typeof Ae.metadataProps[Me]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");Ie.metadataProps[Me]=Ce.onnx.StringStringEntryProto.fromObject(Ae.metadataProps[Me])}}return Ie},Se.toObject=function(Ae,Ie){Ie||(Ie={});var Me={};if((Ie.arrays||Ie.defaults)&&(Me.opsetImport=[],Me.metadataProps=[]),Ie.defaults){if(ke.Long){var Fe=new ke.Long(0,0,!1);Me.irVersion=Ie.longs===String?Fe.toString():Ie.longs===Number?Fe.toNumber():Fe}else Me.irVersion=Ie.longs===String?"0":0;Me.producerName="",Me.producerVersion="",Me.domain="",ke.Long?(Fe=new ke.Long(0,0,!1),Me.modelVersion=Ie.longs===String?Fe.toString():Ie.longs===Number?Fe.toNumber():Fe):Me.modelVersion=Ie.longs===String?"0":0,Me.docString="",Me.graph=null}if(Ae.irVersion!=null&&Ae.hasOwnProperty("irVersion")&&(typeof Ae.irVersion=="number"?Me.irVersion=Ie.longs===String?String(Ae.irVersion):Ae.irVersion:Me.irVersion=Ie.longs===String?ke.Long.prototype.toString.call(Ae.irVersion):Ie.longs===Number?new ke.LongBits(Ae.irVersion.low>>>0,Ae.irVersion.high>>>0).toNumber():Ae.irVersion),Ae.producerName!=null&&Ae.hasOwnProperty("producerName")&&(Me.producerName=Ae.producerName),Ae.producerVersion!=null&&Ae.hasOwnProperty("producerVersion")&&(Me.producerVersion=Ae.producerVersion),Ae.domain!=null&&Ae.hasOwnProperty("domain")&&(Me.domain=Ae.domain),Ae.modelVersion!=null&&Ae.hasOwnProperty("modelVersion")&&(typeof Ae.modelVersion=="number"?Me.modelVersion=Ie.longs===String?String(Ae.modelVersion):Ae.modelVersion:Me.modelVersion=Ie.longs===String?ke.Long.prototype.toString.call(Ae.modelVersion):Ie.longs===Number?new ke.LongBits(Ae.modelVersion.low>>>0,Ae.modelVersion.high>>>0).toNumber():Ae.modelVersion),Ae.docString!=null&&Ae.hasOwnProperty("docString")&&(Me.docString=Ae.docString),Ae.graph!=null&&Ae.hasOwnProperty("graph")&&(Me.graph=Ce.onnx.GraphProto.toObject(Ae.graph,Ie)),Ae.opsetImport&&Ae.opsetImport.length){Me.opsetImport=[];for(var Ve=0;Ve<Ae.opsetImport.length;++Ve)Me.opsetImport[Ve]=Ce.onnx.OperatorSetIdProto.toObject(Ae.opsetImport[Ve],Ie)}if(Ae.metadataProps&&Ae.metadataProps.length)for(Me.metadataProps=[],Ve=0;Ve<Ae.metadataProps.length;++Ve)Me.metadataProps[Ve]=Ce.onnx.StringStringEntryProto.toObject(Ae.metadataProps[Ve],Ie);return Me},Se.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},Se}(),Ee.StringStringEntryProto=function(){function Se(Ae){if(Ae)for(var Ie=Object.keys(Ae),Me=0;Me<Ie.length;++Me)Ae[Ie[Me]]!=null&&(this[Ie[Me]]=Ae[Ie[Me]])}return Se.prototype.key="",Se.prototype.value="",Se.create=function(Ae){return new Se(Ae)},Se.encode=function(Ae,Ie){return Ie||(Ie=Re.create()),Ae.key!=null&&Ae.hasOwnProperty("key")&&Ie.uint32(10).string(Ae.key),Ae.value!=null&&Ae.hasOwnProperty("value")&&Ie.uint32(18).string(Ae.value),Ie},Se.encodeDelimited=function(Ae,Ie){return this.encode(Ae,Ie).ldelim()},Se.decode=function(Ae,Ie){Ae instanceof Pe||(Ae=Pe.create(Ae));for(var Me=Ie===void 0?Ae.len:Ae.pos+Ie,Fe=new Ce.onnx.StringStringEntryProto;Ae.pos<Me;){var Ve=Ae.uint32();switch(Ve>>>3){case 1:Fe.key=Ae.string();break;case 2:Fe.value=Ae.string();break;default:Ae.skipType(7&Ve)}}return Fe},Se.decodeDelimited=function(Ae){return Ae instanceof Pe||(Ae=new Pe(Ae)),this.decode(Ae,Ae.uint32())},Se.verify=function(Ae){return typeof Ae!="object"||Ae===null?"object expected":Ae.key!=null&&Ae.hasOwnProperty("key")&&!ke.isString(Ae.key)?"key: string expected":Ae.value!=null&&Ae.hasOwnProperty("value")&&!ke.isString(Ae.value)?"value: string expected":null},Se.fromObject=function(Ae){if(Ae instanceof Ce.onnx.StringStringEntryProto)return Ae;var Ie=new Ce.onnx.StringStringEntryProto;return Ae.key!=null&&(Ie.key=String(Ae.key)),Ae.value!=null&&(Ie.value=String(Ae.value)),Ie},Se.toObject=function(Ae,Ie){Ie||(Ie={});var Me={};return Ie.defaults&&(Me.key="",Me.value=""),Ae.key!=null&&Ae.hasOwnProperty("key")&&(Me.key=Ae.key),Ae.value!=null&&Ae.hasOwnProperty("value")&&(Me.value=Ae.value),Me},Se.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},Se}(),Ee.TensorAnnotation=function(){function Se(Ae){if(this.quantParameterTensorNames=[],Ae)for(var Ie=Object.keys(Ae),Me=0;Me<Ie.length;++Me)Ae[Ie[Me]]!=null&&(this[Ie[Me]]=Ae[Ie[Me]])}return Se.prototype.tensorName="",Se.prototype.quantParameterTensorNames=ke.emptyArray,Se.create=function(Ae){return new Se(Ae)},Se.encode=function(Ae,Ie){if(Ie||(Ie=Re.create()),Ae.tensorName!=null&&Ae.hasOwnProperty("tensorName")&&Ie.uint32(10).string(Ae.tensorName),Ae.quantParameterTensorNames!=null&&Ae.quantParameterTensorNames.length)for(var Me=0;Me<Ae.quantParameterTensorNames.length;++Me)Ce.onnx.StringStringEntryProto.encode(Ae.quantParameterTensorNames[Me],Ie.uint32(18).fork()).ldelim();return Ie},Se.encodeDelimited=function(Ae,Ie){return this.encode(Ae,Ie).ldelim()},Se.decode=function(Ae,Ie){Ae instanceof Pe||(Ae=Pe.create(Ae));for(var Me=Ie===void 0?Ae.len:Ae.pos+Ie,Fe=new Ce.onnx.TensorAnnotation;Ae.pos<Me;){var Ve=Ae.uint32();switch(Ve>>>3){case 1:Fe.tensorName=Ae.string();break;case 2:Fe.quantParameterTensorNames&&Fe.quantParameterTensorNames.length||(Fe.quantParameterTensorNames=[]),Fe.quantParameterTensorNames.push(Ce.onnx.StringStringEntryProto.decode(Ae,Ae.uint32()));break;default:Ae.skipType(7&Ve)}}return Fe},Se.decodeDelimited=function(Ae){return Ae instanceof Pe||(Ae=new Pe(Ae)),this.decode(Ae,Ae.uint32())},Se.verify=function(Ae){if(typeof Ae!="object"||Ae===null)return"object expected";if(Ae.tensorName!=null&&Ae.hasOwnProperty("tensorName")&&!ke.isString(Ae.tensorName))return"tensorName: string expected";if(Ae.quantParameterTensorNames!=null&&Ae.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(Ae.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var Ie=0;Ie<Ae.quantParameterTensorNames.length;++Ie){var Me=Ce.onnx.StringStringEntryProto.verify(Ae.quantParameterTensorNames[Ie]);if(Me)return"quantParameterTensorNames."+Me}}return null},Se.fromObject=function(Ae){if(Ae instanceof Ce.onnx.TensorAnnotation)return Ae;var Ie=new Ce.onnx.TensorAnnotation;if(Ae.tensorName!=null&&(Ie.tensorName=String(Ae.tensorName)),Ae.quantParameterTensorNames){if(!Array.isArray(Ae.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");Ie.quantParameterTensorNames=[];for(var Me=0;Me<Ae.quantParameterTensorNames.length;++Me){if(typeof Ae.quantParameterTensorNames[Me]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");Ie.quantParameterTensorNames[Me]=Ce.onnx.StringStringEntryProto.fromObject(Ae.quantParameterTensorNames[Me])}}return Ie},Se.toObject=function(Ae,Ie){Ie||(Ie={});var Me={};if((Ie.arrays||Ie.defaults)&&(Me.quantParameterTensorNames=[]),Ie.defaults&&(Me.tensorName=""),Ae.tensorName!=null&&Ae.hasOwnProperty("tensorName")&&(Me.tensorName=Ae.tensorName),Ae.quantParameterTensorNames&&Ae.quantParameterTensorNames.length){Me.quantParameterTensorNames=[];for(var Fe=0;Fe<Ae.quantParameterTensorNames.length;++Fe)Me.quantParameterTensorNames[Fe]=Ce.onnx.StringStringEntryProto.toObject(Ae.quantParameterTensorNames[Fe],Ie)}return Me},Se.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},Se}(),Ee.GraphProto=function(){function Se(Ae){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],Ae)for(var Ie=Object.keys(Ae),Me=0;Me<Ie.length;++Me)Ae[Ie[Me]]!=null&&(this[Ie[Me]]=Ae[Ie[Me]])}return Se.prototype.node=ke.emptyArray,Se.prototype.name="",Se.prototype.initializer=ke.emptyArray,Se.prototype.docString="",Se.prototype.input=ke.emptyArray,Se.prototype.output=ke.emptyArray,Se.prototype.valueInfo=ke.emptyArray,Se.prototype.quantizationAnnotation=ke.emptyArray,Se.create=function(Ae){return new Se(Ae)},Se.encode=function(Ae,Ie){if(Ie||(Ie=Re.create()),Ae.node!=null&&Ae.node.length)for(var Me=0;Me<Ae.node.length;++Me)Ce.onnx.NodeProto.encode(Ae.node[Me],Ie.uint32(10).fork()).ldelim();if(Ae.name!=null&&Ae.hasOwnProperty("name")&&Ie.uint32(18).string(Ae.name),Ae.initializer!=null&&Ae.initializer.length)for(Me=0;Me<Ae.initializer.length;++Me)Ce.onnx.TensorProto.encode(Ae.initializer[Me],Ie.uint32(42).fork()).ldelim();if(Ae.docString!=null&&Ae.hasOwnProperty("docString")&&Ie.uint32(82).string(Ae.docString),Ae.input!=null&&Ae.input.length)for(Me=0;Me<Ae.input.length;++Me)Ce.onnx.ValueInfoProto.encode(Ae.input[Me],Ie.uint32(90).fork()).ldelim();if(Ae.output!=null&&Ae.output.length)for(Me=0;Me<Ae.output.length;++Me)Ce.onnx.ValueInfoProto.encode(Ae.output[Me],Ie.uint32(98).fork()).ldelim();if(Ae.valueInfo!=null&&Ae.valueInfo.length)for(Me=0;Me<Ae.valueInfo.length;++Me)Ce.onnx.ValueInfoProto.encode(Ae.valueInfo[Me],Ie.uint32(106).fork()).ldelim();if(Ae.quantizationAnnotation!=null&&Ae.quantizationAnnotation.length)for(Me=0;Me<Ae.quantizationAnnotation.length;++Me)Ce.onnx.TensorAnnotation.encode(Ae.quantizationAnnotation[Me],Ie.uint32(114).fork()).ldelim();return Ie},Se.encodeDelimited=function(Ae,Ie){return this.encode(Ae,Ie).ldelim()},Se.decode=function(Ae,Ie){Ae instanceof Pe||(Ae=Pe.create(Ae));for(var Me=Ie===void 0?Ae.len:Ae.pos+Ie,Fe=new Ce.onnx.GraphProto;Ae.pos<Me;){var Ve=Ae.uint32();switch(Ve>>>3){case 1:Fe.node&&Fe.node.length||(Fe.node=[]),Fe.node.push(Ce.onnx.NodeProto.decode(Ae,Ae.uint32()));break;case 2:Fe.name=Ae.string();break;case 5:Fe.initializer&&Fe.initializer.length||(Fe.initializer=[]),Fe.initializer.push(Ce.onnx.TensorProto.decode(Ae,Ae.uint32()));break;case 10:Fe.docString=Ae.string();break;case 11:Fe.input&&Fe.input.length||(Fe.input=[]),Fe.input.push(Ce.onnx.ValueInfoProto.decode(Ae,Ae.uint32()));break;case 12:Fe.output&&Fe.output.length||(Fe.output=[]),Fe.output.push(Ce.onnx.ValueInfoProto.decode(Ae,Ae.uint32()));break;case 13:Fe.valueInfo&&Fe.valueInfo.length||(Fe.valueInfo=[]),Fe.valueInfo.push(Ce.onnx.ValueInfoProto.decode(Ae,Ae.uint32()));break;case 14:Fe.quantizationAnnotation&&Fe.quantizationAnnotation.length||(Fe.quantizationAnnotation=[]),Fe.quantizationAnnotation.push(Ce.onnx.TensorAnnotation.decode(Ae,Ae.uint32()));break;default:Ae.skipType(7&Ve)}}return Fe},Se.decodeDelimited=function(Ae){return Ae instanceof Pe||(Ae=new Pe(Ae)),this.decode(Ae,Ae.uint32())},Se.verify=function(Ae){if(typeof Ae!="object"||Ae===null)return"object expected";if(Ae.node!=null&&Ae.hasOwnProperty("node")){if(!Array.isArray(Ae.node))return"node: array expected";for(var Ie=0;Ie<Ae.node.length;++Ie)if(Me=Ce.onnx.NodeProto.verify(Ae.node[Ie]))return"node."+Me}if(Ae.name!=null&&Ae.hasOwnProperty("name")&&!ke.isString(Ae.name))return"name: string expected";if(Ae.initializer!=null&&Ae.hasOwnProperty("initializer")){if(!Array.isArray(Ae.initializer))return"initializer: array expected";for(Ie=0;Ie<Ae.initializer.length;++Ie)if(Me=Ce.onnx.TensorProto.verify(Ae.initializer[Ie]))return"initializer."+Me}if(Ae.docString!=null&&Ae.hasOwnProperty("docString")&&!ke.isString(Ae.docString))return"docString: string expected";if(Ae.input!=null&&Ae.hasOwnProperty("input")){if(!Array.isArray(Ae.input))return"input: array expected";for(Ie=0;Ie<Ae.input.length;++Ie)if(Me=Ce.onnx.ValueInfoProto.verify(Ae.input[Ie]))return"input."+Me}if(Ae.output!=null&&Ae.hasOwnProperty("output")){if(!Array.isArray(Ae.output))return"output: array expected";for(Ie=0;Ie<Ae.output.length;++Ie)if(Me=Ce.onnx.ValueInfoProto.verify(Ae.output[Ie]))return"output."+Me}if(Ae.valueInfo!=null&&Ae.hasOwnProperty("valueInfo")){if(!Array.isArray(Ae.valueInfo))return"valueInfo: array expected";for(Ie=0;Ie<Ae.valueInfo.length;++Ie)if(Me=Ce.onnx.ValueInfoProto.verify(Ae.valueInfo[Ie]))return"valueInfo."+Me}if(Ae.quantizationAnnotation!=null&&Ae.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(Ae.quantizationAnnotation))return"quantizationAnnotation: array expected";for(Ie=0;Ie<Ae.quantizationAnnotation.length;++Ie){var Me;if(Me=Ce.onnx.TensorAnnotation.verify(Ae.quantizationAnnotation[Ie]))return"quantizationAnnotation."+Me}}return null},Se.fromObject=function(Ae){if(Ae instanceof Ce.onnx.GraphProto)return Ae;var Ie=new Ce.onnx.GraphProto;if(Ae.node){if(!Array.isArray(Ae.node))throw TypeError(".onnx.GraphProto.node: array expected");Ie.node=[];for(var Me=0;Me<Ae.node.length;++Me){if(typeof Ae.node[Me]!="object")throw TypeError(".onnx.GraphProto.node: object expected");Ie.node[Me]=Ce.onnx.NodeProto.fromObject(Ae.node[Me])}}if(Ae.name!=null&&(Ie.name=String(Ae.name)),Ae.initializer){if(!Array.isArray(Ae.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(Ie.initializer=[],Me=0;Me<Ae.initializer.length;++Me){if(typeof Ae.initializer[Me]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");Ie.initializer[Me]=Ce.onnx.TensorProto.fromObject(Ae.initializer[Me])}}if(Ae.docString!=null&&(Ie.docString=String(Ae.docString)),Ae.input){if(!Array.isArray(Ae.input))throw TypeError(".onnx.GraphProto.input: array expected");for(Ie.input=[],Me=0;Me<Ae.input.length;++Me){if(typeof Ae.input[Me]!="object")throw TypeError(".onnx.GraphProto.input: object expected");Ie.input[Me]=Ce.onnx.ValueInfoProto.fromObject(Ae.input[Me])}}if(Ae.output){if(!Array.isArray(Ae.output))throw TypeError(".onnx.GraphProto.output: array expected");for(Ie.output=[],Me=0;Me<Ae.output.length;++Me){if(typeof Ae.output[Me]!="object")throw TypeError(".onnx.GraphProto.output: object expected");Ie.output[Me]=Ce.onnx.ValueInfoProto.fromObject(Ae.output[Me])}}if(Ae.valueInfo){if(!Array.isArray(Ae.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(Ie.valueInfo=[],Me=0;Me<Ae.valueInfo.length;++Me){if(typeof Ae.valueInfo[Me]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");Ie.valueInfo[Me]=Ce.onnx.ValueInfoProto.fromObject(Ae.valueInfo[Me])}}if(Ae.quantizationAnnotation){if(!Array.isArray(Ae.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(Ie.quantizationAnnotation=[],Me=0;Me<Ae.quantizationAnnotation.length;++Me){if(typeof Ae.quantizationAnnotation[Me]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");Ie.quantizationAnnotation[Me]=Ce.onnx.TensorAnnotation.fromObject(Ae.quantizationAnnotation[Me])}}return Ie},Se.toObject=function(Ae,Ie){Ie||(Ie={});var Me={};if((Ie.arrays||Ie.defaults)&&(Me.node=[],Me.initializer=[],Me.input=[],Me.output=[],Me.valueInfo=[],Me.quantizationAnnotation=[]),Ie.defaults&&(Me.name="",Me.docString=""),Ae.node&&Ae.node.length){Me.node=[];for(var Fe=0;Fe<Ae.node.length;++Fe)Me.node[Fe]=Ce.onnx.NodeProto.toObject(Ae.node[Fe],Ie)}if(Ae.name!=null&&Ae.hasOwnProperty("name")&&(Me.name=Ae.name),Ae.initializer&&Ae.initializer.length)for(Me.initializer=[],Fe=0;Fe<Ae.initializer.length;++Fe)Me.initializer[Fe]=Ce.onnx.TensorProto.toObject(Ae.initializer[Fe],Ie);if(Ae.docString!=null&&Ae.hasOwnProperty("docString")&&(Me.docString=Ae.docString),Ae.input&&Ae.input.length)for(Me.input=[],Fe=0;Fe<Ae.input.length;++Fe)Me.input[Fe]=Ce.onnx.ValueInfoProto.toObject(Ae.input[Fe],Ie);if(Ae.output&&Ae.output.length)for(Me.output=[],Fe=0;Fe<Ae.output.length;++Fe)Me.output[Fe]=Ce.onnx.ValueInfoProto.toObject(Ae.output[Fe],Ie);if(Ae.valueInfo&&Ae.valueInfo.length)for(Me.valueInfo=[],Fe=0;Fe<Ae.valueInfo.length;++Fe)Me.valueInfo[Fe]=Ce.onnx.ValueInfoProto.toObject(Ae.valueInfo[Fe],Ie);if(Ae.quantizationAnnotation&&Ae.quantizationAnnotation.length)for(Me.quantizationAnnotation=[],Fe=0;Fe<Ae.quantizationAnnotation.length;++Fe)Me.quantizationAnnotation[Fe]=Ce.onnx.TensorAnnotation.toObject(Ae.quantizationAnnotation[Fe],Ie);return Me},Se.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},Se}(),Ee.TensorProto=function(){function Se(Ae){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],Ae)for(var Ie=Object.keys(Ae),Me=0;Me<Ie.length;++Me)Ae[Ie[Me]]!=null&&(this[Ie[Me]]=Ae[Ie[Me]])}return Se.prototype.dims=ke.emptyArray,Se.prototype.dataType=0,Se.prototype.segment=null,Se.prototype.floatData=ke.emptyArray,Se.prototype.int32Data=ke.emptyArray,Se.prototype.stringData=ke.emptyArray,Se.prototype.int64Data=ke.emptyArray,Se.prototype.name="",Se.prototype.docString="",Se.prototype.rawData=ke.newBuffer([]),Se.prototype.externalData=ke.emptyArray,Se.prototype.dataLocation=0,Se.prototype.doubleData=ke.emptyArray,Se.prototype.uint64Data=ke.emptyArray,Se.create=function(Ae){return new Se(Ae)},Se.encode=function(Ae,Ie){if(Ie||(Ie=Re.create()),Ae.dims!=null&&Ae.dims.length){Ie.uint32(10).fork();for(var Me=0;Me<Ae.dims.length;++Me)Ie.int64(Ae.dims[Me]);Ie.ldelim()}if(Ae.dataType!=null&&Ae.hasOwnProperty("dataType")&&Ie.uint32(16).int32(Ae.dataType),Ae.segment!=null&&Ae.hasOwnProperty("segment")&&Ce.onnx.TensorProto.Segment.encode(Ae.segment,Ie.uint32(26).fork()).ldelim(),Ae.floatData!=null&&Ae.floatData.length){for(Ie.uint32(34).fork(),Me=0;Me<Ae.floatData.length;++Me)Ie.float(Ae.floatData[Me]);Ie.ldelim()}if(Ae.int32Data!=null&&Ae.int32Data.length){for(Ie.uint32(42).fork(),Me=0;Me<Ae.int32Data.length;++Me)Ie.int32(Ae.int32Data[Me]);Ie.ldelim()}if(Ae.stringData!=null&&Ae.stringData.length)for(Me=0;Me<Ae.stringData.length;++Me)Ie.uint32(50).bytes(Ae.stringData[Me]);if(Ae.int64Data!=null&&Ae.int64Data.length){for(Ie.uint32(58).fork(),Me=0;Me<Ae.int64Data.length;++Me)Ie.int64(Ae.int64Data[Me]);Ie.ldelim()}if(Ae.name!=null&&Ae.hasOwnProperty("name")&&Ie.uint32(66).string(Ae.name),Ae.rawData!=null&&Ae.hasOwnProperty("rawData")&&Ie.uint32(74).bytes(Ae.rawData),Ae.doubleData!=null&&Ae.doubleData.length){for(Ie.uint32(82).fork(),Me=0;Me<Ae.doubleData.length;++Me)Ie.double(Ae.doubleData[Me]);Ie.ldelim()}if(Ae.uint64Data!=null&&Ae.uint64Data.length){for(Ie.uint32(90).fork(),Me=0;Me<Ae.uint64Data.length;++Me)Ie.uint64(Ae.uint64Data[Me]);Ie.ldelim()}if(Ae.docString!=null&&Ae.hasOwnProperty("docString")&&Ie.uint32(98).string(Ae.docString),Ae.externalData!=null&&Ae.externalData.length)for(Me=0;Me<Ae.externalData.length;++Me)Ce.onnx.StringStringEntryProto.encode(Ae.externalData[Me],Ie.uint32(106).fork()).ldelim();return Ae.dataLocation!=null&&Ae.hasOwnProperty("dataLocation")&&Ie.uint32(112).int32(Ae.dataLocation),Ie},Se.encodeDelimited=function(Ae,Ie){return this.encode(Ae,Ie).ldelim()},Se.decode=function(Ae,Ie){Ae instanceof Pe||(Ae=Pe.create(Ae));for(var Me=Ie===void 0?Ae.len:Ae.pos+Ie,Fe=new Ce.onnx.TensorProto;Ae.pos<Me;){var Ve=Ae.uint32();switch(Ve>>>3){case 1:if(Fe.dims&&Fe.dims.length||(Fe.dims=[]),(7&Ve)==2)for(var je=Ae.uint32()+Ae.pos;Ae.pos<je;)Fe.dims.push(Ae.int64());else Fe.dims.push(Ae.int64());break;case 2:Fe.dataType=Ae.int32();break;case 3:Fe.segment=Ce.onnx.TensorProto.Segment.decode(Ae,Ae.uint32());break;case 4:if(Fe.floatData&&Fe.floatData.length||(Fe.floatData=[]),(7&Ve)==2)for(je=Ae.uint32()+Ae.pos;Ae.pos<je;)Fe.floatData.push(Ae.float());else Fe.floatData.push(Ae.float());break;case 5:if(Fe.int32Data&&Fe.int32Data.length||(Fe.int32Data=[]),(7&Ve)==2)for(je=Ae.uint32()+Ae.pos;Ae.pos<je;)Fe.int32Data.push(Ae.int32());else Fe.int32Data.push(Ae.int32());break;case 6:Fe.stringData&&Fe.stringData.length||(Fe.stringData=[]),Fe.stringData.push(Ae.bytes());break;case 7:if(Fe.int64Data&&Fe.int64Data.length||(Fe.int64Data=[]),(7&Ve)==2)for(je=Ae.uint32()+Ae.pos;Ae.pos<je;)Fe.int64Data.push(Ae.int64());else Fe.int64Data.push(Ae.int64());break;case 8:Fe.name=Ae.string();break;case 12:Fe.docString=Ae.string();break;case 9:Fe.rawData=Ae.bytes();break;case 13:Fe.externalData&&Fe.externalData.length||(Fe.externalData=[]),Fe.externalData.push(Ce.onnx.StringStringEntryProto.decode(Ae,Ae.uint32()));break;case 14:Fe.dataLocation=Ae.int32();break;case 10:if(Fe.doubleData&&Fe.doubleData.length||(Fe.doubleData=[]),(7&Ve)==2)for(je=Ae.uint32()+Ae.pos;Ae.pos<je;)Fe.doubleData.push(Ae.double());else Fe.doubleData.push(Ae.double());break;case 11:if(Fe.uint64Data&&Fe.uint64Data.length||(Fe.uint64Data=[]),(7&Ve)==2)for(je=Ae.uint32()+Ae.pos;Ae.pos<je;)Fe.uint64Data.push(Ae.uint64());else Fe.uint64Data.push(Ae.uint64());break;default:Ae.skipType(7&Ve)}}return Fe},Se.decodeDelimited=function(Ae){return Ae instanceof Pe||(Ae=new Pe(Ae)),this.decode(Ae,Ae.uint32())},Se.verify=function(Ae){if(typeof Ae!="object"||Ae===null)return"object expected";if(Ae.dims!=null&&Ae.hasOwnProperty("dims")){if(!Array.isArray(Ae.dims))return"dims: array expected";for(var Ie=0;Ie<Ae.dims.length;++Ie)if(!(ke.isInteger(Ae.dims[Ie])||Ae.dims[Ie]&&ke.isInteger(Ae.dims[Ie].low)&&ke.isInteger(Ae.dims[Ie].high)))return"dims: integer|Long[] expected"}if(Ae.dataType!=null&&Ae.hasOwnProperty("dataType")&&!ke.isInteger(Ae.dataType))return"dataType: integer expected";if(Ae.segment!=null&&Ae.hasOwnProperty("segment")&&(Me=Ce.onnx.TensorProto.Segment.verify(Ae.segment)))return"segment."+Me;if(Ae.floatData!=null&&Ae.hasOwnProperty("floatData")){if(!Array.isArray(Ae.floatData))return"floatData: array expected";for(Ie=0;Ie<Ae.floatData.length;++Ie)if(typeof Ae.floatData[Ie]!="number")return"floatData: number[] expected"}if(Ae.int32Data!=null&&Ae.hasOwnProperty("int32Data")){if(!Array.isArray(Ae.int32Data))return"int32Data: array expected";for(Ie=0;Ie<Ae.int32Data.length;++Ie)if(!ke.isInteger(Ae.int32Data[Ie]))return"int32Data: integer[] expected"}if(Ae.stringData!=null&&Ae.hasOwnProperty("stringData")){if(!Array.isArray(Ae.stringData))return"stringData: array expected";for(Ie=0;Ie<Ae.stringData.length;++Ie)if(!(Ae.stringData[Ie]&&typeof Ae.stringData[Ie].length=="number"||ke.isString(Ae.stringData[Ie])))return"stringData: buffer[] expected"}if(Ae.int64Data!=null&&Ae.hasOwnProperty("int64Data")){if(!Array.isArray(Ae.int64Data))return"int64Data: array expected";for(Ie=0;Ie<Ae.int64Data.length;++Ie)if(!(ke.isInteger(Ae.int64Data[Ie])||Ae.int64Data[Ie]&&ke.isInteger(Ae.int64Data[Ie].low)&&ke.isInteger(Ae.int64Data[Ie].high)))return"int64Data: integer|Long[] expected"}if(Ae.name!=null&&Ae.hasOwnProperty("name")&&!ke.isString(Ae.name))return"name: string expected";if(Ae.docString!=null&&Ae.hasOwnProperty("docString")&&!ke.isString(Ae.docString))return"docString: string expected";if(Ae.rawData!=null&&Ae.hasOwnProperty("rawData")&&!(Ae.rawData&&typeof Ae.rawData.length=="number"||ke.isString(Ae.rawData)))return"rawData: buffer expected";if(Ae.externalData!=null&&Ae.hasOwnProperty("externalData")){if(!Array.isArray(Ae.externalData))return"externalData: array expected";for(Ie=0;Ie<Ae.externalData.length;++Ie){var Me;if(Me=Ce.onnx.StringStringEntryProto.verify(Ae.externalData[Ie]))return"externalData."+Me}}if(Ae.dataLocation!=null&&Ae.hasOwnProperty("dataLocation"))switch(Ae.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(Ae.doubleData!=null&&Ae.hasOwnProperty("doubleData")){if(!Array.isArray(Ae.doubleData))return"doubleData: array expected";for(Ie=0;Ie<Ae.doubleData.length;++Ie)if(typeof Ae.doubleData[Ie]!="number")return"doubleData: number[] expected"}if(Ae.uint64Data!=null&&Ae.hasOwnProperty("uint64Data")){if(!Array.isArray(Ae.uint64Data))return"uint64Data: array expected";for(Ie=0;Ie<Ae.uint64Data.length;++Ie)if(!(ke.isInteger(Ae.uint64Data[Ie])||Ae.uint64Data[Ie]&&ke.isInteger(Ae.uint64Data[Ie].low)&&ke.isInteger(Ae.uint64Data[Ie].high)))return"uint64Data: integer|Long[] expected"}return null},Se.fromObject=function(Ae){if(Ae instanceof Ce.onnx.TensorProto)return Ae;var Ie=new Ce.onnx.TensorProto;if(Ae.dims){if(!Array.isArray(Ae.dims))throw TypeError(".onnx.TensorProto.dims: array expected");Ie.dims=[];for(var Me=0;Me<Ae.dims.length;++Me)ke.Long?(Ie.dims[Me]=ke.Long.fromValue(Ae.dims[Me])).unsigned=!1:typeof Ae.dims[Me]=="string"?Ie.dims[Me]=parseInt(Ae.dims[Me],10):typeof Ae.dims[Me]=="number"?Ie.dims[Me]=Ae.dims[Me]:typeof Ae.dims[Me]=="object"&&(Ie.dims[Me]=new ke.LongBits(Ae.dims[Me].low>>>0,Ae.dims[Me].high>>>0).toNumber())}if(Ae.dataType!=null&&(Ie.dataType=0|Ae.dataType),Ae.segment!=null){if(typeof Ae.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");Ie.segment=Ce.onnx.TensorProto.Segment.fromObject(Ae.segment)}if(Ae.floatData){if(!Array.isArray(Ae.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(Ie.floatData=[],Me=0;Me<Ae.floatData.length;++Me)Ie.floatData[Me]=Number(Ae.floatData[Me])}if(Ae.int32Data){if(!Array.isArray(Ae.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(Ie.int32Data=[],Me=0;Me<Ae.int32Data.length;++Me)Ie.int32Data[Me]=0|Ae.int32Data[Me]}if(Ae.stringData){if(!Array.isArray(Ae.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(Ie.stringData=[],Me=0;Me<Ae.stringData.length;++Me)typeof Ae.stringData[Me]=="string"?ke.base64.decode(Ae.stringData[Me],Ie.stringData[Me]=ke.newBuffer(ke.base64.length(Ae.stringData[Me])),0):Ae.stringData[Me].length&&(Ie.stringData[Me]=Ae.stringData[Me])}if(Ae.int64Data){if(!Array.isArray(Ae.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(Ie.int64Data=[],Me=0;Me<Ae.int64Data.length;++Me)ke.Long?(Ie.int64Data[Me]=ke.Long.fromValue(Ae.int64Data[Me])).unsigned=!1:typeof Ae.int64Data[Me]=="string"?Ie.int64Data[Me]=parseInt(Ae.int64Data[Me],10):typeof Ae.int64Data[Me]=="number"?Ie.int64Data[Me]=Ae.int64Data[Me]:typeof Ae.int64Data[Me]=="object"&&(Ie.int64Data[Me]=new ke.LongBits(Ae.int64Data[Me].low>>>0,Ae.int64Data[Me].high>>>0).toNumber())}if(Ae.name!=null&&(Ie.name=String(Ae.name)),Ae.docString!=null&&(Ie.docString=String(Ae.docString)),Ae.rawData!=null&&(typeof Ae.rawData=="string"?ke.base64.decode(Ae.rawData,Ie.rawData=ke.newBuffer(ke.base64.length(Ae.rawData)),0):Ae.rawData.length&&(Ie.rawData=Ae.rawData)),Ae.externalData){if(!Array.isArray(Ae.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(Ie.externalData=[],Me=0;Me<Ae.externalData.length;++Me){if(typeof Ae.externalData[Me]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");Ie.externalData[Me]=Ce.onnx.StringStringEntryProto.fromObject(Ae.externalData[Me])}}switch(Ae.dataLocation){case"DEFAULT":case 0:Ie.dataLocation=0;break;case"EXTERNAL":case 1:Ie.dataLocation=1}if(Ae.doubleData){if(!Array.isArray(Ae.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(Ie.doubleData=[],Me=0;Me<Ae.doubleData.length;++Me)Ie.doubleData[Me]=Number(Ae.doubleData[Me])}if(Ae.uint64Data){if(!Array.isArray(Ae.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(Ie.uint64Data=[],Me=0;Me<Ae.uint64Data.length;++Me)ke.Long?(Ie.uint64Data[Me]=ke.Long.fromValue(Ae.uint64Data[Me])).unsigned=!0:typeof Ae.uint64Data[Me]=="string"?Ie.uint64Data[Me]=parseInt(Ae.uint64Data[Me],10):typeof Ae.uint64Data[Me]=="number"?Ie.uint64Data[Me]=Ae.uint64Data[Me]:typeof Ae.uint64Data[Me]=="object"&&(Ie.uint64Data[Me]=new ke.LongBits(Ae.uint64Data[Me].low>>>0,Ae.uint64Data[Me].high>>>0).toNumber(!0))}return Ie},Se.toObject=function(Ae,Ie){Ie||(Ie={});var Me={};if((Ie.arrays||Ie.defaults)&&(Me.dims=[],Me.floatData=[],Me.int32Data=[],Me.stringData=[],Me.int64Data=[],Me.doubleData=[],Me.uint64Data=[],Me.externalData=[]),Ie.defaults&&(Me.dataType=0,Me.segment=null,Me.name="",Ie.bytes===String?Me.rawData="":(Me.rawData=[],Ie.bytes!==Array&&(Me.rawData=ke.newBuffer(Me.rawData))),Me.docString="",Me.dataLocation=Ie.enums===String?"DEFAULT":0),Ae.dims&&Ae.dims.length){Me.dims=[];for(var Fe=0;Fe<Ae.dims.length;++Fe)typeof Ae.dims[Fe]=="number"?Me.dims[Fe]=Ie.longs===String?String(Ae.dims[Fe]):Ae.dims[Fe]:Me.dims[Fe]=Ie.longs===String?ke.Long.prototype.toString.call(Ae.dims[Fe]):Ie.longs===Number?new ke.LongBits(Ae.dims[Fe].low>>>0,Ae.dims[Fe].high>>>0).toNumber():Ae.dims[Fe]}if(Ae.dataType!=null&&Ae.hasOwnProperty("dataType")&&(Me.dataType=Ae.dataType),Ae.segment!=null&&Ae.hasOwnProperty("segment")&&(Me.segment=Ce.onnx.TensorProto.Segment.toObject(Ae.segment,Ie)),Ae.floatData&&Ae.floatData.length)for(Me.floatData=[],Fe=0;Fe<Ae.floatData.length;++Fe)Me.floatData[Fe]=Ie.json&&!isFinite(Ae.floatData[Fe])?String(Ae.floatData[Fe]):Ae.floatData[Fe];if(Ae.int32Data&&Ae.int32Data.length)for(Me.int32Data=[],Fe=0;Fe<Ae.int32Data.length;++Fe)Me.int32Data[Fe]=Ae.int32Data[Fe];if(Ae.stringData&&Ae.stringData.length)for(Me.stringData=[],Fe=0;Fe<Ae.stringData.length;++Fe)Me.stringData[Fe]=Ie.bytes===String?ke.base64.encode(Ae.stringData[Fe],0,Ae.stringData[Fe].length):Ie.bytes===Array?Array.prototype.slice.call(Ae.stringData[Fe]):Ae.stringData[Fe];if(Ae.int64Data&&Ae.int64Data.length)for(Me.int64Data=[],Fe=0;Fe<Ae.int64Data.length;++Fe)typeof Ae.int64Data[Fe]=="number"?Me.int64Data[Fe]=Ie.longs===String?String(Ae.int64Data[Fe]):Ae.int64Data[Fe]:Me.int64Data[Fe]=Ie.longs===String?ke.Long.prototype.toString.call(Ae.int64Data[Fe]):Ie.longs===Number?new ke.LongBits(Ae.int64Data[Fe].low>>>0,Ae.int64Data[Fe].high>>>0).toNumber():Ae.int64Data[Fe];if(Ae.name!=null&&Ae.hasOwnProperty("name")&&(Me.name=Ae.name),Ae.rawData!=null&&Ae.hasOwnProperty("rawData")&&(Me.rawData=Ie.bytes===String?ke.base64.encode(Ae.rawData,0,Ae.rawData.length):Ie.bytes===Array?Array.prototype.slice.call(Ae.rawData):Ae.rawData),Ae.doubleData&&Ae.doubleData.length)for(Me.doubleData=[],Fe=0;Fe<Ae.doubleData.length;++Fe)Me.doubleData[Fe]=Ie.json&&!isFinite(Ae.doubleData[Fe])?String(Ae.doubleData[Fe]):Ae.doubleData[Fe];if(Ae.uint64Data&&Ae.uint64Data.length)for(Me.uint64Data=[],Fe=0;Fe<Ae.uint64Data.length;++Fe)typeof Ae.uint64Data[Fe]=="number"?Me.uint64Data[Fe]=Ie.longs===String?String(Ae.uint64Data[Fe]):Ae.uint64Data[Fe]:Me.uint64Data[Fe]=Ie.longs===String?ke.Long.prototype.toString.call(Ae.uint64Data[Fe]):Ie.longs===Number?new ke.LongBits(Ae.uint64Data[Fe].low>>>0,Ae.uint64Data[Fe].high>>>0).toNumber(!0):Ae.uint64Data[Fe];if(Ae.docString!=null&&Ae.hasOwnProperty("docString")&&(Me.docString=Ae.docString),Ae.externalData&&Ae.externalData.length)for(Me.externalData=[],Fe=0;Fe<Ae.externalData.length;++Fe)Me.externalData[Fe]=Ce.onnx.StringStringEntryProto.toObject(Ae.externalData[Fe],Ie);return Ae.dataLocation!=null&&Ae.hasOwnProperty("dataLocation")&&(Me.dataLocation=Ie.enums===String?Ce.onnx.TensorProto.DataLocation[Ae.dataLocation]:Ae.dataLocation),Me},Se.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},Se.DataType=function(){var Ae={},Ie=Object.create(Ae);return Ie[Ae[0]="UNDEFINED"]=0,Ie[Ae[1]="FLOAT"]=1,Ie[Ae[2]="UINT8"]=2,Ie[Ae[3]="INT8"]=3,Ie[Ae[4]="UINT16"]=4,Ie[Ae[5]="INT16"]=5,Ie[Ae[6]="INT32"]=6,Ie[Ae[7]="INT64"]=7,Ie[Ae[8]="STRING"]=8,Ie[Ae[9]="BOOL"]=9,Ie[Ae[10]="FLOAT16"]=10,Ie[Ae[11]="DOUBLE"]=11,Ie[Ae[12]="UINT32"]=12,Ie[Ae[13]="UINT64"]=13,Ie[Ae[14]="COMPLEX64"]=14,Ie[Ae[15]="COMPLEX128"]=15,Ie[Ae[16]="BFLOAT16"]=16,Ie}(),Se.Segment=function(){function Ae(Ie){if(Ie)for(var Me=Object.keys(Ie),Fe=0;Fe<Me.length;++Fe)Ie[Me[Fe]]!=null&&(this[Me[Fe]]=Ie[Me[Fe]])}return Ae.prototype.begin=ke.Long?ke.Long.fromBits(0,0,!1):0,Ae.prototype.end=ke.Long?ke.Long.fromBits(0,0,!1):0,Ae.create=function(Ie){return new Ae(Ie)},Ae.encode=function(Ie,Me){return Me||(Me=Re.create()),Ie.begin!=null&&Ie.hasOwnProperty("begin")&&Me.uint32(8).int64(Ie.begin),Ie.end!=null&&Ie.hasOwnProperty("end")&&Me.uint32(16).int64(Ie.end),Me},Ae.encodeDelimited=function(Ie,Me){return this.encode(Ie,Me).ldelim()},Ae.decode=function(Ie,Me){Ie instanceof Pe||(Ie=Pe.create(Ie));for(var Fe=Me===void 0?Ie.len:Ie.pos+Me,Ve=new Ce.onnx.TensorProto.Segment;Ie.pos<Fe;){var je=Ie.uint32();switch(je>>>3){case 1:Ve.begin=Ie.int64();break;case 2:Ve.end=Ie.int64();break;default:Ie.skipType(7&je)}}return Ve},Ae.decodeDelimited=function(Ie){return Ie instanceof Pe||(Ie=new Pe(Ie)),this.decode(Ie,Ie.uint32())},Ae.verify=function(Ie){return typeof Ie!="object"||Ie===null?"object expected":Ie.begin!=null&&Ie.hasOwnProperty("begin")&&!(ke.isInteger(Ie.begin)||Ie.begin&&ke.isInteger(Ie.begin.low)&&ke.isInteger(Ie.begin.high))?"begin: integer|Long expected":Ie.end!=null&&Ie.hasOwnProperty("end")&&!(ke.isInteger(Ie.end)||Ie.end&&ke.isInteger(Ie.end.low)&&ke.isInteger(Ie.end.high))?"end: integer|Long expected":null},Ae.fromObject=function(Ie){if(Ie instanceof Ce.onnx.TensorProto.Segment)return Ie;var Me=new Ce.onnx.TensorProto.Segment;return Ie.begin!=null&&(ke.Long?(Me.begin=ke.Long.fromValue(Ie.begin)).unsigned=!1:typeof Ie.begin=="string"?Me.begin=parseInt(Ie.begin,10):typeof Ie.begin=="number"?Me.begin=Ie.begin:typeof Ie.begin=="object"&&(Me.begin=new ke.LongBits(Ie.begin.low>>>0,Ie.begin.high>>>0).toNumber())),Ie.end!=null&&(ke.Long?(Me.end=ke.Long.fromValue(Ie.end)).unsigned=!1:typeof Ie.end=="string"?Me.end=parseInt(Ie.end,10):typeof Ie.end=="number"?Me.end=Ie.end:typeof Ie.end=="object"&&(Me.end=new ke.LongBits(Ie.end.low>>>0,Ie.end.high>>>0).toNumber())),Me},Ae.toObject=function(Ie,Me){Me||(Me={});var Fe={};if(Me.defaults){if(ke.Long){var Ve=new ke.Long(0,0,!1);Fe.begin=Me.longs===String?Ve.toString():Me.longs===Number?Ve.toNumber():Ve}else Fe.begin=Me.longs===String?"0":0;ke.Long?(Ve=new ke.Long(0,0,!1),Fe.end=Me.longs===String?Ve.toString():Me.longs===Number?Ve.toNumber():Ve):Fe.end=Me.longs===String?"0":0}return Ie.begin!=null&&Ie.hasOwnProperty("begin")&&(typeof Ie.begin=="number"?Fe.begin=Me.longs===String?String(Ie.begin):Ie.begin:Fe.begin=Me.longs===String?ke.Long.prototype.toString.call(Ie.begin):Me.longs===Number?new ke.LongBits(Ie.begin.low>>>0,Ie.begin.high>>>0).toNumber():Ie.begin),Ie.end!=null&&Ie.hasOwnProperty("end")&&(typeof Ie.end=="number"?Fe.end=Me.longs===String?String(Ie.end):Ie.end:Fe.end=Me.longs===String?ke.Long.prototype.toString.call(Ie.end):Me.longs===Number?new ke.LongBits(Ie.end.low>>>0,Ie.end.high>>>0).toNumber():Ie.end),Fe},Ae.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},Ae}(),Se.DataLocation=function(){var Ae={},Ie=Object.create(Ae);return Ie[Ae[0]="DEFAULT"]=0,Ie[Ae[1]="EXTERNAL"]=1,Ie}(),Se}(),Ee.TensorShapeProto=function(){function Se(Ae){if(this.dim=[],Ae)for(var Ie=Object.keys(Ae),Me=0;Me<Ie.length;++Me)Ae[Ie[Me]]!=null&&(this[Ie[Me]]=Ae[Ie[Me]])}return Se.prototype.dim=ke.emptyArray,Se.create=function(Ae){return new Se(Ae)},Se.encode=function(Ae,Ie){if(Ie||(Ie=Re.create()),Ae.dim!=null&&Ae.dim.length)for(var Me=0;Me<Ae.dim.length;++Me)Ce.onnx.TensorShapeProto.Dimension.encode(Ae.dim[Me],Ie.uint32(10).fork()).ldelim();return Ie},Se.encodeDelimited=function(Ae,Ie){return this.encode(Ae,Ie).ldelim()},Se.decode=function(Ae,Ie){Ae instanceof Pe||(Ae=Pe.create(Ae));for(var Me=Ie===void 0?Ae.len:Ae.pos+Ie,Fe=new Ce.onnx.TensorShapeProto;Ae.pos<Me;){var Ve=Ae.uint32();Ve>>>3==1?(Fe.dim&&Fe.dim.length||(Fe.dim=[]),Fe.dim.push(Ce.onnx.TensorShapeProto.Dimension.decode(Ae,Ae.uint32()))):Ae.skipType(7&Ve)}return Fe},Se.decodeDelimited=function(Ae){return Ae instanceof Pe||(Ae=new Pe(Ae)),this.decode(Ae,Ae.uint32())},Se.verify=function(Ae){if(typeof Ae!="object"||Ae===null)return"object expected";if(Ae.dim!=null&&Ae.hasOwnProperty("dim")){if(!Array.isArray(Ae.dim))return"dim: array expected";for(var Ie=0;Ie<Ae.dim.length;++Ie){var Me=Ce.onnx.TensorShapeProto.Dimension.verify(Ae.dim[Ie]);if(Me)return"dim."+Me}}return null},Se.fromObject=function(Ae){if(Ae instanceof Ce.onnx.TensorShapeProto)return Ae;var Ie=new Ce.onnx.TensorShapeProto;if(Ae.dim){if(!Array.isArray(Ae.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");Ie.dim=[];for(var Me=0;Me<Ae.dim.length;++Me){if(typeof Ae.dim[Me]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");Ie.dim[Me]=Ce.onnx.TensorShapeProto.Dimension.fromObject(Ae.dim[Me])}}return Ie},Se.toObject=function(Ae,Ie){Ie||(Ie={});var Me={};if((Ie.arrays||Ie.defaults)&&(Me.dim=[]),Ae.dim&&Ae.dim.length){Me.dim=[];for(var Fe=0;Fe<Ae.dim.length;++Fe)Me.dim[Fe]=Ce.onnx.TensorShapeProto.Dimension.toObject(Ae.dim[Fe],Ie)}return Me},Se.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},Se.Dimension=function(){function Ae(Me){if(Me)for(var Fe=Object.keys(Me),Ve=0;Ve<Fe.length;++Ve)Me[Fe[Ve]]!=null&&(this[Fe[Ve]]=Me[Fe[Ve]])}var Ie;return Ae.prototype.dimValue=ke.Long?ke.Long.fromBits(0,0,!1):0,Ae.prototype.dimParam="",Ae.prototype.denotation="",Object.defineProperty(Ae.prototype,"value",{get:ke.oneOfGetter(Ie=["dimValue","dimParam"]),set:ke.oneOfSetter(Ie)}),Ae.create=function(Me){return new Ae(Me)},Ae.encode=function(Me,Fe){return Fe||(Fe=Re.create()),Me.dimValue!=null&&Me.hasOwnProperty("dimValue")&&Fe.uint32(8).int64(Me.dimValue),Me.dimParam!=null&&Me.hasOwnProperty("dimParam")&&Fe.uint32(18).string(Me.dimParam),Me.denotation!=null&&Me.hasOwnProperty("denotation")&&Fe.uint32(26).string(Me.denotation),Fe},Ae.encodeDelimited=function(Me,Fe){return this.encode(Me,Fe).ldelim()},Ae.decode=function(Me,Fe){Me instanceof Pe||(Me=Pe.create(Me));for(var Ve=Fe===void 0?Me.len:Me.pos+Fe,je=new Ce.onnx.TensorShapeProto.Dimension;Me.pos<Ve;){var Be=Me.uint32();switch(Be>>>3){case 1:je.dimValue=Me.int64();break;case 2:je.dimParam=Me.string();break;case 3:je.denotation=Me.string();break;default:Me.skipType(7&Be)}}return je},Ae.decodeDelimited=function(Me){return Me instanceof Pe||(Me=new Pe(Me)),this.decode(Me,Me.uint32())},Ae.verify=function(Me){if(typeof Me!="object"||Me===null)return"object expected";var Fe={};if(Me.dimValue!=null&&Me.hasOwnProperty("dimValue")&&(Fe.value=1,!(ke.isInteger(Me.dimValue)||Me.dimValue&&ke.isInteger(Me.dimValue.low)&&ke.isInteger(Me.dimValue.high))))return"dimValue: integer|Long expected";if(Me.dimParam!=null&&Me.hasOwnProperty("dimParam")){if(Fe.value===1)return"value: multiple values";if(Fe.value=1,!ke.isString(Me.dimParam))return"dimParam: string expected"}return Me.denotation!=null&&Me.hasOwnProperty("denotation")&&!ke.isString(Me.denotation)?"denotation: string expected":null},Ae.fromObject=function(Me){if(Me instanceof Ce.onnx.TensorShapeProto.Dimension)return Me;var Fe=new Ce.onnx.TensorShapeProto.Dimension;return Me.dimValue!=null&&(ke.Long?(Fe.dimValue=ke.Long.fromValue(Me.dimValue)).unsigned=!1:typeof Me.dimValue=="string"?Fe.dimValue=parseInt(Me.dimValue,10):typeof Me.dimValue=="number"?Fe.dimValue=Me.dimValue:typeof Me.dimValue=="object"&&(Fe.dimValue=new ke.LongBits(Me.dimValue.low>>>0,Me.dimValue.high>>>0).toNumber())),Me.dimParam!=null&&(Fe.dimParam=String(Me.dimParam)),Me.denotation!=null&&(Fe.denotation=String(Me.denotation)),Fe},Ae.toObject=function(Me,Fe){Fe||(Fe={});var Ve={};return Fe.defaults&&(Ve.denotation=""),Me.dimValue!=null&&Me.hasOwnProperty("dimValue")&&(typeof Me.dimValue=="number"?Ve.dimValue=Fe.longs===String?String(Me.dimValue):Me.dimValue:Ve.dimValue=Fe.longs===String?ke.Long.prototype.toString.call(Me.dimValue):Fe.longs===Number?new ke.LongBits(Me.dimValue.low>>>0,Me.dimValue.high>>>0).toNumber():Me.dimValue,Fe.oneofs&&(Ve.value="dimValue")),Me.dimParam!=null&&Me.hasOwnProperty("dimParam")&&(Ve.dimParam=Me.dimParam,Fe.oneofs&&(Ve.value="dimParam")),Me.denotation!=null&&Me.hasOwnProperty("denotation")&&(Ve.denotation=Me.denotation),Ve},Ae.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},Ae}(),Se}(),Ee.TypeProto=function(){function Se(Ie){if(Ie)for(var Me=Object.keys(Ie),Fe=0;Fe<Me.length;++Fe)Ie[Me[Fe]]!=null&&(this[Me[Fe]]=Ie[Me[Fe]])}var Ae;return Se.prototype.tensorType=null,Se.prototype.denotation="",Object.defineProperty(Se.prototype,"value",{get:ke.oneOfGetter(Ae=["tensorType"]),set:ke.oneOfSetter(Ae)}),Se.create=function(Ie){return new Se(Ie)},Se.encode=function(Ie,Me){return Me||(Me=Re.create()),Ie.tensorType!=null&&Ie.hasOwnProperty("tensorType")&&Ce.onnx.TypeProto.Tensor.encode(Ie.tensorType,Me.uint32(10).fork()).ldelim(),Ie.denotation!=null&&Ie.hasOwnProperty("denotation")&&Me.uint32(50).string(Ie.denotation),Me},Se.encodeDelimited=function(Ie,Me){return this.encode(Ie,Me).ldelim()},Se.decode=function(Ie,Me){Ie instanceof Pe||(Ie=Pe.create(Ie));for(var Fe=Me===void 0?Ie.len:Ie.pos+Me,Ve=new Ce.onnx.TypeProto;Ie.pos<Fe;){var je=Ie.uint32();switch(je>>>3){case 1:Ve.tensorType=Ce.onnx.TypeProto.Tensor.decode(Ie,Ie.uint32());break;case 6:Ve.denotation=Ie.string();break;default:Ie.skipType(7&je)}}return Ve},Se.decodeDelimited=function(Ie){return Ie instanceof Pe||(Ie=new Pe(Ie)),this.decode(Ie,Ie.uint32())},Se.verify=function(Ie){if(typeof Ie!="object"||Ie===null)return"object expected";if(Ie.tensorType!=null&&Ie.hasOwnProperty("tensorType")){var Me=Ce.onnx.TypeProto.Tensor.verify(Ie.tensorType);if(Me)return"tensorType."+Me}return Ie.denotation!=null&&Ie.hasOwnProperty("denotation")&&!ke.isString(Ie.denotation)?"denotation: string expected":null},Se.fromObject=function(Ie){if(Ie instanceof Ce.onnx.TypeProto)return Ie;var Me=new Ce.onnx.TypeProto;if(Ie.tensorType!=null){if(typeof Ie.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");Me.tensorType=Ce.onnx.TypeProto.Tensor.fromObject(Ie.tensorType)}return Ie.denotation!=null&&(Me.denotation=String(Ie.denotation)),Me},Se.toObject=function(Ie,Me){Me||(Me={});var Fe={};return Me.defaults&&(Fe.denotation=""),Ie.tensorType!=null&&Ie.hasOwnProperty("tensorType")&&(Fe.tensorType=Ce.onnx.TypeProto.Tensor.toObject(Ie.tensorType,Me),Me.oneofs&&(Fe.value="tensorType")),Ie.denotation!=null&&Ie.hasOwnProperty("denotation")&&(Fe.denotation=Ie.denotation),Fe},Se.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},Se.Tensor=function(){function Ie(Me){if(Me)for(var Fe=Object.keys(Me),Ve=0;Ve<Fe.length;++Ve)Me[Fe[Ve]]!=null&&(this[Fe[Ve]]=Me[Fe[Ve]])}return Ie.prototype.elemType=0,Ie.prototype.shape=null,Ie.create=function(Me){return new Ie(Me)},Ie.encode=function(Me,Fe){return Fe||(Fe=Re.create()),Me.elemType!=null&&Me.hasOwnProperty("elemType")&&Fe.uint32(8).int32(Me.elemType),Me.shape!=null&&Me.hasOwnProperty("shape")&&Ce.onnx.TensorShapeProto.encode(Me.shape,Fe.uint32(18).fork()).ldelim(),Fe},Ie.encodeDelimited=function(Me,Fe){return this.encode(Me,Fe).ldelim()},Ie.decode=function(Me,Fe){Me instanceof Pe||(Me=Pe.create(Me));for(var Ve=Fe===void 0?Me.len:Me.pos+Fe,je=new Ce.onnx.TypeProto.Tensor;Me.pos<Ve;){var Be=Me.uint32();switch(Be>>>3){case 1:je.elemType=Me.int32();break;case 2:je.shape=Ce.onnx.TensorShapeProto.decode(Me,Me.uint32());break;default:Me.skipType(7&Be)}}return je},Ie.decodeDelimited=function(Me){return Me instanceof Pe||(Me=new Pe(Me)),this.decode(Me,Me.uint32())},Ie.verify=function(Me){if(typeof Me!="object"||Me===null)return"object expected";if(Me.elemType!=null&&Me.hasOwnProperty("elemType")&&!ke.isInteger(Me.elemType))return"elemType: integer expected";if(Me.shape!=null&&Me.hasOwnProperty("shape")){var Fe=Ce.onnx.TensorShapeProto.verify(Me.shape);if(Fe)return"shape."+Fe}return null},Ie.fromObject=function(Me){if(Me instanceof Ce.onnx.TypeProto.Tensor)return Me;var Fe=new Ce.onnx.TypeProto.Tensor;if(Me.elemType!=null&&(Fe.elemType=0|Me.elemType),Me.shape!=null){if(typeof Me.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");Fe.shape=Ce.onnx.TensorShapeProto.fromObject(Me.shape)}return Fe},Ie.toObject=function(Me,Fe){Fe||(Fe={});var Ve={};return Fe.defaults&&(Ve.elemType=0,Ve.shape=null),Me.elemType!=null&&Me.hasOwnProperty("elemType")&&(Ve.elemType=Me.elemType),Me.shape!=null&&Me.hasOwnProperty("shape")&&(Ve.shape=Ce.onnx.TensorShapeProto.toObject(Me.shape,Fe)),Ve},Ie.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},Ie}(),Se}(),Ee.OperatorSetIdProto=function(){function Se(Ae){if(Ae)for(var Ie=Object.keys(Ae),Me=0;Me<Ie.length;++Me)Ae[Ie[Me]]!=null&&(this[Ie[Me]]=Ae[Ie[Me]])}return Se.prototype.domain="",Se.prototype.version=ke.Long?ke.Long.fromBits(0,0,!1):0,Se.create=function(Ae){return new Se(Ae)},Se.encode=function(Ae,Ie){return Ie||(Ie=Re.create()),Ae.domain!=null&&Ae.hasOwnProperty("domain")&&Ie.uint32(10).string(Ae.domain),Ae.version!=null&&Ae.hasOwnProperty("version")&&Ie.uint32(16).int64(Ae.version),Ie},Se.encodeDelimited=function(Ae,Ie){return this.encode(Ae,Ie).ldelim()},Se.decode=function(Ae,Ie){Ae instanceof Pe||(Ae=Pe.create(Ae));for(var Me=Ie===void 0?Ae.len:Ae.pos+Ie,Fe=new Ce.onnx.OperatorSetIdProto;Ae.pos<Me;){var Ve=Ae.uint32();switch(Ve>>>3){case 1:Fe.domain=Ae.string();break;case 2:Fe.version=Ae.int64();break;default:Ae.skipType(7&Ve)}}return Fe},Se.decodeDelimited=function(Ae){return Ae instanceof Pe||(Ae=new Pe(Ae)),this.decode(Ae,Ae.uint32())},Se.verify=function(Ae){return typeof Ae!="object"||Ae===null?"object expected":Ae.domain!=null&&Ae.hasOwnProperty("domain")&&!ke.isString(Ae.domain)?"domain: string expected":Ae.version!=null&&Ae.hasOwnProperty("version")&&!(ke.isInteger(Ae.version)||Ae.version&&ke.isInteger(Ae.version.low)&&ke.isInteger(Ae.version.high))?"version: integer|Long expected":null},Se.fromObject=function(Ae){if(Ae instanceof Ce.onnx.OperatorSetIdProto)return Ae;var Ie=new Ce.onnx.OperatorSetIdProto;return Ae.domain!=null&&(Ie.domain=String(Ae.domain)),Ae.version!=null&&(ke.Long?(Ie.version=ke.Long.fromValue(Ae.version)).unsigned=!1:typeof Ae.version=="string"?Ie.version=parseInt(Ae.version,10):typeof Ae.version=="number"?Ie.version=Ae.version:typeof Ae.version=="object"&&(Ie.version=new ke.LongBits(Ae.version.low>>>0,Ae.version.high>>>0).toNumber())),Ie},Se.toObject=function(Ae,Ie){Ie||(Ie={});var Me={};if(Ie.defaults)if(Me.domain="",ke.Long){var Fe=new ke.Long(0,0,!1);Me.version=Ie.longs===String?Fe.toString():Ie.longs===Number?Fe.toNumber():Fe}else Me.version=Ie.longs===String?"0":0;return Ae.domain!=null&&Ae.hasOwnProperty("domain")&&(Me.domain=Ae.domain),Ae.version!=null&&Ae.hasOwnProperty("version")&&(typeof Ae.version=="number"?Me.version=Ie.longs===String?String(Ae.version):Ae.version:Me.version=Ie.longs===String?ke.Long.prototype.toString.call(Ae.version):Ie.longs===Number?new ke.LongBits(Ae.version.low>>>0,Ae.version.high>>>0).toNumber():Ae.version),Me},Se.prototype.toJSON=function(){return this.constructor.toObject(this,xe.util.toJSONOptions)},Se}(),Ee),r.exports=Ce},2100:(r,e,t)=>{r.exports=t(9482)},9482:(r,e,t)=>{var _e=e;function Te(){_e.util._configure(),_e.Writer._configure(_e.BufferWriter),_e.Reader._configure(_e.BufferReader)}_e.build="minimal",_e.Writer=t(1173),_e.BufferWriter=t(3155),_e.Reader=t(1408),_e.BufferReader=t(593),_e.util=t(9693),_e.rpc=t(5994),_e.roots=t(5054),_e.configure=Te,Te()},1408:(r,e,t)=>{r.exports=Re;var _e,Te=t(9693),Ee=Te.LongBits,xe=Te.utf8;function Pe(Fe,Ve){return RangeError("index out of range: "+Fe.pos+" + "+(Ve||1)+" > "+Fe.len)}function Re(Fe){this.buf=Fe,this.pos=0,this.len=Fe.length}var ke,Ce=typeof Uint8Array<"u"?function(Fe){if(Fe instanceof Uint8Array||Array.isArray(Fe))return new Re(Fe);throw Error("illegal buffer")}:function(Fe){if(Array.isArray(Fe))return new Re(Fe);throw Error("illegal buffer")},Se=function(){return Te.Buffer?function(Fe){return(Re.create=function(Ve){return Te.Buffer.isBuffer(Ve)?new _e(Ve):Ce(Ve)})(Fe)}:Ce};function Ae(){var Fe=new Ee(0,0),Ve=0;if(!(this.len-this.pos>4)){for(;Ve<3;++Ve){if(this.pos>=this.len)throw Pe(this);if(Fe.lo=(Fe.lo|(127&this.buf[this.pos])<<7*Ve)>>>0,this.buf[this.pos++]<128)return Fe}return Fe.lo=(Fe.lo|(127&this.buf[this.pos++])<<7*Ve)>>>0,Fe}for(;Ve<4;++Ve)if(Fe.lo=(Fe.lo|(127&this.buf[this.pos])<<7*Ve)>>>0,this.buf[this.pos++]<128)return Fe;if(Fe.lo=(Fe.lo|(127&this.buf[this.pos])<<28)>>>0,Fe.hi=(Fe.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return Fe;if(Ve=0,this.len-this.pos>4){for(;Ve<5;++Ve)if(Fe.hi=(Fe.hi|(127&this.buf[this.pos])<<7*Ve+3)>>>0,this.buf[this.pos++]<128)return Fe}else for(;Ve<5;++Ve){if(this.pos>=this.len)throw Pe(this);if(Fe.hi=(Fe.hi|(127&this.buf[this.pos])<<7*Ve+3)>>>0,this.buf[this.pos++]<128)return Fe}throw Error("invalid varint encoding")}function Ie(Fe,Ve){return(Fe[Ve-4]|Fe[Ve-3]<<8|Fe[Ve-2]<<16|Fe[Ve-1]<<24)>>>0}function Me(){if(this.pos+8>this.len)throw Pe(this,8);return new Ee(Ie(this.buf,this.pos+=4),Ie(this.buf,this.pos+=4))}Re.create=Se(),Re.prototype._slice=Te.Array.prototype.subarray||Te.Array.prototype.slice,Re.prototype.uint32=(ke=4294967295,function(){if(ke=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(ke=(ke|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(ke=(ke|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(ke=(ke|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(ke=(ke|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return ke;if((this.pos+=5)>this.len)throw this.pos=this.len,Pe(this,10);return ke}),Re.prototype.int32=function(){return 0|this.uint32()},Re.prototype.sint32=function(){var Fe=this.uint32();return Fe>>>1^-(1&Fe)|0},Re.prototype.bool=function(){return this.uint32()!==0},Re.prototype.fixed32=function(){if(this.pos+4>this.len)throw Pe(this,4);return Ie(this.buf,this.pos+=4)},Re.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Pe(this,4);return 0|Ie(this.buf,this.pos+=4)},Re.prototype.float=function(){if(this.pos+4>this.len)throw Pe(this,4);var Fe=Te.float.readFloatLE(this.buf,this.pos);return this.pos+=4,Fe},Re.prototype.double=function(){if(this.pos+8>this.len)throw Pe(this,4);var Fe=Te.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,Fe},Re.prototype.bytes=function(){var Fe=this.uint32(),Ve=this.pos,je=this.pos+Fe;if(je>this.len)throw Pe(this,Fe);return this.pos+=Fe,Array.isArray(this.buf)?this.buf.slice(Ve,je):Ve===je?new this.buf.constructor(0):this._slice.call(this.buf,Ve,je)},Re.prototype.string=function(){var Fe=this.bytes();return xe.read(Fe,0,Fe.length)},Re.prototype.skip=function(Fe){if(typeof Fe=="number"){if(this.pos+Fe>this.len)throw Pe(this,Fe);this.pos+=Fe}else do if(this.pos>=this.len)throw Pe(this);while(128&this.buf[this.pos++]);return this},Re.prototype.skipType=function(Fe){switch(Fe){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(Fe=7&this.uint32())!=4;)this.skipType(Fe);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+Fe+" at offset "+this.pos)}return this},Re._configure=function(Fe){_e=Fe,Re.create=Se(),_e._configure();var Ve=Te.Long?"toLong":"toNumber";Te.merge(Re.prototype,{int64:function(){return Ae.call(this)[Ve](!1)},uint64:function(){return Ae.call(this)[Ve](!0)},sint64:function(){return Ae.call(this).zzDecode()[Ve](!1)},fixed64:function(){return Me.call(this)[Ve](!0)},sfixed64:function(){return Me.call(this)[Ve](!1)}})}},593:(r,e,t)=>{r.exports=Ee;var _e=t(1408);(Ee.prototype=Object.create(_e.prototype)).constructor=Ee;var Te=t(9693);function Ee(xe){_e.call(this,xe)}Ee._configure=function(){Te.Buffer&&(Ee.prototype._slice=Te.Buffer.prototype.slice)},Ee.prototype.string=function(){var xe=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+xe,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+xe,this.len))},Ee._configure()},5054:r=>{r.exports={}},5994:(r,e,t)=>{e.Service=t(7948)},7948:(r,e,t)=>{r.exports=Te;var _e=t(9693);function Te(Ee,xe,Pe){if(typeof Ee!="function")throw TypeError("rpcImpl must be a function");_e.EventEmitter.call(this),this.rpcImpl=Ee,this.requestDelimited=!!xe,this.responseDelimited=!!Pe}(Te.prototype=Object.create(_e.EventEmitter.prototype)).constructor=Te,Te.prototype.rpcCall=function Ee(xe,Pe,Re,ke,Ce){if(!ke)throw TypeError("request must be specified");var Se=this;if(!Ce)return _e.asPromise(Ee,Se,xe,Pe,Re,ke);if(Se.rpcImpl)try{return Se.rpcImpl(xe,Pe[Se.requestDelimited?"encodeDelimited":"encode"](ke).finish(),function(Ae,Ie){if(Ae)return Se.emit("error",Ae,xe),Ce(Ae);if(Ie!==null){if(!(Ie instanceof Re))try{Ie=Re[Se.responseDelimited?"decodeDelimited":"decode"](Ie)}catch(Me){return Se.emit("error",Me,xe),Ce(Me)}return Se.emit("data",Ie,xe),Ce(null,Ie)}Se.end(!0)})}catch(Ae){return Se.emit("error",Ae,xe),void setTimeout(function(){Ce(Ae)},0)}else setTimeout(function(){Ce(Error("already ended"))},0)},Te.prototype.end=function(Ee){return this.rpcImpl&&(Ee||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(r,e,t)=>{r.exports=Te;var _e=t(9693);function Te(Re,ke){this.lo=Re>>>0,this.hi=ke>>>0}var Ee=Te.zero=new Te(0,0);Ee.toNumber=function(){return 0},Ee.zzEncode=Ee.zzDecode=function(){return this},Ee.length=function(){return 1};var xe=Te.zeroHash="\0\0\0\0\0\0\0\0";Te.fromNumber=function(Re){if(Re===0)return Ee;var ke=Re<0;ke&&(Re=-Re);var Ce=Re>>>0,Se=(Re-Ce)/4294967296>>>0;return ke&&(Se=~Se>>>0,Ce=~Ce>>>0,++Ce>4294967295&&(Ce=0,++Se>4294967295&&(Se=0))),new Te(Ce,Se)},Te.from=function(Re){if(typeof Re=="number")return Te.fromNumber(Re);if(_e.isString(Re)){if(!_e.Long)return Te.fromNumber(parseInt(Re,10));Re=_e.Long.fromString(Re)}return Re.low||Re.high?new Te(Re.low>>>0,Re.high>>>0):Ee},Te.prototype.toNumber=function(Re){if(!Re&&this.hi>>>31){var ke=1+~this.lo>>>0,Ce=~this.hi>>>0;return ke||(Ce=Ce+1>>>0),-(ke+4294967296*Ce)}return this.lo+4294967296*this.hi},Te.prototype.toLong=function(Re){return _e.Long?new _e.Long(0|this.lo,0|this.hi,!!Re):{low:0|this.lo,high:0|this.hi,unsigned:!!Re}};var Pe=String.prototype.charCodeAt;Te.fromHash=function(Re){return Re===xe?Ee:new Te((Pe.call(Re,0)|Pe.call(Re,1)<<8|Pe.call(Re,2)<<16|Pe.call(Re,3)<<24)>>>0,(Pe.call(Re,4)|Pe.call(Re,5)<<8|Pe.call(Re,6)<<16|Pe.call(Re,7)<<24)>>>0)},Te.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},Te.prototype.zzEncode=function(){var Re=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^Re)>>>0,this.lo=(this.lo<<1^Re)>>>0,this},Te.prototype.zzDecode=function(){var Re=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^Re)>>>0,this.hi=(this.hi>>>1^Re)>>>0,this},Te.prototype.length=function(){var Re=this.lo,ke=(this.lo>>>28|this.hi<<4)>>>0,Ce=this.hi>>>24;return Ce===0?ke===0?Re<16384?Re<128?1:2:Re<2097152?3:4:ke<16384?ke<128?5:6:ke<2097152?7:8:Ce<128?9:10}},9693:function(r,e,t){var _e=e;function Te(xe,Pe,Re){for(var ke=Object.keys(Pe),Ce=0;Ce<ke.length;++Ce)xe[ke[Ce]]!==void 0&&Re||(xe[ke[Ce]]=Pe[ke[Ce]]);return xe}function Ee(xe){function Pe(Re,ke){if(!(this instanceof Pe))return new Pe(Re,ke);Object.defineProperty(this,"message",{get:function(){return Re}}),Error.captureStackTrace?Error.captureStackTrace(this,Pe):Object.defineProperty(this,"stack",{value:new Error().stack||""}),ke&&Te(this,ke)}return(Pe.prototype=Object.create(Error.prototype)).constructor=Pe,Object.defineProperty(Pe.prototype,"name",{get:function(){return xe}}),Pe.prototype.toString=function(){return this.name+": "+this.message},Pe}_e.asPromise=t(4537),_e.base64=t(7419),_e.EventEmitter=t(9211),_e.float=t(945),_e.inquire=t(7199),_e.utf8=t(4997),_e.pool=t(6662),_e.LongBits=t(1945),_e.isNode=!!(t.g!==void 0&&t.g&&t.g.process&&t.g.process.versions&&t.g.process.versions.node),_e.global=_e.isNode&&t.g||typeof window<"u"&&window||typeof self<"u"&&self||this,_e.emptyArray=Object.freeze?Object.freeze([]):[],_e.emptyObject=Object.freeze?Object.freeze({}):{},_e.isInteger=Number.isInteger||function(xe){return typeof xe=="number"&&isFinite(xe)&&Math.floor(xe)===xe},_e.isString=function(xe){return typeof xe=="string"||xe instanceof String},_e.isObject=function(xe){return xe&&typeof xe=="object"},_e.isset=_e.isSet=function(xe,Pe){var Re=xe[Pe];return!(Re==null||!xe.hasOwnProperty(Pe))&&(typeof Re!="object"||(Array.isArray(Re)?Re.length:Object.keys(Re).length)>0)},_e.Buffer=function(){try{var xe=_e.inquire("buffer").Buffer;return xe.prototype.utf8Write?xe:null}catch{return null}}(),_e._Buffer_from=null,_e._Buffer_allocUnsafe=null,_e.newBuffer=function(xe){return typeof xe=="number"?_e.Buffer?_e._Buffer_allocUnsafe(xe):new _e.Array(xe):_e.Buffer?_e._Buffer_from(xe):typeof Uint8Array>"u"?xe:new Uint8Array(xe)},_e.Array=typeof Uint8Array<"u"?Uint8Array:Array,_e.Long=_e.global.dcodeIO&&_e.global.dcodeIO.Long||_e.global.Long||_e.inquire("long"),_e.key2Re=/^true|false|0|1$/,_e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,_e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,_e.longToHash=function(xe){return xe?_e.LongBits.from(xe).toHash():_e.LongBits.zeroHash},_e.longFromHash=function(xe,Pe){var Re=_e.LongBits.fromHash(xe);return _e.Long?_e.Long.fromBits(Re.lo,Re.hi,Pe):Re.toNumber(!!Pe)},_e.merge=Te,_e.lcFirst=function(xe){return xe.charAt(0).toLowerCase()+xe.substring(1)},_e.newError=Ee,_e.ProtocolError=Ee("ProtocolError"),_e.oneOfGetter=function(xe){for(var Pe={},Re=0;Re<xe.length;++Re)Pe[xe[Re]]=1;return function(){for(var ke=Object.keys(this),Ce=ke.length-1;Ce>-1;--Ce)if(Pe[ke[Ce]]===1&&this[ke[Ce]]!==void 0&&this[ke[Ce]]!==null)return ke[Ce]}},_e.oneOfSetter=function(xe){return function(Pe){for(var Re=0;Re<xe.length;++Re)xe[Re]!==Pe&&delete this[xe[Re]]}},_e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},_e._configure=function(){var xe=_e.Buffer;xe?(_e._Buffer_from=xe.from!==Uint8Array.from&&xe.from||function(Pe,Re){return new xe(Pe,Re)},_e._Buffer_allocUnsafe=xe.allocUnsafe||function(Pe){return new xe(Pe)}):_e._Buffer_from=_e._Buffer_allocUnsafe=null}},1173:(r,e,t)=>{r.exports=Se;var _e,Te=t(9693),Ee=Te.LongBits,xe=Te.base64,Pe=Te.utf8;function Re(Be,qe,He){this.fn=Be,this.len=qe,this.next=void 0,this.val=He}function ke(){}function Ce(Be){this.head=Be.head,this.tail=Be.tail,this.len=Be.len,this.next=Be.states}function Se(){this.len=0,this.head=new Re(ke,0,0),this.tail=this.head,this.states=null}var Ae=function(){return Te.Buffer?function(){return(Se.create=function(){return new _e})()}:function(){return new Se}};function Ie(Be,qe,He){qe[He]=255&Be}function Me(Be,qe){this.len=Be,this.next=void 0,this.val=qe}function Fe(Be,qe,He){for(;Be.hi;)qe[He++]=127&Be.lo|128,Be.lo=(Be.lo>>>7|Be.hi<<25)>>>0,Be.hi>>>=7;for(;Be.lo>127;)qe[He++]=127&Be.lo|128,Be.lo=Be.lo>>>7;qe[He++]=Be.lo}function Ve(Be,qe,He){qe[He]=255&Be,qe[He+1]=Be>>>8&255,qe[He+2]=Be>>>16&255,qe[He+3]=Be>>>24}Se.create=Ae(),Se.alloc=function(Be){return new Te.Array(Be)},Te.Array!==Array&&(Se.alloc=Te.pool(Se.alloc,Te.Array.prototype.subarray)),Se.prototype._push=function(Be,qe,He){return this.tail=this.tail.next=new Re(Be,qe,He),this.len+=qe,this},Me.prototype=Object.create(Re.prototype),Me.prototype.fn=function(Be,qe,He){for(;Be>127;)qe[He++]=127&Be|128,Be>>>=7;qe[He]=Be},Se.prototype.uint32=function(Be){return this.len+=(this.tail=this.tail.next=new Me((Be>>>=0)<128?1:Be<16384?2:Be<2097152?3:Be<268435456?4:5,Be)).len,this},Se.prototype.int32=function(Be){return Be<0?this._push(Fe,10,Ee.fromNumber(Be)):this.uint32(Be)},Se.prototype.sint32=function(Be){return this.uint32((Be<<1^Be>>31)>>>0)},Se.prototype.uint64=function(Be){var qe=Ee.from(Be);return this._push(Fe,qe.length(),qe)},Se.prototype.int64=Se.prototype.uint64,Se.prototype.sint64=function(Be){var qe=Ee.from(Be).zzEncode();return this._push(Fe,qe.length(),qe)},Se.prototype.bool=function(Be){return this._push(Ie,1,Be?1:0)},Se.prototype.fixed32=function(Be){return this._push(Ve,4,Be>>>0)},Se.prototype.sfixed32=Se.prototype.fixed32,Se.prototype.fixed64=function(Be){var qe=Ee.from(Be);return this._push(Ve,4,qe.lo)._push(Ve,4,qe.hi)},Se.prototype.sfixed64=Se.prototype.fixed64,Se.prototype.float=function(Be){return this._push(Te.float.writeFloatLE,4,Be)},Se.prototype.double=function(Be){return this._push(Te.float.writeDoubleLE,8,Be)};var je=Te.Array.prototype.set?function(Be,qe,He){qe.set(Be,He)}:function(Be,qe,He){for(var Xe=0;Xe<Be.length;++Xe)qe[He+Xe]=Be[Xe]};Se.prototype.bytes=function(Be){var qe=Be.length>>>0;if(!qe)return this._push(Ie,1,0);if(Te.isString(Be)){var He=Se.alloc(qe=xe.length(Be));xe.decode(Be,He,0),Be=He}return this.uint32(qe)._push(je,qe,Be)},Se.prototype.string=function(Be){var qe=Pe.length(Be);return qe?this.uint32(qe)._push(Pe.write,qe,Be):this._push(Ie,1,0)},Se.prototype.fork=function(){return this.states=new Ce(this),this.head=this.tail=new Re(ke,0,0),this.len=0,this},Se.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Re(ke,0,0),this.len=0),this},Se.prototype.ldelim=function(){var Be=this.head,qe=this.tail,He=this.len;return this.reset().uint32(He),He&&(this.tail.next=Be.next,this.tail=qe,this.len+=He),this},Se.prototype.finish=function(){for(var Be=this.head.next,qe=this.constructor.alloc(this.len),He=0;Be;)Be.fn(Be.val,qe,He),He+=Be.len,Be=Be.next;return qe},Se._configure=function(Be){_e=Be,Se.create=Ae(),_e._configure()}},3155:(r,e,t)=>{r.exports=Ee;var _e=t(1173);(Ee.prototype=Object.create(_e.prototype)).constructor=Ee;var Te=t(9693);function Ee(){_e.call(this)}function xe(Pe,Re,ke){Pe.length<40?Te.utf8.write(Pe,Re,ke):Re.utf8Write?Re.utf8Write(Pe,ke):Re.write(Pe,ke)}Ee._configure=function(){Ee.alloc=Te._Buffer_allocUnsafe,Ee.writeBytesBuffer=Te.Buffer&&Te.Buffer.prototype instanceof Uint8Array&&Te.Buffer.prototype.set.name==="set"?function(Pe,Re,ke){Re.set(Pe,ke)}:function(Pe,Re,ke){if(Pe.copy)Pe.copy(Re,ke,0,Pe.length);else for(var Ce=0;Ce<Pe.length;)Re[ke++]=Pe[Ce++]}},Ee.prototype.bytes=function(Pe){Te.isString(Pe)&&(Pe=Te._Buffer_from(Pe,"base64"));var Re=Pe.length>>>0;return this.uint32(Re),Re&&this._push(Ee.writeBytesBuffer,Re,Pe),this},Ee.prototype.string=function(Pe){var Re=Te.Buffer.byteLength(Pe);return this.uint32(Re),Re&&this._push(xe,Re,Pe),this},Ee._configure()},7714:(r,e,t)=>{e.R=void 0;const _e=t(6919),Te=t(7448);e.R=new class{async init(){}async createSessionHandler(Ee,xe){const Pe=new _e.Session(xe);return await Pe.loadModel(Ee),new Te.OnnxjsSessionHandler(Pe)}}},4200:(r,e,t)=>{e.c8=e.rX=void 0;const _e=t(1670),Te=t(5381),Ee=t(2157),xe=t(2306);e.rX=()=>{if((typeof _e.env.wasm.initTimeout!="number"||_e.env.wasm.initTimeout<0)&&(_e.env.wasm.initTimeout=0),typeof _e.env.wasm.simd!="boolean"&&(_e.env.wasm.simd=!0),typeof _e.env.wasm.proxy!="boolean"&&(_e.env.wasm.proxy=!1),typeof _e.env.wasm.numThreads!="number"||!Number.isInteger(_e.env.wasm.numThreads)||_e.env.wasm.numThreads<=0){const Pe=typeof navigator>"u"?(0,Te.cpus)().length:navigator.hardwareConcurrency;_e.env.wasm.numThreads=Math.min(4,Math.ceil((Pe||1)/2))}},e.c8=new class{async init(){(0,e.rX)(),await(0,Ee.initWasm)()}async createSessionHandler(Pe,Re){const ke=new xe.OnnxruntimeWebAssemblySessionHandler;return await ke.loadModel(Pe,Re),Promise.resolve(ke)}}},6018:function(r,e,t){var _e=this&&this.__createBinding||(Object.create?function(xe,Pe,Re,ke){ke===void 0&&(ke=Re);var Ce=Object.getOwnPropertyDescriptor(Pe,Re);Ce&&!("get"in Ce?!Pe.__esModule:Ce.writable||Ce.configurable)||(Ce={enumerable:!0,get:function(){return Pe[Re]}}),Object.defineProperty(xe,ke,Ce)}:function(xe,Pe,Re,ke){ke===void 0&&(ke=Re),xe[ke]=Pe[Re]}),Te=this&&this.__exportStar||function(xe,Pe){for(var Re in xe)Re==="default"||Object.prototype.hasOwnProperty.call(Pe,Re)||_e(Pe,xe,Re)};Object.defineProperty(e,"__esModule",{value:!0}),Te(t(1670),e);const Ee=t(1670);{const xe=t(7714).R;(0,Ee.registerBackend)("webgl",xe,-10)}{const xe=t(4200).c8;(0,Ee.registerBackend)("cpu",xe,10),(0,Ee.registerBackend)("wasm",xe,10),(0,Ee.registerBackend)("xnnpack",xe,9)}},246:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createAttributeWithCacheKey=void 0;class t{constructor(Te){Object.assign(this,Te)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map(Te=>`${this[Te]}`).join(";")),this._cacheKey}}e.createAttributeWithCacheKey=_e=>new t(_e)},7778:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute=void 0;const _e=t(1446),Te=t(9395),Ee=t(9162),xe=t(2517);var Pe=Te.onnxruntime.experimental.fbs;class Re{constructor(Ce){if(this._attributes=new Map,Ce!=null){for(const Se of Ce)Se instanceof _e.onnx.AttributeProto?this._attributes.set(Se.name,[Re.getValue(Se),Re.getType(Se)]):Se instanceof Pe.Attribute&&this._attributes.set(Se.name(),[Re.getValue(Se),Re.getType(Se)]);if(this._attributes.size<Ce.length)throw new Error("duplicated attribute names")}}set(Ce,Se,Ae){this._attributes.set(Ce,[Ae,Se])}delete(Ce){this._attributes.delete(Ce)}getFloat(Ce,Se){return this.get(Ce,"float",Se)}getInt(Ce,Se){return this.get(Ce,"int",Se)}getString(Ce,Se){return this.get(Ce,"string",Se)}getTensor(Ce,Se){return this.get(Ce,"tensor",Se)}getFloats(Ce,Se){return this.get(Ce,"floats",Se)}getInts(Ce,Se){return this.get(Ce,"ints",Se)}getStrings(Ce,Se){return this.get(Ce,"strings",Se)}getTensors(Ce,Se){return this.get(Ce,"tensors",Se)}get(Ce,Se,Ae){const Ie=this._attributes.get(Ce);if(Ie===void 0){if(Ae!==void 0)return Ae;throw new Error(`required attribute not found: ${Ce}`)}if(Ie[1]!==Se)throw new Error(`type mismatch: expected ${Se} but got ${Ie[1]}`);return Ie[0]}static getType(Ce){const Se=Ce instanceof _e.onnx.AttributeProto?Ce.type:Ce.type();switch(Se){case _e.onnx.AttributeProto.AttributeType.FLOAT:return"float";case _e.onnx.AttributeProto.AttributeType.INT:return"int";case _e.onnx.AttributeProto.AttributeType.STRING:return"string";case _e.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case _e.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case _e.onnx.AttributeProto.AttributeType.INTS:return"ints";case _e.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case _e.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${_e.onnx.AttributeProto.AttributeType[Se]}`)}}static getValue(Ce){const Se=Ce instanceof _e.onnx.AttributeProto?Ce.type:Ce.type();if(Se===_e.onnx.AttributeProto.AttributeType.GRAPH||Se===_e.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");const Ae=this.getValueNoCheck(Ce);if(Se===_e.onnx.AttributeProto.AttributeType.INT&&xe.LongUtil.isLong(Ae))return xe.LongUtil.longToNumber(Ae);if(Se===_e.onnx.AttributeProto.AttributeType.INTS){const Ie=Ae,Me=new Array(Ie.length);for(let Fe=0;Fe<Ie.length;Fe++){const Ve=Ie[Fe];Me[Fe]=xe.LongUtil.longToNumber(Ve)}return Me}if(Se===_e.onnx.AttributeProto.AttributeType.TENSOR)return Ce instanceof _e.onnx.AttributeProto?Ee.Tensor.fromProto(Ae):Ee.Tensor.fromOrtTensor(Ae);if(Se===_e.onnx.AttributeProto.AttributeType.TENSORS){if(Ce instanceof _e.onnx.AttributeProto)return Ae.map(Ie=>Ee.Tensor.fromProto(Ie));if(Ce instanceof Pe.Attribute)return Ae.map(Ie=>Ee.Tensor.fromOrtTensor(Ie))}if(Se===_e.onnx.AttributeProto.AttributeType.STRING&&Ce instanceof _e.onnx.AttributeProto){const Ie=Ae;return(0,xe.decodeUtf8String)(Ie)}return Se===_e.onnx.AttributeProto.AttributeType.STRINGS&&Ce instanceof _e.onnx.AttributeProto?Ae.map(xe.decodeUtf8String):Ae}static getValueNoCheck(Ce){return Ce instanceof _e.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(Ce):this.getValueNoCheckFromOrtFormat(Ce)}static getValueNoCheckFromOnnxFormat(Ce){switch(Ce.type){case _e.onnx.AttributeProto.AttributeType.FLOAT:return Ce.f;case _e.onnx.AttributeProto.AttributeType.INT:return Ce.i;case _e.onnx.AttributeProto.AttributeType.STRING:return Ce.s;case _e.onnx.AttributeProto.AttributeType.TENSOR:return Ce.t;case _e.onnx.AttributeProto.AttributeType.GRAPH:return Ce.g;case _e.onnx.AttributeProto.AttributeType.FLOATS:return Ce.floats;case _e.onnx.AttributeProto.AttributeType.INTS:return Ce.ints;case _e.onnx.AttributeProto.AttributeType.STRINGS:return Ce.strings;case _e.onnx.AttributeProto.AttributeType.TENSORS:return Ce.tensors;case _e.onnx.AttributeProto.AttributeType.GRAPHS:return Ce.graphs;default:throw new Error(`unsupported attribute type: ${_e.onnx.AttributeProto.AttributeType[Ce.type]}`)}}static getValueNoCheckFromOrtFormat(Ce){switch(Ce.type()){case Pe.AttributeType.FLOAT:return Ce.f();case Pe.AttributeType.INT:return Ce.i();case Pe.AttributeType.STRING:return Ce.s();case Pe.AttributeType.TENSOR:return Ce.t();case Pe.AttributeType.GRAPH:return Ce.g();case Pe.AttributeType.FLOATS:return Ce.floatsArray();case Pe.AttributeType.INTS:{const Se=[];for(let Ae=0;Ae<Ce.intsLength();Ae++)Se.push(Ce.ints(Ae));return Se}case Pe.AttributeType.STRINGS:{const Se=[];for(let Ae=0;Ae<Ce.stringsLength();Ae++)Se.push(Ce.strings(Ae));return Se}case Pe.AttributeType.TENSORS:{const Se=[];for(let Ae=0;Ae<Ce.tensorsLength();Ae++)Se.push(Ce.tensors(Ae));return Se}default:throw new Error(`unsupported attribute type: ${Pe.AttributeType[Ce.type()]}`)}}}e.Attribute=Re},7091:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.resolveBackend=e.backend=void 0;const _e=t(5038),Te=new Map;async function Ee(xe){const Pe=e.backend;if(Pe[xe]!==void 0&&function(Re){const ke=Re;return"initialize"in ke&&typeof ke.initialize=="function"&&"createSessionHandler"in ke&&typeof ke.createSessionHandler=="function"&&"dispose"in ke&&typeof ke.dispose=="function"}(Pe[xe])){const Re=Pe[xe];let ke=Re.initialize();if(typeof ke=="object"&&"then"in ke&&(ke=await ke),ke)return Te.set(xe,Re),Re}}e.backend={webgl:new _e.WebGLBackend},e.resolveBackend=async function xe(Pe){if(!Pe)return xe(["webgl"]);{const Re=typeof Pe=="string"?[Pe]:Pe;for(const ke of Re){const Ce=Te.get(ke);if(Ce)return Ce;const Se=await Ee(ke);if(Se)return Se}}throw new Error("no available backend to use")}},5038:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLBackend=void 0;const _e=t(1670),Te=t(6231),Ee=t(6416),xe=t(7305);e.WebGLBackend=class{get contextId(){return _e.env.webgl.contextId}set contextId(Pe){_e.env.webgl.contextId=Pe}get matmulMaxBatchSize(){return _e.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(Pe){_e.env.webgl.matmulMaxBatchSize=Pe}get textureCacheMode(){return _e.env.webgl.textureCacheMode}set textureCacheMode(Pe){_e.env.webgl.textureCacheMode=Pe}get pack(){return _e.env.webgl.pack}set pack(Pe){_e.env.webgl.pack=Pe}get async(){return _e.env.webgl.async}set async(Pe){_e.env.webgl.async=Pe}initialize(){try{return this.glContext=(0,xe.createWebGLContext)(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),Te.Logger.setWithEnv(_e.env),Te.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(Pe){return Te.Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${Pe}`),!1}}createSessionHandler(Pe){return new Ee.WebGLSessionHandler(this,Pe)}dispose(){this.glContext.dispose()}}},5107:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CoordsGlslLib=void 0;const _e=t(2517),Te=t(8520),Ee=t(5060),xe=t(7859),Pe=t(9390);class Re extends Te.GlslLib{constructor(Ce){super(Ce)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new Te.GlslLibRoutine(`
      vec2 offsetToCoords(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){return{coordsToOffset:new Te.GlslLibRoutine(`
      int coordsToOffset(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){const Ce=this.context.outputTextureLayout;return Ce.isPacked?this.getPackedOutputSamplingSnippet(Ce):this.getUnpackedOutputSamplingSnippet(Ce)}getPackedOutputSamplingSnippet(Ce){const Se=Ce.unpackedShape,Ae=[Ce.width,Ce.height],Ie={},Me="getOutputCoords";switch(Se.length){case 0:Ie[Me]=this.getOutputScalarCoords();break;case 1:Ie[Me]=this.getOutputPacked1DCoords(Se,Ae);break;case 2:Ie[Me]=this.getOutputPacked2DCoords(Se,Ae);break;case 3:Ie[Me]=this.getOutputPacked3DCoords(Se,Ae);break;default:Ie[Me]=this.getOutputPackedNDCoords(Se,Ae)}const Fe=`
      void setOutput(vec4 val) {
        ${(0,Ee.getGlsl)(this.context.glContext.version).output} = val;
      }
    `;return Ie.floatTextureSetRGBA=new Te.GlslLibRoutine(Fe),Ie}getUnpackedOutputSamplingSnippet(Ce){const Se=Ce.unpackedShape,Ae=[Ce.width,Ce.height],Ie={},Me="getOutputCoords";switch(Se.length){case 0:Ie[Me]=this.getOutputScalarCoords();break;case 1:Ie[Me]=this.getOutputUnpacked1DCoords(Se,Ae);break;case 2:Ie[Me]=this.getOutputUnpacked2DCoords(Se,Ae);break;case 3:Ie[Me]=this.getOutputUnpacked3DCoords(Se,Ae);break;case 4:Ie[Me]=this.getOutputUnpacked4DCoords(Se,Ae);break;case 5:Ie[Me]=this.getOutputUnpacked5DCoords(Se,Ae);break;case 6:Ie[Me]=this.getOutputUnpacked6DCoords(Se,Ae);break;default:throw new Error(`Unsupported output dimensionality: ${Se.length}`)}const Fe=`
        void setOutput(float val) {
          ${(0,Ee.getGlsl)(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `;return Ie.floatTextureSetR=new Te.GlslLibRoutine(Fe),Ie}getOutputScalarCoords(){return new Te.GlslLibRoutine(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(Ce,Se){const Ae=Se;let Ie="";return Ae[0]===1?(Ie=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${Ae[1]}.0);
          }
        `,new Te.GlslLibRoutine(Ie)):Ae[1]===1?(Ie=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${Ae[0]}.0);
          }
        `,new Te.GlslLibRoutine(Ie)):(Ie=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${Ae[0]}, ${Ae[1]}));
          return 2 * (resTexRC.y * ${Ae[0]} + resTexRC.x);
        }
      `,new Te.GlslLibRoutine(Ie))}getOutputPacked2DCoords(Ce,Se){let Ae="";if(_e.ArrayUtil.arraysEqual(Ce,Se))return Ae=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${Se[0]}, ${Se[1]}));
        }
      `,new Te.GlslLibRoutine(Ae);const Ie=Se,Me=Math.ceil(Ce[1]/2);return Ae=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Ie[0]}, ${Ie[1]}));

          int index = resTexRC.y * ${Ie[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${Me}) * 2;
          int c = 2 * (index / ${Me});

          return ivec2(r, c);
        }
      `,new Te.GlslLibRoutine(Ae)}getOutputPacked3DCoords(Ce,Se){const Ae=[Se[0],Se[1]],Ie=Math.ceil(Ce[2]/2),Me=Ie*Math.ceil(Ce[1]/2),Fe=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Ae[0]}, ${Ae[1]}));
          int index = resTexRC.y * ${Ae[0]} + resTexRC.x;

          int b = index / ${Me};
          index -= b * ${Me};

          // reverse r and c order for packed texture
          int r = imod(index, ${Ie}) * 2;
          int c = 2 * (index / ${Ie});

          return ivec3(b, r, c);
        }
      `;return new Te.GlslLibRoutine(Fe)}getOutputPackedNDCoords(Ce,Se){const Ae=[Se[0],Se[1]],Ie=Math.ceil(Ce[Ce.length-1]/2),Me=Ie*Math.ceil(Ce[Ce.length-2]/2);let Fe=Me,Ve="",je="b, r, c";for(let qe=2;qe<Ce.length-1;qe++)Fe*=Ce[Ce.length-qe-1],Ve=`
      int b${qe} = index / ${Fe};
      index -= b${qe} * ${Fe};
    `+Ve,je=`b${qe}, `+je;const Be=`
      ivec${Ce.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${Ae[0]}, ${Ae[1]}));
        int index = resTexRC.y * ${Ae[0]} + resTexRC.x;

        ${Ve}

        int b = index / ${Me};
        index -= b * ${Me};

        // reverse r and c order for packed texture
        int r = imod(index, ${Ie}) * 2;
        int c = 2 * (index / ${Ie});

        return ivec${Ce.length}(${je});
      }
    `;return new Te.GlslLibRoutine(Be)}getOutputUnpacked1DCoords(Ce,Se){const Ae=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Se[0]}, ${Se[1]}));
          return resTexRC.y * ${Se[0]} + resTexRC.x;
        }
      `;return new Te.GlslLibRoutine(Ae)}getOutputUnpacked2DCoords(Ce,Se){const Ae=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Se[0]}, ${Se[1]}));
          int index = resTexRC.y * ${Se[0]} + resTexRC.x;
          int r = index / ${Ce[1]};
          int c = index - r * ${Ce[1]};
          return ivec2(r, c);
        }
      `;return new Te.GlslLibRoutine(Ae)}getOutputUnpacked3DCoords(Ce,Se){let Ae="";const Ie=Ce.length;let Me=null;Ie<2&&(Me=[]),Me=new Array(Ie-1),Me[Ie-2]=Ce[Ie-1];for(let je=Ie-3;je>=0;--je)Me[je]=Me[je+1]*Ce[je+1];const Fe=["r","c","d"],Ve=Me.map((je,Be)=>`int ${Fe[Be]} = index / ${je}; ${Be===Me.length-1?`int ${Fe[Be+1]} = index - ${Fe[Be]} * ${je}`:`index -= ${Fe[Be]} * ${je}`};`).join("");return Ae=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Se[0]}, ${Se[1]}));
          int index = resTexRC.y * ${Se[0]} + resTexRC.x;
          ${Ve}
          return ivec3(r, c, d);
        }
      `,new Te.GlslLibRoutine(Ae)}getOutputUnpacked4DCoords(Ce,Se){let Ae="";const Ie=Ce.length;let Me=null;Ie<2&&(Me=[]),Me=new Array(Ie-1),Me[Ie-2]=Ce[Ie-1];for(let je=Ie-3;je>=0;--je)Me[je]=Me[je+1]*Ce[je+1];const Fe=["r","c","d","d2"],Ve=Me.map((je,Be)=>`int ${Fe[Be]} = index / ${je}; ${Be===Me.length-1?`int ${Fe[Be+1]} = index - ${Fe[Be]} * ${je}`:`index -= ${Fe[Be]} * ${je}`};`).join("");return Ae=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Se[0]}, ${Se[1]}));
          int index = resTexRC.y * ${Se[0]} + resTexRC.x;
          ${Ve}
          return ivec4(r, c, d, d2);
        }
      `,new Te.GlslLibRoutine(Ae)}getOutputUnpacked5DCoords(Ce,Se){let Ae="";const Ie=Ce.length;let Me=null;Ie<2&&(Me=[]),Me=new Array(Ie-1),Me[Ie-2]=Ce[Ie-1];for(let je=Ie-3;je>=0;--je)Me[je]=Me[je+1]*Ce[je+1];const Fe=["r","c","d","d2","d3"],Ve=Me.map((je,Be)=>`int ${Fe[Be]} = index / ${je}; ${Be===Me.length-1?`int ${Fe[Be+1]} = index - ${Fe[Be]} * ${je}`:`index -= ${Fe[Be]} * ${je}`};`).join("");return Ae=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Se[0]}, ${Se[1]}));
          int index = resTexRC.y * ${Se[0]} + resTexRC.x;
          ${Ve}
          return ivec5(r, c, d, d2, d3);
        }
      `,new Te.GlslLibRoutine(Ae)}getOutputUnpacked6DCoords(Ce,Se){let Ae="";const Ie=Ce.length;let Me=null;Ie<2&&(Me=[]),Me=new Array(Ie-1),Me[Ie-2]=Ce[Ie-1];for(let je=Ie-3;je>=0;--je)Me[je]=Me[je+1]*Ce[je+1];const Fe=["r","c","d","d2","d3","d4"],Ve=Me.map((je,Be)=>`int ${Fe[Be]} = index / ${je}; ${Be===Me.length-1?`int ${Fe[Be+1]} = index - ${Fe[Be]} * ${je}`:`index -= ${Fe[Be]} * ${je}`};`).join("");return Ae=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${Se[0]}, ${Se[1]}));
         int index = resTexRC.y * ${Se[0]} + resTexRC.x;
         ${Ve}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new Te.GlslLibRoutine(Ae)}getCommonUtilFuncs(){const Ce={};let Se="uvFromFlat";Ce[Se]=new Te.GlslLibRoutine(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),Se="packedUVfrom1D",Ce[Se]=new Te.GlslLibRoutine(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),Se="packedUVfrom2D",Ce[Se]=new Te.GlslLibRoutine(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),Se="packedUVfrom3D",Ce[Se]=new Te.GlslLibRoutine(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),Se="sampleTexture";const Ae=(0,Ee.getGlsl)(this.context.glContext.version);return Ce[Se]=new Te.GlslLibRoutine(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${Ae.texture2D}(textureSampler, uv).r;
        }`),Ce}getInputsSamplingSnippets(){const Ce={},Se=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((Ae,Ie)=>{const Me=this.context.inputTextureLayouts[Ie],Fe=(0,Pe.generateShaderFuncNameFromInputSamplerName)(Ae);Me.isPacked?Ce[Fe]=this.getPackedSamplerFromInput(Fe,Ae,Me):Ce[Fe]=this.getUnpackedSamplerFromInput(Fe,Ae,Me);const Ve=(0,Pe.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(Ae);Me.unpackedShape.length<=Se.unpackedShape.length&&(Me.isPacked?Ce[Ve]=this.getPackedSamplerAtOutputCoords(Ve,Me,Se,Ae):Ce[Ve]=this.getUnpackedSamplerAtOutputCoords(Ve,Me,Se,Ae))}),Ce}getPackedSamplerAtOutputCoords(Ce,Se,Ae,Ie){const Me=Se.unpackedShape,Fe=Ae.unpackedShape,Ve=Ie,je=(0,Pe.generateShaderFuncNameFromInputSamplerName)(Ve),Be=Me.length,qe=Fe.length,He=_e.BroadcastUtil.getBroadcastDims(Me,Fe),Xe=(0,Pe.getCoordsDataType)(qe),Je=qe-Be;let Qe;const Ke=(0,Pe.getGlChannels)();Qe=Be===0?"":qe<2&&He.length>=1?"coords = 0;":He.map(wn=>`coords.${Ke[wn+Je]} = 0;`).join(`
`);let Ye="";Ye=qe<2&&Be>0?"coords":Me.map((wn,Pn)=>`coords.${Ke[Pn+Je]}`).join(", ");let pn="return outputValue;";const un=_e.ShapeUtil.size(Me)===1,fn=_e.ShapeUtil.size(Fe)===1;if(Be!==1||un||fn){if(un&&!fn)pn=qe===1?`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:`
          return vec4(outputValue.x);
        `;else if(He.length){const wn=Be-2,Pn=Be-1;He.indexOf(wn)>-1&&He.indexOf(Pn)>-1?pn="return vec4(outputValue.x);":He.indexOf(wn)>-1?pn="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":He.indexOf(Pn)>-1&&(pn="return vec4(outputValue.xx, outputValue.zz);")}}else pn=`
        return vec4(outputValue.xy, outputValue.xy);
      `;const mn=`
      vec4 ${Ce}() {
        ${Xe} coords = getOutputCoords();
        
        int lastDim = coords.${Ke[qe-1]};
        coords.${Ke[qe-1]} = coords.${Ke[qe-2]};
        coords.${Ke[qe-2]} = lastDim;
      
        ${Qe}
        vec4 outputValue = ${je}(${Ye});
        ${pn}
      }
    `;return new Te.GlslLibRoutine(mn,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(Ce,Se,Ae,Ie){const Me=[Ae.width,Ae.height],Fe=[Se.width,Se.height],Ve=Se.unpackedShape.length,je=Ae.unpackedShape.length,Be=Se.unpackedShape,qe=Ae.unpackedShape,He=(0,Pe.generateShaderFuncNameFromInputSamplerName)(Ie);if(Ve===je&&_e.ArrayUtil.arraysEqual(Fe,Me)){const fn=`
          float ${Ce}() {
            return sampleTexture(${Ie}, TexCoords);
          }
        `;return new Te.GlslLibRoutine(fn,["coordinates.sampleTexture"])}const Xe=(0,Pe.getCoordsDataType)(je),Je=_e.BroadcastUtil.getBroadcastDims(Be,qe),Qe=je-Ve;let Ke;const Ye=(0,Pe.getGlChannels)();Ke=Ve===0?"":je<2&&Je.length>=1?"coords = 0;":Je.map(fn=>`coords.${Ye[fn+Qe]} = 0;`).join(`
`);let pn="";pn=je<2&&Ve>0?"coords":Se.unpackedShape.map((fn,mn)=>`coords.${Ye[mn+Qe]}`).join(", ");const un=`
        float ${Ce}() {
          ${Xe} coords = getOutputCoords();
          ${Ke}
          return ${He}(${pn});
        }
      `;return new Te.GlslLibRoutine(un,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(Ce,Se,Ae){switch(Ae.unpackedShape.length){case 0:return this.getPackedSamplerScalar(Ce,Se);case 1:return this.getPackedSampler1D(Ce,Se,Ae);case 2:return this.getPackedSampler2D(Ce,Se,Ae);case 3:return this.getPackedSampler3D(Ce,Se,Ae);default:return this.getPackedSamplerND(Ce,Se,Ae)}}getUnpackedSamplerFromInput(Ce,Se,Ae){const Ie=Ae.unpackedShape;switch(Ie.length){case 0:return this.getUnpackedSamplerScalar(Ce,Se,Ae);case 1:return this.getUnpackedSampler1D(Ce,Se,Ae);case 2:return this.getUnpackedSampler2D(Ce,Se,Ae);case 3:return this.getUnpackedSampler3D(Ce,Se,Ae);case 4:return this.getUnpackedSampler4D(Ce,Se,Ae);case 5:return this.getUnpackedSampler5D(Ce,Se,Ae);case 6:return this.getUnpackedSampler6D(Ce,Se,Ae);default:throw new Error(`Unsupported dimension ${Ie.length}-D`)}}getPackedSamplerScalar(Ce,Se){const Ae=`
          vec4 ${Ce}() {
            return ${(0,Ee.getGlsl)(this.context.glContext.version).texture2D}(${Se}, halfCR);
          }
        `;return new Te.GlslLibRoutine(Ae)}getPackedSampler1D(Ce,Se,Ae){const Ie=[Ae.width,Ae.height],Me=[Ie[1],Ie[0]],Fe=(0,Ee.getGlsl)(this.context.glContext.version),Ve=`vec4 ${Ce}(int index) {
      vec2 uv = packedUVfrom1D(
      ${Me[0]}, ${Me[1]}, index);
      return ${Fe.texture2D}(${Se}, uv);
    }`;return new Te.GlslLibRoutine(Ve,["coordinates.packedUVfrom1D"])}getPackedSampler2D(Ce,Se,Ae){const Ie=Ae.unpackedShape,Me=[Ae.width,Ae.height],Fe=(0,Ee.getGlsl)(this.context.glContext.version),Ve=Me[0],je=Me[1];if(Me!=null&&_e.ArrayUtil.arraysEqual(Ie,Me)){const Xe=`vec4 ${Ce}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${je}.0, ${Ve}.0);
        return ${Fe.texture2D}(${Se}, uv);
      }`;return new Te.GlslLibRoutine(Xe)}const Be=Me,qe=Math.ceil(Ie[1]/2),He=`vec4 ${Ce}(int row, int col) {
      vec2 uv = packedUVfrom2D(${Be[1]}, ${Be[0]}, ${qe}, row, col);
      return ${Fe.texture2D}(${Se}, uv);
    }`;return new Te.GlslLibRoutine(He,["coordinates.packedUVfrom2D"])}getPackedSampler3D(Ce,Se,Ae){const Ie=Ae.unpackedShape,Me=[Ae.width,Ae.height],Fe=[Me[0],Me[1]],Ve=(0,Ee.getGlsl)(this.context.glContext.version);if(Ie[0]===1){const Xe=Ie.slice(1),Je=[1,2],Qe=(0,Pe.squeezeInputShape)(Ie,Xe),Ke=["b","row","col"],Ye=JSON.parse(JSON.stringify(Ae));Ye.unpackedShape=Qe;const pn=this.getPackedSamplerFromInput(Ce,Se,Ye),un=`${pn.routineBody}
      vec4 ${Ce}(int b, int row, int col) {
        return ${Ce}(${(0,Pe.getSqueezedParams)(Ke,Je)});
      } `;return new Te.GlslLibRoutine(un,pn.dependencies)}const je=Fe[0],Be=Fe[1],qe=Math.ceil(Ie[2]/2),He=`vec4 ${Ce}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${Be}, ${je}, ${qe*Math.ceil(Ie[1]/2)}, ${qe}, b, row, col);
      return ${Ve.texture2D}(${Se}, uv);}`;return new Te.GlslLibRoutine(He,["coordinates.packedUVfrom3D"])}getPackedSamplerND(Ce,Se,Ae){const Ie=Ae.unpackedShape,Me=Ie.length,Fe=[Ae.width,Ae.height],Ve=(0,Ee.getGlsl)(this.context.glContext.version),je=[Fe[0],Fe[1]],Be=je[1],qe=je[0],He=Math.ceil(Ie[Me-1]/2);let Xe=He*Math.ceil(Ie[Me-2]/2),Je="int b, int row, int col",Qe=`b * ${Xe} + (row / 2) * ${He} + (col / 2)`;for(let Ye=2;Ye<Me-1;Ye++)Je=`int b${Ye}, `+Je,Xe*=Ie[Me-Ye-1],Qe=`b${Ye} * ${Xe} + `+Qe;const Ke=`vec4 ${Ce}(${Je}) {
      int index = ${Qe};
      int texR = index / ${qe};
      int texC = index - texR * ${qe};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${qe}, ${Be});
      return ${Ve.texture2D}(${Se}, uv);
    }`;return new Te.GlslLibRoutine(Ke)}getUnpackedSamplerScalar(Ce,Se,Ae){const[Ie,Me]=[Ae.width,Ae.height];if(Ie===1&&Me===1){const Ve=`
          float ${Ce}() {
            return sampleTexture(${Se}, halfCR);
          }
        `;return new Te.GlslLibRoutine(Ve,["coordinates.sampleTexture"])}const Fe=`
        float ${Ce}() {
          int offset_${Se} = coordsToOffset(TexCoords, ${Ie}, ${Me});
          vec2 uv = uvFromFlat(${Ie}, ${Me}, offset_${Se});
          return sampleTexture(${Se}, uv);
        }
      `;return new Te.GlslLibRoutine(Fe,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(Ce,Se,Ae){const Ie=Ae.width,Me=Ae.height;if(Me===1&&Ie===1){const Ve=`
        float ${Ce}(int index) {
          return sampleTexture(${Se}, halfCR);
        }
      `;return new Te.GlslLibRoutine(Ve,["coordinates.sampleTexture"])}if(Me===1){const Ve=`
          float ${Ce}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${Ie}.0, 0.5);
            return sampleTexture(${Se}, uv);
          }
        `;return new Te.GlslLibRoutine(Ve,["coordinates.sampleTexture"])}if(Ie===1){const Ve=`
          float ${Ce}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${Me}.0);
            return sampleTexture(${Se}, uv);
          }
        `;return new Te.GlslLibRoutine(Ve,["coordinates.sampleTexture"])}const Fe=`
        float ${Ce}(int index) {
          vec2 uv = uvFromFlat(${Ie}, ${Me}, index);
          return sampleTexture(${Se}, uv);
        }
      `;return new Te.GlslLibRoutine(Fe,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(Ce,Se,Ae){const Ie=Ae.unpackedShape,Me=[Ae.height,Ae.width];if(Me!=null&&_e.ArrayUtil.arraysEqual(Ie,Me)){const Xe=`
          float ${Ce}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${Me[1]}.0, ${Me[0]}.0);
            return sampleTexture(${Se}, uv);
          }
        `;return new Te.GlslLibRoutine(Xe,["coordinates.sampleTexture"])}const{newShape:Fe,keptDims:Ve}=(0,xe.squeezeShape)(Ie),je=Fe;if(je.length<Ie.length){const Xe=(0,Pe.squeezeInputShape)(Ie,je),Je=JSON.parse(JSON.stringify(Ae));Je.unpackedShape=Xe;const Qe=["col","row"],Ke=`
          ${this.getUnpackedSamplerFromInput(Ce,Se,Je).routineBody}
          float ${Ce}(int row, int col) {
            return ${Ce}(${(0,Pe.getSqueezedParams)(Qe,Ve)});
          }
        `;return new Te.GlslLibRoutine(Ke,["coordinates.sampleTexture"])}const Be=Me[1],qe=Me[0];if(qe===1){const Xe=`
          float ${Ce}(int row, int col) {
            int offset_${Se} = coordsToOffset(TexCoords, ${Be}, ${qe});
            float index = dot(vec3(row, col, offset_${Se}), vec3(${Ie[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${Be}.0);
            return sampleTexture(${Se}, uv);
          }
        `;return new Te.GlslLibRoutine(Xe,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(Be===1){const Xe=`
          float ${Ce}(int row, int col) {
            int offset_${Se} = coordsToOffset(TexCoords, ${Be}, ${qe});
            float index = dot(vec3(row, col, offset_${Se}), vec3(${Ie[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${qe}.0, 0.5);
            return sampleTexture(${Se}, uv);
          }
        `;return new Te.GlslLibRoutine(Xe,["coordinates.sampleTexture","coordinates.coordsToOffset"])}const He=`
        float ${Ce}(int row, int col) {
          int index = col * ${Ie[1]} + row;
          vec2 uv = uvFromFlat(${Be}, ${qe}, index);
          return sampleTexture(${Se}, uv);
        }
      `;return new Te.GlslLibRoutine(He,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(Ce,Se,Ae){const Ie=Ae.unpackedShape,Me=Ie[1]*Ie[2],Fe=Ie[2],{newShape:Ve,keptDims:je}=(0,xe.squeezeShape)(Ie),Be=Ve;if(Be.length<Ie.length){const He=(0,Pe.squeezeInputShape)(Ie,Be),Xe=["batch","col","row"],Je=JSON.parse(JSON.stringify(Ae));Je.unpackedShape=He;const Qe=this.getUnpackedSamplerFromInput(Ce,Se,Je),Ke=je.reverse(),Ye=`
          ${Qe.routineBody}
          float ${Ce}(int batch, int row, int col) {
            return ${Ce}(${(0,Pe.getSqueezedParams)(Xe,Ke)});
          }
        `;return new Te.GlslLibRoutine(Ye,Qe.dependencies)}const qe=`
          float ${Ce}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${Me} + col * ${Fe} + row;
            vec2 uv = uvFromFlat(${Ae.width}, ${Ae.height}, index);
            return sampleTexture(${Se}, uv);
          }
      `;return new Te.GlslLibRoutine(qe,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(Ce,Se,Ae){const Ie=Ae.unpackedShape,Me=Ie[3],Fe=Ie[2]*Me,Ve=`
        float ${Ce}(int row, int col, int depth, int depth2) {
          int index = row * ${Ie[1]*Fe} + col * ${Fe} +
              depth2 * ${Me} + depth;
          vec2 uv = uvFromFlat(${Ae.width}, ${Ae.height}, index);
          return sampleTexture(${Se}, uv);
        }
      `;return new Te.GlslLibRoutine(Ve,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(Ce,Se,Ae){const Ie=Ae.unpackedShape,Me=Ie[4],Fe=Ie[3]*Me,Ve=Ie[2]*Fe,je=Ie[1]*Ve,{newShape:Be,keptDims:qe}=(0,xe.squeezeShape)(Ie);if(Be.length<Ie.length){const Xe=(0,Pe.squeezeInputShape)(Ie,Be),Je=["row","col","depth","depth2","depth3"],Qe=JSON.parse(JSON.stringify(Ae));Qe.unpackedShape=Xe;const Ke=`
          ${this.getUnpackedSamplerFromInput(Ce,Se,Qe).routineBody}
          float ${Ce}(int row, int col, int depth, int depth2, int depth3) {
            return ${Ce}(${(0,Pe.getSqueezedParams)(Je,qe)});
          }
        `;return new Te.GlslLibRoutine(Ke,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const He=`
        float ${Ce}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${je} + col * ${Ve} + depth * ${Fe} +
          depth3 * ${Me} + depth2;
          vec2 uv = uvFromFlat(${Ae.width}, ${Ae.height}, index);
          return sampleTexture(${Se}, uv);
        }
      `;return new Te.GlslLibRoutine(He,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(Ce,Se,Ae){const Ie=Ae.unpackedShape,Me=Ie[5],Fe=Ie[4]*Me,Ve=Ie[3]*Fe,je=Ie[2]*Ve,Be=Ie[1]*je,{newShape:qe,keptDims:He}=(0,xe.squeezeShape)(Ie);if(qe.length<Ie.length){const Je=(0,Pe.squeezeInputShape)(Ie,qe),Qe=["row","col","depth","depth2","depth3","depth4"],Ke=JSON.parse(JSON.stringify(Ae));Ke.unpackedShape=Je;const Ye=`
            ${this.getUnpackedSamplerFromInput(Ce,Se,Ke).routineBody}
            float ${Ce}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${Ce}(${(0,Pe.getSqueezedParams)(Qe,He)});
            }
          `;return new Te.GlslLibRoutine(Ye,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const Xe=`
          float ${Ce}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${Be} + col * ${je} + depth * ${Ve} +
            depth2 * ${Fe} + depth3 * ${Me} + depth4;
            vec2 uv = uvFromFlat(${Ae.width}, ${Ae.height}, index);
            return sampleTexture(${Se}, uv);
          }
        `;return new Te.GlslLibRoutine(Xe,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){const Ce=this.context.outputTextureLayout,Se=Ce.shape.length,Ae=Ce.strides,Ie=Ce.width,Me=Ce.height,Fe=[];for(let je=0;je<Se-1;++je)Fe.push(`
        c[${je}] = offset / ${Ae[je]};`),Fe.push(`
        offset -= c[${je}] * ${Ae[je]};`);Fe.push(`
        c[${Se-1}] = offset;`);const Ve=`
      void toVec(vec2 texCoords, out int c[${Se}]) {
        int offset = coordsToOffset(texCoords, ${Ie}, ${Me});
        ${Fe.join("")}
      }
      void toVec(int offset, out int c[${Se}]) {
        ${Fe.join("")}
      }
    `;return{toVec:new Te.GlslLibRoutine(Ve,["coordinates.coordsToOffset"])}}valueFrom(){const Ce={};return this.context.programInfo.inputNames.forEach((Se,Ae)=>{const Ie=this.context.inputTextureLayouts[Ae],Me=(Ie.unpackedShape.length>0?Ie.unpackedShape:Ie.shape).length;let Fe=`_${Se}`;Ce[Fe]=new Te.GlslLibRoutine(this.getValueFromSingle(Se,Me,Ie.width,Ie.height,!1),[`shapeUtils.indicesToOffset${Fe}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),Fe+="_T",Ce[Fe]=new Te.GlslLibRoutine(this.getValueFromSingle(Se,Me,Ie.width,Ie.height,!0),[`shapeUtils.indicesToOffset${Fe}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),Ce}getValueFromSingle(Ce,Se,Ae,Ie,Me){let Fe=`_${Ce}`;return Me&&(Fe+="_T"),`
        float ${Fe}(int m[${Se}]) {
          int offset = indicesToOffset${Fe}(m);
          vec2 coords = offsetToCoords(offset, ${Ae}, ${Ie});
          float value = getColorAsFloat(${(0,Ee.getGlsl)(this.context.glContext.version).texture2D}(${Ce}, coords));
          return value;
        }
        `}getPackedValueFrom(Ce,Se,Ae,Ie,Me){let Fe=`_${Ce}_Pack`;return Me&&(Fe+="_T"),`
        vec4 ${Fe}(int m[${Se}]) {
          int offset = indicesToOffset_${Ce}(m);
          vec2 coords = offsetToCoords(offset, ${Ae}, ${Ie});
          return ${(0,Ee.getGlsl)(this.context.glContext.version).texture2D}(${Ce}, coords);
        }
        `}}e.CoordsGlslLib=Re},8520:(r,e)=>{var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TopologicalSortGlslRoutines=e.GlslLibRoutineNode=e.GlslLibRoutine=e.GlslLib=e.GlslContext=e.FunctionType=void 0,(t=e.FunctionType||(e.FunctionType={}))[t.ValueBased=0]="ValueBased",t[t.Positional=1]="Positional",e.GlslContext=class{constructor(_e,Te,Ee,xe){this.glContext=_e,this.programInfo=Te,this.inputTextureLayouts=Ee,this.outputTextureLayout=xe}},e.GlslLib=class{constructor(_e){this.context=_e}},e.GlslLibRoutine=class{constructor(_e,Te){this.routineBody=_e,this.dependencies=Te}},e.GlslLibRoutineNode=class{constructor(_e,Te,Ee){this.name=_e,this.dependencies=Ee||[],Te&&(this.routineBody=Te)}addDependency(_e){_e&&this.dependencies.push(_e)}},e.TopologicalSortGlslRoutines=class{static returnOrderedNodes(_e){if(!_e||_e.length===0)return[];if(_e.length===1)return _e;const Te=new Set,Ee=new Set,xe=new Array;return this.createOrderedNodes(_e,Te,Ee,xe),xe}static createOrderedNodes(_e,Te,Ee,xe){for(let Pe=0;Pe<_e.length;++Pe)this.dfsTraverse(_e[Pe],Te,Ee,xe)}static dfsTraverse(_e,Te,Ee,xe){if(!_e||Ee.has(_e.name))return;if(Te.has(_e.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");Te.add(_e.name);const Pe=_e.dependencies;if(Pe&&Pe.length>0)for(let Re=0;Re<Pe.length;++Re)this.dfsTraverse(Pe[Re],Te,Ee,xe);xe.push(_e),Ee.add(_e.name),Te.delete(_e.name)}}},7341:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EncodingGlslLib=void 0;const _e=t(8520);class Te extends _e.GlslLib{constructor(xe){super(xe)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new _e.GlslLibRoutine(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new _e.GlslLibRoutine(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){const xe=Te.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new _e.GlslLibRoutine(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${xe}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){const xe=Te.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new _e.GlslLibRoutine(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${xe}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){const xe=new ArrayBuffer(4),Pe=new Uint32Array(xe),Re=new Uint8Array(xe);if(Pe[0]=3735928559,Re[0]===239)return!0;if(Re[0]===222)return!1;throw new Error("unknown endianness")}}e.EncodingGlslLib=Te},9894:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FragColorGlslLib=void 0;const _e=t(8520),Te=t(5060);class Ee extends _e.GlslLib{constructor(Pe){super(Pe)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){const Pe=(0,Te.getGlsl)(this.context.glContext.version);return{setFragColor:new _e.GlslLibRoutine(`
        void setFragColor(float value) {
            ${Pe.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new _e.GlslLibRoutine(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}e.FragColorGlslLib=Ee},2848:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.replaceInlines=void 0;const t=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;e.replaceInlines=function(_e){const Te={};let Ee;for(;(Ee=t.exec(_e))!==null;){const xe=Ee[3].split(",").map(Pe=>{const Re=Pe.trim().split(" ");return Re&&Re.length===2?{type:Re[0],name:Re[1]}:null}).filter(Pe=>Pe!==null);Te[Ee[2]]={params:xe,body:Ee[4]}}for(const xe in Te){const Pe="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",xe),Re=new RegExp(Pe,"gm");for(;(Ee=Re.exec(_e))!==null;){const ke=Ee[1],Ce=Ee[2],Se=Ee[3].split(","),Ae=ke?`${ke} ${Ce};`:"";let Ie=Te[xe].body,Me="";Te[xe].params.forEach((Ve,je)=>{Ve&&(Me+=`${Ve.type} ${Ve.name} = ${Se[je]};
`)}),Ie=`${Me}
 ${Ie}`,Ie=Ie.replace("return",`${Ce} = `);const Fe=`
      ${Ae}
      {
        ${Ie}
      }
      `;_e=_e.replace(Ee[0],Fe)}}return _e.replace(t,"")}},8879:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlslPreprocessor=void 0;const _e=t(8520),Te=t(2848),Ee=t(5483),xe=t(5060);e.GlslPreprocessor=class{constructor(Pe,Re,ke,Ce){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new _e.GlslContext(Pe,Re,ke,Ce),Object.keys(Ee.glslRegistry).forEach(Ae=>{const Ie=new Ee.glslRegistry[Ae](this.context);this.libs[Ae]=Ie});const Se=this.glslLibRoutineDependencyGraph;for(const Ae in this.libs){const Ie=this.libs[Ae].getFunctions();for(const Me in Ie){const Fe=Ae+"."+Me;let Ve;Se[Fe]?(Ve=Se[Fe],Ve.routineBody=Ie[Me].routineBody):(Ve=new _e.GlslLibRoutineNode(Fe,Ie[Me].routineBody),Se[Fe]=Ve);const je=Ie[Me].dependencies;if(je)for(let Be=0;Be<je.length;++Be)if(Se[je[Be]])Ve.addDependency(Se[je[Be]]);else{const qe=new _e.GlslLibRoutineNode(je[Be]);Se[je[Be]]=qe,Ve.addDependency(qe)}}}}preprocess(){const Pe=this.context.programInfo;let Re=Pe.shaderSource;return this.context.programInfo.hasMain||(Re=`${Re}
      ${(0,xe.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),Re=(0,Te.replaceInlines)(Re),`${(0,xe.getFragShaderPreamble)(this.context.glContext.version)}
    ${this.getUniforms(Pe.inputNames,Pe.variables)}
    ${this.getImports(Re)}
    ${Re}`}getImports(Pe){const Re=this.selectGlslLibRoutinesToBeIncluded(Pe);if(Re.length===0)return"";let ke="";for(let Ce=0;Ce<Re.length;++Ce){if(!Re[Ce].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${Re[Ce].name}`);ke+=Re[Ce].routineBody+`
`}return ke}selectGlslLibRoutinesToBeIncluded(Pe){const Re=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(ke=>{const Ce=ke.split(".")[1];Pe.indexOf(Ce)!==-1&&Re.push(this.glslLibRoutineDependencyGraph[ke])}),_e.TopologicalSortGlslRoutines.returnOrderedNodes(Re)}getUniforms(Pe,Re){const ke=[];if(Pe)for(const Ce of Pe)ke.push(`uniform sampler2D ${Ce};`);if(Re)for(const Ce of Re)ke.push(`uniform ${Ce.type} ${Ce.name}${Ce.arrayLength?`[${Ce.arrayLength}]`:""};`);return ke.join(`
`)}}},5483:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.glslRegistry=void 0;const _e=t(5107),Te=t(7341),Ee=t(9894),xe=t(2655),Pe=t(3891);e.glslRegistry={encoding:Te.EncodingGlslLib,fragcolor:Ee.FragColorGlslLib,vec:Pe.VecGlslLib,shapeUtils:xe.ShapeUtilsGlslLib,coordinates:_e.CoordsGlslLib}},2655:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeUtilsGlslLib=void 0;const _e=t(8520);class Te extends _e.GlslLib{constructor(xe){super(xe)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){const xe=this.context.outputTextureLayout.shape.length,Pe={};return this.context.programInfo.inputNames.forEach((Re,ke)=>{const Ce=this.context.inputTextureLayouts[ke].unpackedShape;if(Ce.length<=xe){const Se=Ce.length,Ae=xe-Se,Ie=`bcastIndices_${Re}`;let Me="";for(let Ve=0;Ve<Se;++Ve)Me+=`
          realIndices[${Ve}] = int( mod(float(bcastedIndices[${Ae+Ve}]), ${Ce[Ve]}.0) );
          `;const Fe=`
        void ${Ie} (int bcastedIndices[${xe}], out int realIndices[${Se}]) {
          ${Me}
        }
        `;Pe[Ie]=new _e.GlslLibRoutine(Fe)}}),Pe}bcastMatmulIndex(){const xe=this.context.outputTextureLayout.shape.length,Pe={};return this.context.programInfo.inputNames.forEach((Re,ke)=>{const Ce=this.context.inputTextureLayouts[ke].shape;if(!(Ce.length<2||Ce.length>xe)){const Se=Ce.length,Ae=xe-Se,Ie=`bcastMatmulIndices_${Re}`;let Me="";for(let Ve=0;Ve<Se-2;++Ve)Me+=`
          realIndices[${Ve}] = int( mod(float(bcastedIndices[${Ae+Ve}]), ${Ce[Ve]}.0) );
          `;const Fe=`
        void ${Ie}(int bcastedIndices[${xe}], out int realIndices[${Se}]) {
          ${Me}
          realIndices[${Se-1}] = bcastedIndices[${xe-1}];
          realIndices[${Se-2}] = bcastedIndices[${xe-2}];
        }
        `;Pe[Ie]=new _e.GlslLibRoutine(Fe)}}),Pe}indicesToOffset(){const xe={};return this.context.programInfo.inputNames.forEach((Pe,Re)=>{const ke=this.context.inputTextureLayouts[Re].shape,Ce=this.context.inputTextureLayouts[Re].strides,Se=ke.length;let Ae=`indicesToOffset_${Pe}`;xe[Ae]=new _e.GlslLibRoutine(Te.indexToOffsetSingle(Ae,Se,Ce)),Ae=`indicesToOffset_${Pe}_T`,xe[Ae]=new _e.GlslLibRoutine(Te.indexToOffsetSingle(Ae,Se,Ce.slice().reverse()))}),xe}static indexToOffsetSingle(xe,Pe,Re){let ke="";for(let Ce=Pe-1;Ce>=0;--Ce)ke+=`
        offset += indices[${Ce}] * ${Re[Ce]};
        `;return`
      int ${xe}(int indices[${Pe}]) {
        int offset = 0;
        ${ke}
        return offset;
      }
      `}offsetToIndices(){const xe={};return this.context.programInfo.inputNames.forEach((Pe,Re)=>{const ke=this.context.inputTextureLayouts[Re].shape,Ce=this.context.inputTextureLayouts[Re].strides,Se=ke.length;let Ae=`offsetToIndices_${Pe}`;xe[Ae]=new _e.GlslLibRoutine(Te.offsetToIndicesSingle(Ae,Se,Ce)),Ae=`offsetToIndices_${Pe}_T`,xe[Ae]=new _e.GlslLibRoutine(Te.offsetToIndicesSingle(Ae,Se,Ce.slice().reverse()))}),xe}static offsetToIndicesSingle(xe,Pe,Re){const ke=[];for(let Ce=0;Ce<Pe-1;++Ce)ke.push(`
      indices[${Ce}] = offset / ${Re[Ce]};`),ke.push(`
        offset -= indices[${Ce}] * ${Re[Ce]};`);return ke.push(`
      indices[${Pe-1}] = offset;`),`
      void ${xe}(int offset, out int indices[${Pe}]) {
        ${ke.join("")}
      }
      `}incrementIndices(){const xe={};return this.context.programInfo.inputNames.forEach((Pe,Re)=>{const ke=this.context.inputTextureLayouts[Re].shape,Ce=ke.length,Se=`incrementIndices_${Pe}`;let Ae="";for(let Me=0;Me<Ce;++Me)Ae+=`
        shape[${Me}] = ${ke[Me]};`;const Ie=`
        void ${Se}(int axis, out int indices[${Ce}]) {
          int shape[${Ce}];
          ${Ae};
          for(int i = ${Ce} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;xe[Se]=new _e.GlslLibRoutine(Ie)}),xe}}e.ShapeUtilsGlslLib=Te},5060:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultFragShaderMain=e.getFragShaderPreamble=e.getVertexShaderSource=e.getGlsl=void 0;const t={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},_e={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function Te(Ee){return Ee===1?t:_e}e.getGlsl=Te,e.getVertexShaderSource=function(Ee){const xe=Te(Ee);return`${xe.version}
      precision highp float;
      ${xe.attribute} vec3 position;
      ${xe.attribute} vec2 textureCoord;

      ${xe.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`},e.getFragShaderPreamble=function(Ee){const xe=Te(Ee);return`${xe.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${xe.varyingFrag} vec2 TexCoords;
    ${xe.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `},e.getDefaultFragShaderMain=function(Ee,xe){return`
  void main() {
    int indices[${xe}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${Te(Ee).output} = result;
  }
  `}},3891:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VecGlslLib=void 0;const _e=t(8520);class Te extends _e.GlslLib{constructor(xe){super(xe)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){const xe=this.context.outputTextureLayout.shape.length,Pe={add:"+=",sub:"-=",mul:"*=",div:"/="},Re={};for(const ke in Pe){const Ce=`${ke}Vec`;let Se="";for(let Ie=0;Ie<xe;++Ie)Se+=`
          dest[${Ie}] ${Pe[ke]} src[${Ie}];
          `;const Ae=`
        void ${Ce}(int src[${xe}], out int dest[${xe}]) {
          ${Se}
        }
        `;Re[Ce]=new _e.GlslLibRoutine(Ae)}return Re}copyVec(){const xe=this.context.outputTextureLayout.shape.length;let Pe="";for(let ke=0;ke<xe;++ke)Pe+=`
        dest[${ke}] = src[${ke}];
        `;const Re=`
      void copyVec(int src[${xe}], out int dest[${xe}]) {
        ${Pe}
      }
      `;return{copyVec:new _e.GlslLibRoutine(Re)}}setVecItem(){const xe=this.context.outputTextureLayout.shape.length;let Pe=`
        if(index < 0)
            index =${xe} + index;
        if (index == 0)
            m[0] = value;
        `;for(let ke=1;ke<xe-1;++ke)Pe+=`
        else if (index == ${ke})
            m[${ke}] = value;
            `;Pe+=`
        else
            m[${xe-1}] = value;
        `;const Re=`
      void setVecItem(out int m[${xe}], int index, int value) {
        ${Pe}
      }
        `;return{setVecItem:new _e.GlslLibRoutine(Re)}}getVecItem(){const xe=this.context.outputTextureLayout.shape.length;let Pe=`
        if(index < 0)
            index = ${xe} + index;
        if (index == 0)
            return m[0];
      `;for(let ke=1;ke<xe-1;++ke)Pe+=`
        else if (index == ${ke})
            return m[${ke}];
      `;Pe+=`
        else
            return m[${xe-1}];
        `;const Re=`
      int getVecItem(int m[${xe}], int index) {
        ${Pe}
      }
    `;return{getVecItem:new _e.GlslLibRoutine(Re)}}}e.VecGlslLib=Te},8316:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLInferenceHandler=void 0;const _e=t(6231),Te=t(9162),Ee=t(2517),xe=t(2403),Pe=t(7019),Re=t(8710),ke=t(5611),Ce=t(4057),Se=t(2039);e.WebGLInferenceHandler=class{constructor(Ae){this.session=Ae,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(Ae,Ie){return(0,Ce.calculateTextureWidthAndHeight)(this.session.layoutStrategy,Ae,Ie)}executeProgram(Ae,Ie){if(Ie.length<Ae.inputNames.length)throw new Error(`Input size mustn't be less than ${Ae.inputNames.length}.`);if(Ae.inputNames.length!==Ae.inputTypes.length)throw new Error("input names size does not match input types");const Me=[];for(let He=0;He<Ae.inputNames.length;++He)Me[He]=this.getOrCreateTextureData(Ie[He],Ae.inputTypes[He]);const Fe=((He,Xe)=>{const Je=Xe.map(Ke=>`${Ke.unpackedShape.join(",")};${Ke.width}x${Ke.height}`).join("_");let Qe=He.name;return He.cacheHint&&(Qe+="["+He.cacheHint+"]"),Qe+=":"+Je,Qe})(Ae,Me);let Ve=this.session.programManager.getArtifact(Fe);const je=Ve?Ve.programInfo:typeof Ae.get=="function"?Ae.get():Ae,Be=(0,Ce.createTextureLayoutFromTextureType)(this.session.layoutStrategy,je.output.dims,je.output.textureType),qe=this.createTextureData(Be,je.output.type);return Ve||(Ve=this.session.programManager.build(je,Me,qe),this.session.programManager.setArtifact(Fe,Ve)),this.runProgram(Ve,Me,qe),qe}run(Ae,Ie){return this.executeProgram(Ae,Ie).tensor}runProgram(Ae,Ie,Me){for(let Fe=0;Fe<Ie.length;++Fe)if(!!Ie[Fe].isPacked!=(Ae.programInfo.inputTypes[Fe]===Se.TextureType.packed))throw new Error(`input[${Fe}] property packed inconsistent`);if(!!Me.isPacked!=(Ae.programInfo.output.textureType===Se.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(Ae,Ie,Me)}getOrCreateTextureData(Ae,Ie){let Me=this.getTextureData(Ae.dataId,Ie===Se.TextureType.packed);if(!Me&&(Me=this.getTextureData(Ae.dataId,Ie!==Se.TextureType.packed),Me))return Ie===Se.TextureType.packed?this.pack(Me):this.unpack(Me);if(!Me){const Fe=(0,Ce.createTextureLayoutFromTextureType)(this.session.layoutStrategy,Ae.dims,Ie);if(Ie===Se.TextureType.packedLastDimension){const Be=Ae.dims;if(Be.length===4){const qe=[Be[0],Math.ceil(Be[1]*Be[2]*Be[3]/4)],He=(0,Ce.createTextureLayoutFromTextureType)(this.session.layoutStrategy,qe,Ie);let Xe=Ae.numberData;if(Be[1]*Be[2]*Be[3]%4!=0){const Je=Be[0],Qe=Be[1]*Be[2]*Be[3],Ke=Math.ceil(Qe*1/4)*4;Xe=new Float32Array(Je*Ke);for(let Ye=0;Ye<Je;++Ye){const pn=Ye*Qe,un=Ye*Ke+Ye%1*Qe;Xe.set(Ae.numberData.subarray(pn,pn+Qe),un)}}return this.createTextureData(He,Ae.type,Xe,Ae,1)}}if(Ie===Se.TextureType.packed){const Ve=(0,Ce.createTextureLayoutFromShape)(this.session.layoutStrategy,Ae.dims,1,[],{reverseWH:!0}),je=this.createTextureData(Ve,Ae.type,Ae.numberData,Ae,1);Me=this.pack(je)}else Me=this.createTextureData(Fe,Ae.type,Ae.numberData,Ae,1)}return Me}createTextureDataFromLayoutBindTensor(Ae,Ie,Me,Fe){return this.createTextureData(Ae,Ie,Me,Fe,1)}createTextureData(Ae,Ie,Me,Fe,Ve){_e.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(Ae)}]`);const je=this.session.textureManager.createTextureFromLayout(Ie,Ae,Me,Ve);return this.createTextureDataFromTexture(Ae,Ie,je,Fe)}reshapeUnpacked(Ae,Ie){const Me=this.getOrCreateTextureData(Ae,Se.TextureType.unpacked),Fe={channels:Me.channels,height:Me.height,width:Me.width,shape:Ie.length!==0?Ie:[1],strides:Ee.ShapeUtil.computeStrides(Ie),unpackedShape:Ie};return this.createTextureDataFromTexture(Fe,Ae.type,Me.texture).tensor}reshapePacked(Ae,Ie){const Me=this.getOrCreateTextureData(Ae,Se.TextureType.packed);if((0,Pe.isReshapeCheap)(Ae.dims,Ie)){const qe={channels:Me.channels,height:Me.height,width:Me.width,shape:Ie.length!==0?Ie:[1],strides:Ee.ShapeUtil.computeStrides(Ie),unpackedShape:Ie,isPacked:!0};return this.createTextureDataFromTexture(qe,Ae.type,Me.texture).tensor}const Fe=(0,Pe.processDims3D)(Ae.dims),Ve=(0,Pe.processDims3D)(Ie),je=this.reshapePacked(Ae,Fe),Be=this.run((0,Pe.createPackedReshape3DProgramInfoLoader)(this,je,Ve),[je]);return this.reshapePacked(Be,Ie)}cast(Ae,Ie){const Me=this.getOrCreateTextureData(Ae,Se.TextureType.unpacked);return this.createTextureDataFromTexture(Me,Ie,Me.texture).tensor}createTextureDataFromTexture(Ae,Ie,Me,Fe,Ve){const je=Object.assign(Object.assign({},Ae),{tensor:Fe||new Te.Tensor(Ae.unpackedShape,Ie,Be=>this.readTexture(je),async Be=>this.readTextureAsync(je),void 0,Ve),texture:Me});return this.setTextureData(je.tensor.dataId,je,Ae.isPacked),je}getTextureData(Ae,Ie=!1){return this.session.isInitializer(Ae)?this.session.getTextureData(Ae,Ie):Ie?this.packedTextureDataCache.get(Ae):this.unpackedTextureDataCache.get(Ae)}setTextureData(Ae,Ie,Me=!1){this.session.isInitializer(Ae)?this.session.setTextureData(Ae,Ie,Me):(Me?this.packedTextureDataCache:this.unpackedTextureDataCache).set(Ae,Ie)}isTextureLayoutCached(Ae,Ie=!1){return!!this.getTextureData(Ae.dataId,Ie)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(Ae=>this.session.textureManager.releaseTexture(Ae)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(Ae=>this.session.textureManager.releaseTexture(Ae)),this.unpackedTextureDataCache=new Map}readTexture(Ae){return Ae.isPacked?this.readTexture(this.unpack(Ae)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(Ae,Ae.tensor.type,Ae.channels):this.session.textureManager.readUint8TextureAsFloat((0,Re.encodeAsUint8)(this,Ae))}async readTextureAsync(Ae){return Ae.isPacked?this.readTextureAsync(this.unpack(Ae)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(Ae,Ae.tensor.type,Ae.channels):this.session.textureManager.readUint8TextureAsFloat((0,Re.encodeAsUint8)(this,Ae))}pack(Ae){return this.executeProgram((0,xe.createPackProgramInfoLoader)(this,Ae.tensor),[Ae.tensor])}unpack(Ae){return this.executeProgram((0,ke.createUnpackProgramInfoLoader)(this,Ae.tensor),[Ae.tensor])}}},1640:function(r,e,t){var _e=this&&this.__createBinding||(Object.create?function($n,Sn,Bn,Tn){Tn===void 0&&(Tn=Bn);var vn=Object.getOwnPropertyDescriptor(Sn,Bn);vn&&!("get"in vn?!Sn.__esModule:vn.writable||vn.configurable)||(vn={enumerable:!0,get:function(){return Sn[Bn]}}),Object.defineProperty($n,Tn,vn)}:function($n,Sn,Bn,Tn){Tn===void 0&&(Tn=Bn),$n[Tn]=Sn[Bn]}),Te=this&&this.__setModuleDefault||(Object.create?function($n,Sn){Object.defineProperty($n,"default",{enumerable:!0,value:Sn})}:function($n,Sn){$n.default=Sn}),Ee=this&&this.__importStar||function($n){if($n&&$n.__esModule)return $n;var Sn={};if($n!=null)for(var Bn in $n)Bn!=="default"&&Object.prototype.hasOwnProperty.call($n,Bn)&&_e(Sn,$n,Bn);return Te(Sn,$n),Sn};Object.defineProperty(e,"__esModule",{value:!0}),e.WEBGL_OP_RESOLVE_RULES=void 0;const xe=t(2898),Pe=Ee(t(7839)),Re=t(4196),ke=t(2069),Ce=t(8138),Se=t(9663),Ae=t(5193),Ie=t(7992),Me=t(1253),Fe=t(4776),Ve=t(6572),je=t(3346),Be=t(5623),qe=t(2870),He=t(2143),Xe=t(4939),Je=t(718),Qe=t(2268),Ke=t(8117),Ye=t(2278),pn=t(5524),un=t(5975),fn=t(3933),mn=t(6558),wn=t(5723),Pn=t(3738),xn=Ee(t(4909)),In=t(8428),Ln=t(9793);e.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",xn.abs],["Acos","","7+",xn.acos],["Add","","7+",Pe.add],["And","","7+",Pe.and],["Asin","","7+",xn.asin],["Atan","","7+",xn.atan],["AveragePool","","7+",He.averagePool,He.parseAveragePoolAttributes],["BatchNormalization","","7+",xe.batchNormalization,xe.parseBatchNormalizationAttributes],["Cast","","6+",Re.cast,Re.parseCastAttributes],["Ceil","","6+",xn.ceil],["Clip","","6-10",xn.clip,xn.parseClipAttributes],["Clip","","11+",xn.clipV11],["Concat","","4+",ke.concat,ke.parseConcatAttributes],["Conv","","1+",Ce.conv,Ce.parseConvAttributes],["ConvTranspose","","1+",Se.convTranspose,Se.parseConvTransposeAttributes],["Cos","","7+",xn.cos],["Div","","7+",Pe.div],["Dropout","","7+",xn.identity],["DepthToSpace","","1+",Ae.depthToSpace,Ae.parseDepthToSpaceAttributes],["Equal","","7+",Pe.equal],["Elu","","6+",xn.elu,xn.parseEluAttributes],["Exp","","6+",xn.exp],["Flatten","","1+",Ie.flatten,Ie.parseFlattenAttributes],["Floor","","6+",xn.floor],["FusedConv","com.microsoft","1+",Ce.conv,Ce.parseConvAttributes],["Gather","","1+",Me.gather,Me.parseGatherAttributes],["Gemm","","7-10",Fe.gemm,Fe.parseGemmAttributesV7],["Gemm","","11+",Fe.gemm,Fe.parseGemmAttributesV11],["GlobalAveragePool","","1+",He.globalAveragePool,He.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",He.globalMaxPool],["Greater","","7+",Pe.greater],["Identity","","1+",xn.identity],["ImageScaler","","1+",Ve.imageScaler,Ve.parseImageScalerAttributes],["InstanceNormalization","","6+",je.instanceNormalization,je.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",xn.leakyRelu,xn.parseLeakyReluAttributes],["Less","","7+",Pe.less],["Log","","6+",xn.log],["MatMul","","1+",Be.matMul,Be.parseMatMulAttributes],["MaxPool","","1+",He.maxPool,He.parseMaxPoolAttributes],["Mul","","7+",Pe.mul],["Neg","","6+",xn.neg],["Not","","1+",xn.not],["Or","","7+",Pe.or],["Pad","","2-10",qe.padV2,qe.parsePadAttributesV2],["Pad","","11+",qe.padV11,qe.parsePadAttributesV11],["Pow","","7+",Pe.pow],["PRelu","","7+",Pe.pRelu],["ReduceLogSum","","1+",Xe.reduceLogSum,Xe.parseReduceAttributes],["ReduceMax","","1+",Xe.reduceMax,Xe.parseReduceAttributes],["ReduceMean","","1+",Xe.reduceMean,Xe.parseReduceAttributes],["ReduceMin","","1+",Xe.reduceMin,Xe.parseReduceAttributes],["ReduceProd","","1+",Xe.reduceProd,Xe.parseReduceAttributes],["ReduceSum","","1-12",Xe.reduceSum,Xe.parseReduceAttributes],["ReduceSumSquare","","1+",Xe.reduceLogSumSquare,Xe.parseReduceAttributes],["Relu","","6+",xn.relu],["Reshape","","5+",Je.reshape],["Resize","","10",Qe.resize,Qe.parseResizeAttributesV10],["Resize","","11+",Qe.resize,Qe.parseResizeAttributesV11],["Shape","","1+",Ke.shape],["Sigmoid","","6+",xn.sigmoid],["Sin","","7+",xn.sin],["Slice","","10+",Ye.sliceV10],["Slice","","1-9",Ye.slice,Ye.parseSliceAttributes],["Softmax","","1-12",pn.softmax,pn.parseSoftmaxAttributes],["Softmax","","13+",pn.softmaxV13,pn.parseSoftmaxAttributesV13],["Split","","2-12",un.split,un.parseSplitAttributes],["Sqrt","","6+",xn.sqrt],["Squeeze","","1-12",fn.squeeze,fn.parseSqueezeAttributes],["Squeeze","","13+",fn.squeezeV13],["Sub","","7+",Pe.sub],["Sum","","6+",mn.sum],["Tan","","7+",xn.tan],["Tanh","","6+",xn.tanh],["Tile","","6+",wn.tile],["Transpose","","1+",Pn.transpose,Pn.parseTransposeAttributes],["Upsample","","7-8",Ln.upsample,Ln.parseUpsampleAttributesV7],["Upsample","","9",Ln.upsample,Ln.parseUpsampleAttributesV9],["Unsqueeze","","1-12",In.unsqueeze,In.parseUnsqueezeAttributes],["Unsqueeze","","13+",In.unsqueezeV13],["Xor","","7+",Pe.xor]]},2898:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseBatchNormalizationAttributes=e.batchNormalization=void 0;const _e=t(246),Te=t(5060),Ee=t(2039),xe={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[Ee.TextureType.unpacked,Ee.TextureType.unpacked,Ee.TextureType.unpacked,Ee.TextureType.unpacked,Ee.TextureType.unpacked]};e.batchNormalization=(ke,Ce,Se)=>(Re(Ce),[ke.run(Object.assign(Object.assign({},xe),{cacheHint:Se.cacheKey,get:()=>Pe(ke,Ce,Se)}),Ce)]),e.parseBatchNormalizationAttributes=ke=>{const Ce=ke.attributes.getFloat("epsilon",1e-5),Se=ke.attributes.getFloat("momentum",.9),Ae=ke.attributes.getInt("spatial",1);return(0,_e.createAttributeWithCacheKey)({epsilon:Ce,momentum:Se,spatial:Ae})};const Pe=(ke,Ce,Se)=>{const Ae=(0,Te.getGlsl)(ke.session.backend.glContext.version),Ie=Ce[0].dims.length,[Me,Fe]=ke.calculateTextureWidthAndHeight(Ce[1].dims,Ee.TextureType.unpacked),Ve=`
  float process(int[${Ie}] indices) {
    vec2 position = offsetToCoords(indices[1], ${Me}, ${Fe});
    float scale = getColorAsFloat(${Ae.texture2D}(Scale, position));
    float mean = getColorAsFloat(${Ae.texture2D}(Mean, position));
    float variance = getColorAsFloat(${Ae.texture2D}(Variance, position));
    float b = getColorAsFloat(${Ae.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${Se.epsilon})) ) + b;
  }`;return Object.assign(Object.assign({},xe),{output:{dims:Ce[0].dims,type:Ce[0].type,textureType:Ee.TextureType.unpacked},shaderSource:Ve})},Re=ke=>{if(!ke||ke.length!==5)throw new Error("BatchNormalization requires 5 inputs.");const Ce=ke[0],Se=ke[1],Ae=ke[2],Ie=ke[3],Me=ke[4];if(Ce.dims.length<3||Se.dims.length!==1||Ae.dims.length!==1||Ie.dims.length!==1||Me.dims.length!==1)throw new Error("invalid input shape.");if(Se.dims[0]!==Ce.dims[1]||Ae.dims[0]!==Ce.dims[1]||Ie.dims[0]!==Ce.dims[1]||Me.dims[0]!==Ce.dims[1])throw new Error("invalid input shape.");if(Ce.type!=="float32"&&Ce.type!=="float64"||Se.type!=="float32"&&Se.type!=="float64"||Ae.type!=="float32"&&Ae.type!=="float64"||Ie.type!=="float32"&&Ie.type!=="float64"||Me.type!=="float32"&&Me.type!=="float64")throw new Error("invalid input tensor types.")}},7839:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.xor=e.sub=e.pRelu=e.pow=e.or=e.mul=e.less=e.greater=e.equal=e.div=e.and=e.add=e.glslPRelu=e.glslPow=e.glslXor=e.glslOr=e.glslAnd=e.glslLess=e.glslGreater=e.glslEqual=e.glslSub=e.glslMul=e.glslDiv=e.glslAdd=void 0;const _e=t(2517),Te=t(8520),Ee=t(5060),xe=t(2039);function Pe(){const Xe="add_";return{body:`
  float ${Xe}(float a, float b) {
    return a + b;
  }
  vec4 ${Xe}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:Xe,type:Te.FunctionType.ValueBased}}function Re(){const Xe="div_";return{body:`
  float ${Xe}(float a, float b) {
    return a / b;
  }
  vec4 ${Xe}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:Xe,type:Te.FunctionType.ValueBased}}function ke(){const Xe="mul_";return{body:`
  float ${Xe}(float a, float b) {
    return a * b;
  }
  vec4 ${Xe}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:Xe,type:Te.FunctionType.ValueBased}}function Ce(){const Xe="sub_";return{body:`
  float ${Xe}(float a, float b) {
    return a - b;
  }
  vec4 ${Xe}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:Xe,type:Te.FunctionType.ValueBased}}function Se(){const Xe="equal_";return{body:`
  float ${Xe}(float a, float b) {
    return float(a == b);
  }
  vec4 ${Xe}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:Xe,type:Te.FunctionType.ValueBased}}function Ae(){const Xe="greater_";return{body:`
  float ${Xe}(float a, float b) {
    return float(a > b);
  }
  vec4 ${Xe}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:Xe,type:Te.FunctionType.ValueBased}}function Ie(){const Xe="less_";return{body:`
  float ${Xe}(float a, float b) {
    return float(a < b);
  }
  vec4 ${Xe}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:Xe,type:Te.FunctionType.ValueBased}}function Me(){const Xe="and_";return{body:`
  float ${Xe}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${Xe}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:Xe,type:Te.FunctionType.ValueBased}}function Fe(){const Xe="or_";return{body:`
  float ${Xe}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${Xe}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:Xe,type:Te.FunctionType.ValueBased}}function Ve(){const Xe="xor_";return{body:`
  float ${Xe}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${Xe}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:Xe,type:Te.FunctionType.ValueBased}}function je(){return function(Xe){const Je=`${Xe}_`;return{body:`
  float ${Je}(float a, float b) {
    return ${Xe}(a, b);
  }
  vec4 ${Je}(vec4 v1, vec4 v2) {
    return ${Xe}(v1, v2);
  }
  `,name:Je,type:Te.FunctionType.ValueBased}}("pow")}function Be(){const Xe="prelu_";return{body:`
  float ${Xe}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${Xe}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:Xe,type:Te.FunctionType.ValueBased}}e.glslAdd=Pe,e.glslDiv=Re,e.glslMul=ke,e.glslSub=Ce,e.glslEqual=Se,e.glslGreater=Ae,e.glslLess=Ie,e.glslAnd=Me,e.glslOr=Fe,e.glslXor=Ve,e.glslPow=je,e.glslPRelu=Be;const qe=(Xe,Je,Qe,Ke=Je[0].type,Ye)=>{const pn=Xe.session.pack?xe.TextureType.packed:xe.TextureType.unpacked;return{name:Qe.name,inputNames:["A","B"],inputTypes:[pn,pn],cacheHint:Ye,get:()=>He(Xe,Je,Qe,Ke)}},He=(Xe,Je,Qe,Ke=Je[0].type)=>{const Ye=Xe.session.pack?xe.TextureType.packed:xe.TextureType.unpacked,pn=!_e.ShapeUtil.areEqual(Je[0].dims,Je[1].dims);let un=Je[0].dims;const fn=Xe.session.pack;if(pn){const Pn=_e.BroadcastUtil.calcShape(Je[0].dims,Je[1].dims,!1);if(!Pn)throw new Error("Can't perform binary op on the given tensors");un=Pn;const xn=un.length,In=Je[0].dims.length!==0?Je[0].dims.length:1,Ln=Je[1].dims.length!==0?Je[1].dims.length:1,$n=Je[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",Sn=Je[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",Bn=(0,Ee.getGlsl)(Xe.session.backend.glContext.version),Tn=fn?`
      ${Qe.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${Qe.name}(a, b);
        ${Bn.output} = result;
      }`:`
      ${Qe.body}
      float process(int indices[${xn}]) {
        int aindices[${In}];
        int bindices[${Ln}];
        ${$n}
        ${Sn}
        return ${Qe.name}(_A(aindices), _B(bindices));
      }`;return{name:Qe.name,inputNames:["A","B"],inputTypes:[Ye,Ye],output:{dims:un,type:Ke,textureType:Ye},shaderSource:Tn,hasMain:fn}}const mn=(0,Ee.getGlsl)(Xe.session.backend.glContext.version),wn=`
    ${Qe.body}
    void main() {
      vec4 v1 = ${mn.texture2D}(A, TexCoords);
      vec4 v2 = ${mn.texture2D}(B, TexCoords);
      vec4 result = ${Qe.name}(v1, v2);
      ${mn.output} = result;
    }
    `;return{name:Qe.name,inputNames:["A","B"],inputTypes:[Ye,Ye],output:{dims:Je[0].dims,type:Ke,textureType:Ye},shaderSource:wn,hasMain:!0}};e.add=(Xe,Je)=>[Xe.run(qe(Xe,Je,Pe()),Je)],e.and=(Xe,Je)=>[Xe.run(qe(Xe,Je,Me(),"bool"),Je)],e.div=(Xe,Je)=>[Xe.run(qe(Xe,Je,Re()),Je)],e.equal=(Xe,Je)=>[Xe.run(qe(Xe,Je,Se(),"bool"),Je)],e.greater=(Xe,Je)=>[Xe.run(qe(Xe,Je,Ae(),"bool"),Je)],e.less=(Xe,Je)=>[Xe.run(qe(Xe,Je,Ie(),"bool"),Je)],e.mul=(Xe,Je)=>[Xe.run(qe(Xe,Je,ke()),Je)],e.or=(Xe,Je)=>[Xe.run(qe(Xe,Je,Fe(),"bool"),Je)],e.pow=(Xe,Je)=>[Xe.run(qe(Xe,Je,je()),Je)],e.pRelu=(Xe,Je)=>[Xe.run(qe(Xe,Je,Be()),Je)],e.sub=(Xe,Je)=>[Xe.run(qe(Xe,Je,Ce()),Je)],e.xor=(Xe,Je)=>[Xe.run(qe(Xe,Je,Ve(),"bool"),Je)]},4196:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseCastAttributes=e.cast=void 0;const _e=t(2517);e.cast=(Ee,xe,Pe)=>(Te(xe),[Ee.cast(xe[0],Pe)]),e.parseCastAttributes=Ee=>_e.ProtoUtil.tensorDataTypeFromProto(Ee.attributes.getInt("to"));const Te=Ee=>{if(!Ee||Ee.length!==1)throw new Error("Cast requires 1 input.");if(Ee[0].type==="string")throw new Error("Invalid input type.")}},1163:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedConcatProgramInfoLoader=void 0;const _e=t(5060),Te=t(2039),Ee=t(9390),xe=t(2827);e.createPackedConcatProgramInfoLoader=(Re,ke,Ce)=>{const Se=(Ae=ke.length,Ie=Ce.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:Ae},(Me,Fe)=>`X${Fe}`),inputTypes:Array(Ae).fill(Te.TextureType.packed),cacheHint:Ie});var Ae,Ie;return Object.assign(Object.assign({},Se),{get:()=>((Me,Fe,Ve,je)=>{const Be=Ve[0].dims.slice();if(je>=Be.length||je<-1*Be.length)throw new Error("axis specified for concat doesn't match input dimensionality");je<0&&(je=Be.length+je);const qe=Be.slice(0);for(let $n=1;$n<Ve.length;$n++){const Sn=Ve[$n].dims.slice();for(let Bn=0;Bn<Be.length;Bn++)if(Bn===je)qe[je]+=Sn[Bn];else if(Be[Bn]!==Sn[Bn])throw new Error("non concat dimensions must match")}const He=qe.length,Xe=(0,xe.getChannels)("coords",He),Je=(0,Ee.getCoordsDataType)(He),Qe=(0,xe.unpackFromChannel)(),Ke=Ve.map($n=>$n.dims),Ye=(0,Ee.getGlChannels)(He),pn=new Array(Ke.length-1);pn[0]=Ke[0][je];for(let $n=1;$n<pn.length;$n++)pn[$n]=pn[$n-1]+Ke[$n][je];const un=Ye[je],fn=Ye.slice(-2),mn=Ye.join();let wn=`if (${un} < ${pn[0]}) {
        return getChannel(
            getX0(${mn}), vec2(${fn.join()}));
        }`;for(let $n=1;$n<pn.length;$n++){const Sn=pn[$n-1];wn+=`
            if (${un} < ${pn[$n]}  && ${un} >= ${pn[$n-1]}) {
              return getChannel(
                getX${$n}(${Pe(Ye,un,Sn)}),
                vec2(${Pe(fn,un,Sn)}));
            }`}const Pn=pn.length,xn=pn[pn.length-1];wn+=`
            return getChannel(
              getX${Pn}(${Pe(Ye,un,xn)}),
              vec2(${Pe(fn,un,xn)}));`;const In=(0,_e.getGlsl)(Me.session.backend.glContext.version),Ln=`
          ${Qe}
          float getValue(${Ye.map($n=>"int "+$n)}) {
            ${wn}
          }

          void main() {
            ${Je} coords = getOutputCoords();
            int lastDim = coords.${Ye[He-1]};
            coords.${Ye[He-1]} = coords.${Ye[He-2]};
            coords.${Ye[He-2]} = lastDim;

            vec4 result = vec4(getValue(${Xe}), 0., 0., 0.);

            ${Xe[He-1]} = ${Xe[He-1]} + 1;
            if (${Xe[He-1]} < ${qe[He-1]}) {
              result.g = getValue(${Xe});
            }

            ${Xe[He-2]} = ${Xe[He-2]} + 1;
            if (${Xe[He-2]} < ${qe[He-2]}) {
              result.a = getValue(${Xe});
            }

            ${Xe[He-1]} = ${Xe[He-1]} - 1;
            if (${Xe[He-2]} < ${qe[He-2]} &&
                ${Xe[He-1]} < ${qe[He-1]}) {
              result.b = getValue(${Xe});
            }
            ${In.output} = result;
          }
        `;return Object.assign(Object.assign({},Fe),{output:{dims:qe,type:Ve[0].type,textureType:Te.TextureType.packed},shaderSource:Ln,hasMain:!0})})(Re,Se,ke,Ce.axis)})};const Pe=(Re,ke,Ce)=>{const Se=Re.indexOf(ke);return Re.map((Ae,Ie)=>Ie===Se?`${Ae} - ${Ce}`:Ae).join()}},2069:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConcatAttributes=e.concat=void 0;const _e=t(246),Te=t(2039),Ee=t(1163);e.concat=(Ae,Ie,Me)=>(Se(Ie),Ae.session.pack&&Ie[0].dims.length>1?[Ae.run((0,Ee.createPackedConcatProgramInfoLoader)(Ae,Ie,Me),Ie)]:[Ae.run(xe(Ae,Ie,Me),Ie)]);const xe=(Ae,Ie,Me)=>{const Fe=(Ve=Ie.length,je=Me.cacheKey,{name:"Concat",inputNames:Array.from({length:Ve},(Be,qe)=>`X${qe}`),inputTypes:Array(Ve).fill(Te.TextureType.unpacked),cacheHint:je});var Ve,je;return Object.assign(Object.assign({},Fe),{get:()=>((Be,qe,He,Xe)=>{const Je=He[0].dims.slice();if(Xe>=Je.length||Xe<-1*Je.length)throw new Error("axis specified for concat doesn't match input dimensionality");Xe<0&&(Xe=Je.length+Xe);const Qe=Je.slice(0);for(let mn=1;mn<He.length;mn++){const wn=He[mn].dims.slice();for(let Pn=0;Pn<Je.length;Pn++)if(Pn===Xe)Qe[Xe]+=wn[Pn];else if(Je[Pn]!==wn[Pn])throw new Error("non concat dimensions must match")}const Ke=Qe.length,Ye=new Array(He.length);let pn=0;for(let mn=0;mn<Ye.length;++mn)pn+=He[mn].dims[Xe],Ye[mn]=pn;let un="";un=He.length<5?Pe(Ye):Re(Ye);const fn=`
        ${ke(He.length,Ke)}
        ${Ce(Ye)}
        ${un}
        float process(int indices[${Ke}]) {
          int textureIndex = getTextureWhereDataResides (indices[${Xe}]);

          if(textureIndex != 0) {
            indices[${Xe}] = indices[${Xe}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return Object.assign(Object.assign({},qe),{output:{dims:Qe,type:He[0].type,textureType:Te.TextureType.unpacked},shaderSource:fn})})(0,Fe,Ie,Me.axis)})},Pe=Ae=>`int getTextureWhereDataResides(int index) {
      ${Ae.map((Ie,Me)=>`if(index<${Ie}) {return ${Me};}
`).join("")}
    }`,Re=Ae=>Pe(Ae),ke=(Ae,Ie)=>{const Me=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${Ie}]) {`];for(let Fe=0;Fe<Ae;++Fe)Fe===0?Me.push(`	if (textureIndex == ${Fe}) { return _X${Fe}(indices); }`):Fe===Ae-1?Me.push(`	else { return _X${Fe}(indices); }`):Me.push(`	else if (textureIndex == ${Fe}) { return _X${Fe}(indices); }`);return Me.push("	}"),Me.join(`
`)},Ce=Ae=>{const Ie=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let Me=0;Me<Ae.length;++Me)Me===0?Ie.push(`	if (index == ${Me}) { return ${Ae[Me]}; }`):Me===Ae.length-1?Ie.push(`	else { return ${Ae[Me]}; }`):Ie.push(`	else if (index == ${Me}) { return ${Ae[Me]}; }`);return Ie.push("	}"),Ie.join(`
`)};e.parseConcatAttributes=Ae=>(0,_e.createAttributeWithCacheKey)({axis:Ae.attributes.getInt("axis")});const Se=Ae=>{if(!Ae||Ae.length<1)throw new Error("too few inputs");const Ie=Ae[0].type,Me=Ae[0].dims.length;if(Ie==="string")throw new Error("string tensor is not supported yet");for(const Fe of Ae){if(Fe.type!==Ie)throw new Error("input tensors should be one type");if(Fe.dims.length!==Me)throw new Error("input tensors should have the same shape")}}},4770:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackedGroupedConvProgramInfoLoader=void 0;const _e=t(6231),Te=t(5060),Ee=t(2039),xe=t(8138),Pe=t(2823);e.createUnpackedGroupedConvProgramInfoLoader=(Re,ke,Ce)=>{const Se=(Ae=ke.length>2,Ie=Ce.cacheKey,{name:"GroupedConv",inputNames:Ae?["X","W","Bias"]:["X","W"],inputTypes:Ae?[Ee.TextureType.unpacked,Ee.TextureType.unpacked,Ee.TextureType.unpacked]:[Ee.TextureType.unpacked,Ee.TextureType.unpacked],cacheHint:Ie});var Ae,Ie;return Object.assign(Object.assign({},Se),{get:()=>((Me,Fe,Ve,je)=>{const Be=Fe.length>2?"value += getBias(output_channel);":"",qe=Fe[0].dims.slice(),He=Fe[1].dims.slice(),Xe=He[0]/je.group;_e.Logger.verbose("GroupedConv",`autpPad:${je.autoPad}, dilations:${je.dilations}, group:${je.group}, kernelShape:${je.kernelShape}, pads:${je.pads}, strides:${je.strides}`);const Je=(0,xe.calculateOutputShape)(qe,He,je.dilations,je.pads,je.strides),Qe=(0,Te.getGlsl)(Me.session.backend.glContext.version),{activationFunction:Ke,applyActivation:Ye}=(0,Pe.getActivationSnippet)(je),pn=`
  const ivec2 strides = ivec2(${je.strides[0]}, ${je.strides[1]});
  const ivec2 pads = ivec2(${je.pads[0]}, ${je.pads[1]});
  ${Ke}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${Xe};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${He[1]}; wInChannel++) {
      int input_channel = group_id * ${He[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${He[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${je.dilations[0]};

        if (xHeight < 0 || xHeight >= ${qe[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${He[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${je.dilations[1]};
          if (xWidth < 0 || xWidth >= ${qe[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${Be}
    ${Ye}
    ${Qe.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},Ve),{output:{dims:Je,type:Fe[0].type,textureType:Ee.TextureType.unpacked},shaderSource:pn,hasMain:!0})})(Re,ke,Se,Ce)})}},1386:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.conv2DPacked=e.conv2DPackedPointwise=void 0;const _e=t(8138),Te=t(8555),Ee=t(708);e.conv2DPackedPointwise=(xe,Pe,Re)=>{const ke=Pe[0].dims,Ce=Pe[1].dims,Se=(0,_e.calculateOutputShape)(ke,Ce,Re.dilations,Re.pads,Re.strides),Ae=xe.reshapePacked(Pe[0],[ke[1],ke[2]*ke[3]]),Ie=xe.reshapePacked(Pe[1],[Ce[0],Ce[1]]),Me=Pe.length>2?[Ie,Ae,Pe[2]]:[Ie,Ae],Fe=xe.run((0,Ee.createPackedMatmulProgramInfoLoader)(xe,Me,Re),Me);return xe.reshapePacked(Fe,Se)},e.conv2DPacked=(xe,Pe,Re)=>{const ke=Pe[0].dims,Ce=Pe[1].dims,Se=(0,_e.calculateOutputShape)(ke,Ce,Re.dilations,Re.pads,Re.strides),Ae=xe.run((0,Te.createPackedIm2ColProgramInfoLoader)(xe,Pe[0],Pe[1],Se,Re),[Pe[0]]),Ie=xe.reshapePacked(Pe[1],[Ce[0],Ce[1]*Ce[2]*Ce[3]]),Me=Pe.length===3?[Ie,Ae,Pe[2]]:[Ie,Ae],Fe=xe.run((0,Ee.createPackedMatmulProgramInfoLoader)(xe,Me,Re),Me);return xe.reshapePacked(Fe,Se)}},9663:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvTransposeAttributes=e.convTranspose=void 0;const _e=t(246),Te=t(5060),Ee=t(2039),xe=t(2823),Pe=(Ie,Me,Fe,Ve,je,Be)=>(Ie-1)*Me+Fe+(Ve-1)*je+1-Be,Re=(Ie,Me,Fe,Ve,je)=>{const Be=Math.floor(Ie/2);Me==="SAME_UPPER"?(Fe[Ve]=Be,Fe[je]=Ie-Be):Me==="SAME_LOWER"&&(Fe[Ve]=Ie-Be,Fe[je]=Be)};e.convTranspose=(Ie,Me,Fe)=>(Ae(Me,Fe),ke(Ie,Me,Fe));const ke=(Ie,Me,Fe)=>{const Ve=Se(Fe,Me);return[Ce(Ie,Me,Ve)]},Ce=(Ie,Me,Fe)=>Ie.run(((Ve,je,Be)=>{const qe=(He=je.length>2,Xe=Be.cacheKey,{name:"ConvTranspose",inputNames:He?["X","W","B"]:["X","W"],inputTypes:He?[Ee.TextureType.unpacked,Ee.TextureType.unpacked,Ee.TextureType.unpacked]:[Ee.TextureType.unpacked,Ee.TextureType.unpacked],cacheHint:Xe});var He,Xe;return Object.assign(Object.assign({},qe),{get:()=>((Je,Qe,Ke,Ye)=>{const pn=Qe.length>2?"getB(output_channel)":"0.0",un=Qe[0].dims,fn=Qe[1].dims,mn=fn[1],wn=fn[0]/Ye.group,Pn=[Qe[0].dims[0],Qe[1].dims[1]*Ye.group,...Ye.outputShape],xn=(0,Te.getGlsl)(Je.session.backend.glContext.version),{activationFunction:In,applyActivation:Ln}=(0,xe.getActivationSnippet)(Ye),$n=`
  const ivec2 strides = ivec2(${Ye.strides[0]}, ${Ye.strides[1]});
  const ivec2 pads = ivec2(${Ye.pads[0]}, ${Ye.pads[1]});
  ${In}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${mn};
    int wOutChannel = output_channel - group_id * ${mn};

    float value = ${pn};
    for (int inChannelOffset = 0; inChannelOffset < ${wn}; inChannelOffset++) {
      int input_channel = group_id * ${wn} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${fn[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${fn[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${Ye.dilations[0]}, wHOff * ${Ye.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${un[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${un[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${Ln}
    ${xn.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},Ke),{output:{dims:Pn,type:Qe[0].type,textureType:Ee.TextureType.unpacked},shaderSource:$n,hasMain:!0})})(Ve,je,qe,Be)})})(Ie,Me,Fe),Me),Se=(Ie,Me)=>{const Fe=Ie.kernelShape.slice();if(Ie.kernelShape.length===0)for(let qe=2;qe<Me[1].dims.length;++qe)Fe.push(Me[1].dims[qe]);const Ve=Ie.pads.slice(),je=Ie.outputShape.slice();((qe,He,Xe,Je,Qe,Ke,Ye,pn)=>{const un=qe.length-2,fn=pn.length===0;for(let mn=0;mn<un;++mn){const wn=fn?qe[mn+2]*Ke[mn]:pn[mn],Pn=Pe(qe[mn+2],Ke[mn],Qe[mn],He[mn],Xe[mn],wn);Re(Pn,Je,Qe,mn,mn+un),fn&&pn.push(Ke[mn]*(qe[mn+2]-1)+Ye[mn]+(He[mn]-1)*Xe[mn]+1-Qe[mn]-Qe[mn+un])}})(Me[0].dims,Fe,Ie.dilations,Ie.autoPad,Ve,Ie.strides,Ie.outputPadding,je);const Be=Object.assign({},Ie);return Object.assign(Be,{kernelShape:Fe,pads:Ve,outputShape:je,cacheKey:Ie.cacheKey}),Be};e.parseConvTransposeAttributes=Ie=>{const Me=Ie.attributes,Fe=(0,xe.parseInternalActivationAttributes)(Me),Ve=Me.getString("auto_pad","NOTSET"),je=Me.getInts("dilations",[1,1]),Be=Me.getInt("group",1),qe=Me.getInts("kernel_shape",[]),He=Me.getInts("output_padding",[0,0]),Xe=Me.getInts("output_shape",[]),Je=Me.getInts("pads",[0,0,0,0]),Qe=Me.getInts("strides",[1,1]);return(0,_e.createAttributeWithCacheKey)(Object.assign({autoPad:Ve,dilations:je,group:Be,kernelShape:qe,outputPadding:He,outputShape:Xe,pads:Je,strides:Qe},Fe))};const Ae=(Ie,Me)=>{if(!Ie||Ie.length!==2&&Ie.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(Ie[0].dims.length!==4||Ie[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(Ie[0].dims[1]!==Ie[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");const Fe=Ie[1].dims[1]*Me.group;if(Ie.length===3&&(Ie[2].dims.length!==1||Ie[2].dims[0]!==Fe))throw new Error("invalid bias");const Ve=Ie[0].dims.length-2;if(Me.dilations.length!==Ve)throw new Error(`dilations should be ${Ve}D`);if(Me.strides.length!==Ve)throw new Error(`strides should be ${Ve}D`);if(Me.pads.length!==2*Ve)throw new Error(`pads should be ${2*Ve}D`);if(Me.outputPadding.length!==Ve)throw new Error(`output_padding should be ${Ve}D`);if(Me.kernelShape.length!==0&&Me.kernelShape.length!==Ie[1].dims.length-2)throw new Error("invalid kernel shape");if(Me.outputShape.length!==0&&Me.outputShape.length!==Ie[0].dims.length-2)throw new Error("invalid output shape");if(Ie[0].type!=="float32"||Ie[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(Ie.length===3&&Ie[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}},8138:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvAttributes=e.conv=e.calculateOutputShape=void 0;const _e=t(246),Te=t(2517),Ee=t(4770),xe=t(1386),Pe=t(9828),Re=t(2823),ke=t(3248),Ce=t(5623);e.calculateOutputShape=(Ve,je,Be,qe,He)=>{const Xe=Ve[0],Je=Ve.slice(2),Qe=Je.length,Ke=je[0],Ye=je.slice(2).map((un,fn)=>un+(un-1)*(Be[fn]-1)),pn=Je.map((un,fn)=>un+qe[fn]+qe[fn+Qe]).map((un,fn)=>Math.floor((un-Ye[fn]+He[fn])/He[fn]));return[Xe,Ke].concat(...pn)},e.conv=(Ve,je,Be)=>(Fe(je,Be),Se(Ve,je,Be));const Se=(Ve,je,Be)=>{const qe=Me(Be,je),He=Ve.session.pack,Xe=qe.kernelShape[0]===1&&qe.kernelShape[1]===1;return qe.group>1?[Ve.run((0,Ee.createUnpackedGroupedConvProgramInfoLoader)(Ve,je,qe),je)]:Xe&&He?[Ae(Ve,je,qe)]:He&&je[0].dims.length===4&&je[0].dims[0]===1&&!Xe?[(0,xe.conv2DPacked)(Ve,je,qe)]:[Ie(Ve,je,qe)]},Ae=(Ve,je,Be)=>{const qe=je[0].dims,He=je[1].dims,Xe=(0,e.calculateOutputShape)(qe,He,Be.dilations,Be.pads,Be.strides),Je=Ve.reshapeUnpacked(je[0],[qe[1],qe[2]*qe[3]]),Qe=Ve.reshapeUnpacked(je[1],[He[0],He[1]]),Ke=je.length>2?[Qe,Je,je[2]]:[Qe,Je],Ye=Ve.run((0,Ce.createMatmulProgramInfoLoader)(Ke,Be),Ke);return Ve.reshapeUnpacked(Ye,Xe)},Ie=(Ve,je,Be)=>{const qe=je[0].dims,He=je[1].dims,Xe=(0,e.calculateOutputShape)(qe,He,Be.dilations,Be.pads,Be.strides),Je=Ve.run((0,ke.createIm2ColProgramInfoLoader)(Ve,je[0],je[1],Xe,Be),[je[0]]),Qe=je.length===3?[Je,je[1],je[2]]:[Je,je[1]];return Ve.run((0,Pe.createDotProductProgramInfoLoader)(Ve,je,Xe,Be),Qe)},Me=(Ve,je)=>{const Be=Ve.kernelShape.slice();if(Ve.kernelShape.length===0)for(let Xe=2;Xe<je[1].dims.length;++Xe)Be.push(je[1].dims[Xe]);const qe=Ve.pads.slice();Te.PoolConvUtil.adjustPadsBasedOnAutoPad(je[0].dims,Ve.strides,Ve.dilations,Be,qe,Ve.autoPad);const He=Object.assign({},Ve);return Object.assign(He,{kernelShape:Be,pads:qe,cacheKey:Ve.cacheKey}),He};e.parseConvAttributes=Ve=>{const je=Ve.attributes,Be=(0,Re.parseInternalActivationAttributes)(je),qe=je.getString("auto_pad","NOTSET"),He=je.getInts("dilations",[1,1]),Xe=je.getInt("group",1),Je=je.getInts("kernel_shape",[]),Qe=je.getInts("pads",[0,0,0,0]),Ke=je.getInts("strides",[1,1]);return(0,_e.createAttributeWithCacheKey)(Object.assign({autoPad:qe,dilations:He,group:Xe,kernelShape:Je,pads:Qe,strides:Ke},Be))};const Fe=(Ve,je)=>{if(!Ve||Ve.length!==2&&Ve.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(Ve[0].dims.length!==4||Ve[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(Ve[0].dims[1]!==Ve[1].dims[1]*je.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(Ve.length===3&&(Ve[2].dims.length!==1||Ve[1].dims[0]!==Ve[2].dims[0]))throw new Error("invalid bias");const Be=Ve[0].dims.length-2;if(je.dilations.length!==Be)throw new Error(`dilations should be ${Be}D`);if(je.strides.length!==Be)throw new Error(`strides should be ${Be}D`);if(je.pads.length!==2*Be)throw new Error(`pads should be ${2*Be}D`);if(je.kernelShape.length!==0&&je.kernelShape.length!==Ve[1].dims.length-2)throw new Error("invalid kernel shape");if(Ve[0].type!=="float32"||Ve[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(Ve.length===3&&Ve[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}},5193:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseDepthToSpaceAttributes=e.depthToSpace=void 0;const _e=t(3738);e.depthToSpace=(Ee,xe,Pe)=>{Te(xe);const Re=Pe.blocksize,ke=Re*Re,Ce=Pe.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],Se=Pe.mode==="DCR"?[xe[0].dims[0],Re,Re,xe[0].dims[1]/ke,xe[0].dims[2],xe[0].dims[3]]:[xe[0].dims[0],xe[0].dims[1]/ke,Re,Re,xe[0].dims[2],xe[0].dims[3]],Ae=Ee.reshapeUnpacked(xe[0],Se),Ie={perm:Ce,cacheKey:`${Ce}`},[Me]=(0,_e.transpose)(Ee,[Ae],Ie),Fe=[xe[0].dims[0],xe[0].dims[1]/ke,xe[0].dims[2]*Re,xe[0].dims[3]*Re];return[Ee.reshapeUnpacked(Me,Fe)]},e.parseDepthToSpaceAttributes=Ee=>{const xe=Ee.attributes.getInt("blocksize");if(xe<1)throw new Error(`blocksize must be >= 1, but got : ${xe} for DepthToSpace`);const Pe=Ee.attributes.getString("mode","DCR");if(Pe!=="DCR"&&Pe!=="CRD")throw new Error(`unrecognized mode: ${Pe} for DepthToSpace`);return{mode:Pe,blocksize:xe}};const Te=Ee=>{if(Ee.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${Ee.length}`);if(Ee[0].type==="string"||Ee[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},9828:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createDotProductProgramInfoLoader=void 0;const _e=t(2517),Te=t(5060),Ee=t(2039),xe=t(2823),Pe=t(3248);e.createDotProductProgramInfoLoader=(Re,ke,Ce,Se)=>{const Ae=((Ie,Me)=>({name:"ConvDotProduct",inputNames:Ie?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:Ie?[Ee.TextureType.unpacked,Ee.TextureType.packedLastDimension,Ee.TextureType.unpacked]:[Ee.TextureType.unpacked,Ee.TextureType.packedLastDimension],cacheKey:Me.activationCacheKey}))(ke.length>2,Se);return Object.assign(Object.assign({},Ae),{get:()=>((Ie,Me,Fe,Ve,je)=>{const Be=Fe[0].dims,qe=Fe[1].dims,He=[qe[0],Math.ceil(Be[1]*qe[2]*qe[3]/4)],Xe=(0,Pe.calculateIm2ColDims)(Be,qe,Ve),[Je,Qe]=Ie.calculateTextureWidthAndHeight(He,Ee.TextureType.packedLastDimension),Ke=_e.ShapeUtil.computeStrides(Xe),[Ye,pn]=Ie.calculateTextureWidthAndHeight(Xe,Ee.TextureType.packedLastDimension),un=Ve.length,fn=Fe.length<3?"0.0":"_B(b)",mn=Math.ceil(Be[1]*qe[2]*qe[3]/4),{activationFunction:wn,applyActivation:Pn}=(0,xe.getActivationSnippet)(je),xn=(0,Te.getGlsl)(Ie.session.backend.glContext.version),In=`
${wn}
float process(int indices[${un}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${Ke[0]} + im2col[1] * ${Ke[1]} + im2col[2] * ${Ke[2]};
  int kernelOffset = indices[1] * ${He[1]};
  float value = ${fn};
  for (int i = 0; i < ${mn}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${Ye}, ${pn});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${Je}, ${Qe});
    value += dot(${xn.texture2D}(Im2Col, im2colCoords), ${xn.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${Pn}
  return value;
}`;return Object.assign(Object.assign({},Me),{output:{dims:Ve,type:Fe[0].type,textureType:Ee.TextureType.unpacked},shaderSource:In})})(Re,Ae,ke,Ce,Se)})}},7992:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseFlattenAttributes=e.flatten=void 0;const _e=t(2517);e.flatten=(Ee,xe,Pe)=>{Te(xe,Pe);const Re=_e.ShapeUtil.flattenShape(xe[0].dims,Pe);return[Ee.reshapeUnpacked(xe[0],Re)]},e.parseFlattenAttributes=Ee=>Ee.attributes.getInt("axis",1);const Te=(Ee,xe)=>{if(!Ee||Ee.length!==1)throw new Error("Flatten requires 1 input.");const Pe=Ee[0].dims.length;if(Pe===0)throw new Error("scalar tensor is not supported.");if(xe<-Pe||xe>Pe)throw new Error("Invalid axis");if(Ee[0].type==="string")throw new Error("string tensor is not supported.")}},2823:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseInternalActivationAttributes=e.getActivationSnippet=void 0;const _e=t(2517),Te=t(4909);e.getActivationSnippet=function(Ee){let xe;switch(Ee.activation){case"Relu":xe=(0,Te.glslRelu)();break;case"Sigmoid":xe=(0,Te.glslSigmoid)();break;case"Clip":xe=(0,Te.glslClip)(Ee.clipMin,Ee.clipMax);break;default:return{activationFunction:"",applyActivation:""}}const Pe=xe.name;return{activationFunction:xe.body,applyActivation:`value = ${Pe}_(value);`}},e.parseInternalActivationAttributes=Ee=>{const xe=Ee.getString("activation","");if(xe==="Clip"){const[Pe,Re]=Ee.getFloats("activation_params",[_e.MIN_CLIP,_e.MAX_CLIP]);return{activation:xe,clipMax:Re,clipMin:Pe,activationCacheKey:`${xe}:${Pe},${Re}`}}return{activation:xe,activationCacheKey:xe}}},1253:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseGatherAttributes=e.gather=void 0;const _e=t(246),Te=t(782),Ee=t(2517),xe=t(2039);e.gather=(Ce,Se,Ae)=>(ke(Se,Ae.axis),[Ce.run(Re(Ce,Se,Ae),Se)]),e.parseGatherAttributes=Ce=>(0,_e.createAttributeWithCacheKey)({axis:Ce.attributes.getInt("axis",0)});const Pe={name:"Gather",inputNames:["A","B"],inputTypes:[xe.TextureType.unpacked,xe.TextureType.unpacked]},Re=(Ce,Se,Ae)=>{const Ie=Object.assign(Object.assign({},Pe),{cacheHint:Ae.cacheKey});return Object.assign(Object.assign({},Ie),{get:()=>((Me,Fe,Ve,je)=>{const Be=Ve[0].dims.slice(),qe=Ve[1].dims.slice(),He=new Array(Be.length+qe.length-1);je=Ee.ShapeUtil.normalizeAxis(je,Be.length);const Xe=[];for(let Qe=0;Qe<He.length;Qe++)Qe<je?(He[Qe]=Be[Qe],Xe.push(`inputIdx[${Qe}] = outputIdx[${Qe}];`)):Qe<je+qe.length?(He[Qe]=qe[Qe-je],Xe.push(`indexDataIdx[${Qe-je}] = outputIdx[${Qe}];`)):(He[Qe]=Be[Qe-qe.length+1],Xe.push(`inputIdx[${Qe-qe.length+1}] = outputIdx[${Qe}];`));const Je=`
      float process(int outputIdx[${He.length||1}]) {
        int inputIdx[${Be.length}];
        int indexDataIdx[${qe.length||1}];
        indexDataIdx[0] = 0;
        ${Xe.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${je}] = idx < 0 ? idx + ${Be[je]} : idx;
        return _A(inputIdx);
      }`;return Object.assign(Object.assign({},Fe),{output:{dims:He,type:Ve[0].type,textureType:xe.TextureType.unpacked},shaderSource:Je})})(0,Ie,Se,Ae.axis)})},ke=(Ce,Se)=>{if(!Ce||Ce.length!==2)throw new Error("Gather requires 2 inputs.");const Ae=Ce[0].dims.length;if(Ae<1)throw new Error("Invalid input shape.");if(Se<-Ae||Se>Ae-1)throw new Error("Invalid axis.");if(Te.NUMBER_TYPES.indexOf(Ce[0].type)===-1)throw new Error("Invaid input type.");if(Ce[1].type!=="int32"&&Ce[1].type!=="int16")throw new Error("Invaid input type.")}},4776:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseGemmAttributesV11=e.parseGemmAttributesV7=e.gemm=void 0;const _e=t(246),Te=t(2517),Ee=t(2039);e.gemm=(Ce,Se,Ae)=>(ke(Se,Ae),[Ce.run(Pe(Se,Ae),Se)]);const xe=(Ce,Se)=>{const Ae=Ce.attributes.getInt("transA",0)!==0,Ie=Ce.attributes.getInt("transB",0)!==0,Me=Ce.attributes.getFloat("alpha",1),Fe=Ce.attributes.getFloat("beta",1);return(0,_e.createAttributeWithCacheKey)({transA:Ae,transB:Ie,alpha:Me,beta:Fe,isOptionalC:Se})};e.parseGemmAttributesV7=Ce=>xe(Ce,!1),e.parseGemmAttributesV11=Ce=>xe(Ce,!0);const Pe=(Ce,Se)=>{const Ae={name:"Gemm",inputNames:Ce.length===3?["A","B","C"]:["A","B"],inputTypes:Ce.length===3?[Ee.TextureType.unpacked,Ee.TextureType.unpacked,Ee.TextureType.unpacked]:[Ee.TextureType.unpacked,Ee.TextureType.unpacked],key:Se.cacheKey};return Object.assign(Object.assign({},Ae),{get:()=>Re(Ae,Ce,Se)})},Re=(Ce,Se,Ae)=>{const Ie=Se[0].dims.slice(),Me=Se[1].dims.slice(),[Fe,Ve]=Te.GemmUtil.getShapeOfGemmResult(Ie,Ae.transA,Me,Ae.transB,Se.length===3?Se[2].dims:void 0),je=[Fe,Ve];if(!je)throw new Error("Can't use gemm on the given tensors");let Be=Ie[Ie.length-1],qe="";Ae.transA&&(Be=Ie[0]),Ae.transA&&Ae.transB?qe="value += _A_T(a) * _B_T(b);":Ae.transA&&!Ae.transB?qe="value += _A_T(a) * _B(b);":!Ae.transA&&Ae.transB?qe="value += _A(a) * _B_T(b);":Ae.transA||Ae.transB||(qe="value += _A(a) * _B(b);");const He=je.length,Xe=`
      float process(int indices[${He}]) {
          int a[${He}];
          int b[${He}];
          ${Se.length===3?`int c[${Se[2].dims.length}];`:""}

          copyVec(indices, a);
          copyVec(indices, b);
          ${Se.length===3?"bcastIndices_C(indices, c);":""}

          float value = 0.0;
          for (int k=0; k<${Be}; ++k) {
              a[${He-1}] = k;
              b[${He-2}] = k;
              ${qe}
          }

          value = value * alpha;
          ${Se.length===3?"value += beta * _C(c);":""}
          return value;
      }`;return Object.assign(Object.assign({},Ce),{output:{dims:je,type:Se[0].type,textureType:Ee.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:Ae.alpha},{name:"beta",type:"float",data:Ae.beta}],shaderSource:Xe})},ke=(Ce,Se)=>{if(!Ce)throw new Error("Input is missing");if(Se.isOptionalC&&(Ce.length<2||Ce.length>3))throw new Error("Invaid input shape.");if(!Se.isOptionalC&&Ce.length!==3)throw new Error("Gemm requires 3 inputs");if(Ce.length===3&&Ce[2].dims.length!==1&&Ce[2].dims.length!==2)throw new Error("Invalid input shape of C");if(Ce[0].type!=="float32"&&Ce[0].type!=="float64"||Ce[1].type!=="float32"&&Ce[1].type!=="float64"||Ce.length===3&&Ce[2].type!=="float32"&&Ce[2].type!=="float64")throw new Error("Invalid input type.");if(Ce[0].type!==Ce[1].type||Ce.length===3&&Ce[0].type!==Ce[2].type)throw new Error("Input types are mismatched")}},8555:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedIm2ColProgramInfoLoader=void 0;const _e=t(5060),Te=t(2039),Ee=t(2827);e.createPackedIm2ColProgramInfoLoader=(xe,Pe,Re,ke,Ce)=>{const Se=(Ae=Ce.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[Te.TextureType.packed],cacheHint:Ae});var Ae;return Object.assign(Object.assign({},Se),{get:()=>((Ie,Me,Fe,Ve,je,Be)=>{const qe=Fe.dims,He=Ve.dims,Xe=je.length,Je=[He[1]*He[2]*He[3],je[2]*je[3]],Qe=He[2]*He[3],Ke=(0,Ee.unpackFromChannel)(),Ye=(0,_e.getGlsl)(Ie.session.backend.glContext.version);let pn="";for(let fn=0;fn<=1;fn++)for(let mn=0;mn<=1;mn++)pn+=`
            blockIndex = rc.x + ${mn};
            pos = rc.y + ${fn};

            if(blockIndex < ${Je[1]} && pos < ${Je[0]}) {
              offsetY = int(blockIndex / (${je[Xe-1]})) * ${Be.strides[0]} -
                ${Be.pads[0]};
              d0 = offsetY + ${Be.dilations[0]} * (imod(pos, ${Qe}) / ${He[2]});

              if(d0 < ${qe[2]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${je[Xe-1]}) * ${Be.strides[1]} -
                  ${Be.pads[1]};
                d1 = offsetX + ${Be.dilations[1]} * imod(imod(pos, ${Qe}), ${He[2]});

                if(d1 < ${qe[3]} && d1 >= 0) {

                  ch = int(float(pos)/ ${Qe}.);
                    innerDims = vec2(d0, d1);
                    result[${2*fn+mn}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;const un=`
      ${Ke}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${pn}
          ${Ye.output} = result;
      }
            `;return Object.assign(Object.assign({},Me),{output:{dims:Je,type:Fe.type,textureType:Te.TextureType.packed},shaderSource:un,hasMain:!0})})(xe,Se,Pe,Re,ke,Ce)})}},3248:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.calculateIm2ColDims=e.createIm2ColProgramInfoLoader=void 0;const _e=t(2039);e.createIm2ColProgramInfoLoader=(Te,Ee,xe,Pe,Re)=>{const ke=(Ce=Re.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[_e.TextureType.unpacked],cacheHint:Ce});var Ce;return Object.assign(Object.assign({},ke),{get:()=>((Se,Ae,Ie,Me,Fe,Ve)=>{const je=Ie.dims,Be=Me.dims,qe=Fe.length,He=(0,e.calculateIm2ColDims)(je,Be,Fe,4),Xe=`
        const int XC = ${je[1]};
        const int XH = ${je[2]};
        const int XW = ${je[3]};
        const int KH = ${Ve.kernelShape[0]};
        const int KW = ${Ve.kernelShape[1]};
        const int dilationH = ${Ve.dilations[0]};
        const int dilationW = ${Ve.dilations[1]};
        const int strideH = ${Ve.strides[0]};
        const int strideW = ${Ve.strides[1]};
        const int padH = ${Ve.pads[0]};
        const int padW = ${Ve.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${qe}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${je.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return Object.assign(Object.assign({},Ae),{output:{dims:He,type:Ie.type,textureType:_e.TextureType.packedLastDimension},shaderSource:Xe})})(0,ke,Ee,xe,Pe,Re)})},e.calculateIm2ColDims=(Te,Ee,xe,Pe=4)=>[xe[0],xe[2],xe[3],Math.ceil(Te[1]*Ee[2]*Ee[3]/Pe)]},6572:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseImageScalerAttributes=e.imageScaler=void 0;const _e=t(246),Te=t(2039);e.imageScaler=(ke,Ce,Se)=>(Re(Ce),[ke.run(xe(ke,Ce,Se),Ce)]),e.parseImageScalerAttributes=ke=>{const Ce=ke.attributes.getFloat("scale"),Se=ke.attributes.getFloats("bias");return(0,_e.createAttributeWithCacheKey)({scale:Ce,bias:Se})};const Ee={name:"ImageScaler",inputNames:["X"],inputTypes:[Te.TextureType.unpacked]},xe=(ke,Ce,Se)=>{const Ae=Object.assign(Object.assign({},Ee),{cacheHint:Se.cacheKey});return Object.assign(Object.assign({},Ae),{get:()=>((Ie,Me,Fe,Ve)=>{const je=Fe[0].dims.slice(),Be=je.length,qe=`
      ${Pe(Ve.bias.length)}
      float process(int indices[${Be}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return Object.assign(Object.assign({},Me),{output:{dims:je,type:Fe[0].type,textureType:Te.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:Ve.bias.length,data:Ve.bias},{name:"scale",type:"float",data:Ve.scale}],shaderSource:qe})})(0,Ae,Ce,Se)})},Pe=ke=>{const Ce=[`float getBias(float bias[${ke}], int channel) {`];for(let Se=0;Se<ke;++Se)Se===0?Ce.push(`	if (channel == ${Se}) { return bias[${Se}]; }`):Se===ke-1?Ce.push(`	else { return bias[${Se}]; }`):Ce.push(`	else if (channel == ${Se}) { return bias[${Se}]; }`);return Ce.push("	}"),Ce.join(`
`)},Re=ke=>{if(!ke||ke.length!==1)throw new Error("ImageScaler requires 1 input.");if(ke[0].dims.length!==4)throw new Error("Invalid input shape.");if(ke[0].type!=="float32"&&ke[0].type!=="float64")throw new Error("Invalid input type.")}},3346:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseInstanceNormalizationAttributes=e.instanceNormalization=void 0;const _e=t(5060),Te=t(2039);e.instanceNormalization=(Ce,Se,Ae)=>{ke(Se);const Ie=Ce.run(xe(Se[0]),Se);return[Ce.run(Re(Ce,Se[0],Ae,Ie.dims),[Se[0],Ie,Se[1],Se[2]])]},e.parseInstanceNormalizationAttributes=Ce=>Ce.attributes.getFloat("epsilon",1e-5);const Ee={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[Te.TextureType.unpacked]},xe=Ce=>Object.assign(Object.assign({},Ee),{get:()=>((Se,Ae)=>{const Ie=Ae.dims.slice(),Me=Ie[1],Fe=Ie[2]*Ie[3],Ve=[Ie[0],Me],je=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${Ie[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${Ie[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${Fe});
        temp = 0.0;
        for(int a2=0; a2<${Ie[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${Ie[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${Fe});

        return v;
      }`;return Object.assign(Object.assign({},Se),{output:{dims:Ve,type:Ae.type,textureType:Te.TextureType.packedLastDimension},shaderSource:je})})(Ee,Ce)}),Pe={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[Te.TextureType.unpacked,Te.TextureType.packedLastDimension,Te.TextureType.unpacked,Te.TextureType.unpacked]},Re=(Ce,Se,Ae,Ie)=>{const Me=Object.assign(Object.assign({},Pe),{cacheHint:`${Ae}`});return Object.assign(Object.assign({},Me),{get:()=>((Fe,Ve,je,Be,qe)=>{const He=(0,_e.getGlsl)(Fe.session.backend.glContext.version),[Xe,Je]=Fe.calculateTextureWidthAndHeight(qe,Te.TextureType.packedLastDimension),[Qe,Ke]=[Xe/4,Je],Ye=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${Qe}, ${Ke});
        return ${He.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return Object.assign(Object.assign({},Ve),{output:{dims:je.dims,type:je.type,textureType:Te.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:Be}],shaderSource:Ye})})(Ce,Me,Se,Ae,Ie)})},ke=Ce=>{if(!Ce||Ce.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");const Se=Ce[0],Ae=Ce[1],Ie=Ce[2];if(Se.dims.length<3||Ae.dims.length!==1||Ie.dims.length!==1)throw new Error("Invalid input shape.");if(Ae.dims[0]!==Se.dims[1]||Ie.dims[0]!==Se.dims[1])throw new Error("Input shapes are mismatched.");if(Se.type!=="float32"&&Se.type!=="float64"||Ae.type!=="float32"&&Ae.type!=="float64"||Ie.type!=="float32"&&Ie.type!=="float64")throw new Error("Invalid input type.");if(Ce[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}},708:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedMatmulProgramInfoLoader=void 0;const _e=t(2517),Te=t(5060),Ee=t(2039),xe=t(9390),Pe=t(2823),Re=t(5623);e.createPackedMatmulProgramInfoLoader=(ke,Ce,Se)=>{const Ae=(Ie=Ce.length>2,Me=Se.activationCacheKey,{name:"MatMul (packed)",inputNames:Ie?["A","B","Bias"]:["A","B"],inputTypes:Ie?[Ee.TextureType.packed,Ee.TextureType.packed,Ee.TextureType.packed]:[Ee.TextureType.packed,Ee.TextureType.packed],cacheHint:Me});var Ie,Me;return Object.assign(Object.assign({},Ae),{get:()=>((Fe,Ve,je,Be)=>{const qe=je.length>2,He=qe?"value += getBiasForMatmul();":"",Xe=je[0].dims,Je=je[1].dims,Qe=_e.BroadcastUtil.calcShape(Xe,Je,!0),Ke=!_e.ShapeUtil.areEqual(je[0].dims,je[1].dims);if(!Qe)throw new Error("Can't use matmul on the given tensors");const Ye=Xe[Xe.length-1],pn=Math.ceil(Ye/2),un=Xe.length,fn=Je.length,mn=(0,Te.getGlsl)(Fe.session.backend.glContext.version),wn=(0,xe.getCoordsDataType)(Qe.length),Pn=Qe.length,xn=(0,xe.getGlChannels)(),{activationFunction:In,applyActivation:Ln}=(0,Pe.getActivationSnippet)(Be),$n=qe?`${(0,Re.getBiasForMatmul)(wn,xn,je[2].dims,Qe,!0)}`:"",Sn=Ke?`${function(Un,zn,Hn,Jn){let nr=[],or=[];const Sr=Hn[0].dims,kr=Hn[1].dims,Vr=Sr.length,Lr=kr.length,Qr=Jn.length,wr=Qr-Vr,Yn=Qr-Lr;nr=Sr.map((Fr,li)=>`coords.${zn[li+wr]}`),nr[Vr-1]="i*2",nr.join(", "),or=kr.map((Fr,li)=>`coords.${zn[li+Yn]}`),or[Lr-2]="i*2",or.join(", ");const gi=_e.BroadcastUtil.getBroadcastDims(Sr,Jn),ui=_e.BroadcastUtil.getBroadcastDims(kr,Jn),Dr=gi.map(Fr=>`coords.${zn[Fr+wr]} = 0;`).join(`
`),$r=ui.map(Fr=>`coords.${zn[Fr+Yn]} = 0;`).join(`
`),Kr=`int lastDim = coords.${zn[Qr-1]};
  coords.${zn[Qr-1]} = coords.${zn[Qr-2]};
  coords.${zn[Qr-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${Un} coords = getOutputCoords();
  ${Kr}
  ${Dr}
  vec4 outputValue = getA(${nr});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${Un} coords = getOutputCoords();
  ${Kr}
  ${$r}
  vec4 outputValue = getB(${or});
  return outputValue;
}`}(wn,xn,je,Qe)}`:"",Bn=Ke?"getAAtOutCoordsMatmul(i)":`getA(${function(Un,zn){let Hn="";for(let Jn=0;Jn<zn-2;Jn++)Hn+=`rc.${Un[Jn]}, `;return Hn+=`rc.${Un[zn-2]}, i*2`,Hn}(xn,un)})`,Tn=Ke?"getBAtOutCoordsMatmul(i)":`getB(${function(Un,zn){let Hn="";for(let Jn=0;Jn<zn-2;Jn++)Hn+=`rc.${Un[Jn]}, `;return Hn+=`i*2, rc.${Un[zn-1]}`,Hn}(xn,fn)})`,vn=`
            ${Sn}
            ${$n}
            ${In}
            void main() {
              ${Ke?"":`${wn} rc =
          getOutputCoords(); int lastDim = rc.${xn[Pn-1]}; rc.${xn[Pn-1]} =
          rc.${xn[Pn-2]}; rc.${xn[Pn-2]} = lastDim;
      `}

              vec4 value = vec4(0);
              for (int i = 0; i < ${pn}; i++) {
                vec4 a = ${Bn};
                vec4 b = ${Tn};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${He}
              ${Ln}
              ${mn.output} = value;
            }`;return Object.assign(Object.assign({},Ve),{output:{dims:Qe,type:je[0].type,textureType:Ee.TextureType.packed},shaderSource:vn,hasMain:!0})})(ke,Ae,Ce,Se)})}},5623:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBiasForMatmul=e.createMatmulProgramInfoLoader=e.parseMatMulAttributes=e.matMul=void 0;const _e=t(2517),Te=t(2039),Ee=t(9390),xe=t(2823),Pe=t(708);function Re(Se,Ae){const Ie=(Me=Se.length>2,Fe=Ae.activationCacheKey,{name:"MatMul",inputNames:Me?["A","B","Bias"]:["A","B"],inputTypes:Me?[Te.TextureType.unpacked,Te.TextureType.unpacked,Te.TextureType.unpacked]:[Te.TextureType.unpacked,Te.TextureType.unpacked],cacheHint:Fe});var Me,Fe;return Object.assign(Object.assign({},Ie),{get:()=>function(Ve,je,Be){const qe=je[0].dims,He=je[1].dims,Xe=_e.BroadcastUtil.calcShape(qe,He,!0);if(!Xe)throw new Error("Can't use matmul on the given tensors");const Je=(0,Ee.getCoordsDataType)(Xe.length),Qe=(0,Ee.getGlChannels)(),{activationFunction:Ke,applyActivation:Ye}=(0,xe.getActivationSnippet)(Be),pn=je.length>2,un=pn?"value += getBiasForMatmul();":"",fn=pn?`${Ce(Je,Qe,je[2].dims,Xe,!1)}`:"",mn=Xe.length,wn=qe.length,Pn=He.length,xn=`
    ${Ke}
    ${fn}
    float process(int indices[${mn}]) {
        int a[${wn}];
        int b[${Pn}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${qe[qe.length-1]}; ++k) {
            a[${wn-1}] = k;
            b[${Pn-2}] = k;
            value += _A(a) * _B(b);
        }
        ${un}
        ${Ye}
        return value;
    }`;return Object.assign(Object.assign({},Ve),{output:{dims:Xe,type:je[0].type,textureType:Te.TextureType.unpacked},shaderSource:xn})}(Ie,Se,Ae)})}e.matMul=(Se,Ae,Ie)=>(ke(Ae),Se.session.pack?[Se.run((0,Pe.createPackedMatmulProgramInfoLoader)(Se,Ae,Ie),Ae)]:[Se.run(Re(Ae,Ie),Ae)]),e.parseMatMulAttributes=Se=>(0,xe.parseInternalActivationAttributes)(Se.attributes),e.createMatmulProgramInfoLoader=Re;const ke=Se=>{if(!Se||Se.length!==2)throw new Error("MatMul requires 2 inputs.");if(Se[0].dims[Se[0].dims.length-1]!==Se[1].dims[Se[1].dims.length-2])throw new Error("shared dimension does not match.");if(Se[0].type!=="float32"&&Se[0].type!=="float64"||Se[1].type!=="float32"&&Se[1].type!=="float64")throw new Error("inputs should be float type");if(Se[0].type!==Se[1].type)throw new Error("inputs types should match")};function Ce(Se,Ae,Ie,Me,Fe){let Ve="";const je=Ie.length,Be=Me.length,qe=Be-je;Ve=Be<2&&je>0?"coords":Ie.map((Je,Qe)=>`coords.${Ae[Qe+qe]}`).join(", ");const He=_e.BroadcastUtil.getBroadcastDims(Ie,Me).map(Je=>`coords.${Ae[Je+qe]} = 0;`).join(`
`);let Xe="vec4(outputValue.xx, outputValue.yy)";return _e.ShapeUtil.size(Ie)===1&&(Xe="vec4(outputValue.x)"),Fe?`
vec4 getBiasForMatmul() {
  ${Se} coords = getOutputCoords();
  ${He}
  vec4 outputValue = getBias(${Ve});
  return ${Xe};
}`:`
float getBiasForMatmul() {
  ${Se} coords = getOutputCoords();
  ${He}
  return getBias(coords.x);
}`}e.getBiasForMatmul=Ce},2403:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackProgramInfoLoader=void 0;const _e=t(5060),Te=t(2039),Ee=t(9390),xe=t(2827),Pe={name:"pack",inputNames:["A"],inputTypes:[Te.TextureType.unpackedReversed]};e.createPackProgramInfoLoader=(Re,ke)=>Object.assign(Object.assign({},Pe),{get:()=>((Ce,Se)=>{const Ae=(0,_e.getGlsl)(Ce.session.backend.glContext.version),Ie=Se.dims,Me=Ie.length,Fe=Se.dims.length,Ve=(0,Ee.getCoordsDataType)(Fe),je=(0,xe.getChannels)("rc",Fe),Be=(qe=Fe,He=je,Xe=Ie[Ie.length-2],Je=Ie[Ie.length-1],qe===0||qe===1?"":`
    int r = ${He[qe-2]};
    int c = ${He[qe-1]};
    int rp1 = ${He[qe-2]} + 1;
    int cp1 = ${He[qe-1]} + 1;
    bool rEdge = rp1 >= ${Je};
    bool cEdge = cp1 >= ${Xe};
    `);var qe,He,Xe,Je;let Qe;Qe=Me===0?[1,1]:Me===1?[Ie[0],1]:[Ie[Fe-1],Ie[Fe-2]];const Ke=function(un,fn,mn){if(un===0)return"false";if(un===1)return`rc > ${fn[0]}`;let wn="";for(let Pn=un-2;Pn<un;Pn++)wn+=`${mn[Pn]} >= ${fn[Pn-un+2]}`,Pn<un-1&&(wn+="||");return wn}(Fe,Qe,je),Ye=function(un,fn){const mn=un.length;if(mn===0)return"getA(), 0, 0, 0";if(mn===1)return`getA(rc),
            rc + 1 >= ${un[0]} ? 0. : getA(rc + 1),
            0, 0`;let wn="";if(mn>2)for(let Pn=0;Pn<mn-2;++Pn)wn+=`${fn[Pn]},`;return`getA(${wn}r, c),
          rEdge ? 0. : getA(${wn}rp1, c),
          cEdge ? 0. : getA(${wn}r, cp1),
          rEdge || cEdge ? 0. : getA(${wn}rp1, cp1)`}(Ie,je),pn=`
        void main() {
          ${Ve} rc = getOutputCoords();

          if(${Ke}) {
            ${Ae.output} = vec4(0);
          } else {
            ${Be}

            ${Ae.output} = vec4(${Ye});
          }
        }
      `;return Object.assign(Object.assign({},Pe),{hasMain:!0,output:{dims:Se.dims,type:Se.type,textureType:Te.TextureType.packed},shaderSource:pn})})(Re,ke)})},2827:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.unpackFromChannel=e.getChannels=e.getVecChannels=void 0;const _e=t(9390);function Te(Ee,xe){return(0,_e.getGlChannels)(xe).map(Pe=>`${Ee}.${Pe}`)}e.getVecChannels=Te,e.getChannels=function(Ee,xe){return xe===1?[Ee]:Te(Ee,xe)},e.unpackFromChannel=function(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}},2870:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parsePadAttributesV11=e.padV11=e.parsePadAttributesV2=e.padV2=void 0;const _e=t(246),Te=t(2517),Ee=t(5060),xe=t(2039),Pe={name:"Pad",inputNames:["A"],inputTypes:[xe.TextureType.unpacked]};e.padV2=(Ve,je,Be)=>(Ce(je),[Ve.run(Object.assign(Object.assign({},Pe),{cacheHint:Be.cacheKey,get:()=>ke(Ve,je[0],Be)}),je)]),e.parsePadAttributesV2=Ve=>{const je=Ve.attributes.getString("mode","constant"),Be=Ve.attributes.getFloat("value",0),qe=Ve.attributes.getInts("pads");return(0,_e.createAttributeWithCacheKey)({mode:je,value:Be,pads:qe})},e.padV11=(Ve,je,Be)=>{Se(je);const qe=Re(Ve,je,Be);return(0,e.padV2)(Ve,[je[0]],qe)},e.parsePadAttributesV11=Ve=>Ve.attributes.getString("mode","constant");const Re=(Ve,je,Be)=>{if(!Ve.session.isInitializer(je[1].dataId)||je.length>=3&&!Ve.session.isInitializer(je[2].dataId))throw new Error("dynamic pad attributes are not allowed");const qe=Array.from(je[1].integerData),He=je.length>=3?je[2].floatData[0]:0;return(0,_e.createAttributeWithCacheKey)({mode:Be,pads:qe,value:He})},ke=(Ve,je,Be)=>{const qe=Te.ShapeUtil.padShape(je.dims.slice(),Be.pads),He=qe.length,Xe=`
      ${Ae(Ve,je,Be)}
      float process(int[${He}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[xe.TextureType.unpacked],output:{dims:qe,type:je.type,textureType:xe.TextureType.unpacked},shaderSource:Xe}},Ce=Ve=>{if(!Ve||Ve.length!==1)throw new Error("Pad requires 1 input");if(Ve[0].type!=="float32"&&Ve[0].type!=="float64")throw new Error("Invalid input type.")},Se=Ve=>{if(!Ve||Ve.length!==2&&Ve.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(Ve[1].type!=="int32")throw new Error("Invalid input type.");if(Ve.length>=3&&Ve[2].type==="string")throw new Error("Invalid input type.")},Ae=(Ve,je,Be)=>{const qe=(0,Ee.getGlsl)(Ve.session.backend.glContext.version),[He,Xe]=Ve.calculateTextureWidthAndHeight(je.dims,xe.TextureType.unpacked),Je=Te.ShapeUtil.computeStrides(je.dims);switch(Be.mode){case"constant":return Ie(qe,je.dims,Je,He,Xe,Be.pads,Be.value);case"reflect":return Me(qe,je.dims,Je,He,Xe,Be.pads);case"edge":return Fe(qe,je.dims,Je,He,Xe,Be.pads);default:throw new Error("Invalid mode")}},Ie=(Ve,je,Be,qe,He,Xe,Je)=>{const Qe=je.length;let Ke="";for(let Ye=Qe-1;Ye>=0;--Ye)Ke+=`
        k = m[${Ye}] - ${Xe[Ye]};
        if (k < 0)  return constant;
        if (k >= ${je[Ye]}) return constant;
        offset += k * ${Be[Ye]};
        `;return`
      float padA(int m[${Qe}]) {
        const float constant = float(${Je});
        int offset = 0;
        int k = 0;
        ${Ke}
        vec2 coords = offsetToCoords(offset, ${qe}, ${He});
        float value = getColorAsFloat(${Ve.texture2D}(A, coords));
        return value;
      }
      `},Me=(Ve,je,Be,qe,He,Xe)=>{const Je=je.length;let Qe="";for(let Ke=Je-1;Ke>=0;--Ke)Qe+=`
        k = m[${Ke}] - ${Xe[Ke]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(je[Ke]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${je[Ke]}) { k = _2n_1 - k; }
        }
        offset += k * ${Be[Ke]};
        `;return`
      float padA(int m[${Je}]) {
        int offset = 0;
        int k = 0;
        ${Qe}
        vec2 coords = offsetToCoords(offset, ${qe}, ${He});
        float value = getColorAsFloat(${Ve.texture2D}(A, coords));
        return value;
      }
      `},Fe=(Ve,je,Be,qe,He,Xe)=>{const Je=je.length;let Qe="";for(let Ke=Je-1;Ke>=0;--Ke)Qe+=`
        k = m[${Ke}] - ${Xe[Ke]};
        if (k < 0)  k = 0;
        if (k >= ${je[Ke]}) k = ${je[Ke]-1};
        offset += k * ${Be[Ke]};
      `;return`
      float padA(int m[${Je}]) {
        int offset = 0;
        int k = 0;
        ${Qe}
        vec2 coords = offsetToCoords(offset, ${qe}, ${He});
        float value = getColorAsFloat(${Ve.texture2D}(A, coords));
        return value;
      }
      `}},2143:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.globalMaxPool=e.parseMaxPoolAttributes=e.maxPool=e.parseGlobalAveragePoolAttributes=e.globalAveragePool=e.parseAveragePoolAttributes=e.averagePool=void 0;const _e=t(246),Te=t(2517),Ee=t(2039);e.averagePool=(Fe,Ve,je)=>{Se(Ve);const Be={name:"AveragePool",inputNames:["X"],inputTypes:[Ee.TextureType.unpacked],cacheHint:je.cacheKey};return[Fe.run(Object.assign(Object.assign({},Be),{get:()=>xe(Ve,Be,!1,je)}),Ve)]},e.parseAveragePoolAttributes=Fe=>{const Ve=Fe.attributes.getString("auto_pad","NOTSET"),je=Fe.attributes.getInt("ceil_mode",0),Be=Fe.attributes.getInt("count_include_pad",0)!==0,qe=Fe.attributes.getInts("kernel_shape"),He=Fe.attributes.getInts("strides",[]),Xe=Fe.attributes.getInts("pads",[]);if(je!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,_e.createAttributeWithCacheKey)({autoPad:Ve,ceilMode:je,countIncludePad:Be,kernelShape:qe,strides:He,pads:Xe})};const xe=(Fe,Ve,je,Be)=>{const[qe,He]=Re(Fe,Be,je),Xe=Te.ShapeUtil.size(qe.kernelShape);let Je="";qe.countIncludePad?Je+=`value /= float(${Xe});`:Je+=`value /= float(${Xe} - pad);`;const Qe=`
        ${Ae(Fe[0].dims,qe,"value += _X(x);",Je,"0.0")}
      `;return Object.assign(Object.assign({},Ve),{output:{dims:He,type:Fe[0].type,textureType:Ee.TextureType.unpacked},shaderSource:Qe})};e.globalAveragePool=(Fe,Ve,je)=>{Se(Ve);const Be={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[Ee.TextureType.unpacked],cacheHint:`${je.countIncludePad}`};return[Fe.run(Object.assign(Object.assign({},Be),{get:()=>xe(Ve,Be,!0,je)}),Ve)]},e.parseGlobalAveragePoolAttributes=Fe=>{const Ve=Fe.attributes.getInt("count_include_pad",0)!==0;return(0,_e.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:Ve,kernelShape:[],strides:[],pads:[]})},e.maxPool=(Fe,Ve,je)=>{Se(Ve);const Be={name:"MaxPool",inputNames:["X"],inputTypes:[Ee.TextureType.unpacked],cacheHint:je.cacheKey};return[Fe.run(Object.assign(Object.assign({},Be),{get:()=>Pe(Ve,Be,!1,je)}),Ve)]},e.parseMaxPoolAttributes=Fe=>{const Ve=Fe.attributes.getString("auto_pad","NOTSET"),je=Fe.attributes.getInt("ceil_mode",0),Be=Fe.attributes.getInts("kernel_shape"),qe=Fe.attributes.getInts("strides",[]),He=Fe.attributes.getInts("pads",[]),Xe=Fe.attributes.getInt("storage_order",0),Je=Fe.attributes.getInts("dilations",[]);if(Xe!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(je!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,_e.createAttributeWithCacheKey)({autoPad:Ve,ceilMode:je,countIncludePad:!1,kernelShape:Be,strides:qe,pads:He,storageOrder:Xe,dilations:Je})};const Pe=(Fe,Ve,je,Be)=>{const[qe,He]=Re(Fe,Be,je),Xe=`
      ${Ae(Fe[0].dims,qe,`
      value = max(_X(x), value);
    `,"","-1e5")}
    `;return Object.assign(Object.assign({},Ve),{output:{dims:He,type:Fe[0].type,textureType:Ee.TextureType.unpacked},shaderSource:Xe})},Re=(Fe,Ve,je)=>{const Be=Fe[0].dims.slice(),qe=Object.hasOwnProperty.call(Ve,"dilations"),He=Ve.kernelShape.slice(),Xe=Ve.strides.slice(),Je=qe?Ve.dilations.slice():[],Qe=Ve.pads.slice();Te.PoolConvUtil.adjustPoolAttributes(je,Be,He,Xe,Je,Qe);const Ke=Te.PoolConvUtil.computePoolOutputShape(je,Be,Xe,Je,He,Qe,Ve.autoPad),Ye=Object.assign({},Ve);return qe?Object.assign(Ye,{kernelShape:He,strides:Xe,pads:Qe,dilations:Je,cacheKey:Ve.cacheKey}):Object.assign(Ye,{kernelShape:He,strides:Xe,pads:Qe,cacheKey:Ve.cacheKey}),[Ye,Ke]},ke={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},Ce={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[Ee.TextureType.unpacked]};e.globalMaxPool=(Fe,Ve)=>(Se(Ve),[Fe.run(Object.assign(Object.assign({},Ce),{get:()=>Pe(Ve,Ce,!0,ke)}),Ve)]);const Se=Fe=>{if(!Fe||Fe.length!==1)throw new Error("Pool ops requires 1 input.");if(Fe[0].type!=="float32"&&Fe[0].type!=="float64")throw new Error("Invalid input type.")},Ae=(Fe,Ve,je,Be,qe)=>{const He=Fe.length;if(Ve.kernelShape.length<=2){const Xe=Ve.kernelShape[Ve.kernelShape.length-1],Je=Ve.strides[Ve.strides.length-1],Qe=Ve.pads[Ve.pads.length/2-1],Ke=Ve.pads[Ve.pads.length-1],Ye=Fe[He-1];let pn="",un="",fn="";if(pn=Qe+Ke!==0?`
          for (int i = 0; i < ${Xe}; i++) {
            x[${He} - 1] = indices[${He} - 1] * ${Je} - ${Qe} + i;
            if (x[${He} - 1] < 0 || x[${He} - 1] >= ${Ye}) {
              pad++;
              continue;
            }
            ${je}
          }`:`
          for (int i = 0; i < ${Xe}; i++) {
            x[${He} - 1] = indices[${He} - 1] * ${Je} - ${Qe} + i;
            ${je}
          }`,Ve.kernelShape.length===2){const mn=Ve.kernelShape[Ve.kernelShape.length-2],wn=Ve.strides[Ve.strides.length-2],Pn=Ve.pads[Ve.pads.length/2-2],xn=Ve.pads[Ve.pads.length-2],In=Fe[He-2];un=Pn+xn!==0?`
            for (int j = 0; j < ${mn}; j++) {
              x[${He} - 2] = indices[${He} - 2] * ${wn} - ${Pn} + j;
              if (x[${He} - 2] < 0 || x[${He} - 2] >= ${In}) {
                pad+= ${Xe};
                continue;
              }
          `:`
            for (int j = 0; j < ${mn}; j++) {
              x[${He} - 2] = indices[${He} - 2] * ${wn} - ${Pn} + j;
            `,fn=`
          }
        `}return`
        float process(int indices[${He}]) {
          int x[${He}];
          copyVec(indices, x);

          float value = ${qe};
          int pad = 0;
          ${un}
          ${pn}
          ${fn}
          ${Be}
          return value;
        }
      `}{const Xe=Te.ShapeUtil.size(Ve.kernelShape),Je=Te.ShapeUtil.computeStrides(Ve.kernelShape),Qe=Je.length,Ke=Ve.pads.length,Ye=Me(Qe),pn=Ie(Fe,"inputDims"),un=Ie(Ve.pads,"pads"),fn=Ie(Je,"kernelStrides"),mn=Ie(Ve.strides,"strides");let wn="";return wn=Ve.pads.reduce((Pn,xn)=>Pn+xn)?`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${je}
          }`:`
          }
          ${je}
        `,`
        ${Ye}
        float process(int indices[${He}]) {
          int x[${He}];
          copyVec(indices, x);
          int offset[${Qe}];
          int pads[${Ke}];
          int inputDims[${He}];
          int kernelStrides[${Qe}];
          int strides[${Qe}];
          ${un}
          ${pn}
          ${mn}
          ${fn}

          float value = ${qe};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${Xe}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${He} - ${Qe}; j < ${He}; j++) {
              x[j] = indices[j] * strides[j - ${He} + ${Qe}]
                + offset[j - ${He} + ${Qe}] - pads[j - 2];
              ${wn}
          }
          ${Be}

          return value;
        }
      `}},Ie=(Fe,Ve)=>{let je="";for(let Be=0;Be<Fe.length;Be++)je+=`
      ${Ve}[${Be}] = ${Fe[Be]};
    `;return je},Me=Fe=>`
  void offsetToIndices(int offset, int[${Fe}] strides, out int[${Fe}] indices) {
    if (${Fe} == 0) {
      return;
    }
    for (int i = 0; i < ${Fe} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${Fe} - 1] = offset;
  }`},4939:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reduceLogSumSquare=e.reduceLogSum=e.reduceProd=e.reduceMin=e.reduceMax=e.reduceMean=e.reduceSum=e.parseReduceAttributes=void 0;const _e=t(246),Te=t(782),Ee=t(2517),xe=t(2039),Pe=(Ce,Se,Ae,Ie,Me)=>{ke(Se);const Fe={name:Ie,inputNames:["A"],inputTypes:[xe.TextureType.unpacked]};return[Ce.run(Object.assign(Object.assign({},Fe),{cacheHint:Ae.cacheKey,get:()=>Re(Ce,Se,Ae,Ie,Me,Fe)}),Se)]};e.parseReduceAttributes=Ce=>{const Se=Ce.attributes.getInts("axes",[]),Ae=Ce.attributes.getInt("keepdims",1)===1;return(0,_e.createAttributeWithCacheKey)({axes:Se,keepDims:Ae})};const Re=(Ce,Se,Ae,Ie,Me,Fe)=>{const Ve=[],je=Se[0].dims.length||1,Be=[],qe=Ee.ShapeUtil.normalizeAxes(Ae.axes,Se[0].dims.length),He=Me(Se,qe);let Xe=He[1];for(let Qe=0;Qe<Se[0].dims.length;Qe++)qe.indexOf(Qe)>=0||qe.length===0?(Ae.keepDims&&Ve.push(1),Xe=`
          for(int j${Qe} = 0; j${Qe} < ${Se[0].dims[Qe]}; j${Qe}++) {
            inputIdx[${Qe}] = j${Qe};
            ${Xe}
          }`):(Be.push(`inputIdx[${Qe}] = outputIdx[${Ve.length}];`),Ve.push(Se[0].dims[Qe]));const Je=`
      float process(int outputIdx[${Ve.length||1}]) {
        float value;                 // final result
        int inputIdx[${je}];      // addressing input data
        ${Be.join(`
`)}
        ${He[0]}       // init ops for reduce max/min
        ${Xe}
        ${He[2]}       // final computation for reduce mean
        return value;
      }`;return Object.assign(Object.assign({},Fe),{output:{dims:Ve,type:Se[0].type,textureType:xe.TextureType.unpacked},shaderSource:Je})},ke=Ce=>{if(!Ce||Ce.length!==1)throw new Error("Reduce op requires 1 input.");if(Te.NUMBER_TYPES.indexOf(Ce[0].type)===-1)throw new Error("Invalid input type.")};e.reduceSum=(Ce,Se,Ae)=>Pe(Ce,Se,Ae,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),e.reduceMean=(Ce,Se,Ae)=>Pe(Ce,Se,Ae,"ReduceMean",(Ie,Me)=>{let Fe=1;for(let Ve=0;Ve<Ie[0].dims.length;Ve++)(Me.indexOf(Ve)>=0||Me.length===0)&&(Fe*=Ie[0].dims[Ve]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${Fe}.;`]}),e.reduceMax=(Ce,Se,Ae)=>Pe(Ce,Se,Ae,"ReduceMax",(Ie,Me)=>{const Fe=[];for(let Ve=0;Ve<Ie[0].dims.length;Ve++)(Me.indexOf(Ve)>=0||Me.length===0)&&Fe.push(`inputIdx[${Ve}] = 0;`);return[`${Fe.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),e.reduceMin=(Ce,Se,Ae)=>Pe(Ce,Se,Ae,"ReduceMin",(Ie,Me)=>{const Fe=[];for(let Ve=0;Ve<Ie[0].dims.length;Ve++)(Me.indexOf(Ve)>=0||Me.length===0)&&Fe.push(`inputIdx[${Ve}] = 0;`);return[`${Fe.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),e.reduceProd=(Ce,Se,Ae)=>Pe(Ce,Se,Ae,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),e.reduceLogSum=(Ce,Se,Ae)=>Pe(Ce,Se,Ae,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),e.reduceLogSumSquare=(Ce,Se,Ae)=>Pe(Ce,Se,Ae,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])},7019:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isReshapeCheap=e.processDims3D=e.createPackedReshape3DProgramInfoLoader=void 0;const _e=t(2517),Te=t(5060),Ee=t(2039),xe=t(2827);e.createPackedReshape3DProgramInfoLoader=(Pe,Re,ke)=>{const Ce=(Se=>({name:"Reshape (packed)",inputTypes:[Ee.TextureType.packed],inputNames:["A"],cacheHint:`${Se}`}))(ke);return Object.assign(Object.assign({},Ce),{get:()=>((Se,Ae,Ie,Me)=>{const Fe=Ae.dims,Ve=Me;let je="";for(let He=0;He<4;He++){let Xe="";switch(He){case 0:Xe="outputCoords = rc;";break;case 1:Xe="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:Xe="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:Xe="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}je+=`
        ${Xe}
        ${He>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${He}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${He>0?"}":""}
      `}const Be=(0,Te.getGlsl)(Se.session.backend.glContext.version),qe=`
      ${function(He){const Xe=_e.ShapeUtil.computeStrides(He),Je=["b","r","c"],Qe="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${Xe.map((Ke,Ye)=>`int ${Je[Ye]} = ${Qe} / ${Ke}; ${Ye===Xe.length-1?`int ${Je[Ye+1]} = ${Qe} - ${Je[Ye]} * ${Ke}`:`index -= ${Je[Ye]} * ${Ke}`};`).join("")}
      return ivec3(b, r, c);
    }
  `}(Fe)}
      ${function(He){const Xe=_e.ShapeUtil.computeStrides(He);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${Xe[0]} + coords.z * ${Xe[1]} + coords.y;
  }
`}(Ve)}
      ${(0,xe.unpackFromChannel)()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${Ve[2]};
        int cols = ${Ve[1]};

        ${je}
        ${Be.output} = result;
      }
    `;return Object.assign(Object.assign({},Ie),{output:{dims:Ve,type:Ae.type,textureType:Ee.TextureType.packed},shaderSource:qe,hasMain:!0})})(Pe,Re,Ce,ke)})},e.processDims3D=function(Pe){if(Pe.length===0)return[1,1,1];let Re=1;for(let ke=0;ke<Pe.length-2;++ke)Re*=Pe[ke];return[Re,Pe.length>1?Pe[Pe.length-2]:1,Pe[Pe.length-1]]},e.isReshapeCheap=function(Pe,Re){let ke=!1;return ke=Pe.length===0||Re.length===0||(Pe.length<2||Re.length<2?Pe[Pe.length-1]===Re[Re.length-1]:Pe[Pe.length-1]===Re[Re.length-1]&&Pe[Pe.length-2]===Re[Re.length-2]),ke}},718:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reshape=void 0;const _e=t(2517);e.reshape=(Te,Ee)=>{const xe=_e.ShapeUtil.calculateReshapedDims(Ee[0].dims,Ee[1].integerData);return Te.session.pack?[Te.reshapePacked(Ee[0],xe)]:[Te.reshapeUnpacked(Ee[0],xe)]}},2268:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseResizeAttributesV11=e.parseResizeAttributesV10=e.resize=void 0;const _e=t(5060),Te=t(2039),Ee=t(9390),xe=t(2827),Pe=t(9793),Re={name:"Resize",inputNames:["A"],inputTypes:[Te.TextureType.packed]};e.resize=(Ie,Me,Fe)=>((0,Pe.validateInputs)(Me,Fe),[Ie.run(Object.assign(Object.assign({},Re),{cacheHint:Fe.cacheKey,get:()=>ke(Ie,Me,Fe)}),Me)]),e.parseResizeAttributesV10=Ie=>(0,Pe.parseUpsampleAttributes)(Ie,10),e.parseResizeAttributesV11=Ie=>(0,Pe.parseUpsampleAttributes)(Ie,11);const ke=(Ie,Me,Fe)=>{const Ve=(0,_e.getGlsl)(Ie.session.backend.glContext.version),[je,Be]=Ce(Me,Fe);if(je.every(wn=>wn===1)&&Fe.coordinateTransformMode!=="tf_crop_and_resize")return Object.assign(Object.assign({},Re),{output:{dims:Be,type:Me[0].type,textureType:Te.TextureType.packed},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${Ve.texture2D}(X, TexCoords);
                    ${Ve.output} = v;
                }`});const qe=Be.length;if(qe<2)throw new Error(`output dimension should be at least 2, but got ${qe}`);const He=Be[qe-2],Xe=Be[qe-1],Je=Me[0].dims;if(qe!==Je.length)throw new Error(`output dimension should match input ${Je.length}, but got ${qe}`);const Qe=Je[qe-2],Ke=Je[qe-1],Ye=je[qe-2],pn=je[qe-1];let un="";if(Fe.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${Fe.mode}'`);switch(Fe.coordinateTransformMode){case"asymmetric":un=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":un=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":un=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${Xe}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${He}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${Xe}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${He}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":un=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${Xe}.0 - 1.0, ${He}.0 - 1.0, ${Xe}.0 - 1.0,
                            ${He}.0 - 1.0);
                        vec4 original = vec4(${Ke}.0 - 1.0, ${Qe}.0 - 1.0, ${Ke}.0 - 1.0,
                            ${Qe}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${Fe.coordinateTransformMode}'`)}const fn=(0,Ee.getCoordsDataType)(qe),mn=`
            const vec2 inputWH = vec2(${Qe}.0, ${Ke}.0);
            const vec4 scaleWHWH = vec4(float(${Ye}), float(${pn}), float(${Ye}), float(${pn}));
            ${(0,xe.unpackFromChannel)()}
            ${un}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${fn} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${He-1};
                bool hasNextCol = rc.z < ${Xe-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${Ve.output} = vec4(newValue);
            }
        `;return Object.assign(Object.assign({},Re),{output:{dims:Be,type:Me[0].type,textureType:Te.TextureType.packed},hasMain:!0,shaderSource:mn})},Ce=(Ie,Me)=>{const Fe=Ie[0].dims;let Ve,je=Me.scales;if(je.length===0){const qe=Ie[Me.scalesInputIdx];if(qe&&qe.size!==0){if(Ie[Me.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");je=Se(qe,Me.mode,Me.isResize)}else{const He=Ie[Me.sizesInputIdx];if(!He||He.size===0)throw new Error("Either scales or sizes MUST be provided as input.");Ve=Array.from(He.integerData),je=Ae(Ve,Fe,Me.mode,Me.isResize)}}else if(Ie[Me.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");const Be=Ve||Fe.map((qe,He)=>Math.floor(qe*je[He]));return[je,Be]},Se=(Ie,Me,Fe)=>{const Ve=Array.from(Ie.floatData);return(0,Pe.scalesValidation)(Ve,Me,Fe),Ve},Ae=(Ie,Me,Fe,Ve)=>{const je=Me.length,Be=new Array(je);for(let qe=0,He=je;qe<He;qe++)if(Me[qe]===0){if(Ie[qe]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");Be[qe]=1}else Be[qe]=Ie[qe]/Me[qe];return(0,Pe.scalesValidation)(Be,Fe,Ve),Be}},8117:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.shape=void 0;const _e=t(9162);e.shape=(Ee,xe)=>(Te(xe),[new _e.Tensor([xe[0].dims.length],"int32",void 0,void 0,new Int32Array(xe[0].dims))]);const Te=Ee=>{if(!Ee||Ee.length!==1)throw new Error("Shape requires 1 input.")}},2278:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sliceV10=e.parseSliceAttributes=e.slice=void 0;const _e=t(246),Te=t(782),Ee=t(2517),xe=t(2039),Pe={name:"Slice",inputNames:["A"],inputTypes:[xe.TextureType.unpacked]};e.slice=(Ae,Ie,Me)=>(ke(Ie),[Ae.run(Object.assign(Object.assign({},Pe),{cacheHint:Me.cacheKey,get:()=>Re(Ae,Ie[0],Me)}),Ie)]),e.parseSliceAttributes=Ae=>{const Ie=Ae.attributes.getInts("starts"),Me=Ae.attributes.getInts("ends"),Fe=Ae.attributes.getInts("axes",[]);return(0,_e.createAttributeWithCacheKey)({starts:Ie,ends:Me,axes:Fe})};const Re=(Ae,Ie,Me)=>{const Fe=Me.axes.length===0?Ie.dims.slice(0).map((Je,Qe)=>Qe):Me.axes,Ve=Ee.ShapeUtil.normalizeAxes(Fe,Ie.dims.length),je=Me.starts.map((Je,Qe)=>Je>Ie.dims[Ve[Qe]]-1?Ie.dims[Ve[Qe]]:Ee.ShapeUtil.normalizeAxis(Je,Ie.dims[Ve[Qe]])),Be=Me.ends.map((Je,Qe)=>Je>Ie.dims[Ve[Qe]]-1?Ie.dims[Ve[Qe]]:Ee.ShapeUtil.normalizeAxis(Je,Ie.dims[Ve[Qe]])),qe=Ie.dims.slice(),He=[];for(let Je=0;Je<Ve.length;Je++)qe[Ve[Je]]=Be[Je]-je[Je],je[Je]>0&&He.push(`outputIdx[${Ve[Je]}] += ${je[Je]};`);const Xe=`
      float process(int outputIdx[${qe.length}]) {
        ${He.join(`
      `)}
        return _A(outputIdx);
      }`;return Object.assign(Object.assign({},Pe),{output:{dims:qe,type:Ie.type,textureType:xe.TextureType.unpacked},shaderSource:Xe})},ke=Ae=>{if(!Ae||Ae.length!==1)throw new Error("Slice requires 1 input.");if(Te.NUMBER_TYPES.indexOf(Ae[0].type)===-1)throw new Error("Invalid input type.")};e.sliceV10=(Ae,Ie)=>{Se(Ie);const Me=Ce(Ae,Ie);return[Ae.run(Object.assign(Object.assign({},Pe),{cacheHint:Me.cacheKey,get:()=>Re(Ae,Ie[0],Me)}),[Ie[0]])]};const Ce=(Ae,Ie)=>{if(!Ae.session.isInitializer(Ie[1].dataId)||!Ae.session.isInitializer(Ie[2].dataId)||Ie.length>=4&&!Ae.session.isInitializer(Ie[3].dataId)||Ie.length>=5&&!Ae.session.isInitializer(Ie[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(Ie.length>=5&&Ie[4].integerData.some(je=>je!==1))throw new Error("currently non-1 steps is not supported for Slice");const Me=Array.from(Ie[1].integerData),Fe=Array.from(Ie[2].integerData),Ve=Ie.length>=4?Array.from(Ie[3].integerData):[];return{starts:Me,ends:Fe,axes:Ve,cacheKey:`${Ve};${Me};${Fe}`}},Se=Ae=>{if(!Ae||Ae.length<3||Ae.length>5)throw new Error("Invalid input number.");if(Ae[1].type!=="int32"||Ae[1].dims.length!==1)throw new Error("Invalid input type.");if(Ae[2].type!=="int32"||Ae[2].dims.length!==1)throw new Error("Invalid input type.");if(Ae.length>=4&&(Ae[3].type!=="int32"||Ae[3].dims.length!==1))throw new Error("Invalid input type.");if(Ae.length>=5&&(Ae[4].type!=="int32"||Ae[4].dims.length!==1))throw new Error("Invalid input type.")}},5524:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.softmaxV13=e.parseSoftmaxAttributesV13=e.parseSoftmaxAttributes=e.softmax=void 0;const _e=t(246),Te=t(2517),Ee=t(5060),xe=t(2039),Pe=t(3738),Re={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[xe.TextureType.unpacked]},ke={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[xe.TextureType.unpacked,xe.TextureType.unpacked]},Ce={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[xe.TextureType.unpacked,xe.TextureType.unpacked,xe.TextureType.unpacked]};e.softmax=(Ve,je,Be)=>{Fe(je);const qe=je[0].dims.slice(),He=Te.ShapeUtil.normalizeAxis(Be.axis,qe.length),Xe=Te.ShapeUtil.sizeToDimension(qe,He),Je=Te.ShapeUtil.sizeFromDimension(qe,He);return Se(Ve,je,Be,Xe,Je)},e.parseSoftmaxAttributes=Ve=>(0,_e.createAttributeWithCacheKey)({axis:Ve.attributes.getInt("axis",1)}),e.parseSoftmaxAttributesV13=Ve=>(0,_e.createAttributeWithCacheKey)({axis:Ve.attributes.getInt("axis",-1)}),e.softmaxV13=(Ve,je,Be)=>{Fe(je);const qe=je[0].dims.slice(),He=Te.ShapeUtil.normalizeAxis(Be.axis,qe.length),Xe=qe.length,Je=He!==Xe-1,Qe=[];let Ke,Ye=[],pn=[];Je&&(Ye=Array.from({length:Xe}).map((wn,Pn)=>Pn),Ye[He]=Xe-1,Ye[Xe-1]=He,Ye.map(wn=>Qe.push(qe[wn])),Ke=(0,_e.createAttributeWithCacheKey)({perm:Ye}),pn=(0,Pe.transpose)(Ve,je,Ke));const un=Je?Te.ShapeUtil.sizeToDimension(Qe,Xe-1):Te.ShapeUtil.sizeToDimension(qe,Xe-1),fn=Je?Te.ShapeUtil.sizeFromDimension(Qe,Xe-1):Te.ShapeUtil.sizeFromDimension(qe,Xe-1),mn=Se(Ve,Je?pn:je,Be,un,fn);return Je?(0,Pe.transpose)(Ve,mn,Ke):mn};const Se=(Ve,je,Be,qe,He)=>{const Xe=Ae(Ve,je[0],qe,He,[qe]),Je=Ve.run(Object.assign(Object.assign({},Re),{cacheHint:Be.cacheKey,get:()=>Xe}),je),Qe=Ie(Ve,je[0],qe,He,Xe.output.dims,[qe]),Ke=Ve.run(Object.assign(Object.assign({},ke),{cacheHint:Be.cacheKey,get:()=>Qe}),[je[0],Je]),Ye=Me(Ve,je[0],qe,He,Xe.output.dims,Qe.output.dims);return[Ve.run(Object.assign(Object.assign({},Ce),{cacheHint:Be.cacheKey,get:()=>Ye}),[je[0],Je,Ke])]},Ae=(Ve,je,Be,qe,He)=>{const[Xe,Je]=Ve.calculateTextureWidthAndHeight(je.dims,xe.TextureType.unpacked),Qe=He.length;if(Be<1||qe<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(He.length!==1)throw new Error("Dimensionality of the output should be 1");if(He[0]!==Be)throw new Error("Shape of the output should be equal to logical row count");const Ke=(0,Ee.getGlsl)(Ve.session.backend.glContext.version),Ye=`
      float process(int[${Qe}] indices) {
        int logical_row_start_offset = indices[0] * ${qe};

        float max = getColorAsFloat(${Ke.texture2D}(A, offsetToCoords(logical_row_start_offset, ${Xe},
        ${Je} )));
        for(int i=1; i<${qe}; ++i)
        {
          float current = getColorAsFloat(${Ke.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${Xe}, ${Je})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return Object.assign(Object.assign({},Re),{output:{dims:He,type:je.type,textureType:xe.TextureType.unpacked},shaderSource:Ye})},Ie=(Ve,je,Be,qe,He,Xe)=>{const[Je,Qe]=Ve.calculateTextureWidthAndHeight(je.dims,xe.TextureType.unpacked),Ke=Xe.length;if(Be<1||qe<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(Xe.length!==1)throw new Error("Dimensionality of the output should be 1");if(Xe[0]!==Be)throw new Error("Shape of the output should be equal to logical row count");if(He.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(He[0]!==Be)throw new Error("Shape of the intermediate results should be equal to logical row count");const Ye=`
      float process(int[${Ke}] indices) {
        int logical_row_start_offset = indices[0] * ${qe};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${qe}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${(0,Ee.getGlsl)(Ve.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${Je}, ${Qe}))) - max);
        }

        return norm_factor;
      }`;return Object.assign(Object.assign({},ke),{output:{dims:Xe,type:je.type,textureType:xe.TextureType.unpacked},shaderSource:Ye})},Me=(Ve,je,Be,qe,He,Xe)=>{const[Je,Qe]=Ve.calculateTextureWidthAndHeight(je.dims,xe.TextureType.unpacked),Ke=je.dims.length;if(Be<1||qe<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(He.length!==1||Xe.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(He[0]!==Be||Xe[0]!==Be)throw new Error("Shape of the intermediate results should be equal to logical row count");const Ye=`
      float process(int[${Ke}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${Je}, ${Qe});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${qe};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return Object.assign(Object.assign({},Ce),{output:{dims:je.dims,type:je.type,textureType:xe.TextureType.unpacked},shaderSource:Ye})},Fe=Ve=>{if(!Ve||Ve.length!==1)throw new Error("Softmax requires 1 input.");if(Ve[0].type!=="float32"&&Ve[0].type!=="float64")throw new Error("Invalid input type")}},5975:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseSplitAttributes=e.split=void 0;const _e=t(246),Te=t(2517),Ee=t(2039),xe={name:"Split",inputNames:["A"],inputTypes:[Ee.TextureType.unpacked]};e.split=(Ce,Se,Ae)=>{ke(Se);const Ie=Te.ShapeUtil.normalizeAxis(Ae.axis,Se[0].dims.length),Me=Pe(Ce,Se,Ie,Ae),Fe=[];for(let Ve=0;Ve<Me;++Ve)Fe.push(Ce.run(Object.assign(Object.assign({},xe),{cacheHint:`${Ae.cacheKey};${Ve}`,get:()=>Re(Ce,Se[0],Ae,Ie,Ve)}),Se));return Fe},e.parseSplitAttributes=Ce=>{const Se=Ce.attributes.getInt("axis",0),Ae=Ce.attributes.getInts("split",[]),Ie=Ce.outputs.length;return(0,_e.createAttributeWithCacheKey)({axis:Se,split:Ae,numOutputs:Ie})};const Pe=(Ce,Se,Ae,Ie)=>{const[,Me]=Te.SplitUtil.splitShape(Se[0].dims,Ae,Ie.split,Ie.numOutputs);return Me.length},Re=(Ce,Se,Ae,Ie,Me)=>{const[Fe,Ve]=Te.SplitUtil.splitShape(Se.dims,Ie,Ae.split,Ae.numOutputs),je=Ve[Me],Be=Fe[Me],qe=`
      float process(int indices[${Be.length}]) {
        indices[${Ie}] += ${je};
        return _A(indices);
      }
    `;return Object.assign(Object.assign({},xe),{cacheHint:`${Ae.cacheKey}:${Me}`,output:{dims:Be,type:Se.type,textureType:Ee.TextureType.unpacked},shaderSource:qe})},ke=Ce=>{if(!Ce||Ce.length!==1)throw new Error("Split requires one input.");if(Ce[0].type!=="int8"&&Ce[0].type!=="uint8"&&Ce[0].type!=="int16"&&Ce[0].type!=="uint16"&&Ce[0].type!=="int32"&&Ce[0].type!=="uint32"&&Ce[0].type!=="float32"&&Ce[0].type!=="float64"&&Ce[0].type!=="bool")throw new Error("Invalid input type.")}},3933:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseSqueezeAttributes=e.squeezeV13=e.squeeze=void 0;const _e=t(2517);e.squeeze=(xe,Pe,Re)=>{Te(Pe);const ke=_e.ShapeUtil.squeezeShape(Pe[0].dims,Re);return[xe.reshapeUnpacked(Pe[0],ke)]},e.squeezeV13=(xe,Pe)=>(Ee(Pe),(0,e.squeeze)(xe,[Pe[0]],Array.from(Pe[1].integerData))),e.parseSqueezeAttributes=xe=>xe.attributes.getInts("axes");const Te=xe=>{if(!xe||xe.length!==1)throw new Error("Squeeze requires 1 input.");if(xe[0].type==="string")throw new Error("invalid input tensor types.")},Ee=xe=>{if(!xe||xe.length!==2)throw new Error("Squeeze requires 2 inputs.");if(xe[1].type!=="int32")throw new Error("Invalid input type.")}},6558:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sum=void 0;const _e=t(5060),Te=t(2039);e.sum=(Pe,Re)=>{xe(Re);const ke={name:"Sum",inputNames:Re.map((Ce,Se)=>`X${Se}`),inputTypes:new Array(Re.length).fill(Te.TextureType.unpacked)};return[Pe.run(Object.assign(Object.assign({},ke),{get:()=>Ee(Pe,Re,ke)}),Re)]};const Ee=(Pe,Re,ke)=>{const Ce=(0,_e.getGlsl)(Pe.session.backend.glContext.version),Se=Re[0].dims.slice(),Ae=`
      void main() {
        vec4 result = ${Re.map((Ie,Me)=>`${Ce.texture2D}(X${Me},TexCoords)`).join(" + ")};
        ${Ce.output} = result;
      }
    `;return Object.assign(Object.assign({},ke),{output:{dims:Se,type:Re[0].type,textureType:Te.TextureType.unpacked},hasMain:!0,shaderSource:Ae})},xe=Pe=>{if(!Pe||Pe.length===0)throw new Error("Sum requires inputs.");const Re=Pe[0].dims.length;for(let ke=1;ke<Pe.length;ke++){if(Re!==Pe[ke].dims.length)throw new Error("Input shapes are mismatched.");for(let Ce=0;Ce<Re;Ce++)if(Pe[0].dims[Ce]!==Pe[ke].dims[Ce])throw new Error("Input shapes are not matched.")}if(Pe[0].type!=="float32"&&Pe[0].type!=="float64")throw new Error("Invalid input type.");for(let ke=1;ke<Pe.length;ke++)if(Pe[0].type!==Pe[ke].type)throw new Error("Input types are not matched.")}},5723:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tile=void 0;const _e=t(782),Te=t(2039);e.tile=(Pe,Re)=>{xe(Re);const ke={name:"Tile",inputNames:["A"],inputTypes:[Te.TextureType.unpacked]};return[Pe.run(Object.assign(Object.assign({},ke),{get:()=>Ee(Pe,Re,ke)}),Re)]};const Ee=(Pe,Re,ke)=>{const Ce=Re[0].dims.slice(),Se=new Array(Ce.length),Ae=[];for(let Fe=0;Fe<Ce.length;Fe++)Se[Fe]=Ce[Fe]*Re[1].numberData[Fe],Ae.push(`inputIdx[${Fe}] = int(mod(float(outputIdx[${Fe}]), ${Ce[Fe]}.));`);const Ie=Se.length,Me=`
      float process(int outputIdx[${Ie}]) {
        int inputIdx[${Ie}];
        ${Ae.join(`
`)}
        return _A(inputIdx);
      }
    `;return Object.assign(Object.assign({},ke),{output:{dims:Se,type:Re[0].type,textureType:Te.TextureType.unpacked},shaderSource:Me})},xe=Pe=>{if(!Pe||Pe.length!==2)throw new Error("Tile requires 2 input.");if(Pe[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(Pe[1].dims[0]!==Pe[0].dims.length)throw new Error("Invalid input shape.");if(_e.NUMBER_TYPES.indexOf(Pe[0].type)===-1)throw new Error("Invalid input type.");if(Pe[1].type!=="int32"&&Pe[1].type!=="int16")throw new Error("Invalid repeat type.")}},3738:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseTransposeAttributes=e.transpose=void 0;const _e=t(246),Te=t(2517),Ee=t(2039),xe={name:"Transpose",inputNames:["A"],inputTypes:[Ee.TextureType.unpacked]};e.transpose=(Ae,Ie,Me)=>(Se(Ie),[Ae.run(Object.assign(Object.assign({},xe),{cacheHint:Me.cacheKey,get:()=>Pe(Ae,Ie[0],Me.perm)}),Ie)]),e.parseTransposeAttributes=Ae=>(0,_e.createAttributeWithCacheKey)({perm:Ae.attributes.getInts("perm",[])});const Pe=(Ae,Ie,Me)=>{const Fe=Ie.dims;Me=Re(Fe,Me);const Ve=ke(Fe,Me),je=Fe.length,Be=`
      ${Ce("perm",Me,je)}
      float process(int indices[${je}]) {
        int a[${je}];
        perm(a, indices);
        return _A(a);
      }`;return Object.assign(Object.assign({},xe),{output:{dims:Ve,type:Ie.type,textureType:Ee.TextureType.unpacked},shaderSource:Be})},Re=(Ae,Ie)=>(Ie&&Ie.length!==Ae.length&&(Ie=[...Ae.keys()].reverse()),Ie),ke=(Ae,Ie)=>(Ie=Re(Ae,Ie),Te.ShapeUtil.sortBasedOnPerm(Ae,Ie)),Ce=(Ae,Ie,Me)=>{const Fe=[];Fe.push(`void ${Ae}(out int a[${Me}], int src[${Me}]) {`);for(let Ve=0;Ve<Me;++Ve)Fe.push(`	a[${Ie[Ve]}]=src[${Ve}];`);return Fe.push("	}"),Fe.join(`
`)},Se=Ae=>{if(!Ae||Ae.length!==1)throw new Error("Transpose requires 1 input.");if(Ae[0].type!=="float32"&&Ae[0].type!=="float64")throw new Error("input should be float tensor")}},8710:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.encodeAsUint8=void 0;const _e=t(5060),Te=t(2039);e.encodeAsUint8=(Ee,xe)=>{const Pe=xe.shape,Re=(0,_e.getGlsl)(Ee.session.backend.glContext.version),ke=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${Re.texture2D}(X,TexCoords).r;
      ${Re.output} = encodeAsUint8(value);
    }`,Ce={name:"Uint8Encode",inputTypes:[Te.TextureType.unpacked],inputNames:["X"],output:{dims:Pe,type:xe.tensor.type,textureType:Te.TextureType.downloadUint8AsFloat},shaderSource:ke,hasMain:!0};return Ee.executeProgram(Ce,[xe.tensor])}},4909:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tanh=e.tan=e.sqrt=e.sin=e.sigmoid=e.relu=e.not=e.neg=e.log=e.parseLeakyReluAttributes=e.leakyRelu=e.identity=e.floor=e.exp=e.parseEluAttributes=e.elu=e.cos=e.ceil=e.clipV11=e.parseClipAttributes=e.clip=e.atan=e.asin=e.acos=e.abs=e.glslTanh=e.glslTan=e.glslSqrt=e.glslSigmoid=e.glslRelu=e.glslSin=e.glslNot=e.glslNeg=e.glslLog=e.glslLeakyRelu=e.glslIdentity=e.glslClip=e.glslFloor=e.glslExp=e.glslElu=e.glslCos=e.glslCeil=e.glslAtan=e.glslAsin=e.glslAcos=e.glslAbs=void 0;const _e=t(246),Te=t(2517),Ee=t(8520),xe=t(5060),Pe=t(2039);function Re(){return mn("abs")}function ke(){return mn("acos")}function Ce(){return mn("asin")}function Se(){return mn("atan")}function Ae(){return mn("ceil")}function Ie(){return mn("cos")}function Me(xn){const In="elu";return{body:`
  const float alpha = float(${xn});

  float ${In}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${In}_(vec4 v) {
    return vec4(${In}_(v.x), ${In}_(v.y), ${In}_(v.z), ${In}_(v.w));
  }
  `,name:In,type:Ee.FunctionType.ValueBased}}function Fe(){return mn("exp")}function Ve(){return mn("floor")}function je(xn,In){const Ln="clip";return{body:`
  const float min = float(${xn});
  const float max = float(${In});

  float ${Ln}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${Ln}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:Ln,type:Ee.FunctionType.ValueBased}}function Be(){const xn="indentity";return{body:`
  float ${xn}_(float a) {
    return a;
  }
  vec4 ${xn}_(vec4 v) {
    return v;
  }
  `,name:xn,type:Ee.FunctionType.ValueBased}}function qe(xn){const In="leakyRelu";return{body:`
  const float alpha = float(${xn});

  float ${In}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${In}_(vec4 v) {
    return vec4(${In}_(v.x), ${In}_(v.y), ${In}_(v.z), ${In}_(v.w));
  }
  `,name:In,type:Ee.FunctionType.ValueBased}}function He(){return mn("log")}function Xe(){const xn="neg";return{body:`
  float ${xn}_(float a) {
    return -a;
  }
  vec4 ${xn}_(vec4 v) {
    return -v;
  }
  `,name:xn,type:Ee.FunctionType.ValueBased}}function Je(){const xn="not";return{body:`
  float ${xn}_(float a) {
    return float( ! bool(a) );
  }
  bool ${xn}_(bool a) {
    return !a;
  }
  vec4 ${xn}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${xn}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:xn,type:Ee.FunctionType.ValueBased}}function Qe(){return mn("sin")}function Ke(){const xn="relu";return{body:`
  float ${xn}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${xn}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:xn,type:Ee.FunctionType.ValueBased}}function Ye(){const xn="sigmoid";return{body:`
  float ${xn}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${xn}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:xn,type:Ee.FunctionType.ValueBased}}function pn(){return mn("sqrt")}function un(){return mn("tan")}function fn(){const xn="tanh";return{body:`
  float ${xn}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${xn}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:xn,type:Ee.FunctionType.ValueBased}}function mn(xn){return{body:`
  float ${xn}_(float a) {
    return ${xn}(a);
  }
  vec4 ${xn}_(vec4 v) {
    return ${xn}(v);
  }
  `,name:xn,type:Ee.FunctionType.ValueBased}}e.glslAbs=Re,e.glslAcos=ke,e.glslAsin=Ce,e.glslAtan=Se,e.glslCeil=Ae,e.glslCos=Ie,e.glslElu=Me,e.glslExp=Fe,e.glslFloor=Ve,e.glslClip=je,e.glslIdentity=Be,e.glslLeakyRelu=qe,e.glslLog=He,e.glslNeg=Xe,e.glslNot=Je,e.glslSin=Qe,e.glslRelu=Ke,e.glslSigmoid=Ye,e.glslSqrt=pn,e.glslTan=un,e.glslTanh=fn;const wn=(xn,In,Ln,$n)=>{const Sn=xn.session.pack?Pe.TextureType.packed:Pe.TextureType.unpacked,Bn={name:Ln.name,inputTypes:[Sn],inputNames:["A"],cacheHint:$n};return Object.assign(Object.assign({},Bn),{get:()=>((Tn,vn,Un,zn)=>{const Hn=Tn.session.pack?Pe.TextureType.packed:Pe.TextureType.unpacked,Jn=(0,xe.getGlsl)(Tn.session.backend.glContext.version);return Object.assign(Object.assign({},vn),{output:{dims:Un.dims,type:Un.type,textureType:Hn},shaderSource:`
     ${zn.body}
     void main() {
       vec4 v = ${Jn.texture2D}(A, TexCoords);
       v = ${zn.name}_(v);
       ${Jn.output} = v;
     }
     `,hasMain:!0})})(xn,Bn,In,Ln)})};e.abs=(xn,In)=>[xn.run(wn(xn,In[0],Re()),In)],e.acos=(xn,In)=>[xn.run(wn(xn,In[0],ke()),In)],e.asin=(xn,In)=>[xn.run(wn(xn,In[0],Ce()),In)],e.atan=(xn,In)=>[xn.run(wn(xn,In[0],Se()),In)],e.clip=(xn,In,Ln)=>[xn.run(wn(xn,In[0],je(Ln.min,Ln.max),Ln.cacheKey),In)],e.parseClipAttributes=xn=>(0,_e.createAttributeWithCacheKey)({min:xn.attributes.getFloat("min",Te.MIN_CLIP),max:xn.attributes.getFloat("max",Te.MAX_CLIP)}),e.clipV11=(xn,In)=>{const Ln=Pn(xn,In);return(0,e.clip)(xn,[In[0]],Ln)};const Pn=(xn,In)=>{if(In.length>=3&&(!xn.session.isInitializer(In[1].dataId)||!xn.session.isInitializer(In[2].dataId)))throw new Error("dynamic clip attributes are not allowed");const Ln=In.length>=3?In[1].numberData[0]:Te.MIN_CLIP,$n=In.length>=3?In[2].numberData[0]:Te.MAX_CLIP;return(0,_e.createAttributeWithCacheKey)({min:Ln,max:$n})};e.ceil=(xn,In)=>[xn.run(wn(xn,In[0],Ae()),In)],e.cos=(xn,In)=>[xn.run(wn(xn,In[0],Ie()),In)],e.elu=(xn,In,Ln)=>[xn.run(wn(xn,In[0],Me(Ln.alpha),Ln.cacheKey),In)],e.parseEluAttributes=xn=>(0,_e.createAttributeWithCacheKey)({alpha:xn.attributes.getFloat("alpha",1)}),e.exp=(xn,In)=>[xn.run(wn(xn,In[0],Fe()),In)],e.floor=(xn,In)=>[xn.run(wn(xn,In[0],Ve()),In)],e.identity=(xn,In)=>[xn.run(wn(xn,In[0],Be()),In)],e.leakyRelu=(xn,In,Ln)=>[xn.run(wn(xn,In[0],qe(Ln.alpha),Ln.cacheKey),In)],e.parseLeakyReluAttributes=xn=>(0,_e.createAttributeWithCacheKey)({alpha:xn.attributes.getFloat("alpha",.01)}),e.log=(xn,In)=>[xn.run(wn(xn,In[0],He()),In)],e.neg=(xn,In)=>[xn.run(wn(xn,In[0],Xe()),In)],e.not=(xn,In)=>[xn.run(wn(xn,In[0],Je()),In)],e.relu=(xn,In)=>[xn.run(wn(xn,In[0],Ke()),In)],e.sigmoid=(xn,In)=>[xn.run(wn(xn,In[0],Ye()),In)],e.sin=(xn,In)=>[xn.run(wn(xn,In[0],Qe()),In)],e.sqrt=(xn,In)=>[xn.run(wn(xn,In[0],pn()),In)],e.tan=(xn,In)=>[xn.run(wn(xn,In[0],un()),In)],e.tanh=(xn,In)=>[xn.run(wn(xn,In[0],fn()),In)]},5611:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackProgramInfoLoader=e.createUnpackProgramInfo=void 0;const _e=t(5060),Te=t(2039),Ee=t(9390),xe=t(2827),Pe={name:"unpack",inputNames:["A"],inputTypes:[Te.TextureType.packed]};e.createUnpackProgramInfo=(Re,ke)=>{const Ce=ke.dims.length,Se=(0,xe.getChannels)("rc",Ce),Ae=Se.slice(-2),Ie=(0,Ee.getCoordsDataType)(Ce),Me=(0,xe.unpackFromChannel)(),Fe=ke.dims.length===0?"":function(Be,qe){if(Be===1)return"rc";let He="";for(let Xe=0;Xe<Be;Xe++)He+=qe[Xe],Xe<Be-1&&(He+=",");return He}(Ce,Se),Ve=Ce<=1?"rc":`vec2(${Ae.join(",")})`,je=`
    ${Me}
    void main() {
      ${Ie} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${Fe});

       ${(0,_e.getGlsl)(Re.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${Ve}), 0, 0, 0);
     }
   `;return Object.assign(Object.assign({},Pe),{hasMain:!0,output:{dims:ke.dims,type:ke.type,textureType:Te.TextureType.unpacked},shaderSource:je})},e.createUnpackProgramInfoLoader=(Re,ke)=>Object.assign(Object.assign({},Pe),{get:()=>(0,e.createUnpackProgramInfo)(Re,ke)})},8428:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseUnsqueezeAttributes=e.unsqueezeV13=e.unsqueeze=void 0;const _e=t(2517);e.unsqueeze=(xe,Pe,Re)=>{Te(Pe);const ke=_e.ShapeUtil.unsqueezeShape(Pe[0].dims,Re);return[xe.reshapeUnpacked(Pe[0],ke)]},e.unsqueezeV13=(xe,Pe)=>(Ee(Pe),(0,e.unsqueeze)(xe,[Pe[0]],Array.from(Pe[1].integerData))),e.parseUnsqueezeAttributes=xe=>xe.attributes.getInts("axes");const Te=xe=>{if(!xe||xe.length!==1)throw new Error("Unsqueeze requires 1 input.");if(xe[0].type==="string")throw new Error("invalid input tensor types.")},Ee=xe=>{if(!xe||xe.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(xe[1].type!=="int32")throw new Error("Invalid input type.")}},9793:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scalesValidation=e.validateInputs=e.parseUpsampleAttributes=e.parseUpsampleAttributesV9=e.parseUpsampleAttributesV7=e.upsample=void 0;const _e=t(246),Te=t(5060),Ee=t(2039),xe={name:"Upsample",inputNames:["X"],inputTypes:[Ee.TextureType.unpacked]};e.upsample=(Re,ke,Ce)=>((0,e.validateInputs)(ke,Ce),[Re.run(Object.assign(Object.assign({},xe),{cacheHint:Ce.cacheKey,get:()=>Pe(Re,ke,Ce)}),ke)]),e.parseUpsampleAttributesV7=Re=>(0,e.parseUpsampleAttributes)(Re,7),e.parseUpsampleAttributesV9=Re=>(0,e.parseUpsampleAttributes)(Re,9),e.parseUpsampleAttributes=(Re,ke)=>{const Ce=ke>=10,Se=Re.attributes.getString("mode","nearest");if(Se!=="nearest"&&Se!=="linear"&&(ke<11||Se!=="cubic"))throw new Error(`unrecognized mode: ${Se}`);let Ae=[];ke<9&&(Ae=Re.attributes.getFloats("scales"),(0,e.scalesValidation)(Ae,Se,Ce));const Ie=Re.attributes.getFloat("extrapolation_value",0),Me=ke>10?Re.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(Me)===-1)throw new Error(`coordinate_transform_mode '${Me}' is not supported`);const Fe=Me==="tf_crop_and_resize",Ve=Fe,je=Se==="nearest"&&ke>=11?Re.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(je)===-1)throw new Error(`nearest_mode '${je}' is not supported`);const Be=Re.attributes.getFloat("cubic_coeff_a",-.75),qe=Re.attributes.getInt("exclude_outside",0)!==0;if(qe&&Se!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");const He=ke<11||Se==="nearest"&&Me==="asymmetric"&&je==="floor";let Xe=0,Je=0,Qe=0;return ke>10?Re.inputs.length>2?(Xe=1,Je=2,Qe=3):(Je=1,Qe=2):ke===9&&(Je=1),(0,_e.createAttributeWithCacheKey)({opset:ke,isResize:Ce,mode:Se,scales:Ae,extrapolationValue:Ie,coordinateTransformMode:Me,useExtrapolation:Ve,needRoiInput:Fe,nearestMode:je,cubicCoefficientA:Be,excludeOutside:qe,useNearest2xOptimization:He,roiInputIdx:Xe,scalesInputIdx:Je,sizesInputIdx:Qe})};const Pe=(Re,ke,Ce)=>{const Se=(0,Te.getGlsl)(Re.session.backend.glContext.version),[Ae,Ie]=Re.calculateTextureWidthAndHeight(ke[0].dims,Ee.TextureType.unpacked),Me=ke[0].dims.map((Qe,Ke)=>Math.floor(Qe*Ce.scales[Ke])),[Fe,Ve]=Re.calculateTextureWidthAndHeight(Me,Ee.TextureType.unpacked),je=Me.length,Be=new Array(je),qe=new Array(je);let He=`
      int output_pitches[${je}];
      int input_pitches[${je}];
      `;for(let Qe=je-1;Qe>=0;Qe--)Be[Qe]=Qe===je-1?1:Be[Qe+1]*Me[Qe+1],qe[Qe]=Qe===je-1?1:qe[Qe+1]*ke[0].dims[Qe+1],He+=`
        output_pitches[${Qe}] = ${Be[Qe]};
        input_pitches[${Qe}] = ${qe[Qe]};
        `;const Xe=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${Ae}, ${Ie});
        float value = getColorAsFloat(${Se.texture2D}(X, coords));
        return value;
      }
      `,Je=Ce.mode==="nearest"?`
    ${Xe}
    float process(int indices[${je}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${Fe}, ${Ve});

      ${He}

      int d, m;
      for (int dim = 0; dim < ${je}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:je===4?`
    ${Xe}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${Fe}, ${Ve});

      ${He}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${ke[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${Xe}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${Fe}, ${Ve});

      ${He}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${ke[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return Object.assign(Object.assign({},xe),{output:{dims:Me,type:ke[0].type,textureType:Ee.TextureType.unpacked},shaderSource:Je,variables:[{name:"scales",type:"int",arrayLength:Ce.scales.length,data:Ce.scales.map(Qe=>Math.ceil(Qe))}]})};e.validateInputs=(Re,ke)=>{if(!Re||ke.opset<9&&Re.length!==1||ke.opset>=9&&ke.opset<11&&Re.length!==2||ke.opset>=11&&Re.length<2)throw new Error("invalid inputs.");if(ke.scales.length>0&&Re[0].dims.length!==ke.scales.length)throw new Error("Invalid input shape.");if(Re[0].type==="string")throw new Error("Invalid input tensor types.")},e.scalesValidation=(Re,ke,Ce)=>{if(Ce){for(const Se of Re)if(Se<=0)throw new Error("Scale value should be greater than 0.")}else for(const Se of Re)if(Se<1)throw new Error("Scale value should be greater than or equal to 1.");if(!(ke!=="linear"&&ke!=="cubic"||Re.length===2||Re.length===4&&Re[0]===1&&Re[1]===1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${Ce?"Resize":"Upsample"} opeartor.`)}},1958:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ProgramManager=void 0;const _e=t(1670),Te=t(6231),Ee=t(8879),xe=t(5060);e.ProgramManager=class{constructor(Pe,Re,ke){this.profiler=Pe,this.glContext=Re,this.textureLayoutStrategy=ke,this.repo=new Map,this.attributesBound=!1}getArtifact(Pe){return this.repo.get(Pe)}setArtifact(Pe,Re){this.repo.set(Pe,Re)}run(Pe,Re,ke){var Ce;this.profiler.event("op",`ProgramManager.run ${(Ce=Pe.programInfo.name)!==null&&Ce!==void 0?Ce:"unknown kernel"}`,()=>{var Se;const Ae=this.glContext.gl,Ie=Pe.program;Ae.useProgram(Ie);try{this.bindOutput(ke),this.attributesBound||this.bindAttributes(Pe.attribLocations),this.bindUniforms(Pe.uniformLocations,(Se=Pe.programInfo.variables)!==null&&Se!==void 0?Se:[],Re)}catch(Me){throw Te.Logger.error("ProgramManager",Pe.programInfo.shaderSource),Me}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(Pe=>this.glContext.deleteProgram(Pe.program))}build(Pe,Re,ke){return this.profiler.event("backend","ProgramManager.build",()=>{const Ce=new Ee.GlslPreprocessor(this.glContext,Pe,Re,ke),Se=Ce.preprocess(),Ae=this.compile(Se);return{programInfo:Pe,program:Ae,uniformLocations:this.getUniformLocations(Ae,Ce.context.programInfo.inputNames,Ce.context.programInfo.variables),attribLocations:this.getAttribLocations(Ae)}})}compile(Pe){if(!this.vertexShader){Te.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");const Ce=(0,xe.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(Ce,this.glContext.gl.VERTEX_SHADER)}_e.env.debug&&Te.Logger.verbose("ProrgramManager",`FragShader:
${Pe}
`);const Re=this.glContext.compileShader(Pe,this.glContext.gl.FRAGMENT_SHADER),ke=this.glContext.createProgram(this.vertexShader,Re);return this.glContext.deleteShader(Re),ke}bindOutput(Pe){const Re=Pe.width,ke=Pe.height;Te.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${Re}/${ke}, shape=${Pe.shape}, type=${Pe.tensor.type}`),this.glContext.attachFramebuffer(Pe.texture,Re,ke)}bindAttributes(Pe){const Re=Pe.position,ke=Pe.textureCoord;this.glContext.setVertexAttributes(Re,ke),this.attributesBound=!0}bindUniforms(Pe,Re,ke){var Ce;const Se=this.glContext.gl;let Ae=0;for(const{name:Ie,type:Me,location:Fe,arrayLength:Ve}of Pe){const je=(Ce=Re.find(Be=>Be.name===Ie))===null||Ce===void 0?void 0:Ce.data;if(Me!=="sampler2D"&&!je)throw new Error(`variable '${Ie}' does not have data defined in program info`);switch(Me){case"sampler2D":this.bindTexture(ke[Ae],Fe,Ae),Ae++;break;case"float":Ve?Se.uniform1fv(Fe,je):Se.uniform1f(Fe,je);break;case"int":Ve?Se.uniform1iv(Fe,je):Se.uniform1i(Fe,je);break;default:throw new Error(`Uniform not implemented: ${Me}`)}}}bindTexture(Pe,Re,ke){this.glContext.bindTextureToUniform(Pe.texture,ke,Re)}getAttribLocations(Pe){return{position:this.getAttribLocation(Pe,"position"),textureCoord:this.getAttribLocation(Pe,"textureCoord")}}getUniformLocations(Pe,Re,ke){const Ce=[];if(Re)for(const Se of Re)Ce.push({name:Se,type:"sampler2D",location:this.getUniformLocation(Pe,Se)});if(ke)for(const Se of ke)Ce.push(Object.assign(Object.assign({},Se),{location:this.getUniformLocation(Pe,Se.name)}));return Ce}getUniformLocation(Pe,Re){const ke=this.glContext.gl.getUniformLocation(Pe,Re);if(ke===null)throw new Error(`Uniform ${Re} not found.`);return ke}getAttribLocation(Pe,Re){return this.glContext.gl.getAttribLocation(Pe,Re)}}},6416:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLSessionHandler=void 0;const _e=t(6231),Te=t(1047),Ee=t(8316),xe=t(1640),Pe=t(1958),Re=t(7859),ke=t(5702);e.WebGLSessionHandler=class{constructor(Ce,Se){this.backend=Ce,this.context=Se,this.layoutStrategy=new Re.PreferLogicalStrategy(Ce.glContext.maxTextureSize),this.programManager=new Pe.ProgramManager(this.context.profiler,Ce.glContext,this.layoutStrategy),this.textureManager=new ke.TextureManager(Ce.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:Ce.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=Ce.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new Ee.WebGLInferenceHandler(this)}onGraphInitialized(Ce){const Se=Ce.getValues().filter(Ae=>Ae.from===-1&&Ae.tensor).map(Ae=>Ae.tensor.dataId);this.initializers=new Set(Se)}isInitializer(Ce){return!!this.initializers&&this.initializers.has(Ce)}addInitializer(Ce){this.initializers.add(Ce)}getTextureData(Ce,Se){return Se?this.packedTextureDataCache.get(Ce):this.unpackedTextureDataCache.get(Ce)}setTextureData(Ce,Se,Ae=!1){_e.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),Ae?this.packedTextureDataCache.set(Ce,Se):this.unpackedTextureDataCache.set(Ce,Se)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(Ce=>this.textureManager.releaseTexture(Ce,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(Ce=>this.textureManager.releaseTexture(Ce,!0)),this.unpackedTextureDataCache=new Map}resolve(Ce,Se,Ae){const Ie=(0,Te.resolveOperator)(Ce,Se,xe.WEBGL_OP_RESOLVE_RULES);return{impl:Ie.opImpl,context:Ie.opInit?Ie.opInit(Ce,Ae):Ce}}}},7769:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Uint8DataEncoder=e.RGBAFloatDataEncoder=e.RedFloat32DataEncoder=void 0;const _e=t(6231);e.RedFloat32DataEncoder=class{constructor(Te,Ee=1){if(Ee===1)this.internalFormat=Te.R32F,this.format=Te.RED,this.textureType=Te.FLOAT,this.channelSize=Ee;else{if(Ee!==4)throw new Error(`Invalid number of channels: ${Ee}`);this.internalFormat=Te.RGBA32F,this.format=Te.RGBA,this.textureType=Te.FLOAT,this.channelSize=Ee}}encode(Te,Ee){let xe,Pe;return Te.constructor!==Float32Array&&(_e.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),Pe=new Float32Array(Te)),Ee*this.channelSize>Te.length?(_e.Logger.warning("Encoder","Source data too small. Allocating larger array"),Pe=Te,xe=this.allocate(Ee*this.channelSize),Pe.forEach((Re,ke)=>xe[ke]=Re)):(Pe=Te,xe=Pe),xe}allocate(Te){return new Float32Array(4*Te)}decode(Te,Ee){return this.channelSize===1?Te.filter((xe,Pe)=>Pe%4==0).subarray(0,Ee):Te.subarray(0,Ee)}},e.RGBAFloatDataEncoder=class{constructor(Te,Ee=1,xe){if(Ee!==1&&Ee!==4)throw new Error(`Invalid number of channels: ${Ee}`);this.internalFormat=Te.RGBA,this.format=Te.RGBA,this.channelSize=Ee,this.textureType=xe||Te.FLOAT}encode(Te,Ee){let xe=Te;return this.channelSize===1&&(_e.Logger.verbose("Encoder","Exploding into a larger array"),xe=this.allocate(Ee),Te.forEach((Pe,Re)=>xe[4*Re]=Pe)),xe}allocate(Te){return new Float32Array(4*Te)}decode(Te,Ee){return this.channelSize===1?Te.filter((xe,Pe)=>Pe%4==0).subarray(0,Ee):Te.subarray(0,Ee)}},e.Uint8DataEncoder=class{constructor(Te,Ee=1){if(this.channelSize=4,Ee===1)this.internalFormat=Te.ALPHA,this.format=Te.ALPHA,this.textureType=Te.UNSIGNED_BYTE,this.channelSize=Ee;else{if(Ee!==4)throw new Error(`Invalid number of channels: ${Ee}`);this.internalFormat=Te.RGBA,this.format=Te.RGBA,this.textureType=Te.UNSIGNED_BYTE,this.channelSize=Ee}}encode(Te,Ee){return new Uint8Array(Te.buffer,Te.byteOffset,Te.byteLength)}allocate(Te){return new Uint8Array(Te*this.channelSize)}decode(Te,Ee){if(Te instanceof Uint8Array)return Te.subarray(0,Ee);throw new Error(`Invalid array type: ${Te.constructor}`)}}},7859:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBatchDim=e.sizeToSquarishShape=e.getRowsCols=e.sizeFromShape=e.isInt=e.parseAxisParam=e.squeezeShape=e.PreferLogicalStrategy=e.AlwaysKeepOriginalSizeStrategy=void 0;const _e=t(6231),Te=t(2517);function Ee(Ce,Se){const Ae=[],Ie=[],Me=Se!=null&&Array.isArray(Se)&&Se.length===0,Fe=Se==null||Me?null:xe(Se,Ce).sort();let Ve=0;for(let je=0;je<Ce.length;++je){if(Fe!=null){if(Fe[Ve]===je&&Ce[je]!==1)throw new Error(`Can't squeeze axis ${je} since its dim '${Ce[je]}' is not 1`);(Fe[Ve]==null||Fe[Ve]>je)&&Ce[je]===1&&(Ae.push(Ce[je]),Ie.push(je)),Fe[Ve]<=je&&Ve++}Ce[je]!==1&&(Ae.push(Ce[je]),Ie.push(je))}return{newShape:Ae,keptDims:Ie}}function xe(Ce,Se){const Ae=Se.length;return Ce=Ce==null?Se.map((Ie,Me)=>Me):[].concat(Ce),(0,Te.assert)(Ce.every(Ie=>Ie>=-Ae&&Ie<Ae),()=>`All values in axis param must be in range [-${Ae}, ${Ae}) but got axis ${Ce}`),(0,Te.assert)(Ce.every(Pe),()=>`All values in axis param must be integers but got axis ${Ce}`),Ce.map(Ie=>Ie<0?Ae+Ie:Ie)}function Pe(Ce){return Ce%1==0}function Re(Ce){if(Ce.length===0)return 1;let Se=Ce[0];for(let Ae=1;Ae<Ce.length;Ae++)Se*=Ce[Ae];return Se}function ke(Ce){const Se=Math.ceil(Math.sqrt(Ce));return[Se,Math.ceil(Ce/Se)]}e.AlwaysKeepOriginalSizeStrategy=class{constructor(Ce){this.maxTextureSize=Ce}computeTextureWH(Ce,Se){if(Ce.length===0)return[1,1];const Ae=this.maxTextureSize;if(Se&&Se.breakAxis!==void 0){const Fe=Se.breakAxis>=Ce.length?1:Ce.slice(Se.breakAxis).reduce((je,Be)=>je*Be),Ve=Se.breakAxis<=0?1:Ce.slice(0,Se.breakAxis).reduce((je,Be)=>je*Be);if(!(Fe>Ae||Ve>Ae))return[Fe,Ve];_e.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${Ce}, breakAxis:${Se.breakAxis}`)}const Ie=Ce.reduce((Fe,Ve)=>Fe*Ve);let Me=Math.floor(Math.sqrt(Ie));for(;Me<Ae&&Me<Ie&&Ie%Me!=0;Me++);if(Me>=Ae||Ie%Me!=0)throw new Error(`The given dimensions are outside this GPU's boundaries: ${Ce}`);return[Me,Ie/Me]}},e.PreferLogicalStrategy=class{constructor(Ce){this.maxTextureSize=Ce}computeTextureWH(Ce,Se){const Ae=this.computeTexture(Ce,Se);return Se&&Se.isPacked&&(Ae[0]/=2,Ae[1]/=2),Se&&Se.reverseWH?[Ae[1],Ae[0]]:Ae}computeTexture(Ce,Se){const Ae=Se&&Se.isPacked;if(Ce.length===0)return Ae?[2,2]:[1,1];let Ie=this.maxTextureSize;if(Se&&Se.breakAxis!==void 0){const Ve=Se.breakAxis>=Ce.length?1:Ce.slice(Se.breakAxis).reduce((Be,qe)=>Be*qe),je=Se.breakAxis<=0?1:Ce.slice(0,Se.breakAxis).reduce((Be,qe)=>Be*qe);if(!(Ve>Ie||je>Ie))return[Ve,je];_e.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${Ce}, breakAxis:${Se.breakAxis}`)}let Me=Ce.slice(0);Ae&&(Ie*=2,Me=Me.map((Ve,je)=>je>=Me.length-2?Me[je]%2==0?Me[je]:Me[je]+1:Me[je]),Me.length===1&&(Me=[2,Me[0]])),Me.length!==2&&(Me=Ee(Me).newShape);const Fe=Re(Me);return Me.length<=1&&Fe<=Ie?[1,Fe]:Me.length===2&&Me[0]<=Ie&&Me[1]<=Ie?Me:Me.length===3&&Me[0]*Me[1]<=Ie&&Me[2]<=Ie?[Me[0]*Me[1],Me[2]]:Me.length===3&&Me[0]<=Ie&&Me[1]*Me[2]<=Ie?[Me[0],Me[1]*Me[2]]:Me.length===4&&Me[0]*Me[1]*Me[2]<=Ie&&Me[3]<=Ie?[Me[0]*Me[1]*Me[2],Me[3]]:Me.length===4&&Me[0]<=Ie&&Me[1]*Me[2]*Me[3]<=Ie?[Me[0],Me[1]*Me[2]*Me[3]]:Ae?ke(Fe/4).map(Ve=>2*Ve):ke(Fe)}},e.squeezeShape=Ee,e.parseAxisParam=xe,e.isInt=Pe,e.sizeFromShape=Re,e.getRowsCols=function(Ce){if(Ce.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[Ce.length>1?Ce[Ce.length-2]:1,Ce[Ce.length-1]]},e.sizeToSquarishShape=ke,e.getBatchDim=function(Ce,Se=2){return Re(Ce.slice(0,Ce.length-Se))}},4057:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createTextureLayoutFromShape=e.calculateTextureWidthAndHeight=e.createTextureLayoutFromTextureType=void 0;const _e=t(2517),Te=t(2039);e.createTextureLayoutFromTextureType=(Ee,xe,Pe)=>{const Re=Pe===Te.TextureType.unpacked||Pe===Te.TextureType.unpackedReversed?1:4,ke=Pe===Te.TextureType.packed,Ce=Pe===Te.TextureType.unpackedReversed||Pe===Te.TextureType.packed,Se=Pe===Te.TextureType.packedLastDimension?xe.length-1:void 0,Ae=Pe===Te.TextureType.packedLastDimension?xe.map((Ie,Me)=>Me===xe.length-1?4*Ie:Ie):void 0;return(0,e.createTextureLayoutFromShape)(Ee,xe,Re,Ae,{isPacked:ke,reverseWH:Ce,breakAxis:Se})},e.calculateTextureWidthAndHeight=(Ee,xe,Pe)=>{const Re=(0,e.createTextureLayoutFromTextureType)(Ee,xe,Pe);return[Re.width,Re.height]},e.createTextureLayoutFromShape=(Ee,xe,Pe=1,Re,ke)=>{const Ce=!(!ke||!ke.isPacked),[Se,Ae]=Ee.computeTextureWH(Ce&&Re||xe,ke),Ie=xe.length;let Me=xe.slice(0);if(Ie===0&&(Me=[1]),Pe===1)Re=xe;else if(Ce){if(Pe!==4)throw new Error("a packed texture must be 4-channel");Re=xe,Ie>0&&(Me[Ie-1]=Math.ceil(Me[Ie-1]/2)),Ie>1&&(Me[Ie-2]=Math.ceil(Me[Ie-2]/2))}else if(!Re)throw new Error("Unpacked shape is needed when using channels > 1");return{width:Se,height:Ae,channels:Pe,isPacked:Ce,shape:Me,strides:_e.ShapeUtil.computeStrides(Me),unpackedShape:Re,reversedWH:ke&&ke.reverseWH}}},5702:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextureManager=void 0;const _e=t(6231);e.TextureManager=class{constructor(Te,Ee,xe,Pe){this.glContext=Te,this.layoutStrategy=Ee,this.profiler=xe,this.config=Pe,this.pendingRead=new Map,Pe.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(Te,Ee,xe,Pe){const Re=this.toEncoderType(Te),ke=this.glContext.getEncoder(Re,Ee.channels||1,Pe);if(Ee.isPacked&&Pe===1)throw new Error("not implemented");const Ce=Ee.width,Se=Ee.height;let Ae,Ie;if(this.config.reuseTextures){Ae=`${Ce}x${Se}_${ke.format}_${ke.internalFormat}_${ke.textureType}`,Ie=this.inUseTextures.get(Ae),Ie||(Ie=[],this.inUseTextures.set(Ae,Ie));const Fe=this.idleTextures.get(Ae);if(Fe&&Fe.length>0){const Ve=Fe.pop();return Ie.push(Ve),Pe===1&&this.glContext.updateTexture(Ve,Ce,Se,ke,this.toTextureData(Te,xe)),Ve}}_e.Logger.verbose("TextureManager",`Creating new texture of size ${Ee.width}x${Ee.height}`);const Me=this.glContext.allocateTexture(Ce,Se,ke,this.toTextureData(Te,xe));return this.config.reuseTextures&&(Ie.push(Me),this.textureLookup.set(Me,Ae)),Me}readTexture(Te,Ee,xe){return xe||(xe=1),this.profiler.event("backend","TextureManager.readTexture",()=>{const Pe=Te.shape.reduce((ke,Ce)=>ke*Ce)*xe,Re=this.glContext.readTexture(Te.texture,Te.width,Te.height,Pe,this.toEncoderType(Ee),xe);return this.toTensorData(Ee,Re)})}async readTextureAsync(Te,Ee,xe){const Pe=Te.tensor.dataId;if(xe||(xe=1),this.pendingRead.has(Pe)){const Re=this.pendingRead.get(Pe);return new Promise(ke=>Re?.push(ke))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(Pe,[]);const Re=Te.shape.reduce((Ae,Ie)=>Ae*Ie)*xe;await this.glContext.createAndWaitForFence();const ke=this.glContext.readTexture(Te.texture,Te.width,Te.height,Re,this.toEncoderType(Ee),xe),Ce=this.toTensorData(Ee,ke),Se=this.pendingRead.get(Pe);return this.pendingRead.delete(Pe),Se?.forEach(Ae=>Ae(Ce)),Ce})}readUint8TextureAsFloat(Te){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{const Ee=Te.shape.reduce((Pe,Re)=>Pe*Re),xe=this.glContext.readTexture(Te.texture,Te.width,Te.height,4*Ee,"byte",4);return new Float32Array(xe.buffer,xe.byteOffset,Ee)})}releaseTexture(Te,Ee){let xe;if(this.config.reuseTextures&&(xe=this.textureLookup.get(Te.texture),xe)){Ee&&this.textureLookup.delete(xe);const Pe=this.inUseTextures.get(xe);if(Pe){const Re=Pe.indexOf(Te.texture);if(Re!==-1){Pe.splice(Re,1);let ke=this.idleTextures.get(xe);ke||(ke=[],this.idleTextures.set(xe,ke)),ke.push(Te.texture)}}}xe&&!Ee||(_e.Logger.verbose("TextureManager",`Deleting texture of size ${Te.width}x${Te.height}`),this.glContext.deleteTexture(Te.texture))}toTensorData(Te,Ee){switch(Te){case"int16":return Ee instanceof Int16Array?Ee:Int16Array.from(Ee);case"int32":return Ee instanceof Int32Array?Ee:Int32Array.from(Ee);case"int8":return Ee instanceof Int8Array?Ee:Int8Array.from(Ee);case"uint16":return Ee instanceof Uint16Array?Ee:Uint16Array.from(Ee);case"uint32":return Ee instanceof Uint32Array?Ee:Uint32Array.from(Ee);case"uint8":case"bool":return Ee instanceof Uint8Array?Ee:Uint8Array.from(Ee);case"float32":return Ee instanceof Float32Array?Ee:Float32Array.from(Ee);case"float64":return Ee instanceof Float64Array?Ee:Float64Array.from(Ee);default:throw new Error(`TensorData type ${Te} is not supported`)}}toTextureData(Te,Ee){if(Ee)return Ee instanceof Float32Array?Ee:new Float32Array(Ee)}toEncoderType(Te){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},2039:(r,e)=>{var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TextureType=void 0,(t=e.TextureType||(e.TextureType={}))[t.unpacked=0]="unpacked",t[t.unpackedReversed=1]="unpackedReversed",t[t.packed=2]="packed",t[t.downloadUint8AsFloat=3]="downloadUint8AsFloat",t[t.packedLastDimension=4]="packedLastDimension"},9390:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getGlChannels=e.getCoordsDataType=e.getSqueezedParams=e.squeezeInputShape=e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=e.generateShaderFuncNameFromInputSamplerName=e.repeatedTry=e.getPackedShape=void 0;const _e=t(2517);e.getPackedShape=function(Te){const Ee=Te.length;return Te.slice(0,Ee-1).concat(Te[Ee-1]/4)},e.repeatedTry=async function(Te,Ee=Pe=>0,xe){return new Promise((Pe,Re)=>{let ke=0;const Ce=()=>{if(Te())return void Pe();ke++;const Se=Ee(ke);xe!=null&&ke>=xe?Re():setTimeout(Ce,Se)};Ce()})},e.generateShaderFuncNameFromInputSamplerName=function(Te){return(0,_e.assert)(Te!==void 0&&Te.length!==0,()=>"empty string found for sampler name"),"get"+Te.charAt(0).toUpperCase()+Te.slice(1)},e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(Te){return(0,_e.assert)(Te!==void 0&&Te.length!==0,()=>"empty string found for sampler name"),"get"+Te.charAt(0).toUpperCase()+Te.slice(1)+"AtOutCoords"},e.squeezeInputShape=function(Te,Ee){let xe=JSON.parse(JSON.stringify(Te));return xe=Ee,xe},e.getSqueezedParams=function(Te,Ee){return Ee.map(xe=>Te[xe]).join(", ")},e.getCoordsDataType=function(Te){if(Te<=1)return"int";if(Te===2)return"ivec2";if(Te===3)return"ivec3";if(Te===4)return"ivec4";if(Te===5)return"ivec5";if(Te===6)return"ivec6";throw Error(`GPU for rank ${Te} is not yet supported`)},e.getGlChannels=function(Te=6){return["x","y","z","w","u","v"].slice(0,Te)}},7305:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createNewWebGLContext=e.createWebGLContext=void 0;const _e=t(6231),Te=t(1713),Ee={};function xe(Pe){const Re=function(){if(typeof document>"u"){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}const Se=document.createElement("canvas");return Se.width=1,Se.height=1,Se}();let ke;const Ce={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!Pe||Pe==="webgl2")&&(ke=Re.getContext("webgl2",Ce),ke))try{return new Te.WebGLContext(ke,2)}catch(Se){_e.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${Se}`)}if((!Pe||Pe==="webgl")&&(ke=Re.getContext("webgl",Ce)||Re.getContext("experimental-webgl",Ce),ke))try{return new Te.WebGLContext(ke,1)}catch(Se){_e.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${Se}`)}throw new Error("WebGL is not supported")}e.createWebGLContext=function Pe(Re){let ke;Re&&Re!=="webgl2"||!("webgl2"in Ee)?Re&&Re!=="webgl"||!("webgl"in Ee)||(ke=Ee.webgl):ke=Ee.webgl2,ke=ke||xe(Re),Re=Re||ke.version===1?"webgl":"webgl2";const Ce=ke.gl;return Ee[Re]=ke,Ce.isContextLost()?(delete Ee[Re],Pe(Re)):(Ce.disable(Ce.DEPTH_TEST),Ce.disable(Ce.STENCIL_TEST),Ce.disable(Ce.BLEND),Ce.disable(Ce.DITHER),Ce.disable(Ce.POLYGON_OFFSET_FILL),Ce.disable(Ce.SAMPLE_COVERAGE),Ce.enable(Ce.SCISSOR_TEST),Ce.enable(Ce.CULL_FACE),Ce.cullFace(Ce.BACK),ke)},e.createNewWebGLContext=xe},1713:function(r,e,t){var _e=this&&this.__createBinding||(Object.create?function(Ce,Se,Ae,Ie){Ie===void 0&&(Ie=Ae);var Me=Object.getOwnPropertyDescriptor(Se,Ae);Me&&!("get"in Me?!Se.__esModule:Me.writable||Me.configurable)||(Me={enumerable:!0,get:function(){return Se[Ae]}}),Object.defineProperty(Ce,Ie,Me)}:function(Ce,Se,Ae,Ie){Ie===void 0&&(Ie=Ae),Ce[Ie]=Se[Ae]}),Te=this&&this.__setModuleDefault||(Object.create?function(Ce,Se){Object.defineProperty(Ce,"default",{enumerable:!0,value:Se})}:function(Ce,Se){Ce.default=Se}),Ee=this&&this.__importStar||function(Ce){if(Ce&&Ce.__esModule)return Ce;var Se={};if(Ce!=null)for(var Ae in Ce)Ae!=="default"&&Object.prototype.hasOwnProperty.call(Ce,Ae)&&_e(Se,Ce,Ae);return Te(Se,Ce),Se};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLContext=e.linearSearchLastTrue=void 0;const xe=t(1670),Pe=Ee(t(7769)),Re=t(9390);function ke(Ce){let Se=0;for(;Se<Ce.length&&Ce[Se]();++Se);return Se-1}e.linearSearchLastTrue=ke,e.WebGLContext=class{constructor(Ce,Se){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=Ce,this.version=Se,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(Ce,Se,Ae,Ie){const Me=this.gl,Fe=Me.createTexture();Me.bindTexture(Me.TEXTURE_2D,Fe),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_MIN_FILTER,Me.NEAREST),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_MAG_FILTER,Me.NEAREST),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_WRAP_S,Me.CLAMP_TO_EDGE),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_WRAP_T,Me.CLAMP_TO_EDGE);const Ve=Ie?Ae.encode(Ie,Ce*Se):null;return Me.texImage2D(Me.TEXTURE_2D,0,Ae.internalFormat,Ce,Se,0,Ae.format,Ae.textureType,Ve),this.checkError(),Fe}updateTexture(Ce,Se,Ae,Ie,Me){const Fe=this.gl;Fe.bindTexture(Fe.TEXTURE_2D,Ce);const Ve=Ie.encode(Me,Se*Ae);Fe.texSubImage2D(Fe.TEXTURE_2D,0,0,0,Se,Ae,Ie.format,Ie.textureType,Ve),this.checkError()}attachFramebuffer(Ce,Se,Ae){const Ie=this.gl;Ie.bindTexture(Ie.TEXTURE_2D,Ce),Ie.bindFramebuffer(Ie.FRAMEBUFFER,this.framebuffer),Ie.framebufferTexture2D(Ie.FRAMEBUFFER,Ie.COLOR_ATTACHMENT0,Ie.TEXTURE_2D,Ce,0),this.checkError(),Ie.viewport(0,0,Se,Ae),Ie.scissor(0,0,Se,Ae)}readTexture(Ce,Se,Ae,Ie,Me,Fe){const Ve=this.gl;Fe||(Fe=1),this.frameBufferBound||this.attachFramebuffer(Ce,Se,Ae);const je=this.getEncoder(Me,Fe),Be=je.allocate(Se*Ae);return Ve.bindTexture(Ve.TEXTURE_2D,Ce),Ve.framebufferTexture2D(Ve.FRAMEBUFFER,Ve.COLOR_ATTACHMENT0,Ve.TEXTURE_2D,Ce,0),Ve.readPixels(0,0,Se,Ae,Ve.RGBA,je.textureType,Be),this.checkError(),je.decode(Be,Ie)}isFramebufferReady(){return!0}getActiveTexture(){const Ce=this.gl;return"TEXTURE"+(Ce.getParameter(this.gl.ACTIVE_TEXTURE)-Ce.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(Ce,Se){const Ae=this.gl;Ae.vertexAttribPointer(Ce,3,Ae.FLOAT,!1,20,0),Ae.enableVertexAttribArray(Ce),Se!==-1&&(Ae.vertexAttribPointer(Se,2,Ae.FLOAT,!1,20,12),Ae.enableVertexAttribArray(Se)),this.checkError()}createProgram(Ce,Se){const Ae=this.gl,Ie=Ae.createProgram();return Ae.attachShader(Ie,Ce),Ae.attachShader(Ie,Se),Ae.linkProgram(Ie),Ie}compileShader(Ce,Se){const Ae=this.gl,Ie=Ae.createShader(Se);if(!Ie)throw new Error(`createShader() returned null with type ${Se}`);if(Ae.shaderSource(Ie,Ce),Ae.compileShader(Ie),Ae.getShaderParameter(Ie,Ae.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${Ae.getShaderInfoLog(Ie)}
Shader source:
${Ce}`);return Ie}deleteShader(Ce){this.gl.deleteShader(Ce)}bindTextureToUniform(Ce,Se,Ae){const Ie=this.gl;Ie.activeTexture(Ie.TEXTURE0+Se),this.checkError(),Ie.bindTexture(Ie.TEXTURE_2D,Ce),this.checkError(),Ie.uniform1i(Ae,Se),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(xe.env.debug){const Ce=this.gl,Se=Ce.getError();let Ae="";switch(Se){case Ce.NO_ERROR:return;case Ce.INVALID_ENUM:Ae="INVALID_ENUM";break;case Ce.INVALID_VALUE:Ae="INVALID_VALUE";break;case Ce.INVALID_OPERATION:Ae="INVALID_OPERATION";break;case Ce.INVALID_FRAMEBUFFER_OPERATION:Ae="INVALID_FRAMEBUFFER_OPERATION";break;case Ce.OUT_OF_MEMORY:Ae="OUT_OF_MEMORY";break;case Ce.CONTEXT_LOST_WEBGL:Ae="CONTEXT_LOST_WEBGL";break;default:Ae=`Unknown WebGL Error: ${Se.toString(16)}`}throw new Error(Ae)}}deleteTexture(Ce){this.gl.deleteTexture(Ce)}deleteProgram(Ce){this.gl.deleteProgram(Ce)}getEncoder(Ce,Se,Ae=0){if(this.version===2)return new Pe.RedFloat32DataEncoder(this.gl,Se);switch(Ce){case"float":return Ae===1||this.isRenderFloat32Supported?new Pe.RGBAFloatDataEncoder(this.gl,Se):new Pe.RGBAFloatDataEncoder(this.gl,Se,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new Pe.Uint8DataEncoder(this.gl,Se);default:throw new Error(`Invalid dataType: ${Ce}`)}}clearActiveTextures(){const Ce=this.gl;for(let Se=0;Se<this.maxTextureImageUnits;++Se)Ce.activeTexture(Ce.TEXTURE0+Se),Ce.bindTexture(Ce.TEXTURE_2D,null)}dispose(){if(this.disposed)return;const Ce=this.gl;Ce.bindFramebuffer(Ce.FRAMEBUFFER,null),Ce.deleteFramebuffer(this.framebuffer),Ce.bindBuffer(Ce.ARRAY_BUFFER,null),Ce.deleteBuffer(this.vertexbuffer),Ce.bindBuffer(Ce.ELEMENT_ARRAY_BUFFER,null),Ce.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){const Ce=this.gl,Se=Ce.createBuffer();if(!Se)throw new Error("createBuffer() returned null");const Ae=this.createDefaultGeometry();return Ce.bindBuffer(Ce.ARRAY_BUFFER,Se),Ce.bufferData(Ce.ARRAY_BUFFER,Ae,Ce.STATIC_DRAW),this.checkError(),Se}createFramebuffer(){const Ce=this.gl.createFramebuffer();if(!Ce)throw new Error("createFramebuffer returned null");return Ce}queryVitalParameters(){const Ce=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=Ce.getParameter(Ce.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=Ce.getParameter(Ce.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){const Ce=this.gl,Se=Ce.createTexture();Ce.bindTexture(Ce.TEXTURE_2D,Se);const Ae=this.version===2?Ce.RGBA32F:Ce.RGBA;Ce.texImage2D(Ce.TEXTURE_2D,0,Ae,1,1,0,Ce.RGBA,Ce.FLOAT,null);const Ie=Ce.createFramebuffer();Ce.bindFramebuffer(Ce.FRAMEBUFFER,Ie),Ce.framebufferTexture2D(Ce.FRAMEBUFFER,Ce.COLOR_ATTACHMENT0,Ce.TEXTURE_2D,Se,0);const Me=Ce.checkFramebufferStatus(Ce.FRAMEBUFFER)===Ce.FRAMEBUFFER_COMPLETE;return Ce.bindTexture(Ce.TEXTURE_2D,null),Ce.bindFramebuffer(Ce.FRAMEBUFFER,null),Ce.deleteTexture(Se),Ce.deleteFramebuffer(Ie),Me}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){const Ce=this.gl;let Se,Ae,Ie,Me,Fe;try{Se=Ce.createTexture(),Ae=Ce.createFramebuffer(),Ce.bindTexture(Ce.TEXTURE_2D,Se);const Ve=this.version===2?Ce.RGBA32F:Ce.RGBA;return Ce.texImage2D(Ce.TEXTURE_2D,0,Ve,1,1,0,Ce.RGBA,Ce.FLOAT,null),Ce.bindFramebuffer(Ce.FRAMEBUFFER,Ae),Ce.framebufferTexture2D(Ce.FRAMEBUFFER,Ce.COLOR_ATTACHMENT0,Ce.TEXTURE_2D,Se,0),Ce.enable(Ce.BLEND),Ie=Ce.createShader(Ce.VERTEX_SHADER),!!Ie&&(Ce.shaderSource(Ie,"void main(){}"),Ce.compileShader(Ie),Me=Ce.createShader(Ce.FRAGMENT_SHADER),!!Me&&(Ce.shaderSource(Me,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),Ce.compileShader(Me),Fe=Ce.createProgram(),!!Fe&&(Ce.attachShader(Fe,Ie),Ce.attachShader(Fe,Me),Ce.linkProgram(Fe),Ce.useProgram(Fe),Ce.drawArrays(Ce.POINTS,0,1),Ce.getError()===Ce.NO_ERROR)))}finally{Ce.disable(Ce.BLEND),Fe&&Ce.deleteProgram(Fe),Ie&&Ce.deleteShader(Ie),Me&&Ce.deleteShader(Me),Ae&&(Ce.bindFramebuffer(Ce.FRAMEBUFFER,null),Ce.deleteFramebuffer(Ae)),Se&&(Ce.bindTexture(Ce.TEXTURE_2D,null),Ce.deleteTexture(Se))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){const Ce=this.gl,Se=this.disjointTimerQueryWebgl2Extension,Ae=Ce.createQuery();return Ce.beginQuery(Se.TIME_ELAPSED_EXT,Ae),Ae}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const Ce=this.gl,Se=this.disjointTimerQueryWebgl2Extension;Ce.endQuery(Se.TIME_ELAPSED_EXT)}}isTimerResultAvailable(Ce){let Se=!1,Ae=!1;if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const Ie=this.gl,Me=this.disjointTimerQueryWebgl2Extension;Se=Ie.getQueryParameter(Ce,Ie.QUERY_RESULT_AVAILABLE),Ae=Ie.getParameter(Me.GPU_DISJOINT_EXT)}return Se&&!Ae}getTimerResult(Ce){let Se=0;if(this.version!==2)throw new Error("WebGL1 profiling currently not supported");{const Ae=this.gl;Se=Ae.getQueryParameter(Ce,Ae.QUERY_RESULT),Ae.deleteQuery(Ce)}return Se/1e6}async waitForQueryAndGetTime(Ce){return await(0,Re.repeatedTry)(()=>this.isTimerResultAvailable(Ce)),this.getTimerResult(Ce)}async createAndWaitForFence(){const Ce=this.createFence(this.gl);return this.pollFence(Ce)}createFence(Ce){let Se;const Ae=Ce,Ie=Ae.fenceSync(Ae.SYNC_GPU_COMMANDS_COMPLETE,0);return Ce.flush(),Se=Ie===null?()=>!0:()=>{const Me=Ae.clientWaitSync(Ie,0,0);return Me===Ae.ALREADY_SIGNALED||Me===Ae.CONDITION_SATISFIED},{query:Ie,isFencePassed:Se}}async pollFence(Ce){return new Promise(Se=>{this.addItemToPoll(()=>Ce.isFencePassed(),()=>Se())})}pollItems(){const Ce=ke(this.itemsToPoll.map(Se=>Se.isDoneFn));for(let Se=0;Se<=Ce;++Se){const{resolveFn:Ae}=this.itemsToPoll[Se];Ae()}this.itemsToPoll=this.itemsToPoll.slice(Ce+1)}async addItemToPoll(Ce,Se){this.itemsToPoll.push({isDoneFn:Ce,resolveFn:Se}),this.itemsToPoll.length>1||await(0,Re.repeatedTry)(()=>(this.pollItems(),this.itemsToPoll.length===0))}}},1036:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ExecutionPlan=void 0;const _e=t(6231);class Te{constructor(xe,Pe){this.op=xe,this.node=Pe}}e.ExecutionPlan=class{constructor(Ee,xe,Pe){this.graph=Ee,this.profiler=Pe,this.initialize(xe)}initialize(Ee){this.profiler.event("session","ExecutionPlan.initialize",()=>{const xe=this.graph.getNodes();if(xe.length!==Ee.length)throw new Error("The size of nodes and OPs do not match.");this._ops=Ee.map((Pe,Re)=>new Te(Pe,xe[Re])),this.reset(),this._starter=[],this._ops.forEach((Pe,Re)=>{let ke=!0;for(const Ce of Pe.node.inputs)if(!this._values[Ce]&&this.graph.getInputIndices().indexOf(Ce)===-1){ke=!1;break}ke&&this._starter.push(Re)})})}reset(){this._values=this.graph.getValues().map(Ee=>Ee.tensor)}async execute(Ee,xe){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();const Pe=Ee.createInferenceHandler(),Re=this.graph.getInputIndices();if(xe.length!==Re.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${xe.length} expected: ${Re.length}`);xe.forEach((Me,Fe)=>{const Ve=Re[Fe];this._values[Ve]=Me});const ke=this._starter.slice(0),Ce=this.graph.getValues(),Se=this.graph.getNodes();let Ae=0;for(;Ae<ke.length;){const Me=ke[Ae++],Fe=this._ops[Me],Ve=Fe.node.inputs.map(He=>this._values[He]);if(Ve.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${Fe.node}`);const je=Ve;_e.Logger.verbose("ExecPlan",`Runing op:${Fe.node.name} (${je.map((He,Xe)=>`'${Fe.node.inputs[Xe]}': ${He.type}[${He.dims.join(",")}]`).join(", ")})`);const Be=await this.profiler.event("node",Fe.node.name,async()=>Fe.op.impl(Pe,je,Fe.op.context));if(Be.length!==Fe.node.outputs.length)throw new Error("the size of output does not match model definition.");Be.forEach((He,Xe)=>{const Je=Fe.node.outputs[Xe];if(this._values[Je])throw new Error(`output [${Je}] already has value: op:${Fe.node.name}`);this._values[Je]=He});const qe=new Set;Be.forEach((He,Xe)=>{const Je=Fe.node.outputs[Xe];for(const Qe of Ce[Je].to){const Ke=Se[Qe];let Ye=!0;for(const pn of Ke.inputs)if(!this._values[pn]){Ye=!1;break}Ye&&qe.add(Qe)}}),ke.push(...qe)}const Ie=[];for(let Me=0;Me<this.graph.getOutputIndices().length;Me++){const Fe=this.graph.getOutputIndices()[Me],Ve=this._values[Fe];if(Ve===void 0)throw new Error(`required output [${Fe}] does not have value`);Fe===0?await Ve.getData():Ve.data,Ie.push(Ve)}return _e.Logger.verbose("ExecPlan","disposing of inferenceHandler"),Pe.dispose(),Ie})}}},7070:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;const _e=t(1446),Te=t(7778),Ee=t(9395),xe=t(9162),Pe=t(2517);var Re=Ee.onnxruntime.experimental.fbs;e.Graph={from:(Ae,Ie)=>new Se(Ae,Ie)};class ke{constructor(Ie){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,Ie&&(this.type=Pe.ProtoUtil.tensorValueTypeFromProto(Ie.type.tensorType))}get from(){return this._from}get to(){return this._to}}class Ce{constructor(Ie,Me){Ie instanceof _e.onnx.NodeProto?(this.name=Ie.name,this.opType=Ie.opType,this.attributes=new Te.Attribute(Ie.attribute)):Ie instanceof Re.Node&&(this.name=Me??Ie.name(),this.opType=Ie.opType(),this.attributes=new Te.Attribute(Pe.ProtoUtil.tensorAttributesFromORTFormat(Ie))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class Se{constructor(Ie,Me){if(!Ie)throw new TypeError("graph is empty");this.buildGraph(Ie),this.transformGraph(Me),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(Ie){if(Ie instanceof _e.onnx.GraphProto)this.buildGraphFromOnnxFormat(Ie);else{if(!(Ie instanceof Re.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(Ie)}}buildGraphFromOnnxFormat(Ie){const Me=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const Fe=new Map;if(!Ie.input)throw new Error("missing information in graph: input");const Ve=[];for(const je of Ie.input){if(Me.has(je.name))throw new Error(`duplicated input name: ${je.name}`);const Be=this._allData.push(new ke(je))-1;Me.set(je.name,Be),Ve.push(je.name)}if(!Ie.initializer)throw new Error("missing information in graph: initializer");for(const je of Ie.initializer){let Be=Me.get(je.name);if(Be===void 0){const qe=new ke;qe.type={shape:{dims:Pe.ProtoUtil.tensorDimsFromProto(je.dims)},tensorType:Pe.ProtoUtil.tensorDataTypeFromProto(je.dataType)},Be=this._allData.push(qe)-1,Me.set(je.name,Be)}this._allData[Be]._from=-1,this._allData[Be].tensor=xe.Tensor.fromProto(je)}for(let je=0;je<this._allData.length;je++)this._allData[je].tensor||(this._allInputIndices.push(je),this._allInputNames.push(Ve[je]));if(!Ie.output)throw new Error("missing information in graph: output");for(const je of Ie.output){if(Me.has(je.name))throw new Error(`duplicated output name: ${je.name}`);const Be=this._allData.push(new ke(je))-1;Me.set(je.name,Be),this._allOutputIndices.push(Be),this._allOutputNames.push(je.name)}if(!Ie.node)throw new Error("missing information in graph: node");for(const je of Ie.node){if(!je.name)for(let qe=0;;qe++){const He=`unnamed_${je.opType}_${qe}`;if(!Fe.has(He)){je.name=He;break}}if(Fe.has(je.name))throw new Error(`duplicated node name: ${je.name}`);const Be=this._nodes.push(new Ce(je))-1;Fe.set(je.name,Be)}for(let je=0;je<this._nodes.length;je++){const Be=this._nodes[je],qe=Ie.node[je];if(!qe.output)throw new Error(`missing output for node: ${qe.name}`);for(const He of qe.output){let Xe=Me.get(He);if(Xe===void 0&&(Xe=this._allData.push(new ke)-1,Me.set(He,Xe)),Be.outputs.push(Xe),this._allData[Xe]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${Xe}`);if(this._allData[Xe]._from=je,qe.opType==="Constant"){if(!qe.attribute||qe.attribute.length!==1||!qe.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!qe.output||qe.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");Be.outputs.pop(),Be.executeNode=!1,this._allData[Xe]._from=-1,this._allData[Xe].tensor=xe.Tensor.fromProto(qe.attribute[0].t)}}}for(let je=0;je<this._nodes.length;je++){const Be=this._nodes[je],qe=Ie.node[je];if(!qe.input)throw new Error(`missing input for node: ${qe.name}`);for(const He of qe.input){const Xe=Me.get(He);if(Xe===void 0){if(He===""&&qe.input.length===3&&qe.opType==="Resize")continue;throw new Error(`unrecognized input '${He}' for node: ${qe.name}`)}Be.inputs.push(Xe),this._allData[Xe]._to.push(je)}}return!0}buildGraphFromOrtFormat(Ie){var Me,Fe,Ve;const je=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const Be=new Map,qe=[];for(let He=0;He<Ie.inputsLength();He++){const Xe=Ie.inputs(He);if(je.has(Xe))throw new Error(`duplicated input name: ${Xe}`);for(let Je=0;Je<Ie.nodeArgsLength();Je++)if(((Me=Ie.nodeArgs(Je))===null||Me===void 0?void 0:Me.name())===Xe){const Qe=new ke;if(((Ve=(Fe=Ie.nodeArgs(Je))===null||Fe===void 0?void 0:Fe.type())===null||Ve===void 0?void 0:Ve.valueType())!==Re.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");const Ke=Ie.nodeArgs(Je).type().value(new Re.TensorTypeAndShape),Ye=Pe.ProtoUtil.tensorDataTypeFromProto(Ke.elemType()),pn=Ke.shape(),un=[];for(let mn=0;mn<pn.dimLength();mn++)un.push(Pe.LongUtil.longToNumber(pn.dim(mn).value().dimValue()));Qe.type={shape:{dims:un},tensorType:Ye};const fn=this._allData.push(Qe)-1;je.set(Xe,fn),qe.push(Xe)}}for(let He=0;He<Ie.initializersLength();He++){const Xe=Ie.initializers(He);let Je=je.get(Xe.name());if(Je===void 0){const Qe=new ke,Ke=Pe.ProtoUtil.tensorDimsFromORTFormat(Xe),Ye=Pe.ProtoUtil.tensorDataTypeFromProto(Xe.dataType());Qe.type={shape:{dims:Ke},tensorType:Ye},Je=this._allData.push(Qe)-1,je.set(Xe.name(),Je)}this._allData[Je]._from=-1,this._allData[Je].tensor=xe.Tensor.fromOrtTensor(Xe)}for(let He=0;He<this._allData.length;He++)this._allData[He].tensor||(this._allInputIndices.push(He),this._allInputNames.push(qe[He]));for(let He=0;He<Ie.outputsLength();He++){const Xe=Ie.outputs(He);if(je.has(Xe))throw new Error(`duplicated output name: ${Xe}`);const Je=this._allData.push(new ke)-1;je.set(Xe,Je),this._allOutputIndices.push(Je),this._allOutputNames.push(Xe)}if(!Ie.nodes)throw new Error("missing information in graph: node");for(let He=0;He<Ie.nodesLength();He++){const Xe=Ie.nodes(He);let Je=Xe.name();if(!Je)for(let Ke=0;Je=`unnamed_${Xe.opType()}_${Ke}`,Be.has(Je);Ke++);if(Be.has(Je))throw new Error(`duplicated node name: ${Je}`);const Qe=this._nodes.push(new Ce(Xe,Je))-1;Be.set(Je,Qe)}for(let He=0;He<this._nodes.length;He++){const Xe=this._nodes[He],Je=Ie.nodes(He);if(Je==null)throw new Error(`No node exists at index ${He}`);if(Je?.outputsLength()===0)throw new Error(`missing output for node: ${Je.name}`);for(let Qe=0;Qe<Je?.outputsLength();Qe++){const Ke=Je?.outputs(Qe);let Ye=je.get(Ke);if(Ye===void 0&&(Ye=this._allData.push(new ke)-1,je.set(Ke,Ye)),Xe.outputs.push(Ye),this._allData[Ye]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${Ye}`);if(this._allData[Ye]._from=He,Je.opType()==="Constant"){if(Je.attributesLength()!==1||!Je.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(Je.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");Xe.outputs.pop(),Xe.executeNode=!1,this._allData[Ye]._from=-1,this._allData[Ye].tensor=xe.Tensor.fromOrtTensor(Je.attributes(0).t())}}}for(let He=0;He<this._nodes.length;He++){const Xe=this._nodes[He],Je=Ie.nodes(He);if(Je.inputsLength()===0)throw new Error(`missing input for node: ${Je.name}`);for(let Qe=0;Qe<Je.inputsLength();Qe++){const Ke=Je.inputs(Qe),Ye=je.get(Ke);if(Ye===void 0)throw new Error(`unrecognized input '${Ke}' for node: ${Je.name()}`);Xe.inputs.push(Ye),this._allData[Ye]._to.push(He)}}}checkIsAcyclic(){const Ie=new Set;this._allInputIndices.forEach(Ve=>{this._allData[Ve]._to.forEach(je=>{Ie.add(je)})});const Me=Array.from(Ie),Fe=new Array(this._nodes.length).fill("white");for(;Me.length>0;){const Ve=Me.pop();Fe[Ve]==="gray"?Fe[Ve]="black":(Me.push(Ve),Fe[Ve]="gray",this._nodes[Ve].outputs.forEach(je=>{const Be=this._allData[je];if(Be.tensor!==void 0)throw new Error("node outputs should not be initialized");if(Be._from!==Ve)throw new Error("from property of the Value object doesn't match index of Node being processed");Be._to.forEach(qe=>{if(Fe[qe]==="gray")throw new Error("model graph is cyclic");Fe[qe]==="white"&&Me.push(qe)})}))}}transformGraph(Ie){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),Ie&&Ie.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let Ie=0;for(let Me=0;Me<this._nodes.length;Me++)this._nodes[Me].executeNode?Ie>0&&(this._nodes[Me].inputs.forEach(Fe=>{const Ve=this._allData[Fe]._to.indexOf(Me+Ie);Ve!==-1&&(this._allData[Fe]._to[Ve]=Me)}),this._nodes[Me].outputs.forEach(Fe=>{this._allData[Fe]._from&&this._allData[Fe]._from===Me+Ie&&(this._allData[Fe]._from=Me)})):(Ie++,this._nodes[Me].outputs.forEach(Fe=>{this._allData[Fe]._from=-2}),this._nodes.splice(Me,1),Me--);Ie=0;for(let Me=0;Me<this._allData.length;Me++)if(this._allData[Me].from!==-2||this._allOutputIndices.indexOf(Me+Ie)!==-1){if(Ie>0){let Fe=-1;this._allData[Me].from!==void 0&&this._allData[Me].from!==-1?(Fe=this._nodes[this._allData[Me].from].outputs.indexOf(Me+Ie),Fe!==-1&&(this._nodes[this._allData[Me].from].outputs[Fe]=Me)):(Fe=this._allInputIndices.indexOf(Me+Ie),Fe!==-1&&(this._allInputIndices[Fe]=Me)),this._allData[Me].to.forEach(Ve=>{Fe=this._nodes[Ve].inputs.indexOf(Me+Ie),Fe!==-1&&(this._nodes[Ve].inputs[Fe]=Me)}),this._allData[Me].to.length===0&&(Fe=this._allOutputIndices.indexOf(Me+Ie),Fe!==-1&&(this._allOutputIndices[Fe]=Me))}}else Ie++,this._allData.splice(Me,1),Me--}deleteNode(Ie){const Me=this._nodes[Ie];if(Me.outputs.length>1){for(let He=1;He<Me.outputs.length;He++)if(this._allData[Me.outputs[He]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}Me.executeNode=!1;const Fe=Me.inputs[0],Ve=Me.outputs[0],je=this._allData[Ve].to,Be=this._allData[Fe].to.indexOf(Ie);if(Be===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[Fe].to.splice(Be,1),this._allData[Ve]._to=[];const qe=this._allOutputIndices.indexOf(Ve);if(qe!==-1&&(this._allOutputIndices[qe]=Fe),je&&je.length>0)for(const He of je){const Xe=this._nodes[He].inputs.indexOf(Ve);if(Xe===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[He].inputs[Xe]=Fe,this._allData[Fe].to.push(He)}}removeAllDropoutNodes(){let Ie=0;for(const Me of this._nodes){if(Me.opType==="Dropout"){if(Me.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(Me.outputs.length!==1&&Me.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(Me.outputs.length===2&&this._allData[Me.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(Ie)}Ie++}}removeAllIdentityNodes(){let Ie=0;for(const Me of this._nodes)Me.opType==="Identity"&&this.deleteNode(Ie),Ie++}isActivation(Ie){switch(Ie.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(const Ie of this._nodes)if(Ie.opType==="Conv"){const Me=this._allData[Ie.outputs[0]]._to;if(Me.length===1&&this.isActivation(this._nodes[Me[0]])){const Fe=this._nodes[Me[0]];if(Fe.opType==="Clip")if(Fe.inputs.length===1)try{Ie.attributes.set("activation_params","floats",[Fe.attributes.getFloat("min"),Fe.attributes.getFloat("max")])}catch{Ie.attributes.set("activation_params","floats",[Pe.MIN_CLIP,Pe.MAX_CLIP])}else{if(!(Fe.inputs.length>=3&&this._allData[Fe.inputs[1]].tensor!==void 0&&this._allData[Fe.inputs[2]].tensor!==void 0))continue;Ie.attributes.set("activation_params","floats",[this._allData[Fe.inputs[1]].tensor.floatData[0],this._allData[Fe.inputs[2]].tensor.floatData[0]])}Ie.attributes.set("activation","string",Fe.opType),this.deleteNode(Me[0])}}}}},6231:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.now=e.Profiler=e.Logger=void 0;const t={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},_e={none:new class{log(Ce,Se,Ae){}},console:new class{log(Ce,Se,Ae){console.log(`${this.color(Ce)} ${Ae?"\x1B[35m"+Ae+"\x1B[0m ":""}${Se}`)}color(Ce){switch(Ce){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${Ce}`)}}}},Te={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1};let Ee={"":Te};function xe(Ce,Se,Ae,Ie){if(Se===void 0)return Me=Ce,{verbose:xe.verbose.bind(null,Me),info:xe.info.bind(null,Me),warning:xe.warning.bind(null,Me),error:xe.error.bind(null,Me),fatal:xe.fatal.bind(null,Me)};if(Ae===void 0)Pe(Ce,Se);else if(typeof Ae=="number"&&Ie===void 0)Pe(Ce,Se);else if(typeof Ae=="string"&&Ie===void 0)Pe(Ce,Ae,0,Se);else{if(typeof Ae!="string"||typeof Ie!="number")throw new TypeError("input is valid");Pe(Ce,Ae,0,Se)}var Me}function Pe(Ce,Se,Ae,Ie){const Me=Ee[Ie||""]||Ee[""];t[Ce]<t[Me.minimalSeverity]||(Me.logDateTime&&(Se=`${new Date().toISOString()}|${Se}`),Me.logSourceLocation,_e[Me.provider].log(Ce,Se,Ie))}(function(Ce){function Se(Ie){Ee={},Ae("",Ie||{})}function Ae(Ie,Me){if(Ie==="*")Se(Me);else{const Fe=Ee[Ie]||Te;Ee[Ie]={provider:Me.provider||Fe.provider,minimalSeverity:Me.minimalSeverity||Fe.minimalSeverity,logDateTime:Me.logDateTime===void 0?Fe.logDateTime:Me.logDateTime,logSourceLocation:Me.logSourceLocation===void 0?Fe.logSourceLocation:Me.logSourceLocation}}}Ce.verbose=function(Ie,Me){Ce("verbose",Ie,Me)},Ce.info=function(Ie,Me){Ce("info",Ie,Me)},Ce.warning=function(Ie,Me){Ce("warning",Ie,Me)},Ce.error=function(Ie,Me){Ce("error",Ie,Me)},Ce.fatal=function(Ie,Me){Ce("fatal",Ie,Me)},Ce.reset=Se,Ce.set=Ae,Ce.setWithEnv=function(Ie){const Me={};Ie.logLevel&&(Me.minimalSeverity=Ie.logLevel),Ae("",Me)}})(xe||(xe={})),e.Logger=xe;class Re{constructor(Se,Ae,Ie,Me,Fe,Ve){this.category=Se,this.name=Ae,this.startTime=Ie,this.endCallback=Me,this.timer=Fe,this.ctx=Ve}end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}}class ke{constructor(Se,Ae,Ie,Me){this.category=Se,this.name=Ae,this.startTime=Ie,this.endTime=Me}}e.Profiler=class{static create(Ce){return Ce===void 0?new this:new this(Ce.maxNumberEvents,Ce.flushBatchSize,Ce.flushIntervalInMilliseconds)}constructor(Ce,Se,Ae){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=Ce===void 0?1e4:Ce,this._flushBatchSize=Se===void 0?10:Se,this._flushIntervalInMilliseconds=Ae===void 0?5e3:Ae}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,e.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(Ce,Se,Ae,Ie){const Me=this._started?this.begin(Ce,Se,Ie):void 0;let Fe=!1;const Ve=Ae();if(Ve&&typeof Ve.then=="function")return Fe=!0,new Promise((je,Be)=>{Ve.then(async qe=>{Me&&await Me.end(),je(qe)},async qe=>{Me&&await Me.end(),Be(qe)})});if(!Fe&&Me){const je=Me.end();if(je&&typeof je.then=="function")return new Promise((Be,qe)=>{je.then(()=>{Be(Ve)},He=>{qe(He)})})}return Ve}begin(Ce,Se,Ae){if(!this._started)throw new Error("profiler is not started yet");if(Ae===void 0){const Ie=(0,e.now)();return this.flush(Ie),new Re(Ce,Se,Ie,Me=>this.endSync(Me))}{const Ie=Ae.beginTimer();return new Re(Ce,Se,0,async Me=>this.end(Me),Ie,Ae)}}async end(Ce){const Se=await Ce.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new ke(Ce.category,Ce.name,Ce.startTime,Se)),this.flush(Se))}endSync(Ce){const Se=(0,e.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new ke(Ce.category,Ce.name,Ce.startTime,Se)),this.flush(Se))}logOneEvent(Ce){e.Logger.verbose(`Profiler.${Ce.category}`,`${(Ce.endTime-Ce.startTime).toFixed(2)}ms on event '${Ce.name}' at ${Ce.endTime.toFixed(2)}`)}flush(Ce){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||Ce-this._flushTime>=this._flushIntervalInMilliseconds){for(const Se=this._flushPointer;this._flushPointer<Se+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,e.now)()}}get started(){return this._started}},e.now=typeof performance<"u"&&performance.now?()=>performance.now():Date.now},2644:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;const _e=t(5686),Te=t(1446),Ee=t(7070),xe=t(9395),Pe=t(2517);var Re=xe.onnxruntime.experimental.fbs;e.Model=class{constructor(){}load(ke,Ce,Se){if(!Se)try{return void this.loadFromOnnxFormat(ke,Ce)}catch(Ae){if(Se!==void 0)throw Ae}this.loadFromOrtFormat(ke,Ce)}loadFromOnnxFormat(ke,Ce){const Se=Te.onnx.ModelProto.decode(ke);if(Pe.LongUtil.longToNumber(Se.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=Se.opsetImport.map(Ae=>({domain:Ae.domain,version:Pe.LongUtil.longToNumber(Ae.version)})),this._graph=Ee.Graph.from(Se.graph,Ce)}loadFromOrtFormat(ke,Ce){const Se=new _e.flatbuffers.ByteBuffer(ke),Ae=Re.InferenceSession.getRootAsInferenceSession(Se).model();if(Pe.LongUtil.longToNumber(Ae.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let Ie=0;Ie<Ae.opsetImportLength();Ie++){const Me=Ae.opsetImport(Ie);this._opsets.push({domain:Me?.domain(),version:Pe.LongUtil.longToNumber(Me.version())})}this._graph=Ee.Graph.from(Ae.graph(),Ce)}get graph(){return this._graph}get opsets(){return this._opsets}}},782:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FLOAT_TYPES=e.INT_TYPES=e.NUMBER_TYPES=void 0,e.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],e.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],e.FLOAT_TYPES=["float32","float64"]},1047:(r,e)=>{function t(_e,Te){if(Te.endsWith("+")){const Ee=Number.parseInt(Te.substring(0,Te.length-1),10);return!isNaN(Ee)&&Ee<=_e}if(Te.split("-").length===2){const Ee=Te.split("-"),xe=Number.parseInt(Ee[0],10),Pe=Number.parseInt(Ee[1],10);return!isNaN(xe)&&!isNaN(Pe)&&xe<=_e&&_e<=Pe}return Number.parseInt(Te,10)===_e}Object.defineProperty(e,"__esModule",{value:!0}),e.resolveOperator=void 0,e.resolveOperator=function(_e,Te,Ee){for(const xe of Ee){const Pe=xe[0],Re=xe[1],ke=xe[2],Ce=xe[3],Se=xe[4];if(_e.opType===Pe){for(const Ae of Te)if((Ae.domain===Re||Ae.domain==="ai.onnx"&&Re==="")&&t(Ae.version,ke))return{opImpl:Ce,opInit:Se}}}throw new TypeError(`cannot resolve operator '${_e.opType}' with opsets: ${Te.map(xe=>`${xe.domain||"ai.onnx"} v${xe.version}`).join(", ")}`)}},9395:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.onnxruntime=void 0;const _e=t(5686);var Te,Ee;Te=e.onnxruntime||(e.onnxruntime={}),function(xe){(function(Pe){Pe[Pe.UNDEFINED=0]="UNDEFINED",Pe[Pe.FLOAT=1]="FLOAT",Pe[Pe.INT=2]="INT",Pe[Pe.STRING=3]="STRING",Pe[Pe.TENSOR=4]="TENSOR",Pe[Pe.GRAPH=5]="GRAPH",Pe[Pe.FLOATS=6]="FLOATS",Pe[Pe.INTS=7]="INTS",Pe[Pe.STRINGS=8]="STRINGS",Pe[Pe.TENSORS=9]="TENSORS",Pe[Pe.GRAPHS=10]="GRAPHS",Pe[Pe.SPARSE_TENSOR=11]="SPARSE_TENSOR",Pe[Pe.SPARSE_TENSORS=12]="SPARSE_TENSORS"})(xe.AttributeType||(xe.AttributeType={}))}((Ee=Te.experimental||(Te.experimental={})).fbs||(Ee.fbs={})),function(xe){(function(Pe){(function(Re){(function(ke){ke[ke.UNKNOWN=0]="UNKNOWN",ke[ke.VALUE=1]="VALUE",ke[ke.PARAM=2]="PARAM"})(Re.DimensionValueType||(Re.DimensionValueType={}))})(Pe.fbs||(Pe.fbs={}))})(xe.experimental||(xe.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(xe){(function(Pe){(function(Re){(function(ke){ke[ke.UNDEFINED=0]="UNDEFINED",ke[ke.FLOAT=1]="FLOAT",ke[ke.UINT8=2]="UINT8",ke[ke.INT8=3]="INT8",ke[ke.UINT16=4]="UINT16",ke[ke.INT16=5]="INT16",ke[ke.INT32=6]="INT32",ke[ke.INT64=7]="INT64",ke[ke.STRING=8]="STRING",ke[ke.BOOL=9]="BOOL",ke[ke.FLOAT16=10]="FLOAT16",ke[ke.DOUBLE=11]="DOUBLE",ke[ke.UINT32=12]="UINT32",ke[ke.UINT64=13]="UINT64",ke[ke.COMPLEX64=14]="COMPLEX64",ke[ke.COMPLEX128=15]="COMPLEX128",ke[ke.BFLOAT16=16]="BFLOAT16"})(Re.TensorDataType||(Re.TensorDataType={}))})(Pe.fbs||(Pe.fbs={}))})(xe.experimental||(xe.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(xe){(function(Pe){(function(Re){(function(ke){ke[ke.Primitive=0]="Primitive",ke[ke.Fused=1]="Fused"})(Re.NodeType||(Re.NodeType={}))})(Pe.fbs||(Pe.fbs={}))})(xe.experimental||(xe.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(xe){(function(Pe){(function(Re){(function(ke){ke[ke.NONE=0]="NONE",ke[ke.tensor_type=1]="tensor_type",ke[ke.sequence_type=2]="sequence_type",ke[ke.map_type=3]="map_type"})(Re.TypeInfoValue||(Re.TypeInfoValue={}))})(Pe.fbs||(Pe.fbs={}))})(xe.experimental||(xe.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(xe){(function(Pe){(function(Re){class ke{constructor(){this.bb=null,this.bb_pos=0}__init(Se,Ae){return this.bb_pos=Se,this.bb=Ae,this}static getRootAsShape(Se,Ae){return(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}static getSizePrefixedRootAsShape(Se,Ae){return Se.setPosition(Se.position()+_e.flatbuffers.SIZE_PREFIX_LENGTH),(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}dim(Se,Ae){let Ie=this.bb.__offset(this.bb_pos,4);return Ie?(Ae||new xe.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Ie)+4*Se),this.bb):null}dimLength(){let Se=this.bb.__offset(this.bb_pos,4);return Se?this.bb.__vector_len(this.bb_pos+Se):0}static startShape(Se){Se.startObject(1)}static addDim(Se,Ae){Se.addFieldOffset(0,Ae,0)}static createDimVector(Se,Ae){Se.startVector(4,Ae.length,4);for(let Ie=Ae.length-1;Ie>=0;Ie--)Se.addOffset(Ae[Ie]);return Se.endVector()}static startDimVector(Se,Ae){Se.startVector(4,Ae,4)}static endShape(Se){return Se.endObject()}static createShape(Se,Ae){return ke.startShape(Se),ke.addDim(Se,Ae),ke.endShape(Se)}}Re.Shape=ke})(Pe.fbs||(Pe.fbs={}))})(xe.experimental||(xe.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(xe){(function(Pe){(function(Re){class ke{constructor(){this.bb=null,this.bb_pos=0}__init(Se,Ae){return this.bb_pos=Se,this.bb=Ae,this}static getRootAsDimension(Se,Ae){return(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}static getSizePrefixedRootAsDimension(Se,Ae){return Se.setPosition(Se.position()+_e.flatbuffers.SIZE_PREFIX_LENGTH),(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}value(Se){let Ae=this.bb.__offset(this.bb_pos,4);return Ae?(Se||new xe.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+Ae),this.bb):null}denotation(Se){let Ae=this.bb.__offset(this.bb_pos,6);return Ae?this.bb.__string(this.bb_pos+Ae,Se):null}static startDimension(Se){Se.startObject(2)}static addValue(Se,Ae){Se.addFieldOffset(0,Ae,0)}static addDenotation(Se,Ae){Se.addFieldOffset(1,Ae,0)}static endDimension(Se){return Se.endObject()}static createDimension(Se,Ae,Ie){return ke.startDimension(Se),ke.addValue(Se,Ae),ke.addDenotation(Se,Ie),ke.endDimension(Se)}}Re.Dimension=ke})(Pe.fbs||(Pe.fbs={}))})(xe.experimental||(xe.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(xe){(function(Pe){(function(Re){class ke{constructor(){this.bb=null,this.bb_pos=0}__init(Se,Ae){return this.bb_pos=Se,this.bb=Ae,this}static getRootAsDimensionValue(Se,Ae){return(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}static getSizePrefixedRootAsDimensionValue(Se,Ae){return Se.setPosition(Se.position()+_e.flatbuffers.SIZE_PREFIX_LENGTH),(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}dimType(){let Se=this.bb.__offset(this.bb_pos,4);return Se?this.bb.readInt8(this.bb_pos+Se):xe.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let Se=this.bb.__offset(this.bb_pos,6);return Se?this.bb.readInt64(this.bb_pos+Se):this.bb.createLong(0,0)}dimParam(Se){let Ae=this.bb.__offset(this.bb_pos,8);return Ae?this.bb.__string(this.bb_pos+Ae,Se):null}static startDimensionValue(Se){Se.startObject(3)}static addDimType(Se,Ae){Se.addFieldInt8(0,Ae,xe.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue(Se,Ae){Se.addFieldInt64(1,Ae,Se.createLong(0,0))}static addDimParam(Se,Ae){Se.addFieldOffset(2,Ae,0)}static endDimensionValue(Se){return Se.endObject()}static createDimensionValue(Se,Ae,Ie,Me){return ke.startDimensionValue(Se),ke.addDimType(Se,Ae),ke.addDimValue(Se,Ie),ke.addDimParam(Se,Me),ke.endDimensionValue(Se)}}Re.DimensionValue=ke})(Pe.fbs||(Pe.fbs={}))})(xe.experimental||(xe.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(xe){(function(Pe){(function(Re){class ke{constructor(){this.bb=null,this.bb_pos=0}__init(Se,Ae){return this.bb_pos=Se,this.bb=Ae,this}static getRootAsTensorTypeAndShape(Se,Ae){return(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}static getSizePrefixedRootAsTensorTypeAndShape(Se,Ae){return Se.setPosition(Se.position()+_e.flatbuffers.SIZE_PREFIX_LENGTH),(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}elemType(){let Se=this.bb.__offset(this.bb_pos,4);return Se?this.bb.readInt32(this.bb_pos+Se):xe.experimental.fbs.TensorDataType.UNDEFINED}shape(Se){let Ae=this.bb.__offset(this.bb_pos,6);return Ae?(Se||new xe.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+Ae),this.bb):null}static startTensorTypeAndShape(Se){Se.startObject(2)}static addElemType(Se,Ae){Se.addFieldInt32(0,Ae,xe.experimental.fbs.TensorDataType.UNDEFINED)}static addShape(Se,Ae){Se.addFieldOffset(1,Ae,0)}static endTensorTypeAndShape(Se){return Se.endObject()}static createTensorTypeAndShape(Se,Ae,Ie){return ke.startTensorTypeAndShape(Se),ke.addElemType(Se,Ae),ke.addShape(Se,Ie),ke.endTensorTypeAndShape(Se)}}Re.TensorTypeAndShape=ke})(Pe.fbs||(Pe.fbs={}))})(xe.experimental||(xe.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(xe){(function(Pe){(function(Re){class ke{constructor(){this.bb=null,this.bb_pos=0}__init(Se,Ae){return this.bb_pos=Se,this.bb=Ae,this}static getRootAsMapType(Se,Ae){return(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}static getSizePrefixedRootAsMapType(Se,Ae){return Se.setPosition(Se.position()+_e.flatbuffers.SIZE_PREFIX_LENGTH),(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}keyType(){let Se=this.bb.__offset(this.bb_pos,4);return Se?this.bb.readInt32(this.bb_pos+Se):xe.experimental.fbs.TensorDataType.UNDEFINED}valueType(Se){let Ae=this.bb.__offset(this.bb_pos,6);return Ae?(Se||new xe.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+Ae),this.bb):null}static startMapType(Se){Se.startObject(2)}static addKeyType(Se,Ae){Se.addFieldInt32(0,Ae,xe.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType(Se,Ae){Se.addFieldOffset(1,Ae,0)}static endMapType(Se){return Se.endObject()}static createMapType(Se,Ae,Ie){return ke.startMapType(Se),ke.addKeyType(Se,Ae),ke.addValueType(Se,Ie),ke.endMapType(Se)}}Re.MapType=ke})(Pe.fbs||(Pe.fbs={}))})(xe.experimental||(xe.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(xe){(function(Pe){(function(Re){class ke{constructor(){this.bb=null,this.bb_pos=0}__init(Se,Ae){return this.bb_pos=Se,this.bb=Ae,this}static getRootAsSequenceType(Se,Ae){return(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}static getSizePrefixedRootAsSequenceType(Se,Ae){return Se.setPosition(Se.position()+_e.flatbuffers.SIZE_PREFIX_LENGTH),(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}elemType(Se){let Ae=this.bb.__offset(this.bb_pos,4);return Ae?(Se||new xe.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+Ae),this.bb):null}static startSequenceType(Se){Se.startObject(1)}static addElemType(Se,Ae){Se.addFieldOffset(0,Ae,0)}static endSequenceType(Se){return Se.endObject()}static createSequenceType(Se,Ae){return ke.startSequenceType(Se),ke.addElemType(Se,Ae),ke.endSequenceType(Se)}}Re.SequenceType=ke})(Pe.fbs||(Pe.fbs={}))})(xe.experimental||(xe.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(xe){(function(Pe){(Pe.fbs||(Pe.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(Re,ke){return this.bb_pos=Re,this.bb=ke,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(Re,ke,Ce,Se){return Re.prep(4,12),Re.writeInt32(Se),Re.writeInt32(Ce),Re.writeInt32(ke),Re.offset()}}})(xe.experimental||(xe.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(xe){(function(Pe){(function(Re){class ke{constructor(){this.bb=null,this.bb_pos=0}__init(Se,Ae){return this.bb_pos=Se,this.bb=Ae,this}static getRootAsNodeEdge(Se,Ae){return(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}static getSizePrefixedRootAsNodeEdge(Se,Ae){return Se.setPosition(Se.position()+_e.flatbuffers.SIZE_PREFIX_LENGTH),(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}nodeIndex(){let Se=this.bb.__offset(this.bb_pos,4);return Se?this.bb.readUint32(this.bb_pos+Se):0}inputEdges(Se,Ae){let Ie=this.bb.__offset(this.bb_pos,6);return Ie?(Ae||new xe.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+Ie)+12*Se,this.bb):null}inputEdgesLength(){let Se=this.bb.__offset(this.bb_pos,6);return Se?this.bb.__vector_len(this.bb_pos+Se):0}outputEdges(Se,Ae){let Ie=this.bb.__offset(this.bb_pos,8);return Ie?(Ae||new xe.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+Ie)+12*Se,this.bb):null}outputEdgesLength(){let Se=this.bb.__offset(this.bb_pos,8);return Se?this.bb.__vector_len(this.bb_pos+Se):0}static startNodeEdge(Se){Se.startObject(3)}static addNodeIndex(Se,Ae){Se.addFieldInt32(0,Ae,0)}static addInputEdges(Se,Ae){Se.addFieldOffset(1,Ae,0)}static startInputEdgesVector(Se,Ae){Se.startVector(12,Ae,4)}static addOutputEdges(Se,Ae){Se.addFieldOffset(2,Ae,0)}static startOutputEdgesVector(Se,Ae){Se.startVector(12,Ae,4)}static endNodeEdge(Se){return Se.endObject()}static createNodeEdge(Se,Ae,Ie,Me){return ke.startNodeEdge(Se),ke.addNodeIndex(Se,Ae),ke.addInputEdges(Se,Ie),ke.addOutputEdges(Se,Me),ke.endNodeEdge(Se)}}Re.NodeEdge=ke})(Pe.fbs||(Pe.fbs={}))})(xe.experimental||(xe.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(xe){(function(Pe){(function(Re){class ke{constructor(){this.bb=null,this.bb_pos=0}__init(Se,Ae){return this.bb_pos=Se,this.bb=Ae,this}static getRootAsNode(Se,Ae){return(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}static getSizePrefixedRootAsNode(Se,Ae){return Se.setPosition(Se.position()+_e.flatbuffers.SIZE_PREFIX_LENGTH),(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}name(Se){let Ae=this.bb.__offset(this.bb_pos,4);return Ae?this.bb.__string(this.bb_pos+Ae,Se):null}docString(Se){let Ae=this.bb.__offset(this.bb_pos,6);return Ae?this.bb.__string(this.bb_pos+Ae,Se):null}domain(Se){let Ae=this.bb.__offset(this.bb_pos,8);return Ae?this.bb.__string(this.bb_pos+Ae,Se):null}sinceVersion(){let Se=this.bb.__offset(this.bb_pos,10);return Se?this.bb.readInt32(this.bb_pos+Se):0}index(){let Se=this.bb.__offset(this.bb_pos,12);return Se?this.bb.readUint32(this.bb_pos+Se):0}opType(Se){let Ae=this.bb.__offset(this.bb_pos,14);return Ae?this.bb.__string(this.bb_pos+Ae,Se):null}type(){let Se=this.bb.__offset(this.bb_pos,16);return Se?this.bb.readInt32(this.bb_pos+Se):xe.experimental.fbs.NodeType.Primitive}executionProviderType(Se){let Ae=this.bb.__offset(this.bb_pos,18);return Ae?this.bb.__string(this.bb_pos+Ae,Se):null}inputs(Se,Ae){let Ie=this.bb.__offset(this.bb_pos,20);return Ie?this.bb.__string(this.bb.__vector(this.bb_pos+Ie)+4*Se,Ae):null}inputsLength(){let Se=this.bb.__offset(this.bb_pos,20);return Se?this.bb.__vector_len(this.bb_pos+Se):0}outputs(Se,Ae){let Ie=this.bb.__offset(this.bb_pos,22);return Ie?this.bb.__string(this.bb.__vector(this.bb_pos+Ie)+4*Se,Ae):null}outputsLength(){let Se=this.bb.__offset(this.bb_pos,22);return Se?this.bb.__vector_len(this.bb_pos+Se):0}attributes(Se,Ae){let Ie=this.bb.__offset(this.bb_pos,24);return Ie?(Ae||new xe.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Ie)+4*Se),this.bb):null}attributesLength(){let Se=this.bb.__offset(this.bb_pos,24);return Se?this.bb.__vector_len(this.bb_pos+Se):0}inputArgCounts(Se){let Ae=this.bb.__offset(this.bb_pos,26);return Ae?this.bb.readInt32(this.bb.__vector(this.bb_pos+Ae)+4*Se):0}inputArgCountsLength(){let Se=this.bb.__offset(this.bb_pos,26);return Se?this.bb.__vector_len(this.bb_pos+Se):0}inputArgCountsArray(){let Se=this.bb.__offset(this.bb_pos,26);return Se?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+Se),this.bb.__vector_len(this.bb_pos+Se)):null}implicitInputs(Se,Ae){let Ie=this.bb.__offset(this.bb_pos,28);return Ie?this.bb.__string(this.bb.__vector(this.bb_pos+Ie)+4*Se,Ae):null}implicitInputsLength(){let Se=this.bb.__offset(this.bb_pos,28);return Se?this.bb.__vector_len(this.bb_pos+Se):0}static startNode(Se){Se.startObject(13)}static addName(Se,Ae){Se.addFieldOffset(0,Ae,0)}static addDocString(Se,Ae){Se.addFieldOffset(1,Ae,0)}static addDomain(Se,Ae){Se.addFieldOffset(2,Ae,0)}static addSinceVersion(Se,Ae){Se.addFieldInt32(3,Ae,0)}static addIndex(Se,Ae){Se.addFieldInt32(4,Ae,0)}static addOpType(Se,Ae){Se.addFieldOffset(5,Ae,0)}static addType(Se,Ae){Se.addFieldInt32(6,Ae,xe.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType(Se,Ae){Se.addFieldOffset(7,Ae,0)}static addInputs(Se,Ae){Se.addFieldOffset(8,Ae,0)}static createInputsVector(Se,Ae){Se.startVector(4,Ae.length,4);for(let Ie=Ae.length-1;Ie>=0;Ie--)Se.addOffset(Ae[Ie]);return Se.endVector()}static startInputsVector(Se,Ae){Se.startVector(4,Ae,4)}static addOutputs(Se,Ae){Se.addFieldOffset(9,Ae,0)}static createOutputsVector(Se,Ae){Se.startVector(4,Ae.length,4);for(let Ie=Ae.length-1;Ie>=0;Ie--)Se.addOffset(Ae[Ie]);return Se.endVector()}static startOutputsVector(Se,Ae){Se.startVector(4,Ae,4)}static addAttributes(Se,Ae){Se.addFieldOffset(10,Ae,0)}static createAttributesVector(Se,Ae){Se.startVector(4,Ae.length,4);for(let Ie=Ae.length-1;Ie>=0;Ie--)Se.addOffset(Ae[Ie]);return Se.endVector()}static startAttributesVector(Se,Ae){Se.startVector(4,Ae,4)}static addInputArgCounts(Se,Ae){Se.addFieldOffset(11,Ae,0)}static createInputArgCountsVector(Se,Ae){Se.startVector(4,Ae.length,4);for(let Ie=Ae.length-1;Ie>=0;Ie--)Se.addInt32(Ae[Ie]);return Se.endVector()}static startInputArgCountsVector(Se,Ae){Se.startVector(4,Ae,4)}static addImplicitInputs(Se,Ae){Se.addFieldOffset(12,Ae,0)}static createImplicitInputsVector(Se,Ae){Se.startVector(4,Ae.length,4);for(let Ie=Ae.length-1;Ie>=0;Ie--)Se.addOffset(Ae[Ie]);return Se.endVector()}static startImplicitInputsVector(Se,Ae){Se.startVector(4,Ae,4)}static endNode(Se){return Se.endObject()}static createNode(Se,Ae,Ie,Me,Fe,Ve,je,Be,qe,He,Xe,Je,Qe,Ke){return ke.startNode(Se),ke.addName(Se,Ae),ke.addDocString(Se,Ie),ke.addDomain(Se,Me),ke.addSinceVersion(Se,Fe),ke.addIndex(Se,Ve),ke.addOpType(Se,je),ke.addType(Se,Be),ke.addExecutionProviderType(Se,qe),ke.addInputs(Se,He),ke.addOutputs(Se,Xe),ke.addAttributes(Se,Je),ke.addInputArgCounts(Se,Qe),ke.addImplicitInputs(Se,Ke),ke.endNode(Se)}}Re.Node=ke})(Pe.fbs||(Pe.fbs={}))})(xe.experimental||(xe.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(xe){(function(Pe){(function(Re){class ke{constructor(){this.bb=null,this.bb_pos=0}__init(Se,Ae){return this.bb_pos=Se,this.bb=Ae,this}static getRootAsValueInfo(Se,Ae){return(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}static getSizePrefixedRootAsValueInfo(Se,Ae){return Se.setPosition(Se.position()+_e.flatbuffers.SIZE_PREFIX_LENGTH),(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}name(Se){let Ae=this.bb.__offset(this.bb_pos,4);return Ae?this.bb.__string(this.bb_pos+Ae,Se):null}docString(Se){let Ae=this.bb.__offset(this.bb_pos,6);return Ae?this.bb.__string(this.bb_pos+Ae,Se):null}type(Se){let Ae=this.bb.__offset(this.bb_pos,8);return Ae?(Se||new xe.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+Ae),this.bb):null}static startValueInfo(Se){Se.startObject(3)}static addName(Se,Ae){Se.addFieldOffset(0,Ae,0)}static addDocString(Se,Ae){Se.addFieldOffset(1,Ae,0)}static addType(Se,Ae){Se.addFieldOffset(2,Ae,0)}static endValueInfo(Se){return Se.endObject()}static createValueInfo(Se,Ae,Ie,Me){return ke.startValueInfo(Se),ke.addName(Se,Ae),ke.addDocString(Se,Ie),ke.addType(Se,Me),ke.endValueInfo(Se)}}Re.ValueInfo=ke})(Pe.fbs||(Pe.fbs={}))})(xe.experimental||(xe.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(xe){(function(Pe){(function(Re){class ke{constructor(){this.bb=null,this.bb_pos=0}__init(Se,Ae){return this.bb_pos=Se,this.bb=Ae,this}static getRootAsTypeInfo(Se,Ae){return(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}static getSizePrefixedRootAsTypeInfo(Se,Ae){return Se.setPosition(Se.position()+_e.flatbuffers.SIZE_PREFIX_LENGTH),(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}denotation(Se){let Ae=this.bb.__offset(this.bb_pos,4);return Ae?this.bb.__string(this.bb_pos+Ae,Se):null}valueType(){let Se=this.bb.__offset(this.bb_pos,6);return Se?this.bb.readUint8(this.bb_pos+Se):xe.experimental.fbs.TypeInfoValue.NONE}value(Se){let Ae=this.bb.__offset(this.bb_pos,8);return Ae?this.bb.__union(Se,this.bb_pos+Ae):null}static startTypeInfo(Se){Se.startObject(3)}static addDenotation(Se,Ae){Se.addFieldOffset(0,Ae,0)}static addValueType(Se,Ae){Se.addFieldInt8(1,Ae,xe.experimental.fbs.TypeInfoValue.NONE)}static addValue(Se,Ae){Se.addFieldOffset(2,Ae,0)}static endTypeInfo(Se){return Se.endObject()}static createTypeInfo(Se,Ae,Ie,Me){return ke.startTypeInfo(Se),ke.addDenotation(Se,Ae),ke.addValueType(Se,Ie),ke.addValue(Se,Me),ke.endTypeInfo(Se)}}Re.TypeInfo=ke})(Pe.fbs||(Pe.fbs={}))})(xe.experimental||(xe.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(xe){(function(Pe){(function(Re){class ke{constructor(){this.bb=null,this.bb_pos=0}__init(Se,Ae){return this.bb_pos=Se,this.bb=Ae,this}static getRootAsOperatorSetId(Se,Ae){return(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}static getSizePrefixedRootAsOperatorSetId(Se,Ae){return Se.setPosition(Se.position()+_e.flatbuffers.SIZE_PREFIX_LENGTH),(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}domain(Se){let Ae=this.bb.__offset(this.bb_pos,4);return Ae?this.bb.__string(this.bb_pos+Ae,Se):null}version(){let Se=this.bb.__offset(this.bb_pos,6);return Se?this.bb.readInt64(this.bb_pos+Se):this.bb.createLong(0,0)}static startOperatorSetId(Se){Se.startObject(2)}static addDomain(Se,Ae){Se.addFieldOffset(0,Ae,0)}static addVersion(Se,Ae){Se.addFieldInt64(1,Ae,Se.createLong(0,0))}static endOperatorSetId(Se){return Se.endObject()}static createOperatorSetId(Se,Ae,Ie){return ke.startOperatorSetId(Se),ke.addDomain(Se,Ae),ke.addVersion(Se,Ie),ke.endOperatorSetId(Se)}}Re.OperatorSetId=ke})(Pe.fbs||(Pe.fbs={}))})(xe.experimental||(xe.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(xe){(function(Pe){(function(Re){class ke{constructor(){this.bb=null,this.bb_pos=0}__init(Se,Ae){return this.bb_pos=Se,this.bb=Ae,this}static getRootAsTensor(Se,Ae){return(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}static getSizePrefixedRootAsTensor(Se,Ae){return Se.setPosition(Se.position()+_e.flatbuffers.SIZE_PREFIX_LENGTH),(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}name(Se){let Ae=this.bb.__offset(this.bb_pos,4);return Ae?this.bb.__string(this.bb_pos+Ae,Se):null}docString(Se){let Ae=this.bb.__offset(this.bb_pos,6);return Ae?this.bb.__string(this.bb_pos+Ae,Se):null}dims(Se){let Ae=this.bb.__offset(this.bb_pos,8);return Ae?this.bb.readInt64(this.bb.__vector(this.bb_pos+Ae)+8*Se):this.bb.createLong(0,0)}dimsLength(){let Se=this.bb.__offset(this.bb_pos,8);return Se?this.bb.__vector_len(this.bb_pos+Se):0}dataType(){let Se=this.bb.__offset(this.bb_pos,10);return Se?this.bb.readInt32(this.bb_pos+Se):xe.experimental.fbs.TensorDataType.UNDEFINED}rawData(Se){let Ae=this.bb.__offset(this.bb_pos,12);return Ae?this.bb.readUint8(this.bb.__vector(this.bb_pos+Ae)+Se):0}rawDataLength(){let Se=this.bb.__offset(this.bb_pos,12);return Se?this.bb.__vector_len(this.bb_pos+Se):0}rawDataArray(){let Se=this.bb.__offset(this.bb_pos,12);return Se?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+Se),this.bb.__vector_len(this.bb_pos+Se)):null}stringData(Se,Ae){let Ie=this.bb.__offset(this.bb_pos,14);return Ie?this.bb.__string(this.bb.__vector(this.bb_pos+Ie)+4*Se,Ae):null}stringDataLength(){let Se=this.bb.__offset(this.bb_pos,14);return Se?this.bb.__vector_len(this.bb_pos+Se):0}static startTensor(Se){Se.startObject(6)}static addName(Se,Ae){Se.addFieldOffset(0,Ae,0)}static addDocString(Se,Ae){Se.addFieldOffset(1,Ae,0)}static addDims(Se,Ae){Se.addFieldOffset(2,Ae,0)}static createDimsVector(Se,Ae){Se.startVector(8,Ae.length,8);for(let Ie=Ae.length-1;Ie>=0;Ie--)Se.addInt64(Ae[Ie]);return Se.endVector()}static startDimsVector(Se,Ae){Se.startVector(8,Ae,8)}static addDataType(Se,Ae){Se.addFieldInt32(3,Ae,xe.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData(Se,Ae){Se.addFieldOffset(4,Ae,0)}static createRawDataVector(Se,Ae){Se.startVector(1,Ae.length,1);for(let Ie=Ae.length-1;Ie>=0;Ie--)Se.addInt8(Ae[Ie]);return Se.endVector()}static startRawDataVector(Se,Ae){Se.startVector(1,Ae,1)}static addStringData(Se,Ae){Se.addFieldOffset(5,Ae,0)}static createStringDataVector(Se,Ae){Se.startVector(4,Ae.length,4);for(let Ie=Ae.length-1;Ie>=0;Ie--)Se.addOffset(Ae[Ie]);return Se.endVector()}static startStringDataVector(Se,Ae){Se.startVector(4,Ae,4)}static endTensor(Se){return Se.endObject()}static createTensor(Se,Ae,Ie,Me,Fe,Ve,je){return ke.startTensor(Se),ke.addName(Se,Ae),ke.addDocString(Se,Ie),ke.addDims(Se,Me),ke.addDataType(Se,Fe),ke.addRawData(Se,Ve),ke.addStringData(Se,je),ke.endTensor(Se)}}Re.Tensor=ke})(Pe.fbs||(Pe.fbs={}))})(xe.experimental||(xe.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(xe){(function(Pe){(function(Re){class ke{constructor(){this.bb=null,this.bb_pos=0}__init(Se,Ae){return this.bb_pos=Se,this.bb=Ae,this}static getRootAsSparseTensor(Se,Ae){return(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}static getSizePrefixedRootAsSparseTensor(Se,Ae){return Se.setPosition(Se.position()+_e.flatbuffers.SIZE_PREFIX_LENGTH),(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}values(Se){let Ae=this.bb.__offset(this.bb_pos,4);return Ae?(Se||new xe.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+Ae),this.bb):null}indices(Se){let Ae=this.bb.__offset(this.bb_pos,6);return Ae?(Se||new xe.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+Ae),this.bb):null}dims(Se){let Ae=this.bb.__offset(this.bb_pos,8);return Ae?this.bb.readInt64(this.bb.__vector(this.bb_pos+Ae)+8*Se):this.bb.createLong(0,0)}dimsLength(){let Se=this.bb.__offset(this.bb_pos,8);return Se?this.bb.__vector_len(this.bb_pos+Se):0}static startSparseTensor(Se){Se.startObject(3)}static addValues(Se,Ae){Se.addFieldOffset(0,Ae,0)}static addIndices(Se,Ae){Se.addFieldOffset(1,Ae,0)}static addDims(Se,Ae){Se.addFieldOffset(2,Ae,0)}static createDimsVector(Se,Ae){Se.startVector(8,Ae.length,8);for(let Ie=Ae.length-1;Ie>=0;Ie--)Se.addInt64(Ae[Ie]);return Se.endVector()}static startDimsVector(Se,Ae){Se.startVector(8,Ae,8)}static endSparseTensor(Se){return Se.endObject()}static createSparseTensor(Se,Ae,Ie,Me){return ke.startSparseTensor(Se),ke.addValues(Se,Ae),ke.addIndices(Se,Ie),ke.addDims(Se,Me),ke.endSparseTensor(Se)}}Re.SparseTensor=ke})(Pe.fbs||(Pe.fbs={}))})(xe.experimental||(xe.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(xe){(function(Pe){(function(Re){class ke{constructor(){this.bb=null,this.bb_pos=0}__init(Se,Ae){return this.bb_pos=Se,this.bb=Ae,this}static getRootAsAttribute(Se,Ae){return(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}static getSizePrefixedRootAsAttribute(Se,Ae){return Se.setPosition(Se.position()+_e.flatbuffers.SIZE_PREFIX_LENGTH),(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}name(Se){let Ae=this.bb.__offset(this.bb_pos,4);return Ae?this.bb.__string(this.bb_pos+Ae,Se):null}docString(Se){let Ae=this.bb.__offset(this.bb_pos,6);return Ae?this.bb.__string(this.bb_pos+Ae,Se):null}type(){let Se=this.bb.__offset(this.bb_pos,8);return Se?this.bb.readInt32(this.bb_pos+Se):xe.experimental.fbs.AttributeType.UNDEFINED}f(){let Se=this.bb.__offset(this.bb_pos,10);return Se?this.bb.readFloat32(this.bb_pos+Se):0}i(){let Se=this.bb.__offset(this.bb_pos,12);return Se?this.bb.readInt64(this.bb_pos+Se):this.bb.createLong(0,0)}s(Se){let Ae=this.bb.__offset(this.bb_pos,14);return Ae?this.bb.__string(this.bb_pos+Ae,Se):null}t(Se){let Ae=this.bb.__offset(this.bb_pos,16);return Ae?(Se||new xe.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+Ae),this.bb):null}g(Se){let Ae=this.bb.__offset(this.bb_pos,18);return Ae?(Se||new xe.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+Ae),this.bb):null}floats(Se){let Ae=this.bb.__offset(this.bb_pos,20);return Ae?this.bb.readFloat32(this.bb.__vector(this.bb_pos+Ae)+4*Se):0}floatsLength(){let Se=this.bb.__offset(this.bb_pos,20);return Se?this.bb.__vector_len(this.bb_pos+Se):0}floatsArray(){let Se=this.bb.__offset(this.bb_pos,20);return Se?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+Se),this.bb.__vector_len(this.bb_pos+Se)):null}ints(Se){let Ae=this.bb.__offset(this.bb_pos,22);return Ae?this.bb.readInt64(this.bb.__vector(this.bb_pos+Ae)+8*Se):this.bb.createLong(0,0)}intsLength(){let Se=this.bb.__offset(this.bb_pos,22);return Se?this.bb.__vector_len(this.bb_pos+Se):0}strings(Se,Ae){let Ie=this.bb.__offset(this.bb_pos,24);return Ie?this.bb.__string(this.bb.__vector(this.bb_pos+Ie)+4*Se,Ae):null}stringsLength(){let Se=this.bb.__offset(this.bb_pos,24);return Se?this.bb.__vector_len(this.bb_pos+Se):0}tensors(Se,Ae){let Ie=this.bb.__offset(this.bb_pos,26);return Ie?(Ae||new xe.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Ie)+4*Se),this.bb):null}tensorsLength(){let Se=this.bb.__offset(this.bb_pos,26);return Se?this.bb.__vector_len(this.bb_pos+Se):0}graphs(Se,Ae){let Ie=this.bb.__offset(this.bb_pos,28);return Ie?(Ae||new xe.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Ie)+4*Se),this.bb):null}graphsLength(){let Se=this.bb.__offset(this.bb_pos,28);return Se?this.bb.__vector_len(this.bb_pos+Se):0}static startAttribute(Se){Se.startObject(13)}static addName(Se,Ae){Se.addFieldOffset(0,Ae,0)}static addDocString(Se,Ae){Se.addFieldOffset(1,Ae,0)}static addType(Se,Ae){Se.addFieldInt32(2,Ae,xe.experimental.fbs.AttributeType.UNDEFINED)}static addF(Se,Ae){Se.addFieldFloat32(3,Ae,0)}static addI(Se,Ae){Se.addFieldInt64(4,Ae,Se.createLong(0,0))}static addS(Se,Ae){Se.addFieldOffset(5,Ae,0)}static addT(Se,Ae){Se.addFieldOffset(6,Ae,0)}static addG(Se,Ae){Se.addFieldOffset(7,Ae,0)}static addFloats(Se,Ae){Se.addFieldOffset(8,Ae,0)}static createFloatsVector(Se,Ae){Se.startVector(4,Ae.length,4);for(let Ie=Ae.length-1;Ie>=0;Ie--)Se.addFloat32(Ae[Ie]);return Se.endVector()}static startFloatsVector(Se,Ae){Se.startVector(4,Ae,4)}static addInts(Se,Ae){Se.addFieldOffset(9,Ae,0)}static createIntsVector(Se,Ae){Se.startVector(8,Ae.length,8);for(let Ie=Ae.length-1;Ie>=0;Ie--)Se.addInt64(Ae[Ie]);return Se.endVector()}static startIntsVector(Se,Ae){Se.startVector(8,Ae,8)}static addStrings(Se,Ae){Se.addFieldOffset(10,Ae,0)}static createStringsVector(Se,Ae){Se.startVector(4,Ae.length,4);for(let Ie=Ae.length-1;Ie>=0;Ie--)Se.addOffset(Ae[Ie]);return Se.endVector()}static startStringsVector(Se,Ae){Se.startVector(4,Ae,4)}static addTensors(Se,Ae){Se.addFieldOffset(11,Ae,0)}static createTensorsVector(Se,Ae){Se.startVector(4,Ae.length,4);for(let Ie=Ae.length-1;Ie>=0;Ie--)Se.addOffset(Ae[Ie]);return Se.endVector()}static startTensorsVector(Se,Ae){Se.startVector(4,Ae,4)}static addGraphs(Se,Ae){Se.addFieldOffset(12,Ae,0)}static createGraphsVector(Se,Ae){Se.startVector(4,Ae.length,4);for(let Ie=Ae.length-1;Ie>=0;Ie--)Se.addOffset(Ae[Ie]);return Se.endVector()}static startGraphsVector(Se,Ae){Se.startVector(4,Ae,4)}static endAttribute(Se){return Se.endObject()}static createAttribute(Se,Ae,Ie,Me,Fe,Ve,je,Be,qe,He,Xe,Je,Qe,Ke){return ke.startAttribute(Se),ke.addName(Se,Ae),ke.addDocString(Se,Ie),ke.addType(Se,Me),ke.addF(Se,Fe),ke.addI(Se,Ve),ke.addS(Se,je),ke.addT(Se,Be),ke.addG(Se,qe),ke.addFloats(Se,He),ke.addInts(Se,Xe),ke.addStrings(Se,Je),ke.addTensors(Se,Qe),ke.addGraphs(Se,Ke),ke.endAttribute(Se)}}Re.Attribute=ke})(Pe.fbs||(Pe.fbs={}))})(xe.experimental||(xe.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(xe){(function(Pe){(function(Re){class ke{constructor(){this.bb=null,this.bb_pos=0}__init(Se,Ae){return this.bb_pos=Se,this.bb=Ae,this}static getRootAsGraph(Se,Ae){return(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}static getSizePrefixedRootAsGraph(Se,Ae){return Se.setPosition(Se.position()+_e.flatbuffers.SIZE_PREFIX_LENGTH),(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}initializers(Se,Ae){let Ie=this.bb.__offset(this.bb_pos,4);return Ie?(Ae||new xe.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Ie)+4*Se),this.bb):null}initializersLength(){let Se=this.bb.__offset(this.bb_pos,4);return Se?this.bb.__vector_len(this.bb_pos+Se):0}nodeArgs(Se,Ae){let Ie=this.bb.__offset(this.bb_pos,6);return Ie?(Ae||new xe.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Ie)+4*Se),this.bb):null}nodeArgsLength(){let Se=this.bb.__offset(this.bb_pos,6);return Se?this.bb.__vector_len(this.bb_pos+Se):0}nodes(Se,Ae){let Ie=this.bb.__offset(this.bb_pos,8);return Ie?(Ae||new xe.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Ie)+4*Se),this.bb):null}nodesLength(){let Se=this.bb.__offset(this.bb_pos,8);return Se?this.bb.__vector_len(this.bb_pos+Se):0}maxNodeIndex(){let Se=this.bb.__offset(this.bb_pos,10);return Se?this.bb.readUint32(this.bb_pos+Se):0}nodeEdges(Se,Ae){let Ie=this.bb.__offset(this.bb_pos,12);return Ie?(Ae||new xe.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Ie)+4*Se),this.bb):null}nodeEdgesLength(){let Se=this.bb.__offset(this.bb_pos,12);return Se?this.bb.__vector_len(this.bb_pos+Se):0}inputs(Se,Ae){let Ie=this.bb.__offset(this.bb_pos,14);return Ie?this.bb.__string(this.bb.__vector(this.bb_pos+Ie)+4*Se,Ae):null}inputsLength(){let Se=this.bb.__offset(this.bb_pos,14);return Se?this.bb.__vector_len(this.bb_pos+Se):0}outputs(Se,Ae){let Ie=this.bb.__offset(this.bb_pos,16);return Ie?this.bb.__string(this.bb.__vector(this.bb_pos+Ie)+4*Se,Ae):null}outputsLength(){let Se=this.bb.__offset(this.bb_pos,16);return Se?this.bb.__vector_len(this.bb_pos+Se):0}sparseInitializers(Se,Ae){let Ie=this.bb.__offset(this.bb_pos,18);return Ie?(Ae||new xe.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Ie)+4*Se),this.bb):null}sparseInitializersLength(){let Se=this.bb.__offset(this.bb_pos,18);return Se?this.bb.__vector_len(this.bb_pos+Se):0}static startGraph(Se){Se.startObject(8)}static addInitializers(Se,Ae){Se.addFieldOffset(0,Ae,0)}static createInitializersVector(Se,Ae){Se.startVector(4,Ae.length,4);for(let Ie=Ae.length-1;Ie>=0;Ie--)Se.addOffset(Ae[Ie]);return Se.endVector()}static startInitializersVector(Se,Ae){Se.startVector(4,Ae,4)}static addNodeArgs(Se,Ae){Se.addFieldOffset(1,Ae,0)}static createNodeArgsVector(Se,Ae){Se.startVector(4,Ae.length,4);for(let Ie=Ae.length-1;Ie>=0;Ie--)Se.addOffset(Ae[Ie]);return Se.endVector()}static startNodeArgsVector(Se,Ae){Se.startVector(4,Ae,4)}static addNodes(Se,Ae){Se.addFieldOffset(2,Ae,0)}static createNodesVector(Se,Ae){Se.startVector(4,Ae.length,4);for(let Ie=Ae.length-1;Ie>=0;Ie--)Se.addOffset(Ae[Ie]);return Se.endVector()}static startNodesVector(Se,Ae){Se.startVector(4,Ae,4)}static addMaxNodeIndex(Se,Ae){Se.addFieldInt32(3,Ae,0)}static addNodeEdges(Se,Ae){Se.addFieldOffset(4,Ae,0)}static createNodeEdgesVector(Se,Ae){Se.startVector(4,Ae.length,4);for(let Ie=Ae.length-1;Ie>=0;Ie--)Se.addOffset(Ae[Ie]);return Se.endVector()}static startNodeEdgesVector(Se,Ae){Se.startVector(4,Ae,4)}static addInputs(Se,Ae){Se.addFieldOffset(5,Ae,0)}static createInputsVector(Se,Ae){Se.startVector(4,Ae.length,4);for(let Ie=Ae.length-1;Ie>=0;Ie--)Se.addOffset(Ae[Ie]);return Se.endVector()}static startInputsVector(Se,Ae){Se.startVector(4,Ae,4)}static addOutputs(Se,Ae){Se.addFieldOffset(6,Ae,0)}static createOutputsVector(Se,Ae){Se.startVector(4,Ae.length,4);for(let Ie=Ae.length-1;Ie>=0;Ie--)Se.addOffset(Ae[Ie]);return Se.endVector()}static startOutputsVector(Se,Ae){Se.startVector(4,Ae,4)}static addSparseInitializers(Se,Ae){Se.addFieldOffset(7,Ae,0)}static createSparseInitializersVector(Se,Ae){Se.startVector(4,Ae.length,4);for(let Ie=Ae.length-1;Ie>=0;Ie--)Se.addOffset(Ae[Ie]);return Se.endVector()}static startSparseInitializersVector(Se,Ae){Se.startVector(4,Ae,4)}static endGraph(Se){return Se.endObject()}static createGraph(Se,Ae,Ie,Me,Fe,Ve,je,Be,qe){return ke.startGraph(Se),ke.addInitializers(Se,Ae),ke.addNodeArgs(Se,Ie),ke.addNodes(Se,Me),ke.addMaxNodeIndex(Se,Fe),ke.addNodeEdges(Se,Ve),ke.addInputs(Se,je),ke.addOutputs(Se,Be),ke.addSparseInitializers(Se,qe),ke.endGraph(Se)}}Re.Graph=ke})(Pe.fbs||(Pe.fbs={}))})(xe.experimental||(xe.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(xe){(function(Pe){(function(Re){class ke{constructor(){this.bb=null,this.bb_pos=0}__init(Se,Ae){return this.bb_pos=Se,this.bb=Ae,this}static getRootAsModel(Se,Ae){return(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}static getSizePrefixedRootAsModel(Se,Ae){return Se.setPosition(Se.position()+_e.flatbuffers.SIZE_PREFIX_LENGTH),(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}irVersion(){let Se=this.bb.__offset(this.bb_pos,4);return Se?this.bb.readInt64(this.bb_pos+Se):this.bb.createLong(0,0)}opsetImport(Se,Ae){let Ie=this.bb.__offset(this.bb_pos,6);return Ie?(Ae||new xe.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Ie)+4*Se),this.bb):null}opsetImportLength(){let Se=this.bb.__offset(this.bb_pos,6);return Se?this.bb.__vector_len(this.bb_pos+Se):0}producerName(Se){let Ae=this.bb.__offset(this.bb_pos,8);return Ae?this.bb.__string(this.bb_pos+Ae,Se):null}producerVersion(Se){let Ae=this.bb.__offset(this.bb_pos,10);return Ae?this.bb.__string(this.bb_pos+Ae,Se):null}domain(Se){let Ae=this.bb.__offset(this.bb_pos,12);return Ae?this.bb.__string(this.bb_pos+Ae,Se):null}modelVersion(){let Se=this.bb.__offset(this.bb_pos,14);return Se?this.bb.readInt64(this.bb_pos+Se):this.bb.createLong(0,0)}docString(Se){let Ae=this.bb.__offset(this.bb_pos,16);return Ae?this.bb.__string(this.bb_pos+Ae,Se):null}graph(Se){let Ae=this.bb.__offset(this.bb_pos,18);return Ae?(Se||new xe.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+Ae),this.bb):null}graphDocString(Se){let Ae=this.bb.__offset(this.bb_pos,20);return Ae?this.bb.__string(this.bb_pos+Ae,Se):null}static startModel(Se){Se.startObject(9)}static addIrVersion(Se,Ae){Se.addFieldInt64(0,Ae,Se.createLong(0,0))}static addOpsetImport(Se,Ae){Se.addFieldOffset(1,Ae,0)}static createOpsetImportVector(Se,Ae){Se.startVector(4,Ae.length,4);for(let Ie=Ae.length-1;Ie>=0;Ie--)Se.addOffset(Ae[Ie]);return Se.endVector()}static startOpsetImportVector(Se,Ae){Se.startVector(4,Ae,4)}static addProducerName(Se,Ae){Se.addFieldOffset(2,Ae,0)}static addProducerVersion(Se,Ae){Se.addFieldOffset(3,Ae,0)}static addDomain(Se,Ae){Se.addFieldOffset(4,Ae,0)}static addModelVersion(Se,Ae){Se.addFieldInt64(5,Ae,Se.createLong(0,0))}static addDocString(Se,Ae){Se.addFieldOffset(6,Ae,0)}static addGraph(Se,Ae){Se.addFieldOffset(7,Ae,0)}static addGraphDocString(Se,Ae){Se.addFieldOffset(8,Ae,0)}static endModel(Se){return Se.endObject()}static createModel(Se,Ae,Ie,Me,Fe,Ve,je,Be,qe,He){return ke.startModel(Se),ke.addIrVersion(Se,Ae),ke.addOpsetImport(Se,Ie),ke.addProducerName(Se,Me),ke.addProducerVersion(Se,Fe),ke.addDomain(Se,Ve),ke.addModelVersion(Se,je),ke.addDocString(Se,Be),ke.addGraph(Se,qe),ke.addGraphDocString(Se,He),ke.endModel(Se)}}Re.Model=ke})(Pe.fbs||(Pe.fbs={}))})(xe.experimental||(xe.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(xe){(function(Pe){(function(Re){class ke{constructor(){this.bb=null,this.bb_pos=0}__init(Se,Ae){return this.bb_pos=Se,this.bb=Ae,this}static getRootAsKernelCreateInfos(Se,Ae){return(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}static getSizePrefixedRootAsKernelCreateInfos(Se,Ae){return Se.setPosition(Se.position()+_e.flatbuffers.SIZE_PREFIX_LENGTH),(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}nodeIndices(Se){let Ae=this.bb.__offset(this.bb_pos,4);return Ae?this.bb.readUint32(this.bb.__vector(this.bb_pos+Ae)+4*Se):0}nodeIndicesLength(){let Se=this.bb.__offset(this.bb_pos,4);return Se?this.bb.__vector_len(this.bb_pos+Se):0}nodeIndicesArray(){let Se=this.bb.__offset(this.bb_pos,4);return Se?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+Se),this.bb.__vector_len(this.bb_pos+Se)):null}kernelDefHashes(Se){let Ae=this.bb.__offset(this.bb_pos,6);return Ae?this.bb.readUint64(this.bb.__vector(this.bb_pos+Ae)+8*Se):this.bb.createLong(0,0)}kernelDefHashesLength(){let Se=this.bb.__offset(this.bb_pos,6);return Se?this.bb.__vector_len(this.bb_pos+Se):0}static startKernelCreateInfos(Se){Se.startObject(2)}static addNodeIndices(Se,Ae){Se.addFieldOffset(0,Ae,0)}static createNodeIndicesVector(Se,Ae){Se.startVector(4,Ae.length,4);for(let Ie=Ae.length-1;Ie>=0;Ie--)Se.addInt32(Ae[Ie]);return Se.endVector()}static startNodeIndicesVector(Se,Ae){Se.startVector(4,Ae,4)}static addKernelDefHashes(Se,Ae){Se.addFieldOffset(1,Ae,0)}static createKernelDefHashesVector(Se,Ae){Se.startVector(8,Ae.length,8);for(let Ie=Ae.length-1;Ie>=0;Ie--)Se.addInt64(Ae[Ie]);return Se.endVector()}static startKernelDefHashesVector(Se,Ae){Se.startVector(8,Ae,8)}static endKernelCreateInfos(Se){return Se.endObject()}static createKernelCreateInfos(Se,Ae,Ie){return ke.startKernelCreateInfos(Se),ke.addNodeIndices(Se,Ae),ke.addKernelDefHashes(Se,Ie),ke.endKernelCreateInfos(Se)}}Re.KernelCreateInfos=ke})(Pe.fbs||(Pe.fbs={}))})(xe.experimental||(xe.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(xe){(function(Pe){(function(Re){class ke{constructor(){this.bb=null,this.bb_pos=0}__init(Se,Ae){return this.bb_pos=Se,this.bb=Ae,this}static getRootAsSubGraphSessionState(Se,Ae){return(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}static getSizePrefixedRootAsSubGraphSessionState(Se,Ae){return Se.setPosition(Se.position()+_e.flatbuffers.SIZE_PREFIX_LENGTH),(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}graphId(Se){let Ae=this.bb.__offset(this.bb_pos,4);return Ae?this.bb.__string(this.bb_pos+Ae,Se):null}sessionState(Se){let Ae=this.bb.__offset(this.bb_pos,6);return Ae?(Se||new xe.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+Ae),this.bb):null}static startSubGraphSessionState(Se){Se.startObject(2)}static addGraphId(Se,Ae){Se.addFieldOffset(0,Ae,0)}static addSessionState(Se,Ae){Se.addFieldOffset(1,Ae,0)}static endSubGraphSessionState(Se){let Ae=Se.endObject();return Se.requiredField(Ae,4),Ae}static createSubGraphSessionState(Se,Ae,Ie){return ke.startSubGraphSessionState(Se),ke.addGraphId(Se,Ae),ke.addSessionState(Se,Ie),ke.endSubGraphSessionState(Se)}}Re.SubGraphSessionState=ke})(Pe.fbs||(Pe.fbs={}))})(xe.experimental||(xe.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(xe){(function(Pe){(function(Re){class ke{constructor(){this.bb=null,this.bb_pos=0}__init(Se,Ae){return this.bb_pos=Se,this.bb=Ae,this}static getRootAsSessionState(Se,Ae){return(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}static getSizePrefixedRootAsSessionState(Se,Ae){return Se.setPosition(Se.position()+_e.flatbuffers.SIZE_PREFIX_LENGTH),(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}kernels(Se){let Ae=this.bb.__offset(this.bb_pos,4);return Ae?(Se||new xe.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+Ae),this.bb):null}subGraphSessionStates(Se,Ae){let Ie=this.bb.__offset(this.bb_pos,6);return Ie?(Ae||new xe.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Ie)+4*Se),this.bb):null}subGraphSessionStatesLength(){let Se=this.bb.__offset(this.bb_pos,6);return Se?this.bb.__vector_len(this.bb_pos+Se):0}static startSessionState(Se){Se.startObject(2)}static addKernels(Se,Ae){Se.addFieldOffset(0,Ae,0)}static addSubGraphSessionStates(Se,Ae){Se.addFieldOffset(1,Ae,0)}static createSubGraphSessionStatesVector(Se,Ae){Se.startVector(4,Ae.length,4);for(let Ie=Ae.length-1;Ie>=0;Ie--)Se.addOffset(Ae[Ie]);return Se.endVector()}static startSubGraphSessionStatesVector(Se,Ae){Se.startVector(4,Ae,4)}static endSessionState(Se){return Se.endObject()}static createSessionState(Se,Ae,Ie){return ke.startSessionState(Se),ke.addKernels(Se,Ae),ke.addSubGraphSessionStates(Se,Ie),ke.endSessionState(Se)}}Re.SessionState=ke})(Pe.fbs||(Pe.fbs={}))})(xe.experimental||(xe.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(xe){(function(Pe){(function(Re){class ke{constructor(){this.bb=null,this.bb_pos=0}__init(Se,Ae){return this.bb_pos=Se,this.bb=Ae,this}static getRootAsInferenceSession(Se,Ae){return(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}static getSizePrefixedRootAsInferenceSession(Se,Ae){return Se.setPosition(Se.position()+_e.flatbuffers.SIZE_PREFIX_LENGTH),(Ae||new ke).__init(Se.readInt32(Se.position())+Se.position(),Se)}static bufferHasIdentifier(Se){return Se.__has_identifier("ORTM")}ortVersion(Se){let Ae=this.bb.__offset(this.bb_pos,4);return Ae?this.bb.__string(this.bb_pos+Ae,Se):null}model(Se){let Ae=this.bb.__offset(this.bb_pos,6);return Ae?(Se||new xe.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+Ae),this.bb):null}sessionState(Se){let Ae=this.bb.__offset(this.bb_pos,8);return Ae?(Se||new xe.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+Ae),this.bb):null}static startInferenceSession(Se){Se.startObject(3)}static addOrtVersion(Se,Ae){Se.addFieldOffset(0,Ae,0)}static addModel(Se,Ae){Se.addFieldOffset(1,Ae,0)}static addSessionState(Se,Ae){Se.addFieldOffset(2,Ae,0)}static endInferenceSession(Se){return Se.endObject()}static finishInferenceSessionBuffer(Se,Ae){Se.finish(Ae,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(Se,Ae){Se.finish(Ae,"ORTM",!0)}static createInferenceSession(Se,Ae,Ie,Me){return ke.startInferenceSession(Se),ke.addOrtVersion(Se,Ae),ke.addModel(Se,Ie),ke.addSessionState(Se,Me),ke.endInferenceSession(Se)}}Re.InferenceSession=ke})(Pe.fbs||(Pe.fbs={}))})(xe.experimental||(xe.experimental={}))}(e.onnxruntime||(e.onnxruntime={}))},7448:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxjsSessionHandler=void 0;const _e=t(1670),Te=t(9162);e.OnnxjsSessionHandler=class{constructor(Ee){this.session=Ee,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(Ee,xe,Pe){const Re=new Map;for(const Se in Ee)if(Object.hasOwnProperty.call(Ee,Se)){const Ae=Ee[Se];Re.set(Se,new Te.Tensor(Ae.dims,Ae.type,void 0,void 0,Ae.data))}const ke=await this.session.run(Re),Ce={};return ke.forEach((Se,Ae)=>{Ce[Ae]=new _e.Tensor(Se.type,Se.data,Se.dims)}),Ce}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6919:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Session=void 0;const _e=t(7067),Te=t(1296),Ee=t(7091),xe=t(1036),Pe=t(6231),Re=t(2644);e.Session=class{constructor(ke={}){this._initialized=!1,this.backendHint=ke.backendHint,this.profiler=Pe.Profiler.create(ke.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(ke,Ce,Se){await this.profiler.event("session","Session.loadModel",async()=>{const Ae=await(0,Ee.resolveBackend)(this.backendHint);if(this.sessionHandler=Ae.createSessionHandler(this.context),this._model=new Re.Model,typeof ke=="string"){const Ie=ke.endsWith(".ort");if(typeof fetch>"u"){const Me=await(0,Te.promisify)(_e.readFile)(ke);this.initialize(Me,Ie)}else{const Me=await fetch(ke),Fe=await Me.arrayBuffer();this.initialize(new Uint8Array(Fe),Ie)}}else if(ArrayBuffer.isView(ke))this.initialize(ke);else{const Ie=new Uint8Array(ke,Ce||0,Se||ke.byteLength);this.initialize(Ie)}})}initialize(ke,Ce){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{const Se=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(ke,Se,Ce),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new xe.ExecutionPlan(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(ke){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{const Ce=this.normalizeAndValidateInputs(ke),Se=await this._executionPlan.execute(this.sessionHandler,Ce);return this.createOutput(Se)})}normalizeAndValidateInputs(ke){const Ce=this._model.graph.getInputNames();if(Array.isArray(ke)){if(ke.length!==Ce.length)throw new Error(`incorrect input array length: expected ${Ce.length} but got ${ke.length}`)}else{if(ke.size!==Ce.length)throw new Error(`incorrect input map size: expected ${Ce.length} but got ${ke.size}`);const Se=new Array(ke.size);let Ae=0;for(let Ie=0;Ie<Ce.length;++Ie){const Me=ke.get(Ce[Ie]);if(!Me)throw new Error(`missing input tensor for: '${name}'`);Se[Ae++]=Me}ke=Se}if(this.context.graphInputTypes&&this.context.graphInputTypes.length!==0&&this.context.graphInputDims&&this.context.graphInputDims.length!==0)this.validateInputTensorDims(this.context.graphInputDims,ke,!1);else{const Se=this._model.graph.getInputIndices(),Ae=this._model.graph.getValues(),Ie=new Array(Se.length);for(let Me=0;Me<Se.length;++Me){const Fe=Ae[Se[Me]];Ie[Me]=Fe.type.shape.dims,this.context.graphInputTypes.push(Fe.type.tensorType),this.context.graphInputDims.push(ke[Me].dims)}this.validateInputTensorDims(Ie,ke,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,ke),ke}validateInputTensorTypes(ke,Ce){for(let Se=0;Se<Ce.length;Se++){const Ae=ke[Se],Ie=Ce[Se].type;if(Ae!==Ie)throw new Error(`input tensor[${Se}] check failed: expected type '${Ae}' but got ${Ie}`)}}validateInputTensorDims(ke,Ce,Se){for(let Ae=0;Ae<Ce.length;Ae++){const Ie=ke[Ae],Me=Ce[Ae].dims;if(!this.compareTensorDims(Ie,Me,Se))throw new Error(`input tensor[${Ae}] check failed: expected shape '[${Ie.join(",")}]' but got [${Me.join(",")}]`)}}compareTensorDims(ke,Ce,Se){if(ke.length!==Ce.length)return!1;for(let Ae=0;Ae<ke.length;++Ae)if(ke[Ae]!==Ce[Ae]&&(!Se||ke[Ae]!==0))return!1;return!0}createOutput(ke){const Ce=this._model.graph.getOutputNames();if(ke.length!==Ce.length)throw new Error("expected number of outputs do not match number of generated outputs");const Se=new Map;for(let Ae=0;Ae<Ce.length;++Ae)Se.set(Ce[Ae],ke[Ae]);return Se}initializeOps(ke){const Ce=ke.getNodes();this._ops=new Array(Ce.length);for(let Se=0;Se<Ce.length;Se++)this._ops[Se]=this.sessionHandler.resolve(Ce[Se],this._model.opsets,ke)}}},9162:function(r,e,t){var _e=this&&this.__importDefault||function(Fe){return Fe&&Fe.__esModule?Fe:{default:Fe}};Object.defineProperty(e,"__esModule",{value:!0}),e.Tensor=void 0;const Te=t(3442),Ee=_e(t(3720)),xe=t(1446),Pe=t(9395),Re=t(2517);var ke=Pe.onnxruntime.experimental.fbs;class Ce{get data(){if(this.cache===void 0){const Ve=this.dataProvider(this.dataId);if(Ve.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=Ve}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(Ve){return this.data[Re.ShapeUtil.indicesToOffset(Ve,this.strides)]}set(Ve,je){this.data[Re.ShapeUtil.indicesToOffset(Ve,this.strides)]=je}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=Re.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(Ve,je,Be,qe,He,Xe=Te.Guid.create()){this.dims=Ve,this.type=je,this.dataProvider=Be,this.asyncDataProvider=qe,this.cache=He,this.dataId=Xe,this.size=Re.ShapeUtil.validateDimsAndCalcSize(Ve);const Je=this.size,Qe=Be===void 0&&qe===void 0&&He===void 0;if(He!==void 0&&He.length!==Je)throw new RangeError("Input dims doesn't match data length.");if(je==="string"){if(!(He===void 0||Array.isArray(He)&&He.every(Ke=>typeof Ke=="string")))throw new TypeError("cache should be a string array");Qe&&(this.cache=new Array(Je))}else{if(He!==void 0){const Ke=Ae(je);if(!(He instanceof Ke))throw new TypeError(`cache should be type ${Ke.name}`)}if(Qe){const Ke=new ArrayBuffer(Je*function(Ye){switch(Ye){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${Ye}`)}}(je));this.cache=function(Ye,pn){return new(Ae(pn))(Ye)}(Ke,je)}}}static fromProto(Ve){if(!Ve)throw new Error("cannot construct Value from an empty tensor");const je=Re.ProtoUtil.tensorDataTypeFromProto(Ve.dataType),Be=Re.ProtoUtil.tensorDimsFromProto(Ve.dims),qe=new Ce(Be,je);if(je==="string")Ve.stringData.forEach((He,Xe)=>{qe.data[Xe]=(0,Re.decodeUtf8String)(He)});else if(Ve.rawData&&typeof Ve.rawData.byteLength=="number"&&Ve.rawData.byteLength>0){const He=qe.data,Xe=new DataView(Ve.rawData.buffer,Ve.rawData.byteOffset,Ve.rawData.byteLength),Je=Se(Ve.dataType),Qe=Ve.rawData.byteLength/Je;if(Ve.rawData.byteLength%Je!=0)throw new Error("invalid buffer length");if(He.length!==Qe)throw new Error("buffer length mismatch");for(let Ke=0;Ke<Qe;Ke++){const Ye=Me(Xe,Ve.dataType,Ke*Je);He[Ke]=Ye}}else{let He;switch(Ve.dataType){case xe.onnx.TensorProto.DataType.FLOAT:He=Ve.floatData;break;case xe.onnx.TensorProto.DataType.INT32:case xe.onnx.TensorProto.DataType.INT16:case xe.onnx.TensorProto.DataType.UINT16:case xe.onnx.TensorProto.DataType.INT8:case xe.onnx.TensorProto.DataType.UINT8:case xe.onnx.TensorProto.DataType.BOOL:He=Ve.int32Data;break;case xe.onnx.TensorProto.DataType.INT64:He=Ve.int64Data;break;case xe.onnx.TensorProto.DataType.DOUBLE:He=Ve.doubleData;break;case xe.onnx.TensorProto.DataType.UINT32:case xe.onnx.TensorProto.DataType.UINT64:He=Ve.uint64Data;break;default:throw new Error("unspecific error")}if(He==null)throw new Error("failed to populate data from a tensorproto value");const Xe=qe.data;if(Xe.length!==He.length)throw new Error("array length mismatch");for(let Je=0;Je<He.length;Je++){const Qe=He[Je];Ee.default.isLong(Qe)?Xe[Je]=Ie(Qe,Ve.dataType):Xe[Je]=Qe}}return qe}static fromData(Ve,je,Be){return new Ce(je,Be,void 0,void 0,Ve)}static fromOrtTensor(Ve){if(!Ve)throw new Error("cannot construct Value from an empty tensor");const je=Re.ProtoUtil.tensorDimsFromORTFormat(Ve),Be=Re.ProtoUtil.tensorDataTypeFromProto(Ve.dataType()),qe=new Ce(je,Be);if(Be==="string")for(let He=0;He<Ve.stringDataLength();He++)qe.data[He]=Ve.stringData(He);else if(Ve.rawDataArray()&&typeof Ve.rawDataLength()=="number"&&Ve.rawDataLength()>0){const He=qe.data,Xe=new DataView(Ve.rawDataArray().buffer,Ve.rawDataArray().byteOffset,Ve.rawDataLength()),Je=Se(Ve.dataType()),Qe=Ve.rawDataLength()/Je;if(Ve.rawDataLength()%Je!=0)throw new Error("invalid buffer length");if(He.length!==Qe)throw new Error("buffer length mismatch");for(let Ke=0;Ke<Qe;Ke++){const Ye=Me(Xe,Ve.dataType(),Ke*Je);He[Ke]=Ye}}return qe}}function Se(Fe){switch(Fe){case xe.onnx.TensorProto.DataType.UINT8:case xe.onnx.TensorProto.DataType.INT8:case xe.onnx.TensorProto.DataType.BOOL:return 1;case xe.onnx.TensorProto.DataType.UINT16:case xe.onnx.TensorProto.DataType.INT16:return 2;case xe.onnx.TensorProto.DataType.FLOAT:case xe.onnx.TensorProto.DataType.INT32:case xe.onnx.TensorProto.DataType.UINT32:return 4;case xe.onnx.TensorProto.DataType.INT64:case xe.onnx.TensorProto.DataType.DOUBLE:case xe.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${xe.onnx.TensorProto.DataType[Fe]}`)}}function Ae(Fe){switch(Fe){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function Ie(Fe,Ve){if(Ve===xe.onnx.TensorProto.DataType.INT64||Ve===ke.TensorDataType.INT64){if(Fe.greaterThanOrEqual(2147483648)||Fe.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(Ve!==xe.onnx.TensorProto.DataType.UINT32&&Ve!==ke.TensorDataType.UINT32&&Ve!==xe.onnx.TensorProto.DataType.UINT64&&Ve!==ke.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${xe.onnx.TensorProto.DataType[Ve]}`);if(Fe.greaterThanOrEqual(4294967296)||Fe.lessThan(0))throw new TypeError("uint64 is not supported")}return Fe.toNumber()}function Me(Fe,Ve,je){switch(Ve){case xe.onnx.TensorProto.DataType.BOOL:case xe.onnx.TensorProto.DataType.UINT8:return Fe.getUint8(je);case xe.onnx.TensorProto.DataType.INT8:return Fe.getInt8(je);case xe.onnx.TensorProto.DataType.UINT16:return Fe.getUint16(je,!0);case xe.onnx.TensorProto.DataType.INT16:return Fe.getInt16(je,!0);case xe.onnx.TensorProto.DataType.FLOAT:return Fe.getFloat32(je,!0);case xe.onnx.TensorProto.DataType.INT32:return Fe.getInt32(je,!0);case xe.onnx.TensorProto.DataType.UINT32:return Fe.getUint32(je,!0);case xe.onnx.TensorProto.DataType.INT64:return Ie(Ee.default.fromBits(Fe.getUint32(je,!0),Fe.getUint32(je+4,!0),!1),Ve);case xe.onnx.TensorProto.DataType.DOUBLE:return Fe.getFloat64(je,!0);case xe.onnx.TensorProto.DataType.UINT64:return Ie(Ee.default.fromBits(Fe.getUint32(je,!0),Fe.getUint32(je+4,!0),!0),Ve);default:throw new Error(`cannot read from DataView for type ${xe.onnx.TensorProto.DataType[Ve]}`)}}e.Tensor=Ce},2517:function(r,e,t){var _e=this&&this.__importDefault||function(Ve){return Ve&&Ve.__esModule?Ve:{default:Ve}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeUtf8String=e.MAX_CLIP=e.MIN_CLIP=e.PoolConvUtil=e.ReduceUtil=e.SplitUtil=e.MathUtil=e.ShapeUtil=e.LongUtil=e.ProtoUtil=e.GemmUtil=e.arrayCopyHelper=e.BroadcastUtil=e.MatMulUtil=e.ArrayUtil=e.assert=e.checkInputsShape=void 0;const Te=t(5686),Ee=_e(t(3720)),xe=t(1446),Pe=t(9162);e.checkInputsShape=function(Ve,...je){if(!Ve||Ve.length!==je.length)return!1;for(let Be=0;Be<Ve.length;Be++)if(!Ve[Be].dims||Ve[Be].dims.length!==je[Be])return!1;return!0},e.assert=function(Ve,je){if(!Ve)throw new Error(typeof je=="string"?je:je())},e.ArrayUtil=class{static arraysEqual(Ve,je){if(Ve.length!==je.length)return!1;for(let Be=0;Be<Ve.length;Be++)if(Ve[Be]!==je[Be])return!1;return!0}};class Re{static preprocessInputShapes(je,Be){return[je.length===1?[1,je[0]]:je,Be.length===1?[Be[0],1]:Be]}static postprocessOutputShape(je,Be,qe){Be===1&&je.splice(je.length-2,1),qe===1&&je.pop()}static calcMatMulShape(je,Be){return je[1]!==Be[0]?void 0:[je[0],Be[1]]}}e.MatMulUtil=Re;class ke{static calcShape(je,Be,qe=!1){const He=je.length,Xe=Be.length;if(He===0)return Be;if(Xe===0)return je;const Je=Math.max(je.length,Be.length),Qe=new Array(Je);if(qe){if(He<2||Xe<2)return;const Ke=Re.calcMatMulShape([je[He-2],je[He-1]],[Be[Xe-2],Be[Xe-1]]);if(Ke===void 0)return;[Qe[Je-2],Qe[Je-1]]=Ke}for(let Ke=qe?3:1;Ke<=Je;Ke++){const Ye=He-Ke<0?1:je[He-Ke],pn=Xe-Ke<0?1:Be[Xe-Ke];if(Ye!==pn&&Ye>1&&pn>1)return;Qe[Je-Ke]=Math.max(Ye,pn)}return Qe}static index(je,Be){const qe=new Array(Be.length);return ke.fillIndex(je,Be,qe),qe}static fillIndex(je,Be,qe){const He=je.length-Be.length;for(let Xe=0;Xe<Be.length;Xe++)qe[Xe]=je[He+Xe]%Be[Xe]}static calc(je,Be,qe,He,Xe){const Je=ke.calcShape(je.dims,Be.dims);if(Je){if(He&&!Ae.areEqual(Je,je.dims))return;const Qe=Ae.size(Je),Ke=He?je:new Pe.Tensor(Je,Xe||je.type);if(Je.length===0)Ke.set([],qe(je.get([]),Be.get([])));else{const Ye=new Array(Je.length),pn=new Array(je.dims.length),un=new Array(Be.dims.length);let fn,mn=0,wn=0,Pn=!1,xn=!1;je.dims.length===0&&(mn=je.get([]),Pn=!0),Be.dims.length===0&&(wn=Be.get([]),xn=!0);for(let In=0;In<Qe;In++){fn=In;for(let Ln=Je.length-1;Ln>=0;Ln--)Ye[Ln]=fn%Je[Ln],fn=Math.floor(fn/Je[Ln]);Pn||(ke.fillIndex(Ye,je.dims,pn),mn=je.get(pn)),xn||(ke.fillIndex(Ye,Be.dims,un),wn=Be.get(un)),Ke.set(Ye,qe(mn,wn))}}return Ke}}static isValidBroadcast(je,Be){const qe=je.length,He=Be.length;if(qe>He)return!1;for(let Xe=1;Xe<=qe;Xe++)if(je[qe-Xe]!==1&&je[qe-Xe]!==Be[He-Xe])return!1;return!0}static getBroadcastDims(je,Be){const qe=je.length,He=[];for(let Xe=0;Xe<qe;Xe++){const Je=qe-1-Xe,Qe=je[Je]||1;(Be[Be.length-1-Xe]||1)>1&&Qe===1&&He.unshift(Je)}return He}}e.BroadcastUtil=ke,e.arrayCopyHelper=function(Ve,je,Be,qe,He){if(qe<0||qe>=je.length)throw new Error("sourceIndex out of bounds");if(Be<0||Be>=Ve.length)throw new Error("targetIndex out of bounds");if(qe+He>je.length)throw new Error("source indices to be copied are outside bounds");if(Be+He>Ve.length)throw new Error("target array is too small to hold result");for(let Xe=0;Xe<He;Xe++)Ve[Be+Xe]=je[qe+Xe]},e.GemmUtil=class{static getShapeOfGemmResult(Ve,je,Be,qe,He){if(Ve.length!==2||Be.length!==2)throw new Error("shape need to be of size 2");let Xe,Je,Qe;je?(Xe=Ve[1],Je=Ve[0]):(Xe=Ve[0],Je=Ve[1]);let Ke=-1;if(qe?(Qe=Be[0],Ke=1):(Qe=Be[1],Ke=0),Be[Ke]!==Je)throw new Error("dimension mismatch");if(Xe<=0||Qe<=0||Je<=0)throw new Error("invalid shape specified");if(He&&!ke.isValidBroadcast(He,[Xe,Qe]))throw new Error("gemm: invalid bias shape for broadcast");return[Xe,Qe,Je]}};class Ce{static tensorDataTypeFromProto(je){switch(je){case xe.onnx.TensorProto.DataType.INT8:return"int8";case xe.onnx.TensorProto.DataType.UINT8:return"uint8";case xe.onnx.TensorProto.DataType.BOOL:return"bool";case xe.onnx.TensorProto.DataType.INT16:return"int16";case xe.onnx.TensorProto.DataType.UINT16:return"uint16";case xe.onnx.TensorProto.DataType.INT32:return"int32";case xe.onnx.TensorProto.DataType.UINT32:return"uint32";case xe.onnx.TensorProto.DataType.FLOAT:return"float32";case xe.onnx.TensorProto.DataType.DOUBLE:return"float64";case xe.onnx.TensorProto.DataType.STRING:return"string";case xe.onnx.TensorProto.DataType.INT64:return"int32";case xe.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${xe.onnx.TensorProto.DataType[je]}`)}}static tensorDataTypeStringToEnum(je){switch(je){case"int8":return xe.onnx.TensorProto.DataType.INT8;case"uint8":return xe.onnx.TensorProto.DataType.UINT8;case"bool":return xe.onnx.TensorProto.DataType.BOOL;case"int16":return xe.onnx.TensorProto.DataType.INT16;case"uint16":return xe.onnx.TensorProto.DataType.UINT16;case"int32":return xe.onnx.TensorProto.DataType.INT32;case"uint32":return xe.onnx.TensorProto.DataType.UINT32;case"float32":return xe.onnx.TensorProto.DataType.FLOAT;case"float64":return xe.onnx.TensorProto.DataType.DOUBLE;case"string":return xe.onnx.TensorProto.DataType.STRING;case"int64":return xe.onnx.TensorProto.DataType.INT64;case"uint64":return xe.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${je}`)}}static tensorDimsFromProto(je){return je.map(Be=>Ee.default.isLong(Be)?Be.toNumber():Be)}static tensorValueTypeFromProto(je){return{tensorType:Ce.tensorDataTypeFromProto(je.elemType),shape:{dims:Ce.tensorDimsFromProto(je.shape.dim.map(Be=>Be.dimValue))}}}static tensorDimsFromORTFormat(je){const Be=[];for(let qe=0;qe<je.dimsLength();qe++)Be.push(Se.longToNumber(je.dims(qe)));return Be}static tensorAttributesFromORTFormat(je){const Be=[];for(let qe=0;qe<je.attributesLength();qe++)Be.push(je.attributes(qe));return Be}}e.ProtoUtil=Ce;class Se{static longToNumber(je,Be){return Ee.default.isLong(je)?je.toNumber():je instanceof Te.flatbuffers.Long?Ee.default.fromValue({low:je.low,high:je.high,unsigned:Be!=null&&Be}).toNumber():je}static isLong(je){return Ee.default.isLong(je)||je instanceof Te.flatbuffers.Long}}e.LongUtil=Se;class Ae{static size(je){return Ae.getSizeFromDimensionRange(je,0,je.length)}static sizeFromDimension(je,Be){if(Be<0||Be>je.length)throw new Error(`invalid dimension of ${Be} for sizeFromDimension as Tensor has ${je.length} dimensions.`);return Ae.getSizeFromDimensionRange(je,Be,je.length)}static sizeToDimension(je,Be){if(Be<0||Be>je.length)throw new Error(`invalid dimension of ${Be} for sizeToDimension as Tensor has ${je.length} dimensions.`);return Ae.getSizeFromDimensionRange(je,0,Be)}static getSizeFromDimensionRange(je,Be,qe){let He=1;for(let Xe=Be;Xe<qe;Xe++){if(je[Xe]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");He*=je[Xe]}return He}static computeStrides(je){const Be=je.length;if(Be===0)return[];if(Be===1)return[1];const qe=new Array(Be);qe[Be-1]=1,qe[Be-2]=je[Be-1];for(let He=Be-3;He>=0;--He)qe[He]=qe[He+1]*je[He+1];return qe}static transpose(je){return je.slice().reverse()}static indicesToOffset(je,Be,qe){qe===void 0&&(qe=je.length);let He=0;for(let Xe=0;Xe<qe;++Xe)He+=Be[Xe]*je[Xe];return He}static offsetToIndices(je,Be){const qe=Be.length;if(qe===0)return[];if(qe===1)return[je*Be[0]];const He=new Array(Be.length);for(let Xe=0;Xe<He.length-1;++Xe)He[Xe]=Math.floor(je/Be[Xe]),je-=He[Xe]*Be[Xe];return He[He.length-1]=je,He}static normalizeAxis(je,Be){if(je<-Be&&je>=Be)throw new Error("unsupported axis for this operation.");return je<0?je+Be:je}static normalizeAxes(je,Be){return je.map(qe=>this.normalizeAxis(qe,Be))}static incrementIndex(je,Be,qe){if(Be.length===0||je.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(qe===void 0)qe=Be.length;else if(qe<=0||qe>Be.length)throw new Error("Incorrect axis to increment on");for(let He=qe-1;He>=0&&(je[He]++,!(je[He]<Be[He]));--He)je[He]=0}static calculateReshapedDims(je,Be){if(Be.length===0){if(je.length===0||Ae.size(je)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}const qe=Be.length,He=new Array(qe);let Xe=-1,Je=1;for(let Ke=0;Ke<qe;Ke++){if(Be[Ke]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(Be[Ke]===-1){if(Xe!==-1)throw new Error("at most one dimension in shape hints can be -1");Xe=Ke}else{if(Be[Ke]===0){if(Ke>=je.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");He[Ke]=je[Ke]}else He[Ke]=Be[Ke];Je*=He[Ke]}}const Qe=Ae.size(je);if(Xe!==-1){if(Qe%Je!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${je}] Output shape: [${Be}]`);He[Xe]=Qe/Je}else if(Je!==Qe)throw new Error("reshapedDims and originalDims don't have matching sizes");return He}static sortBasedOnPerm(je,Be){return Be?Be.map(qe=>je[qe]):je.slice().reverse()}static padShape(je,Be){const qe=je.length;return je.map((He,Xe)=>He+Be[Xe]+Be[Xe+qe])}static areEqual(je,Be){return je.length===Be.length&&je.every((qe,He)=>qe===Be[He])}static validateDimsAndCalcSize(je){if(je.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let Be=1;for(const qe of je){if(!Number.isInteger(qe))throw new TypeError(`Invalid shape: ${qe} is not an integer`);if(qe<0||qe>2147483647)throw new TypeError(`Invalid shape: length ${qe} is not allowed`);Be*=qe}return Be}static flattenShape(je,Be){Be<0&&(Be+=je.length);const qe=je.reduce((Xe,Je)=>Xe*Je,1),He=je.slice(Be).reduce((Xe,Je)=>Xe*Je,1);return[qe/He,He]}static squeezeShape(je,Be){const qe=new Array;Be=Ae.normalizeAxes(Be,je.length);for(let He=0;He<je.length;He++){const Xe=Be.indexOf(He)>=0;if(Xe&&je[He]!==1)throw new Error("squeeze an axis of size different than 1");(Be.length===0&&je[He]>1||Be.length>0&&!Xe)&&qe.push(je[He])}return qe}static unsqueezeShape(je,Be){const qe=new Array(je.length+Be.length);qe.fill(0);for(let Xe=0;Xe<Be.length;Xe++){const Je=Ae.normalizeAxis(Be[Xe],qe.length);if(Je>=qe.length)throw new Error("'axes' has an out of range axis");if(qe[Je]!==0)throw new Error("'axes' has a duplicate axis");qe[Je]=1}let He=0;for(let Xe=0;Xe<qe.length;Xe++)qe[Xe]===0&&(qe[Xe]=je[He++]);if(He!==je.length)throw new Error("the unsqueezed dimension could not be established");return qe}}e.ShapeUtil=Ae,e.MathUtil=class{static sqr(Ve,je,Be,qe,He){if(qe<0||qe>=je.length)throw new Error("sourceIndex out of bounds");if(Be<0||Be>=Ve.length)throw new Error("targetIndex out of bounds");if(qe+He>je.length)throw new Error("source indices to be copied are outside bounds");if(Be+He>Ve.length)throw new Error("target array is too small to hold result");for(let Xe=0;Xe<He;Xe++)Ve[Be+Xe]+=Math.pow(je[qe+Xe],2)}static axpy(Ve,je,Be,qe,He,Xe){if(qe<0||qe>=je.length)throw new Error("sourceIndex out of bounds");if(Be<0||Be>=Ve.length)throw new Error("targetIndex out of bounds");if(qe+He>je.length)throw new Error("source indices to be copied are outside bounds");if(Be+He>Ve.length)throw new Error("target array is too small to hold result");for(let Je=0;Je<He;Je++)Ve[Be+Je]+=Xe*je[qe+Je]}static powx(Ve,je,Be,qe,He,Xe){if(qe<0||qe>=je.length)throw new Error("sourceIndex out of bounds");if(Be<0||Be>=Ve.length)throw new Error("targetIndex out of bounds");if(qe+He>je.length)throw new Error("source indices to be copied are outside bounds");if(Be+He>Ve.length)throw new Error("target array is too small to hold result");for(let Je=0;Je<He;Je++)Ve[Be+Je]=Math.pow(je[qe+Je],Xe)}static mul(Ve,je,Be,qe,He){if(qe<0||qe>=je.length)throw new Error("sourceIndex out of bounds");if(Be<0||Be>=Ve.length)throw new Error("targetIndex out of bounds");if(qe+He>je.length)throw new Error("source indices to be copied are outside bounds");if(Be+He>Ve.length)throw new Error("target array is too small to hold result");for(let Xe=0;Xe<He;Xe++)Ve[Be+Xe]=je[qe+Xe]*Ve[Be+Xe]}};class Ie{static splitShape(je,Be,qe,He){if(qe.length===0){if(!He)throw new Error("need to know number of outputs when the 'split' attribute is not specified");Ie.determineSplit(je[Be],He,qe)}const Xe=[],Je=[0];for(let Qe=0;Qe<qe.length;++Qe){Qe!==0&&Je.push(Je[Qe-1]+qe[Qe-1]);const Ke=je.slice();Ke[Be]=qe[Qe],Xe.push(Ke)}return[Xe,Je]}static determineSplit(je,Be,qe){if(je%Be!=0)throw new Error("cannot split tensor to equal sized parts");for(let He=0;He<Be;++He)qe.push(je/Be)}}e.SplitUtil=Ie;class Me{static calcReduce(je,Be,qe,He,Xe){const Je=je.dims.slice(0);Be.length===0&&Je.forEach((mn,wn)=>Be.push(wn));const Qe=Me.calcReduceShape(Je,Be,!0),Ke=Ae.size(Qe),Ye=new Pe.Tensor(Qe,je.type),pn=Ae.computeStrides(Qe),un=Ae.computeStrides(Je),fn=new Array(Je.length);for(let mn=0;mn<Ke;mn++){const wn=Ae.offsetToIndices(mn,pn);ke.fillIndex(wn,Je,fn),Ye.set(wn,Me.calcReduceByAxis(je.numberData,Be,Je,0,Ae.indicesToOffset(fn,un),He,Xe))}return qe?Ye:new Pe.Tensor(Me.calcReduceShape(Je,Be,qe),Ye.type,void 0,void 0,Ye.data,Ye.dataId)}static calcReduceByAxis(je,Be,qe,He,Xe,Je,Qe){let Ke=0;if(He>=Be.length)return Je(je[Xe]);const Ye=Be[He],pn=Ye>=qe.length?1:Ae.size(qe.slice(Ye+1));for(let un=0;un<qe[Ye];un++)Ke=un===0?Me.calcReduceByAxis(je,Be,qe,He+1,Xe,Je,Qe):Qe(Ke,Me.calcReduceByAxis(je,Be,qe,He+1,Xe,Je,Qe)),Xe+=pn;return Ke}static calcReduceShape(je,Be,qe){const He=je.slice();for(let Xe=0;Xe<Be.length;Xe++)He[Be[Xe]]=qe?1:0;return He.filter(Xe=>Xe!==0)}}e.ReduceUtil=Me;class Fe{static adjustPoolAttributes(je,Be,qe,He,Xe,Je){if(!je&&qe.length!==Be.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(je)for(let Qe=0;Qe<Be.length-2;Qe++)Qe>=qe.length?qe.push(Be[Qe+2]):qe[Qe]=Be[Qe+2];for(let Qe=0;Qe<qe.length;Qe++)if(Qe<He.length){if(He[Qe]<0)throw new Error("strides should be greater than or equal to 1")}else He.push(1);for(let Qe=0;Qe<qe.length;Qe++)if(Qe<Xe.length){if(Xe[Qe]<0)throw new Error("dilations should be greater than or equal to 1")}else Xe.push(1);for(let Qe=0;Qe<2*qe.length;Qe++)if(Qe<Je.length){if(Je[Qe]<0)throw new Error("pad should be greater than or equal to 1")}else Je.push(0);for(let Qe=0;Qe<qe.length;Qe++){if(qe[Qe]<=0)throw new Error("kernel shapes need to be greater than 0");if(Je[Qe]>=qe[Qe]||Je[Qe+qe.length]>=qe[Qe])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(je,Be,qe,He,Xe,Je){if(Je){if(Xe.length!==2*(je.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(Be.length!==je.length-2)throw new Error("length of strides should be the length of data dimensions");if(He.length!==je.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let Qe=0;Qe<je.length-2;Qe++)Fe.adjustPadAndReturnShape(je[Qe+2],Be[Qe],qe[Qe],He[Qe],Xe,Qe,Qe+je.length-2,Je)}}static computePoolOutputShape(je,Be,qe,He,Xe,Je,Qe){if(Be.length<=0)throw new Error("input shape must be of size greater than 0");const Ke=[Be[0],Be[1]];return Fe.computeShapeHelper(je,Be,Ke,qe,He,Xe,Je,Qe),Ke}static computeConvOutputShape(je,Be,qe,He,Xe,Je,Qe){if(je.length<=0||Be.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const Ke=[je[0],Be[0]];return Fe.computeShapeHelper(!1,je,Ke,qe,He,Xe,Je,Qe),Ke}static computeShapeHelper(je,Be,qe,He,Xe,Je,Qe,Ke){if(je)for(let Ye=0;Ye<Be.length-2;Ye++)qe.push(1);else for(let Ye=0;Ye<Be.length-2;Ye++)qe.push(Fe.adjustPadAndReturnShape(Be[Ye+2],He[Ye],Xe[Ye],Je[Ye],Qe,Ye,Ye+Be.length-2,Ke))}static adjustPadAndReturnShape(je,Be,qe,He,Xe,Je,Qe,Ke){const Ye=qe*(He-1)+1;if(!Ke||Ke==="NOTSET")return Math.floor((je+Xe[Je]+Xe[Qe]-Ye)/Be+1);switch(Ke){case"VALID":return Xe[Je]=0,Xe[Qe]=0,Math.floor((je-Ye)/Be+1);case"SAME_LOWER":case"SAME_UPPER":if(qe!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const pn=((je+Be-1)/Be-1)*Be+He-je;return Xe[Je]=Math.floor(Ke==="SAME_LOWER"?(pn+1)/2:pn/2),Xe[Qe]=pn-Xe[Je],Math.floor((je+pn-He)/Be+1)}default:throw new Error("Unsupported AutoPad type")}}}e.PoolConvUtil=Fe,e.MIN_CLIP=-34028234663852886e22,e.MAX_CLIP=34028234663852886e22,e.decodeUtf8String=function(Ve){return new TextDecoder().decode(Ve)}},7967:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,_e,Te,Ee)=>{if(typeof t=="object"&&t!==null){if(Te.has(t))throw new Error("Circular reference in options");Te.add(t)}Object.entries(t).forEach(([xe,Pe])=>{const Re=_e?_e+xe:xe;if(typeof Pe=="object")(0,e.iterateExtraOptions)(Pe,Re+".",Te,Ee);else if(typeof Pe=="string"||typeof Pe=="number")Ee(Re,Pe.toString());else{if(typeof Pe!="boolean")throw new Error("Can't handle extra config type: "+typeof Pe);Ee(Re,Pe?"1":"0")}})}},2157:function(r,e,t){var _e,Te=this&&this.__createBinding||(Object.create?function(pn,un,fn,mn){mn===void 0&&(mn=fn);var wn=Object.getOwnPropertyDescriptor(un,fn);wn&&!("get"in wn?!un.__esModule:wn.writable||wn.configurable)||(wn={enumerable:!0,get:function(){return un[fn]}}),Object.defineProperty(pn,mn,wn)}:function(pn,un,fn,mn){mn===void 0&&(mn=fn),pn[mn]=un[fn]}),Ee=this&&this.__setModuleDefault||(Object.create?function(pn,un){Object.defineProperty(pn,"default",{enumerable:!0,value:un})}:function(pn,un){pn.default=un}),xe=this&&this.__importStar||function(pn){if(pn&&pn.__esModule)return pn;var un={};if(pn!=null)for(var fn in pn)fn!=="default"&&Object.prototype.hasOwnProperty.call(pn,fn)&&Te(un,pn,fn);return Ee(un,pn),un};Object.defineProperty(e,"__esModule",{value:!0}),e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=e.initWasm=void 0;const Pe=t(1670),Re=xe(t(349)),ke=t(6361),Ce=()=>!!Pe.env.wasm.proxy&&typeof document<"u";let Se,Ae,Ie,Me=!1,Fe=!1,Ve=!1;const je=[],Be=[],qe=[],He=[],Xe=[],Je=[],Qe=()=>{if(Me||!Fe||Ve||!Se)throw new Error("worker not ready")},Ke=pn=>{switch(pn.data.type){case"init-wasm":Me=!1,pn.data.err?(Ve=!0,Ae[1](pn.data.err)):(Fe=!0,Ae[0]());break;case"init-ort":pn.data.err?Ie[1](pn.data.err):Ie[0]();break;case"create_allocate":pn.data.err?je.shift()[1](pn.data.err):je.shift()[0](pn.data.out);break;case"create_finalize":pn.data.err?Be.shift()[1](pn.data.err):Be.shift()[0](pn.data.out);break;case"create":pn.data.err?qe.shift()[1](pn.data.err):qe.shift()[0](pn.data.out);break;case"release":pn.data.err?He.shift()[1](pn.data.err):He.shift()[0]();break;case"run":pn.data.err?Xe.shift()[1](pn.data.err):Xe.shift()[0](pn.data.out);break;case"end-profiling":pn.data.err?Je.shift()[1](pn.data.err):Je.shift()[0]()}},Ye=typeof document<"u"?(_e=document?.currentScript)===null||_e===void 0?void 0:_e.src:void 0;e.initWasm=async()=>{if(Ce()){if(Fe)return;if(Me)throw new Error("multiple calls to 'initWasm()' detected.");if(Ve)throw new Error("previous call to 'initWasm()' failed.");return Me=!0,Pe.env.wasm.wasmPaths===void 0&&Ye&&Ye.indexOf("blob:")!==0&&(Pe.env.wasm.wasmPaths=Ye.substr(0,+Ye.lastIndexOf("/")+1)),new Promise((pn,un)=>{Se?.terminate(),Se=t(9710).Z(),Se.onmessage=Ke,Ae=[pn,un];const fn={type:"init-wasm",in:Pe.env.wasm};Se.postMessage(fn)})}return(0,ke.initializeWebAssembly)(Pe.env.wasm)},e.initOrt=async(pn,un)=>{if(Ce())return Qe(),new Promise((fn,mn)=>{Ie=[fn,mn];const wn={type:"init-ort",in:{numThreads:pn,loggingLevel:un}};Se.postMessage(wn)});Re.initOrt(pn,un)},e.createSessionAllocate=async pn=>Ce()?(Qe(),new Promise((un,fn)=>{je.push([un,fn]);const mn={type:"create_allocate",in:{model:pn}};Se.postMessage(mn,[pn.buffer])})):Re.createSessionAllocate(pn),e.createSessionFinalize=async(pn,un)=>Ce()?(Qe(),new Promise((fn,mn)=>{Be.push([fn,mn]);const wn={type:"create_finalize",in:{modeldata:pn,options:un}};Se.postMessage(wn)})):Re.createSessionFinalize(pn,un),e.createSession=async(pn,un)=>Ce()?(Qe(),new Promise((fn,mn)=>{qe.push([fn,mn]);const wn={type:"create",in:{model:pn,options:un}};Se.postMessage(wn,[pn.buffer])})):Re.createSession(pn,un),e.releaseSession=async pn=>{if(Ce())return Qe(),new Promise((un,fn)=>{He.push([un,fn]);const mn={type:"release",in:pn};Se.postMessage(mn)});Re.releaseSession(pn)},e.run=async(pn,un,fn,mn,wn)=>Ce()?(Qe(),new Promise((Pn,xn)=>{Xe.push([Pn,xn]);const In={type:"run",in:{sessionId:pn,inputIndices:un,inputs:fn,outputIndices:mn,options:wn}};Se.postMessage(In,Re.extractTransferableBuffers(fn))})):Re.run(pn,un,fn,mn,wn),e.endProfiling=async pn=>{if(Ce())return Qe(),new Promise((un,fn)=>{Je.push([un,fn]);const mn={type:"end-profiling",in:pn};Se.postMessage(mn)});Re.endProfiling(pn)}},586:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const _e=t(7967),Te=t(4983),Ee=t(6361);e.setRunOptions=xe=>{const Pe=(0,Ee.getInstance)();let Re=0;const ke=[],Ce=xe||{};try{if(xe?.logSeverityLevel===void 0)Ce.logSeverityLevel=2;else if(typeof xe.logSeverityLevel!="number"||!Number.isInteger(xe.logSeverityLevel)||xe.logSeverityLevel<0||xe.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${xe.logSeverityLevel}`);if(xe?.logVerbosityLevel===void 0)Ce.logVerbosityLevel=0;else if(typeof xe.logVerbosityLevel!="number"||!Number.isInteger(xe.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${xe.logVerbosityLevel}`);xe?.terminate===void 0&&(Ce.terminate=!1);let Se=0;if(xe?.tag!==void 0&&(Se=(0,Te.allocWasmString)(xe.tag,ke)),Re=Pe._OrtCreateRunOptions(Ce.logSeverityLevel,Ce.logVerbosityLevel,!!Ce.terminate,Se),Re===0)throw new Error("Can't create run options");return xe?.extra!==void 0&&(0,_e.iterateExtraOptions)(xe.extra,"",new WeakSet,(Ae,Ie)=>{const Me=(0,Te.allocWasmString)(Ae,ke),Fe=(0,Te.allocWasmString)(Ie,ke);if(Pe._OrtAddRunConfigEntry(Re,Me,Fe)!==0)throw new Error(`Can't set a run config entry: ${Ae} - ${Ie}`)}),[Re,ke]}catch(Se){throw Re!==0&&Pe._OrtReleaseRunOptions(Re),ke.forEach(Pe._free),Se}}},2306:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxruntimeWebAssemblySessionHandler=void 0;const _e=t(2806),Te=t(1670),Ee=t(2850),xe=t(2157);let Pe;e.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate(Re){const ke=await fetch(Re),Ce=await ke.arrayBuffer();return(0,xe.createSessionAllocate)(new Uint8Array(Ce))}async loadModel(Re,ke){if(Pe||(await(0,xe.initOrt)(Te.env.wasm.numThreads,(Ce=>{switch(Ce){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${Ce}`)}})(Te.env.logLevel)),Pe=!0),typeof Re=="string")if(typeof fetch>"u"){const Ce=await(0,Ee.promisify)(_e.readFile)(Re);[this.sessionId,this.inputNames,this.outputNames]=await(0,xe.createSession)(Ce,ke)}else{const Ce=await this.createSessionAllocate(Re);[this.sessionId,this.inputNames,this.outputNames]=await(0,xe.createSessionFinalize)(Ce,ke)}else[this.sessionId,this.inputNames,this.outputNames]=await(0,xe.createSession)(Re,ke)}async dispose(){return(0,xe.releaseSession)(this.sessionId)}async run(Re,ke,Ce){const Se=[],Ae=[];Object.entries(Re).forEach(Ve=>{const je=Ve[0],Be=Ve[1],qe=this.inputNames.indexOf(je);if(qe===-1)throw new Error(`invalid input '${je}'`);Se.push(Be),Ae.push(qe)});const Ie=[];Object.entries(ke).forEach(Ve=>{const je=Ve[0],Be=this.outputNames.indexOf(je);if(Be===-1)throw new Error(`invalid output '${je}'`);Ie.push(Be)});const Me=await(0,xe.run)(this.sessionId,Ae,Se.map(Ve=>[Ve.type,Ve.dims,Ve.data]),Ie,Ce),Fe={};for(let Ve=0;Ve<Me.length;Ve++)Fe[this.outputNames[Ie[Ve]]]=new Te.Tensor(Me[Ve][0],Me[Ve][2],Me[Ve][1]);return Fe}startProfiling(){}endProfiling(){(0,xe.endProfiling)(this.sessionId)}}},4919:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const _e=t(7967),Te=t(4983),Ee=t(6361);e.setSessionOptions=xe=>{const Pe=(0,Ee.getInstance)();let Re=0;const ke=[],Ce=xe||{};(Se=>{Se.extra||(Se.extra={}),Se.extra.session||(Se.extra.session={});const Ae=Se.extra.session;Ae.use_ort_model_bytes_directly||(Ae.use_ort_model_bytes_directly="1")})(Ce);try{xe?.graphOptimizationLevel===void 0&&(Ce.graphOptimizationLevel="all");const Se=(Me=>{switch(Me){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${Me}`)}})(Ce.graphOptimizationLevel);xe?.enableCpuMemArena===void 0&&(Ce.enableCpuMemArena=!0),xe?.enableMemPattern===void 0&&(Ce.enableMemPattern=!0),xe?.executionMode===void 0&&(Ce.executionMode="sequential");const Ae=(Me=>{switch(Me){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${Me}`)}})(Ce.executionMode);let Ie=0;if(xe?.logId!==void 0&&(Ie=(0,Te.allocWasmString)(xe.logId,ke)),xe?.logSeverityLevel===void 0)Ce.logSeverityLevel=2;else if(typeof xe.logSeverityLevel!="number"||!Number.isInteger(xe.logSeverityLevel)||xe.logSeverityLevel<0||xe.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${xe.logSeverityLevel}`);if(xe?.logVerbosityLevel===void 0)Ce.logVerbosityLevel=0;else if(typeof xe.logVerbosityLevel!="number"||!Number.isInteger(xe.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${xe.logVerbosityLevel}`);if(xe?.enableProfiling===void 0&&(Ce.enableProfiling=!1),Re=Pe._OrtCreateSessionOptions(Se,!!Ce.enableCpuMemArena,!!Ce.enableMemPattern,Ae,!!Ce.enableProfiling,0,Ie,Ce.logSeverityLevel,Ce.logVerbosityLevel),Re===0)throw new Error("Can't create session options");return xe?.executionProviders&&((Me,Fe,Ve)=>{for(const je of Fe){let Be=typeof je=="string"?je:je.name;switch(Be){case"xnnpack":Be="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${Be}`)}const qe=(0,Te.allocWasmString)(Be,Ve);if((0,Ee.getInstance)()._OrtAppendExecutionProvider(Me,qe)!==0)throw new Error(`Can't append execution provider: ${Be}`)}})(Re,xe.executionProviders,ke),xe?.extra!==void 0&&(0,_e.iterateExtraOptions)(xe.extra,"",new WeakSet,(Me,Fe)=>{const Ve=(0,Te.allocWasmString)(Me,ke),je=(0,Te.allocWasmString)(Fe,ke);if(Pe._OrtAddSessionConfigEntry(Re,Ve,je)!==0)throw new Error(`Can't set a session config entry: ${Me} - ${Fe}`)}),[Re,ke]}catch(Se){throw Re!==0&&Pe._OrtReleaseSessionOptions(Re),ke.forEach(Pe._free),Se}}},4983:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const _e=t(6361);e.allocWasmString=(Te,Ee)=>{const xe=(0,_e.getInstance)(),Pe=xe.lengthBytesUTF8(Te)+1,Re=xe._malloc(Pe);return xe.stringToUTF8(Te,Re,Pe),Ee.push(Re),Re}},349:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const _e=t(586),Te=t(4919),Ee=t(4983),xe=t(6361);e.initOrt=(Se,Ae)=>{const Ie=(0,xe.getInstance)()._OrtInit(Se,Ae);if(Ie!==0)throw new Error(`Can't initialize onnxruntime. error code = ${Ie}`)};const Pe=new Map;e.createSessionAllocate=Se=>{const Ae=(0,xe.getInstance)(),Ie=Ae._malloc(Se.byteLength);return Ae.HEAPU8.set(Se,Ie),[Ie,Se.byteLength]},e.createSessionFinalize=(Se,Ae)=>{const Ie=(0,xe.getInstance)();let Me=0,Fe=0,Ve=[];try{if([Fe,Ve]=(0,Te.setSessionOptions)(Ae),Me=Ie._OrtCreateSession(Se[0],Se[1],Fe),Me===0)throw new Error("Can't create a session")}finally{Ie._free(Se[0]),Ie._OrtReleaseSessionOptions(Fe),Ve.forEach(Ie._free)}const je=Ie._OrtGetInputCount(Me),Be=Ie._OrtGetOutputCount(Me),qe=[],He=[],Xe=[],Je=[];for(let Qe=0;Qe<je;Qe++){const Ke=Ie._OrtGetInputName(Me,Qe);if(Ke===0)throw new Error("Can't get an input name");He.push(Ke),qe.push(Ie.UTF8ToString(Ke))}for(let Qe=0;Qe<Be;Qe++){const Ke=Ie._OrtGetOutputName(Me,Qe);if(Ke===0)throw new Error("Can't get an output name");Je.push(Ke),Xe.push(Ie.UTF8ToString(Ke))}return Pe.set(Me,[Me,He,Je]),[Me,qe,Xe]},e.createSession=(Se,Ae)=>{const Ie=(0,e.createSessionAllocate)(Se);return(0,e.createSessionFinalize)(Ie,Ae)},e.releaseSession=Se=>{const Ae=(0,xe.getInstance)(),Ie=Pe.get(Se);if(!Ie)throw new Error("invalid session id");const Me=Ie[0],Fe=Ie[1],Ve=Ie[2];Fe.forEach(Ae._OrtFree),Ve.forEach(Ae._OrtFree),Ae._OrtReleaseSession(Me),Pe.delete(Se)};const Re=Se=>{switch(Se){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${Se}`)}},ke=Se=>{switch(Se){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${Se}`)}},Ce=Se=>{switch(Se){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${Se}`)}};e.run=(Se,Ae,Ie,Me,Fe)=>{const Ve=(0,xe.getInstance)(),je=Pe.get(Se);if(!je)throw new Error("invalid session id");const Be=je[0],qe=je[1],He=je[2],Xe=Ae.length,Je=Me.length;let Qe=0,Ke=[];const Ye=[],pn=[];try{[Qe,Ke]=(0,_e.setRunOptions)(Fe);for(let xn=0;xn<Xe;xn++){const In=Ie[xn][0],Ln=Ie[xn][1],$n=Ie[xn][2];let Sn,Bn;if(Array.isArray($n)){Bn=4*$n.length,Sn=Ve._malloc(Bn),pn.push(Sn);let Un=Sn/4;for(let zn=0;zn<$n.length;zn++){if(typeof $n[zn]!="string")throw new TypeError(`tensor data at index ${zn} is not a string`);Ve.HEAPU32[Un++]=(0,Ee.allocWasmString)($n[zn],pn)}}else Bn=$n.byteLength,Sn=Ve._malloc(Bn),pn.push(Sn),Ve.HEAPU8.set(new Uint8Array($n.buffer,$n.byteOffset,Bn),Sn);const Tn=Ve.stackSave(),vn=Ve.stackAlloc(4*Ln.length);try{let Un=vn/4;Ln.forEach(Hn=>Ve.HEAP32[Un++]=Hn);const zn=Ve._OrtCreateTensor(Re(In),Sn,Bn,vn,Ln.length);if(zn===0)throw new Error("Can't create a tensor");Ye.push(zn)}finally{Ve.stackRestore(Tn)}}const un=Ve.stackSave(),fn=Ve.stackAlloc(4*Xe),mn=Ve.stackAlloc(4*Xe),wn=Ve.stackAlloc(4*Je),Pn=Ve.stackAlloc(4*Je);try{let xn=fn/4,In=mn/4,Ln=wn/4,$n=Pn/4;for(let Tn=0;Tn<Xe;Tn++)Ve.HEAPU32[xn++]=Ye[Tn],Ve.HEAPU32[In++]=qe[Ae[Tn]];for(let Tn=0;Tn<Je;Tn++)Ve.HEAPU32[Ln++]=0,Ve.HEAPU32[$n++]=He[Me[Tn]];let Sn=Ve._OrtRun(Be,mn,fn,Xe,Pn,Je,wn,Qe);const Bn=[];if(Sn===0)for(let Tn=0;Tn<Je;Tn++){const vn=Ve.HEAPU32[wn/4+Tn],Un=Ve.stackSave(),zn=Ve.stackAlloc(16);let Hn,Jn=0;try{if(Sn=Ve._OrtGetTensorData(vn,zn,zn+4,zn+8,zn+12),Sn!==0)throw new Error(`Can't access output tensor data. error code = ${Sn}`);let nr=zn/4;const or=Ve.HEAPU32[nr++];Jn=Ve.HEAPU32[nr++];const Sr=Ve.HEAPU32[nr++],kr=Ve.HEAPU32[nr++],Vr=[];for(let Qr=0;Qr<kr;Qr++)Vr.push(Ve.HEAPU32[Sr/4+Qr]);Ve._OrtFree(Sr);const Lr=Vr.length===0?1:Vr.reduce((Qr,wr)=>Qr*wr);if(Hn=ke(or),Hn==="string"){const Qr=[];let wr=Jn/4;for(let Yn=0;Yn<Lr;Yn++){const gi=Ve.HEAPU32[wr++],ui=Yn===Lr-1?void 0:Ve.HEAPU32[wr]-gi;Qr.push(Ve.UTF8ToString(gi,ui))}Bn.push([Hn,Vr,Qr])}else{const Qr=new(Ce(Hn))(Lr);new Uint8Array(Qr.buffer,Qr.byteOffset,Qr.byteLength).set(Ve.HEAPU8.subarray(Jn,Jn+Qr.byteLength)),Bn.push([Hn,Vr,Qr])}}finally{Ve.stackRestore(Un),Hn==="string"&&Jn&&Ve._free(Jn),Ve._OrtReleaseTensor(vn)}}if(Sn===0)return Bn;throw new Error(`failed to call OrtRun(). error code = ${Sn}.`)}finally{Ve.stackRestore(un)}}finally{Ye.forEach(Ve._OrtReleaseTensor),pn.forEach(Ve._free),Ve._OrtReleaseRunOptions(Qe),Ke.forEach(Ve._free)}},e.endProfiling=Se=>{const Ae=(0,xe.getInstance)(),Ie=Pe.get(Se);if(!Ie)throw new Error("invalid session id");const Me=Ie[0],Fe=Ae._OrtEndProfiling(Me);if(Fe===0)throw new Error("Can't get an profile file name");Ae._OrtFree(Fe)},e.extractTransferableBuffers=Se=>{const Ae=[];for(const Ie of Se){const Me=Ie[2];!Array.isArray(Me)&&Me.buffer&&Ae.push(Me.buffer)}return Ae}},6361:function(r,e,t){var _e=this&&this.__createBinding||(Object.create?function(Fe,Ve,je,Be){Be===void 0&&(Be=je);var qe=Object.getOwnPropertyDescriptor(Ve,je);qe&&!("get"in qe?!Ve.__esModule:qe.writable||qe.configurable)||(qe={enumerable:!0,get:function(){return Ve[je]}}),Object.defineProperty(Fe,Be,qe)}:function(Fe,Ve,je,Be){Be===void 0&&(Be=je),Fe[Be]=Ve[je]}),Te=this&&this.__setModuleDefault||(Object.create?function(Fe,Ve){Object.defineProperty(Fe,"default",{enumerable:!0,value:Ve})}:function(Fe,Ve){Fe.default=Ve}),Ee=this&&this.__importStar||function(Fe){if(Fe&&Fe.__esModule)return Fe;var Ve={};if(Fe!=null)for(var je in Fe)je!=="default"&&Object.prototype.hasOwnProperty.call(Fe,je)&&_e(Ve,Fe,je);return Te(Ve,Fe),Ve},xe=this&&this.__importDefault||function(Fe){return Fe&&Fe.__esModule?Fe:{default:Fe}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const Pe=Ee(t(6449)),Re=xe(t(932)),ke=t(3474);let Ce,Se=!1,Ae=!1,Ie=!1;const Me=(Fe,Ve)=>Ve?Fe?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":Fe?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async Fe=>{if(Se)return Promise.resolve();if(Ae)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(Ie)throw new Error("previous call to 'initializeWebAssembly()' failed.");Ae=!0;const Ve=Fe.initTimeout,je=Fe.numThreads,Be=Fe.simd,qe=je>1&&(()=>{try{return typeof SharedArrayBuffer<"u"&&(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}})(),He=Be&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}})(),Xe=typeof Fe.wasmPaths=="string"?Fe.wasmPaths:void 0,Je=Me(!1,qe),Qe=Me(He,qe),Ke=typeof Fe.wasmPaths=="object"?Fe.wasmPaths[Qe]:void 0;let Ye=!1;const pn=[];if(Ve>0&&pn.push(new Promise(un=>{setTimeout(()=>{Ye=!0,un()},Ve)})),pn.push(new Promise((un,fn)=>{const mn=qe?ke:Re.default,wn={locateFile:(Pn,xn)=>qe&&Pn.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([t(4154)],{type:"text/javascript"})):Pn===Je?Ke??(Xe??xn)+Qe:xn+Pn};if(qe)if(typeof Blob>"u")wn.mainScriptUrlOrBlob=Pe.join("/","ort-wasm-threaded.js");else{const Pn=`var ortWasmThreaded=(function(){var _scriptDir;return ${mn.toString()}})();`;wn.mainScriptUrlOrBlob=new Blob([Pn],{type:"text/javascript"})}mn(wn).then(Pn=>{Ae=!1,Se=!0,Ce=Pn,un()},Pn=>{Ae=!1,Ie=!0,fn(Pn)})})),await Promise.race(pn),Ye)throw new Error(`WebAssembly backend initializing failed due to timeout: ${Ve}ms`)},e.getInstance=()=>{if(Se&&Ce)return Ce;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var Fe;!Se||Ae||Ie||(Ae=!0,(Fe=Ce.PThread)===null||Fe===void 0||Fe.terminateAllThreads(),Ce=void 0,Ae=!1,Se=!1,Ie=!0)}},9710:(r,e,t)=>{t.d(e,{Z:()=>Ee});var _e=t(477),Te=t.n(_e);function Ee(){return Te()('/*!\n* ONNX Runtime Web v1.14.0\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var t={474:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){function e(){return j.buffer!=D&&N(j.buffer),P}function r(){return j.buffer!=D&&N(j.buffer),U}function a(){return j.buffer!=D&&N(j.buffer),F}function i(){return j.buffer!=D&&N(j.buffer),I}function o(){return j.buffer!=D&&N(j.buffer),W}var u,c,s;t=t||{},u||(u=void 0!==t?t:{}),u.ready=new Promise((function(t,e){c=t,s=e}));var l,f,p,h,d,y,b=Object.assign({},u),m="./this.program",g=(t,e)=>{throw e},v="object"==typeof window,w="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,O=u.ENVIRONMENT_IS_PTHREAD||!1,A="";function S(t){return u.locateFile?u.locateFile(t,A):A+t}if(_){let e;A=w?n(908).dirname(A)+"/":"//",y=()=>{d||(h=n(384),d=n(908))},l=function(t,e){return y(),t=d.normalize(t),h.readFileSync(t,e?void 0:"utf8")},p=t=>((t=l(t,!0)).buffer||(t=new Uint8Array(t)),t),f=(t,e,n)=>{y(),t=d.normalize(t),h.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(m=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof ct))throw t})),process.on("unhandledRejection",(function(t){throw t})),g=(t,e)=>{if(Q())throw process.exitCode=t,e;e instanceof ct||x("exiting due to exception: "+e),process.exit(t)},u.inspect=function(){return"[Emscripten Module object]"};try{e=n(925)}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}n.g.Worker=e.Worker}else(v||w)&&(w?A=self.location.href:"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),_scriptDir&&(A=_scriptDir),A=0!==A.indexOf("blob:")?A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_||(l=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},w&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)}));_&&"undefined"==typeof performance&&(n.g.performance=n(953).performance);var T=console.log.bind(console),E=console.warn.bind(console);_&&(y(),T=t=>h.writeSync(1,t+"\\n"),E=t=>h.writeSync(2,t+"\\n"));var M,C=u.print||T,x=u.printErr||E;Object.assign(u,b),b=null,u.thisProgram&&(m=u.thisProgram),u.quit&&(g=u.quit),u.wasmBinary&&(M=u.wasmBinary);var R=u.noExitRuntime||!1;"object"!=typeof WebAssembly&&at("no native wasm support detected");var j,k,D,P,U,F,I,W,H=!1,L="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function z(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&L)return L.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function Y(t,e){return(t>>>=0)?z(r(),t,e):""}function B(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function G(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function N(t){D=t,u.HEAP8=P=new Int8Array(t),u.HEAP16=new Int16Array(t),u.HEAP32=F=new Int32Array(t),u.HEAPU8=U=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=I=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=W=new Float64Array(t)}O&&(D=u.buffer);var V=u.INITIAL_MEMORY||16777216;if(O)j=u.wasmMemory,D=u.buffer;else if(u.wasmMemory)j=u.wasmMemory;else if(!((j=new WebAssembly.Memory({initial:V/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw x("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),_&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");j&&(D=j.buffer),V=D.byteLength,N(D);var $,q=[],X=[],J=[],Z=[];function Q(){return R||!1}function K(){var t=u.preRun.shift();q.unshift(t)}var tt,et=0,nt=null,rt=null;function at(t){throw O?postMessage({cmd:"onAbort",arg:t}):u.onAbort&&u.onAbort(t),x(t="Aborted("+t+")"),H=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),s(t),t}function it(){return tt.startsWith("data:application/octet-stream;base64,")}function ot(){var t=tt;try{if(t==tt&&M)return new Uint8Array(M);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){at(t)}}tt="ort-wasm-threaded.wasm",it()||(tt=S(tt));var ut={};function ct(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function st(t){(t=ht.Vb[t])||at(),ht.mc(t)}function lt(t){var e=ht.Cc();if(!e)return 6;ht.ac.push(e),ht.Vb[t.Ub]=e,e.Ub=t.Ub;var n={cmd:"run",start_routine:t.Ic,arg:t.zc,pthread_ptr:t.Ub};return e.$b=()=>{n.time=performance.now(),e.postMessage(n,t.Nc)},e.loaded&&(e.$b(),delete e.$b),0}function ft(t){if(O)return $t(1,1,t);Q()||(ht.oc(),u.onExit&&u.onExit(t),H=!0),g(t,new ct(t))}function pt(t,e){if(!e&&O)throw bt(t),"unwind";Q()||O||(me(),dt(J),be(0),re[1].length&&ae(1,10),re[2].length&&ae(2,10),ht.oc()),ft(t)}var ht={Yb:[],ac:[],qc:[],Vb:{},fc:function(){O&&ht.Ec()},Pc:function(){},Ec:function(){ht.receiveObjectTransfer=ht.Gc,ht.threadInitTLS=ht.pc,ht.setExitStatus=ht.nc,R=!1},nc:function(){},oc:function(){for(var t of Object.values(ht.Vb))ht.mc(t);for(t of ht.Yb)t.terminate();ht.Yb=[]},mc:function(t){var e=t.Ub;delete ht.Vb[e],ht.Yb.push(t),ht.ac.splice(ht.ac.indexOf(t),1),t.Ub=0,Oe(e)},Gc:function(){},pc:function(){ht.qc.forEach((t=>t()))},Fc:function(t,e){t.onmessage=n=>{var r=(n=n.data).cmd;if(t.Ub&&(ht.Bc=t.Ub),n.targetThread&&n.targetThread!=he()){var a=ht.Vb[n.Qc];a?a.postMessage(n,n.transferList):x(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===r?zt(n.queue):"spawnThread"===r?lt(n):"cleanupThread"===r?st(n.thread):"killThread"===r?(n=n.thread,r=ht.Vb[n],delete ht.Vb[n],r.terminate(),Oe(n),ht.ac.splice(ht.ac.indexOf(r),1),r.Ub=0):"cancelThread"===r?ht.Vb[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(t.loaded=!0,e&&e(t),t.$b&&(t.$b(),delete t.$b)):"print"===r?C("Thread "+n.threadId+": "+n.text):"printErr"===r?x("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"onAbort"===r?u.onAbort&&u.onAbort(n.arg):r&&x("worker sent an unknown command "+r);ht.Bc=void 0},t.onerror=t=>{throw x("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},_&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||_scriptDir,wasmMemory:j,wasmModule:k})},yc:function(){var t=S("ort-wasm-threaded.worker.js");ht.Yb.push(new Worker(t))},Cc:function(){return 0==ht.Yb.length&&(ht.yc(),ht.Fc(ht.Yb[0])),ht.Yb.pop()}};function dt(t){for(;0<t.length;)t.shift()(u)}function yt(t){var e=Ee();return t=t(),Me(e),t}function bt(t){if(O)return $t(2,0,t);try{pt(t)}catch(t){t instanceof ct||"unwind"==t||g(1,t)}}u.PThread=ht,u.establishStackSpace=function(){var t=he(),e=a()[t+44>>2>>>0];t=a()[t+48>>2>>>0],Te(e,e-t),Me(e)};var mt=[];function gt(t){var e=mt[t];return e||(t>=mt.length&&(mt.length=t+1),mt[t]=e=$.get(t)),e}u.invokeEntryPoint=function(t,e){t=gt(t)(e),Q()?ht.nc(t):Ae(t)};var vt,wt,_t=[],Ot=0,At=0;function St(t){this.Zb=t,this.Sb=t-24,this.xc=function(t){i()[this.Sb+4>>2>>>0]=t},this.bc=function(){return i()[this.Sb+4>>2>>>0]},this.wc=function(t){i()[this.Sb+8>>2>>>0]=t},this.Dc=function(){return i()[this.Sb+8>>2>>>0]},this.rc=function(){a()[this.Sb>>2>>>0]=0},this.hc=function(t){t=t?1:0,e()[this.Sb+12>>0>>>0]=t},this.uc=function(){return 0!=e()[this.Sb+12>>0>>>0]},this.ic=function(t){t=t?1:0,e()[this.Sb+13>>0>>>0]=t},this.kc=function(){return 0!=e()[this.Sb+13>>0>>>0]},this.fc=function(t,e){this.cc(0),this.xc(t),this.wc(e),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(a(),this.Sb>>2,1)},this.Hc=function(){return 1===Atomics.sub(a(),this.Sb>>2,1)},this.cc=function(t){i()[this.Sb+16>>2>>>0]=t},this.tc=function(){return i()[this.Sb+16>>2>>>0]},this.vc=function(){if(Re(this.bc()))return i()[this.Zb>>2>>>0];var t=this.tc();return 0!==t?t:this.Zb}}function Tt(t){return ye(new St(t).Sb)}function Et(t,e,n,r){return O?$t(3,1,t,e,n,r):Mt(t,e,n,r)}function Mt(t,e,n,r){if("undefined"==typeof SharedArrayBuffer)return x("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return O&&0===a.length?Et(t,e,n,r):(t={Ic:n,Ub:t,zc:r,Nc:a},O?(t.Oc="spawnThread",postMessage(t,a),0):lt(t))}function Ct(t,e,n){return O?$t(4,1,t,e,n):0}function xt(t,e){if(O)return $t(5,1,t,e)}function Rt(t,e){if(O)return $t(6,1,t,e)}function jt(t,e,n){if(O)return $t(7,1,t,e,n)}function kt(t,e,n){return O?$t(8,1,t,e,n):0}function Dt(t,e){if(O)return $t(9,1,t,e)}function Pt(t,e,n){if(O)return $t(10,1,t,e,n)}function Ut(t,e,n,r){if(O)return $t(11,1,t,e,n,r)}function Ft(t,e,n,r){if(O)return $t(12,1,t,e,n,r)}function It(t,e,n,r){if(O)return $t(13,1,t,e,n,r)}function Wt(t){if(O)return $t(14,1,t)}function Ht(t,e){if(O)return $t(15,1,t,e)}function Lt(t,e,n){if(O)return $t(16,1,t,e,n)}function zt(t){Atomics.store(a(),t>>2,1),he()&&_e(t),Atomics.compareExchange(a(),t>>2,1,0)}function Yt(t){return i()[t>>>2]+4294967296*a()[t+4>>>2]}function Bt(t,e,n,r,a,i){return O?$t(17,1,t,e,n,r,a,i):-52}function Gt(t,e,n,r,a,i){if(O)return $t(18,1,t,e,n,r,a,i)}function Nt(t){var n=G(t)+1,r=de(n);return r&&B(t,e(),r,n),r}function Vt(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}if(O)return $t(19,1,t,e,n);var o=(new Date).getFullYear(),u=new Date(o,0,1),c=new Date(o,6,1);o=u.getTimezoneOffset();var s=c.getTimezoneOffset(),l=Math.max(o,s);a()[t>>2>>>0]=60*l,a()[e>>2>>>0]=Number(o!=s),t=r(u),e=r(c),t=Nt(t),e=Nt(e),s<o?(i()[n>>2>>>0]=t,i()[n+4>>2>>>0]=e):(i()[n>>2>>>0]=e,i()[n+4>>2>>>0]=t)}function $t(t,e){var n=arguments.length-2,r=arguments;return yt((()=>{for(var a=Ce(8*n),i=a>>3,u=0;u<n;u++){var c=r[2+u];o()[i+u>>>0]=c}return we(t,n,a,e)}))}u.executeNotifiedProxyingQueue=zt,wt=_?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:O?()=>performance.now()-u.__performance_now_clock_drift:()=>performance.now();var qt,Xt=[],Jt={};function Zt(){if(!qt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(t in Jt)void 0===Jt[t]?delete e[t]:e[t]=Jt[t];var n=[];for(t in e)n.push(t+"="+e[t]);qt=n}return qt}function Qt(t,n){if(O)return $t(20,1,t,n);var r=0;return Zt().forEach((function(a,o){var u=n+r;for(o=i()[t+4*o>>2>>>0]=u,u=0;u<a.length;++u)e()[o++>>0>>>0]=a.charCodeAt(u);e()[o>>0>>>0]=0,r+=a.length+1})),0}function Kt(t,e){if(O)return $t(21,1,t,e);var n=Zt();i()[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),i()[e>>2>>>0]=r,0}function te(t){return O?$t(22,1,t):52}function ee(t,e,n,r){return O?$t(23,1,t,e,n,r):52}function ne(t,e,n,r,a){return O?$t(24,1,t,e,n,r,a):70}var re=[null,[],[]];function ae(t,e){var n=re[t];0===e||10===e?((1===t?C:x)(z(n,0)),n.length=0):n.push(e)}function ie(t,e,n,a){if(O)return $t(25,1,t,e,n,a);for(var o=0,u=0;u<n;u++){var c=i()[e>>2>>>0],s=i()[e+4>>2>>>0];e+=8;for(var l=0;l<s;l++)ae(t,r()[c+l>>>0]);o+=s}return i()[a>>2>>>0]=o,0}var oe=0;function ue(t){return 0==t%4&&(0!=t%100||0==t%400)}var ce=[31,29,31,30,31,30,31,31,30,31,30,31],se=[31,28,31,30,31,30,31,31,30,31,30,31];function le(t,n,r,i){function o(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function u(t,e){return o(t,e,"0")}function c(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function s(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.Wb;for(t=new Date(new Date(t.Xb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(ue(t.getFullYear())?ce:se)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=s(new Date(t.getFullYear(),0,4)),n=s(n),0>=c(e,t)?0>=c(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var f=a()[i+40>>2>>>0];for(var p in i={Lc:a()[i>>2>>>0],Kc:a()[i+4>>2>>>0],dc:a()[i+8>>2>>>0],jc:a()[i+12>>2>>>0],ec:a()[i+16>>2>>>0],Xb:a()[i+20>>2>>>0],Tb:a()[i+24>>2>>>0],Wb:a()[i+28>>2>>>0],Rc:a()[i+32>>2>>>0],Jc:a()[i+36>>2>>>0],Mc:f?Y(f):""},r=Y(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(t){return h[t.Tb].substring(0,3)},"%A":function(t){return h[t.Tb]},"%b":function(t){return d[t.ec].substring(0,3)},"%B":function(t){return d[t.ec]},"%C":function(t){return u((t.Xb+1900)/100|0,2)},"%d":function(t){return u(t.jc,2)},"%e":function(t){return o(t.jc,2," ")},"%g":function(t){return l(t).toString().substring(2)},"%G":function(t){return l(t)},"%H":function(t){return u(t.dc,2)},"%I":function(t){return 0==(t=t.dc)?t=12:12<t&&(t-=12),u(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.ec-1;e+=(ue(t.Xb+1900)?ce:se)[n++]);return u(t.jc+e,3)},"%m":function(t){return u(t.ec+1,2)},"%M":function(t){return u(t.Kc,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.dc&&12>t.dc?"AM":"PM"},"%S":function(t){return u(t.Lc,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Tb||7},"%U":function(t){return u(Math.floor((t.Wb+7-t.Tb)/7),2)},"%V":function(t){var e=Math.floor((t.Wb+7-(t.Tb+6)%7)/7);if(2>=(t.Tb+371-t.Wb-2)%7&&e++,e)53==e&&(4==(n=(t.Tb+371-t.Wb)%7)||3==n&&ue(t.Xb)||(e=1));else{e=52;var n=(t.Tb+7-t.Wb-1)%7;(4==n||5==n&&ue(t.Xb%400-1))&&e++}return u(e,2)},"%w":function(t){return t.Tb},"%W":function(t){return u(Math.floor((t.Wb+7-(t.Tb+6)%7)/7),2)},"%y":function(t){return(t.Xb+1900).toString().substring(2)},"%Y":function(t){return t.Xb+1900},"%z":function(t){var e=0<=(t=t.Jc);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Mc},"%%":function(){return"%"}},r=r.replace(/%%/g,"\\0\\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](i)));return p=function(t){var e=Array(G(t)+1);return B(t,e,0,e.length),e}(r=r.replace(/\\0\\0/g,"%")),p.length>n?0:(function(t,n){e().set(t,n>>>0)}(p,t),p.length-1)}ht.fc();var fe=[null,ft,bt,Et,Ct,xt,Rt,jt,kt,Dt,Pt,Ut,Ft,It,Wt,Ht,Lt,Bt,Gt,Vt,Qt,Kt,te,ee,ne,ie],pe={b:function(t){return de(t+24)+24},n:function(t){return(t=new St(t)).uc()||(t.hc(!0),Ot--),t.ic(!1),_t.push(t),t.sc(),t.vc()},ma:function(t){throw x("Unexpected exception thrown, this is not properly supported - aborting"),H=!0,t},x:function(){Se(0);var t=_t.pop();if(t.Hc()&&!t.kc()){var e=t.Dc();e&&gt(e)(t.Zb),Tt(t.Zb)}At=0},e:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},l:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},h:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},t:Tt,M:function(){var t=_t.pop();t||at("no exception to throw");var e=t.Zb;throw t.kc()||(_t.push(t),t.ic(!0),t.hc(!1),Ot++),At=e,e},c:function(t,e,n){throw new St(t).fc(e,n),At=t,Ot++,t},pa:function(){return Ot},Fa:function(t){ge(t,!w,1,!v),ht.pc()},T:function(t){O?postMessage({cmd:"cleanupThread",thread:t}):st(t)},xa:Mt,j:function(t){throw At||(At=t),t},H:Ct,Ma:xt,ua:Rt,wa:jt,oa:kt,Ka:Dt,Ca:Pt,Ja:Ut,V:Ft,va:It,sa:Wt,La:Ht,ta:Lt,Ta:function(){},X:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(t,e,n,r){if(t==e)setTimeout((()=>zt(r)));else if(O)postMessage({targetThread:t,cmd:"processProxyingQueue",queue:r});else{if(!(t=ht.Vb[t]))return;t.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},Ea:function(){return-1},Pa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getUTCSeconds(),a()[e+4>>2>>>0]=t.getUTCMinutes(),a()[e+8>>2>>>0]=t.getUTCHours(),a()[e+12>>2>>>0]=t.getUTCDate(),a()[e+16>>2>>>0]=t.getUTCMonth(),a()[e+20>>2>>>0]=t.getUTCFullYear()-1900,a()[e+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[e+28>>2>>>0]=t},Qa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getFullYear()-1900,a()[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1),r=(t.getTime()-n.getTime())/864e5|0;a()[e+28>>2>>>0]=r,a()[e+36>>2>>>0]=-60*t.getTimezoneOffset(),r=new Date(t.getFullYear(),6,1).getTimezoneOffset(),t=0|(r!=(n=n.getTimezoneOffset())&&t.getTimezoneOffset()==Math.min(n,r)),a()[e+32>>2>>>0]=t},Ra:function(t){var e=new Date(a()[t+20>>2>>>0]+1900,a()[t+16>>2>>>0],a()[t+12>>2>>>0],a()[t+8>>2>>>0],a()[t+4>>2>>>0],a()[t>>2>>>0],0),n=a()[t+32>>2>>>0],r=e.getTimezoneOffset(),i=new Date(e.getFullYear(),0,1),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),u=i.getTimezoneOffset(),c=Math.min(u,o);return 0>n?a()[t+32>>2>>>0]=Number(o!=u&&c==r):0<n!=(c==r)&&(o=Math.max(u,o),e.setTime(e.getTime()+6e4*((0<n?c:o)-r))),a()[t+24>>2>>>0]=e.getDay(),n=(e.getTime()-i.getTime())/864e5|0,a()[t+28>>2>>>0]=n,a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},Aa:Bt,Ba:Gt,Sa:function t(e,n,r){t.Ac||(t.Ac=!0,Vt(e,n,r))},y:function(){at("")},U:function(){if(!_&&!w){var t="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";vt||(vt={}),vt[t]||(vt[t]=1,_&&(t="warning: "+t),x(t))}},ra:function(){return 4294901760},B:wt,Ia:function(t,e,n){r().copyWithin(t>>>0,e>>>0,e+n>>>0)},F:function(){return _?n(993).cpus().length:navigator.hardwareConcurrency},Da:function(t,e,n){Xt.length=e,n>>=3;for(var r=0;r<e;r++)Xt[r]=o()[n+r>>>0];return(0>t?ut[-t-1]:fe[t]).apply(null,Xt)},qa:function(t){var e=r().length;if((t>>>=0)<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var a=e*(1+.2/n);a=Math.min(a,t+100663296);var i=Math;a=Math.max(t,a),i=i.min.call(i,4294901760,a+(65536-a%65536)%65536);t:{try{j.grow(i-D.byteLength+65535>>>16),N(j.buffer);var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},Na:function(){throw"unwind"},Ga:Qt,Ha:Kt,J:pt,I:te,S:ee,ga:ne,R:ie,d:function(){return oe},na:function t(r,a){t.lc||(t.lc=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(_)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>at("randomDevice")}());for(var i=0;i<a;i++)e()[r+i>>0>>>0]=t.lc();return 0},ia:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ja:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},K:function(t){var e=Ee();try{return gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},f:function(t,e){var n=Ee();try{return gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},P:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},Q:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},k:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},p:function(t,e,n,r){var a=Ee();try{return gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},q:function(t,e,n,r,a){var i=Ee();try{return gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},N:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},s:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},w:function(t,e,n,r,a,i,o){var u=Ee();try{return gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},L:function(t,e,n,r,a,i,o,u){var c=Ee();try{return gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},E:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{return gt(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=Ee();try{return He(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},_:function(t,e,n,r,a,i,o){var u=Ee();try{return ke(t,e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},Z:function(t,e,n,r,a){var i=Ee();try{return Le(t,e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},ca:function(t,e,n,r){var a=Ee();try{return Ie(t,e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},$:function(t){var e=Ee();try{return je(t)}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},ba:function(t,e){var n=Ee();try{return We(t,e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},Y:function(t,e,n){var r=Ee();try{return De(t,e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},g:function(t){var e=Ee();try{gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},r:function(t,e){var n=Ee();try{gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},i:function(t,e,n){var r=Ee();try{gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ha:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},m:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},v:function(t,e,n,r,a){var i=Ee();try{gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},u:function(t,e,n,r,a,i){var o=Ee();try{gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},O:function(t,e,n,r,a,i,o){var u=Ee();try{gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},A:function(t,e,n,r,a,i,o,u){var c=Ee();try{gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},ka:function(t,e,n,r,a,i,o,u,c){var s=Ee();try{gt(t)(e,n,r,a,i,o,u,c)}catch(t){if(Me(s),t!==t+0)throw t;Se(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l){var f=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(Me(f),t!==t+0)throw t;Se(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(Me(b),t!==t+0)throw t;Se(1,0)}},fa:function(t,e,n,r,a,i,o,u){var c=Ee();try{Pe(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},da:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{Fe(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},ea:function(t,e,n,r,a,i){var o=Ee();try{Ue(t,e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},o:function(t){return t},a:j||u.wasmMemory,G:function(t){oe=t},la:le,z:function(t,e,n,r){return le(t,e,n,r)}};!function(){function t(t,e){u.asm=t.exports,ht.qc.push(u.asm.sb),$=u.asm.ub,X.unshift(u.asm.Va),k=e,O||(et--,u.monitorRunDependencies&&u.monitorRunDependencies(et),0==et&&(null!==nt&&(clearInterval(nt),nt=null),rt&&(t=rt,rt=null,t())))}function e(e){t(e.instance,e.module)}function n(t){return function(){if(!M&&(v||w)){if("function"==typeof fetch&&!tt.startsWith("file://"))return fetch(tt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+tt+"\'";return t.arrayBuffer()})).catch((function(){return ot()}));if(f)return new Promise((function(t,e){f(tt,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return ot()}))}().then((function(t){return WebAssembly.instantiate(t,r)})).then((function(t){return t})).then(t,(function(t){x("failed to asynchronously prepare wasm: "+t),at(t)}))}var r={a:pe};if(O||(et++,u.monitorRunDependencies&&u.monitorRunDependencies(et)),u.instantiateWasm)try{return u.instantiateWasm(r,t)}catch(t){return x("Module.instantiateWasm callback failed with error: "+t),!1}(M||"function"!=typeof WebAssembly.instantiateStreaming||it()||tt.startsWith("file://")||_||"function"!=typeof fetch?n(e):fetch(tt,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,r).then(e,(function(t){return x("wasm streaming compile failed: "+t),x("falling back to ArrayBuffer instantiation"),n(e)}))}))).catch(s)}(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.Va).apply(null,arguments)},u._OrtInit=function(){return(u._OrtInit=u.asm.Wa).apply(null,arguments)},u._OrtCreateSessionOptions=function(){return(u._OrtCreateSessionOptions=u.asm.Xa).apply(null,arguments)},u._OrtAppendExecutionProvider=function(){return(u._OrtAppendExecutionProvider=u.asm.Ya).apply(null,arguments)},u._OrtAddSessionConfigEntry=function(){return(u._OrtAddSessionConfigEntry=u.asm.Za).apply(null,arguments)},u._OrtReleaseSessionOptions=function(){return(u._OrtReleaseSessionOptions=u.asm._a).apply(null,arguments)},u._OrtCreateSession=function(){return(u._OrtCreateSession=u.asm.$a).apply(null,arguments)},u._OrtReleaseSession=function(){return(u._OrtReleaseSession=u.asm.ab).apply(null,arguments)},u._OrtGetInputCount=function(){return(u._OrtGetInputCount=u.asm.bb).apply(null,arguments)},u._OrtGetOutputCount=function(){return(u._OrtGetOutputCount=u.asm.cb).apply(null,arguments)},u._OrtGetInputName=function(){return(u._OrtGetInputName=u.asm.db).apply(null,arguments)},u._OrtGetOutputName=function(){return(u._OrtGetOutputName=u.asm.eb).apply(null,arguments)},u._OrtFree=function(){return(u._OrtFree=u.asm.fb).apply(null,arguments)},u._OrtCreateTensor=function(){return(u._OrtCreateTensor=u.asm.gb).apply(null,arguments)},u._OrtGetTensorData=function(){return(u._OrtGetTensorData=u.asm.hb).apply(null,arguments)},u._OrtReleaseTensor=function(){return(u._OrtReleaseTensor=u.asm.ib).apply(null,arguments)},u._OrtCreateRunOptions=function(){return(u._OrtCreateRunOptions=u.asm.jb).apply(null,arguments)},u._OrtAddRunConfigEntry=function(){return(u._OrtAddRunConfigEntry=u.asm.kb).apply(null,arguments)},u._OrtReleaseRunOptions=function(){return(u._OrtReleaseRunOptions=u.asm.lb).apply(null,arguments)},u._OrtRun=function(){return(u._OrtRun=u.asm.mb).apply(null,arguments)},u._OrtEndProfiling=function(){return(u._OrtEndProfiling=u.asm.nb).apply(null,arguments)};var he=u._pthread_self=function(){return(he=u._pthread_self=u.asm.ob).apply(null,arguments)},de=u._malloc=function(){return(de=u._malloc=u.asm.pb).apply(null,arguments)},ye=u._free=function(){return(ye=u._free=u.asm.qb).apply(null,arguments)},be=u._fflush=function(){return(be=u._fflush=u.asm.rb).apply(null,arguments)};u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm.sb).apply(null,arguments)};var me=u.___funcs_on_exit=function(){return(me=u.___funcs_on_exit=u.asm.tb).apply(null,arguments)},ge=u.__emscripten_thread_init=function(){return(ge=u.__emscripten_thread_init=u.asm.vb).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm.wb).apply(null,arguments)};var ve,we=u._emscripten_run_in_main_runtime_thread_js=function(){return(we=u._emscripten_run_in_main_runtime_thread_js=u.asm.xb).apply(null,arguments)},_e=u.__emscripten_proxy_execute_task_queue=function(){return(_e=u.__emscripten_proxy_execute_task_queue=u.asm.yb).apply(null,arguments)},Oe=u.__emscripten_thread_free_data=function(){return(Oe=u.__emscripten_thread_free_data=u.asm.zb).apply(null,arguments)},Ae=u.__emscripten_thread_exit=function(){return(Ae=u.__emscripten_thread_exit=u.asm.Ab).apply(null,arguments)},Se=u._setThrew=function(){return(Se=u._setThrew=u.asm.Bb).apply(null,arguments)},Te=u._emscripten_stack_set_limits=function(){return(Te=u._emscripten_stack_set_limits=u.asm.Cb).apply(null,arguments)},Ee=u.stackSave=function(){return(Ee=u.stackSave=u.asm.Db).apply(null,arguments)},Me=u.stackRestore=function(){return(Me=u.stackRestore=u.asm.Eb).apply(null,arguments)},Ce=u.stackAlloc=function(){return(Ce=u.stackAlloc=u.asm.Fb).apply(null,arguments)},xe=u.___cxa_can_catch=function(){return(xe=u.___cxa_can_catch=u.asm.Gb).apply(null,arguments)},Re=u.___cxa_is_pointer_type=function(){return(Re=u.___cxa_is_pointer_type=u.asm.Hb).apply(null,arguments)},je=u.dynCall_j=function(){return(je=u.dynCall_j=u.asm.Ib).apply(null,arguments)},ke=u.dynCall_iiiiij=function(){return(ke=u.dynCall_iiiiij=u.asm.Jb).apply(null,arguments)},De=u.dynCall_jii=function(){return(De=u.dynCall_jii=u.asm.Kb).apply(null,arguments)},Pe=u.dynCall_viiiiij=function(){return(Pe=u.dynCall_viiiiij=u.asm.Lb).apply(null,arguments)},Ue=u.dynCall_vjji=function(){return(Ue=u.dynCall_vjji=u.asm.Mb).apply(null,arguments)},Fe=u.dynCall_viiijjjii=function(){return(Fe=u.dynCall_viiijjjii=u.asm.Nb).apply(null,arguments)},Ie=u.dynCall_iij=function(){return(Ie=u.dynCall_iij=u.asm.Ob).apply(null,arguments)},We=u.dynCall_ji=function(){return(We=u.dynCall_ji=u.asm.Pb).apply(null,arguments)},He=u.dynCall_iiiiiij=function(){return(He=u.dynCall_iiiiiij=u.asm.Qb).apply(null,arguments)},Le=u.dynCall_iiij=function(){return(Le=u.dynCall_iiij=u.asm.Rb).apply(null,arguments)};function ze(){function t(){if(!ve&&(ve=!0,u.calledRun=!0,!H)&&(O||dt(X),c(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!O)){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();Z.unshift(t)}dt(Z)}}if(!(0<et))if(O)c(u),O||dt(X),postMessage({cmd:"loaded"});else{if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)K();dt(q),0<et||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.UTF8ToString=Y,u.stringToUTF8=function(t,e,n){return B(t,r(),e,n)},u.lengthBytesUTF8=G,u.keepRuntimeAlive=Q,u.wasmMemory=j,u.stackSave=Ee,u.stackRestore=Me,u.stackAlloc=Ce,u.ExitStatus=ct,u.PThread=ht,rt=function t(){ve||ze(),ve||(rt=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return ze(),t.ready});t.exports=r},932:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){var e,r,a;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){r=t,a=e}));var i,o,u,c,s,l,f=Object.assign({},e),p="./this.program",h=(t,e)=>{throw e},d="object"==typeof window,y="function"==typeof importScripts,b="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";b?(m=y?n(908).dirname(m)+"/":"//",l=()=>{s||(c=n(384),s=n(908))},i=function(t,e){return l(),t=s.normalize(t),c.readFileSync(t,e?void 0:"utf8")},u=t=>((t=i(t,!0)).buffer||(t=new Uint8Array(t)),t),o=(t,e,n)=>{l(),t=s.normalize(t),c.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof J))throw t})),process.on("unhandledRejection",(function(t){throw t})),h=(t,e)=>{if(_||0<L)throw process.exitCode=t,e;e instanceof J||w("exiting due to exception: "+e),process.exit(t)},e.inspect=function(){return"[Emscripten Module object]"}):(d||y)&&(y?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),_scriptDir&&(m=_scriptDir),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},y&&(u=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),o=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var g,v=e.print||console.log.bind(console),w=e.printErr||console.warn.bind(console);Object.assign(e,f),f=null,e.thisProgram&&(p=e.thisProgram),e.quit&&(h=e.quit),e.wasmBinary&&(g=e.wasmBinary);var _=e.noExitRuntime||!1;"object"!=typeof WebAssembly&&V("no native wasm support detected");var O,A,S,T,E,M,C=!1,x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&x)return x.decode(t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function j(t,e){return(t>>>=0)?R(T,t,e):""}function k(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function D(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function P(){var t=O.buffer;A=t,e.HEAP8=S=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=E=new Int32Array(t),e.HEAPU8=T=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=M=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var U,F=[],I=[],W=[],H=[],L=0;function z(){var t=e.preRun.shift();F.unshift(t)}var Y,B=0,G=null,N=null;function V(t){throw e.onAbort&&e.onAbort(t),w(t="Aborted("+t+")"),C=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),a(t),t}function $(){return Y.startsWith("data:application/octet-stream;base64,")}if(Y="ort-wasm.wasm",!$()){var q=Y;Y=e.locateFile?e.locateFile(q,m):m+q}function X(){var t=Y;try{if(t==Y&&g)return new Uint8Array(g);if(u)return u(t);throw"both async and sync fetching of the wasm failed"}catch(t){V(t)}}function J(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Z(t){for(;0<t.length;)t.shift()(e)}var Q=[],K=0,tt=0;function et(t){this.Db=t,this.zb=t-24,this.Ub=function(t){M[this.zb+4>>2>>>0]=t},this.Eb=function(){return M[this.zb+4>>2>>>0]},this.Sb=function(t){M[this.zb+8>>2>>>0]=t},this.Wb=function(){return M[this.zb+8>>2>>>0]},this.Tb=function(){E[this.zb>>2>>>0]=0},this.Ib=function(t){S[this.zb+12>>0>>>0]=t?1:0},this.Pb=function(){return 0!=S[this.zb+12>>0>>>0]},this.Jb=function(t){S[this.zb+13>>0>>>0]=t?1:0},this.Lb=function(){return 0!=S[this.zb+13>>0>>>0]},this.Rb=function(t,e){this.Fb(0),this.Ub(t),this.Sb(e),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){E[this.zb>>2>>>0]+=1},this.Xb=function(){var t=E[this.zb>>2>>>0];return E[this.zb>>2>>>0]=t-1,1===t},this.Fb=function(t){M[this.zb+16>>2>>>0]=t},this.Ob=function(){return M[this.zb+16>>2>>>0]},this.Qb=function(){if(Mt(this.Eb()))return M[this.Db>>2>>>0];var t=this.Ob();return 0!==t?t:this.Db}}function nt(t){return vt(new et(t).zb)}var rt=[];function at(t){var e=rt[t];return e||(t>=rt.length&&(rt.length=t+1),rt[t]=e=U.get(t)),e}function it(t){var e=D(t)+1,n=gt(e);return n&&k(t,S,n,e),n}var ot={};function ut(){if(!ct){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(t in ot)void 0===ot[t]?delete e[t]:e[t]=ot[t];var n=[];for(t in e)n.push(t+"="+e[t]);ct=n}return ct}var ct,st=[null,[],[]];function lt(t,e){var n=st[t];0===e||10===e?((1===t?v:w)(R(n,0)),n.length=0):n.push(e)}var ft=0;function pt(t){return 0==t%4&&(0!=t%100||0==t%400)}var ht=[31,29,31,30,31,30,31,31,30,31,30,31],dt=[31,28,31,30,31,30,31,31,30,31,30,31];function yt(t,e,n,r){function a(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function i(t,e){return a(t,e,"0")}function o(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function u(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function c(t){var e=t.Bb;for(t=new Date(new Date(t.Cb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(pt(t.getFullYear())?ht:dt)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=u(new Date(t.getFullYear(),0,4)),n=u(n),0>=o(e,t)?0>=o(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var s=E[r+40>>2>>>0];for(var l in r={$b:E[r>>2>>>0],Zb:E[r+4>>2>>>0],Gb:E[r+8>>2>>>0],Kb:E[r+12>>2>>>0],Hb:E[r+16>>2>>>0],Cb:E[r+20>>2>>>0],Ab:E[r+24>>2>>>0],Bb:E[r+28>>2>>>0],bc:E[r+32>>2>>>0],Yb:E[r+36>>2>>>0],ac:s?j(s):""},n=j(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),s[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in s={"%a":function(t){return f[t.Ab].substring(0,3)},"%A":function(t){return f[t.Ab]},"%b":function(t){return p[t.Hb].substring(0,3)},"%B":function(t){return p[t.Hb]},"%C":function(t){return i((t.Cb+1900)/100|0,2)},"%d":function(t){return i(t.Kb,2)},"%e":function(t){return a(t.Kb,2," ")},"%g":function(t){return c(t).toString().substring(2)},"%G":function(t){return c(t)},"%H":function(t){return i(t.Gb,2)},"%I":function(t){return 0==(t=t.Gb)?t=12:12<t&&(t-=12),i(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Hb-1;e+=(pt(t.Cb+1900)?ht:dt)[n++]);return i(t.Kb+e,3)},"%m":function(t){return i(t.Hb+1,2)},"%M":function(t){return i(t.Zb,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.Gb&&12>t.Gb?"AM":"PM"},"%S":function(t){return i(t.$b,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Ab||7},"%U":function(t){return i(Math.floor((t.Bb+7-t.Ab)/7),2)},"%V":function(t){var e=Math.floor((t.Bb+7-(t.Ab+6)%7)/7);if(2>=(t.Ab+371-t.Bb-2)%7&&e++,e)53==e&&(4==(n=(t.Ab+371-t.Bb)%7)||3==n&&pt(t.Cb)||(e=1));else{e=52;var n=(t.Ab+7-t.Bb-1)%7;(4==n||5==n&&pt(t.Cb%400-1))&&e++}return i(e,2)},"%w":function(t){return t.Ab},"%W":function(t){return i(Math.floor((t.Bb+7-(t.Ab+6)%7)/7),2)},"%y":function(t){return(t.Cb+1900).toString().substring(2)},"%Y":function(t){return t.Cb+1900},"%z":function(t){var e=0<=(t=t.Yb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.ac},"%%":function(){return"%"}},n=n.replace(/%%/g,"\\0\\0"),s)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),s[l](r)));return l=function(t){var e=Array(D(t)+1);return k(t,e,0,e.length),e}(n=n.replace(/\\0\\0/g,"%")),l.length>e?0:(S.set(l,t>>>0),l.length-1)}var bt={a:function(t){return gt(t+24)+24},m:function(t){return(t=new et(t)).Pb()||(t.Ib(!0),K--),t.Jb(!1),Q.push(t),t.Nb(),t.Qb()},ia:function(t){throw w("Unexpected exception thrown, this is not properly supported - aborting"),C=!0,t},w:function(){Ot(0);var t=Q.pop();if(t.Xb()&&!t.Lb()){var e=t.Wb();e&&at(e)(t.Db),nt(t.Db)}tt=0},d:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},k:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},g:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},s:nt,L:function(){var t=Q.pop();t||V("no exception to throw");var e=t.Db;throw t.Lb()||(Q.push(t),t.Jb(!0),t.Ib(!1),K++),tt=e,e},b:function(t,e,n){throw new et(t).Rb(e,n),tt=t,K++,t},la:function(){return K},i:function(t){throw tt||(tt=t),t},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getUTCSeconds(),E[e+4>>2>>>0]=t.getUTCMinutes(),E[e+8>>2>>>0]=t.getUTCHours(),E[e+12>>2>>>0]=t.getUTCDate(),E[e+16>>2>>>0]=t.getUTCMonth(),E[e+20>>2>>>0]=t.getUTCFullYear()-1900,E[e+24>>2>>>0]=t.getUTCDay(),E[e+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getSeconds(),E[e+4>>2>>>0]=t.getMinutes(),E[e+8>>2>>>0]=t.getHours(),E[e+12>>2>>>0]=t.getDate(),E[e+16>>2>>>0]=t.getMonth(),E[e+20>>2>>>0]=t.getFullYear()-1900,E[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1);E[e+28>>2>>>0]=(t.getTime()-n.getTime())/864e5|0,E[e+36>>2>>>0]=-60*t.getTimezoneOffset();var r=new Date(t.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),E[e+32>>2>>>0]=0|(r!=n&&t.getTimezoneOffset()==Math.min(n,r))},Fa:function(t){var e=new Date(E[t+20>>2>>>0]+1900,E[t+16>>2>>>0],E[t+12>>2>>>0],E[t+8>>2>>>0],E[t+4>>2>>>0],E[t>>2>>>0],0),n=E[t+32>>2>>>0],r=e.getTimezoneOffset(),a=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1).getTimezoneOffset(),o=a.getTimezoneOffset(),u=Math.min(o,i);return 0>n?E[t+32>>2>>>0]=Number(i!=o&&u==r):0<n!=(u==r)&&(i=Math.max(o,i),e.setTime(e.getTime()+6e4*((0<n?u:i)-r))),E[t+24>>2>>>0]=e.getDay(),E[t+28>>2>>>0]=(e.getTime()-a.getTime())/864e5|0,E[t>>2>>>0]=e.getSeconds(),E[t+4>>2>>>0]=e.getMinutes(),E[t+8>>2>>>0]=e.getHours(),E[t+12>>2>>>0]=e.getDate(),E[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function t(e,n,r){t.Vb||(t.Vb=!0,function(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}var a=(new Date).getFullYear(),i=new Date(a,0,1),o=new Date(a,6,1);a=i.getTimezoneOffset();var u=o.getTimezoneOffset();E[t>>2>>>0]=60*Math.max(a,u),E[e>>2>>>0]=Number(a!=u),t=r(i),e=r(o),t=it(t),e=it(e),u<a?(M[n>>2>>>0]=t,M[n+4>>2>>>0]=e):(M[n>>2>>>0]=e,M[n+4>>2>>>0]=t)}(e,n,r))},B:function(){V("")},ma:function(){return 4294901760},I:b?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),xa:function(t,e,n){T.copyWithin(t>>>0,e>>>0,e+n>>>0)},G:function(t){var e=T.length;if(4294901760<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var a=Math;r=Math.max(t,r),a=a.min.call(a,4294901760,r+(65536-r%65536)%65536);t:{try{O.grow(a-A.byteLength+65535>>>16),P();var i=1;break t}catch(t){}i=void 0}if(i)return!0}return!1},va:function(t,e){var n=0;return ut().forEach((function(r,a){var i=e+n;for(a=M[t+4*a>>2>>>0]=i,i=0;i<r.length;++i)S[a++>>0>>>0]=r.charCodeAt(i);S[a>>0>>>0]=0,n+=r.length+1})),0},wa:function(t,e){var n=ut();M[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),M[e>>2>>>0]=r,0},ba:function(t){_||0<L||(_t(),Z(W),wt(0),st[1].length&&lt(1,10),st[2].length&&lt(2,10)),_||0<L||(e.onExit&&e.onExit(t),C=!0),h(t,new J(t))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(t,e,n,r){for(var a=0,i=0;i<n;i++){var o=M[e>>2>>>0],u=M[e+4>>2>>>0];e+=8;for(var c=0;c<u;c++)lt(t,T[o+c>>>0]);a+=u}return M[r>>2>>>0]=a,0},c:function(){return ft},ja:function t(e,r){t.Mb||(t.Mb=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(b)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>V("randomDevice")}());for(var a=0;a<r;a++)S[e+a>>0>>>0]=t.Mb();return 0},ea:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},fa:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},J:function(t){var e=At();try{return at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},e:function(t,e){var n=At();try{return at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},N:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},O:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},j:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},o:function(t,e,n,r){var a=At();try{return at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},p:function(t,e,n,r,a){var i=At();try{return at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},M:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},r:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},v:function(t,e,n,r,a,i,o){var u=At();try{return at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},K:function(t,e,n,r,a,i,o,u){var c=At();try{return at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{return at(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},X:function(t,e,n,r,a,i,o,u){var c=At();try{return Ft(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},V:function(t,e,n,r,a,i,o){var u=At();try{return xt(t,e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},U:function(t,e,n,r,a){var i=At();try{return It(t,e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},Z:function(t,e,n,r){var a=At();try{return Pt(t,e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},W:function(t){var e=At();try{return Ct(t)}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},Y:function(t,e){var n=At();try{return Ut(t,e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},T:function(t,e,n){var r=At();try{return Rt(t,e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},f:function(t){var e=At();try{at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},q:function(t,e){var n=At();try{at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},h:function(t,e,n){var r=At();try{at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},da:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},l:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},t:function(t,e,n,r,a){var i=At();try{at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},u:function(t,e,n,r,a,i){var o=At();try{at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},x:function(t,e,n,r,a,i,o){var u=At();try{at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},z:function(t,e,n,r,a,i,o,u){var c=At();try{at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},ga:function(t,e,n,r,a,i,o,u,c){var s=At();try{at(t)(e,n,r,a,i,o,u,c)}catch(t){if(St(s),t!==t+0)throw t;Ot(1,0)}},A:function(t,e,n,r,a,i,o,u,c,s,l){var f=At();try{at(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(St(f),t!==t+0)throw t;Ot(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=At();try{at(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(St(b),t!==t+0)throw t;Ot(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=At();try{jt(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},_:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{Dt(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},$:function(t,e,n,r,a,i){var o=At();try{kt(t,e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},n:function(t){return t},F:function(t){ft=t},ha:yt,y:function(t,e,n,r){return yt(t,e,n,r)}};!function(){function t(t){e.asm=t.exports,O=e.asm.Ka,P(),U=e.asm.ib,I.unshift(e.asm.La),B--,e.monitorRunDependencies&&e.monitorRunDependencies(B),0==B&&(null!==G&&(clearInterval(G),G=null),N&&(t=N,N=null,t()))}function n(e){t(e.instance)}function r(t){return function(){if(!g&&(d||y)){if("function"==typeof fetch&&!Y.startsWith("file://"))return fetch(Y,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+Y+"\'";return t.arrayBuffer()})).catch((function(){return X()}));if(o)return new Promise((function(t,e){o(Y,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return X()}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){w("failed to asynchronously prepare wasm: "+t),V(t)}))}var i={a:bt};if(B++,e.monitorRunDependencies&&e.monitorRunDependencies(B),e.instantiateWasm)try{return e.instantiateWasm(i,t)}catch(t){return w("Module.instantiateWasm callback failed with error: "+t),!1}(g||"function"!=typeof WebAssembly.instantiateStreaming||$()||Y.startsWith("file://")||b||"function"!=typeof fetch?r(n):fetch(Y,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(n,(function(t){return w("wasm streaming compile failed: "+t),w("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.La).apply(null,arguments)},e._OrtInit=function(){return(e._OrtInit=e.asm.Ma).apply(null,arguments)},e._OrtCreateSessionOptions=function(){return(e._OrtCreateSessionOptions=e.asm.Na).apply(null,arguments)},e._OrtAppendExecutionProvider=function(){return(e._OrtAppendExecutionProvider=e.asm.Oa).apply(null,arguments)},e._OrtAddSessionConfigEntry=function(){return(e._OrtAddSessionConfigEntry=e.asm.Pa).apply(null,arguments)},e._OrtReleaseSessionOptions=function(){return(e._OrtReleaseSessionOptions=e.asm.Qa).apply(null,arguments)},e._OrtCreateSession=function(){return(e._OrtCreateSession=e.asm.Ra).apply(null,arguments)},e._OrtReleaseSession=function(){return(e._OrtReleaseSession=e.asm.Sa).apply(null,arguments)},e._OrtGetInputCount=function(){return(e._OrtGetInputCount=e.asm.Ta).apply(null,arguments)},e._OrtGetOutputCount=function(){return(e._OrtGetOutputCount=e.asm.Ua).apply(null,arguments)},e._OrtGetInputName=function(){return(e._OrtGetInputName=e.asm.Va).apply(null,arguments)},e._OrtGetOutputName=function(){return(e._OrtGetOutputName=e.asm.Wa).apply(null,arguments)},e._OrtFree=function(){return(e._OrtFree=e.asm.Xa).apply(null,arguments)},e._OrtCreateTensor=function(){return(e._OrtCreateTensor=e.asm.Ya).apply(null,arguments)},e._OrtGetTensorData=function(){return(e._OrtGetTensorData=e.asm.Za).apply(null,arguments)},e._OrtReleaseTensor=function(){return(e._OrtReleaseTensor=e.asm._a).apply(null,arguments)},e._OrtCreateRunOptions=function(){return(e._OrtCreateRunOptions=e.asm.$a).apply(null,arguments)},e._OrtAddRunConfigEntry=function(){return(e._OrtAddRunConfigEntry=e.asm.ab).apply(null,arguments)},e._OrtReleaseRunOptions=function(){return(e._OrtReleaseRunOptions=e.asm.bb).apply(null,arguments)},e._OrtRun=function(){return(e._OrtRun=e.asm.cb).apply(null,arguments)},e._OrtEndProfiling=function(){return(e._OrtEndProfiling=e.asm.db).apply(null,arguments)};var mt,gt=e._malloc=function(){return(gt=e._malloc=e.asm.eb).apply(null,arguments)},vt=e._free=function(){return(vt=e._free=e.asm.fb).apply(null,arguments)},wt=e._fflush=function(){return(wt=e._fflush=e.asm.gb).apply(null,arguments)},_t=e.___funcs_on_exit=function(){return(_t=e.___funcs_on_exit=e.asm.hb).apply(null,arguments)},Ot=e._setThrew=function(){return(Ot=e._setThrew=e.asm.jb).apply(null,arguments)},At=e.stackSave=function(){return(At=e.stackSave=e.asm.kb).apply(null,arguments)},St=e.stackRestore=function(){return(St=e.stackRestore=e.asm.lb).apply(null,arguments)},Tt=e.stackAlloc=function(){return(Tt=e.stackAlloc=e.asm.mb).apply(null,arguments)},Et=e.___cxa_can_catch=function(){return(Et=e.___cxa_can_catch=e.asm.nb).apply(null,arguments)},Mt=e.___cxa_is_pointer_type=function(){return(Mt=e.___cxa_is_pointer_type=e.asm.ob).apply(null,arguments)},Ct=e.dynCall_j=function(){return(Ct=e.dynCall_j=e.asm.pb).apply(null,arguments)},xt=e.dynCall_iiiiij=function(){return(xt=e.dynCall_iiiiij=e.asm.qb).apply(null,arguments)},Rt=e.dynCall_jii=function(){return(Rt=e.dynCall_jii=e.asm.rb).apply(null,arguments)},jt=e.dynCall_viiiiij=function(){return(jt=e.dynCall_viiiiij=e.asm.sb).apply(null,arguments)},kt=e.dynCall_vjji=function(){return(kt=e.dynCall_vjji=e.asm.tb).apply(null,arguments)},Dt=e.dynCall_viiijjjii=function(){return(Dt=e.dynCall_viiijjjii=e.asm.ub).apply(null,arguments)},Pt=e.dynCall_iij=function(){return(Pt=e.dynCall_iij=e.asm.vb).apply(null,arguments)},Ut=e.dynCall_ji=function(){return(Ut=e.dynCall_ji=e.asm.wb).apply(null,arguments)},Ft=e.dynCall_iiiiiij=function(){return(Ft=e.dynCall_iiiiiij=e.asm.xb).apply(null,arguments)},It=e.dynCall_iiij=function(){return(It=e.dynCall_iiij=e.asm.yb).apply(null,arguments)};function Wt(){function t(){if(!mt&&(mt=!0,e.calledRun=!0,!C)){if(Z(I),r(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();H.unshift(t)}Z(H)}}if(!(0<B)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)z();Z(F),0<B||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.UTF8ToString=j,e.stringToUTF8=function(t,e,n){return k(t,T,e,n)},e.lengthBytesUTF8=D,e.stackSave=At,e.stackRestore=St,e.stackAlloc=Tt,N=function t(){mt||Wt(),mt||(N=t)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Wt(),t.ready});t.exports=r},967:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,n,r,a)=>{if("object"==typeof t&&null!==t){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach((([t,i])=>{const o=n?n+t:t;if("object"==typeof i)(0,e.iterateExtraOptions)(i,o+".",r,a);else if("string"==typeof i||"number"==typeof i)a(o,i.toString());else{if("boolean"!=typeof i)throw new Error("Can\'t handle extra config type: "+typeof i);a(o,i?"1":"0")}}))}},586:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setRunOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);void 0===(null==t?void 0:t.terminate)&&(u.terminate=!1);let i=0;if(void 0!==(null==t?void 0:t.tag)&&(i=(0,a.allocWasmString)(t.tag,o)),n=e._OrtCreateRunOptions(u.logSeverityLevel,u.logVerbosityLevel,!!u.terminate,i),0===n)throw new Error("Can\'t create run options");return void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddRunConfigEntry(n,i,u))throw new Error(`Can\'t set a run config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),o.forEach(e._free),t}}},919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setSessionOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};(t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});const e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1")})(u);try{void 0===(null==t?void 0:t.graphOptimizationLevel)&&(u.graphOptimizationLevel="all");const c=(t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}})(u.graphOptimizationLevel);void 0===(null==t?void 0:t.enableCpuMemArena)&&(u.enableCpuMemArena=!0),void 0===(null==t?void 0:t.enableMemPattern)&&(u.enableMemPattern=!0),void 0===(null==t?void 0:t.executionMode)&&(u.executionMode="sequential");const s=(t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}})(u.executionMode);let l=0;if(void 0!==(null==t?void 0:t.logId)&&(l=(0,a.allocWasmString)(t.logId,o)),void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);if(void 0===(null==t?void 0:t.enableProfiling)&&(u.enableProfiling=!1),n=e._OrtCreateSessionOptions(c,!!u.enableCpuMemArena,!!u.enableMemPattern,s,!!u.enableProfiling,0,l,u.logSeverityLevel,u.logVerbosityLevel),0===n)throw new Error("Can\'t create session options");return(null==t?void 0:t.executionProviders)&&((t,e,n)=>{for(const r of e){let e="string"==typeof r?r:r.name;switch(e){case"xnnpack":e="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${e}`)}const o=(0,a.allocWasmString)(e,n);if(0!==(0,i.getInstance)()._OrtAppendExecutionProvider(t,o))throw new Error(`Can\'t append execution provider: ${e}`)}})(n,t.executionProviders,o),void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddSessionConfigEntry(n,i,u))throw new Error(`Can\'t set a session config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseSessionOptions(n),o.forEach(e._free),t}}},983:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const r=n(361);e.allocWasmString=(t,e)=>{const n=(0,r.getInstance)(),a=n.lengthBytesUTF8(t)+1,i=n._malloc(a);return n.stringToUTF8(t,i,a),e.push(i),i}},349:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const r=n(586),a=n(919),i=n(983),o=n(361);e.initOrt=(t,e)=>{const n=(0,o.getInstance)()._OrtInit(t,e);if(0!==n)throw new Error(`Can\'t initialize onnxruntime. error code = ${n}`)};const u=new Map;e.createSessionAllocate=t=>{const e=(0,o.getInstance)(),n=e._malloc(t.byteLength);return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=(t,e)=>{const n=(0,o.getInstance)();let r=0,i=0,c=[];try{if([i,c]=(0,a.setSessionOptions)(e),r=n._OrtCreateSession(t[0],t[1],i),0===r)throw new Error("Can\'t create a session")}finally{n._free(t[0]),n._OrtReleaseSessionOptions(i),c.forEach(n._free)}const s=n._OrtGetInputCount(r),l=n._OrtGetOutputCount(r),f=[],p=[],h=[],d=[];for(let t=0;t<s;t++){const e=n._OrtGetInputName(r,t);if(0===e)throw new Error("Can\'t get an input name");p.push(e),f.push(n.UTF8ToString(e))}for(let t=0;t<l;t++){const e=n._OrtGetOutputName(r,t);if(0===e)throw new Error("Can\'t get an output name");d.push(e),h.push(n.UTF8ToString(e))}return u.set(r,[r,p,d]),[r,f,h]},e.createSession=(t,n)=>{const r=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(r,n)},e.releaseSession=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=n[1],i=n[2];a.forEach(e._OrtFree),i.forEach(e._OrtFree),e._OrtReleaseSession(r),u.delete(t)};const c=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},s=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},l=t=>{switch(t){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}};e.run=(t,e,n,a,f)=>{const p=(0,o.getInstance)(),h=u.get(t);if(!h)throw new Error("invalid session id");const d=h[0],y=h[1],b=h[2],m=e.length,g=a.length;let v=0,w=[];const _=[],O=[];try{[v,w]=(0,r.setRunOptions)(f);for(let t=0;t<m;t++){const e=n[t][0],r=n[t][1],a=n[t][2];let o,u;if(Array.isArray(a)){u=4*a.length,o=p._malloc(u),O.push(o);let t=o/4;for(let e=0;e<a.length;e++){if("string"!=typeof a[e])throw new TypeError(`tensor data at index ${e} is not a string`);p.HEAPU32[t++]=(0,i.allocWasmString)(a[e],O)}}else u=a.byteLength,o=p._malloc(u),O.push(o),p.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),o);const s=p.stackSave(),l=p.stackAlloc(4*r.length);try{let t=l/4;r.forEach((e=>p.HEAP32[t++]=e));const n=p._OrtCreateTensor(c(e),o,u,l,r.length);if(0===n)throw new Error("Can\'t create a tensor");_.push(n)}finally{p.stackRestore(s)}}const t=p.stackSave(),o=p.stackAlloc(4*m),u=p.stackAlloc(4*m),h=p.stackAlloc(4*g),A=p.stackAlloc(4*g);try{let n=o/4,r=u/4,i=h/4,c=A/4;for(let t=0;t<m;t++)p.HEAPU32[n++]=_[t],p.HEAPU32[r++]=y[e[t]];for(let t=0;t<g;t++)p.HEAPU32[i++]=0,p.HEAPU32[c++]=b[a[t]];let f=p._OrtRun(d,u,o,m,A,g,h,v);const w=[];if(0===f)for(let t=0;t<g;t++){const e=p.HEAPU32[h/4+t],n=p.stackSave(),r=p.stackAlloc(16);let a,i=0;try{if(f=p._OrtGetTensorData(e,r,r+4,r+8,r+12),0!==f)throw new Error(`Can\'t access output tensor data. error code = ${f}`);let t=r/4;const o=p.HEAPU32[t++];i=p.HEAPU32[t++];const u=p.HEAPU32[t++],c=p.HEAPU32[t++],h=[];for(let t=0;t<c;t++)h.push(p.HEAPU32[u/4+t]);p._OrtFree(u);const d=0===h.length?1:h.reduce(((t,e)=>t*e));if(a=s(o),"string"===a){const t=[];let e=i/4;for(let n=0;n<d;n++){const r=p.HEAPU32[e++],a=n===d-1?void 0:p.HEAPU32[e]-r;t.push(p.UTF8ToString(r,a))}w.push([a,h,t])}else{const t=new(l(a))(d);new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(p.HEAPU8.subarray(i,i+t.byteLength)),w.push([a,h,t])}}finally{p.stackRestore(n),"string"===a&&i&&p._free(i),p._OrtReleaseTensor(e)}}if(0===f)return w;throw new Error(`failed to call OrtRun(). error code = ${f}.`)}finally{p.stackRestore(t)}}finally{_.forEach(p._OrtReleaseTensor),O.forEach(p._free),p._OrtReleaseRunOptions(v),w.forEach(p._free)}},e.endProfiling=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=e._OrtEndProfiling(r);if(0===a)throw new Error("Can\'t get an profile file name");e._OrtFree(a)},e.extractTransferableBuffers=t=>{const e=[];for(const n of t){const t=n[2];!Array.isArray(t)&&t.buffer&&e.push(t.buffer)}return e}},361:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);a&&!("get"in a?!e.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const u=i(n(449)),c=o(n(932)),s=n(474);let l,f=!1,p=!1,h=!1;const d=(t,e)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async t=>{if(f)return Promise.resolve();if(p)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(h)throw new Error("previous call to \'initializeWebAssembly()\' failed.");p=!0;const e=t.initTimeout,r=t.numThreads,a=t.simd,i=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}})(),o=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}})(),y="string"==typeof t.wasmPaths?t.wasmPaths:void 0,b=d(!1,i),m=d(o,i),g="object"==typeof t.wasmPaths?t.wasmPaths[m]:void 0;let v=!1;const w=[];if(e>0&&w.push(new Promise((t=>{setTimeout((()=>{v=!0,t()}),e)}))),w.push(new Promise(((t,e)=>{const r=i?s:c.default,a={locateFile:(t,e)=>i&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(154)],{type:"text/javascript"})):t===b?null!=g?g:(null!=y?y:e)+m:e+t};if(i)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=u.join("/","ort-wasm-threaded.js");else{const t=`var ortWasmThreaded=(function(){var _scriptDir;return ${r.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([t],{type:"text/javascript"})}r(a).then((e=>{p=!1,f=!0,l=e,t()}),(t=>{p=!1,h=!0,e(t)}))}))),await Promise.race(w),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},e.getInstance=()=>{if(f&&l)return l;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var t;!f||p||h||(p=!0,null===(t=l.PThread)||void 0===t||t.terminateAllThreads(),l=void 0,p=!1,f=!1,h=!0)}},154:t=>{"use strict";t.exports=\'"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\\n\'},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";const t=n(349),e=n(361);self.onmessage=n=>{switch(n.data.type){case"init-wasm":(0,e.initializeWebAssembly)(n.data.in).then((()=>postMessage({type:"init-wasm"})),(t=>postMessage({type:"init-wasm",err:t})));break;case"init-ort":try{const{numThreads:e,loggingLevel:r}=n.data.in;(0,t.initOrt)(e,r),postMessage({type:"init-ort"})}catch(t){postMessage({type:"init-ort",err:t})}break;case"create_allocate":try{const{model:e}=n.data.in,r=(0,t.createSessionAllocate)(e);postMessage({type:"create_allocate",out:r})}catch(t){postMessage({type:"create_allocate",err:t})}break;case"create_finalize":try{const{modeldata:e,options:r}=n.data.in,a=(0,t.createSessionFinalize)(e,r);postMessage({type:"create_finalize",out:a})}catch(t){postMessage({type:"create_finalize",err:t})}break;case"create":try{const{model:e,options:r}=n.data.in,a=(0,t.createSession)(e,r);postMessage({type:"create",out:a})}catch(t){postMessage({type:"create",err:t})}break;case"release":try{const e=n.data.in;(0,t.releaseSession)(e),postMessage({type:"release"})}catch(t){postMessage({type:"release",err:t})}break;case"run":try{const{sessionId:e,inputIndices:r,inputs:a,outputIndices:i,options:o}=n.data.in,u=(0,t.run)(e,r,a,i,o);postMessage({type:"run",out:u},(0,t.extractTransferableBuffers)(u))}catch(t){postMessage({type:"run",err:t})}break;case"end-profiling":try{const e=n.data.in;(0,t.endProfiling)(e),postMessage({type:"end-profiling"})}catch(t){postMessage({type:"end-profiling",err:t})}}}})()})();\n',"Worker",void 0,void 0)}},477:r=>{r.exports=function(e,t,_e,Te){var Ee=self||window;try{try{var xe;try{xe=new Ee.Blob([e])}catch{(xe=new(Ee.BlobBuilder||Ee.WebKitBlobBuilder||Ee.MozBlobBuilder||Ee.MSBlobBuilder)).append(e),xe=xe.getBlob()}var Pe=Ee.URL||Ee.webkitURL,Re=Pe.createObjectURL(xe),ke=new Ee[t](Re,_e);return Pe.revokeObjectURL(Re),ke}catch{return new Ee[t]("data:application/javascript,".concat(encodeURIComponent(e)),_e)}}catch{if(!Te)throw Error("Inline worker is not supported");return new Ee[t](Te,_e)}}},4154:r=>{r.exports=`"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};
`},1670:r=>{r.exports=__WEBPACK_EXTERNAL_MODULE__1670__},7067:()=>{},1296:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},5686:(r,e,t)=>{t.r(e),t.d(e,{flatbuffers:()=>_e});var _e={};_e.Offset,_e.Table,_e.SIZEOF_SHORT=2,_e.SIZEOF_INT=4,_e.FILE_IDENTIFIER_LENGTH=4,_e.SIZE_PREFIX_LENGTH=4,_e.Encoding={UTF8_BYTES:1,UTF16_STRING:2},_e.int32=new Int32Array(2),_e.float32=new Float32Array(_e.int32.buffer),_e.float64=new Float64Array(_e.int32.buffer),_e.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,_e.Long=function(Te,Ee){this.low=0|Te,this.high=0|Ee},_e.Long.create=function(Te,Ee){return Te==0&&Ee==0?_e.Long.ZERO:new _e.Long(Te,Ee)},_e.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},_e.Long.prototype.equals=function(Te){return this.low==Te.low&&this.high==Te.high},_e.Long.ZERO=new _e.Long(0,0),_e.Builder=function(Te){if(Te)Ee=Te;else var Ee=1024;this.bb=_e.ByteBuffer.allocate(Ee),this.space=Ee,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},_e.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},_e.Builder.prototype.forceDefaults=function(Te){this.force_defaults=Te},_e.Builder.prototype.dataBuffer=function(){return this.bb},_e.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},_e.Builder.prototype.prep=function(Te,Ee){Te>this.minalign&&(this.minalign=Te);for(var xe=1+~(this.bb.capacity()-this.space+Ee)&Te-1;this.space<xe+Te+Ee;){var Pe=this.bb.capacity();this.bb=_e.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-Pe}this.pad(xe)},_e.Builder.prototype.pad=function(Te){for(var Ee=0;Ee<Te;Ee++)this.bb.writeInt8(--this.space,0)},_e.Builder.prototype.writeInt8=function(Te){this.bb.writeInt8(this.space-=1,Te)},_e.Builder.prototype.writeInt16=function(Te){this.bb.writeInt16(this.space-=2,Te)},_e.Builder.prototype.writeInt32=function(Te){this.bb.writeInt32(this.space-=4,Te)},_e.Builder.prototype.writeInt64=function(Te){this.bb.writeInt64(this.space-=8,Te)},_e.Builder.prototype.writeFloat32=function(Te){this.bb.writeFloat32(this.space-=4,Te)},_e.Builder.prototype.writeFloat64=function(Te){this.bb.writeFloat64(this.space-=8,Te)},_e.Builder.prototype.addInt8=function(Te){this.prep(1,0),this.writeInt8(Te)},_e.Builder.prototype.addInt16=function(Te){this.prep(2,0),this.writeInt16(Te)},_e.Builder.prototype.addInt32=function(Te){this.prep(4,0),this.writeInt32(Te)},_e.Builder.prototype.addInt64=function(Te){this.prep(8,0),this.writeInt64(Te)},_e.Builder.prototype.addFloat32=function(Te){this.prep(4,0),this.writeFloat32(Te)},_e.Builder.prototype.addFloat64=function(Te){this.prep(8,0),this.writeFloat64(Te)},_e.Builder.prototype.addFieldInt8=function(Te,Ee,xe){(this.force_defaults||Ee!=xe)&&(this.addInt8(Ee),this.slot(Te))},_e.Builder.prototype.addFieldInt16=function(Te,Ee,xe){(this.force_defaults||Ee!=xe)&&(this.addInt16(Ee),this.slot(Te))},_e.Builder.prototype.addFieldInt32=function(Te,Ee,xe){(this.force_defaults||Ee!=xe)&&(this.addInt32(Ee),this.slot(Te))},_e.Builder.prototype.addFieldInt64=function(Te,Ee,xe){!this.force_defaults&&Ee.equals(xe)||(this.addInt64(Ee),this.slot(Te))},_e.Builder.prototype.addFieldFloat32=function(Te,Ee,xe){(this.force_defaults||Ee!=xe)&&(this.addFloat32(Ee),this.slot(Te))},_e.Builder.prototype.addFieldFloat64=function(Te,Ee,xe){(this.force_defaults||Ee!=xe)&&(this.addFloat64(Ee),this.slot(Te))},_e.Builder.prototype.addFieldOffset=function(Te,Ee,xe){(this.force_defaults||Ee!=xe)&&(this.addOffset(Ee),this.slot(Te))},_e.Builder.prototype.addFieldStruct=function(Te,Ee,xe){Ee!=xe&&(this.nested(Ee),this.slot(Te))},_e.Builder.prototype.nested=function(Te){if(Te!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},_e.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},_e.Builder.prototype.slot=function(Te){this.vtable[Te]=this.offset()},_e.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},_e.Builder.growByteBuffer=function(Te){var Ee=Te.capacity();if(3221225472&Ee)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var xe=Ee<<1,Pe=_e.ByteBuffer.allocate(xe);return Pe.setPosition(xe-Ee),Pe.bytes().set(Te.bytes(),xe-Ee),Pe},_e.Builder.prototype.addOffset=function(Te){this.prep(_e.SIZEOF_INT,0),this.writeInt32(this.offset()-Te+_e.SIZEOF_INT)},_e.Builder.prototype.startObject=function(Te){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=Te;for(var Ee=0;Ee<Te;Ee++)this.vtable[Ee]=0;this.isNested=!0,this.object_start=this.offset()},_e.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var Te=this.offset(),Ee=this.vtable_in_use-1;Ee>=0&&this.vtable[Ee]==0;Ee--);for(var xe=Ee+1;Ee>=0;Ee--)this.addInt16(this.vtable[Ee]!=0?Te-this.vtable[Ee]:0);this.addInt16(Te-this.object_start);var Pe=(xe+2)*_e.SIZEOF_SHORT;this.addInt16(Pe);var Re=0,ke=this.space;e:for(Ee=0;Ee<this.vtables.length;Ee++){var Ce=this.bb.capacity()-this.vtables[Ee];if(Pe==this.bb.readInt16(Ce)){for(var Se=_e.SIZEOF_SHORT;Se<Pe;Se+=_e.SIZEOF_SHORT)if(this.bb.readInt16(ke+Se)!=this.bb.readInt16(Ce+Se))continue e;Re=this.vtables[Ee];break}}return Re?(this.space=this.bb.capacity()-Te,this.bb.writeInt32(this.space,Re-Te)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-Te,this.offset()-Te)),this.isNested=!1,Te},_e.Builder.prototype.finish=function(Te,Ee,xe){var Pe=xe?_e.SIZE_PREFIX_LENGTH:0;if(Ee){var Re=Ee;if(this.prep(this.minalign,_e.SIZEOF_INT+_e.FILE_IDENTIFIER_LENGTH+Pe),Re.length!=_e.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+_e.FILE_IDENTIFIER_LENGTH);for(var ke=_e.FILE_IDENTIFIER_LENGTH-1;ke>=0;ke--)this.writeInt8(Re.charCodeAt(ke))}this.prep(this.minalign,_e.SIZEOF_INT+Pe),this.addOffset(Te),Pe&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},_e.Builder.prototype.finishSizePrefixed=function(Te,Ee){this.finish(Te,Ee,!0)},_e.Builder.prototype.requiredField=function(Te,Ee){var xe=this.bb.capacity()-Te,Pe=xe-this.bb.readInt32(xe);if(this.bb.readInt16(Pe+Ee)==0)throw new Error("FlatBuffers: field "+Ee+" must be set")},_e.Builder.prototype.startVector=function(Te,Ee,xe){this.notNested(),this.vector_num_elems=Ee,this.prep(_e.SIZEOF_INT,Te*Ee),this.prep(xe,Te*Ee)},_e.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},_e.Builder.prototype.createString=function(Te){if(Te instanceof Uint8Array)var Ee=Te;else{Ee=[];for(var xe=0;xe<Te.length;){var Pe,Re=Te.charCodeAt(xe++);(Pe=Re<55296||Re>=56320?Re:(Re<<10)+Te.charCodeAt(xe++)+-56613888)<128?Ee.push(Pe):(Pe<2048?Ee.push(Pe>>6&31|192):(Pe<65536?Ee.push(Pe>>12&15|224):Ee.push(Pe>>18&7|240,Pe>>12&63|128),Ee.push(Pe>>6&63|128)),Ee.push(63&Pe|128))}}this.addInt8(0),this.startVector(1,Ee.length,1),this.bb.setPosition(this.space-=Ee.length),xe=0;for(var ke=this.space,Ce=this.bb.bytes();xe<Ee.length;xe++)Ce[ke++]=Ee[xe];return this.endVector()},_e.Builder.prototype.createLong=function(Te,Ee){return _e.Long.create(Te,Ee)},_e.ByteBuffer=function(Te){this.bytes_=Te,this.position_=0},_e.ByteBuffer.allocate=function(Te){return new _e.ByteBuffer(new Uint8Array(Te))},_e.ByteBuffer.prototype.clear=function(){this.position_=0},_e.ByteBuffer.prototype.bytes=function(){return this.bytes_},_e.ByteBuffer.prototype.position=function(){return this.position_},_e.ByteBuffer.prototype.setPosition=function(Te){this.position_=Te},_e.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},_e.ByteBuffer.prototype.readInt8=function(Te){return this.readUint8(Te)<<24>>24},_e.ByteBuffer.prototype.readUint8=function(Te){return this.bytes_[Te]},_e.ByteBuffer.prototype.readInt16=function(Te){return this.readUint16(Te)<<16>>16},_e.ByteBuffer.prototype.readUint16=function(Te){return this.bytes_[Te]|this.bytes_[Te+1]<<8},_e.ByteBuffer.prototype.readInt32=function(Te){return this.bytes_[Te]|this.bytes_[Te+1]<<8|this.bytes_[Te+2]<<16|this.bytes_[Te+3]<<24},_e.ByteBuffer.prototype.readUint32=function(Te){return this.readInt32(Te)>>>0},_e.ByteBuffer.prototype.readInt64=function(Te){return new _e.Long(this.readInt32(Te),this.readInt32(Te+4))},_e.ByteBuffer.prototype.readUint64=function(Te){return new _e.Long(this.readUint32(Te),this.readUint32(Te+4))},_e.ByteBuffer.prototype.readFloat32=function(Te){return _e.int32[0]=this.readInt32(Te),_e.float32[0]},_e.ByteBuffer.prototype.readFloat64=function(Te){return _e.int32[_e.isLittleEndian?0:1]=this.readInt32(Te),_e.int32[_e.isLittleEndian?1:0]=this.readInt32(Te+4),_e.float64[0]},_e.ByteBuffer.prototype.writeInt8=function(Te,Ee){this.bytes_[Te]=Ee},_e.ByteBuffer.prototype.writeUint8=function(Te,Ee){this.bytes_[Te]=Ee},_e.ByteBuffer.prototype.writeInt16=function(Te,Ee){this.bytes_[Te]=Ee,this.bytes_[Te+1]=Ee>>8},_e.ByteBuffer.prototype.writeUint16=function(Te,Ee){this.bytes_[Te]=Ee,this.bytes_[Te+1]=Ee>>8},_e.ByteBuffer.prototype.writeInt32=function(Te,Ee){this.bytes_[Te]=Ee,this.bytes_[Te+1]=Ee>>8,this.bytes_[Te+2]=Ee>>16,this.bytes_[Te+3]=Ee>>24},_e.ByteBuffer.prototype.writeUint32=function(Te,Ee){this.bytes_[Te]=Ee,this.bytes_[Te+1]=Ee>>8,this.bytes_[Te+2]=Ee>>16,this.bytes_[Te+3]=Ee>>24},_e.ByteBuffer.prototype.writeInt64=function(Te,Ee){this.writeInt32(Te,Ee.low),this.writeInt32(Te+4,Ee.high)},_e.ByteBuffer.prototype.writeUint64=function(Te,Ee){this.writeUint32(Te,Ee.low),this.writeUint32(Te+4,Ee.high)},_e.ByteBuffer.prototype.writeFloat32=function(Te,Ee){_e.float32[0]=Ee,this.writeInt32(Te,_e.int32[0])},_e.ByteBuffer.prototype.writeFloat64=function(Te,Ee){_e.float64[0]=Ee,this.writeInt32(Te,_e.int32[_e.isLittleEndian?0:1]),this.writeInt32(Te+4,_e.int32[_e.isLittleEndian?1:0])},_e.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+_e.SIZEOF_INT+_e.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var Te="",Ee=0;Ee<_e.FILE_IDENTIFIER_LENGTH;Ee++)Te+=String.fromCharCode(this.readInt8(this.position_+_e.SIZEOF_INT+Ee));return Te},_e.ByteBuffer.prototype.__offset=function(Te,Ee){var xe=Te-this.readInt32(Te);return Ee<this.readInt16(xe)?this.readInt16(xe+Ee):0},_e.ByteBuffer.prototype.__union=function(Te,Ee){return Te.bb_pos=Ee+this.readInt32(Ee),Te.bb=this,Te},_e.ByteBuffer.prototype.__string=function(Te,Ee){Te+=this.readInt32(Te);var xe=this.readInt32(Te),Pe="",Re=0;if(Te+=_e.SIZEOF_INT,Ee===_e.Encoding.UTF8_BYTES)return this.bytes_.subarray(Te,Te+xe);for(;Re<xe;){var ke,Ce=this.readUint8(Te+Re++);if(Ce<192)ke=Ce;else{var Se=this.readUint8(Te+Re++);if(Ce<224)ke=(31&Ce)<<6|63&Se;else{var Ae=this.readUint8(Te+Re++);ke=Ce<240?(15&Ce)<<12|(63&Se)<<6|63&Ae:(7&Ce)<<18|(63&Se)<<12|(63&Ae)<<6|63&this.readUint8(Te+Re++)}}ke<65536?Pe+=String.fromCharCode(ke):(ke-=65536,Pe+=String.fromCharCode(55296+(ke>>10),56320+(1023&ke)))}return Pe},_e.ByteBuffer.prototype.__indirect=function(Te){return Te+this.readInt32(Te)},_e.ByteBuffer.prototype.__vector=function(Te){return Te+this.readInt32(Te)+_e.SIZEOF_INT},_e.ByteBuffer.prototype.__vector_len=function(Te){return this.readInt32(Te+this.readInt32(Te))},_e.ByteBuffer.prototype.__has_identifier=function(Te){if(Te.length!=_e.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+_e.FILE_IDENTIFIER_LENGTH);for(var Ee=0;Ee<_e.FILE_IDENTIFIER_LENGTH;Ee++)if(Te.charCodeAt(Ee)!=this.readInt8(this.position_+_e.SIZEOF_INT+Ee))return!1;return!0},_e.ByteBuffer.prototype.createLong=function(Te,Ee){return _e.Long.create(Te,Ee)}}},__webpack_module_cache__={};function __webpack_require__(r){var e=__webpack_module_cache__[r];if(e!==void 0)return e.exports;var t=__webpack_module_cache__[r]={exports:{}};return __webpack_modules__[r].call(t.exports,t,t.exports,__webpack_require__),t.exports}__webpack_require__.n=r=>{var e=r&&r.__esModule?()=>r.default:()=>r;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(r,e)=>{for(var t in e)__webpack_require__.o(e,t)&&!__webpack_require__.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:e[t]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__webpack_require__.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),__webpack_require__.r=r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(6018);return __webpack_exports__})())}(ortWeb_min$1)),ortWeb_min$1.exports}var ortWeb_minExports=requireOrtWeb_min();const ortWeb_min=getDefaultExportFromCjs(ortWeb_minExports),ONNX_WEB=_mergeNamespaces({__proto__:null,default:ortWeb_min},[ortWeb_minExports]);let ONNX;const executionProviders=["wasm"];typeof process<"u"&&process?.release?.name==="node"?(ONNX=sharp??ONNX_NODE,executionProviders.unshift("cpu")):(ONNX=ortWeb_min??ONNX_WEB,typeof navigator<"u"&&/iP(hone|od|ad).+16_4.+AppleWebKit/.test(navigator.userAgent)&&(ONNX.env.wasm.simd=!1));const{env:onnx_env}=ONNX,VERSION="2.17.2",WEB_CACHE_AVAILABLE=typeof self<"u"&&"caches"in self,FS_AVAILABLE=!isEmpty(sharp),PATH_AVAILABLE=!isEmpty(sharp),RUNNING_LOCALLY=FS_AVAILABLE&&PATH_AVAILABLE,__dirname=RUNNING_LOCALLY?sharp.dirname(sharp.dirname(sharp.fileURLToPath(import.meta.url))):"./",DEFAULT_CACHE_DIR=RUNNING_LOCALLY?sharp.join(__dirname,"/.cache/"):null,DEFAULT_LOCAL_MODEL_PATH="/models/",localModelPath=RUNNING_LOCALLY?sharp.join(__dirname,DEFAULT_LOCAL_MODEL_PATH):DEFAULT_LOCAL_MODEL_PATH;onnx_env?.wasm&&(onnx_env.wasm.wasmPaths=RUNNING_LOCALLY?sharp.join(__dirname,"/dist/"):`https://cdn.jsdelivr.net/npm/@xenova/transformers@${VERSION}/dist/`);const env$1={version:VERSION,remoteHost:"https://huggingface.co/",remotePathTemplate:"{model}/resolve/{revision}/",localModelPath,useFS:FS_AVAILABLE,useBrowserCache:WEB_CACHE_AVAILABLE,useFSCache:FS_AVAILABLE,cacheDir:DEFAULT_CACHE_DIR};function isEmpty(r){return Object.keys(r).length===0}var define_process_env_default={};class FileResponse{_CONTENT_TYPE_MAP={txt:"text/plain",html:"text/html",css:"text/css",js:"text/javascript",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif"};constructor(e){if(this.filePath=e,this.headers=new Headers,this.exists=sharp.existsSync(e),this.exists){this.status=200,this.statusText="OK";let t=sharp.statSync(e);this.headers.set("content-length",t.size.toString()),this.updateContentType();let _e=this;this.body=new ReadableStream({start(Te){_e.arrayBuffer().then(Ee=>{Te.enqueue(new Uint8Array(Ee)),Te.close()})}})}else this.status=404,this.statusText="Not Found",this.body=null}updateContentType(){const e=this.filePath.toString().split(".").pop().toLowerCase();this.headers.set("content-type",this._CONTENT_TYPE_MAP[e]??"application/octet-stream")}clone(){let e=new FileResponse(this.filePath);return e.exists=this.exists,e.status=this.status,e.statusText=this.statusText,e.headers=new Headers(this.headers),e}async arrayBuffer(){return(await sharp.promises.readFile(this.filePath)).buffer}async blob(){const e=await sharp.promises.readFile(this.filePath);return new Blob([e],{type:this.headers.get("content-type")})}async text(){return await sharp.promises.readFile(this.filePath,"utf8")}async json(){return JSON.parse(await this.text())}}function isValidUrl(r,e=null,t=null){let _e;try{_e=new URL(r)}catch{return!1}return!(e&&!e.includes(_e.protocol)||t&&!t.includes(_e.hostname))}async function getFile(r){if(env$1.useFS&&!isValidUrl(r,["http:","https:","blob:"]))return new FileResponse(r);if(typeof process<"u"&&process?.release?.name==="node"){const e=!!define_process_env_default?.TESTING_REMOTELY,t=env$1.version,_e=new Headers;if(_e.set("User-Agent",`transformers.js/${t}; is_ci/${e};`),isValidUrl(r,["http:","https:"],["huggingface.co","hf.co"])){const Ee=define_process_env_default?.HF_TOKEN??define_process_env_default?.HF_ACCESS_TOKEN;Ee&&_e.set("Authorization",`Bearer ${Ee}`)}return fetch(r,{headers:_e})}else return fetch(r)}const ERROR_MAPPING={400:"Bad request error occurred while trying to load file",401:"Unauthorized access to file",403:"Forbidden access to file",404:"Could not locate file",408:"Request timeout error occurred while trying to load file",500:"Internal server error error occurred while trying to load file",502:"Bad gateway error occurred while trying to load file",503:"Service unavailable error occurred while trying to load file",504:"Gateway timeout error occurred while trying to load file"};function handleError(r,e,t){if(!t)return null;const _e=ERROR_MAPPING[r]??`Error (${r}) occurred while trying to load file`;throw Error(`${_e}: "${e}".`)}class FileCache{constructor(e){this.path=e}async match(e){let t=sharp.join(this.path,e),_e=new FileResponse(t);if(_e.exists)return _e}async put(e,t){const _e=Buffer.from(await t.arrayBuffer());let Te=sharp.join(this.path,e);try{await sharp.promises.mkdir(sharp.dirname(Te),{recursive:!0}),await sharp.promises.writeFile(Te,_e)}catch(Ee){console.warn("An error occurred while writing the file to cache:",Ee)}}}async function tryCache(r,...e){for(let t of e)try{let _e=await r.match(t);if(_e)return _e}catch{continue}}async function getModelFile(r,e,t=!0,_e={}){dispatchCallback(_e.progress_callback,{status:"initiate",name:r,file:e});let Te;if(!Te&&env$1.useBrowserCache){if(typeof caches>"u")throw Error("Browser cache is not available in this environment.");try{Te=await caches.open("transformers-cache")}catch(je){console.warn("An error occurred while opening the browser cache:",je)}}!Te&&env$1.useFSCache&&(Te=new FileCache(_e.cache_dir??env$1.cacheDir));const Ee=_e.revision??"main";let xe=pathJoin(r,e),Pe=pathJoin(env$1.localModelPath,xe),Re=pathJoin(env$1.remoteHost,env$1.remotePathTemplate.replaceAll("{model}",r).replaceAll("{revision}",encodeURIComponent(Ee)),e),ke=Ee==="main"?xe:pathJoin(r,Ee,e),Ce,Se=Te instanceof FileCache?ke:Re,Ae=!1,Ie;Te&&(Ie=await tryCache(Te,Pe,Se));const Me=Ie!==void 0;if(Ie===void 0){if(isValidUrl(xe,["http:","https:"])){if(_e.local_files_only)throw new Error(`\`local_files_only=true\`, but attempted to load a remote file from: ${xe}.`)}else try{Ie=await getFile(Pe),Ce=Pe}catch(Be){console.warn(`Unable to load from local path "${Pe}": "${Be}"`)}if(Ie===void 0||Ie.status===404){if(_e.local_files_only){if(t)throw Error(`\`local_files_only=true\` or \`env.allowRemoteModels=false\` and file was not found locally at "${Pe}".`);return null}if(Ie=await getFile(Re),Ie.status!==200)return handleError(Ie.status,Re,t);Ce=Se}Ae=Te&&typeof Response<"u"&&Ie instanceof Response&&Ie.status===200}dispatchCallback(_e.progress_callback,{status:"download",name:r,file:e});const Fe={status:"progress",name:r,file:e};let Ve;return _e.progress_callback?Me&&typeof navigator<"u"&&/firefox/i.test(navigator.userAgent)?(Ve=new Uint8Array(await Ie.arrayBuffer()),dispatchCallback(_e.progress_callback,{...Fe,progress:100,loaded:Ve.length,total:Ve.length})):Ve=await readResponse(Ie,je=>{dispatchCallback(_e.progress_callback,{...Fe,...je})}):Ve=new Uint8Array(await Ie.arrayBuffer()),Ae&&Ce&&await Te.match(Ce)===void 0&&await Te.put(Ce,new Response(Ve,{headers:Ie.headers})).catch(je=>{console.warn(`Unable to add response to browser cache: ${je}.`)}),dispatchCallback(_e.progress_callback,{status:"done",name:r,file:e}),Ve}async function getModelJSON(r,e,t=!0,_e={}){let Te=await getModelFile(r,e,t,_e);if(Te===null)return{};let xe=new TextDecoder("utf-8").decode(Te);return JSON.parse(xe)}async function readResponse(r,e){const t=r.headers.get("Content-Length");t===null&&console.warn("Unable to determine content-length from response headers. Will expand buffer when needed.");let _e=parseInt(t??"0"),Te=new Uint8Array(_e),Ee=0;const xe=r.body.getReader();async function Pe(){const{done:Re,value:ke}=await xe.read();if(Re)return;let Ce=Ee+ke.length;if(Ce>_e){_e=Ce;let Ae=new Uint8Array(_e);Ae.set(Te),Te=Ae}Te.set(ke,Ee),Ee=Ce;const Se=Ee/_e*100;return e({progress:Se,loaded:Ee,total:_e}),Pe()}return await Pe(),Te}function pathJoin(...r){return r=r.map((e,t)=>(t&&(e=e.replace(new RegExp("^/"),"")),t!==r.length-1&&(e=e.replace(new RegExp("/$"),"")),e)),r.join("/")}function interpolate_data(r,[e,t,_e],[Te,Ee],xe="bilinear",Pe=!1){const Re=Ee/_e,ke=Te/t,Ce=new r.constructor(Te*Ee*e),Se=t*_e,Ae=Te*Ee;for(let Ie=0;Ie<Te;++Ie)for(let Me=0;Me<Ee;++Me){const Fe=Ie*Ee+Me,Ve=(Me+.5)/Re-.5,je=(Ie+.5)/ke-.5;let Be=Math.floor(Ve),qe=Math.floor(je);const He=Math.min(Be+1,_e-1),Xe=Math.min(qe+1,t-1);Be=Math.max(Be,0),qe=Math.max(qe,0);const Je=Ve-Be,Qe=je-qe,Ke=(1-Je)*(1-Qe),Ye=Je*(1-Qe),pn=(1-Je)*Qe,un=Je*Qe,fn=qe*_e,mn=Xe*_e,wn=fn+Be,Pn=fn+He,xn=mn+Be,In=mn+He;for(let Ln=0;Ln<e;++Ln){const $n=Ln*Se;Ce[Ln*Ae+Fe]=Ke*r[$n+wn]+Ye*r[$n+Pn]+pn*r[$n+xn]+un*r[$n+In]}}return Ce}function permute_data(r,e,t){const _e=new Array(t.length),Te=new Array(t.length);for(let Pe=t.length-1,Re=1;Pe>=0;--Pe)Te[Pe]=Re,_e[Pe]=e[t[Pe]],Re*=_e[Pe];const Ee=t.map((Pe,Re)=>Te[t.indexOf(Re)]),xe=new r.constructor(r.length);for(let Pe=0;Pe<r.length;++Pe){let Re=0;for(let ke=e.length-1,Ce=Pe;ke>=0;--ke)Re+=Ce%e[ke]*Ee[ke],Ce=Math.floor(Ce/e[ke]);xe[Re]=r[Pe]}return[xe,_e]}function softmax(r){const e=max(r)[0],t=r.map(Ee=>Math.exp(Ee-e)),_e=t.reduce((Ee,xe)=>Ee+xe,0);return t.map(Ee=>Ee/_e)}function log_softmax(r){return softmax(r).map(_e=>Math.log(_e))}function getTopItems(r,e=0){return r=Array.from(r).map((t,_e)=>[_e,t]).sort((t,_e)=>_e[1]-t[1]),e!==null&&e>0&&(r=r.slice(0,e)),r}function min(r){if(r.length===0)throw Error("Array must not be empty");let e=r[0],t=0;for(let _e=1;_e<r.length;++_e)r[_e]<e&&(e=r[_e],t=_e);return[e,t]}function max(r){if(r.length===0)throw Error("Array must not be empty");let e=r[0],t=0;for(let _e=1;_e<r.length;++_e)r[_e]>e&&(e=r[_e],t=_e);return[Number(e),t]}function isPowerOfTwo(r){return r>0&&(r&r-1)===0}class P2FFT{constructor(e){if(this.size=e|0,this.size<=1||!isPowerOfTwo(this.size))throw new Error("FFT size must be a power of two larger than 1");this._csize=e<<1,this.table=new Float64Array(this.size*2);for(let _e=0;_e<this.table.length;_e+=2){const Te=Math.PI*_e/this.size;this.table[_e]=Math.cos(Te),this.table[_e+1]=-Math.sin(Te)}let t=0;for(let _e=1;this.size>_e;_e<<=1)++t;this._width=t%2===0?t-1:t,this._bitrev=new Int32Array(1<<this._width);for(let _e=0;_e<this._bitrev.length;++_e){this._bitrev[_e]=0;for(let Te=0;Te<this._width;Te+=2){const Ee=this._width-Te-2;this._bitrev[_e]|=(_e>>>Te&3)<<Ee}}}createComplexArray(){return new Float64Array(this._csize)}fromComplexArray(e,t){const _e=t||new Array(e.length>>>1);for(let Te=0;Te<e.length;Te+=2)_e[Te>>>1]=e[Te];return _e}toComplexArray(e,t){const _e=t||this.createComplexArray();for(let Te=0;Te<_e.length;Te+=2)_e[Te]=e[Te>>>1],_e[Te+1]=0;return _e}transform(e,t){if(e===t)throw new Error("Input and output buffers must be different");this._transform4(e,t,1)}realTransform(e,t){if(e===t)throw new Error("Input and output buffers must be different");this._realTransform4(e,t,1)}inverseTransform(e,t){if(e===t)throw new Error("Input and output buffers must be different");this._transform4(e,t,-1);for(let _e=0;_e<e.length;++_e)e[_e]/=this.size}_transform4(e,t,_e){const Te=this._csize;let xe=1<<this._width,Pe=Te/xe<<1,Re,ke;const Ce=this._bitrev;if(Pe===4)for(Re=0,ke=0;Re<Te;Re+=Pe,++ke){const Ae=Ce[ke];this._singleTransform2(t,e,Re,Ae,xe)}else for(Re=0,ke=0;Re<Te;Re+=Pe,++ke){const Ae=Ce[ke];this._singleTransform4(t,e,Re,Ae,xe,_e)}const Se=this.table;for(xe>>=2;xe>=2;xe>>=2){Pe=Te/xe<<1;const Ae=Pe>>>2;for(Re=0;Re<Te;Re+=Pe){const Ie=Re+Ae-1;for(let Me=Re,Fe=0;Me<Ie;Me+=2,Fe+=xe){const Ve=Me,je=Ve+Ae,Be=je+Ae,qe=Be+Ae,He=e[Ve],Xe=e[Ve+1],Je=e[je],Qe=e[je+1],Ke=e[Be],Ye=e[Be+1],pn=e[qe],un=e[qe+1],fn=Se[Fe],mn=_e*Se[Fe+1],wn=Je*fn-Qe*mn,Pn=Je*mn+Qe*fn,xn=Se[2*Fe],In=_e*Se[2*Fe+1],Ln=Ke*xn-Ye*In,$n=Ke*In+Ye*xn,Sn=Se[3*Fe],Bn=_e*Se[3*Fe+1],Tn=pn*Sn-un*Bn,vn=pn*Bn+un*Sn,Un=He+Ln,zn=Xe+$n,Hn=He-Ln,Jn=Xe-$n,nr=wn+Tn,or=Pn+vn,Sr=_e*(wn-Tn),kr=_e*(Pn-vn);e[Ve]=Un+nr,e[Ve+1]=zn+or,e[je]=Hn+kr,e[je+1]=Jn-Sr,e[Be]=Un-nr,e[Be+1]=zn-or,e[qe]=Hn-kr,e[qe+1]=Jn+Sr}}}}_singleTransform2(e,t,_e,Te,Ee){const xe=e[Te],Pe=e[Te+1],Re=e[Te+Ee],ke=e[Te+Ee+1];t[_e]=xe+Re,t[_e+1]=Pe+ke,t[_e+2]=xe-Re,t[_e+3]=Pe-ke}_singleTransform4(e,t,_e,Te,Ee,xe){const Pe=Ee*2,Re=Ee*3,ke=e[Te],Ce=e[Te+1],Se=e[Te+Ee],Ae=e[Te+Ee+1],Ie=e[Te+Pe],Me=e[Te+Pe+1],Fe=e[Te+Re],Ve=e[Te+Re+1],je=ke+Ie,Be=Ce+Me,qe=ke-Ie,He=Ce-Me,Xe=Se+Fe,Je=Ae+Ve,Qe=xe*(Se-Fe),Ke=xe*(Ae-Ve);t[_e]=je+Xe,t[_e+1]=Be+Je,t[_e+2]=qe+Ke,t[_e+3]=He-Qe,t[_e+4]=je-Xe,t[_e+5]=Be-Je,t[_e+6]=qe-Ke,t[_e+7]=He+Qe}_realTransform4(e,t,_e){const Te=this._csize;let xe=1<<this._width,Pe=Te/xe<<1,Re,ke;const Ce=this._bitrev;if(Pe===4)for(Re=0,ke=0;Re<Te;Re+=Pe,++ke){const Ie=Ce[ke];this._singleRealTransform2(t,e,Re,Ie>>>1,xe>>>1)}else for(Re=0,ke=0;Re<Te;Re+=Pe,++ke){const Ie=Ce[ke];this._singleRealTransform4(t,e,Re,Ie>>>1,xe>>>1,_e)}const Se=this.table;for(xe>>=2;xe>=2;xe>>=2){Pe=Te/xe<<1;const Ie=Pe>>>1,Me=Ie>>>1,Fe=Me>>>1;for(Re=0;Re<Te;Re+=Pe)for(let Ve=0,je=0;Ve<=Fe;Ve+=2,je+=xe){const Be=Re+Ve,qe=Be+Me,He=qe+Me,Xe=He+Me,Je=e[Be],Qe=e[Be+1],Ke=e[qe],Ye=e[qe+1],pn=e[He],un=e[He+1],fn=e[Xe],mn=e[Xe+1],wn=Je,Pn=Qe,xn=Se[je],In=_e*Se[je+1],Ln=Ke*xn-Ye*In,$n=Ke*In+Ye*xn,Sn=Se[2*je],Bn=_e*Se[2*je+1],Tn=pn*Sn-un*Bn,vn=pn*Bn+un*Sn,Un=Se[3*je],zn=_e*Se[3*je+1],Hn=fn*Un-mn*zn,Jn=fn*zn+mn*Un,nr=wn+Tn,or=Pn+vn,Sr=wn-Tn,kr=Pn-vn,Vr=Ln+Hn,Lr=$n+Jn,Qr=_e*(Ln-Hn),wr=_e*($n-Jn);if(e[Be]=nr+Vr,e[Be+1]=or+Lr,e[qe]=Sr+wr,e[qe+1]=kr-Qr,Ve===0){e[He]=nr-Vr,e[He+1]=or-Lr;continue}if(Ve===Fe)continue;const Yn=Re+Me-Ve,gi=Re+Ie-Ve;e[Yn]=Sr-_e*wr,e[Yn+1]=-kr-_e*Qr,e[gi]=nr-_e*Vr,e[gi+1]=-or+_e*Lr}}const Ae=Te>>>1;for(let Ie=2;Ie<Ae;Ie+=2)e[Te-Ie]=e[Ie],e[Te-Ie+1]=-e[Ie+1]}_singleRealTransform2(e,t,_e,Te,Ee){const xe=e[Te],Pe=e[Te+Ee];t[_e]=xe+Pe,t[_e+1]=0,t[_e+2]=xe-Pe,t[_e+3]=0}_singleRealTransform4(e,t,_e,Te,Ee,xe){const Pe=Ee*2,Re=Ee*3,ke=e[Te],Ce=e[Te+Ee],Se=e[Te+Pe],Ae=e[Te+Re],Ie=ke+Se,Me=ke-Se,Fe=Ce+Ae,Ve=xe*(Ce-Ae);t[_e]=Ie+Fe,t[_e+1]=0,t[_e+2]=Me,t[_e+3]=-Ve,t[_e+4]=Ie-Fe,t[_e+5]=0,t[_e+6]=Me,t[_e+7]=Ve}}class NP2FFT{constructor(e){const t=2*(e-1),_e=2*(2*e-1),Te=2**Math.ceil(Math.log2(_e));this.bufferSize=Te,this._a=t;const Ee=new Float64Array(_e),xe=new Float64Array(Te);this._chirpBuffer=new Float64Array(Te),this._buffer1=new Float64Array(Te),this._buffer2=new Float64Array(Te),this._outBuffer1=new Float64Array(Te),this._outBuffer2=new Float64Array(Te);const Pe=-2*Math.PI/e,Re=Math.cos(Pe),ke=Math.sin(Pe);for(let Ce=0;Ce<_e>>1;++Ce){const Se=(Ce+1-e)**2/2,Ae=Math.sqrt(Re**2+ke**2)**Se,Ie=Se*Math.atan2(ke,Re),Me=2*Ce;Ee[Me]=Ae*Math.cos(Ie),Ee[Me+1]=Ae*Math.sin(Ie),xe[Me]=Ee[Me],xe[Me+1]=-Ee[Me+1]}this._slicedChirpBuffer=Ee.subarray(t,_e),this._f=new P2FFT(Te>>1),this._f.transform(this._chirpBuffer,xe)}_transform(e,t,_e){const Te=this._buffer1,Ee=this._buffer2,xe=this._outBuffer1,Pe=this._outBuffer2,Re=this._chirpBuffer,ke=this._slicedChirpBuffer,Ce=this._a;if(_e)for(let Se=0;Se<ke.length;Se+=2){const Ae=Se+1,Ie=Se>>1,Me=t[Ie];Te[Se]=Me*ke[Se],Te[Ae]=Me*ke[Ae]}else for(let Se=0;Se<ke.length;Se+=2){const Ae=Se+1;Te[Se]=t[Se]*ke[Se]-t[Ae]*ke[Ae],Te[Ae]=t[Se]*ke[Ae]+t[Ae]*ke[Se]}this._f.transform(xe,Te);for(let Se=0;Se<Re.length;Se+=2){const Ae=Se+1;Ee[Se]=xe[Se]*Re[Se]-xe[Ae]*Re[Ae],Ee[Ae]=xe[Se]*Re[Ae]+xe[Ae]*Re[Se]}this._f.inverseTransform(Pe,Ee);for(let Se=0;Se<Pe.length;Se+=2){const Ae=Pe[Se+Ce],Ie=Pe[Se+Ce+1],Me=ke[Se],Fe=ke[Se+1];e[Se]=Ae*Me-Ie*Fe,e[Se+1]=Ae*Fe+Ie*Me}}transform(e,t){this._transform(e,t,!1)}realTransform(e,t){this._transform(e,t,!0)}}class FFT{constructor(e){this.fft_length=e,this.isPowerOfTwo=isPowerOfTwo(e),this.isPowerOfTwo?(this.fft=new P2FFT(e),this.outputBufferSize=2*e):(this.fft=new NP2FFT(e),this.outputBufferSize=this.fft.bufferSize)}realTransform(e,t){this.fft.realTransform(e,t)}transform(e,t){this.fft.transform(e,t)}}function medianFilter(r,e){if(e%2===0||e<=0)throw new Error("Window size must be a positive odd number");const t=new r.constructor(r.length),_e=new r.constructor(e),Te=Math.floor(e/2);for(let Ee=0;Ee<r.length;++Ee){let xe=0;for(let Pe=-Te;Pe<=Te;++Pe){let Re=Ee+Pe;Re<0?Re=Math.abs(Re):Re>=r.length&&(Re=2*(r.length-1)-Re),_e[xe++]=r[Re]}_e.sort(),t[Ee]=_e[Te]}return t}function round(r,e){const t=Math.pow(10,e);return Math.round(r*t)/t}function bankers_round(r){const e=Math.round(r);return Math.abs(r)%1===.5?e%2===0?e:e-1:e}const DataTypeMap=Object.freeze({float32:Float32Array,float64:Float64Array,string:Array,int8:Int8Array,uint8:Uint8Array,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,int64:BigInt64Array,uint64:BigUint64Array,bool:Uint8Array}),ONNXTensor$1=ONNX.Tensor;class Tensor{dims;type;data;size;constructor(...e){return e[0]instanceof ONNXTensor$1?Object.assign(this,e[0]):Object.assign(this,new ONNXTensor$1(e[0],e[1],e[2])),new Proxy(this,{get:(t,_e)=>{if(typeof _e=="string"){let Te=Number(_e);if(Number.isInteger(Te))return t._getitem(Te)}return t[_e]},set:(t,_e,Te)=>t[_e]=Te})}*[Symbol.iterator](){const[e,...t]=this.dims;if(t.length>0){const _e=t.reduce((Te,Ee)=>Te*Ee);for(let Te=0;Te<e;++Te)yield this._subarray(Te,_e,t)}else yield*this.data}_getitem(e){const[t,..._e]=this.dims;if(e=safeIndex(e,t),_e.length>0){const Te=_e.reduce((Ee,xe)=>Ee*xe);return this._subarray(e,Te,_e)}else return new Tensor(this.type,[this.data[e]],_e)}indexOf(e){for(let t=0;t<this.data.length;++t)if(this.data[t]==e)return t;return-1}_subarray(e,t,_e){const Te=e*t,Ee=(e+1)*t,xe="subarray"in this.data?this.data.subarray(Te,Ee):this.data.slice(Te,Ee);return new Tensor(this.type,xe,_e)}item(){if(this.data.length!==1)throw new Error(`a Tensor with ${this.data.length} elements cannot be converted to Scalar`);return this.data[0]}tolist(){return reshape(this.data,this.dims)}sigmoid(){return this.clone().sigmoid_()}sigmoid_(){for(let e=0;e<this.data.length;++e)this.data[e]=1/(1+Math.exp(-this.data[e]));return this}mul(e){return this.clone().mul_(e)}mul_(e){for(let t=0;t<this.data.length;++t)this.data[t]*=e;return this}add(e){return this.clone().add_(e)}add_(e){for(let t=0;t<this.data.length;++t)this.data[t]+=e;return this}clone(){return new Tensor(this.type,this.data.slice(),this.dims.slice())}slice(...e){let t=[],_e=[];for(let Re=0;Re<this.dims.length;++Re){let ke=e[Re];if(ke==null)_e.push([0,this.dims[Re]]),t.push(this.dims[Re]);else if(typeof ke=="number")ke=safeIndex(ke,this.dims[Re],Re),_e.push([ke,ke+1]);else if(Array.isArray(ke)&&ke.length===2){if(ke[0]>ke[1])throw new Error(`Invalid slice: ${ke}`);let Ce=[Math.max(ke[0],0),Math.min(ke[1],this.dims[Re])];_e.push(Ce),t.push(Ce[1]-Ce[0])}else throw new Error(`Invalid slice: ${ke}`)}let Te=_e.map(([Re,ke])=>ke-Re),Ee=Te.reduce((Re,ke)=>Re*ke),xe=new this.data.constructor(Ee);const Pe=this.stride();for(let Re=0;Re<Ee;++Re){let ke=0;for(let Ce=Te.length-1,Se=Re;Ce>=0;--Ce){const Ae=Te[Ce];ke+=(Se%Ae+_e[Ce][0])*Pe[Ce],Se=Math.floor(Se/Ae)}xe[Re]=this.data[ke]}return new Tensor(this.type,xe,t)}permute(...e){return permute(this,e)}transpose(...e){return this.permute(...e)}sum(e=null,t=!1){return this.norm(1,e,t)}norm(e="fro",t=null,_e=!1){if(e==="fro")e=2;else if(typeof e=="string")throw Error(`Unsupported norm: ${e}`);if(t===null){let xe=this.data.reduce((Pe,Re)=>Pe+Re**e,0)**(1/e);return new Tensor(this.type,[xe],[])}t=safeIndex(t,this.dims.length);const Te=this.dims.slice();Te[t]=1;const Ee=new this.data.constructor(this.data.length/this.dims[t]);for(let xe=0;xe<this.data.length;++xe){let Pe=0;for(let Re=this.dims.length-1,ke=xe,Ce=1;Re>=0;--Re){const Se=this.dims[Re];if(Re!==t){const Ae=ke%Se;Pe+=Ae*Ce,Ce*=Te[Re]}ke=Math.floor(ke/Se)}Ee[Pe]+=this.data[xe]**e}if(e!==1)for(let xe=0;xe<Ee.length;++xe)Ee[xe]=Ee[xe]**(1/e);return _e||Te.splice(t,1),new Tensor(this.type,Ee,Te)}normalize_(e=2,t=1){t=safeIndex(t,this.dims.length);const _e=this.norm(e,t,!0);for(let Te=0;Te<this.data.length;++Te){let Ee=0;for(let xe=this.dims.length-1,Pe=Te,Re=1;xe>=0;--xe){const ke=this.dims[xe];if(xe!==t){const Ce=Pe%ke;Ee+=Ce*Re,Re*=this.dims[xe]}Pe=Math.floor(Pe/ke)}this.data[Te]/=_e.data[Ee]}return this}normalize(e=2,t=1){return this.clone().normalize_(e,t)}stride(){return dimsToStride(this.dims)}squeeze(e=null){return new Tensor(this.type,this.data,calc_squeeze_dims(this.dims,e))}squeeze_(e=null){return this.dims=calc_squeeze_dims(this.dims,e),this}unsqueeze(e=null){return new Tensor(this.type,this.data,calc_unsqueeze_dims(this.dims,e))}unsqueeze_(e=null){return this.dims=calc_unsqueeze_dims(this.dims,e),this}flatten_(e=0,t=-1){t=(t+this.dims.length)%this.dims.length;let _e=this.dims.slice(0,e),Te=this.dims.slice(e,t+1),Ee=this.dims.slice(t+1);return this.dims=[..._e,Te.reduce((xe,Pe)=>xe*Pe,1),...Ee],this}flatten(e=0,t=-1){return this.clone().flatten_(e,t)}view(...e){let t=-1;for(let _e=0;_e<e.length;++_e)if(e[_e]===-1){if(t!==-1)throw new Error("Only one dimension can be inferred");t=_e}if(t!==-1){const _e=e.reduce((Te,Ee,xe)=>xe!==t?Te*Ee:Te,1);e[t]=this.data.length/_e}return new Tensor(this.type,this.data,e)}neg_(){for(let e=0;e<this.data.length;++e)this.data[e]=-this.data[e];return this}neg(){return this.clone().neg_()}clamp_(e,t){for(let _e=0;_e<this.data.length;++_e)this.data[_e]=Math.min(Math.max(this.data[_e],e),t);return this}clamp(e,t){return this.clone().clamp_(e,t)}round_(){for(let e=0;e<this.data.length;++e)this.data[e]=Math.round(this.data[e]);return this}round(){return this.clone().round_()}to(e){if(this.type===e)return this;if(!DataTypeMap.hasOwnProperty(e))throw new Error(`Unsupported type: ${e}`);return new Tensor(e,DataTypeMap[e].from(this.data),this.dims)}}function reshape(r,e){const t=r.length,_e=e.reduce((Ee,xe)=>Ee*xe);if(t!==_e)throw Error(`cannot reshape array of size ${t} into shape (${e})`);let Te=r;for(let Ee=e.length-1;Ee>=0;Ee--)Te=Te.reduce((xe,Pe)=>{let Re=xe[xe.length-1];return Re.length<e[Ee]?Re.push(Pe):xe.push([Pe]),xe},[[]]);return Te[0]}function permute(r,e){const[t,_e]=permute_data(r.data,r.dims,e);return new Tensor(r.type,t,_e)}function interpolate(r,[e,t],_e="bilinear",Te=!1){const Ee=r.dims.at(-3)??1,xe=r.dims.at(-2),Pe=r.dims.at(-1);let Re=interpolate_data(r.data,[Ee,xe,Pe],[e,t],_e,Te);return new Tensor(r.type,Re,[Ee,e,t])}function mean_pooling(r,e){let t=[r.dims[0],r.dims[2]],_e=new r.data.constructor(t[0]*t[1]),[Te,Ee,xe]=r.dims,Pe=0;for(let Re=0;Re<Te;++Re){let ke=Re*xe*Ee;for(let Ce=0;Ce<xe;++Ce){let Se=0,Ae=0,Ie=Re*Ee,Me=ke+Ce;for(let Ve=0;Ve<Ee;++Ve){let je=Number(e.data[Ie+Ve]);Ae+=je,Se+=r.data[Me+Ve*xe]*je}let Fe=Se/Ae;_e[Pe++]=Fe}}return new Tensor(r.type,_e,t)}function calc_squeeze_dims(r,e){return r=r.slice(),e===null?r=r.filter(t=>t!==1):typeof e=="number"?r[e]===1&&r.splice(e,1):Array.isArray(e)&&(r=r.filter((t,_e)=>t!==1||!e.includes(_e))),r}function calc_unsqueeze_dims(r,e){return e=safeIndex(e,r.length+1),r=r.slice(),r.splice(e,0,1),r}function safeIndex(r,e,t=null){if(r<-e||r>=e)throw new Error(`IndexError: index ${r} is out of bounds for dimension${t===null?"":" "+t} with size ${e}`);return r<0&&(r=(r%e+e)%e),r}function cat(r,e=0){e=safeIndex(e,r[0].dims.length);const t=r[0].dims.slice();t[e]=r.reduce((xe,Pe)=>xe+Pe.dims[e],0);const _e=t.reduce((xe,Pe)=>xe*Pe,1),Te=new r[0].data.constructor(_e),Ee=r[0].type;if(e===0){let xe=0;for(let Pe of r)Te.set(Pe.data,xe),xe+=Pe.data.length}else{let xe=0;for(let Pe=0;Pe<r.length;++Pe){let Re=r[Pe];for(let ke=0;ke<Re.data.length;++ke){let Ce=0;for(let Se=Re.dims.length-1,Ae=ke,Ie=1;Se>=0;--Se){const Me=Re.dims[Se];let Fe=Ae%Me;Se===e&&(Fe+=xe),Ce+=Fe*Ie,Ie*=t[Se],Ae=Math.floor(Ae/Me)}Te[Ce]=Re.data[ke]}xe+=Re.dims[e]}}return new Tensor(Ee,Te,t)}function stack(r,e=0){return cat(r.map(t=>t.unsqueeze(e)),e)}function std_mean(r,e=null,t=1,_e=!1){if(e===null){const ke=r.data.reduce((Ie,Me)=>Ie+Me,0)/r.data.length,Ce=Math.sqrt(r.data.reduce((Ie,Me)=>Ie+(Me-ke)**2,0)/(r.data.length-t)),Se=new Tensor(r.type,[ke],[]);return[new Tensor(r.type,[Ce],[]),Se]}e=safeIndex(e,r.dims.length);const Te=mean(r,e,_e),Ee=r.dims.slice();Ee[e]=1;const xe=new r.data.constructor(r.data.length/r.dims[e]);for(let Re=0;Re<r.data.length;++Re){let ke=0;for(let Ce=r.dims.length-1,Se=Re,Ae=1;Ce>=0;--Ce){const Ie=r.dims[Ce];if(Ce!==e){const Me=Se%Ie;ke+=Me*Ae,Ae*=Ee[Ce]}Se=Math.floor(Se/Ie)}xe[ke]+=(r.data[Re]-Te.data[ke])**2}for(let Re=0;Re<xe.length;++Re)xe[Re]=Math.sqrt(xe[Re]/(r.dims[e]-t));return _e||Ee.splice(e,1),[new Tensor(r.type,xe,Ee),Te]}function mean(r,e=null,t=!1){if(e===null){let Ee=r.data.reduce((xe,Pe)=>xe+Pe,0);return new Tensor(r.type,[Ee/r.data.length],[])}e=safeIndex(e,r.dims.length);const _e=r.dims.slice();_e[e]=1;const Te=new r.data.constructor(r.data.length/r.dims[e]);for(let Ee=0;Ee<r.data.length;++Ee){let xe=0;for(let Pe=r.dims.length-1,Re=Ee,ke=1;Pe>=0;--Pe){const Ce=r.dims[Pe];if(Pe!==e){const Se=Re%Ce;xe+=Se*ke,ke*=_e[Pe]}Re=Math.floor(Re/Ce)}Te[xe]+=r.data[Ee]}if(r.dims[e]!==1)for(let Ee=0;Ee<Te.length;++Ee)Te[Ee]=Te[Ee]/r.dims[e];return t||_e.splice(e,1),new Tensor(r.type,Te,_e)}function dynamicTimeWarping(r){const[e,t]=r.dims,_e=[e+1,t+1],Te=new Tensor("float32",new Float32Array(_e[0]*_e[1]).fill(1/0),_e),Ee=new Tensor("float32",new Float32Array(_e[0]*_e[1]).fill(-1),_e);Te[0].data[0]=0;for(let Ce=1;Ce<t+1;++Ce)for(let Se=1;Se<e+1;++Se){const Ae=Te[Se-1][Ce-1].item(),Ie=Te[Se-1][Ce].item(),Me=Te[Se][Ce-1].item();let Fe,Ve;Ae<Ie&&Ae<Me?(Fe=Ae,Ve=0):Ie<Ae&&Ie<Me?(Fe=Ie,Ve=1):(Fe=Me,Ve=2),Te[Se].data[Ce]=r[Se-1][Ce-1].item()+Fe,Ee[Se].data[Ce]=Ve}let xe=e,Pe=t;Ee.data.fill(2,0,_e[1]);for(let Ce=0;Ce<_e[0];++Ce)Ee[Ce].data[0]=1;let Re=[],ke=[];for(;xe>0||Pe>0;)switch(Re.push(xe-1),ke.push(Pe-1),Ee[xe][Pe].item()){case 0:--xe,--Pe;break;case 1:--xe;break;case 2:--Pe;break;default:throw new Error(`Internal error in dynamic time warping. Unexpected trace[${xe}, ${Pe}]. Please file a bug report.`)}return Re.reverse(),ke.reverse(),[Re,ke]}function dimsToStride(r){const e=new Array(r.length);for(let t=r.length-1,_e=1;t>=0;--t)e[t]=_e,_e*=r[t];return e}function ones(r){const e=r.reduce((t,_e)=>t*_e,1);return new Tensor("int64",new BigInt64Array(e).fill(1n),r)}function ones_like(r){return ones(r.dims)}function quantize_embeddings(r,e){if(r.dims.length!==2)throw new Error("The tensor must have 2 dimensions");if(r.dims.at(-1)%8!==0)throw new Error("The last dimension of the tensor must be a multiple of 8");if(!["binary","ubinary"].includes(e))throw new Error("The precision must be either 'binary' or 'ubinary'");const t=e==="binary",_e=t?"int8":"uint8",Te=t?Int8Array:Uint8Array,Ee=r.data,xe=new Te(Ee.length/8);for(let Pe=0;Pe<Ee.length;++Pe){const Re=Ee[Pe]>0?1:0,ke=Math.floor(Pe/8),Ce=Pe%8;xe[ke]|=Re<<7-Ce,t&&Ce===0&&(xe[ke]-=128)}return new Tensor(_e,xe,[r.dims[0],r.dims[1]/8])}class PriorityQueue{constructor(e=(t,_e)=>t>_e){this._heap=[],this._comparator=e}get size(){return this._heap.length}isEmpty(){return this.size===0}peek(){return this._heap[0]}push(...e){return this.extend(e)}extend(e){for(const t of e)this._heap.push(t),this._siftUp();return this.size}pop(){const e=this.peek(),t=this.size-1;return t>0&&this._swap(0,t),this._heap.pop(),this._siftDown(),e}replace(e){const t=this.peek();return this._heap[0]=e,this._siftDown(),t}_parent(e){return(e+1>>>1)-1}_left(e){return(e<<1)+1}_right(e){return e+1<<1}_greater(e,t){return this._comparator(this._heap[e],this._heap[t])}_swap(e,t){const _e=this._heap[e];this._heap[e]=this._heap[t],this._heap[t]=_e}_siftUp(){let e=this.size-1;for(;e>0&&this._greater(e,this._parent(e));)this._swap(e,this._parent(e)),e=this._parent(e)}_siftDown(){let e=0;for(;this._left(e)<this.size&&this._greater(this._left(e),e)||this._right(e)<this.size&&this._greater(this._right(e),e);){const t=this._right(e)<this.size&&this._greater(this._right(e),this._left(e))?this._right(e):this._left(e);this._swap(e,t),e=t}}}class CharTrie{constructor(){this.root=CharTrieNode.default()}extend(e){for(let t of e)this.push(t)}push(e){let t=this.root;for(let _e of e){let Te=t.children.get(_e);Te===void 0&&(Te=CharTrieNode.default(),t.children.set(_e,Te)),t=Te}t.isLeaf=!0}*commonPrefixSearch(e){let t=this.root,_e="";for(let Te=0;Te<e.length&&t!==void 0;++Te){const Ee=e[Te];_e+=Ee,t=t.children.get(Ee),t!==void 0&&t.isLeaf&&(yield _e)}}}class CharTrieNode{constructor(e,t){this.isLeaf=e,this.children=t}static default(){return new CharTrieNode(!1,new Map)}}class TokenLattice{constructor(e,t,_e){this.sentence=e,this.len=e.length,this.bosTokenId=t,this.eosTokenId=_e,this.nodes=[],this.beginNodes=Array.from({length:this.len+1},()=>[]),this.endNodes=Array.from({length:this.len+1},()=>[]);const Te=new TokenLatticeNode(this.bosTokenId,0,0,0,0),Ee=new TokenLatticeNode(this.eosTokenId,1,this.len,0,0);this.nodes.push(Te.clone()),this.nodes.push(Ee.clone()),this.beginNodes[this.len].push(Ee),this.endNodes[0].push(Te)}insert(e,t,_e,Te){const Ee=this.nodes.length,xe=new TokenLatticeNode(Te,Ee,e,t,_e);this.beginNodes[e].push(xe),this.endNodes[e+t].push(xe),this.nodes.push(xe)}viterbi(){const e=this.len;let t=0;for(;t<=e;){if(this.beginNodes[t].length==0)return[];for(let Pe of this.beginNodes[t]){Pe.prev=null;let Re=0,ke=null;for(let Ce of this.endNodes[t]){const Se=Ce.backtraceScore+Pe.score;(ke===null||Se>Re)&&(ke=Ce.clone(),Re=Se)}if(ke!==null)Pe.prev=ke,Pe.backtraceScore=Re;else return[]}++t}const _e=[],Ee=this.beginNodes[e][0].prev;if(Ee===null)return[];let xe=Ee.clone();for(;xe.prev!==null;)_e.push(xe.clone()),xe=xe.clone().prev.clone();return _e.reverse(),_e}piece(e){return this.sentence.slice(e.pos,e.pos+e.length)}tokens(){return this.viterbi().map(t=>this.piece(t))}tokenIds(){return this.viterbi().map(t=>t.tokenId)}}class TokenLatticeNode{constructor(e,t,_e,Te,Ee){this.tokenId=e,this.nodeId=t,this.pos=_e,this.length=Te,this.score=Ee,this.prev=null,this.backtraceScore=0}clone(){const e=new TokenLatticeNode(this.tokenId,this.nodeId,this.pos,this.length,this.score);return e.prev=this.prev,e.backtraceScore=this.backtraceScore,e}}var TOKEN_TYPES=Object.freeze({Text:"Text",NumericLiteral:"NumericLiteral",BooleanLiteral:"BooleanLiteral",StringLiteral:"StringLiteral",Identifier:"Identifier",Equals:"Equals",OpenParen:"OpenParen",CloseParen:"CloseParen",OpenStatement:"OpenStatement",CloseStatement:"CloseStatement",OpenExpression:"OpenExpression",CloseExpression:"CloseExpression",OpenSquareBracket:"OpenSquareBracket",CloseSquareBracket:"CloseSquareBracket",OpenCurlyBracket:"OpenCurlyBracket",CloseCurlyBracket:"CloseCurlyBracket",Comma:"Comma",Dot:"Dot",Colon:"Colon",Pipe:"Pipe",CallOperator:"CallOperator",AdditiveBinaryOperator:"AdditiveBinaryOperator",MultiplicativeBinaryOperator:"MultiplicativeBinaryOperator",ComparisonBinaryOperator:"ComparisonBinaryOperator",UnaryOperator:"UnaryOperator",Set:"Set",If:"If",For:"For",In:"In",Is:"Is",NotIn:"NotIn",Else:"Else",EndIf:"EndIf",ElseIf:"ElseIf",EndFor:"EndFor",And:"And",Or:"Or",Not:"UnaryOperator"}),KEYWORDS=Object.freeze({set:TOKEN_TYPES.Set,for:TOKEN_TYPES.For,in:TOKEN_TYPES.In,is:TOKEN_TYPES.Is,if:TOKEN_TYPES.If,else:TOKEN_TYPES.Else,endif:TOKEN_TYPES.EndIf,elif:TOKEN_TYPES.ElseIf,endfor:TOKEN_TYPES.EndFor,and:TOKEN_TYPES.And,or:TOKEN_TYPES.Or,not:TOKEN_TYPES.Not,"not in":TOKEN_TYPES.NotIn,true:TOKEN_TYPES.BooleanLiteral,false:TOKEN_TYPES.BooleanLiteral}),Token=class{constructor(r,e){this.value=r,this.type=e}};function isWord(r){return/\w/.test(r)}function isInteger(r){return/[0-9]/.test(r)}var ORDERED_MAPPING_TABLE=[["{%",TOKEN_TYPES.OpenStatement],["%}",TOKEN_TYPES.CloseStatement],["{{",TOKEN_TYPES.OpenExpression],["}}",TOKEN_TYPES.CloseExpression],["(",TOKEN_TYPES.OpenParen],[")",TOKEN_TYPES.CloseParen],["{",TOKEN_TYPES.OpenCurlyBracket],["}",TOKEN_TYPES.CloseCurlyBracket],["[",TOKEN_TYPES.OpenSquareBracket],["]",TOKEN_TYPES.CloseSquareBracket],[",",TOKEN_TYPES.Comma],[".",TOKEN_TYPES.Dot],[":",TOKEN_TYPES.Colon],["|",TOKEN_TYPES.Pipe],["<=",TOKEN_TYPES.ComparisonBinaryOperator],[">=",TOKEN_TYPES.ComparisonBinaryOperator],["==",TOKEN_TYPES.ComparisonBinaryOperator],["!=",TOKEN_TYPES.ComparisonBinaryOperator],["<",TOKEN_TYPES.ComparisonBinaryOperator],[">",TOKEN_TYPES.ComparisonBinaryOperator],["+",TOKEN_TYPES.AdditiveBinaryOperator],["-",TOKEN_TYPES.AdditiveBinaryOperator],["*",TOKEN_TYPES.MultiplicativeBinaryOperator],["/",TOKEN_TYPES.MultiplicativeBinaryOperator],["%",TOKEN_TYPES.MultiplicativeBinaryOperator],["=",TOKEN_TYPES.Equals]],ESCAPE_CHARACTERS=new Map([["n",`
`],["t","	"],["r","\r"],["b","\b"],["f","\f"],["v","\v"],["'","'"],['"','"'],["\\","\\"]]);function preprocess(r,e={}){return r.endsWith(`
`)&&(r=r.slice(0,-1)),r=r.replace(/{#.*?#}/gs,"{##}"),e.lstrip_blocks&&(r=r.replace(/^[ \t]*({[#%])/gm,"$1")),e.trim_blocks&&(r=r.replace(/([#%]})\n/g,"$1")),r.replace(/{##}/g,"").replace(/-%}\s*/g,"%}").replace(/\s*{%-/g,"{%").replace(/-}}\s*/g,"}}").replace(/\s*{{-/g,"{{")}function tokenize(r,e={}){const t=[],_e=preprocess(r,e);let Te=0;const Ee=xe=>{let Pe="";for(;xe(_e[Te]);){if(_e[Te]==="\\"){if(++Te,Te>=_e.length)throw new SyntaxError("Unexpected end of input");const Re=_e[Te++],ke=ESCAPE_CHARACTERS.get(Re);if(ke===void 0)throw new SyntaxError(`Unexpected escaped character: ${Re}`);Pe+=ke;continue}if(Pe+=_e[Te++],Te>=_e.length)throw new SyntaxError("Unexpected end of input")}return Pe};e:for(;Te<_e.length;){const xe=t.at(-1)?.type;if(xe===void 0||xe===TOKEN_TYPES.CloseStatement||xe===TOKEN_TYPES.CloseExpression){let Re="";for(;Te<_e.length&&!(_e[Te]==="{"&&(_e[Te+1]==="%"||_e[Te+1]==="{"));)Re+=_e[Te++];if(Re.length>0){t.push(new Token(Re,TOKEN_TYPES.Text));continue}}Ee(Re=>/\s/.test(Re));const Pe=_e[Te];if(Pe==="-"||Pe==="+"){const Re=t.at(-1)?.type;if(Re===TOKEN_TYPES.Text||Re===void 0)throw new SyntaxError(`Unexpected character: ${Pe}`);switch(Re){case TOKEN_TYPES.Identifier:case TOKEN_TYPES.NumericLiteral:case TOKEN_TYPES.BooleanLiteral:case TOKEN_TYPES.StringLiteral:case TOKEN_TYPES.CloseParen:case TOKEN_TYPES.CloseSquareBracket:break;default:{++Te;const ke=Ee(isInteger);t.push(new Token(`${Pe}${ke}`,ke.length>0?TOKEN_TYPES.NumericLiteral:TOKEN_TYPES.UnaryOperator));continue}}}for(const[Re,ke]of ORDERED_MAPPING_TABLE)if(_e.slice(Te,Te+Re.length)===Re){t.push(new Token(Re,ke)),Te+=Re.length;continue e}if(Pe==="'"||Pe==='"'){++Te;const Re=Ee(ke=>ke!==Pe);t.push(new Token(Re,TOKEN_TYPES.StringLiteral)),++Te;continue}if(isInteger(Pe)){const Re=Ee(isInteger);t.push(new Token(Re,TOKEN_TYPES.NumericLiteral));continue}if(isWord(Pe)){const Re=Ee(isWord),ke=Object.hasOwn(KEYWORDS,Re)?KEYWORDS[Re]:TOKEN_TYPES.Identifier;ke===TOKEN_TYPES.In&&t.at(-1)?.type===TOKEN_TYPES.Not?(t.pop(),t.push(new Token("not in",TOKEN_TYPES.NotIn))):t.push(new Token(Re,ke));continue}throw new SyntaxError(`Unexpected character: ${Pe}`)}return t}var Statement=class{type="Statement"},Program=class extends Statement{constructor(r){super(),this.body=r}type="Program"},If=class extends Statement{constructor(r,e,t){super(),this.test=r,this.body=e,this.alternate=t}type="If"},For=class extends Statement{constructor(r,e,t){super(),this.loopvar=r,this.iterable=e,this.body=t}type="For"},SetStatement=class extends Statement{constructor(r,e){super(),this.assignee=r,this.value=e}type="Set"},Expression=class extends Statement{type="Expression"},MemberExpression=class extends Expression{constructor(r,e,t){super(),this.object=r,this.property=e,this.computed=t}type="MemberExpression"},CallExpression=class extends Expression{constructor(r,e){super(),this.callee=r,this.args=e}type="CallExpression"},Identifier=class extends Expression{constructor(r){super(),this.value=r}type="Identifier"},Literal=class extends Expression{constructor(r){super(),this.value=r}type="Literal"},NumericLiteral=class extends Literal{type="NumericLiteral"},StringLiteral=class extends Literal{type="StringLiteral"},BooleanLiteral=class extends Literal{type="BooleanLiteral"},ArrayLiteral=class extends Literal{type="ArrayLiteral"},TupleLiteral=class extends Literal{type="TupleLiteral"},ObjectLiteral=class extends Literal{type="ObjectLiteral"},BinaryExpression=class extends Expression{constructor(r,e,t){super(),this.operator=r,this.left=e,this.right=t}type="BinaryExpression"},FilterExpression=class extends Expression{constructor(r,e){super(),this.operand=r,this.filter=e}type="FilterExpression"},TestExpression=class extends Expression{constructor(r,e,t){super(),this.operand=r,this.negate=e,this.test=t}type="TestExpression"},UnaryExpression=class extends Expression{constructor(r,e){super(),this.operator=r,this.argument=e}type="UnaryExpression"},SliceExpression=class extends Expression{constructor(r=void 0,e=void 0,t=void 0){super(),this.start=r,this.stop=e,this.step=t}type="SliceExpression"},KeywordArgumentExpression=class extends Expression{constructor(r,e){super(),this.key=r,this.value=e}type="KeywordArgumentExpression"};function parse(r){const e=new Program([]);let t=0;function _e(Pn,xn){const In=r[t++];if(!In||In.type!==Pn)throw new Error(`Parser Error: ${xn}. ${In.type} !== ${Pn}.`);return In}function Te(){switch(r[t].type){case TOKEN_TYPES.Text:return Pe();case TOKEN_TYPES.OpenStatement:return Re();case TOKEN_TYPES.OpenExpression:return ke();default:throw new SyntaxError(`Unexpected token type: ${r[t].type}`)}}function Ee(...Pn){return t+Pn.length<=r.length&&Pn.some((xn,In)=>xn!==r[t+In].type)}function xe(...Pn){return t+Pn.length<=r.length&&Pn.every((xn,In)=>xn===r[t+In].type)}function Pe(){return new StringLiteral(_e(TOKEN_TYPES.Text,"Expected text token").value)}function Re(){_e(TOKEN_TYPES.OpenStatement,"Expected opening statement token");let Pn;switch(r[t].type){case TOKEN_TYPES.Set:++t,Pn=Ce(),_e(TOKEN_TYPES.CloseStatement,"Expected closing statement token");break;case TOKEN_TYPES.If:++t,Pn=Se(),_e(TOKEN_TYPES.OpenStatement,"Expected {% token"),_e(TOKEN_TYPES.EndIf,"Expected endif token"),_e(TOKEN_TYPES.CloseStatement,"Expected %} token");break;case TOKEN_TYPES.For:++t,Pn=Ie(),_e(TOKEN_TYPES.OpenStatement,"Expected {% token"),_e(TOKEN_TYPES.EndFor,"Expected endfor token"),_e(TOKEN_TYPES.CloseStatement,"Expected %} token");break;default:throw new SyntaxError(`Unknown statement type: ${r[t].type}`)}return Pn}function ke(){_e(TOKEN_TYPES.OpenExpression,"Expected opening expression token");const Pn=Me();return _e(TOKEN_TYPES.CloseExpression,"Expected closing expression token"),Pn}function Ce(){const Pn=Me();if(xe(TOKEN_TYPES.Equals)){++t;const xn=Ce();return new SetStatement(Pn,xn)}return Pn}function Se(){const Pn=Me();_e(TOKEN_TYPES.CloseStatement,"Expected closing statement token");const xn=[],In=[];for(;!(r[t]?.type===TOKEN_TYPES.OpenStatement&&(r[t+1]?.type===TOKEN_TYPES.ElseIf||r[t+1]?.type===TOKEN_TYPES.Else||r[t+1]?.type===TOKEN_TYPES.EndIf));)xn.push(Te());if(r[t]?.type===TOKEN_TYPES.OpenStatement&&r[t+1]?.type!==TOKEN_TYPES.EndIf)if(++t,xe(TOKEN_TYPES.ElseIf))_e(TOKEN_TYPES.ElseIf,"Expected elseif token"),In.push(Se());else for(_e(TOKEN_TYPES.Else,"Expected else token"),_e(TOKEN_TYPES.CloseStatement,"Expected closing statement token");!(r[t]?.type===TOKEN_TYPES.OpenStatement&&r[t+1]?.type===TOKEN_TYPES.EndIf);)In.push(Te());return new If(Pn,xn,In)}function Ae(Pn=!1){const xn=Pn?wn:Me,In=[xn()],Ln=xe(TOKEN_TYPES.Comma);for(;Ln&&(++t,In.push(xn()),!!xe(TOKEN_TYPES.Comma)););return Ln?new TupleLiteral(In):In[0]}function Ie(){const Pn=Ae(!0);if(!(Pn instanceof Identifier||Pn instanceof TupleLiteral))throw new SyntaxError(`Expected identifier/tuple for the loop variable, got ${Pn.type} instead`);_e(TOKEN_TYPES.In,"Expected `in` keyword following loop variable");const xn=Me();_e(TOKEN_TYPES.CloseStatement,"Expected closing statement token");const In=[];for(;Ee(TOKEN_TYPES.OpenStatement,TOKEN_TYPES.EndFor);)In.push(Te());return new For(Pn,xn,In)}function Me(){return Fe()}function Fe(){const Pn=Ve();if(xe(TOKEN_TYPES.If)){++t;const xn=Ve();_e(TOKEN_TYPES.Else,"Expected else token");const In=Ve();return new If(xn,[Pn],[In])}return Pn}function Ve(){let Pn=je();for(;xe(TOKEN_TYPES.Or);){const xn=r[t];++t;const In=je();Pn=new BinaryExpression(xn,Pn,In)}return Pn}function je(){let Pn=Be();for(;xe(TOKEN_TYPES.And);){const xn=r[t];++t;const In=Be();Pn=new BinaryExpression(xn,Pn,In)}return Pn}function Be(){let Pn;for(;xe(TOKEN_TYPES.Not);){const xn=r[t];++t;const In=Be();Pn=new UnaryExpression(xn,In)}return Pn??qe()}function qe(){let Pn=He();for(;xe(TOKEN_TYPES.ComparisonBinaryOperator)||xe(TOKEN_TYPES.In)||xe(TOKEN_TYPES.NotIn);){const xn=r[t];++t;const In=He();Pn=new BinaryExpression(xn,Pn,In)}return Pn}function He(){let Pn=un();for(;xe(TOKEN_TYPES.AdditiveBinaryOperator);){const xn=r[t];++t;const In=un();Pn=new BinaryExpression(xn,Pn,In)}return Pn}function Xe(){const Pn=pn();return xe(TOKEN_TYPES.OpenParen)?Je(Pn):Pn}function Je(Pn){let xn=new CallExpression(Pn,Qe());return xe(TOKEN_TYPES.OpenParen)&&(xn=Je(xn)),xn}function Qe(){_e(TOKEN_TYPES.OpenParen,"Expected opening parenthesis for arguments list");const Pn=Ke();return _e(TOKEN_TYPES.CloseParen,"Expected closing parenthesis for arguments list"),Pn}function Ke(){const Pn=[];for(;!xe(TOKEN_TYPES.CloseParen);){let xn=Me();if(xe(TOKEN_TYPES.Equals)){if(++t,!(xn instanceof Identifier))throw new SyntaxError("Expected identifier for keyword argument");const In=Me();xn=new KeywordArgumentExpression(xn,In)}Pn.push(xn),xe(TOKEN_TYPES.Comma)&&++t}return Pn}function Ye(){const Pn=[];let xn=!1;for(;!xe(TOKEN_TYPES.CloseSquareBracket);)xe(TOKEN_TYPES.Colon)?(Pn.push(void 0),++t,xn=!0):(Pn.push(Me()),xe(TOKEN_TYPES.Colon)&&(++t,xn=!0));if(Pn.length===0)throw new SyntaxError("Expected at least one argument for member/slice expression");if(xn){if(Pn.length>3)throw new SyntaxError("Expected 0-3 arguments for slice expression");return new SliceExpression(...Pn)}return Pn[0]}function pn(){let Pn=wn();for(;xe(TOKEN_TYPES.Dot)||xe(TOKEN_TYPES.OpenSquareBracket);){const xn=r[t];++t;let In;const Ln=xn.type!==TOKEN_TYPES.Dot;if(Ln)In=Ye(),_e(TOKEN_TYPES.CloseSquareBracket,"Expected closing square bracket");else if(In=wn(),In.type!=="Identifier")throw new SyntaxError("Expected identifier following dot operator");Pn=new MemberExpression(Pn,In,Ln)}return Pn}function un(){let Pn=fn();for(;xe(TOKEN_TYPES.MultiplicativeBinaryOperator);){const xn=r[t];++t;const In=fn();Pn=new BinaryExpression(xn,Pn,In)}return Pn}function fn(){let Pn=mn();for(;xe(TOKEN_TYPES.Is);){++t;const xn=xe(TOKEN_TYPES.Not);xn&&++t;let In=wn();if(In instanceof BooleanLiteral&&(In=new Identifier(In.value.toString())),!(In instanceof Identifier))throw new SyntaxError("Expected identifier for the test");Pn=new TestExpression(Pn,xn,In)}return Pn}function mn(){let Pn=Xe();for(;xe(TOKEN_TYPES.Pipe);){++t;let xn=wn();if(!(xn instanceof Identifier))throw new SyntaxError("Expected identifier for the filter");xe(TOKEN_TYPES.OpenParen)&&(xn=Je(xn)),Pn=new FilterExpression(Pn,xn)}return Pn}function wn(){const Pn=r[t];switch(Pn.type){case TOKEN_TYPES.NumericLiteral:return++t,new NumericLiteral(Number(Pn.value));case TOKEN_TYPES.StringLiteral:return++t,new StringLiteral(Pn.value);case TOKEN_TYPES.BooleanLiteral:return++t,new BooleanLiteral(Pn.value==="true");case TOKEN_TYPES.Identifier:return++t,new Identifier(Pn.value);case TOKEN_TYPES.OpenParen:{++t;const xn=Ae();if(r[t].type!==TOKEN_TYPES.CloseParen)throw new SyntaxError(`Expected closing parenthesis, got ${r[t].type} instead`);return++t,xn}case TOKEN_TYPES.OpenSquareBracket:{++t;const xn=[];for(;!xe(TOKEN_TYPES.CloseSquareBracket);)xn.push(Me()),xe(TOKEN_TYPES.Comma)&&++t;return++t,new ArrayLiteral(xn)}case TOKEN_TYPES.OpenCurlyBracket:{++t;const xn=new Map;for(;!xe(TOKEN_TYPES.CloseCurlyBracket);){const In=Me();_e(TOKEN_TYPES.Colon,"Expected colon between key and value in object literal");const Ln=Me();xn.set(In,Ln),xe(TOKEN_TYPES.Comma)&&++t}return++t,new ObjectLiteral(xn)}default:throw new SyntaxError(`Unexpected token: ${Pn.type}`)}}for(;t<r.length;)e.body.push(Te());return e}function range(r,e,t=1){e===void 0&&(e=r,r=0);const _e=[];for(let Te=r;Te<e;Te+=t)_e.push(Te);return _e}function slice(r,e,t,_e=1){const Te=Math.sign(_e);Te>=0?(e=(e??=0)<0?Math.max(r.length+e,0):Math.min(e,r.length),t=(t??=r.length)<0?Math.max(r.length+t,0):Math.min(t,r.length)):(e=(e??=r.length-1)<0?Math.max(r.length+e,-1):Math.min(e,r.length-1),t=(t??=-1)<-1?Math.max(r.length+t,-1):Math.min(t,r.length-1));const Ee=[];for(let xe=e;Te*xe<Te*t;xe+=_e)Ee.push(r[xe]);return Ee}function titleCase(r){return r.replace(/\b\w/g,e=>e.toUpperCase())}var RuntimeValue=class{type="RuntimeValue";value;builtins=new Map;constructor(r=void 0){this.value=r}__bool__(){return new BooleanValue(!!this.value)}},NumericValue=class extends RuntimeValue{type="NumericValue"},StringValue=class extends RuntimeValue{type="StringValue";builtins=new Map([["upper",new FunctionValue(()=>new StringValue(this.value.toUpperCase()))],["lower",new FunctionValue(()=>new StringValue(this.value.toLowerCase()))],["strip",new FunctionValue(()=>new StringValue(this.value.trim()))],["title",new FunctionValue(()=>new StringValue(titleCase(this.value)))],["length",new NumericValue(this.value.length)]])},BooleanValue=class extends RuntimeValue{type="BooleanValue"},ObjectValue=class extends RuntimeValue{type="ObjectValue";__bool__(){return new BooleanValue(this.value.size>0)}builtins=new Map([["get",new FunctionValue(([r,e])=>{if(!(r instanceof StringValue))throw new Error(`Object key must be a string: got ${r.type}`);return this.value.get(r.value)??e??new NullValue})],["items",new FunctionValue(()=>new ArrayValue(Array.from(this.value.entries()).map(([r,e])=>new ArrayValue([new StringValue(r),e]))))]])},ArrayValue=class extends RuntimeValue{type="ArrayValue";builtins=new Map([["length",new NumericValue(this.value.length)]]);__bool__(){return new BooleanValue(this.value.length>0)}},TupleValue=class extends ArrayValue{type="TupleValue"},FunctionValue=class extends RuntimeValue{type="FunctionValue"},NullValue=class extends RuntimeValue{type="NullValue"},UndefinedValue=class extends RuntimeValue{type="UndefinedValue"},Environment=class{constructor(r){this.parent=r}variables=new Map([["namespace",new FunctionValue(r=>{if(r.length===0)return new ObjectValue(new Map);if(r.length!==1||!(r[0]instanceof ObjectValue))throw new Error("`namespace` expects either zero arguments or a single object argument");return r[0]})]]);tests=new Map([["boolean",r=>r.type==="BooleanValue"],["callable",r=>r instanceof FunctionValue],["odd",r=>{if(r.type!=="NumericValue")throw new Error(`Cannot apply test "odd" to type: ${r.type}`);return r.value%2!==0}],["even",r=>{if(r.type!=="NumericValue")throw new Error(`Cannot apply test "even" to type: ${r.type}`);return r.value%2===0}],["false",r=>r.type==="BooleanValue"&&!r.value],["true",r=>r.type==="BooleanValue"&&r.value],["number",r=>r.type==="NumericValue"],["integer",r=>r.type==="NumericValue"&&Number.isInteger(r.value)],["iterable",r=>r instanceof ArrayValue||r instanceof StringValue],["lower",r=>{const e=r.value;return r.type==="StringValue"&&e===e.toLowerCase()}],["upper",r=>{const e=r.value;return r.type==="StringValue"&&e===e.toUpperCase()}],["none",r=>r.type==="NullValue"],["defined",r=>r.type!=="UndefinedValue"],["undefined",r=>r.type==="UndefinedValue"],["equalto",(r,e)=>r.value===e.value]]);set(r,e){return this.declareVariable(r,convertToRuntimeValues(e))}declareVariable(r,e){if(this.variables.has(r))throw new SyntaxError(`Variable already declared: ${r}`);return this.variables.set(r,e),e}setVariable(r,e){return this.variables.set(r,e),e}resolve(r){if(this.variables.has(r))return this;if(this.parent)return this.parent.resolve(r);throw new Error(`Unknown variable: ${r}`)}lookupVariable(r){try{return this.resolve(r).variables.get(r)??new UndefinedValue}catch{return new UndefinedValue}}},Interpreter=class{global;constructor(r){this.global=r??new Environment}run(r){return this.evaluate(r,this.global)}evaluateBinaryExpression(r,e){const t=this.evaluate(r.left,e);switch(r.operator.value){case"and":return t.__bool__().value?this.evaluate(r.right,e):t;case"or":return t.__bool__().value?t:this.evaluate(r.right,e)}const _e=this.evaluate(r.right,e);switch(r.operator.value){case"==":return new BooleanValue(t.value==_e.value);case"!=":return new BooleanValue(t.value!=_e.value)}if(t instanceof UndefinedValue||_e instanceof UndefinedValue)throw new Error("Cannot perform operation on undefined values");if(t instanceof NullValue||_e instanceof NullValue)throw new Error("Cannot perform operation on null values");if(t instanceof NumericValue&&_e instanceof NumericValue)switch(r.operator.value){case"+":return new NumericValue(t.value+_e.value);case"-":return new NumericValue(t.value-_e.value);case"*":return new NumericValue(t.value*_e.value);case"/":return new NumericValue(t.value/_e.value);case"%":return new NumericValue(t.value%_e.value);case"<":return new BooleanValue(t.value<_e.value);case">":return new BooleanValue(t.value>_e.value);case">=":return new BooleanValue(t.value>=_e.value);case"<=":return new BooleanValue(t.value<=_e.value)}else if(t instanceof ArrayValue&&_e instanceof ArrayValue)switch(r.operator.value){case"+":return new ArrayValue(t.value.concat(_e.value))}else if(_e instanceof ArrayValue){const Te=_e.value.find(Ee=>Ee.value===t.value)!==void 0;switch(r.operator.value){case"in":return new BooleanValue(Te);case"not in":return new BooleanValue(!Te)}}if(t instanceof StringValue||_e instanceof StringValue)switch(r.operator.value){case"+":return new StringValue(t.value.toString()+_e.value.toString())}if(t instanceof StringValue&&_e instanceof StringValue)switch(r.operator.value){case"in":return new BooleanValue(_e.value.includes(t.value));case"not in":return new BooleanValue(!_e.value.includes(t.value))}if(t instanceof StringValue&&_e instanceof ObjectValue)switch(r.operator.value){case"in":return new BooleanValue(_e.value.has(t.value));case"not in":return new BooleanValue(!_e.value.has(t.value))}throw new SyntaxError(`Unknown operator "${r.operator.value}" between ${t.type} and ${_e.type}`)}evaluateFilterExpression(r,e){const t=this.evaluate(r.operand,e);if(r.filter.type==="Identifier"){const _e=r.filter;if(t instanceof ArrayValue)switch(_e.value){case"list":return t;case"first":return t.value[0];case"last":return t.value[t.value.length-1];case"length":return new NumericValue(t.value.length);case"reverse":return new ArrayValue(t.value.reverse());case"sort":return new ArrayValue(t.value.sort((Te,Ee)=>{if(Te.type!==Ee.type)throw new Error(`Cannot compare different types: ${Te.type} and ${Ee.type}`);switch(Te.type){case"NumericValue":return Te.value-Ee.value;case"StringValue":return Te.value.localeCompare(Ee.value);default:throw new Error(`Cannot compare type: ${Te.type}`)}}));default:throw new Error(`Unknown ArrayValue filter: ${_e.value}`)}else if(t instanceof StringValue)switch(_e.value){case"length":return new NumericValue(t.value.length);case"upper":return new StringValue(t.value.toUpperCase());case"lower":return new StringValue(t.value.toLowerCase());case"title":return new StringValue(titleCase(t.value));case"capitalize":return new StringValue(t.value.charAt(0).toUpperCase()+t.value.slice(1));case"trim":return new StringValue(t.value.trim());default:throw new Error(`Unknown StringValue filter: ${_e.value}`)}else if(t instanceof NumericValue)switch(_e.value){case"abs":return new NumericValue(Math.abs(t.value));default:throw new Error(`Unknown NumericValue filter: ${_e.value}`)}else if(t instanceof ObjectValue)switch(_e.value){case"items":return new ArrayValue(Array.from(t.value.entries()).map(([Te,Ee])=>new ArrayValue([new StringValue(Te),Ee])));case"length":return new NumericValue(t.value.size);default:throw new Error(`Unknown ObjectValue filter: ${_e.value}`)}throw new Error(`Cannot apply filter "${_e.value}" to type: ${t.type}`)}else if(r.filter.type==="CallExpression"){const _e=r.filter;if(_e.callee.type!=="Identifier")throw new Error(`Unknown filter: ${_e.callee.type}`);const Te=_e.callee.value;if(t instanceof ArrayValue){switch(Te){case"selectattr":{if(t.value.some(Ce=>!(Ce instanceof ObjectValue)))throw new Error("`selectattr` can only be applied to array of objects");if(_e.args.some(Ce=>Ce.type!=="StringLiteral"))throw new Error("arguments of `selectattr` must be strings");const[Ee,xe,Pe]=_e.args.map(Ce=>this.evaluate(Ce,e));let Re;if(xe){const Ce=e.tests.get(xe.value);if(!Ce)throw new Error(`Unknown test: ${xe.value}`);Re=Ce}else Re=(...Ce)=>Ce[0].__bool__().value;const ke=t.value.filter(Ce=>{const Se=Ce.value.get(Ee.value);return Se?Re(Se,Pe):!1});return new ArrayValue(ke)}}throw new Error(`Unknown ArrayValue filter: ${Te}`)}else throw new Error(`Cannot apply filter "${Te}" to type: ${t.type}`)}throw new Error(`Unknown filter: ${r.filter.type}`)}evaluateTestExpression(r,e){const t=this.evaluate(r.operand,e),_e=e.tests.get(r.test.value);if(!_e)throw new Error(`Unknown test: ${r.test.value}`);const Te=_e(t);return new BooleanValue(r.negate?!Te:Te)}evaluateUnaryExpression(r,e){const t=this.evaluate(r.argument,e);switch(r.operator.value){case"not":return new BooleanValue(!t.value);default:throw new SyntaxError(`Unknown operator: ${r.operator.value}`)}}evalProgram(r,e){return this.evaluateBlock(r.body,e)}evaluateBlock(r,e){let t="";for(const _e of r){const Te=this.evaluate(_e,e);Te.type!=="NullValue"&&Te.type!=="UndefinedValue"&&(t+=Te.value)}return new StringValue(t)}evaluateIdentifier(r,e){return e.lookupVariable(r.value)}evaluateCallExpression(r,e){const t=[],_e=new Map;for(const Ee of r.args)if(Ee.type==="KeywordArgumentExpression"){const xe=Ee;_e.set(xe.key.value,this.evaluate(xe.value,e))}else t.push(this.evaluate(Ee,e));_e.size>0&&t.push(new ObjectValue(_e));const Te=this.evaluate(r.callee,e);if(Te.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${Te.type}`);return Te.value(t,e)}evaluateSliceExpression(r,e,t){if(!(r instanceof ArrayValue||r instanceof StringValue))throw new Error("Slice object must be an array or string");const _e=this.evaluate(e.start,t),Te=this.evaluate(e.stop,t),Ee=this.evaluate(e.step,t);if(!(_e instanceof NumericValue||_e instanceof UndefinedValue))throw new Error("Slice start must be numeric or undefined");if(!(Te instanceof NumericValue||Te instanceof UndefinedValue))throw new Error("Slice stop must be numeric or undefined");if(!(Ee instanceof NumericValue||Ee instanceof UndefinedValue))throw new Error("Slice step must be numeric or undefined");return r instanceof ArrayValue?new ArrayValue(slice(r.value,_e.value,Te.value,Ee.value)):new StringValue(slice(Array.from(r.value),_e.value,Te.value,Ee.value).join(""))}evaluateMemberExpression(r,e){const t=this.evaluate(r.object,e);let _e;if(r.computed){if(r.property.type==="SliceExpression")return this.evaluateSliceExpression(t,r.property,e);_e=this.evaluate(r.property,e)}else _e=new StringValue(r.property.value);let Te;if(t instanceof ObjectValue){if(!(_e instanceof StringValue))throw new Error(`Cannot access property with non-string: got ${_e.type}`);Te=t.value.get(_e.value)??t.builtins.get(_e.value)}else if(t instanceof ArrayValue||t instanceof StringValue)if(_e instanceof NumericValue)Te=t.value.at(_e.value),t instanceof StringValue&&(Te=new StringValue(t.value.at(_e.value)));else if(_e instanceof StringValue)Te=t.builtins.get(_e.value);else throw new Error(`Cannot access property with non-string/non-number: got ${_e.type}`);else{if(!(_e instanceof StringValue))throw new Error(`Cannot access property with non-string: got ${_e.type}`);Te=t.builtins.get(_e.value)}return Te instanceof RuntimeValue?Te:new UndefinedValue}evaluateSet(r,e){const t=this.evaluate(r.value,e);if(r.assignee.type==="Identifier"){const _e=r.assignee.value;e.setVariable(_e,t)}else if(r.assignee.type==="MemberExpression"){const _e=r.assignee,Te=this.evaluate(_e.object,e);if(!(Te instanceof ObjectValue))throw new Error("Cannot assign to member of non-object");if(_e.property.type!=="Identifier")throw new Error("Cannot assign to member with non-identifier property");Te.value.set(_e.property.value,t)}else throw new Error(`Invalid LHS inside assignment expression: ${JSON.stringify(r.assignee)}`);return new NullValue}evaluateIf(r,e){const t=this.evaluate(r.test,e);return this.evaluateBlock(t.__bool__().value?r.body:r.alternate,e)}evaluateFor(r,e){const t=new Environment(e),_e=this.evaluate(r.iterable,t);if(!(_e instanceof ArrayValue))throw new Error(`Expected iterable type in for loop: got ${_e.type}`);let Te="";for(let Ee=0;Ee<_e.value.length;++Ee){const xe=new Map([["index",new NumericValue(Ee+1)],["index0",new NumericValue(Ee)],["revindex",new NumericValue(_e.value.length-Ee)],["revindex0",new NumericValue(_e.value.length-Ee-1)],["first",new BooleanValue(Ee===0)],["last",new BooleanValue(Ee===_e.value.length-1)],["length",new NumericValue(_e.value.length)],["previtem",Ee>0?_e.value[Ee-1]:new UndefinedValue],["nextitem",Ee<_e.value.length-1?_e.value[Ee+1]:new UndefinedValue]]);t.setVariable("loop",new ObjectValue(xe));const Pe=_e.value[Ee];if(r.loopvar.type==="Identifier")t.setVariable(r.loopvar.value,Pe);else if(r.loopvar.type==="TupleLiteral"){const ke=r.loopvar;if(Pe.type!=="ArrayValue")throw new Error(`Cannot unpack non-iterable type: ${Pe.type}`);const Ce=Pe;if(ke.value.length!==Ce.value.length)throw new Error(`Too ${ke.value.length>Ce.value.length?"few":"many"} items to unpack`);for(let Se=0;Se<ke.value.length;++Se){if(ke.value[Se].type!=="Identifier")throw new Error(`Cannot unpack non-identifier type: ${ke.value[Se].type}`);t.setVariable(ke.value[Se].value,Ce.value[Se])}}const Re=this.evaluateBlock(r.body,t);Te+=Re.value}return new StringValue(Te)}evaluate(r,e){if(r===void 0)return new UndefinedValue;switch(r.type){case"Program":return this.evalProgram(r,e);case"Set":return this.evaluateSet(r,e);case"If":return this.evaluateIf(r,e);case"For":return this.evaluateFor(r,e);case"NumericLiteral":return new NumericValue(Number(r.value));case"StringLiteral":return new StringValue(r.value);case"BooleanLiteral":return new BooleanValue(r.value);case"ArrayLiteral":return new ArrayValue(r.value.map(t=>this.evaluate(t,e)));case"TupleLiteral":return new TupleValue(r.value.map(t=>this.evaluate(t,e)));case"ObjectLiteral":{const t=new Map;for(const[_e,Te]of r.value){const Ee=this.evaluate(_e,e);if(!(Ee instanceof StringValue))throw new Error(`Object keys must be strings: got ${Ee.type}`);t.set(Ee.value,this.evaluate(Te,e))}return new ObjectValue(t)}case"Identifier":return this.evaluateIdentifier(r,e);case"CallExpression":return this.evaluateCallExpression(r,e);case"MemberExpression":return this.evaluateMemberExpression(r,e);case"UnaryExpression":return this.evaluateUnaryExpression(r,e);case"BinaryExpression":return this.evaluateBinaryExpression(r,e);case"FilterExpression":return this.evaluateFilterExpression(r,e);case"TestExpression":return this.evaluateTestExpression(r,e);default:throw new SyntaxError(`Unknown node type: ${r.type}`)}}};function convertToRuntimeValues(r){switch(typeof r){case"number":return new NumericValue(r);case"string":return new StringValue(r);case"boolean":return new BooleanValue(r);case"object":return r===null?new NullValue:Array.isArray(r)?new ArrayValue(r.map(convertToRuntimeValues)):new ObjectValue(new Map(Object.entries(r).map(([e,t])=>[e,convertToRuntimeValues(t)])));case"function":return new FunctionValue((e,t)=>{const _e=r(...e.map(Te=>Te.value))??null;return convertToRuntimeValues(_e)});default:throw new Error(`Cannot convert to runtime value: ${r}`)}}var Template=class{parsed;constructor(r){const e=tokenize(r,{lstrip_blocks:!0,trim_blocks:!0});this.parsed=parse(e)}render(r){const e=new Environment;e.set("false",!1),e.set("true",!0),e.set("raise_exception",Te=>{throw new Error(Te)}),e.set("range",range);for(const[Te,Ee]of Object.entries(r))e.set(Te,Ee);return new Interpreter(e).run(this.parsed).value}};async function loadTokenizer(r,e){const t=await Promise.all([getModelJSON(r,"tokenizer.json",!0,e),getModelJSON(r,"tokenizer_config.json",!0,e)]);return e.legacy!==null&&(t[1].legacy=e.legacy),t}function regexSplit(r,e){const t=[];let _e=0;for(const Te of r.matchAll(e)){const Ee=Te[0];_e<Te.index&&t.push(r.slice(_e,Te.index)),Ee.length>0&&t.push(Ee),_e=Te.index+Ee.length}return _e<r.length&&t.push(r.slice(_e)),t}function createPattern(r,e=!0){if(r.Regex!==void 0){let t=r.Regex.replace(/\\([#&~])/g,"$1");for(const[_e,Te]of PROBLEMATIC_REGEX_MAP)t=t.replaceAll(_e,Te);return new RegExp(t,"gu")}else if(r.String!==void 0){const t=escapeRegExp(r.String);return new RegExp(e?t:`(${t})`,"gu")}else return console.warn("Unknown pattern type:",r),null}function objectToMap(r){return new Map(Object.entries(r))}function prepareTensorForDecode(r){const e=r.dims;switch(e.length){case 1:return r.tolist();case 2:if(e[0]!==1)throw new Error("Unable to decode tensor with `batch size !== 1`. Use `tokenizer.batch_decode(...)` for batched inputs.");return r.tolist()[0];default:throw new Error(`Expected tensor to have 1-2 dimensions, got ${e.length}.`)}}function clean_up_tokenization(r){return r.replace(/ \./g,".").replace(/ \?/g,"?").replace(/ \!/g,"!").replace(/ ,/g,",").replace(/ \' /g,"'").replace(/ n\'t/g,"n't").replace(/ \'m/g,"'m").replace(/ \'s/g,"'s").replace(/ \'ve/g,"'ve").replace(/ \'re/g,"'re")}function remove_accents(r){return r.replace(/[\u0300-\u036f]/g,"")}function lowercase_and_remove_accent(r){return remove_accents(r.toLowerCase())}function fuse(r,e,t){const _e=[];let Te=0;for(;Te<r.length;){if(_e.push(r[Te]),(t.get(r[Te])??e)!==e){++Te;continue}for(;Te<r.length&&(t.get(r[Te])??e)===e;)++Te}return _e}function whitespace_split(r){return r.match(/\S+/g)||[]}const PUNCTUATION_REGEX="\\p{P}\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E",PROBLEMATIC_REGEX_MAP=new Map([["(?i:'s|'t|'re|'ve|'m|'ll|'d)","(?:'([sS]|[tT]|[rR][eE]|[vV][eE]|[mM]|[lL][lL]|[dD]))"]]);class AddedToken{constructor(e){this.content=e.content,this.id=e.id,this.single_word=e.single_word??!1,this.lstrip=e.lstrip??!1,this.rstrip=e.rstrip??!1,this.special=e.special??!1,this.normalized=e.normalized??null}}class TokenizerModel extends Callable{constructor(e){super(),this.config=e,this.vocab=[],this.tokens_to_ids=new Map,this.unk_token_id=void 0,this.unk_token=void 0,this.end_of_word_suffix=void 0,this.fuse_unk=this.config.fuse_unk??!1}static fromConfig(e,...t){switch(e.type){case"WordPiece":return new WordPieceTokenizer(e);case"Unigram":return new Unigram(e,...t);case"BPE":return new BPE(e);default:if(e.vocab)return new LegacyTokenizerModel(e,...t);throw new Error(`Unknown TokenizerModel type: ${e.type}`)}}_call(e){let t=this.encode(e);return this.fuse_unk&&(t=fuse(t,this.unk_token_id,this.tokens_to_ids)),t}encode(e){throw Error("encode should be implemented in subclass.")}convert_tokens_to_ids(e){return e.map(t=>this.tokens_to_ids.get(t)??this.unk_token_id)}convert_ids_to_tokens(e){return e.map(t=>this.vocab[t]??this.unk_token)}}class WordPieceTokenizer extends TokenizerModel{constructor(e){super(e),this.tokens_to_ids=objectToMap(e.vocab),this.unk_token_id=this.tokens_to_ids.get(e.unk_token),this.unk_token=e.unk_token,this.max_input_chars_per_word=e.max_input_chars_per_word??100,this.vocab=new Array(this.tokens_to_ids.size);for(const[t,_e]of this.tokens_to_ids)this.vocab[_e]=t}encode(e){const t=[];for(const _e of e){const Te=[..._e];if(Te.length>this.max_input_chars_per_word){t.push(this.unk_token);continue}let Ee=!1,xe=0;const Pe=[];for(;xe<Te.length;){let Re=Te.length,ke=null;for(;xe<Re;){let Ce=Te.slice(xe,Re).join("");if(xe>0&&(Ce=this.config.continuing_subword_prefix+Ce),this.tokens_to_ids.has(Ce)){ke=Ce;break}--Re}if(ke===null){Ee=!0;break}Pe.push(ke),xe=Re}Ee?t.push(this.unk_token):t.push(...Pe)}return t}}class Unigram extends TokenizerModel{constructor(e,t){super(e);const _e=e.vocab.length;this.vocab=new Array(_e),this.scores=new Array(_e);for(let Te=0;Te<_e;++Te){const Ee=e.vocab[Te];this.vocab[Te]=Ee[0],this.scores[Te]=Ee[1]}this.unk_token_id=e.unk_id,this.unk_token=this.vocab[e.unk_id],this.tokens_to_ids=new Map(this.vocab.map((Te,Ee)=>[Te,Ee])),this.bosToken=" ",this.bosTokenId=this.tokens_to_ids.get(this.bosToken),this.eosToken=t.eos_token,this.eosTokenId=this.tokens_to_ids.get(this.eosToken),this.unkToken=this.vocab[this.unk_token_id],this.minScore=min(this.scores)[0],this.unkScore=this.minScore-10,this.scores[this.unk_token_id]=this.unkScore,this.trie=new CharTrie,this.trie.extend(this.vocab),this.fuse_unk=!0}populateNodes(e){const t=e.sentence,_e=t.length;let Te=0;for(;Te<_e;){let xe=!1;for(let Pe of this.trie.commonPrefixSearch(t.slice(Te))){const Re=this.tokens_to_ids.get(Pe),ke=this.scores[Re],Ce=Pe.length;e.insert(Te,Ce,ke,Re),!xe&&Ce===1&&(xe=!0)}xe||e.insert(Te,1,this.unkScore,this.unk_token_id),Te+=1}}tokenize(e){const t=new TokenLattice(e,this.bosTokenId,this.eosTokenId);return this.populateNodes(t),t.tokens()}encode(e){const t=[];for(const _e of e){const Te=this.tokenize(_e);t.push(...Te)}return t}}const BYTES_TO_UNICODE=(()=>{const r=[...Array.from({length:94},(Te,Ee)=>Ee+33),...Array.from({length:12},(Te,Ee)=>Ee+161),...Array.from({length:82},(Te,Ee)=>Ee+174)],e=r.slice();let t=0;for(let Te=0;Te<256;++Te)r.includes(Te)||(r.push(Te),e.push(256+t),t+=1);const _e=e.map(Te=>String.fromCharCode(Te));return Object.fromEntries(r.map((Te,Ee)=>[Te,_e[Ee]]))})(),UNICODE_TO_BYTES=reverseDictionary(BYTES_TO_UNICODE);class BPE extends TokenizerModel{constructor(e){super(e),this.BPE_SPLIT_TOKEN=" ",this.tokens_to_ids=objectToMap(e.vocab),this.unk_token_id=this.tokens_to_ids.get(e.unk_token),this.unk_token=e.unk_token,this.vocab=new Array(this.tokens_to_ids.size);for(const[t,_e]of this.tokens_to_ids)this.vocab[_e]=t;this.bpe_ranks=new Map(e.merges.map((t,_e)=>[t,_e])),this.merges=e.merges.map(t=>t.split(this.BPE_SPLIT_TOKEN)),this.end_of_word_suffix=e.end_of_word_suffix,this.continuing_subword_suffix=e.continuing_subword_suffix??null,this.byte_fallback=this.config.byte_fallback??!1,this.byte_fallback&&(this.text_encoder=new TextEncoder),this.ignore_merges=this.config.ignore_merges??!1,this.cache=new Map}bpe(e){if(e.length===0)return[];const t=this.cache.get(e);if(t!==void 0)return t;const _e=Array.from(e);this.end_of_word_suffix&&(_e[_e.length-1]+=this.end_of_word_suffix);let Te=[];if(_e.length>1){const Ee=new PriorityQueue((Re,ke)=>Re.score<ke.score);let xe={token:_e[0],bias:0,prev:null,next:null},Pe=xe;for(let Re=1;Re<_e.length;++Re){const ke={bias:Re/_e.length,token:_e[Re],prev:Pe,next:null};Pe.next=ke,this._add_node(Ee,Pe),Pe=ke}for(;!Ee.isEmpty();){const Re=Ee.pop();if(Re.deleted||!Re.next||Re.next.deleted)continue;if(Re.deleted=!0,Re.next.deleted=!0,Re.prev){const Ce={...Re.prev};Re.prev.deleted=!0,Re.prev=Ce,Ce.prev?Ce.prev.next=Ce:xe=Ce}const ke={token:Re.token+Re.next.token,bias:Re.bias,prev:Re.prev,next:Re.next.next};ke.prev?(ke.prev.next=ke,this._add_node(Ee,ke.prev)):xe=ke,ke.next&&(ke.next.prev=ke,this._add_node(Ee,ke))}for(let Re=xe;Re!==null;Re=Re.next)Te.push(Re.token)}else Te=_e;if(this.continuing_subword_suffix)for(let Ee=0;Ee<Te.length-1;++Ee)Te[Ee]+=this.continuing_subword_suffix;return this.cache.set(e,Te),Te}_add_node(e,t){const _e=this.bpe_ranks.get(t.token+this.BPE_SPLIT_TOKEN+t.next.token);_e!==void 0&&(t.score=_e+t.bias,e.push(t))}encode(e){const t=[];for(const _e of e){if(this.ignore_merges&&this.tokens_to_ids.has(_e)){t.push(_e);continue}const Te=this.bpe(_e);for(const Ee of Te)this.tokens_to_ids.has(Ee)?t.push(Ee):this.byte_fallback?t.push(...Array.from(this.text_encoder.encode(Ee)).map(xe=>`<0x${xe.toString(16).toUpperCase().padStart(2,"0")}>`)):t.push(this.unk_token)}return t}}class LegacyTokenizerModel extends TokenizerModel{constructor(e,t){super(e),this.tokens_to_ids=objectToMap(t.target_lang?e.vocab[t.target_lang]:e.vocab),this.bos_token=t.bos_token,this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=t.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.pad_token=t.pad_token,this.pad_token_id=this.tokens_to_ids.get(this.pad_token),this.unk_token=t.unk_token,this.unk_token_id=this.tokens_to_ids.get(this.unk_token),this.vocab=new Array(this.tokens_to_ids.size);for(const[_e,Te]of this.tokens_to_ids)this.vocab[Te]=_e}encode(e){return e}}class Normalizer extends Callable{constructor(e){super(),this.config=e}static fromConfig(e){if(e===null)return null;switch(e.type){case"BertNormalizer":return new BertNormalizer(e);case"Precompiled":return new Precompiled(e);case"Sequence":return new NormalizerSequence(e);case"Replace":return new Replace(e);case"NFC":return new NFC(e);case"NFKC":return new NFKC(e);case"NFKD":return new NFKD(e);case"Strip":return new StripNormalizer(e);case"StripAccents":return new StripAccents(e);case"Lowercase":return new Lowercase(e);case"Prepend":return new Prepend(e);default:throw new Error(`Unknown Normalizer type: ${e.type}`)}}normalize(e){throw Error("normalize should be implemented in subclass.")}_call(e){return this.normalize(e)}}class Replace extends Normalizer{normalize(e){const t=createPattern(this.config.pattern);return t===null?e:e.replaceAll(t,this.config.content)}}class NFC extends Normalizer{normalize(e){return e=e.normalize("NFC"),e}}class NFKC extends Normalizer{normalize(e){return e=e.normalize("NFKC"),e}}class NFKD extends Normalizer{normalize(e){return e=e.normalize("NFKD"),e}}class StripNormalizer extends Normalizer{normalize(e){return this.config.strip_left&&this.config.strip_right?e=e.trim():(this.config.strip_left&&(e=e.trimStart()),this.config.strip_right&&(e=e.trimEnd())),e}}class StripAccents extends Normalizer{normalize(e){return e=remove_accents(e),e}}class Lowercase extends Normalizer{normalize(e){return e=e.toLowerCase(),e}}class Prepend extends Normalizer{normalize(e){return e=this.config.prepend+e,e}}class NormalizerSequence extends Normalizer{constructor(e){super(e),this.normalizers=e.normalizers.map(t=>Normalizer.fromConfig(t))}normalize(e){return this.normalizers.reduce((t,_e)=>_e.normalize(t),e)}}class BertNormalizer extends Normalizer{_tokenize_chinese_chars(e){const t=[];for(let _e=0;_e<e.length;++_e){const Te=e[_e],Ee=Te.charCodeAt(0);this._is_chinese_char(Ee)?(t.push(" "),t.push(Te),t.push(" ")):t.push(Te)}return t.join("")}_is_chinese_char(e){return e>=19968&&e<=40959||e>=13312&&e<=19903||e>=131072&&e<=173791||e>=173824&&e<=177983||e>=177984&&e<=178207||e>=178208&&e<=183983||e>=63744&&e<=64255||e>=194560&&e<=195103}stripAccents(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}_is_control(e){switch(e){case"	":case`
`:case"\r":return!1;default:return new RegExp("^\\p{Cc}|\\p{Cf}|\\p{Co}|\\p{Cs}$","u").test(e)}}_clean_text(e){const t=[];for(const _e of e){const Te=_e.charCodeAt(0);Te===0||Te===65533||this._is_control(_e)||(/^\s$/.test(_e)?t.push(" "):t.push(_e))}return t.join("")}normalize(e){return this.config.clean_text&&(e=this._clean_text(e)),this.config.handle_chinese_chars&&(e=this._tokenize_chinese_chars(e)),this.config.lowercase?(e=e.toLowerCase(),this.config.strip_accents!==!1&&(e=this.stripAccents(e))):this.config.strip_accents&&(e=this.stripAccents(e)),e}}class PreTokenizer extends Callable{static fromConfig(e){if(e===null)return null;switch(e.type){case"BertPreTokenizer":return new BertPreTokenizer(e);case"Sequence":return new PreTokenizerSequence(e);case"Whitespace":return new WhitespacePreTokenizer(e);case"WhitespaceSplit":return new WhitespaceSplit(e);case"Metaspace":return new MetaspacePreTokenizer(e);case"ByteLevel":return new ByteLevelPreTokenizer(e);case"Split":return new SplitPreTokenizer(e);case"Punctuation":return new PunctuationPreTokenizer(e);case"Digits":return new DigitsPreTokenizer(e);case"Replace":return new ReplacePreTokenizer(e);default:throw new Error(`Unknown PreTokenizer type: ${e.type}`)}}pre_tokenize_text(e,t){throw Error("pre_tokenize_text should be implemented in subclass.")}pre_tokenize(e,t){return(Array.isArray(e)?e.map(_e=>this.pre_tokenize_text(_e,t)):this.pre_tokenize_text(e,t)).flat()}_call(e,t){return this.pre_tokenize(e,t)}}class BertPreTokenizer extends PreTokenizer{constructor(e){super(),this.pattern=new RegExp(`[^\\s${PUNCTUATION_REGEX}]+|[${PUNCTUATION_REGEX}]`,"gu")}pre_tokenize_text(e,t){return e.trim().match(this.pattern)||[]}}class ByteLevelPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.add_prefix_space=this.config.add_prefix_space,this.trim_offsets=this.config.trim_offsets,this.use_regex=this.config.use_regex??!0,this.pattern=new RegExp("'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+","gu"),this.byte_encoder=BYTES_TO_UNICODE,this.text_encoder=new TextEncoder}pre_tokenize_text(e,t){return this.add_prefix_space&&!e.startsWith(" ")&&(e=" "+e),(this.use_regex?e.match(this.pattern)||[]:[e]).map(Te=>Array.from(this.text_encoder.encode(Te),Ee=>this.byte_encoder[Ee]).join(""))}}class SplitPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.pattern=createPattern(this.config.pattern,this.config.invert)}pre_tokenize_text(e,t){return this.pattern===null?[]:this.config.invert?e.match(this.pattern)||[]:regexSplit(e,this.pattern)}}class PunctuationPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.pattern=new RegExp(`[^${PUNCTUATION_REGEX}]+|[${PUNCTUATION_REGEX}]+`,"gu")}pre_tokenize_text(e,t){return e.match(this.pattern)||[]}}class DigitsPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e;const t=`[^\\d]+|\\d${this.config.individual_digits?"":"+"}`;this.pattern=new RegExp(t,"gu")}pre_tokenize_text(e,t){return e.match(this.pattern)||[]}}class PostProcessor extends Callable{constructor(e){super(),this.config=e}static fromConfig(e){if(e===null)return null;switch(e.type){case"TemplateProcessing":return new TemplateProcessing(e);case"ByteLevel":return new ByteLevelPostProcessor(e);case"RobertaProcessing":return new RobertaProcessing(e);case"BertProcessing":return new BertProcessing(e);case"Sequence":return new PostProcessorSequence(e);default:throw new Error(`Unknown PostProcessor type: ${e.type}`)}}post_process(e,...t){throw Error("post_process should be implemented in subclass.")}_call(e,...t){return this.post_process(e,...t)}}class BertProcessing extends PostProcessor{constructor(e){super(e),this.cls=e.cls[0],this.sep=e.sep[0]}post_process(e,t=null,{add_special_tokens:_e=!0}={}){_e&&(e=mergeArrays([this.cls],e,[this.sep]));let Te=new Array(e.length).fill(0);if(t!==null){const Ee=_e&&this instanceof RobertaProcessing?[this.sep]:[],xe=_e?[this.sep]:[];e=mergeArrays(e,Ee,t,xe),Te=mergeArrays(Te,new Array(t.length+Ee.length+xe.length).fill(1))}return{tokens:e,token_type_ids:Te}}}class RobertaProcessing extends BertProcessing{}class TemplateProcessing extends PostProcessor{constructor(e){super(e),this.single=e.single,this.pair=e.pair}post_process(e,t=null,{add_special_tokens:_e=!0}={}){const Te=t===null?this.single:this.pair;let Ee=[],xe=[];for(const Pe of Te)"SpecialToken"in Pe?_e&&(Ee.push(Pe.SpecialToken.id),xe.push(Pe.SpecialToken.type_id)):"Sequence"in Pe&&(Pe.Sequence.id==="A"?(Ee=mergeArrays(Ee,e),xe=mergeArrays(xe,new Array(e.length).fill(Pe.Sequence.type_id))):Pe.Sequence.id==="B"&&(Ee=mergeArrays(Ee,t),xe=mergeArrays(xe,new Array(t.length).fill(Pe.Sequence.type_id))));return{tokens:Ee,token_type_ids:xe}}}class ByteLevelPostProcessor extends PostProcessor{post_process(e,t=null){return t&&(e=mergeArrays(e,t)),{tokens:e}}}class PostProcessorSequence extends PostProcessor{constructor(e){super(e),this.processors=e.processors.map(t=>PostProcessor.fromConfig(t))}post_process(e,t=null,_e={}){let Te;for(const Ee of this.processors)if(Ee instanceof ByteLevelPostProcessor)e=Ee.post_process(e).tokens,t&&(t=Ee.post_process(t).tokens);else{const xe=Ee.post_process(e,t,_e);e=xe.tokens,Te=xe.token_type_ids}return{tokens:e,token_type_ids:Te}}}class Decoder extends Callable{constructor(e){super(),this.config=e,this.added_tokens=[],this.end_of_word_suffix=null,this.trim_offsets=e.trim_offsets}static fromConfig(e){if(e===null)return null;switch(e.type){case"WordPiece":return new WordPieceDecoder(e);case"Metaspace":return new MetaspaceDecoder(e);case"ByteLevel":return new ByteLevelDecoder(e);case"Replace":return new ReplaceDecoder(e);case"ByteFallback":return new ByteFallback(e);case"Fuse":return new FuseDecoder(e);case"Strip":return new StripDecoder(e);case"Sequence":return new DecoderSequence(e);case"CTC":return new CTCDecoder(e);case"BPEDecoder":return new BPEDecoder(e);default:throw new Error(`Unknown Decoder type: ${e.type}`)}}_call(e){return this.decode(e)}decode(e){return this.decode_chain(e).join("")}decode_chain(e){throw Error("`decode_chain` should be implemented in subclass.")}}class ReplaceDecoder extends Decoder{decode_chain(e){const t=createPattern(this.config.pattern);return t===null?e:e.map(_e=>_e.replaceAll(t,this.config.content))}}class ByteFallback extends Decoder{constructor(e){super(e),this.text_decoder=new TextDecoder}decode_chain(e){const t=[];let _e=[];for(const Te of e){let Ee=null;if(Te.length===6&&Te.startsWith("<0x")&&Te.endsWith(">")){const xe=parseInt(Te.slice(3,5),16);isNaN(xe)||(Ee=xe)}if(Ee!==null)_e.push(Ee);else{if(_e.length>0){const xe=this.text_decoder.decode(Uint8Array.from(_e));t.push(xe),_e=[]}t.push(Te)}}if(_e.length>0){const Te=this.text_decoder.decode(Uint8Array.from(_e));t.push(Te),_e=[]}return t}}class FuseDecoder extends Decoder{decode_chain(e){return[e.join("")]}}class StripDecoder extends Decoder{constructor(e){super(e),this.content=this.config.content,this.start=this.config.start,this.stop=this.config.stop}decode_chain(e){return e.map(t=>{let _e=0;for(let Ee=0;Ee<this.start&&t[Ee]===this.content;++Ee){_e=Ee+1;continue}let Te=t.length;for(let Ee=0;Ee<this.stop;++Ee){const xe=t.length-Ee-1;if(t[xe]===this.content){Te=xe;continue}else break}return t.slice(_e,Te)})}}class WordPieceDecoder extends Decoder{constructor(e){super(e),this.cleanup=e.cleanup}decode_chain(e){return e.map((t,_e)=>(_e!==0&&(t.startsWith(this.config.prefix)?t=t.replace(this.config.prefix,""):t=" "+t),this.cleanup&&(t=clean_up_tokenization(t)),t))}}class ByteLevelDecoder extends Decoder{constructor(e){super(e),this.byte_decoder=UNICODE_TO_BYTES,this.text_decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0}),this.end_of_word_suffix=null}convert_tokens_to_string(e){const t=e.join(""),_e=new Uint8Array([...t].map(Ee=>this.byte_decoder[Ee]));return this.text_decoder.decode(_e)}decode_chain(e){const t=[];let _e=[];for(const Te of e)this.added_tokens.find(Ee=>Ee.content===Te)!==void 0?(_e.length>0&&(t.push(this.convert_tokens_to_string(_e)),_e=[]),t.push(Te)):_e.push(Te);return _e.length>0&&t.push(this.convert_tokens_to_string(_e)),t}}class CTCDecoder extends Decoder{constructor(e){super(e),this.pad_token=this.config.pad_token,this.word_delimiter_token=this.config.word_delimiter_token,this.cleanup=this.config.cleanup}convert_tokens_to_string(e){if(e.length===0)return"";const t=[e[0]];for(let Ee=1;Ee<e.length;++Ee)e[Ee]!==t.at(-1)&&t.push(e[Ee]);let Te=t.filter(Ee=>Ee!==this.pad_token).join("");return this.cleanup&&(Te=clean_up_tokenization(Te).replaceAll(this.word_delimiter_token," ").trim()),Te}decode_chain(e){return[this.convert_tokens_to_string(e)]}}class DecoderSequence extends Decoder{constructor(e){super(e),this.decoders=e.decoders.map(t=>Decoder.fromConfig(t))}decode_chain(e){return this.decoders.reduce((t,_e)=>_e.decode_chain(t),e)}}class BPEDecoder extends Decoder{constructor(e){super(e),this.suffix=this.config.suffix}decode_chain(e){return e.map((t,_e)=>t.replaceAll(this.suffix,_e===e.length-1?"":" "))}}class VitsDecoder extends Decoder{decode_chain(e){let t="";for(let _e=1;_e<e.length;_e+=2)t+=e[_e];return[t]}}class MetaspacePreTokenizer extends PreTokenizer{constructor(e){super(),this.addPrefixSpace=e.add_prefix_space,this.replacement=e.replacement,this.strRep=e.str_rep||this.replacement,this.prepend_scheme=e.prepend_scheme??"always"}pre_tokenize_text(e,{section_index:t=void 0}={}){let _e=e.replaceAll(" ",this.strRep);return this.addPrefixSpace&&!_e.startsWith(this.replacement)&&(this.prepend_scheme==="always"||this.prepend_scheme==="first"&&t===0)&&(_e=this.strRep+_e),[_e]}}class MetaspaceDecoder extends Decoder{constructor(e){super(e),this.addPrefixSpace=e.add_prefix_space,this.replacement=e.replacement}decode_chain(e){const t=[];for(let _e=0;_e<e.length;++_e){let Te=e[_e].replaceAll(this.replacement," ");this.addPrefixSpace&&_e==0&&Te.startsWith(" ")&&(Te=Te.substring(1)),t.push(Te)}return t}}class Precompiled extends Normalizer{constructor(e){super(e),this.charsmap=e.precompiled_charsmap}normalize(e){return e=e.replace(/[\u0001-\u0008\u000B\u000E-\u001F\u007F\u008F\u009F]/gm,""),e=e.replace(/[\u0009\u000A\u000C\u000D\u1680\u200B\u200C\u200E\u200F\u2028\u2029\u2581\uFEFF\uFFFD]/gm," "),e.includes("～")?e=e.split("～").map(_e=>_e.normalize("NFKC")).join("～"):e=e.normalize("NFKC"),e}}class PreTokenizerSequence extends PreTokenizer{constructor(e){super(),this.tokenizers=e.pretokenizers.map(t=>PreTokenizer.fromConfig(t))}pre_tokenize_text(e,t){return this.tokenizers.reduce((_e,Te)=>Te.pre_tokenize(_e,t),[e])}}class WhitespacePreTokenizer extends PreTokenizer{constructor(e){super()}pre_tokenize_text(e,t){return e.match(/\w+|[^\w\s]+/g)||[]}}class WhitespaceSplit extends PreTokenizer{constructor(e){super()}pre_tokenize_text(e,t){return whitespace_split(e)}}class ReplacePreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.pattern=createPattern(this.config.pattern),this.content=this.config.content}pre_tokenize_text(e,t){return this.pattern===null?[e]:[e.replaceAll(this.pattern,this.config.content)]}}const SPECIAL_TOKEN_ATTRIBUTES=["bos_token","eos_token","unk_token","sep_token","pad_token","cls_token","mask_token"];function padHelper(r,e,t,_e){for(const Te of Object.keys(r)){const Ee=e-r[Te].length,xe=t(Te),Pe=new Array(Ee).fill(xe);r[Te]=_e==="right"?mergeArrays(r[Te],Pe):mergeArrays(Pe,r[Te])}}function truncateHelper(r,e){for(const t of Object.keys(r))r[t].length=e}class PreTrainedTokenizer extends Callable{return_token_type_ids=!1;_default_chat_template=`{% for message in messages %}{{'<|im_start|>' + message['role'] + '
' + message['content'] + '<|im_end|>' + '
'}}{% endfor %}{% if add_generation_prompt %}{{ '<|im_start|>assistant
' }}{% endif %}`;constructor(e,t){super(),this._tokenizer_config=t,this.normalizer=Normalizer.fromConfig(e.normalizer),this.pre_tokenizer=PreTokenizer.fromConfig(e.pre_tokenizer),this.model=TokenizerModel.fromConfig(e.model,t),this.post_processor=PostProcessor.fromConfig(e.post_processor),this.decoder=Decoder.fromConfig(e.decoder),this.special_tokens=[],this.all_special_ids=[],this.added_tokens=[];for(const _e of e.added_tokens){const Te=new AddedToken(_e);this.added_tokens.push(Te),this.model.tokens_to_ids.set(Te.content,Te.id),this.model.vocab[Te.id]=Te.content,Te.special&&(this.special_tokens.push(Te.content),this.all_special_ids.push(Te.id))}if(this.additional_special_tokens=t.additional_special_tokens??[],this.special_tokens.push(...this.additional_special_tokens),this.special_tokens=[...new Set(this.special_tokens)],this.decoder&&(this.decoder.added_tokens=this.added_tokens,this.decoder.end_of_word_suffix=this.model.end_of_word_suffix),this.added_tokens_regex=this.added_tokens.length>0?new RegExp(this.added_tokens.map(_e=>`${_e.lstrip?"\\s*":""}(${escapeRegExp(_e.content)})${_e.rstrip?"\\s*":""}`).join("|")):null,this.mask_token=this.getToken("mask_token"),this.mask_token_id=this.model.tokens_to_ids.get(this.mask_token),this.pad_token=this.getToken("pad_token","eos_token"),this.pad_token_id=this.model.tokens_to_ids.get(this.pad_token),this.sep_token=this.getToken("sep_token"),this.sep_token_id=this.model.tokens_to_ids.get(this.sep_token),this.unk_token=this.getToken("unk_token"),this.unk_token_id=this.model.tokens_to_ids.get(this.unk_token),this.model_max_length=t.model_max_length,this.remove_space=t.remove_space,this.clean_up_tokenization_spaces=t.clean_up_tokenization_spaces??!0,this.do_lowercase_and_remove_accent=t.do_lowercase_and_remove_accent??!1,this.padding_side="right",this.legacy=!1,this.chat_template=t.chat_template??null,Array.isArray(this.chat_template)){const _e=Object.create(null);for(const{name:Te,template:Ee}of this.chat_template){if(typeof Te!="string"||typeof Ee!="string")throw new Error('Chat template must be a list of objects with "name" and "template" properties');_e[Te]=Ee}this.chat_template=_e}this._compiled_template_cache=new Map}getToken(...e){for(const t of e){const _e=this._tokenizer_config[t];if(_e)if(typeof _e=="object"){if(_e.__type==="AddedToken")return _e.content;throw Error(`Unknown token: ${_e}`)}else return _e}return null}static async from_pretrained(e,{progress_callback:t=null,config:_e=null,cache_dir:Te=null,local_files_only:Ee=!1,revision:xe="main",legacy:Pe=null}={}){const Re=await loadTokenizer(e,{progress_callback:t,cache_dir:Te,local_files_only:Ee,revision:xe,legacy:Pe});return new this(...Re)}_call(e,{text_pair:t=null,add_special_tokens:_e=!0,padding:Te=!1,truncation:Ee=null,max_length:xe=null,return_tensor:Pe=!0,return_token_type_ids:Re=null}={}){const ke=Array.isArray(e);let Ce;if(ke){if(e.length===0)throw Error("text array must be non-empty");if(t!==null){if(Array.isArray(t)){if(e.length!==t.length)throw Error("text and text_pair must have the same length")}else throw Error("text_pair must also be an array");Ce=e.map((Ae,Ie)=>this._encode_plus(Ae,t[Ie],{add_special_tokens:_e,return_token_type_ids:Re}))}else Ce=e.map(Ae=>this._encode_plus(Ae,null,{add_special_tokens:_e,return_token_type_ids:Re}))}else{if(e==null)throw Error("text may not be null or undefined");if(Array.isArray(t))throw Error("When specifying `text_pair`, since `text` is a string, `text_pair` must also be a string (i.e., not an array).");Ce=[this._encode_plus(e,t,{add_special_tokens:_e,return_token_type_ids:Re})]}if(xe===null?Te==="max_length"?xe=this.model_max_length:xe=max(Ce.map(Ae=>Ae.input_ids.length))[0]:Ee||console.warn("Truncation was not explicitly activated but `max_length` is provided a specific value, please use `truncation=true` to explicitly truncate examples to max length."),xe=Math.min(xe,this.model_max_length),Te||Ee)for(let Ae=0;Ae<Ce.length;++Ae)Ce[Ae].input_ids.length!==xe&&(Ce[Ae].input_ids.length>xe?Ee&&truncateHelper(Ce[Ae],xe):Te&&padHelper(Ce[Ae],xe,Ie=>Ie==="input_ids"?this.pad_token_id:0,this.padding_side));const Se={};if(Pe){if(!(Te&&Ee)&&Ce.some(Ie=>{for(const Me of Object.keys(Ie))if(Ie[Me].length!==Ce[0][Me]?.length)return!0;return!1}))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=true' and 'truncation=true' to have batched tensors with the same length.");const Ae=[Ce.length,Ce[0].input_ids.length];for(const Ie of Object.keys(Ce[0]))Se[Ie]=new Tensor("int64",BigInt64Array.from(Ce.flatMap(Me=>Me[Ie]).map(BigInt)),Ae)}else{for(const Ae of Object.keys(Ce[0]))Se[Ae]=Ce.map(Ie=>Ie[Ae]);if(!ke)for(const Ae of Object.keys(Se))Se[Ae]=Se[Ae][0]}return Se}_encode_text(e){return e===null?null:(this.added_tokens_regex?e.split(this.added_tokens_regex).filter(Te=>Te):[e]).map((Te,Ee)=>{if(this.added_tokens.find(Pe=>Pe.content===Te)!==void 0)return Te;{if(this.remove_space===!0&&(Te=Te.trim().split(/\s+/).join(" ")),this.do_lowercase_and_remove_accent&&(Te=lowercase_and_remove_accent(Te)),this.normalizer!==null&&(Te=this.normalizer(Te)),Te.length===0)return[];const Pe=this.pre_tokenizer!==null?this.pre_tokenizer(Te,{section_index:Ee}):[Te];return this.model(Pe)}}).flat()}_encode_plus(e,t=null,{add_special_tokens:_e=!0,return_token_type_ids:Te=null}={}){const Ee=this._encode_text(e),xe=this._encode_text(t),Pe=this.post_processor?this.post_processor(Ee,xe,{add_special_tokens:_e}):{tokens:mergeArrays(Ee??[],xe??[])},Re=this.model.convert_tokens_to_ids(Pe.tokens),ke={input_ids:Re,attention_mask:new Array(Re.length).fill(1)};return(Te??this.return_token_type_ids)&&Pe.token_type_ids&&(ke.token_type_ids=Pe.token_type_ids),ke}encode(e,t=null,{add_special_tokens:_e=!0,return_token_type_ids:Te=null}={}){const{input_ids:Ee}=this._encode_plus(e,t,{add_special_tokens:_e,return_token_type_ids:Te});return Ee}batch_decode(e,t={}){return e instanceof Tensor&&(e=e.tolist()),e.map(_e=>this.decode(_e,t))}decode(e,t={}){if(e instanceof Tensor&&(e=prepareTensorForDecode(e)),!Array.isArray(e)||e.length===0||!isIntegralNumber(e[0]))throw Error("token_ids must be a non-empty array of integers.");return this.decode_single(e,t)}decode_single(e,{skip_special_tokens:t=!1,clean_up_tokenization_spaces:_e=null}){let Te=this.model.convert_ids_to_tokens(e);t&&(Te=Te.filter(xe=>!this.special_tokens.includes(xe)));let Ee=this.decoder?this.decoder(Te):Te.join(" ");return this.decoder&&this.decoder.end_of_word_suffix&&(Ee=Ee.replaceAll(this.decoder.end_of_word_suffix," "),t&&(Ee=Ee.trim())),(_e??this.clean_up_tokenization_spaces)&&(Ee=clean_up_tokenization(Ee)),Ee}get default_chat_template(){return this._warned_about_chat_template||(console.warn("No chat template is defined for this tokenizer - using a default chat template that implements the ChatML format. If the default is not appropriate for your model, please set `tokenizer.chat_template` to an appropriate template. See https://huggingface.co/docs/transformers/main/chat_templating for more information."),this._warned_about_chat_template=!0),this._default_chat_template}apply_chat_template(e,{chat_template:t=null,add_generation_prompt:_e=!1,tokenize:Te=!0,padding:Ee=!1,truncation:xe=!1,max_length:Pe=null,return_tensor:Re=!0,tokenizer_kwargs:ke={},...Ce}={}){if(this.chat_template&&typeof this.chat_template=="object"||this.chat_template===null&&this.default_chat_template&&typeof this.default_chat_template=="object"){const Me=this.chat_template??this.default_chat_template;if(t!==null&&Object.hasOwn(Me,t))t=Me[t];else if(t===null&&"default"in Me)t=Me.default;else if(t===null)throw Error(`This model has multiple chat templates with no default specified! Please either pass a chat template or the name of the template you wish to use to the 'chat_template' argument. Available template names are ${Object.keys(Me).sort()}.`)}else t??=this.chat_template??this.default_chat_template;if(typeof t!="string")throw Error(`chat_template must be a string, but got ${typeof t}`);let Se=this._compiled_template_cache.get(t);Se===void 0&&(Se=new Template(t),this._compiled_template_cache.set(t,Se));const Ae=Object.create(null);for(const Me of SPECIAL_TOKEN_ATTRIBUTES){const Fe=this.getToken(Me);Fe&&(Ae[Me]=Fe)}const Ie=Se.render({messages:e,add_generation_prompt:_e,...Ae,...Ce});return Te?this._call(Ie,{add_special_tokens:!1,padding:Ee,truncation:xe,max_length:Pe,return_tensor:Re,...ke}).input_ids:Ie}}class BertTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class AlbertTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class MobileBertTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class SqueezeBertTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class DebertaTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class DebertaV2Tokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class HerbertTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class ConvBertTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class RoFormerTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class DistilBertTokenizer extends PreTrainedTokenizer{}class CamembertTokenizer extends PreTrainedTokenizer{}class XLMTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0;constructor(e,t){super(e,t),console.warn('WARNING: `XLMTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}}class ElectraTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class T5Tokenizer extends PreTrainedTokenizer{}class GPT2Tokenizer extends PreTrainedTokenizer{_default_chat_template='{% for message in messages %}" "{{ message.content }}{{ eos_token }}" "{% endfor %}'}class BartTokenizer extends PreTrainedTokenizer{}class MBartTokenizer extends PreTrainedTokenizer{constructor(e,t){super(e,t),this.languageRegex=/^[a-z]{2}_[A-Z]{2}$/,this.language_codes=this.special_tokens.filter(_e=>this.languageRegex.test(_e)),this.lang_to_token=_e=>_e}_build_translation_inputs(e,t,_e){return _build_translation_inputs(this,e,t,_e)}}class MBart50Tokenizer extends MBartTokenizer{}class RobertaTokenizer extends PreTrainedTokenizer{}class BloomTokenizer extends GPT2Tokenizer{constructor(e,t){const _e=".,!?…。，、।۔،",Te=e.pre_tokenizer?.pretokenizers[0]?.pattern;Te&&Te.Regex===` ?[^(\\s|[${_e}])]+`&&(Te.Regex=` ?[^\\s${_e}]+`),super(e,t)}}const SPIECE_UNDERLINE="▁";class LlamaTokenizer extends PreTrainedTokenizer{_default_chat_template=`{% if messages[0]['role'] == 'system' %}{% set loop_messages = messages[1:] %}{% set system_message = messages[0]['content'] %}{% elif USE_DEFAULT_PROMPT == true and not '<<SYS>>' in messages[0]['content'] %}{% set loop_messages = messages %}{% set system_message = 'DEFAULT_SYSTEM_MESSAGE' %}{% else %}{% set loop_messages = messages %}{% set system_message = false %}{% endif %}{% for message in loop_messages %}{% if (message['role'] == 'user') != (loop.index0 % 2 == 0) %}{{ raise_exception('Conversation roles must alternate user/assistant/user/assistant/...') }}{% endif %}{% if loop.index0 == 0 and system_message != false %}{% set content = '<<SYS>>
' + system_message + '
<</SYS>>

' + message['content'] %}{% else %}{% set content = message['content'] %}{% endif %}{% if message['role'] == 'user' %}{{ bos_token + '[INST] ' + content.strip() + ' [/INST]' }}{% elif message['role'] == 'system' %}{{ '<<SYS>>
' + content.strip() + '
<</SYS>>

' }}{% elif message['role'] == 'assistant' %}{{ ' '  + content.strip() + ' ' + eos_token }}{% endif %}{% endfor %}`;DEFAULT_SYSTEM_PROMPT=`You are a helpful, respectful and honest assistant. Always answer as helpfully as possible, while being safe. Your answers should not include any harmful, unethical, racist, sexist, toxic, dangerous, or illegal content. Please ensure that your responses are socially unbiased and positive in nature.

If a question does not make any sense, or is not factually coherent, explain why instead of answering something not correct. If you don't know the answer to a question, please don't share false information.`;constructor(e,t){super(e,t),this.use_default_system_prompt=t.use_default_system_prompt??!1,this.legacy=t.legacy??!0,this.legacy||(this.normalizer=null,this.pre_tokenizer=new MetaspacePreTokenizer({replacement:SPIECE_UNDERLINE,add_prefix_space:!0,prepend_scheme:"first"}))}_encode_text(e){if(e===null)return null;if(this.legacy||e.length===0)return super._encode_text(e);let t=super._encode_text(SPIECE_UNDERLINE+e.replaceAll(SPIECE_UNDERLINE," "));return t.length>1&&t[0]===SPIECE_UNDERLINE&&this.special_tokens.includes(t[1])&&(t=t.slice(1)),t}get default_chat_template(){return super.default_chat_template.replaceAll("USE_DEFAULT_PROMPT",this.use_default_system_prompt?"true":"false").replaceAll("DEFAULT_SYSTEM_MESSAGE",this.DEFAULT_SYSTEM_PROMPT.replaceAll(`
`,"\\n").replaceAll("'","\\'"))}}class CodeLlamaTokenizer extends LlamaTokenizer{}class XLMRobertaTokenizer extends PreTrainedTokenizer{}class MPNetTokenizer extends PreTrainedTokenizer{}class FalconTokenizer extends PreTrainedTokenizer{}class GPTNeoXTokenizer extends PreTrainedTokenizer{}class EsmTokenizer extends PreTrainedTokenizer{}class Qwen2Tokenizer extends PreTrainedTokenizer{}class GemmaTokenizer extends PreTrainedTokenizer{_default_chat_template=`{% if messages[0]['role'] == 'system' %}{{ raise_exception('System role not supported') }}{% endif %}{% for message in messages %}{% if (message['role'] == 'user') != (loop.index0 % 2 == 0) %}{{ raise_exception('Conversation roles must alternate user/assistant/user/assistant/...') }}{% endif %}{% if (message['role'] == 'assistant') %}{% set role = 'model' %}{% else %}{% set role = message['role'] %}{% endif %}{{ '<start_of_turn>' + role + '
' + message['content'] | trim + '<end_of_turn>
' }}{% endfor %}{% if add_generation_prompt %}{{'<start_of_turn>model
'}}{% endif %}`}class Grok1Tokenizer extends PreTrainedTokenizer{}function _build_translation_inputs(r,e,t,_e){if(!("language_codes"in r)||!Array.isArray(r.language_codes))throw new Error("Tokenizer must have `language_codes` attribute set and it should be an array of language ids.");if(!("languageRegex"in r)||!(r.languageRegex instanceof RegExp))throw new Error("Tokenizer must have `languageRegex` attribute set and it should be a regular expression.");if(!("lang_to_token"in r)||typeof r.lang_to_token!="function")throw new Error("Tokenizer must have `lang_to_token` attribute set and it should be a function.");const Te=_e.src_lang,Ee=_e.tgt_lang;if(!r.language_codes.includes(Ee))throw new Error(`Target language code "${Ee}" is not valid. Must be one of: {${r.language_codes.join(", ")}}`);if(Te!==void 0){if(!r.language_codes.includes(Te))throw new Error(`Source language code "${Te}" is not valid. Must be one of: {${r.language_codes.join(", ")}}`);for(const xe of r.post_processor.config.single)if("SpecialToken"in xe&&r.languageRegex.test(xe.SpecialToken.id)){xe.SpecialToken.id=r.lang_to_token(Te);break}}return _e.forced_bos_token_id=r.model.convert_tokens_to_ids([r.lang_to_token(Ee)])[0],r._call(e,t)}class NllbTokenizer extends PreTrainedTokenizer{constructor(e,t){super(e,t),this.languageRegex=/^[a-z]{3}_[A-Z][a-z]{3}$/,this.language_codes=this.special_tokens.filter(_e=>this.languageRegex.test(_e)),this.lang_to_token=_e=>_e}_build_translation_inputs(e,t,_e){return _build_translation_inputs(this,e,t,_e)}}class M2M100Tokenizer extends PreTrainedTokenizer{constructor(e,t){super(e,t),this.languageRegex=/^__[a-z]{2,3}__$/,this.language_codes=this.special_tokens.filter(_e=>this.languageRegex.test(_e)).map(_e=>_e.slice(2,-2)),this.lang_to_token=_e=>`__${_e}__`}_build_translation_inputs(e,t,_e){return _build_translation_inputs(this,e,t,_e)}}const WHISPER_LANGUAGES=[["en","english"],["zh","chinese"],["de","german"],["es","spanish"],["ru","russian"],["ko","korean"],["fr","french"],["ja","japanese"],["pt","portuguese"],["tr","turkish"],["pl","polish"],["ca","catalan"],["nl","dutch"],["ar","arabic"],["sv","swedish"],["it","italian"],["id","indonesian"],["hi","hindi"],["fi","finnish"],["vi","vietnamese"],["he","hebrew"],["uk","ukrainian"],["el","greek"],["ms","malay"],["cs","czech"],["ro","romanian"],["da","danish"],["hu","hungarian"],["ta","tamil"],["no","norwegian"],["th","thai"],["ur","urdu"],["hr","croatian"],["bg","bulgarian"],["lt","lithuanian"],["la","latin"],["mi","maori"],["ml","malayalam"],["cy","welsh"],["sk","slovak"],["te","telugu"],["fa","persian"],["lv","latvian"],["bn","bengali"],["sr","serbian"],["az","azerbaijani"],["sl","slovenian"],["kn","kannada"],["et","estonian"],["mk","macedonian"],["br","breton"],["eu","basque"],["is","icelandic"],["hy","armenian"],["ne","nepali"],["mn","mongolian"],["bs","bosnian"],["kk","kazakh"],["sq","albanian"],["sw","swahili"],["gl","galician"],["mr","marathi"],["pa","punjabi"],["si","sinhala"],["km","khmer"],["sn","shona"],["yo","yoruba"],["so","somali"],["af","afrikaans"],["oc","occitan"],["ka","georgian"],["be","belarusian"],["tg","tajik"],["sd","sindhi"],["gu","gujarati"],["am","amharic"],["yi","yiddish"],["lo","lao"],["uz","uzbek"],["fo","faroese"],["ht","haitian creole"],["ps","pashto"],["tk","turkmen"],["nn","nynorsk"],["mt","maltese"],["sa","sanskrit"],["lb","luxembourgish"],["my","myanmar"],["bo","tibetan"],["tl","tagalog"],["mg","malagasy"],["as","assamese"],["tt","tatar"],["haw","hawaiian"],["ln","lingala"],["ha","hausa"],["ba","bashkir"],["jw","javanese"],["su","sundanese"]],WHISPER_LANGUAGE_MAPPING=new Map(WHISPER_LANGUAGES),WHISPER_TO_LANGUAGE_CODE_MAPPING=new Map([...WHISPER_LANGUAGES.map(([r,e])=>[e,r]),["burmese","my"],["valencian","ca"],["flemish","nl"],["haitian","ht"],["letzeburgesch","lb"],["pushto","ps"],["panjabi","pa"],["moldavian","ro"],["moldovan","ro"],["sinhalese","si"],["castilian","es"]]);class WhisperTokenizer extends PreTrainedTokenizer{_default_chat_template='{% for message in messages %}" "{{ message.content }}{{ eos_token }}" "{% endfor %}';_decode_asr(e,{return_timestamps:t=!1,return_language:_e=!1,time_precision:Te=null,force_full_sequences:Ee=!0}={}){if(Te===null)throw Error("Must specify time_precision");let xe=null;const Pe=t==="word";function Re(){return{language:xe,timestamp:[null,null],text:""}}const ke=[];let Ce=Re(),Se=0;const Ae=this.model.convert_tokens_to_ids(["<|notimestamps|>"])[0]+1;let Ie=[],Me=[],Fe=!1,Ve=null;const je=new Set(this.all_special_ids);for(const He of e){const Xe=He.tokens,Je=Pe?He.token_timestamps:null;let Qe=null,Ke=Ae;if("stride"in He){const[un,fn,mn]=He.stride;if(Se-=fn,Ve=un-mn,fn&&(Ke=fn/Te+Ae),mn)for(let wn=Xe.length-1;wn>=0;--wn){const Pn=Xe[wn];if(Pn>=Ae){if(Qe!==null&&(Pn-Ae)*Te<Ve)break;Qe=Pn}}}let Ye=[],pn=[];for(let un=0;un<Xe.length;++un){const fn=Xe[un];if(je.has(fn)){const mn=this.decode([fn]),wn=WHISPER_LANGUAGE_MAPPING.get(mn.slice(2,-2));if(wn!==void 0){if(xe!==null&&wn!==xe&&!t){Ie.push(Ye);const Pn=this.findLongestCommonSequence(Ie)[0],xn=this.decode(Pn);Ce.text=xn,ke.push(Ce),Ie=[],Ye=[],Ce=Re()}xe=Ce.language=wn}}else if(fn>=Ae){const mn=(fn-Ae)*Te+Se,wn=round(mn,2);if(Qe!==null&&fn>=Qe)Fe=!0;else if(Fe||Ie.length>0&&fn<Ke)Fe=!1;else if(Ce.timestamp[0]===null)Ce.timestamp[0]=wn;else if(wn!==Ce.timestamp[0]){Ce.timestamp[1]=wn,Ie.push(Ye),Pe&&Me.push(pn);const[Pn,xn]=this.findLongestCommonSequence(Ie,Me),In=this.decode(Pn);Ce.text=In,Pe&&(Ce.words=this.collateWordTimestamps(Pn,xn,xe)),ke.push(Ce),Ie=[],Ye=[],Me=[],pn=[],Ce=Re()}}else if(Ye.push(fn),Pe){let mn=round(Je[un]+Se,2),wn;un+1<Je.length?wn=round(Je[un+1]+Se,2):wn=null,pn.push([mn,wn])}}if("stride"in He){const[un,fn,mn]=He.stride;Se+=un-mn}Ye.length>0?(Ie.push(Ye),Pe&&Me.push(pn)):Ie.every(un=>un.length===0)&&(Ce=Re(),Ie=[],Ye=[],Me=[],pn=[])}if(Ie.length>0){if(Ee&&t)throw new Error("Whisper did not predict an ending timestamp, which can happen if audio is cut off in the middle of a word. Also make sure WhisperTimeStampLogitsProcessor was used during generation.");const[He,Xe]=this.findLongestCommonSequence(Ie,Me),Je=this.decode(He);Ce.text=Je,Pe&&(Ce.words=this.collateWordTimestamps(He,Xe,xe)),ke.push(Ce)}let Be=Object.create(null);const qe=ke.map(He=>He.text).join("");if(t||_e){for(let He=0;He<ke.length;++He){const Xe=ke[He];t||delete Xe.timestamp,_e||delete Xe.language}if(Pe){const He=[];for(const Xe of ke)for(const Je of Xe.words)He.push(Je);Be={chunks:He}}else Be={chunks:ke}}return[qe,Be]}findLongestCommonSequence(e,t=null){let _e=e[0],Te=_e.length,Ee=[];const xe=Array.isArray(t)&&t.length>0;let Pe=xe?[]:null,Re=xe?t[0]:null;for(let ke=1;ke<e.length;++ke){const Ce=e[ke];let Se=0,Ae=[Te,Te,0,0];const Ie=Ce.length;for(let He=1;He<Te+Ie;++He){const Xe=He/1e4,Je=Math.max(0,Te-He),Qe=Math.min(Te,Te+Ie-He),Ke=_e.slice(Je,Qe),Ye=Math.max(0,He-Te),pn=Math.min(Ie,He),un=Ce.slice(Ye,pn);if(Ke.length!==un.length)throw new Error("There is a bug within whisper `decode_asr` function, please report it. Dropping to prevent bad inference.");const fn=Ke.filter((wn,Pn)=>wn===un[Pn]).length,mn=fn/He+Xe;fn>1&&mn>Se&&(Se=mn,Ae=[Je,Qe,Ye,pn])}const[Me,Fe,Ve,je]=Ae,Be=Math.floor((Fe+Me)/2),qe=Math.floor((je+Ve)/2);Ee.push(..._e.slice(0,Be)),_e=Ce.slice(qe),Te=_e.length,xe&&(Pe.push(...Re.slice(0,Be)),Re=t[ke].slice(qe))}return Ee.push(..._e),xe?(Pe.push(...Re),[Ee,Pe]):[Ee,[]]}collateWordTimestamps(e,t,_e){const[Te,Ee,xe]=this.combineTokensIntoWords(e,_e),Pe=[];for(let Re=0;Re<Te.length;++Re){const ke=xe[Re];Pe.push({text:Te[Re],timestamp:[t[ke.at(0)][0],t[ke.at(-1)][1]]})}return Pe}combineTokensIntoWords(e,t,_e=`"'“¡¿([{-`,Te=`"'.。,，!！?？:：”)]}、`){t=t??"english";let Ee,xe,Pe;return["chinese","japanese","thai","lao","myanmar"].includes(t)?[Ee,xe,Pe]=this.splitTokensOnUnicode(e):[Ee,xe,Pe]=this.splitTokensOnSpaces(e),this.mergePunctuations(Ee,xe,Pe,_e,Te)}decode(e,t){let _e;return t&&t.decode_with_timestamps?(e instanceof Tensor&&(e=prepareTensorForDecode(e)),_e=this.decodeWithTimestamps(e,t)):_e=super.decode(e,t),_e}decodeWithTimestamps(e,t){const _e=t?.time_precision??.02,Te=Array.from(this.all_special_ids).at(-1)+1;let Ee=[[]];for(const xe of e)if(xe>=Te){const Pe=round((xe-Te)*_e,2);Ee.push(`<|${Pe}|>`),Ee.push([])}else Ee[Ee.length-1].push(xe);return Ee=Ee.map(xe=>typeof xe=="string"?xe:super.decode(xe,t)),Ee.join("")}splitTokensOnUnicode(e){const t=this.decode(e,{decode_with_timestamps:!0}),_e="�",Te=[],Ee=[],xe=[];let Pe=[],Re=[],ke=0;for(let Ce=0;Ce<e.length;++Ce){const Se=e[Ce];Pe.push(Se),Re.push(Ce);const Ae=this.decode(Pe,{decode_with_timestamps:!0});(!Ae.includes(_e)||t[ke+Ae.indexOf(_e)]===_e)&&(Te.push(Ae),Ee.push(Pe),xe.push(Re),Pe=[],Re=[],ke+=Ae.length)}return[Te,Ee,xe]}splitTokensOnSpaces(e){const[t,_e,Te]=this.splitTokensOnUnicode(e),Ee=[],xe=[],Pe=[],Re=new RegExp(`^[${PUNCTUATION_REGEX}]$`,"gu");for(let ke=0;ke<t.length;++ke){const Ce=t[ke],Se=_e[ke],Ae=Te[ke],Ie=Se[0]>=this.model.tokens_to_ids.get("<|endoftext|>"),Me=Ce.startsWith(" "),Fe=Ce.trim(),Ve=Re.test(Fe);if(Ie||Me||Ve||Ee.length===0)Ee.push(Ce),xe.push(Se),Pe.push(Ae);else{const je=Ee.length-1;Ee[je]+=Ce,xe[je].push(...Se),Pe[je].push(...Ae)}}return[Ee,xe,Pe]}mergePunctuations(e,t,_e,Te,Ee){const xe=structuredClone(e),Pe=structuredClone(t),Re=structuredClone(_e);let ke=xe.length-2,Ce=xe.length-1;for(;ke>=0;)xe[ke].startsWith(" ")&&Te.includes(xe[ke].trim())?(xe[Ce]=xe[ke]+xe[Ce],Pe[Ce]=mergeArrays(Pe[ke],Pe[Ce]),Re[Ce]=mergeArrays(Re[ke],Re[Ce]),xe[ke]="",Pe[ke]=[],Re[ke]=[]):Ce=ke,--ke;for(ke=0,Ce=1;Ce<xe.length;)!xe[ke].endsWith(" ")&&Ee.includes(xe[Ce])?(xe[ke]+=xe[Ce],Pe[ke]=mergeArrays(Pe[ke],Pe[Ce]),Re[ke]=mergeArrays(Re[ke],Re[Ce]),xe[Ce]="",Pe[Ce]=[],Re[Ce]=[]):ke=Ce,++Ce;return[xe.filter(Se=>Se),Pe.filter(Se=>Se.length>0),Re.filter(Se=>Se.length>0)]}get_decoder_prompt_ids({language:e=null,task:t=null,no_timestamps:_e=!0}={}){const Te=[];if(e){e=e.toLowerCase();let Ee=WHISPER_TO_LANGUAGE_CODE_MAPPING.get(e);if(Ee===void 0)if(WHISPER_LANGUAGE_MAPPING.has(e))Ee=e;else{const Re=e.length===2?WHISPER_LANGUAGE_MAPPING.keys():WHISPER_LANGUAGE_MAPPING.values();throw new Error(`Language "${e}" is not supported. Must be one of: ${JSON.stringify(Re)}`)}const xe=this.model.tokens_to_ids.get(`<|${Ee}|>`);if(xe===void 0)throw new Error(`Unable to find language "${Ee}" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.`);Te.push(xe)}else Te.push(null);if(t){if(t=t.toLowerCase(),t!=="transcribe"&&t!=="translate")throw new Error(`Task "${t}" is not supported. Must be one of: ["transcribe", "translate"]`);const Ee=this.model.tokens_to_ids.get(`<|${t}|>`);if(Ee===void 0)throw new Error(`Unable to find task "${t}" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.`);Te.push(Ee)}else Te.push(null);if(_e){const Ee=this.model.tokens_to_ids.get("<|notimestamps|>");if(Ee===void 0)throw new Error('Unable to find "<|notimestamps|>" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.');Te.push(Ee)}return Te.map((Ee,xe)=>[xe+1,Ee]).filter(Ee=>Ee[1]!==null)}}class CodeGenTokenizer extends PreTrainedTokenizer{}class CLIPTokenizer extends PreTrainedTokenizer{}class SiglipTokenizer extends PreTrainedTokenizer{}class MarianTokenizer extends PreTrainedTokenizer{constructor(e,t){super(e,t),this.languageRegex=/^(>>\w+<<)\s*/g,this.supported_language_codes=this.model.vocab.filter(_e=>this.languageRegex.test(_e)),console.warn('WARNING: `MarianTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}_encode_text(e){if(e===null)return null;const[t,..._e]=e.trim().split(this.languageRegex);if(_e.length===0)return super._encode_text(t);if(_e.length===2){const[Te,Ee]=_e;return this.supported_language_codes.includes(Te)||console.warn(`Unsupported language code "${Te}" detected, which may lead to unexpected behavior. Should be one of: ${JSON.stringify(this.supported_language_codes)}`),mergeArrays([Te],super._encode_text(Ee))}}}class Wav2Vec2CTCTokenizer extends PreTrainedTokenizer{}class BlenderbotTokenizer extends PreTrainedTokenizer{_default_chat_template="{% for message in messages %}{% if message['role'] == 'user' %}{{ ' ' }}{% endif %}{{ message['content'] }}{% if not loop.last %}{{ '  ' }}{% endif %}{% endfor %}{{ eos_token }}"}class BlenderbotSmallTokenizer extends BlenderbotTokenizer{}class SpeechT5Tokenizer extends PreTrainedTokenizer{}class NougatTokenizer extends PreTrainedTokenizer{}class VitsTokenizer extends PreTrainedTokenizer{constructor(e,t){super(e,t),this.decoder=new VitsDecoder({})}}class CohereTokenizer extends PreTrainedTokenizer{}class AutoTokenizer{static TOKENIZER_CLASS_MAPPING={T5Tokenizer,DistilBertTokenizer,CamembertTokenizer,DebertaTokenizer,DebertaV2Tokenizer,BertTokenizer,HerbertTokenizer,ConvBertTokenizer,RoFormerTokenizer,XLMTokenizer,ElectraTokenizer,MobileBertTokenizer,SqueezeBertTokenizer,AlbertTokenizer,GPT2Tokenizer,BartTokenizer,MBartTokenizer,MBart50Tokenizer,RobertaTokenizer,WhisperTokenizer,CodeGenTokenizer,CLIPTokenizer,SiglipTokenizer,MarianTokenizer,BloomTokenizer,NllbTokenizer,M2M100Tokenizer,LlamaTokenizer,CodeLlamaTokenizer,XLMRobertaTokenizer,MPNetTokenizer,FalconTokenizer,GPTNeoXTokenizer,EsmTokenizer,Wav2Vec2CTCTokenizer,BlenderbotTokenizer,BlenderbotSmallTokenizer,SpeechT5Tokenizer,NougatTokenizer,VitsTokenizer,Qwen2Tokenizer,GemmaTokenizer,Grok1Tokenizer,CohereTokenizer,PreTrainedTokenizer};static async from_pretrained(e,{quantized:t=!0,progress_callback:_e=null,config:Te=null,cache_dir:Ee=null,local_files_only:xe=!1,revision:Pe="main",legacy:Re=null}={}){const[ke,Ce]=await loadTokenizer(e,{progress_callback:_e,cache_dir:Ee,local_files_only:xe,revision:Pe,legacy:Re}),Se=Ce.tokenizer_class?.replace(/Fast$/,"")??"PreTrainedTokenizer";let Ae=this.TOKENIZER_CLASS_MAPPING[Se];return Ae||(console.warn(`Unknown tokenizer class "${Se}", attempting to construct from base class.`),Ae=PreTrainedTokenizer),new Ae(ke,Ce)}}async function loadConfig(r,e){return await getModelJSON(r,"config.json",!0,e)}class PretrainedConfig{constructor(e){this.model_type=null,this.is_encoder_decoder=!1,Object.assign(this,e)}static async from_pretrained(e,{progress_callback:t=null,config:_e=null,cache_dir:Te=null,local_files_only:Ee=!1,revision:xe="main"}={}){let Pe=_e??await loadConfig(e,{progress_callback:t,cache_dir:Te,local_files_only:Ee,revision:xe});return new this(Pe)}}class AutoConfig{static async from_pretrained(...e){return PretrainedConfig.from_pretrained(...e)}}class LogitsProcessorList extends Callable{constructor(){super(),this.processors=[]}push(e){this.processors.push(e)}extend(e){this.processors.push(...e)}_call(e,t){for(let _e of t)this.processors.forEach(Te=>Te(e,_e))}[Symbol.iterator](){return this.processors.values()}}class LogitsProcessor extends Callable{_call(e,t){throw Error("`_call` should be implemented in a subclass")}}class ForceTokensLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.force_token_map=Object.fromEntries(e??[])}_call(e,t){let _e=this.force_token_map[e.length];return exists(_e)&&(t.data.fill(-1/0),t.data[_e]=0),t}}class ForcedBOSTokenLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.bos_token_id=e}_call(e,t){return e.length===1&&(t.data.fill(-1/0),t.data[this.bos_token_id]=0),t}}class ForcedEOSTokenLogitsProcessor extends LogitsProcessor{constructor(e,t){super(),this.max_length=e,this.forced_eos_token_id=t}_call(e,t){}}class SuppressTokensAtBeginLogitsProcessor extends LogitsProcessor{constructor(e,t){super(),this.begin_suppress_tokens=e,this.begin_index=t}_call(e,t){if(e.length===this.begin_index)for(let _e of this.begin_suppress_tokens)t.data[_e]=-1/0;return t}}class WhisperTimeStampLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.eos_token_id=e.eos_token_id,this.no_timestamps_token_id=e.no_timestamps_token_id,this.timestamp_begin=this.no_timestamps_token_id+1,this.begin_index=(e.forced_decoder_ids||[]).length+2,e.forced_decoder_ids.slice(-1)[0][1]===this.no_timestamps_token_id&&(this.begin_index-=1),this.max_initial_timestamp_index=e.max_initial_timestamp_index}_call(e,t){const _e=t.data;if(_e[this.no_timestamps_token_id]=-1/0,e.length===this.begin_index-1)return _e.fill(-1/0),_e[this.timestamp_begin]=0,t;const Te=e.slice(this.begin_index),Ee=Te.length>=1&&Te[Te.length-1]>=this.timestamp_begin,xe=Te.length<2||Te[Te.length-2]>=this.timestamp_begin;if(Ee&&(xe?_e.subarray(this.timestamp_begin).fill(-1/0):_e.subarray(0,this.eos_token_id).fill(-1/0)),e.length===this.begin_index&&this.max_initial_timestamp_index!==null){const Ce=this.timestamp_begin+this.max_initial_timestamp_index;_e.subarray(Ce+1).fill(-1/0)}const Pe=log_softmax(_e),Re=Math.log(Pe.subarray(this.timestamp_begin).map(Math.exp).reduce((Ce,Se)=>Ce+Se)),ke=max(Pe.subarray(0,this.timestamp_begin))[0];return Re>ke&&_e.subarray(0,this.timestamp_begin).fill(-1/0),t}}class NoRepeatNGramLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.no_repeat_ngram_size=e}getNgrams(e){const t=e.length,_e=[];for(let Ee=0;Ee<t+1-this.no_repeat_ngram_size;++Ee){const xe=[];for(let Pe=0;Pe<this.no_repeat_ngram_size;++Pe)xe.push(e[Ee+Pe]);_e.push(xe)}const Te=new Map;for(const Ee of _e){const xe=Ee.slice(0,Ee.length-1),Pe=JSON.stringify(xe),Re=Te.get(Pe)??[];Re.push(Ee[Ee.length-1]),Te.set(Pe,Re)}return Te}getGeneratedNgrams(e,t){const _e=t.slice(t.length+1-this.no_repeat_ngram_size,t.length);return e.get(JSON.stringify(_e))??[]}calcBannedNgramTokens(e){const t=[];if(e.length+1<this.no_repeat_ngram_size)return t;{const _e=this.getNgrams(e);return this.getGeneratedNgrams(_e,e)}}_call(e,t){const _e=this.calcBannedNgramTokens(e);for(const Te of _e)t.data[Te]=-1/0;return t}}class RepetitionPenaltyLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.penalty=e}_call(e,t){for(const _e of e)t.data[_e]<0?t.data[_e]*=this.penalty:t.data[_e]/=this.penalty;return t}}class MinLengthLogitsProcessor extends LogitsProcessor{constructor(e,t){super(),this.min_length=e,this.eos_token_id=Array.isArray(t)?t:[t]}_call(e,t){if(e.length<this.min_length)for(const _e of this.eos_token_id)t.data[_e]=-1/0;return t}}class MinNewTokensLengthLogitsProcessor extends LogitsProcessor{constructor(e,t,_e){super(),this.prompt_length_to_skip=e,this.min_new_tokens=t,this.eos_token_id=Array.isArray(_e)?_e:[_e]}_call(e,t){if(e.length-this.prompt_length_to_skip<this.min_new_tokens)for(const Te of this.eos_token_id)t.data[Te]=-1/0;return t}}class NoBadWordsLogitsProcessor extends LogitsProcessor{constructor(e,t){super(),this.bad_words_ids=e,this.eos_token_id=Array.isArray(t)?t:[t]}_call(e,t){for(const _e of this.bad_words_ids){let Te=!0;for(let Ee=1;Ee<=_e.length-1&&_e.length<e.length;++Ee)if(_e.at(-Ee-1)!==e.at(-Ee)){Te=!1;break}Te&&(t.data[_e.at(-1)]=-1/0)}return t}}const GenerationConfig=class{constructor(r={}){this.max_length=r.max_length??20,this.max_new_tokens=r.max_new_tokens??null,this.min_length=r.min_length??0,this.min_new_tokens=r.min_new_tokens??null,this.early_stopping=r.early_stopping??!1,this.max_time=r.max_time??null,this.do_sample=r.do_sample??!1,this.num_beams=r.num_beams??1,this.num_beam_groups=r.num_beam_groups??1,this.penalty_alpha=r.penalty_alpha??null,this.use_cache=r.use_cache??!0,this.temperature=r.temperature??1,this.top_k=r.top_k??50,this.top_p=r.top_p??1,this.typical_p=r.typical_p??1,this.epsilon_cutoff=r.epsilon_cutoff??0,this.eta_cutoff=r.eta_cutoff??0,this.diversity_penalty=r.diversity_penalty??0,this.repetition_penalty=r.repetition_penalty??1,this.encoder_repetition_penalty=r.encoder_repetition_penalty??1,this.length_penalty=r.length_penalty??1,this.no_repeat_ngram_size=r.no_repeat_ngram_size??0,this.bad_words_ids=r.bad_words_ids??null,this.force_words_ids=r.force_words_ids??null,this.renormalize_logits=r.renormalize_logits??!1,this.constraints=r.constraints??null,this.forced_bos_token_id=r.forced_bos_token_id??null,this.forced_eos_token_id=r.forced_eos_token_id??null,this.remove_invalid_values=r.remove_invalid_values??!1,this.exponential_decay_length_penalty=r.exponential_decay_length_penalty??null,this.suppress_tokens=r.suppress_tokens??null,this.begin_suppress_tokens=r.begin_suppress_tokens??null,this.forced_decoder_ids=r.forced_decoder_ids??null,this.num_return_sequences=r.num_return_sequences??1,this.output_attentions=r.output_attentions??!1,this.output_hidden_states=r.output_hidden_states??!1,this.output_scores=r.output_scores??!1,this.return_dict_in_generate=r.return_dict_in_generate??!1,this.pad_token_id=r.pad_token_id??null,this.bos_token_id=r.bos_token_id??null,this.eos_token_id=r.eos_token_id??null,this.encoder_no_repeat_ngram_size=r.encoder_no_repeat_ngram_size??0,this.decoder_start_token_id=r.decoder_start_token_id??null,this.generation_kwargs=r.generation_kwargs??{}}};class Sampler extends Callable{constructor(e){super(),this.generation_config=e}_call(e,t=-1){return this.sample(e,t)}sample(e,t){throw Error("sample should be implemented in subclasses.")}getLogits(e,t){let _e=e.dims.at(-1),Te=e.data;if(t===-1)Te=Te.slice(-_e);else{let Ee=t*_e;Te=Te.slice(Ee,Ee+_e)}return this.generation_config.temperature>0&&(Te=Te.map(Ee=>Ee/this.generation_config.temperature)),Te}randomSelect(e){let t=e.reduce((Te,Ee)=>Te+Ee,0),_e=Math.random()*t;for(let Te=0;Te<e.length;++Te)if(_e-=e[Te],_e<=0)return Te;return 0}static getSampler(e){if(e.do_sample)return new MultinomialSampler(e);if(e.num_beams>1)return new BeamSearchSampler(e);if(e.num_return_sequences>1)throw Error(`num_return_sequences has to be 1 when doing greedy search, but is ${e.num_return_sequences}.`);return new GreedySampler(e)}}class GreedySampler extends Sampler{sample(e,t=-1){let _e=this.getLogits(e,t);return[[max(_e)[1],0]]}}class MultinomialSampler extends Sampler{sample(e,t=-1){let _e=e.dims.at(-1);this.generation_config.top_k>0&&(_e=Math.min(this.generation_config.top_k,_e));const Te=this.getLogits(e,t),Ee=getTopItems(Te,_e),xe=softmax(Ee.map(Pe=>Pe[1]));return Array.from({length:this.generation_config.num_beams},()=>{const Pe=this.randomSelect(xe);return[Ee[Pe][0],Math.log(xe[Pe])]})}}class BeamSearchSampler extends Sampler{sample(e,t=-1){let _e=e.dims.at(-1);this.generation_config.top_k>0&&(_e=Math.min(this.generation_config.top_k,_e));const Te=this.getLogits(e,t),Ee=getTopItems(Te,_e),xe=softmax(Ee.map(Pe=>Pe[1]));return Array.from({length:this.generation_config.num_beams},(Pe,Re)=>[Ee[Re][0],Math.log(xe[Re])])}}const{InferenceSession,Tensor:ONNXTensor,env}=ONNX,MODEL_TYPES={EncoderOnly:0,EncoderDecoder:1,Seq2Seq:2,Vision2Seq:3,DecoderOnly:4,MaskGeneration:5},MODEL_TYPE_MAPPING=new Map,MODEL_NAME_TO_CLASS_MAPPING=new Map,MODEL_CLASS_TO_NAME_MAPPING=new Map;async function constructSession(r,e,t){let _e=`onnx/${e}${t.quantized?"_quantized":""}.onnx`,Te=await getModelFile(r,_e,!0,t);try{return await InferenceSession.create(Te,{executionProviders})}catch(Ee){if(executionProviders.length===1&&executionProviders[0]==="wasm")throw Ee;return console.warn(Ee),console.warn("Something went wrong during model construction (most likely a missing operation). Using `wasm` as a fallback. "),await InferenceSession.create(Te,{executionProviders:["wasm"]})}}function validateInputs(r,e){const t=Object.create(null),_e=[];for(const xe of r.inputNames){const Pe=e[xe];if(!(Pe instanceof Tensor)){_e.push(xe);continue}t[xe]=env.wasm.proxy?Pe.clone():Pe}if(_e.length>0)throw new Error(`An error occurred during model execution: "Missing the following inputs: ${_e.join(", ")}.`);const Te=Object.keys(e).length,Ee=r.inputNames.length;if(Te>Ee){let xe=Object.keys(e).filter(Pe=>!r.inputNames.includes(Pe));console.warn(`WARNING: Too many inputs were provided (${Te} > ${Ee}). The following inputs will be ignored: "${xe.join(", ")}".`)}return t}async function sessionRun(r,e){const t=validateInputs(r,e);try{let _e=await r.run(t);return _e=replaceTensors(_e),_e}catch(_e){throw console.error(`An error occurred during model execution: "${_e}".`),console.error("Inputs given to model:",t),_e}}function replaceTensors(r){for(let e in r)r[e]instanceof ONNXTensor?r[e]=new Tensor(r[e]):typeof r[e]=="object"&&replaceTensors(r[e]);return r}function toI64Tensor(r){if(r instanceof Tensor)return r;if(r.length===0)throw Error("items must be non-empty");if(Array.isArray(r[0])){if(r.some(e=>e.length!==r[0].length))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=True' and/or 'truncation=True' to have batched tensors with the same length.");return new Tensor("int64",BigInt64Array.from(r.flat().map(e=>BigInt(e))),[r.length,r[0].length])}else return new Tensor("int64",BigInt64Array.from(r.map(e=>BigInt(e))),[1,r.length])}function prepareAttentionMask(r,e){let t=r.config.pad_token_id??null,_e=r.config.eos_token_id??null;isIntegralNumber(_e)&&(_e=[_e]);let Te=e.indexOf(t)!==-1,Ee=_e===null||!_e.includes(t);if(Te&&Ee){let xe=BigInt64Array.from(e.data.map(Pe=>Pe!=t));return new Tensor("int64",xe,e.dims)}else return ones_like(e)}function preparePositionIds(r,e,t){if(!r.inputNames.includes("position_ids"))return;const _e=new BigInt64Array(e.attention_mask.data.length);for(let Te=0;Te<e.attention_mask.dims[0];++Te){let Ee=Te*e.attention_mask.dims[1],xe=BigInt(0);for(let Pe=0;Pe<e.attention_mask.dims[1];++Pe){const Re=Ee+Pe;e.attention_mask.data[Re]===0n?_e[Re]=BigInt(1):(_e[Re]=xe,xe+=e.attention_mask.data[Re])}}e.position_ids=new Tensor("int64",_e,e.attention_mask.dims),t&&(e.position_ids=e.position_ids.slice(null,-1).unsqueeze_(-1))}function boolTensor(r){return new Tensor("bool",[r],[1])}async function seq2seqForward(r,e){let{encoder_outputs:t,past_key_values:_e}=e;t||(t=(await encoderForward(r,e)).last_hidden_state);let Te={input_ids:e.decoder_input_ids,encoder_hidden_states:t};const Ee=!!_e;r.decoder_merged_session.inputNames.includes("use_cache_branch")&&(Te.use_cache_branch=boolTensor(Ee)),r.decoder_merged_session.inputNames.includes("encoder_attention_mask")&&(Te.encoder_attention_mask=e.attention_mask),preparePositionIds(r.decoder_merged_session,Te,Ee),r.addPastKeyValues(Te,_e);const xe=await sessionRun(r.decoder_merged_session,Te);let Pe=xe.logits;_e=r.getPastKeyValues(xe,_e);const Re=r.getAttentions(xe);return new Seq2SeqLMOutput({logits:Pe,past_key_values:_e,encoder_outputs:t,...Re})}function seq2seqStartBeams(r,e,t,_e){let Te=[],Ee=0;const xe=r.requires_attention_mask??!0;let Pe=t.decoder_input_ids??t.decoder_start_token_id??t.bos_token_id??t.eos_token_id;Pe instanceof Tensor?Pe=Pe.tolist().flat():Array.isArray(Pe)||(Pe=[Pe]);for(let Re of e){Re.dims=[1,...Re.dims];let ke={inputs:Re,encoder_outputs:null,prev_model_outputs:null,output_token_ids:Pe,done:!1,score:0,id:Ee++};xe&&(ke.attention_mask=prepareAttentionMask(r,Re)),Te.push(ke)}return Te}async function seq2seqRunBeam(r,e){const t=r.main_input_name;let _e=e.output_token_ids;e.prev_model_outputs&&(_e=_e.slice(-1));let Te={[t]:e.inputs,decoder_input_ids:toI64Tensor(_e),encoder_outputs:e.encoder_outputs,past_key_values:e.prev_model_outputs?.past_key_values};e.attention_mask&&(Te.attention_mask=e.attention_mask);let Ee=await r.forward(Te);return e.prev_model_outputs=Ee,e.encoder_outputs=Ee.encoder_outputs,Ee}function seq2seqUpdatebeam(r,e){r.output_token_ids=[...r.output_token_ids,e]}async function encoderForward(r,e){const t=Object.create(null);for(const _e of r.session.inputNames)t[_e]=e[_e];return r.session.inputNames.includes("token_type_ids")&&!t.token_type_ids&&(t.token_type_ids=new Tensor("int64",new BigInt64Array(t.input_ids.data.length),t.input_ids.dims)),await sessionRun(r.session,t)}async function decoderForward(r,e){let{input_ids:t,past_key_values:_e,attention_mask:Te}=e,Ee={input_ids:t,attention_mask:Te??prepareAttentionMask(r,t)};const xe=!!_e;r.session.inputNames.includes("use_cache_branch")&&(Ee.use_cache_branch=boolTensor(xe)),preparePositionIds(r.session,Ee,xe),r.addPastKeyValues(Ee,_e);let Pe=await sessionRun(r.session,Ee),Re=Pe.logits;return _e=r.getPastKeyValues(Pe,_e),{logits:Re,past_key_values:_e}}function decoderStartBeams(r,e,t,_e,Te){let Ee=[],xe=0;for(let Pe of e){let Re=Pe.tolist().map(Number);Pe.dims=[1,...Pe.dims];let ke;Te?(ke=Te[xe],ke.dims=[1,...ke.dims]):ke=prepareAttentionMask(r,Pe);let Ce={input:Pe,model_input_ids:Pe,attention_mask:ke,prev_model_outputs:null,output_token_ids:Re,num_output_tokens:_e,done:!1,score:0,id:xe++};Ee.push(Ce)}return Ee}async function decoderRunBeam(r,e){let t=new BigInt64Array(e.output_token_ids.length).fill(1n),_e={input_ids:e.model_input_ids,attention_mask:new Tensor("int64",t,[1,t.length]),past_key_values:e.prev_model_outputs?.past_key_values},Te=await r.forward(_e);return e.prev_model_outputs=Te,Te}function decoderUpdatebeam(r,e){r.output_token_ids=[...r.output_token_ids,e],r.model_input_ids=new Tensor("int64",[BigInt(e)],[1,1])}class PreTrainedModel extends Callable{main_input_name="input_ids";constructor(e,t){super(),this.config=e,this.session=t;const _e=MODEL_CLASS_TO_NAME_MAPPING.get(this.constructor),Te=MODEL_TYPE_MAPPING.get(_e);this.can_generate=!1,this._runBeam=null,this._getStartBeams=null,this._updateBeam=null,this._forward=null,Te===MODEL_TYPES.DecoderOnly?(this.can_generate=!0,this._runBeam=decoderRunBeam,this._getStartBeams=decoderStartBeams,this._updateBeam=decoderUpdatebeam,this._forward=decoderForward):Te===MODEL_TYPES.Seq2Seq||Te===MODEL_TYPES.Vision2Seq?(this.can_generate=!0,this._runBeam=seq2seqRunBeam,this._getStartBeams=seq2seqStartBeams,this._updateBeam=seq2seqUpdatebeam,this._forward=seq2seqForward):Te===MODEL_TYPES.EncoderDecoder?this._forward=encoderForward:this._forward=encoderForward}async dispose(){const e=[];for(let t of Object.keys(this)){const _e=this[t];_e instanceof InferenceSession&&e.push(_e.handler.dispose())}return await Promise.all(e)}static async from_pretrained(e,{quantized:t=!0,progress_callback:_e=null,config:Te=null,cache_dir:Ee=null,local_files_only:xe=!1,revision:Pe="main",model_file_name:Re=null}={}){let ke={quantized:t,progress_callback:_e,config:Te,cache_dir:Ee,local_files_only:xe,revision:Pe,model_file_name:Re};const Ce=MODEL_CLASS_TO_NAME_MAPPING.get(this),Se=MODEL_TYPE_MAPPING.get(Ce);let Ae;return Se===MODEL_TYPES.DecoderOnly?Ae=await Promise.all([AutoConfig.from_pretrained(e,ke),constructSession(e,ke.model_file_name??"decoder_model_merged",ke),getModelJSON(e,"generation_config.json",!1,ke)]):Se===MODEL_TYPES.Seq2Seq||Se===MODEL_TYPES.Vision2Seq?Ae=await Promise.all([AutoConfig.from_pretrained(e,ke),constructSession(e,"encoder_model",ke),constructSession(e,"decoder_model_merged",ke),getModelJSON(e,"generation_config.json",!1,ke)]):Se===MODEL_TYPES.MaskGeneration?Ae=await Promise.all([AutoConfig.from_pretrained(e,ke),constructSession(e,"vision_encoder",ke),constructSession(e,"prompt_encoder_mask_decoder",ke)]):Se===MODEL_TYPES.EncoderDecoder?Ae=await Promise.all([AutoConfig.from_pretrained(e,ke),constructSession(e,"encoder_model",ke),constructSession(e,"decoder_model_merged",ke)]):(Se!==MODEL_TYPES.EncoderOnly&&console.warn(`Model type for '${Ce??Te?.model_type}' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.`),Ae=await Promise.all([AutoConfig.from_pretrained(e,ke),constructSession(e,ke.model_file_name??"model",ke)])),new this(...Ae)}async _call(e){return await this.forward(e)}async forward(e){return await this._forward(this,e)}_get_logits_processor(e,t,_e=null){const Te=new LogitsProcessorList;if(e.repetition_penalty!==null&&e.repetition_penalty!==1&&Te.push(new RepetitionPenaltyLogitsProcessor(e.repetition_penalty)),e.no_repeat_ngram_size!==null&&e.no_repeat_ngram_size>0&&Te.push(new NoRepeatNGramLogitsProcessor(e.no_repeat_ngram_size)),e.bad_words_ids!==null&&Te.push(new NoBadWordsLogitsProcessor(e.bad_words_ids,e.eos_token_id)),e.min_length!==null&&e.eos_token_id!==null&&e.min_length>0&&Te.push(new MinLengthLogitsProcessor(e.min_length,e.eos_token_id)),e.min_new_tokens!==null&&e.eos_token_id!==null&&e.min_new_tokens>0&&Te.push(new MinNewTokensLengthLogitsProcessor(t,e.min_new_tokens,e.eos_token_id)),e.forced_bos_token_id!==null&&Te.push(new ForcedBOSTokenLogitsProcessor(e.forced_bos_token_id)),e.forced_eos_token_id!==null&&Te.push(new ForcedEOSTokenLogitsProcessor(e.max_length,e.forced_eos_token_id)),e.begin_suppress_tokens!==null){let Ee=t>1||e.forced_bos_token_id===null?t:t+1;e.forced_decoder_ids!==null&&(Ee+=e.forced_decoder_ids[e.forced_decoder_ids.length-1][0]),Te.push(new SuppressTokensAtBeginLogitsProcessor(e.begin_suppress_tokens,Ee))}return e.forced_decoder_ids!==null&&Te.push(new ForceTokensLogitsProcessor(e.forced_decoder_ids)),_e!==null&&Te.extend(_e),Te}_get_generation_config(e){let t=new GenerationConfig(this.config);return"generation_config"in this&&Object.assign(t,this.generation_config),e!==null&&Object.assign(t,e),t}async generate(e,t=null,_e=null,{inputs_attention_mask:Te=null}={}){if(!this.can_generate){let Ve=`The current model class (${MODEL_CLASS_TO_NAME_MAPPING.get(this.constructor)}) is not compatible with \`.generate()\`, as it doesn't have a language model head.`;const je=this.config.model_type,Be=MODEL_WITH_LM_HEAD_MAPPING_NAMES.get(je)??MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES.get(je)??MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES.get(je)??MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES.get(je);throw Be&&(Ve+=` Please use the following class instead: '${Be[0]}'`),Error(Ve)}if(!(e instanceof Tensor)&&!isTypedArray(e)&&!Array.isArray(e))throw Error(`\`inputs\` must be a Tensor, TypedArray, or Array, but is "${e.constructor.name}".`);let Ee;if(this.config.is_encoder_decoder)Ee=0;else if(Ee=e instanceof Tensor?e.dims.at(-1):e.length,Ee===0)throw Error("Must supply a non-empty array of input token ids.");t=this._get_generation_config(t),_e=_e??new LogitsProcessorList,_e=this._get_logits_processor(t,Ee,_e);let xe=t.eos_token_id;xe!==null&&!Array.isArray(xe)&&(xe=[xe]);let Pe=1;const Re=Pe+(t.max_new_tokens??1/0),ke=Number.isInteger(t.max_length)&&(t.max_new_tokens??null)===null;let Ce=Sampler.getSampler(t),Se=this.getStartBeams(e,t,Pe,Te);for(;Se.some(Fe=>!Fe.done)&&Pe<Re;){let Fe=[];for(let Ve of Se){if(Ve.done){Fe.push(Ve);continue}if(ke&&Ve.output_token_ids.length>=t.max_length){Ve.done=!0,Fe.push(Ve);continue}let je=await this.runBeam(Ve);t.output_attentions&&this.addAttentionsToBeam(Ve,je),t.output_scores;let Be=je.logits.slice(null,-1,null);_e(Ve.output_token_ids,Be);let qe=Ce(Be);for(let[He,Xe]of qe){let Je={...Ve};this.updateBeam(Je,He),Je.score+=Xe,xe&&xe.includes(He)&&(Je.done=!0),Fe.push(Je)}}++Pe,Fe=this.groupBeams(Fe).map(Ve=>Ve.sort((je,Be)=>Be.score-je.score).slice(0,t.num_beams)),Se=Fe.flat(),t.callback_function&&t.callback_function(Se)}const Ae=this.groupBeams(Se),Ie=Fe=>Ae.map(Ve=>t.num_return_sequences>1?Ve.slice(0,t.num_return_sequences).map(je=>je[Fe]):[Ve[0][Fe]]).flat(),Me=Ie("output_token_ids");if(t.return_dict_in_generate){const Fe=Ie("decoder_attentions"),Ve=Ie("cross_attentions");return{sequences:Me,decoder_attentions:Fe,cross_attentions:Ve}}else return Me}addAttentionsToBeam(e,t){if(this.config.is_encoder_decoder){if(!t.cross_attentions||t.cross_attentions.length===0)throw Error("`output_attentions` is true, but the model did not produce cross-attentions. This is most likely because the model was not exported with `output_attentions=True`.");e.cross_attentions||(e.cross_attentions=[]),e.cross_attentions.push(t.cross_attentions)}if(!t.decoder_attentions||t.decoder_attentions.length===0)throw Error("`output_attentions` is true, but the model did not produce decoder-attentions. This is most likely because the model was not exported with `output_attentions=True`.");e.decoder_attentions||(e.decoder_attentions=[]),e.decoder_attentions.push(t.decoder_attentions)}groupBeams(e){const t=Object.create(null);for(const _e of e)t[_e.id]===void 0?t[_e.id]=[_e]:t[_e.id].push(_e);return Object.values(t)}getPastKeyValues(e,t){const _e=Object.create(null);for(const Te in e)if(Te.startsWith("present")){let Ee=Te.replace("present","past_key_values");t&&Te.includes("encoder")?_e[Ee]=t[Ee]:_e[Ee]=e[Te]}return _e}getAttentions(e){const t=Object.create(null);for(const _e of["cross_attentions","decoder_attentions"]){const Te=[];for(const Ee in e)if(Ee.startsWith(_e)){const xe=Ee.split(".").pop();Te[xe]=e[Ee]}t[_e]=Te}return t}addPastKeyValues(e,t){if(t)Object.assign(e,t);else if(this.config.is_encoder_decoder&&(this.add_encoder_pkv??!0)){let Te=[1,this.num_encoder_heads,0,this.encoder_dim_kv],Ee=[1,this.num_decoder_heads,0,this.decoder_dim_kv];for(let xe=0;xe<this.num_decoder_layers;++xe)e[`past_key_values.${xe}.encoder.key`]=new Tensor("float32",[],Te),e[`past_key_values.${xe}.encoder.value`]=new Tensor("float32",[],Te),e[`past_key_values.${xe}.decoder.key`]=new Tensor("float32",[],Ee),e[`past_key_values.${xe}.decoder.value`]=new Tensor("float32",[],Ee)}else if(this.config.model_type==="falcon"){let Te=[1*this.num_heads,0,this.dim_kv];for(let Ee=0;Ee<this.num_layers;++Ee)e[`past_key_values.${Ee}.key`]=new Tensor("float32",[],Te),e[`past_key_values.${Ee}.value`]=new Tensor("float32",[],Te)}else if(this.config.multi_query){let Te=[1*this.num_heads,0,2*this.dim_kv];for(let Ee=0;Ee<this.num_layers;++Ee)e[`past_key_values.${Ee}.key_value`]=new Tensor("float32",[],Te)}else if(this.config.model_type==="bloom"){let Te=[1*this.num_heads,this.dim_kv,0],Ee=[1*this.num_heads,0,this.dim_kv];for(let xe=0;xe<this.num_layers;++xe)e[`past_key_values.${xe}.key`]=new Tensor("float32",[],Te),e[`past_key_values.${xe}.value`]=new Tensor("float32",[],Ee)}else{let Te=[1,this.num_heads,0,this.dim_kv];for(let Ee=0;Ee<this.num_layers;++Ee)e[`past_key_values.${Ee}.key`]=new Tensor("float32",[],Te),e[`past_key_values.${Ee}.value`]=new Tensor("float32",[],Te)}}getStartBeams(e,t,_e,Te){return this._getStartBeams(this,e,t,_e,Te)}async runBeam(e){return await this._runBeam(this,e)}updateBeam(e,t){return this._updateBeam(e,t)}}class ModelOutput{}class BertPreTrainedModel extends PreTrainedModel{}class BertModel extends BertPreTrainedModel{}class BertForMaskedLM extends BertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class BertForSequenceClassification extends BertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class BertForTokenClassification extends BertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class BertForQuestionAnswering extends BertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class NomicBertPreTrainedModel extends PreTrainedModel{}class NomicBertModel extends NomicBertPreTrainedModel{}class RoFormerPreTrainedModel extends PreTrainedModel{}class RoFormerModel extends RoFormerPreTrainedModel{}class RoFormerForMaskedLM extends RoFormerPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class RoFormerForSequenceClassification extends RoFormerPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class RoFormerForTokenClassification extends RoFormerPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class RoFormerForQuestionAnswering extends RoFormerPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class ConvBertPreTrainedModel extends PreTrainedModel{}class ConvBertModel extends ConvBertPreTrainedModel{}class ConvBertForMaskedLM extends ConvBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class ConvBertForSequenceClassification extends ConvBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ConvBertForTokenClassification extends ConvBertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class ConvBertForQuestionAnswering extends ConvBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class ElectraPreTrainedModel extends PreTrainedModel{}class ElectraModel extends ElectraPreTrainedModel{}class ElectraForMaskedLM extends ElectraPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class ElectraForSequenceClassification extends ElectraPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ElectraForTokenClassification extends ElectraPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class ElectraForQuestionAnswering extends ElectraPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class CamembertPreTrainedModel extends PreTrainedModel{}class CamembertModel extends CamembertPreTrainedModel{}class CamembertForMaskedLM extends CamembertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class CamembertForSequenceClassification extends CamembertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class CamembertForTokenClassification extends CamembertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class CamembertForQuestionAnswering extends CamembertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DebertaPreTrainedModel extends PreTrainedModel{}class DebertaModel extends DebertaPreTrainedModel{}class DebertaForMaskedLM extends DebertaPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class DebertaForSequenceClassification extends DebertaPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DebertaForTokenClassification extends DebertaPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class DebertaForQuestionAnswering extends DebertaPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DebertaV2PreTrainedModel extends PreTrainedModel{}class DebertaV2Model extends DebertaV2PreTrainedModel{}class DebertaV2ForMaskedLM extends DebertaV2PreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class DebertaV2ForSequenceClassification extends DebertaV2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DebertaV2ForTokenClassification extends DebertaV2PreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class DebertaV2ForQuestionAnswering extends DebertaV2PreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DistilBertPreTrainedModel extends PreTrainedModel{}class DistilBertModel extends DistilBertPreTrainedModel{}class DistilBertForSequenceClassification extends DistilBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DistilBertForTokenClassification extends DistilBertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class DistilBertForQuestionAnswering extends DistilBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DistilBertForMaskedLM extends DistilBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class EsmPreTrainedModel extends PreTrainedModel{}class EsmModel extends EsmPreTrainedModel{}class EsmForMaskedLM extends EsmPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class EsmForSequenceClassification extends EsmPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class EsmForTokenClassification extends EsmPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class MobileBertPreTrainedModel extends PreTrainedModel{}class MobileBertModel extends MobileBertPreTrainedModel{}class MobileBertForMaskedLM extends MobileBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class MobileBertForSequenceClassification extends MobileBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MobileBertForQuestionAnswering extends MobileBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class MPNetPreTrainedModel extends PreTrainedModel{}class MPNetModel extends MPNetPreTrainedModel{}class MPNetForMaskedLM extends MPNetPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class MPNetForSequenceClassification extends MPNetPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MPNetForTokenClassification extends MPNetPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class MPNetForQuestionAnswering extends MPNetPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class SqueezeBertPreTrainedModel extends PreTrainedModel{}class SqueezeBertModel extends SqueezeBertPreTrainedModel{}class SqueezeBertForMaskedLM extends SqueezeBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class SqueezeBertForSequenceClassification extends SqueezeBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class SqueezeBertForQuestionAnswering extends SqueezeBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class AlbertPreTrainedModel extends PreTrainedModel{}class AlbertModel extends AlbertPreTrainedModel{}class AlbertForSequenceClassification extends AlbertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class AlbertForQuestionAnswering extends AlbertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class AlbertForMaskedLM extends AlbertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class T5PreTrainedModel extends PreTrainedModel{}class T5Model extends T5PreTrainedModel{}class T5ForConditionalGeneration extends T5PreTrainedModel{constructor(e,t,_e,Te){super(e,t),this.decoder_merged_session=_e,this.generation_config=Te,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class LongT5PreTrainedModel extends PreTrainedModel{}class LongT5Model extends LongT5PreTrainedModel{}class LongT5ForConditionalGeneration extends LongT5PreTrainedModel{constructor(e,t,_e,Te){super(e,t),this.decoder_merged_session=_e,this.generation_config=Te,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class MT5PreTrainedModel extends PreTrainedModel{}class MT5Model extends MT5PreTrainedModel{}class MT5ForConditionalGeneration extends MT5PreTrainedModel{constructor(e,t,_e,Te){super(e,t),this.decoder_merged_session=_e,this.generation_config=Te,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class BartPretrainedModel extends PreTrainedModel{}class BartModel extends BartPretrainedModel{}class BartForConditionalGeneration extends BartPretrainedModel{constructor(e,t,_e,Te){super(e,t),this.decoder_merged_session=_e,this.generation_config=Te,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BartForSequenceClassification extends BartPretrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MBartPreTrainedModel extends PreTrainedModel{}class MBartModel extends MBartPreTrainedModel{}class MBartForConditionalGeneration extends MBartPreTrainedModel{constructor(e,t,_e,Te){super(e,t),this.decoder_merged_session=_e,this.generation_config=Te,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class MBartForSequenceClassification extends MBartPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MBartForCausalLM extends MBartPreTrainedModel{constructor(e,t,_e){super(e,t),this.generation_config=_e,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BlenderbotPreTrainedModel extends PreTrainedModel{}class BlenderbotModel extends BlenderbotPreTrainedModel{}class BlenderbotForConditionalGeneration extends BlenderbotPreTrainedModel{constructor(e,t,_e,Te){super(e,t),this.decoder_merged_session=_e,this.generation_config=Te,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BlenderbotSmallPreTrainedModel extends PreTrainedModel{}class BlenderbotSmallModel extends BlenderbotSmallPreTrainedModel{}class BlenderbotSmallForConditionalGeneration extends BlenderbotSmallPreTrainedModel{constructor(e,t,_e,Te){super(e,t),this.decoder_merged_session=_e,this.generation_config=Te,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class RobertaPreTrainedModel extends PreTrainedModel{}class RobertaModel extends RobertaPreTrainedModel{}class RobertaForMaskedLM extends RobertaPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class RobertaForSequenceClassification extends RobertaPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class RobertaForTokenClassification extends RobertaPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class RobertaForQuestionAnswering extends RobertaPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class XLMPreTrainedModel extends PreTrainedModel{}class XLMModel extends XLMPreTrainedModel{}class XLMWithLMHeadModel extends XLMPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class XLMForSequenceClassification extends XLMPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class XLMForTokenClassification extends XLMPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class XLMForQuestionAnswering extends XLMPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class XLMRobertaPreTrainedModel extends PreTrainedModel{}class XLMRobertaModel extends XLMRobertaPreTrainedModel{}class XLMRobertaForMaskedLM extends XLMRobertaPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class XLMRobertaForSequenceClassification extends XLMRobertaPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class XLMRobertaForTokenClassification extends XLMRobertaPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class XLMRobertaForQuestionAnswering extends XLMRobertaPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class ASTPreTrainedModel extends PreTrainedModel{}class ASTModel extends ASTPreTrainedModel{}class ASTForAudioClassification extends ASTPreTrainedModel{}class WhisperPreTrainedModel extends PreTrainedModel{}class WhisperModel extends WhisperPreTrainedModel{}class WhisperForConditionalGeneration extends WhisperPreTrainedModel{requires_attention_mask=!1;main_input_name="input_features";constructor(e,t,_e,Te){super(e,t),this.decoder_merged_session=_e,this.generation_config=Te,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}async generate(e,t=null,_e=null){if(t=this._get_generation_config(t),t.return_timestamps??=!1,t.return_timestamps&&(_e=[new WhisperTimeStampLogitsProcessor(t)]),t.return_token_timestamps&&(t.output_attentions=!0,t.return_dict_in_generate=!0,t.task==="translate"&&console.warn("Token-level timestamps may not be reliable for task 'translate'."),!t.alignment_heads))throw new Error("Model generation config has no `alignment_heads`, token-level timestamps not available. See https://gist.github.com/hollance/42e32852f24243b748ae6bc1f985b13a on how to add this property to the generation config.");const Te=await super.generate(e,t,_e);return t.return_token_timestamps&&t.alignment_heads&&(Te.token_timestamps=this._extract_token_timestamps(Te,t.alignment_heads,t.num_frames)),Te}_extract_token_timestamps(e,t,_e=null,Te=.02){if(!e.cross_attentions)throw new Error("Model outputs must contain cross attentions to extract timestamps. This is most likely because the model was not exported with `output_attentions=True`.");let Ee=this.config.median_filter_width;Ee===void 0&&(console.warn("Model config has no `median_filter_width`, using default value of 7."),Ee=7);const xe=e.cross_attentions.map(ke=>{let Ce=Array.from({length:this.config.decoder_layers},(Ve,je)=>cat(ke.map(Be=>Be[je]),2)),Se=stack(t.map(([Ve,je])=>_e?Ce[Ve].slice(null,je,null,[0,_e]):Ce[Ve].slice(null,je)));Se=Se.transpose(1,0,2,3);let[Ae,Ie]=std_mean(Se,-2,0,!0),Me=Se.clone();for(let Ve=0;Ve<Me.dims[0];++Ve){let je=Me[Ve];for(let Be=0;Be<je.dims[0];++Be){let qe=je[Be];const He=Ae[Ve][Be][0],Xe=Ie[Ve][Be][0];for(let Je=0;Je<qe.dims[0];++Je){let Qe=qe[Je];for(let Ke=0;Ke<Qe.data.length;++Ke)Qe.data[Ke]=(Qe.data[Ke]-Xe.data[Ke])/He.data[Ke];Qe.data.set(medianFilter(Qe.data,Ee))}}}return mean(Me,1)}),Pe=[e.sequences.length,e.sequences[0].length],Re=new Tensor("float32",new Float32Array(Pe[0]*Pe[1]),Pe);for(let ke=0;ke<Pe[0];++ke){const Ce=xe[ke].neg().squeeze_(0);let[Se,Ae]=dynamicTimeWarping(Ce),Ie=Array.from({length:Se.length-1},(Ve,je)=>Se[je+1]-Se[je]),Me=mergeArrays([1],Ie).map(Ve=>!!Ve),Fe=[];for(let Ve=0;Ve<Me.length;++Ve)Me[Ve]&&Fe.push(Ae[Ve]*Te);Re[ke].data.set(Fe,1)}return Re}}class VisionEncoderDecoderModel extends PreTrainedModel{main_input_name="pixel_values";constructor(e,t,_e,Te){super(e,t),this.decoder_merged_session=_e,this.generation_config=Te;const Ee=this.config.encoder,xe=this.config.decoder,Pe=Ee.model_type;(MODEL_MAPPING_NAMES_ENCODER_ONLY.get(Pe)??MODEL_MAPPING_NAMES_ENCODER_DECODER.get(Pe))||console.warn(`Model type for encoder '${Pe}' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.`);const ke=MODEL_WITH_LM_HEAD_MAPPING_NAMES.get(xe.model_type);if(!ke)throw new Error(`Unable to construct \`VisionEncoderDecoder\` due to unsupported decoder: "${this.config.decoder.model_type}"`);const Ce=ke[1],Se=new Ce(xe,_e,Te);this.add_encoder_pkv="num_decoder_layers"in Se,this.add_encoder_pkv?(this.num_decoder_layers=Se.num_decoder_layers,this.num_decoder_heads=Se.num_decoder_heads,this.decoder_dim_kv=Se.decoder_dim_kv,this.num_encoder_layers=Se.num_encoder_layers,this.num_encoder_heads=Se.num_encoder_heads,this.encoder_dim_kv=Se.encoder_dim_kv):(this.num_layers=Se.num_layers,this.num_heads=Se.num_heads,this.dim_kv=Se.dim_kv)}}class CLIPPreTrainedModel extends PreTrainedModel{}class CLIPModel extends CLIPPreTrainedModel{}class CLIPTextModelWithProjection extends CLIPPreTrainedModel{static async from_pretrained(e,t={}){return t.model_file_name??="text_model",super.from_pretrained(e,t)}}class CLIPVisionModelWithProjection extends CLIPPreTrainedModel{static async from_pretrained(e,t={}){return t.model_file_name??="vision_model",super.from_pretrained(e,t)}}class SiglipPreTrainedModel extends PreTrainedModel{}class SiglipModel extends SiglipPreTrainedModel{}class SiglipTextModel extends SiglipPreTrainedModel{static async from_pretrained(e,t={}){return t.model_file_name??="text_model",super.from_pretrained(e,t)}}class SiglipVisionModel extends CLIPPreTrainedModel{static async from_pretrained(e,t={}){return t.model_file_name??="vision_model",super.from_pretrained(e,t)}}class ChineseCLIPPreTrainedModel extends PreTrainedModel{}class ChineseCLIPModel extends ChineseCLIPPreTrainedModel{}class CLIPSegPreTrainedModel extends PreTrainedModel{}class CLIPSegModel extends CLIPSegPreTrainedModel{}class CLIPSegForImageSegmentation extends CLIPSegPreTrainedModel{}class GPT2PreTrainedModel extends PreTrainedModel{constructor(e,t,_e){super(e,t),this.generation_config=_e,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPT2Model extends GPT2PreTrainedModel{}class GPT2LMHeadModel extends GPT2PreTrainedModel{}class GPTNeoPreTrainedModel extends PreTrainedModel{constructor(e,t,_e){super(e,t),this.generation_config=_e,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_heads,this.num_layers=this.config.num_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class GPTNeoModel extends GPTNeoPreTrainedModel{}class GPTNeoForCausalLM extends GPTNeoPreTrainedModel{}class GPTNeoXPreTrainedModel extends PreTrainedModel{constructor(e,t,_e){super(e,t),this.generation_config=_e,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class GPTNeoXModel extends GPTNeoXPreTrainedModel{}class GPTNeoXForCausalLM extends GPTNeoXPreTrainedModel{}class GPTJPreTrainedModel extends PreTrainedModel{constructor(e,t,_e){super(e,t),this.generation_config=_e,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPTJModel extends GPTJPreTrainedModel{}class GPTJForCausalLM extends GPTJPreTrainedModel{}class GPTBigCodePreTrainedModel extends PreTrainedModel{constructor(e,t,_e){super(e,t),this.generation_config=_e,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPTBigCodeModel extends GPTBigCodePreTrainedModel{}class GPTBigCodeForCausalLM extends GPTBigCodePreTrainedModel{}class CodeGenPreTrainedModel extends PreTrainedModel{constructor(e,t,_e){super(e,t),this.generation_config=_e,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class CodeGenModel extends CodeGenPreTrainedModel{}class CodeGenForCausalLM extends CodeGenPreTrainedModel{}class LlamaPreTrainedModel extends PreTrainedModel{constructor(e,t,_e){super(e,t),this.generation_config=_e,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads??this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class LlamaModel extends LlamaPreTrainedModel{}class LlamaForCausalLM extends LlamaPreTrainedModel{}class Qwen2PreTrainedModel extends PreTrainedModel{constructor(e,t,_e){super(e,t),this.generation_config=_e,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads??this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class Qwen2Model extends Qwen2PreTrainedModel{}class Qwen2ForCausalLM extends Qwen2PreTrainedModel{}class PhiPreTrainedModel extends PreTrainedModel{constructor(e,t,_e){super(e,t),this.generation_config=_e,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class PhiModel extends PhiPreTrainedModel{}class PhiForCausalLM extends PhiPreTrainedModel{}class BloomPreTrainedModel extends PreTrainedModel{constructor(e,t,_e){super(e,t),this.generation_config=_e,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.hidden_size/this.num_heads}}class BloomModel extends BloomPreTrainedModel{}class BloomForCausalLM extends BloomPreTrainedModel{}class MptPreTrainedModel extends PreTrainedModel{constructor(e,t,_e){super(e,t),this.generation_config=_e,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_heads,this.num_layers=this.config.n_layers,this.dim_kv=this.config.d_model/this.num_heads}}class MptModel extends MptPreTrainedModel{}class MptForCausalLM extends MptPreTrainedModel{}class OPTPreTrainedModel extends PreTrainedModel{constructor(e,t,_e){super(e,t),this.generation_config=_e,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class OPTModel extends OPTPreTrainedModel{}class OPTForCausalLM extends OPTPreTrainedModel{}class ViTPreTrainedModel extends PreTrainedModel{}class ViTModel extends ViTPreTrainedModel{}class ViTForImageClassification extends ViTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class FastViTPreTrainedModel extends PreTrainedModel{}class FastViTModel extends FastViTPreTrainedModel{}class FastViTForImageClassification extends FastViTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class VitMattePreTrainedModel extends PreTrainedModel{}class VitMatteForImageMatting extends VitMattePreTrainedModel{async _call(e){return new ImageMattingOutput(await super._call(e))}}class MobileViTPreTrainedModel extends PreTrainedModel{}class MobileViTModel extends MobileViTPreTrainedModel{}class MobileViTForImageClassification extends MobileViTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MobileViTV2PreTrainedModel extends PreTrainedModel{}class MobileViTV2Model extends MobileViTV2PreTrainedModel{}class MobileViTV2ForImageClassification extends MobileViTV2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class OwlViTPreTrainedModel extends PreTrainedModel{}class OwlViTModel extends OwlViTPreTrainedModel{}class OwlViTForObjectDetection extends OwlViTPreTrainedModel{}class Owlv2PreTrainedModel extends PreTrainedModel{}class Owlv2Model extends Owlv2PreTrainedModel{}class Owlv2ForObjectDetection extends Owlv2PreTrainedModel{}class BeitPreTrainedModel extends PreTrainedModel{}class BeitModel extends BeitPreTrainedModel{}class BeitForImageClassification extends BeitPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DetrPreTrainedModel extends PreTrainedModel{}class DetrModel extends DetrPreTrainedModel{}class DetrForObjectDetection extends DetrPreTrainedModel{async _call(e){return new DetrObjectDetectionOutput(await super._call(e))}}class DetrForSegmentation extends DetrPreTrainedModel{async _call(e){return new DetrSegmentationOutput(await super._call(e))}}class DetrObjectDetectionOutput extends ModelOutput{constructor({logits:e,pred_boxes:t}){super(),this.logits=e,this.pred_boxes=t}}class DetrSegmentationOutput extends ModelOutput{constructor({logits:e,pred_boxes:t,pred_masks:_e}){super(),this.logits=e,this.pred_boxes=t,this.pred_masks=_e}}class TableTransformerPreTrainedModel extends PreTrainedModel{}class TableTransformerModel extends TableTransformerPreTrainedModel{}class TableTransformerForObjectDetection extends TableTransformerPreTrainedModel{async _call(e){return new TableTransformerObjectDetectionOutput(await super._call(e))}}class TableTransformerObjectDetectionOutput extends DetrObjectDetectionOutput{}class DeiTPreTrainedModel extends PreTrainedModel{}class DeiTModel extends DeiTPreTrainedModel{}class DeiTForImageClassification extends DeiTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ResNetPreTrainedModel extends PreTrainedModel{}class ResNetModel extends ResNetPreTrainedModel{}class ResNetForImageClassification extends ResNetPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class SwinPreTrainedModel extends PreTrainedModel{}class SwinModel extends SwinPreTrainedModel{}class SwinForImageClassification extends SwinPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class Swin2SRPreTrainedModel extends PreTrainedModel{}class Swin2SRModel extends Swin2SRPreTrainedModel{}class Swin2SRForImageSuperResolution extends Swin2SRPreTrainedModel{}class DPTPreTrainedModel extends PreTrainedModel{}class DPTModel extends DPTPreTrainedModel{}class DPTForDepthEstimation extends DPTPreTrainedModel{}class DepthAnythingPreTrainedModel extends PreTrainedModel{}class DepthAnythingForDepthEstimation extends DepthAnythingPreTrainedModel{}class GLPNPreTrainedModel extends PreTrainedModel{}class GLPNModel extends GLPNPreTrainedModel{}class GLPNForDepthEstimation extends GLPNPreTrainedModel{}class DonutSwinPreTrainedModel extends PreTrainedModel{}class DonutSwinModel extends DonutSwinPreTrainedModel{}class ConvNextPreTrainedModel extends PreTrainedModel{}class ConvNextModel extends ConvNextPreTrainedModel{}class ConvNextForImageClassification extends ConvNextPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ConvNextV2PreTrainedModel extends PreTrainedModel{}class ConvNextV2Model extends ConvNextV2PreTrainedModel{}class ConvNextV2ForImageClassification extends ConvNextV2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class Dinov2PreTrainedModel extends PreTrainedModel{}class Dinov2Model extends Dinov2PreTrainedModel{}class Dinov2ForImageClassification extends Dinov2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class YolosPreTrainedModel extends PreTrainedModel{}class YolosModel extends YolosPreTrainedModel{}class YolosForObjectDetection extends YolosPreTrainedModel{async _call(e){return new YolosObjectDetectionOutput(await super._call(e))}}class YolosObjectDetectionOutput extends ModelOutput{constructor({logits:e,pred_boxes:t}){super(),this.logits=e,this.pred_boxes=t}}class SamPreTrainedModel extends PreTrainedModel{}class SamModel extends SamPreTrainedModel{constructor(e,t,_e){super(e,t),this.prompt_encoder_mask_decoder=_e}async get_image_embeddings({pixel_values:e}){return await encoderForward(this,{pixel_values:e})}async forward(e){if((!e.image_embeddings||!e.image_positional_embeddings)&&(e={...e,...await this.get_image_embeddings(e)}),!e.input_labels){const t=e.input_points.dims.slice(0,-1),_e=t.reduce((Te,Ee)=>Te*Ee,1);e.input_labels=new Tensor("int64",new BigInt64Array(_e).fill(1n),t)}return await sessionRun(this.prompt_encoder_mask_decoder,{input_points:e.input_points,input_labels:e.input_labels,image_embeddings:e.image_embeddings,image_positional_embeddings:e.image_positional_embeddings})}async _call(e){return new SamImageSegmentationOutput(await super._call(e))}}class SamImageSegmentationOutput extends ModelOutput{constructor({iou_scores:e,pred_masks:t}){super(),this.iou_scores=e,this.pred_masks=t}}class MarianPreTrainedModel extends PreTrainedModel{}class MarianModel extends MarianPreTrainedModel{}class MarianMTModel extends MarianPreTrainedModel{constructor(e,t,_e,Te){super(e,t),this.decoder_merged_session=_e,this.generation_config=Te,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class M2M100PreTrainedModel extends PreTrainedModel{}class M2M100Model extends M2M100PreTrainedModel{}class M2M100ForConditionalGeneration extends M2M100PreTrainedModel{constructor(e,t,_e,Te){super(e,t),this.decoder_merged_session=_e,this.generation_config=Te,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class Wav2Vec2PreTrainedModel extends PreTrainedModel{}class Wav2Vec2Model extends Wav2Vec2PreTrainedModel{}class Wav2Vec2ForCTC extends Wav2Vec2PreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class Wav2Vec2ForSequenceClassification extends Wav2Vec2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class Wav2Vec2ForAudioFrameClassification extends Wav2Vec2PreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class UniSpeechPreTrainedModel extends PreTrainedModel{}class UniSpeechModel extends UniSpeechPreTrainedModel{}class UniSpeechForCTC extends UniSpeechPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class UniSpeechForSequenceClassification extends UniSpeechPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class UniSpeechSatPreTrainedModel extends PreTrainedModel{}class UniSpeechSatModel extends UniSpeechSatPreTrainedModel{}class UniSpeechSatForCTC extends UniSpeechSatPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class UniSpeechSatForSequenceClassification extends UniSpeechSatPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class UniSpeechSatForAudioFrameClassification extends UniSpeechSatPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class Wav2Vec2BertPreTrainedModel extends PreTrainedModel{}class Wav2Vec2BertModel extends Wav2Vec2BertPreTrainedModel{}class Wav2Vec2BertForCTC extends Wav2Vec2BertPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class Wav2Vec2BertForSequenceClassification extends Wav2Vec2BertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class HubertModel extends Wav2Vec2PreTrainedModel{}class HubertForCTC extends Wav2Vec2PreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class HubertForSequenceClassification extends Wav2Vec2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class WavLMPreTrainedModel extends PreTrainedModel{}class WavLMModel extends WavLMPreTrainedModel{}class WavLMForCTC extends WavLMPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class WavLMForSequenceClassification extends WavLMPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class WavLMForXVector extends WavLMPreTrainedModel{async _call(e){return new XVectorOutput(await super._call(e))}}class WavLMForAudioFrameClassification extends WavLMPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class SpeechT5PreTrainedModel extends PreTrainedModel{}class SpeechT5ForSpeechToText extends SpeechT5PreTrainedModel{}class SpeechT5ForTextToSpeech extends SpeechT5PreTrainedModel{constructor(e,t,_e,Te){super(e,t),this.decoder_merged_session=_e,this.generation_config=Te,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.hidden_size/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.hidden_size/this.num_encoder_heads}async generate_speech(e,t,{threshold:_e=.5,minlenratio:Te=0,maxlenratio:Ee=20,vocoder:xe=null}={}){const Pe={input_ids:e},{encoder_outputs:Re,encoder_attention_mask:ke}=await encoderForward(this,Pe),Ce=Re.dims[1]/this.config.reduction_factor,Se=Math.floor(Ce*Ee),Ae=Math.floor(Ce*Te),Ie=this.config.num_mel_bins;let Me=[],Fe=null,Ve=null,je=0;for(;;){++je;const He=boolTensor(!!Ve);let Xe;Ve?Xe=Ve.output_sequence_out:Xe=new Tensor("float32",new Float32Array(Ie),[1,1,Ie]);let Je={use_cache_branch:He,output_sequence:Xe,encoder_attention_mask:ke,speaker_embeddings:t,encoder_hidden_states:Re};this.addPastKeyValues(Je,Fe),Ve=await sessionRun(this.decoder_merged_session,Je),Fe=this.getPastKeyValues(Ve,Fe);const{prob:Qe,spectrum:Ke}=Ve;if(Me.push(Ke),je>=Ae&&(Array.from(Qe.data).filter(Ye=>Ye>=_e).length>0||je>=Se))break}const Be=cat(Me),{waveform:qe}=await sessionRun(xe.session,{spectrogram:Be});return{spectrogram:Be,waveform:qe}}}class SpeechT5HifiGan extends PreTrainedModel{main_input_name="spectrogram"}class TrOCRPreTrainedModel extends PreTrainedModel{constructor(e,t,_e){super(e,t),this.generation_config=_e,this.config.pad_token_id=this.config.eos_token_id,this.num_encoder_layers=this.num_decoder_layers=this.config.decoder_layers,this.num_encoder_heads=this.num_decoder_heads=this.config.decoder_attention_heads,this.encoder_dim_kv=this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads}}class TrOCRForCausalLM extends TrOCRPreTrainedModel{}class MistralPreTrainedModel extends PreTrainedModel{constructor(e,t,_e){super(e,t),this.generation_config=_e,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class MistralModel extends MistralPreTrainedModel{}class MistralForCausalLM extends MistralPreTrainedModel{}class Starcoder2PreTrainedModel extends PreTrainedModel{constructor(e,t,_e){super(e,t),this.generation_config=_e,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class Starcoder2Model extends Starcoder2PreTrainedModel{}class Starcoder2ForCausalLM extends Starcoder2PreTrainedModel{}class FalconPreTrainedModel extends PreTrainedModel{constructor(e,t,_e){super(e,t),this.generation_config=_e,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class FalconModel extends FalconPreTrainedModel{}class FalconForCausalLM extends FalconPreTrainedModel{}class ClapPreTrainedModel extends PreTrainedModel{}class ClapModel extends ClapPreTrainedModel{}class ClapTextModelWithProjection extends ClapPreTrainedModel{static async from_pretrained(e,t={}){return t.model_file_name??="text_model",super.from_pretrained(e,t)}}class ClapAudioModelWithProjection extends ClapPreTrainedModel{static async from_pretrained(e,t={}){return t.model_file_name??="audio_model",super.from_pretrained(e,t)}}class VitsPreTrainedModel extends PreTrainedModel{}class VitsModel extends VitsPreTrainedModel{async _call(e){return new VitsModelOutput(await super._call(e))}}class SegformerPreTrainedModel extends PreTrainedModel{}class SegformerForImageClassification extends SegformerPreTrainedModel{}class SegformerForSemanticSegmentation extends SegformerPreTrainedModel{}class StableLmPreTrainedModel extends PreTrainedModel{constructor(e,t,_e){super(e,t),this.generation_config=_e,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class StableLmForCausalLM extends StableLmPreTrainedModel{}class EfficientNetPreTrainedModel extends PreTrainedModel{}class EfficientNetModel extends EfficientNetPreTrainedModel{}class EfficientNetForImageClassification extends EfficientNetPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class PretrainedMixin{static MODEL_CLASS_MAPPINGS=null;static BASE_IF_FAIL=!1;static async from_pretrained(e,{quantized:t=!0,progress_callback:_e=null,config:Te=null,cache_dir:Ee=null,local_files_only:xe=!1,revision:Pe="main",model_file_name:Re=null}={}){let ke={quantized:t,progress_callback:_e,config:Te,cache_dir:Ee,local_files_only:xe,revision:Pe,model_file_name:Re};if(Te=await AutoConfig.from_pretrained(e,ke),ke.config||(ke.config=Te),!this.MODEL_CLASS_MAPPINGS)throw new Error("`MODEL_CLASS_MAPPINGS` not implemented for this type of `AutoClass`: "+this.name);for(let Ce of this.MODEL_CLASS_MAPPINGS){const Se=Ce.get(Te.model_type);if(Se)return await Se[1].from_pretrained(e,ke)}if(this.BASE_IF_FAIL)return console.warn(`Unknown model class "${Te.model_type}", attempting to construct from base class.`),await PreTrainedModel.from_pretrained(e,ke);throw Error(`Unsupported model type: ${Te.model_type}`)}}const MODEL_MAPPING_NAMES_ENCODER_ONLY=new Map([["bert",["BertModel",BertModel]],["nomic_bert",["NomicBertModel",NomicBertModel]],["roformer",["RoFormerModel",RoFormerModel]],["electra",["ElectraModel",ElectraModel]],["esm",["EsmModel",EsmModel]],["convbert",["ConvBertModel",ConvBertModel]],["camembert",["CamembertModel",CamembertModel]],["deberta",["DebertaModel",DebertaModel]],["deberta-v2",["DebertaV2Model",DebertaV2Model]],["mpnet",["MPNetModel",MPNetModel]],["albert",["AlbertModel",AlbertModel]],["distilbert",["DistilBertModel",DistilBertModel]],["roberta",["RobertaModel",RobertaModel]],["xlm",["XLMModel",XLMModel]],["xlm-roberta",["XLMRobertaModel",XLMRobertaModel]],["clap",["ClapModel",ClapModel]],["clip",["CLIPModel",CLIPModel]],["clipseg",["CLIPSegModel",CLIPSegModel]],["chinese_clip",["ChineseCLIPModel",ChineseCLIPModel]],["siglip",["SiglipModel",SiglipModel]],["mobilebert",["MobileBertModel",MobileBertModel]],["squeezebert",["SqueezeBertModel",SqueezeBertModel]],["wav2vec2",["Wav2Vec2Model",Wav2Vec2Model]],["wav2vec2-bert",["Wav2Vec2BertModel",Wav2Vec2BertModel]],["unispeech",["UniSpeechModel",UniSpeechModel]],["unispeech-sat",["UniSpeechSatModel",UniSpeechSatModel]],["hubert",["HubertModel",HubertModel]],["wavlm",["WavLMModel",WavLMModel]],["audio-spectrogram-transformer",["ASTModel",ASTModel]],["vits",["VitsModel",VitsModel]],["detr",["DetrModel",DetrModel]],["table-transformer",["TableTransformerModel",TableTransformerModel]],["vit",["ViTModel",ViTModel]],["fastvit",["FastViTModel",FastViTModel]],["mobilevit",["MobileViTModel",MobileViTModel]],["mobilevitv2",["MobileViTV2Model",MobileViTV2Model]],["owlvit",["OwlViTModel",OwlViTModel]],["owlv2",["Owlv2Model",Owlv2Model]],["beit",["BeitModel",BeitModel]],["deit",["DeiTModel",DeiTModel]],["convnext",["ConvNextModel",ConvNextModel]],["convnextv2",["ConvNextV2Model",ConvNextV2Model]],["dinov2",["Dinov2Model",Dinov2Model]],["resnet",["ResNetModel",ResNetModel]],["swin",["SwinModel",SwinModel]],["swin2sr",["Swin2SRModel",Swin2SRModel]],["donut-swin",["DonutSwinModel",DonutSwinModel]],["yolos",["YolosModel",YolosModel]],["dpt",["DPTModel",DPTModel]],["glpn",["GLPNModel",GLPNModel]],["hifigan",["SpeechT5HifiGan",SpeechT5HifiGan]],["efficientnet",["EfficientNetModel",EfficientNetModel]]]),MODEL_MAPPING_NAMES_ENCODER_DECODER=new Map([["t5",["T5Model",T5Model]],["longt5",["LongT5Model",LongT5Model]],["mt5",["MT5Model",MT5Model]],["bart",["BartModel",BartModel]],["mbart",["MBartModel",MBartModel]],["marian",["MarianModel",MarianModel]],["whisper",["WhisperModel",WhisperModel]],["m2m_100",["M2M100Model",M2M100Model]],["blenderbot",["BlenderbotModel",BlenderbotModel]],["blenderbot-small",["BlenderbotSmallModel",BlenderbotSmallModel]]]),MODEL_MAPPING_NAMES_DECODER_ONLY=new Map([["bloom",["BloomModel",BloomModel]],["gpt2",["GPT2Model",GPT2Model]],["gptj",["GPTJModel",GPTJModel]],["gpt_bigcode",["GPTBigCodeModel",GPTBigCodeModel]],["gpt_neo",["GPTNeoModel",GPTNeoModel]],["gpt_neox",["GPTNeoXModel",GPTNeoXModel]],["codegen",["CodeGenModel",CodeGenModel]],["llama",["LlamaModel",LlamaModel]],["qwen2",["Qwen2Model",Qwen2Model]],["phi",["PhiModel",PhiModel]],["mpt",["MptModel",MptModel]],["opt",["OPTModel",OPTModel]],["mistral",["MistralModel",MistralModel]],["starcoder2",["Starcoder2Model",Starcoder2Model]],["falcon",["FalconModel",FalconModel]]]),MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES=new Map([["speecht5",["SpeechT5ForSpeechToText",SpeechT5ForSpeechToText]],["whisper",["WhisperForConditionalGeneration",WhisperForConditionalGeneration]]]),MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES=new Map([["speecht5",["SpeechT5ForTextToSpeech",SpeechT5ForTextToSpeech]]]),MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES=new Map([["vits",["VitsModel",VitsModel]]]),MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES=new Map([["bert",["BertForSequenceClassification",BertForSequenceClassification]],["roformer",["RoFormerForSequenceClassification",RoFormerForSequenceClassification]],["electra",["ElectraForSequenceClassification",ElectraForSequenceClassification]],["esm",["EsmForSequenceClassification",EsmForSequenceClassification]],["convbert",["ConvBertForSequenceClassification",ConvBertForSequenceClassification]],["camembert",["CamembertForSequenceClassification",CamembertForSequenceClassification]],["deberta",["DebertaForSequenceClassification",DebertaForSequenceClassification]],["deberta-v2",["DebertaV2ForSequenceClassification",DebertaV2ForSequenceClassification]],["mpnet",["MPNetForSequenceClassification",MPNetForSequenceClassification]],["albert",["AlbertForSequenceClassification",AlbertForSequenceClassification]],["distilbert",["DistilBertForSequenceClassification",DistilBertForSequenceClassification]],["roberta",["RobertaForSequenceClassification",RobertaForSequenceClassification]],["xlm",["XLMForSequenceClassification",XLMForSequenceClassification]],["xlm-roberta",["XLMRobertaForSequenceClassification",XLMRobertaForSequenceClassification]],["bart",["BartForSequenceClassification",BartForSequenceClassification]],["mbart",["MBartForSequenceClassification",MBartForSequenceClassification]],["mobilebert",["MobileBertForSequenceClassification",MobileBertForSequenceClassification]],["squeezebert",["SqueezeBertForSequenceClassification",SqueezeBertForSequenceClassification]]]),MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES=new Map([["bert",["BertForTokenClassification",BertForTokenClassification]],["roformer",["RoFormerForTokenClassification",RoFormerForTokenClassification]],["electra",["ElectraForTokenClassification",ElectraForTokenClassification]],["esm",["EsmForTokenClassification",EsmForTokenClassification]],["convbert",["ConvBertForTokenClassification",ConvBertForTokenClassification]],["camembert",["CamembertForTokenClassification",CamembertForTokenClassification]],["deberta",["DebertaForTokenClassification",DebertaForTokenClassification]],["deberta-v2",["DebertaV2ForTokenClassification",DebertaV2ForTokenClassification]],["mpnet",["MPNetForTokenClassification",MPNetForTokenClassification]],["distilbert",["DistilBertForTokenClassification",DistilBertForTokenClassification]],["roberta",["RobertaForTokenClassification",RobertaForTokenClassification]],["xlm",["XLMForTokenClassification",XLMForTokenClassification]],["xlm-roberta",["XLMRobertaForTokenClassification",XLMRobertaForTokenClassification]]]),MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES=new Map([["t5",["T5ForConditionalGeneration",T5ForConditionalGeneration]],["longt5",["LongT5ForConditionalGeneration",LongT5ForConditionalGeneration]],["mt5",["MT5ForConditionalGeneration",MT5ForConditionalGeneration]],["bart",["BartForConditionalGeneration",BartForConditionalGeneration]],["mbart",["MBartForConditionalGeneration",MBartForConditionalGeneration]],["marian",["MarianMTModel",MarianMTModel]],["m2m_100",["M2M100ForConditionalGeneration",M2M100ForConditionalGeneration]],["blenderbot",["BlenderbotForConditionalGeneration",BlenderbotForConditionalGeneration]],["blenderbot-small",["BlenderbotSmallForConditionalGeneration",BlenderbotSmallForConditionalGeneration]]]),MODEL_WITH_LM_HEAD_MAPPING_NAMES=new Map([["bloom",["BloomForCausalLM",BloomForCausalLM]],["gpt2",["GPT2LMHeadModel",GPT2LMHeadModel]],["gptj",["GPTJForCausalLM",GPTJForCausalLM]],["gpt_bigcode",["GPTBigCodeForCausalLM",GPTBigCodeForCausalLM]],["gpt_neo",["GPTNeoForCausalLM",GPTNeoForCausalLM]],["gpt_neox",["GPTNeoXForCausalLM",GPTNeoXForCausalLM]],["codegen",["CodeGenForCausalLM",CodeGenForCausalLM]],["llama",["LlamaForCausalLM",LlamaForCausalLM]],["qwen2",["Qwen2ForCausalLM",Qwen2ForCausalLM]],["phi",["PhiForCausalLM",PhiForCausalLM]],["mpt",["MptForCausalLM",MptForCausalLM]],["opt",["OPTForCausalLM",OPTForCausalLM]],["mbart",["MBartForCausalLM",MBartForCausalLM]],["mistral",["MistralForCausalLM",MistralForCausalLM]],["starcoder2",["Starcoder2ForCausalLM",Starcoder2ForCausalLM]],["falcon",["FalconForCausalLM",FalconForCausalLM]],["trocr",["TrOCRForCausalLM",TrOCRForCausalLM]],["stablelm",["StableLmForCausalLM",StableLmForCausalLM]]]),MODEL_FOR_MASKED_LM_MAPPING_NAMES=new Map([["bert",["BertForMaskedLM",BertForMaskedLM]],["roformer",["RoFormerForMaskedLM",RoFormerForMaskedLM]],["electra",["ElectraForMaskedLM",ElectraForMaskedLM]],["esm",["EsmForMaskedLM",EsmForMaskedLM]],["convbert",["ConvBertForMaskedLM",ConvBertForMaskedLM]],["camembert",["CamembertForMaskedLM",CamembertForMaskedLM]],["deberta",["DebertaForMaskedLM",DebertaForMaskedLM]],["deberta-v2",["DebertaV2ForMaskedLM",DebertaV2ForMaskedLM]],["mpnet",["MPNetForMaskedLM",MPNetForMaskedLM]],["albert",["AlbertForMaskedLM",AlbertForMaskedLM]],["distilbert",["DistilBertForMaskedLM",DistilBertForMaskedLM]],["roberta",["RobertaForMaskedLM",RobertaForMaskedLM]],["xlm",["XLMWithLMHeadModel",XLMWithLMHeadModel]],["xlm-roberta",["XLMRobertaForMaskedLM",XLMRobertaForMaskedLM]],["mobilebert",["MobileBertForMaskedLM",MobileBertForMaskedLM]],["squeezebert",["SqueezeBertForMaskedLM",SqueezeBertForMaskedLM]]]),MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES=new Map([["bert",["BertForQuestionAnswering",BertForQuestionAnswering]],["roformer",["RoFormerForQuestionAnswering",RoFormerForQuestionAnswering]],["electra",["ElectraForQuestionAnswering",ElectraForQuestionAnswering]],["convbert",["ConvBertForQuestionAnswering",ConvBertForQuestionAnswering]],["camembert",["CamembertForQuestionAnswering",CamembertForQuestionAnswering]],["deberta",["DebertaForQuestionAnswering",DebertaForQuestionAnswering]],["deberta-v2",["DebertaV2ForQuestionAnswering",DebertaV2ForQuestionAnswering]],["mpnet",["MPNetForQuestionAnswering",MPNetForQuestionAnswering]],["albert",["AlbertForQuestionAnswering",AlbertForQuestionAnswering]],["distilbert",["DistilBertForQuestionAnswering",DistilBertForQuestionAnswering]],["roberta",["RobertaForQuestionAnswering",RobertaForQuestionAnswering]],["xlm",["XLMForQuestionAnswering",XLMForQuestionAnswering]],["xlm-roberta",["XLMRobertaForQuestionAnswering",XLMRobertaForQuestionAnswering]],["mobilebert",["MobileBertForQuestionAnswering",MobileBertForQuestionAnswering]],["squeezebert",["SqueezeBertForQuestionAnswering",SqueezeBertForQuestionAnswering]]]),MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",VisionEncoderDecoderModel]]]),MODEL_FOR_DOCUMENT_QUESTION_ANSWERING_MAPPING_NAMES=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",VisionEncoderDecoderModel]]]),MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES=new Map([["vit",["ViTForImageClassification",ViTForImageClassification]],["fastvit",["FastViTForImageClassification",FastViTForImageClassification]],["mobilevit",["MobileViTForImageClassification",MobileViTForImageClassification]],["mobilevitv2",["MobileViTV2ForImageClassification",MobileViTV2ForImageClassification]],["beit",["BeitForImageClassification",BeitForImageClassification]],["deit",["DeiTForImageClassification",DeiTForImageClassification]],["convnext",["ConvNextForImageClassification",ConvNextForImageClassification]],["convnextv2",["ConvNextV2ForImageClassification",ConvNextV2ForImageClassification]],["dinov2",["Dinov2ForImageClassification",Dinov2ForImageClassification]],["resnet",["ResNetForImageClassification",ResNetForImageClassification]],["swin",["SwinForImageClassification",SwinForImageClassification]],["segformer",["SegformerForImageClassification",SegformerForImageClassification]],["efficientnet",["EfficientNetForImageClassification",EfficientNetForImageClassification]]]),MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES=new Map([["detr",["DetrForObjectDetection",DetrForObjectDetection]],["table-transformer",["TableTransformerForObjectDetection",TableTransformerForObjectDetection]],["yolos",["YolosForObjectDetection",YolosForObjectDetection]]]),MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES=new Map([["owlvit",["OwlViTForObjectDetection",OwlViTForObjectDetection]],["owlv2",["Owlv2ForObjectDetection",Owlv2ForObjectDetection]]]),MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES=new Map([["detr",["DetrForSegmentation",DetrForSegmentation]],["clipseg",["CLIPSegForImageSegmentation",CLIPSegForImageSegmentation]]]),MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES=new Map([["segformer",["SegformerForSemanticSegmentation",SegformerForSemanticSegmentation]]]),MODEL_FOR_MASK_GENERATION_MAPPING_NAMES=new Map([["sam",["SamModel",SamModel]]]),MODEL_FOR_CTC_MAPPING_NAMES=new Map([["wav2vec2",["Wav2Vec2ForCTC",Wav2Vec2ForCTC]],["wav2vec2-bert",["Wav2Vec2BertForCTC",Wav2Vec2BertForCTC]],["unispeech",["UniSpeechForCTC",UniSpeechForCTC]],["unispeech-sat",["UniSpeechSatForCTC",UniSpeechSatForCTC]],["wavlm",["WavLMForCTC",WavLMForCTC]],["hubert",["HubertForCTC",HubertForCTC]]]),MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES=new Map([["wav2vec2",["Wav2Vec2ForSequenceClassification",Wav2Vec2ForSequenceClassification]],["wav2vec2-bert",["Wav2Vec2BertForSequenceClassification",Wav2Vec2BertForSequenceClassification]],["unispeech",["UniSpeechForSequenceClassification",UniSpeechForSequenceClassification]],["unispeech-sat",["UniSpeechSatForSequenceClassification",UniSpeechSatForSequenceClassification]],["wavlm",["WavLMForSequenceClassification",WavLMForSequenceClassification]],["hubert",["HubertForSequenceClassification",HubertForSequenceClassification]],["audio-spectrogram-transformer",["ASTForAudioClassification",ASTForAudioClassification]]]),MODEL_FOR_AUDIO_XVECTOR_MAPPING_NAMES=new Map([["wavlm",["WavLMForXVector",WavLMForXVector]]]),MODEL_FOR_AUDIO_FRAME_CLASSIFICATION_MAPPING_NAMES=new Map([["unispeech-sat",["UniSpeechSatForAudioFrameClassification",UniSpeechSatForAudioFrameClassification]],["wavlm",["WavLMForAudioFrameClassification",WavLMForAudioFrameClassification]],["wav2vec2",["Wav2Vec2ForAudioFrameClassification",Wav2Vec2ForAudioFrameClassification]]]),MODEL_FOR_IMAGE_MATTING_MAPPING_NAMES=new Map([["vitmatte",["VitMatteForImageMatting",VitMatteForImageMatting]]]),MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES=new Map([["swin2sr",["Swin2SRForImageSuperResolution",Swin2SRForImageSuperResolution]]]),MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES=new Map([["dpt",["DPTForDepthEstimation",DPTForDepthEstimation]],["depth_anything",["DepthAnythingForDepthEstimation",DepthAnythingForDepthEstimation]],["glpn",["GLPNForDepthEstimation",GLPNForDepthEstimation]]]),MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES=new Map([["clip",["CLIPVisionModelWithProjection",CLIPVisionModelWithProjection]],["siglip",["SiglipVisionModel",SiglipVisionModel]]]),MODEL_CLASS_TYPE_MAPPING=[[MODEL_MAPPING_NAMES_ENCODER_ONLY,MODEL_TYPES.EncoderOnly],[MODEL_MAPPING_NAMES_ENCODER_DECODER,MODEL_TYPES.EncoderDecoder],[MODEL_MAPPING_NAMES_DECODER_ONLY,MODEL_TYPES.DecoderOnly],[MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_WITH_LM_HEAD_MAPPING_NAMES,MODEL_TYPES.DecoderOnly],[MODEL_FOR_MASKED_LM_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES,MODEL_TYPES.Vision2Seq],[MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_MATTING_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_MASK_GENERATION_MAPPING_NAMES,MODEL_TYPES.MaskGeneration],[MODEL_FOR_CTC_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_XVECTOR_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_FRAME_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly]];for(const[r,e]of MODEL_CLASS_TYPE_MAPPING)for(const[t,_e]of r.values())MODEL_TYPE_MAPPING.set(t,e),MODEL_CLASS_TO_NAME_MAPPING.set(_e,t),MODEL_NAME_TO_CLASS_MAPPING.set(t,_e);const CUSTOM_MAPPING=[["CLIPTextModelWithProjection",CLIPTextModelWithProjection,MODEL_TYPES.EncoderOnly],["SiglipTextModel",SiglipTextModel,MODEL_TYPES.EncoderOnly],["ClapTextModelWithProjection",ClapTextModelWithProjection,MODEL_TYPES.EncoderOnly],["ClapAudioModelWithProjection",ClapAudioModelWithProjection,MODEL_TYPES.EncoderOnly]];for(const[r,e,t]of CUSTOM_MAPPING)MODEL_TYPE_MAPPING.set(r,t),MODEL_CLASS_TO_NAME_MAPPING.set(e,r),MODEL_NAME_TO_CLASS_MAPPING.set(r,e);class AutoModel extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=MODEL_CLASS_TYPE_MAPPING.map(e=>e[0]);static BASE_IF_FAIL=!0}class AutoModelForSequenceClassification extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES]}class AutoModelForTokenClassification extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES]}class AutoModelForSeq2SeqLM extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES]}class AutoModelForSpeechSeq2Seq extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES]}class AutoModelForTextToSpectrogram extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES]}class AutoModelForTextToWaveform extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES]}class AutoModelForCausalLM extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_WITH_LM_HEAD_MAPPING_NAMES]}class AutoModelForMaskedLM extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_MASKED_LM_MAPPING_NAMES]}class AutoModelForQuestionAnswering extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES]}class AutoModelForVision2Seq extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES]}class AutoModelForImageClassification extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES]}class AutoModelForImageSegmentation extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES]}class AutoModelForSemanticSegmentation extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES]}class AutoModelForObjectDetection extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES]}class AutoModelForZeroShotObjectDetection extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES]}class AutoModelForCTC extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_CTC_MAPPING_NAMES]}class AutoModelForAudioClassification extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES]}class AutoModelForDocumentQuestionAnswering extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_DOCUMENT_QUESTION_ANSWERING_MAPPING_NAMES]}class AutoModelForImageToImage extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES]}class AutoModelForDepthEstimation extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES]}class AutoModelForImageFeatureExtraction extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES]}class Seq2SeqLMOutput extends ModelOutput{constructor({logits:e,past_key_values:t,encoder_outputs:_e,decoder_attentions:Te=null,cross_attentions:Ee=null}){super(),this.logits=e,this.past_key_values=t,this.encoder_outputs=_e,this.decoder_attentions=Te,this.cross_attentions=Ee}}class SequenceClassifierOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class XVectorOutput extends ModelOutput{constructor({logits:e,embeddings:t}){super(),this.logits=e,this.embeddings=t}}class TokenClassifierOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class MaskedLMOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class QuestionAnsweringModelOutput extends ModelOutput{constructor({start_logits:e,end_logits:t}){super(),this.start_logits=e,this.end_logits=t}}class CausalLMOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class ImageMattingOutput extends ModelOutput{constructor({alphas:e}){super(),this.alphas=e}}class VitsModelOutput extends ModelOutput{constructor({waveform:e,spectrogram:t}){super(),this.waveform=e,this.spectrogram=t}}const BROWSER_ENV=typeof self<"u",WEBWORKER_ENV=BROWSER_ENV&&self.constructor.name==="DedicatedWorkerGlobalScope";let createCanvasFunction,ImageDataClass,loadImageFunction;if(BROWSER_ENV)createCanvasFunction=(r,e)=>{if(!self.OffscreenCanvas)throw new Error("OffscreenCanvas not supported by this browser.");return new self.OffscreenCanvas(r,e)},loadImageFunction=self.createImageBitmap,ImageDataClass=self.ImageData;else if(sharp)loadImageFunction=async r=>{const t=(await r.metadata()).channels;let{data:_e,info:Te}=await r.rotate().raw().toBuffer({resolveWithObject:!0});const Ee=new RawImage(new Uint8ClampedArray(_e),Te.width,Te.height,Te.channels);return t!==void 0&&t!==Te.channels&&Ee.convert(t),Ee};else throw new Error("Unable to load image processing library.");const RESAMPLING_MAPPING={0:"nearest",1:"lanczos",2:"bilinear",3:"bicubic",4:"box",5:"hamming"},CONTENT_TYPE_MAP=new Map([["png","image/png"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["gif","image/gif"]]);class RawImage{constructor(e,t,_e,Te){this.data=e,this.width=t,this.height=_e,this.channels=Te}get size(){return[this.width,this.height]}static async read(e){if(e instanceof RawImage)return e;if(typeof e=="string"||e instanceof URL)return await this.fromURL(e);throw new Error(`Unsupported input type: ${typeof e}`)}static async fromURL(e){let t=await getFile(e);if(t.status!==200)throw new Error(`Unable to read image from "${e}" (${t.status} ${t.statusText})`);let _e=await t.blob();return this.fromBlob(_e)}static async fromBlob(e){if(BROWSER_ENV){let t=await loadImageFunction(e);const _e=createCanvasFunction(t.width,t.height).getContext("2d");return _e.drawImage(t,0,0),new this(_e.getImageData(0,0,t.width,t.height).data,t.width,t.height,4)}else{let t=sharp(await e.arrayBuffer());return await loadImageFunction(t)}}static fromTensor(e,t="CHW"){if(e.dims.length!==3)throw new Error(`Tensor should have 3 dimensions, but has ${e.dims.length} dimensions.`);if(t==="CHW")e=e.transpose(1,2,0);else if(t!=="HWC")throw new Error(`Unsupported channel format: ${t}`);if(!(e.data instanceof Uint8ClampedArray||e.data instanceof Uint8Array))throw new Error(`Unsupported tensor type: ${e.type}`);switch(e.dims[2]){case 1:case 2:case 3:case 4:return new RawImage(e.data,e.dims[1],e.dims[0],e.dims[2]);default:throw new Error(`Unsupported number of channels: ${e.dims[2]}`)}}grayscale(){if(this.channels===1)return this;let e=new Uint8ClampedArray(this.width*this.height*1);switch(this.channels){case 3:case 4:for(let t=0,_e=0;t<this.data.length;t+=this.channels){const Te=this.data[t],Ee=this.data[t+1],xe=this.data[t+2];e[_e++]=Math.round(.2989*Te+.587*Ee+.114*xe)}break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,1)}rgb(){if(this.channels===3)return this;let e=new Uint8ClampedArray(this.width*this.height*3);switch(this.channels){case 1:for(let t=0,_e=0;t<this.data.length;++t)e[_e++]=this.data[t],e[_e++]=this.data[t],e[_e++]=this.data[t];break;case 4:for(let t=0,_e=0;t<this.data.length;t+=4)e[_e++]=this.data[t],e[_e++]=this.data[t+1],e[_e++]=this.data[t+2];break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,3)}rgba(){if(this.channels===4)return this;let e=new Uint8ClampedArray(this.width*this.height*4);switch(this.channels){case 1:for(let t=0,_e=0;t<this.data.length;++t)e[_e++]=this.data[t],e[_e++]=this.data[t],e[_e++]=this.data[t],e[_e++]=255;break;case 3:for(let t=0,_e=0;t<this.data.length;t+=3)e[_e++]=this.data[t],e[_e++]=this.data[t+1],e[_e++]=this.data[t+2],e[_e++]=255;break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,4)}async resize(e,t,{resample:_e=2}={}){let Te=RESAMPLING_MAPPING[_e]??_e;if(BROWSER_ENV){let Ee=this.channels,xe=this.toCanvas();const Pe=createCanvasFunction(e,t).getContext("2d");return Pe.drawImage(xe,0,0,e,t),new RawImage(Pe.getImageData(0,0,e,t).data,e,t,4).convert(Ee)}else{let Ee=this.toSharp();switch(Te){case"box":case"hamming":(Te==="box"||Te==="hamming")&&(console.warn(`Resampling method ${Te} is not yet supported. Using bilinear instead.`),Te="bilinear");case"nearest":case"bilinear":case"bicubic":Ee=Ee.affine([e/this.width,0,0,t/this.height],{interpolator:Te});break;case"lanczos":Ee=Ee.resize({width:e,height:t,fit:"fill",kernel:"lanczos3"});break;default:throw new Error(`Resampling method ${Te} is not supported.`)}return await loadImageFunction(Ee)}}async pad([e,t,_e,Te]){if(e=Math.max(e,0),t=Math.max(t,0),_e=Math.max(_e,0),Te=Math.max(Te,0),e===0&&t===0&&_e===0&&Te===0)return this;if(BROWSER_ENV){let Ee=this.channels,xe=this.toCanvas(),Pe=this.width+e+t,Re=this.height+_e+Te;const ke=createCanvasFunction(Pe,Re).getContext("2d");return ke.drawImage(xe,0,0,this.width,this.height,e,_e,Pe,Re),new RawImage(ke.getImageData(0,0,Pe,Re).data,Pe,Re,4).convert(Ee)}else{let Ee=this.toSharp().extend({left:e,right:t,top:_e,bottom:Te});return await loadImageFunction(Ee)}}async crop([e,t,_e,Te]){if(e=Math.max(e,0),t=Math.max(t,0),_e=Math.min(_e,this.width-1),Te=Math.min(Te,this.height-1),e===0&&t===0&&_e===this.width-1&&Te===this.height-1)return this;const Ee=_e-e+1,xe=Te-t+1;if(BROWSER_ENV){const Pe=this.channels,Re=this.toCanvas(),ke=createCanvasFunction(Ee,xe).getContext("2d");return ke.drawImage(Re,e,t,Ee,xe,0,0,Ee,xe),new RawImage(ke.getImageData(0,0,Ee,xe).data,Ee,xe,4).convert(Pe)}else{const Pe=this.toSharp().extract({left:e,top:t,width:Ee,height:xe});return await loadImageFunction(Pe)}}async center_crop(e,t){if(this.width===e&&this.height===t)return this;let _e=(this.width-e)/2,Te=(this.height-t)/2;if(BROWSER_ENV){let Ee=this.channels,xe=this.toCanvas();const Pe=createCanvasFunction(e,t).getContext("2d");let Re=0,ke=0,Ce=0,Se=0;return _e>=0?Re=_e:Ce=-_e,Te>=0?ke=Te:Se=-Te,Pe.drawImage(xe,Re,ke,e,t,Ce,Se,e,t),new RawImage(Pe.getImageData(0,0,e,t).data,e,t,4).convert(Ee)}else{let Ee=this.toSharp();if(_e>=0&&Te>=0)Ee=Ee.extract({left:Math.floor(_e),top:Math.floor(Te),width:e,height:t});else if(_e<=0&&Te<=0){let xe=Math.floor(-Te),Pe=Math.floor(-_e);Ee=Ee.extend({top:xe,left:Pe,right:e-this.width-Pe,bottom:t-this.height-xe})}else{let xe=[0,0],Pe=0;Te<0?(xe[0]=Math.floor(-Te),xe[1]=t-this.height-xe[0]):Pe=Math.floor(Te);let Re=[0,0],ke=0;_e<0?(Re[0]=Math.floor(-_e),Re[1]=e-this.width-Re[0]):ke=Math.floor(_e),Ee=Ee.extend({top:xe[0],bottom:xe[1],left:Re[0],right:Re[1]}).extract({left:ke,top:Pe,width:e,height:t})}return await loadImageFunction(Ee)}}async toBlob(e="image/png",t=1){if(!BROWSER_ENV)throw new Error("toBlob() is only supported in browser environments.");return await this.toCanvas().convertToBlob({type:e,quality:t})}toTensor(e="CHW"){let t=new Tensor("uint8",new Uint8Array(this.data),[this.height,this.width,this.channels]);if(e!=="HWC")if(e==="CHW")t=t.permute(2,0,1);else throw new Error(`Unsupported channel format: ${e}`);return t}toCanvas(){if(!BROWSER_ENV)throw new Error("toCanvas() is only supported in browser environments.");let e=this.clone().rgba(),t=createCanvasFunction(e.width,e.height),_e=new ImageDataClass(e.data,e.width,e.height);return t.getContext("2d").putImageData(_e,0,0),t}_update(e,t,_e,Te=null){return this.data=e,this.width=t,this.height=_e,Te!==null&&(this.channels=Te),this}clone(){return new RawImage(this.data.slice(),this.width,this.height,this.channels)}convert(e){if(this.channels===e)return this;switch(e){case 1:this.grayscale();break;case 3:this.rgb();break;case 4:this.rgba();break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this}async save(e){if(BROWSER_ENV){if(WEBWORKER_ENV)throw new Error("Unable to save an image from a Web Worker.");const t=e.split(".").pop().toLowerCase(),_e=CONTENT_TYPE_MAP.get(t)??"image/png",Te=await this.toBlob(_e),Ee=URL.createObjectURL(Te),xe=document.createElement("a");xe.href=Ee,xe.download=e,xe.click(),xe.remove()}else{if(env$1.useFS)return await this.toSharp().toFile(e);throw new Error("Unable to save the image because filesystem is disabled in this environment.")}}toSharp(){if(BROWSER_ENV)throw new Error("toSharp() is only supported in server-side environments.");return sharp(this.data,{raw:{width:this.width,height:this.height,channels:this.channels}})}}async function read_audio(r,e){if(typeof AudioContext>"u")throw Error("Unable to load audio from path/URL since `AudioContext` is not available in your environment. Instead, audio data should be passed directly to the pipeline/processor. For more information and some example code, see https://huggingface.co/docs/transformers.js/guides/node-audio-processing.");const t=await(await getFile(r)).arrayBuffer(),_e=new AudioContext({sampleRate:e});typeof e>"u"&&console.warn(`No sampling rate provided, using default of ${_e.sampleRate}Hz.`);const Te=await _e.decodeAudioData(t);let Ee;if(Te.numberOfChannels===2){const xe=Math.sqrt(2),Pe=Te.getChannelData(0),Re=Te.getChannelData(1);Ee=new Float32Array(Pe.length);for(let ke=0;ke<Te.length;++ke)Ee[ke]=xe*(Pe[ke]+Re[ke])/2}else Ee=Te.getChannelData(0);return Ee}function hanning(r){if(r<1)return new Float64Array;if(r===1)return new Float64Array([1]);const e=r-1,t=Math.PI/e,_e=new Float64Array(r);for(let Te=0;Te<r;++Te){const Ee=2*Te-e;_e[Te]=.5+.5*Math.cos(t*Ee)}return _e}const HERTZ_TO_MEL_MAPPING={htk:r=>2595*Math.log10(1+r/700),kaldi:r=>1127*Math.log(1+r/700),slaney:(r,e=1e3,t=15,_e=27/Math.log(6.4))=>r>=e?t+Math.log(r/e)*_e:3*r/200};function hertz_to_mel(r,e="htk"){const t=HERTZ_TO_MEL_MAPPING[e];if(!t)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof r=="number"?t(r):r.map(_e=>t(_e))}const MEL_TO_HERTZ_MAPPING={htk:r=>700*(10**(r/2595)-1),kaldi:r=>700*(Math.exp(r/1127)-1),slaney:(r,e=1e3,t=15,_e=Math.log(6.4)/27)=>r>=t?e*Math.exp(_e*(r-t)):200*r/3};function mel_to_hertz(r,e="htk"){const t=MEL_TO_HERTZ_MAPPING[e];if(!t)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof r=="number"?t(r):r.map(_e=>t(_e))}function _create_triangular_filter_bank(r,e){const t=Float64Array.from({length:e.length-1},(xe,Pe)=>e[Pe+1]-e[Pe]),_e=Array.from({length:r.length},()=>new Array(e.length));for(let xe=0;xe<r.length;++xe){const Pe=_e[xe];for(let Re=0;Re<e.length;++Re)Pe[Re]=e[Re]-r[xe]}const Te=e.length-2,Ee=Array.from({length:Te},()=>new Array(r.length));for(let xe=0;xe<r.length;++xe){const Pe=_e[xe];for(let Re=0;Re<Te;++Re){const ke=-Pe[Re]/t[Re],Ce=Pe[Re+2]/t[Re+1];Ee[Re][xe]=Math.max(0,Math.min(ke,Ce))}}return Ee}function linspace(r,e,t){const _e=(e-r)/(t-1);return Float64Array.from({length:t},(Te,Ee)=>r+_e*Ee)}function mel_filter_bank(r,e,t,_e,Te,Ee=null,xe="htk",Pe=!1){if(Ee!==null&&Ee!=="slaney")throw new Error('norm must be one of null or "slaney"');const Re=hertz_to_mel(t,xe),ke=hertz_to_mel(_e,xe),Ce=linspace(Re,ke,e+2);let Se=mel_to_hertz(Ce,xe),Ae;if(Pe){const Me=Te/(r*2);Ae=hertz_to_mel(Float64Array.from({length:r},(Fe,Ve)=>Ve*Me),xe),Se=Ce}else Ae=linspace(0,Math.floor(Te/2),r);const Ie=_create_triangular_filter_bank(Ae,Se);if(Ee!==null&&Ee==="slaney")for(let Me=0;Me<e;++Me){const Fe=Ie[Me],Ve=2/(Se[Me+2]-Se[Me]);for(let je=0;je<r;++je)Fe[je]*=Ve}return Ie}function padReflect(r,e,t){const _e=new r.constructor(r.length+e+t),Te=r.length-1;for(let Ee=0;Ee<r.length;++Ee)_e[e+Ee]=r[Ee];for(let Ee=1;Ee<=e;++Ee)_e[e-Ee]=r[calculateReflectOffset(Ee,Te)];for(let Ee=1;Ee<=t;++Ee)_e[Te+e+Ee]=r[calculateReflectOffset(Te-Ee,Te)];return _e}function _db_conversion_helper(r,e,t,_e,Te){if(t<=0)throw new Error("reference must be greater than zero");if(_e<=0)throw new Error("min_value must be greater than zero");t=Math.max(_e,t);const Ee=Math.log10(t);for(let xe=0;xe<r.length;++xe)r[xe]=e*Math.log10(Math.max(_e,r[xe])-Ee);if(Te!==null){if(Te<=0)throw new Error("db_range must be greater than zero");const xe=max(r)[0]-Te;for(let Pe=0;Pe<r.length;++Pe)r[Pe]=Math.max(r[Pe],xe)}return r}function amplitude_to_db(r,e=1,t=1e-5,_e=null){return _db_conversion_helper(r,20,e,t,_e)}function power_to_db(r,e=1,t=1e-10,_e=null){return _db_conversion_helper(r,10,e,t,_e)}function spectrogram(r,e,t,_e,{fft_length:Te=null,power:Ee=1,center:xe=!0,pad_mode:Pe="reflect",onesided:Re=!0,preemphasis:ke=null,mel_filters:Ce=null,mel_floor:Se=1e-10,log_mel:Ae=null,reference:Ie=1,min_value:Me=1e-10,db_range:Fe=null,remove_dc_offset:Ve=null,max_num_frames:je=null,do_pad:Be=!0,transpose:qe=!1}={}){const He=e.length;if(Te===null&&(Te=t),t>Te)throw Error(`frame_length (${t}) may not be larger than fft_length (${Te})`);if(He!==t)throw new Error(`Length of the window (${He}) must equal frame_length (${t})`);if(_e<=0)throw new Error("hop_length must be greater than zero");if(Ee===null&&Ce!==null)throw new Error("You have provided `mel_filters` but `power` is `None`. Mel spectrogram computation is not yet supported for complex-valued spectrogram. Specify `power` to fix this issue.");if(xe){if(Pe!=="reflect")throw new Error(`pad_mode="${Pe}" not implemented yet.`);const xn=Math.floor((Te-1)/2)+1;r=padReflect(r,xn,xn)}const Xe=Math.floor(1+Math.floor((r.length-t)/_e)),Je=Re?Math.floor(Te/2)+1:Te;let Qe=Xe,Ke=Xe;je!==null&&(je>Xe?Be&&(Ke=je):Ke=Qe=je);const Ye=new FFT(Te),pn=new Float64Array(Te),un=new Float64Array(Ye.outputBufferSize),fn=new Array(Qe);for(let xn=0;xn<Qe;++xn){const In=xn*_e;for(let $n=0;$n<t;++$n)pn[$n]=r[In+$n];if(Ve){let $n=0;for(let Bn=0;Bn<t;++Bn)$n+=pn[Bn];const Sn=$n/t;for(let Bn=0;Bn<t;++Bn)pn[Bn]-=Sn}if(ke!==null){for(let $n=t-1;$n>=1;--$n)pn[$n]-=ke*pn[$n-1];pn[0]*=1-ke}for(let $n=0;$n<e.length;++$n)pn[$n]*=e[$n];Ye.realTransform(un,pn);const Ln=new Array(Je);for(let $n=0;$n<Ln.length;++$n){const Sn=$n<<1;Ln[$n]=un[Sn]**2+un[Sn+1]**2}fn[xn]=Ln}if(Ee!==null&&Ee!==2){const xn=2/Ee;for(let In=0;In<fn.length;++In){const Ln=fn[In];for(let $n=0;$n<Ln.length;++$n)Ln[$n]**=xn}}const mn=Ce.length,wn=new Float32Array(mn*Ke),Pn=qe?[Ke,mn]:[mn,Ke];for(let xn=0;xn<mn;++xn){const In=Ce[xn];for(let Ln=0;Ln<Qe;++Ln){const $n=fn[Ln];let Sn=0;for(let Bn=0;Bn<Je;++Bn)Sn+=In[Bn]*$n[Bn];wn[qe?Ln*mn+xn:xn*Qe+Ln]=Math.max(Se,Sn)}}if(Ee!==null&&Ae!==null){const xn=Math.min(wn.length,Qe*mn);switch(Ae){case"log":for(let In=0;In<xn;++In)wn[In]=Math.log(wn[In]);break;case"log10":for(let In=0;In<xn;++In)wn[In]=Math.log10(wn[In]);break;case"dB":if(Ee===1)amplitude_to_db(wn,Ie,Me,Fe);else if(Ee===2)power_to_db(wn,Ie,Me,Fe);else throw new Error(`Cannot use log_mel option '${Ae}' with power ${Ee}`);break;default:throw new Error(`log_mel must be one of null, 'log', 'log10' or 'dB'. Got '${Ae}'`)}}return{data:wn,dims:Pn}}function window_function(r,e,{periodic:t=!0,frame_length:_e=null,center:Te=!0}={}){const Ee=t?r+1:r;let xe;switch(e){case"boxcar":xe=new Float64Array(Ee).fill(1);break;case"hann":case"hann_window":xe=hanning(Ee);break;case"povey":xe=hanning(Ee).map(Pe=>Math.pow(Pe,.85));break;default:throw new Error(`Unknown window type ${e}.`)}if(t&&(xe=xe.subarray(0,r)),_e===null)return xe;if(r>_e)throw new Error(`Length of the window (${r}) may not be larger than frame_length (${_e})`);return xe}function center_to_corners_format([r,e,t,_e]){return[r-t/2,e-_e/2,r+t/2,e+_e/2]}function post_process_object_detection(r,e=.5,t=null,_e=!1){const Te=r.logits,Ee=r.pred_boxes,[xe,Pe,Re]=Te.dims;if(t!==null&&t.length!==xe)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let ke=[];for(let Ce=0;Ce<xe;++Ce){let Se=t!==null?t[Ce]:null,Ae={boxes:[],classes:[],scores:[]},Ie=Te[Ce],Me=Ee[Ce];for(let Fe=0;Fe<Pe;++Fe){let Ve=Ie[Fe],je=[],Be;if(_e){Be=Ve.sigmoid().data;for(let qe=0;qe<Be.length;++qe)Be[qe]>e&&je.push(qe)}else{let qe=max(Ve.data)[1];if(qe===Re-1)continue;je.push(qe),Be=softmax(Ve.data)}for(const qe of je){let He=Me[Fe].data;He=center_to_corners_format(He),Se!==null&&(He=He.map((Xe,Je)=>Xe*Se[(Je+1)%2])),Ae.boxes.push(He),Ae.classes.push(qe),Ae.scores.push(Be[qe])}}ke.push(Ae)}return ke}function validate_audio_inputs(r,e){if(!(r instanceof Float32Array||r instanceof Float64Array))throw new Error(`${e} expects input to be a Float32Array or a Float64Array, but got ${r?.constructor?.name??typeof r} instead. If using the feature extractor directly, remember to use \`read_audio(url, sampling_rate)\` to obtain the raw audio data of the file/url.`)}function constraint_to_multiple_of(r,e,t=0,_e=null){const Te=r/e;let Ee=bankers_round(Te)*e;return _e!==null&&Ee>_e&&(Ee=Math.floor(Te)*e),Ee<t&&(Ee=Math.ceil(Te)*e),Ee}function enforce_size_divisibility([r,e],t){return[Math.max(Math.floor(r/t),1)*t,Math.max(Math.floor(e/t),1)*t]}class FeatureExtractor extends Callable{constructor(e){super(),this.config=e}}class ImageFeatureExtractor extends FeatureExtractor{constructor(e){super(e),this.image_mean=this.config.image_mean??this.config.mean,this.image_std=this.config.image_std??this.config.std,this.resample=this.config.resample??2,this.do_rescale=this.config.do_rescale??!0,this.rescale_factor=this.config.rescale_factor??1/255,this.do_normalize=this.config.do_normalize,this.do_resize=this.config.do_resize,this.do_thumbnail=this.config.do_thumbnail,this.size=this.config.size,this.size_divisibility=this.config.size_divisibility??this.config.size_divisor,this.do_center_crop=this.config.do_center_crop,this.crop_size=this.config.crop_size,this.do_convert_rgb=this.config.do_convert_rgb??!0,this.do_crop_margin=this.config.do_crop_margin,this.pad_size=this.config.pad_size,this.do_pad=this.config.do_pad,this.do_pad&&!this.pad_size&&this.size&&this.size.width!==void 0&&this.size.height!==void 0&&(this.pad_size=this.size),this.do_flip_channel_order=this.config.do_flip_channel_order??!1}async thumbnail(e,t,_e=2){const Te=e.height,Ee=e.width,xe=t.height,Pe=t.width;let Re=Math.min(Te,xe),ke=Math.min(Ee,Pe);return Re===Te&&ke===Ee?e:(Te>Ee?ke=Math.floor(Ee*Re/Te):Ee>Te&&(Re=Math.floor(Te*ke/Ee)),await e.resize(ke,Re,{resample:_e}))}async crop_margin(e,t=200){const _e=e.clone().grayscale(),Te=min(_e.data)[0],xe=max(_e.data)[0]-Te;if(xe===0)return e;const Pe=t/255;let Re=_e.width,ke=_e.height,Ce=0,Se=0;for(let Ae=0;Ae<_e.height;++Ae){const Ie=Ae*_e.width;for(let Me=0;Me<_e.width;++Me)(_e.data[Ie+Me]-Te)/xe<Pe&&(Re=Math.min(Re,Me),ke=Math.min(ke,Ae),Ce=Math.max(Ce,Me),Se=Math.max(Se,Ae))}return e=await e.crop([Re,ke,Ce,Se]),e}pad_image(e,t,_e,{mode:Te="constant",center:Ee=!1,constant_values:xe=0}={}){const[Pe,Re,ke]=t;let Ce,Se;if(typeof _e=="number"?(Ce=_e,Se=_e):(Ce=_e.width,Se=_e.height),Ce!==Re||Se!==Pe){const Ae=new Float32Array(Ce*Se*ke);if(Array.isArray(xe))for(let Fe=0;Fe<Ae.length;++Fe)Ae[Fe]=xe[Fe%ke];else xe!==0&&Ae.fill(xe);const[Ie,Me]=Ee?[Math.floor((Ce-Re)/2),Math.floor((Se-Pe)/2)]:[0,0];for(let Fe=0;Fe<Pe;++Fe){const Ve=(Fe+Me)*Ce,je=Fe*Re;for(let Be=0;Be<Re;++Be){const qe=(Ve+Be+Ie)*ke,He=(je+Be)*ke;for(let Xe=0;Xe<ke;++Xe)Ae[qe+Xe]=e[He+Xe]}}if(Te==="symmetric"){if(Ee)throw new Error("`center` padding is not supported when `mode` is set to `symmetric`.");const Fe=Pe-1,Ve=Re-1;for(let je=0;je<Se;++je){const Be=je*Ce,qe=calculateReflectOffset(je,Fe)*Re;for(let He=0;He<Ce;++He){if(je<Pe&&He<Re)continue;const Xe=(Be+He)*ke,Je=(qe+calculateReflectOffset(He,Ve))*ke;for(let Qe=0;Qe<ke;++Qe)Ae[Xe+Qe]=e[Je+Qe]}}}e=Ae,t=[Se,Ce,ke]}return[e,t]}rescale(e){for(let t=0;t<e.length;++t)e[t]=this.rescale_factor*e[t]}get_resize_output_image_size(e,t){const[_e,Te]=e.size;let Ee,xe;if(this.do_thumbnail){const{height:Pe,width:Re}=t;Ee=Math.min(Pe,Re)}else Number.isInteger(t)?(Ee=t,xe=this.config.max_size??Ee):t!==void 0&&(Ee=t.shortest_edge,xe=t.longest_edge);if(Ee!==void 0||xe!==void 0){const Pe=Ee===void 0?1:Math.max(Ee/_e,Ee/Te),Re=_e*Pe,ke=Te*Pe,Ce=xe===void 0?1:Math.min(xe/Re,xe/ke);let Se=Math.floor(Number((Re*Ce).toFixed(2))),Ae=Math.floor(Number((ke*Ce).toFixed(2)));return this.size_divisibility!==void 0&&([Se,Ae]=enforce_size_divisibility([Se,Ae],this.size_divisibility)),[Se,Ae]}else if(t!==void 0&&t.width!==void 0&&t.height!==void 0){let Pe=t.width,Re=t.height;if(this.config.keep_aspect_ratio&&this.config.ensure_multiple_of){let ke=Re/Te,Ce=Pe/_e;Math.abs(1-Ce)<Math.abs(1-ke)?ke=Ce:Ce=ke,Re=constraint_to_multiple_of(ke*Te,this.config.ensure_multiple_of),Pe=constraint_to_multiple_of(Ce*_e,this.config.ensure_multiple_of)}return[Pe,Re]}else{if(this.size_divisibility!==void 0)return enforce_size_divisibility([_e,Te],this.size_divisibility);throw new Error(`Could not resize image due to unsupported \`this.size\` option in config: ${JSON.stringify(t)}`)}}async resize(e){const[t,_e]=this.get_resize_output_image_size(e,this.size);return await e.resize(t,_e,{resample:this.resample})}async preprocess(e,{do_normalize:t=null,do_pad:_e=null,do_convert_rgb:Te=null,do_convert_grayscale:Ee=null,do_flip_channel_order:xe=null}={}){this.do_crop_margin&&(e=await this.crop_margin(e));const[Pe,Re]=e.size;if(Te??this.do_convert_rgb?e=e.rgb():Ee&&(e=e.grayscale()),this.do_resize&&(e=await this.resize(e)),this.do_thumbnail&&(e=await this.thumbnail(e,this.size,this.resample)),this.do_center_crop){let Ie,Me;Number.isInteger(this.crop_size)?(Ie=this.crop_size,Me=this.crop_size):(Ie=this.crop_size.width,Me=this.crop_size.height),e=await e.center_crop(Ie,Me)}const ke=[e.height,e.width];let Ce=Float32Array.from(e.data),Se=[e.height,e.width,e.channels];if(this.do_rescale&&this.rescale(Ce),t??this.do_normalize){let Ie=this.image_mean;Array.isArray(this.image_mean)||(Ie=new Array(e.channels).fill(Ie));let Me=this.image_std;if(Array.isArray(this.image_std)||(Me=new Array(e.channels).fill(Ie)),Ie.length!==e.channels||Me.length!==e.channels)throw new Error(`When set to arrays, the length of \`image_mean\` (${Ie.length}) and \`image_std\` (${Me.length}) must match the number of channels in the image (${e.channels}).`);for(let Fe=0;Fe<Ce.length;Fe+=e.channels)for(let Ve=0;Ve<e.channels;++Ve)Ce[Fe+Ve]=(Ce[Fe+Ve]-Ie[Ve])/Me[Ve]}if(_e??this.do_pad){if(this.pad_size)[Ce,Se]=this.pad_image(Ce,[e.height,e.width,e.channels],this.pad_size);else if(this.size_divisibility){const[Ie,Me]=enforce_size_divisibility([Se[1],Se[0]],this.size_divisibility);[Ce,Se]=this.pad_image(Ce,Se,{width:Ie,height:Me})}}if(xe??this.do_flip_channel_order){if(Se[2]!==3)throw new Error("Flipping channel order is only supported for RGB images.");for(let Ie=0;Ie<Ce.length;Ie+=3){const Me=Ce[Ie];Ce[Ie]=Ce[Ie+2],Ce[Ie+2]=Me}}const Ae=new Tensor("float32",Ce,Se).permute(2,0,1);return{original_size:[Re,Pe],reshaped_input_size:ke,pixel_values:Ae}}async _call(e,...t){Array.isArray(e)||(e=[e]);const _e=await Promise.all(e.map(Ee=>this.preprocess(Ee)));return{pixel_values:stack(_e.map(Ee=>Ee.pixel_values),0),original_sizes:_e.map(Ee=>Ee.original_size),reshaped_input_sizes:_e.map(Ee=>Ee.reshaped_input_size)}}}class SegformerFeatureExtractor extends ImageFeatureExtractor{post_process_semantic_segmentation(e,t=null){const _e=e.logits,Te=_e.dims[0];if(t!==null&&t.length!==Te)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const Ee=[];for(let xe=0;xe<Te;++xe){const Pe=t!==null?t[xe]:null;let Re=_e[xe];Pe!==null&&(Re=interpolate(Re,Pe,"bilinear",!1));const[ke,Ce]=Pe??Re.dims.slice(-2),Se=new Tensor("int32",new Int32Array(ke*Ce),[ke,Ce]),Ae=Re[0].data;for(let Ve=1;Ve<Re.dims[0];++Ve){const je=Re[Ve].data;for(let Be=0;Be<je.length;++Be)je[Be]>Ae[Be]&&(Ae[Be]=je[Be],Se.data[Be]=Ve)}const Ie=new Array(Re.dims[0]),Me=Se.data;for(let Ve=0;Ve<Me.length;++Ve){const je=Me[Ve];Ie[je]=je}const Fe=Ie.filter(Ve=>Ve!==void 0);Ee.push({segmentation:Se,labels:Fe})}return Ee}}class DPTFeatureExtractor extends ImageFeatureExtractor{}class DPTImageProcessor extends DPTFeatureExtractor{}class BitImageProcessor extends ImageFeatureExtractor{}class GLPNFeatureExtractor extends ImageFeatureExtractor{}class CLIPFeatureExtractor extends ImageFeatureExtractor{}class ChineseCLIPFeatureExtractor extends ImageFeatureExtractor{}class SiglipImageProcessor extends ImageFeatureExtractor{}class ConvNextFeatureExtractor extends ImageFeatureExtractor{constructor(e){super(e),this.crop_pct=this.config.crop_pct??224/256}async resize(e){const t=this.size?.shortest_edge;if(t===void 0)throw new Error("Size dictionary must contain 'shortest_edge' key.");if(t<384){const _e=Math.floor(t/this.crop_pct),[Te,Ee]=this.get_resize_output_image_size(e,{shortest_edge:_e});e=await e.resize(Te,Ee,{resample:this.resample}),e=await e.center_crop(t,t)}else e=await e.resize(t,t,{resample:this.resample});return e}}class ConvNextImageProcessor extends ConvNextFeatureExtractor{}class ViTFeatureExtractor extends ImageFeatureExtractor{}class ViTImageProcessor extends ImageFeatureExtractor{}class EfficientNetImageProcessor extends ImageFeatureExtractor{constructor(e){super(e),this.include_top=this.config.include_top??!0,this.include_top&&(this.image_std=this.image_std.map(t=>t*t))}}class MobileViTFeatureExtractor extends ImageFeatureExtractor{}class MobileViTImageProcessor extends MobileViTFeatureExtractor{}class OwlViTFeatureExtractor extends ImageFeatureExtractor{post_process_object_detection(...e){return post_process_object_detection(...e)}}class Owlv2ImageProcessor extends OwlViTFeatureExtractor{}class DeiTFeatureExtractor extends ImageFeatureExtractor{}class BeitFeatureExtractor extends ImageFeatureExtractor{}class DonutFeatureExtractor extends ImageFeatureExtractor{pad_image(e,t,_e,Te={}){const[Ee,xe,Pe]=t;let Re=this.image_mean;Array.isArray(this.image_mean)||(Re=new Array(Pe).fill(Re));let ke=this.image_std;Array.isArray(ke)||(ke=new Array(Pe).fill(Re));const Ce=Re.map((Se,Ae)=>-Se/ke[Ae]);return super.pad_image(e,t,_e,{center:!0,constant_values:Ce,...Te})}}class NougatImageProcessor extends DonutFeatureExtractor{}class DetrFeatureExtractor extends ImageFeatureExtractor{async _call(e){const t=await super._call(e),_e=[t.pixel_values.dims[0],64,64],Te=new Tensor("int64",new BigInt64Array(_e.reduce((Ee,xe)=>Ee*xe)).fill(1n),_e);return{...t,pixel_mask:Te}}post_process_object_detection(...e){return post_process_object_detection(...e)}remove_low_and_no_objects(e,t,_e,Te){let Ee=[],xe=[],Pe=[];for(let Re=0;Re<e.dims[0];++Re){let ke=e[Re],Ce=t[Re],Se=max(ke.data)[1];if(Se===Te)continue;let Ie=softmax(ke.data)[Se];Ie>_e&&(Ee.push(Ce),xe.push(Ie),Pe.push(Se))}return[Ee,xe,Pe]}check_segment_validity(e,t,_e,Te=.5,Ee=.8){let xe=[],Pe=0,Re=0;for(let Ce=0;Ce<e.length;++Ce)e[Ce]===_e&&(xe.push(Ce),++Pe),t[_e].data[Ce]>=Te&&++Re;let ke=Pe>0&&Re>0;return ke&&(ke=Pe/Re>Ee),[ke,xe]}compute_segments(e,t,_e,Te,Ee,xe=null,Pe=null){let[Re,ke]=Pe??e[0].dims,Ce=new Tensor("int32",new Int32Array(Re*ke),[Re,ke]),Se=[];if(Pe!==null)for(let Fe=0;Fe<e.length;++Fe)e[Fe]=interpolate(e[Fe],Pe,"bilinear",!1);let Ae=new Int32Array(e[0].data.length),Ie=new Float32Array(e[0].data.length);for(let Fe=0;Fe<e.length;++Fe){let Ve=t[Fe];for(let je=0;je<e[Fe].data.length;++je)e[Fe].data[je]*=Ve,e[Fe].data[je]>Ie[je]&&(Ae[je]=Fe,Ie[je]=e[Fe].data[je])}let Me=0;for(let Fe=0;Fe<_e.length;++Fe){let Ve=_e[Fe],[je,Be]=this.check_segment_validity(Ae,e,Fe,Te,Ee);if(je){++Me;for(let qe of Be)Ce.data[qe]=Me;Se.push({id:Me,label_id:Ve,score:t[Fe]})}}return[Ce,Se]}post_process_panoptic_segmentation(e,t=.5,_e=.5,Te=.8,Ee=null,xe=null){Ee===null&&(console.warn("`label_ids_to_fuse` unset. No instance will be fused."),Ee=new Set);const Pe=e.logits,ke=e.pred_masks.sigmoid();let[Ce,Se,Ae]=Pe.dims;if(Ae-=1,xe!==null&&xe.length!==Ce)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let Ie=[];for(let Me=0;Me<Ce;++Me){let Fe=xe!==null?xe[Me]:null,Ve=Pe[Me],je=ke[Me],[Be,qe,He]=this.remove_low_and_no_objects(Ve,je,t,Ae);if(He.length===0){let[Qe,Ke]=Fe??je.dims.slice(-2),Ye=new Tensor("int32",new Int32Array(Qe*Ke).fill(-1),[Qe,Ke]);Ie.push({segmentation:Ye,segments_info:[]});continue}let[Xe,Je]=this.compute_segments(Be,qe,He,_e,Te,Ee,Fe);Ie.push({segmentation:Xe,segments_info:Je})}return Ie}post_process_instance_segmentation(){throw Error("Not implemented yet")}}class YolosFeatureExtractor extends ImageFeatureExtractor{post_process_object_detection(...e){return post_process_object_detection(...e)}}class SamImageProcessor extends ImageFeatureExtractor{reshape_input_points(e,t,_e){e=structuredClone(e);let Te=calculateDimensions(e);if(Te.length===3)Te=[1,...Te],e=[e];else if(Te.length!==4)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");for(let Ee=0;Ee<e.length;++Ee){let xe=t[Ee],Pe=_e[Ee],Re=[Pe[0]/xe[0],Pe[1]/xe[1]];for(let ke=0;ke<e[Ee].length;++ke)for(let Ce=0;Ce<e[Ee][ke].length;++Ce)for(let Se=0;Se<e[Ee][ke][Ce].length;++Se)e[Ee][ke][Ce][Se]*=Re[Se]}return new Tensor("float32",Float32Array.from(e.flat(1/0)),Te)}add_input_labels(e,t){let _e=calculateDimensions(e);if(_e.length===2)_e=[1,..._e],e=[e];else if(_e.length!==3)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");if(_e.some((Te,Ee)=>Te!==t.dims[Ee]))throw Error(`The first ${_e.length} dimensions of 'input_points' and 'input_labels' must be the same.`);return new Tensor("int64",e.flat(1/0).map(BigInt),_e)}async _call(e,t=null,_e=null){const Te=await super._call(e);if(t&&(Te.input_points=this.reshape_input_points(t,Te.original_sizes,Te.reshaped_input_sizes)),_e){if(!Te.input_points)throw Error("`input_points` must be provided if `input_labels` are provided.");Te.input_labels=this.add_input_labels(_e,Te.input_points)}return Te}post_process_masks(e,t,_e,{mask_threshold:Te=0,binarize:Ee=!0,pad_size:xe=null}={}){const Pe=[];xe=xe??this.pad_size;const Re=[xe.height,xe.width];for(let ke=0;ke<t.length;++ke){const Ce=t[ke],Se=_e[ke],Ae=e[ke],Ie=[];for(let Me=0;Me<Ae.dims[0];++Me){const Fe=Ae[Me];let Ve=interpolate(Fe,Re,"bilinear",!1);if(Ve=Ve.slice(null,[0,Se[0]],[0,Se[1]]),Ve=interpolate(Ve,Ce,"bilinear",!1),Ee){const je=new Uint8Array(Ve.data.length);for(let Be=0;Be<Ve.data.length;++Be)Ve.data[Be]>Te&&(je[Be]=1);Ve=new Tensor("bool",je,Ve.dims)}Ie.push(Ve)}Pe.push(stack(Ie))}return Pe}}class Swin2SRImageProcessor extends ImageFeatureExtractor{pad_image(e,t,_e,Te={}){const[Ee,xe,Pe]=t;return super.pad_image(e,t,{width:xe+(_e-xe%_e)%_e,height:Ee+(_e-Ee%_e)%_e},{mode:"symmetric",center:!1,constant_values:-1,...Te})}}class VitMatteImageProcessor extends ImageFeatureExtractor{async _call(e,t){Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]);const _e=await Promise.all(e.map(xe=>this.preprocess(xe))),Te=await Promise.all(t.map(xe=>this.preprocess(xe,{do_normalize:!1,do_convert_rgb:!1,do_convert_grayscale:!0})));return{pixel_values:stack(_e.map((xe,Pe)=>cat([xe.pixel_values,Te[Pe].pixel_values],0)),0),original_sizes:_e.map(xe=>xe.original_size),reshaped_input_sizes:_e.map(xe=>xe.reshaped_input_size)}}}class WhisperFeatureExtractor extends FeatureExtractor{constructor(e){super(e),this.config.mel_filters??=mel_filter_bank(Math.floor(1+this.config.n_fft/2),this.config.feature_size,0,8e3,this.config.sampling_rate,"slaney","slaney"),this.window=window_function(this.config.n_fft,"hann")}_extract_fbank_features(e){const{data:t,dims:_e}=spectrogram(e,this.window,this.config.n_fft,this.config.hop_length,{power:2,mel_filters:this.config.mel_filters,log_mel:"log10",max_num_frames:this.config.nb_max_frames}),Te=max(t)[0];for(let Ee=0;Ee<t.length;++Ee)t[Ee]=(Math.max(t[Ee],Te-8)+4)/4;return{data:t,dims:_e}}async _call(e){validate_audio_inputs(e,"WhisperFeatureExtractor");let t;e.length>this.config.n_samples?(console.warn("Attempting to extract features for audio longer than 30 seconds. If using a pipeline to extract transcript from a long audio clip, remember to specify `chunk_length_s` and/or `stride_length_s`."),t=e.slice(0,this.config.n_samples)):(t=new Float32Array(this.config.n_samples),t.set(e));const{data:_e,dims:Te}=this._extract_fbank_features(t);return{input_features:new Tensor("float32",_e,[1,...Te])}}}class Wav2Vec2FeatureExtractor extends FeatureExtractor{_zero_mean_unit_var_norm(e){const _e=e.reduce((Ee,xe)=>Ee+xe,0)/e.length,Te=e.reduce((Ee,xe)=>Ee+(xe-_e)**2,0)/e.length;return e.map(Ee=>(Ee-_e)/Math.sqrt(Te+1e-7))}async _call(e){validate_audio_inputs(e,"Wav2Vec2FeatureExtractor"),e instanceof Float64Array&&(e=new Float32Array(e));let t=e;this.config.do_normalize&&(t=this._zero_mean_unit_var_norm(t));const _e=[1,t.length];return{input_values:new Tensor("float32",t,_e),attention_mask:new Tensor("int64",new BigInt64Array(t.length).fill(1n),_e)}}}class SeamlessM4TFeatureExtractor extends FeatureExtractor{constructor(e){super(e);const t=this.config.sampling_rate,_e=mel_filter_bank(256,this.config.num_mel_bins,20,Math.floor(t/2),t,null,"kaldi",!0);for(let Te=0;Te<_e.length;++Te)_e[Te].push(0);this.mel_filters=_e,this.window=window_function(400,"povey",{periodic:!1})}_extract_fbank_features(e,t){return e=e.map(_e=>_e*32768),spectrogram(e,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:t,transpose:!0})}async _call(e,{padding:t=!0,pad_to_multiple_of:_e=2,do_normalize_per_mel_bins:Te=!0,return_attention_mask:Ee=!0}={}){validate_audio_inputs(e,"SeamlessM4TFeatureExtractor");let xe=this._extract_fbank_features(e,this.config.max_length);if(Te){const[Me,Fe]=xe.dims;for(let Ve=0;Ve<Fe;++Ve){let je=0;for(let Xe=0;Xe<Me;++Xe)je+=xe.data[Xe*Fe+Ve];const Be=je/Me;let qe=0;for(let Xe=0;Xe<Me;++Xe)qe+=(xe.data[Xe*Fe+Ve]-Be)**2;qe/=Me-1;const He=Math.sqrt(qe+1e-7);for(let Xe=0;Xe<Me;++Xe){const Je=Xe*Fe+Ve;xe.data[Je]=(xe.data[Je]-Be)/He}}}let Pe;if(t){const[Me,Fe]=xe.dims,Ve=Me%_e;if(Ve>0){const je=new Float32Array(Fe*(Me+Ve));je.set(xe.data),je.fill(this.config.padding_value,xe.data.length);const Be=Me+Ve;xe={data:je,dims:[Be,Fe]},Ee&&(Pe=new Tensor("int64",new BigInt64Array(Be),[1,Be]),Pe.data.fill(1n,0,Me))}}const[Re,ke]=xe.dims,Ce=this.config.stride;if(Re%Ce!==0)throw new Error(`The number of frames (${Re}) must be a multiple of the stride (${Ce}).`);const Ae=new Tensor("float32",xe.data,xe.dims).view(1,Math.floor(Re/Ce),ke*Ce),Ie={input_features:Ae};if(Ee){const Me=Ae.dims[1],Fe=new Tensor("int64",new BigInt64Array(Me),[1,Me]);if(Pe)for(let Ve=1,je=0;Ve<Re;Ve+=Ce,++je)Fe.data[je]=Pe.data[Ve];else Fe.data.fill(1n);Ie.attention_mask=Fe}return Ie}}class ASTFeatureExtractor extends FeatureExtractor{constructor(e){super(e);const t=this.config.sampling_rate,_e=mel_filter_bank(256,this.config.num_mel_bins,20,Math.floor(t/2),t,null,"kaldi",!0);for(let Te=0;Te<_e.length;++Te)_e[Te].push(0);this.mel_filters=_e,this.window=window_function(400,"hann",{periodic:!1}),this.mean=this.config.mean,this.std=this.config.std}_extract_fbank_features(e,t){return spectrogram(e,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:t,transpose:!0})}async _call(e){validate_audio_inputs(e,"ASTFeatureExtractor");const t=this._extract_fbank_features(e,this.config.max_length);if(this.config.do_normalize){const _e=this.std*2;for(let Te=0;Te<t.data.length;++Te)t.data[Te]=(t.data[Te]-this.mean)/_e}return{input_values:new Tensor("float32",t.data,[1,...t.dims])}}}class ClapFeatureExtractor extends FeatureExtractor{constructor(e){super(e),this.mel_filters=mel_filter_bank(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,null,"htk"),this.mel_filters_slaney=mel_filter_bank(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,"slaney","slaney"),this.window=window_function(this.config.fft_window_size,"hann")}_get_input_mel(e,t,_e,Te){let Ee,xe=!1;const Pe=e.length-t;if(Pe>0)if(_e==="rand_trunc"){xe=!0;const Re=Math.floor(Math.random()*(Pe+1));e=e.subarray(Re,Re+t),Ee=this._extract_fbank_features(e,this.mel_filters_slaney,this.config.nb_max_samples),Ee.dims=[1,...Ee.dims]}else throw new Error(`Truncation strategy "${_e}" not implemented`);else{if(Pe<0){let Re=new Float64Array(t);if(Re.set(e),Te==="repeat")for(let ke=e.length;ke<t;ke+=e.length)Re.set(e.subarray(0,Math.min(e.length,t-ke)),ke);else if(Te==="repeatpad")for(let ke=e.length;ke<-Pe;ke+=e.length)Re.set(e,ke);e=Re}if(_e==="fusion")throw new Error(`Truncation strategy "${_e}" not implemented`);Ee=this._extract_fbank_features(e,this.mel_filters_slaney,this.config.nb_max_samples),Ee.dims=[1,...Ee.dims]}return{...Ee,longer:xe}}_extract_fbank_features(e,t,_e=null){return spectrogram(e,this.window,this.config.fft_window_size,this.config.hop_length,{power:2,mel_filters:t,log_mel:"dB",max_num_frames:_e,do_pad:!1,transpose:!0})}async _call(e,{max_length:t=null}={}){validate_audio_inputs(e,"ClapFeatureExtractor");const _e=this._get_input_mel(e,t??this.config.nb_max_samples,this.config.truncation,this.config.padding);return{input_features:new Tensor("float32",_e.data,[1,..._e.dims])}}}class SpeechT5FeatureExtractor extends FeatureExtractor{}class Processor extends Callable{constructor(e){super(),this.feature_extractor=e}async _call(e,...t){return await this.feature_extractor(e,...t)}}class SamProcessor extends Processor{async _call(...e){return await this.feature_extractor(...e)}post_process_masks(...e){return this.feature_extractor.post_process_masks(...e)}reshape_input_points(...e){return this.feature_extractor.reshape_input_points(...e)}}class WhisperProcessor extends Processor{async _call(e){return await this.feature_extractor(e)}}class Wav2Vec2ProcessorWithLM extends Processor{async _call(e){return await this.feature_extractor(e)}}class SpeechT5Processor extends Processor{async _call(e){return await this.feature_extractor(e)}}class OwlViTProcessor extends Processor{}class AutoProcessor{static FEATURE_EXTRACTOR_CLASS_MAPPING={ImageFeatureExtractor,WhisperFeatureExtractor,ViTFeatureExtractor,MobileViTFeatureExtractor,MobileViTImageProcessor,OwlViTFeatureExtractor,Owlv2ImageProcessor,CLIPFeatureExtractor,ChineseCLIPFeatureExtractor,SiglipImageProcessor,ConvNextFeatureExtractor,ConvNextImageProcessor,SegformerFeatureExtractor,BitImageProcessor,DPTImageProcessor,DPTFeatureExtractor,GLPNFeatureExtractor,BeitFeatureExtractor,DeiTFeatureExtractor,DetrFeatureExtractor,YolosFeatureExtractor,DonutFeatureExtractor,NougatImageProcessor,EfficientNetImageProcessor,ViTImageProcessor,VitMatteImageProcessor,SamImageProcessor,Swin2SRImageProcessor,Wav2Vec2FeatureExtractor,SeamlessM4TFeatureExtractor,SpeechT5FeatureExtractor,ASTFeatureExtractor,ClapFeatureExtractor};static PROCESSOR_CLASS_MAPPING={WhisperProcessor,Wav2Vec2ProcessorWithLM,SamProcessor,SpeechT5Processor,OwlViTProcessor};static async from_pretrained(e,{progress_callback:t=null,config:_e=null,cache_dir:Te=null,local_files_only:Ee=!1,revision:xe="main"}={}){let Pe=_e??await getModelJSON(e,"preprocessor_config.json",!0,{progress_callback:t,cache_dir:Te,local_files_only:Ee,revision:xe}),Re=Pe.feature_extractor_type??Pe.image_processor_type,ke=this.FEATURE_EXTRACTOR_CLASS_MAPPING[Re];if(!ke)if(Pe.size!==void 0)console.warn(`Feature extractor type "${Re}" not found, assuming ImageFeatureExtractor due to size parameter in config.`),ke=ImageFeatureExtractor;else throw new Error(`Unknown Feature Extractor type: ${Re}`);let Ce=this.PROCESSOR_CLASS_MAPPING[Pe.processor_class]??Processor,Se=new ke(Pe);return new Ce(Se)}}async function prepareImages(r){return Array.isArray(r)||(r=[r]),await Promise.all(r.map(e=>RawImage.read(e)))}async function prepareAudios(r,e){return Array.isArray(r)||(r=[r]),await Promise.all(r.map(t=>typeof t=="string"||t instanceof URL?read_audio(t,e):t instanceof Float64Array?new Float32Array(t):t))}function get_bounding_box(r,e){e&&(r=r.map(xe=>xe|0));const[t,_e,Te,Ee]=r;return{xmin:t,ymin:_e,xmax:Te,ymax:Ee}}class Pipeline extends Callable{constructor({task:e,model:t,tokenizer:_e=null,processor:Te=null}){super(),this.task=e,this.model=t,this.tokenizer=_e,this.processor=Te}async dispose(){await this.model.dispose()}}class TextClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:t=1}={}){const _e=this.tokenizer(e,{padding:!0,truncation:!0}),Te=await this.model(_e),Ee=this.model.config.problem_type==="multi_label_classification"?Re=>Re.sigmoid().data:Re=>softmax(Re.data),xe=this.model.config.id2label,Pe=[];for(const Re of Te.logits){const ke=Ee(Re),Se=getTopItems(ke,t).map(Ae=>({label:xe[Ae[0]],score:Ae[1]}));t===1?Pe.push(...Se):Pe.push(Se)}return Array.isArray(e)||t===1?Pe:Pe[0]}}class TokenClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{ignore_labels:t=["O"]}={}){const _e=Array.isArray(e),Te=this.tokenizer(_e?e:[e],{padding:!0,truncation:!0}),xe=(await this.model(Te)).logits,Pe=this.model.config.id2label,Re=[];for(let ke=0;ke<xe.dims[0];++ke){const Ce=Te.input_ids[ke],Se=xe[ke],Ae=[];for(let Ie=0;Ie<Se.dims[0];++Ie){const Me=Se[Ie],Fe=max(Me.data)[1],Ve=Pe?Pe[Fe]:`LABEL_${Fe}`;if(t.includes(Ve))continue;const je=this.tokenizer.decode([Ce[Ie].item()],{skip_special_tokens:!0});if(je==="")continue;const Be=softmax(Me.data);Ae.push({entity:Ve,score:Be[Fe],index:Ie,word:je,start:null,end:null})}Re.push(Ae)}return _e?Re:Re[0]}}class QuestionAnsweringPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t,{topk:_e=1}={}){const Te=this.tokenizer(e,{text_pair:t,padding:!0,truncation:!0}),Ee=await this.model(Te),xe=[];for(let Pe=0;Pe<Ee.start_logits.dims[0];++Pe){const Re=Te.input_ids[Pe],ke=Re.indexOf(this.tokenizer.sep_token_id),Ce=Array.from(softmax(Ee.start_logits[Pe].data)).map((Ie,Me)=>[Ie,Me]).filter(Ie=>Ie[1]>ke),Se=Array.from(softmax(Ee.end_logits[Pe].data)).map((Ie,Me)=>[Ie,Me]).filter(Ie=>Ie[1]>ke),Ae=product(Ce,Se).filter(Ie=>Ie[0][1]<=Ie[1][1]).map(Ie=>[Ie[0][1],Ie[1][1],Ie[0][0]*Ie[1][0]]).sort((Ie,Me)=>Me[2]-Ie[2]);for(let Ie=0;Ie<Math.min(Ae.length,_e);++Ie){const[Me,Fe,Ve]=Ae[Ie],je=[...Re].slice(Me,Fe+1),Be=this.tokenizer.decode(je,{skip_special_tokens:!0});xe.push({answer:Be,score:Ve})}}return _e===1?xe[0]:xe}}class FillMaskPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:t=5}={}){const _e=this.tokenizer(e,{padding:!0,truncation:!0}),Te=await this.model(_e),Ee=[];for(let xe=0;xe<_e.input_ids.dims[0];++xe){const Pe=_e.input_ids[xe],Re=Pe.indexOf(this.tokenizer.mask_token_id);if(Re===-1)throw Error(`Mask token (${this.tokenizer.mask_token}) not found in text.`);const Ce=Te.logits[xe][Re],Se=getTopItems(softmax(Ce.data),t);Ee.push(Se.map(Ae=>{const Ie=[...Pe];return Ie[Re]=Ae[0],{score:Ae[1],token:Ae[0],token_str:this.tokenizer.model.vocab[Ae[0]],sequence:this.tokenizer.decode(Ie,{skip_special_tokens:!0})}}))}return Array.isArray(e)?Ee:Ee[0]}}class Text2TextGenerationPipeline extends Pipeline{_key="generated_text";constructor(e){super(e)}async _call(e,t={}){Array.isArray(e)||(e=[e]),this.model.config.prefix&&(e=e.map(Re=>this.model.config.prefix+Re));const _e=this.model.config.task_specific_params;_e&&_e[this.task]&&_e[this.task].prefix&&(e=e.map(Re=>_e[this.task].prefix+Re));const Te=this.tokenizer,Ee={padding:!0,truncation:!0};let xe;this instanceof TranslationPipeline&&"_build_translation_inputs"in Te?xe=Te._build_translation_inputs(e,Ee,t).input_ids:xe=Te(e,Ee).input_ids;const Pe=await this.model.generate(xe,t);return Te.batch_decode(Pe,{skip_special_tokens:!0}).map(Re=>({[this._key]:Re}))}}class SummarizationPipeline extends Text2TextGenerationPipeline{_key="summary_text";constructor(e){super(e)}}class TranslationPipeline extends Text2TextGenerationPipeline{_key="translation_text";constructor(e){super(e)}}function isChat(r){return Array.isArray(r)&&r.every(e=>"role"in e&&"content"in e)}class TextGenerationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t={}){let _e=!1,Te=!1,Ee;if(typeof e=="string")Ee=e=[e];else if(Array.isArray(e)&&e.every(Me=>typeof Me=="string"))_e=!0,Ee=e;else{if(isChat(e))e=[e];else if(Array.isArray(e)&&e.every(isChat))_e=!0;else throw new Error("Input must be a string, an array of strings, a Chat, or an array of Chats");Te=!0,Ee=e.map(Me=>this.tokenizer.apply_chat_template(Me,{tokenize:!1,add_generation_prompt:!0}))}const xe=t.add_special_tokens??!1,Pe=Te?!1:t.return_full_text??!0;this.tokenizer.padding_side="left";const{input_ids:Re,attention_mask:ke}=this.tokenizer(Ee,{add_special_tokens:xe,padding:!0,truncation:!0}),Ce=await this.model.generate(Re,t,null,{inputs_attention_mask:ke});let Se=this.tokenizer.batch_decode(Ce,{skip_special_tokens:!0}),Ae;!Pe&&Re.dims.at(-1)>0&&(Ae=this.tokenizer.batch_decode(Re,{skip_special_tokens:!0}).map(Me=>Me.length));const Ie=Array.from({length:e.length},Me=>[]);for(let Me=0;Me<Se.length;++Me){const Fe=Math.floor(Me/Ce.length*e.length);Ae&&(Se[Me]=Se[Me].slice(Ae[Fe])),Ie[Fe].push({generated_text:Te?[...e[Fe],{role:"assistant",content:Se[Me]}]:Se[Me]})}return!_e&&Ie.length===1?Ie[0]:Ie}}class ZeroShotClassificationPipeline extends Pipeline{constructor(e){super(e),this.label2id=Object.fromEntries(Object.entries(this.model.config.label2id).map(([t,_e])=>[t.toLowerCase(),_e])),this.entailment_id=this.label2id.entailment,this.entailment_id===void 0&&(console.warn("Could not find 'entailment' in label2id mapping. Using 2 as entailment_id."),this.entailment_id=2),this.contradiction_id=this.label2id.contradiction??this.label2id.not_entailment,this.contradiction_id===void 0&&(console.warn("Could not find 'contradiction' in label2id mapping. Using 0 as contradiction_id."),this.contradiction_id=0)}async _call(e,t,{hypothesis_template:_e="This example is {}.",multi_label:Te=!1}={}){const Ee=Array.isArray(e);Ee||(e=[e]),Array.isArray(t)||(t=[t]);const xe=t.map(ke=>_e.replace("{}",ke)),Pe=Te||t.length===1,Re=[];for(const ke of e){const Ce=[];for(const Ie of xe){const Me=this.tokenizer(ke,{text_pair:Ie,padding:!0,truncation:!0}),Fe=await this.model(Me);Pe?Ce.push([Fe.logits.data[this.contradiction_id],Fe.logits.data[this.entailment_id]]):Ce.push(Fe.logits.data[this.entailment_id])}const Ae=(Pe?Ce.map(Ie=>softmax(Ie)[1]):softmax(Ce)).map((Ie,Me)=>[Ie,Me]).sort((Ie,Me)=>Me[0]-Ie[0]);Re.push({sequence:ke,labels:Ae.map(Ie=>t[Ie[1]]),scores:Ae.map(Ie=>Ie[0])})}return Ee?Re:Re[0]}}class FeatureExtractionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{pooling:t="none",normalize:_e=!1,quantize:Te=!1,precision:Ee="binary"}={}){const xe=this.tokenizer(e,{padding:!0,truncation:!0}),Pe=await this.model(xe);let Re=Pe.last_hidden_state??Pe.logits??Pe.token_embeddings;if(t!=="none")if(t==="mean")Re=mean_pooling(Re,xe.attention_mask);else if(t==="cls")Re=Re.slice(null,0);else throw Error(`Pooling method '${t}' not supported.`);return _e&&(Re=Re.normalize(2,-1)),Te&&(Re=quantize_embeddings(Re,Ee)),Re}}class ImageFeatureExtractionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{pool:t=null}={}){const _e=await prepareImages(e),{pixel_values:Te}=await this.processor(_e),Ee=await this.model({pixel_values:Te});let xe;if(t){if(!("pooler_output"in Ee))throw Error("No pooled output was returned. Make sure the model has a 'pooler' layer when using the 'pool' option.");xe=Ee.pooler_output}else xe=Ee.last_hidden_state??Ee.logits??Ee.image_embeds;return xe}}class AudioClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:t=null}={}){const _e=!Array.isArray(e),Te=this.processor.feature_extractor.config.sampling_rate,Ee=await prepareAudios(e,Te),xe=this.model.config.id2label,Pe=[];for(const Re of Ee){const ke=await this.processor(Re),Se=(await this.model(ke)).logits[0],Ie=getTopItems(softmax(Se.data),t).map(Me=>({label:xe[Me[0]],score:Me[1]}));t===1?Pe.push(...Ie):Pe.push(Ie)}return!_e||t===1?Pe:Pe[0]}}class ZeroShotAudioClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t,{hypothesis_template:_e="This is a sound of {}."}={}){const Te=!Array.isArray(e);Te&&(e=[e]);const Ee=t.map(Ce=>_e.replace("{}",Ce)),xe=this.tokenizer(Ee,{padding:!0,truncation:!0}),Pe=this.processor.feature_extractor.config.sampling_rate,Re=await prepareAudios(e,Pe),ke=[];for(const Ce of Re){const Se=await this.processor(Ce),Ae=await this.model({...xe,...Se}),Ie=softmax(Ae.logits_per_audio.data);ke.push([...Ie].map((Me,Fe)=>({score:Me,label:t[Fe]})))}return Te?ke[0]:ke}}class AutomaticSpeechRecognitionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t={}){switch(this.model.config.model_type){case"whisper":return this._call_whisper(e,t);case"wav2vec2":case"wav2vec2-bert":case"unispeech":case"unispeech-sat":case"hubert":return this._call_wav2vec2(e,t);default:throw new Error(`AutomaticSpeechRecognitionPipeline does not support model type '${this.model.config.model_type}'.`)}}async _call_wav2vec2(e,t={}){t.language&&console.warn('`language` parameter is not yet supported for `wav2vec2` models, defaulting to "English".'),t.task&&console.warn('`task` parameter is not yet supported for `wav2vec2` models, defaulting to "transcribe".');const _e=!Array.isArray(e);_e&&(e=[e]);const Te=this.processor.feature_extractor.config.sampling_rate,Ee=await prepareAudios(e,Te),xe=[];for(const Pe of Ee){const Re=await this.processor(Pe),Ce=(await this.model(Re)).logits[0],Se=[];for(const Ie of Ce)Se.push(max(Ie.data)[1]);const Ae=this.tokenizer.decode(Se);xe.push({text:Ae})}return _e?xe[0]:xe}async _call_whisper(e,t={}){const _e=t.return_timestamps??!1,Te=t.chunk_length_s??0,Ee=t.chunk_callback??null,xe=t.force_full_sequences??!1;let Pe=t.stride_length_s??null;_e==="word"&&(t.return_token_timestamps=!0);const Re=pop(t,"language",null),ke=pop(t,"task",null);if(Re||ke||_e){if(t.forced_decoder_ids)throw new Error("Cannot specify `language`/`task`/`return_timestamps` and `forced_decoder_ids` at the same time.");const Ve=this.tokenizer.get_decoder_prompt_ids({language:Re,task:ke,no_timestamps:!_e});Ve.length>0&&(t.forced_decoder_ids=Ve)}const Ce=!Array.isArray(e);Ce&&(e=[e]);const Se=this.processor.feature_extractor.config.chunk_length/this.model.config.max_source_positions,Ae=this.processor.feature_extractor.config.hop_length,Ie=this.processor.feature_extractor.config.sampling_rate,Me=await prepareAudios(e,Ie),Fe=[];for(const Ve of Me){let je=[];if(Te>0){if(Pe===null)Pe=Te/6;else if(Te<=Pe)throw Error("`chunk_length_s` must be larger than `stride_length_s`.");const He=Ie*Te,Xe=Ie*Pe,Je=He-2*Xe;let Qe=0;for(;Qe<Ve.length;){const Ke=Ve.subarray(Qe,Qe+He),Ye=await this.processor(Ke),pn=Qe===0,un=Qe+Je>=Ve.length;je.push({stride:[Ke.length,pn?0:Xe,un?0:Xe],input_features:Ye.input_features,is_last:un}),Qe+=Je}}else je=[{stride:[Ve.length,0,0],input_features:(await this.processor(Ve)).input_features,is_last:!0}];for(const He of je){t.num_frames=Math.floor(He.stride[0]/Ae);const Xe=await this.model.generate(He.input_features,t);_e==="word"?(He.tokens=Xe.sequences[0],He.token_timestamps=Xe.token_timestamps.tolist()[0].map(Je=>round(Je,2))):He.tokens=Xe[0],He.stride=He.stride.map(Je=>Je/Ie),Ee!==null&&Ee(He)}const[Be,qe]=this.tokenizer._decode_asr(je,{time_precision:Se,return_timestamps:_e,force_full_sequences:xe});Fe.push({text:Be,...qe})}return Ce?Fe[0]:Fe}}class ImageToTextPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t={}){const _e=Array.isArray(e),Te=await prepareImages(e),{pixel_values:Ee}=await this.processor(Te),xe=[];for(const Pe of Ee){Pe.dims=[1,...Pe.dims];const Re=await this.model.generate(Pe,t),ke=this.tokenizer.batch_decode(Re,{skip_special_tokens:!0}).map(Ce=>({generated_text:Ce.trim()}));xe.push(ke)}return _e?xe:xe[0]}}class ImageClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:t=1}={}){const _e=Array.isArray(e),Te=await prepareImages(e),{pixel_values:Ee}=await this.processor(Te),xe=await this.model({pixel_values:Ee}),Pe=this.model.config.id2label,Re=[];for(const ke of xe.logits){const Se=getTopItems(softmax(ke.data),t).map(Ae=>({label:Pe[Ae[0]],score:Ae[1]}));t===1?Re.push(...Se):Re.push(Se)}return _e||t===1?Re:Re[0]}}class ImageSegmentationPipeline extends Pipeline{constructor(e){super(e),this.subtasks_mapping={panoptic:"post_process_panoptic_segmentation",instance:"post_process_instance_segmentation",semantic:"post_process_semantic_segmentation"}}async _call(e,{threshold:t=.5,mask_threshold:_e=.5,overlap_mask_area_threshold:Te=.8,label_ids_to_fuse:Ee=null,target_sizes:xe=null,subtask:Pe=null}={}){if(Array.isArray(e)&&e.length!==1)throw Error("Image segmentation pipeline currently only supports a batch size of 1.");const ke=await prepareImages(e),Ce=ke.map(je=>[je.height,je.width]),{pixel_values:Se,pixel_mask:Ae}=await this.processor(ke),Ie=await this.model({pixel_values:Se,pixel_mask:Ae});let Me=null;if(Pe!==null)Me=this.subtasks_mapping[Pe];else for(let[je,Be]of Object.entries(this.subtasks_mapping))if(Be in this.processor.feature_extractor){Me=this.processor.feature_extractor[Be].bind(this.processor.feature_extractor),Pe=je;break}const Fe=this.model.config.id2label,Ve=[];if(Pe==="panoptic"||Pe==="instance"){const je=Me(Ie,t,_e,Te,Ee,xe??Ce)[0],Be=je.segmentation;for(const qe of je.segments_info){const He=new Uint8ClampedArray(Be.data.length);for(let Je=0;Je<Be.data.length;++Je)Be.data[Je]===qe.id&&(He[Je]=255);const Xe=new RawImage(He,Be.dims[1],Be.dims[0],1);Ve.push({score:qe.score,label:Fe[qe.label_id],mask:Xe})}}else if(Pe==="semantic"){const{segmentation:je,labels:Be}=Me(Ie,xe??Ce)[0];for(const qe of Be){const He=new Uint8ClampedArray(je.data.length);for(let Je=0;Je<je.data.length;++Je)je.data[Je]===qe&&(He[Je]=255);const Xe=new RawImage(He,je.dims[1],je.dims[0],1);Ve.push({score:null,label:Fe[qe],mask:Xe})}}else throw Error(`Subtask ${Pe} not supported.`);return Ve}}class ZeroShotImageClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t,{hypothesis_template:_e="This is a photo of {}"}={}){const Te=Array.isArray(e),Ee=await prepareImages(e),xe=t.map(Ae=>_e.replace("{}",Ae)),Pe=this.tokenizer(xe,{padding:this.model.config.model_type==="siglip"?"max_length":!0,truncation:!0}),{pixel_values:Re}=await this.processor(Ee),ke=await this.model({...Pe,pixel_values:Re}),Ce=this.model.config.model_type==="siglip"?Ae=>Ae.sigmoid().data:Ae=>softmax(Ae.data),Se=[];for(const Ae of ke.logits_per_image){const Me=[...Ce(Ae)].map((Fe,Ve)=>({score:Fe,label:t[Ve]}));Me.sort((Fe,Ve)=>Ve.score-Fe.score),Se.push(Me)}return Te?Se:Se[0]}}class ObjectDetectionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{threshold:t=.9,percentage:_e=!1}={}){const Te=Array.isArray(e);if(Te&&e.length!==1)throw Error("Object detection pipeline currently only supports a batch size of 1.");const Ee=await prepareImages(e),xe=_e?null:Ee.map(Ie=>[Ie.height,Ie.width]),{pixel_values:Pe,pixel_mask:Re}=await this.processor(Ee),ke=await this.model({pixel_values:Pe,pixel_mask:Re}),Ce=this.processor.feature_extractor.post_process_object_detection(ke,t,xe),Se=this.model.config.id2label,Ae=Ce.map(Ie=>Ie.boxes.map((Me,Fe)=>({score:Ie.scores[Fe],label:Se[Ie.classes[Fe]],box:get_bounding_box(Me,!_e)})));return Te?Ae:Ae[0]}}class ZeroShotObjectDetectionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t,{threshold:_e=.1,topk:Te=null,percentage:Ee=!1}={}){const xe=Array.isArray(e),Pe=await prepareImages(e),Re=this.tokenizer(t,{padding:!0,truncation:!0}),ke=await this.processor(Pe),Ce=[];for(let Se=0;Se<Pe.length;++Se){const Ae=Pe[Se],Ie=Ee?null:[[Ae.height,Ae.width]],Me=ke.pixel_values[Se].unsqueeze_(0),Fe=await this.model({...Re,pixel_values:Me}),Ve=this.processor.feature_extractor.post_process_object_detection(Fe,_e,Ie,!0)[0];let je=Ve.boxes.map((Be,qe)=>({score:Ve.scores[qe],label:t[Ve.classes[qe]],box:get_bounding_box(Be,!Ee)})).sort((Be,qe)=>qe.score-Be.score);Te!==null&&(je=je.slice(0,Te)),Ce.push(je)}return xe?Ce:Ce[0]}}class DocumentQuestionAnsweringPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t,_e={}){const Te=(await prepareImages(e))[0],{pixel_values:Ee}=await this.processor(Te),xe=`<s_docvqa><s_question>${t}</s_question><s_answer>`,Pe=this.tokenizer(xe,{add_special_tokens:!1,padding:!0,truncation:!0}).input_ids,Re=await this.model.generate(Ee,{..._e,decoder_input_ids:Pe,max_length:this.model.config.decoder.max_position_embeddings}),Ce=this.tokenizer.batch_decode(Re)[0].match(/<s_answer>(.*?)<\/s_answer>/);let Se=null;return Ce&&Ce.length>=2&&(Se=Ce[1].trim()),[{answer:Se}]}}class TextToAudioPipeline extends Pipeline{DEFAULT_VOCODER_ID="Xenova/speecht5_hifigan";constructor(e){super(e),this.vocoder=e.vocoder??null}async _call(e,{speaker_embeddings:t=null}={}){return this.processor?this._call_text_to_spectrogram(e,{speaker_embeddings:t}):this._call_text_to_waveform(e)}async _call_text_to_waveform(e){const t=this.tokenizer(e,{padding:!0,truncation:!0}),{waveform:_e}=await this.model(t),Te=this.model.config.sampling_rate;return{audio:_e.data,sampling_rate:Te}}async _call_text_to_spectrogram(e,{speaker_embeddings:t}){if(this.vocoder||(console.log("No vocoder specified, using default HifiGan vocoder."),this.vocoder=await AutoModel.from_pretrained(this.DEFAULT_VOCODER_ID,{quantized:!1})),(typeof t=="string"||t instanceof URL)&&(t=new Float32Array(await(await fetch(t)).arrayBuffer())),t instanceof Float32Array)t=new Tensor("float32",t,[1,t.length]);else if(!(t instanceof Tensor))throw new Error("Speaker embeddings must be a `Tensor`, `Float32Array`, `string`, or `URL`.");const{input_ids:_e}=this.tokenizer(e,{padding:!0,truncation:!0}),{waveform:Te}=await this.model.generate_speech(_e,t,{vocoder:this.vocoder}),Ee=this.processor.feature_extractor.config.sampling_rate;return{audio:Te.data,sampling_rate:Ee}}}class ImageToImagePipeline extends Pipeline{constructor(e){super(e)}async _call(e){const t=await prepareImages(e),_e=await this.processor(t),Te=await this.model(_e),Ee=[];for(const xe of Te.reconstruction){const Pe=xe.squeeze().clamp_(0,1).mul_(255).round_().to("uint8");Ee.push(RawImage.fromTensor(Pe))}return Ee.length>1?Ee:Ee[0]}}class DepthEstimationPipeline extends Pipeline{constructor(e){super(e)}async _call(e){const t=await prepareImages(e),_e=await this.processor(t),{predicted_depth:Te}=await this.model(_e),Ee=[];for(let xe=0;xe<t.length;++xe){const Pe=interpolate(Te[xe],t[xe].size.reverse(),"bilinear",!1),Re=Pe.mul_(255/max(Pe.data)[0]).to("uint8");Ee.push({predicted_depth:Te[xe],depth:RawImage.fromTensor(Re)})}return Ee.length>1?Ee:Ee[0]}}const SUPPORTED_TASKS=Object.freeze({"text-classification":{tokenizer:AutoTokenizer,pipeline:TextClassificationPipeline,model:AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-finetuned-sst-2-english"},type:"text"},"token-classification":{tokenizer:AutoTokenizer,pipeline:TokenClassificationPipeline,model:AutoModelForTokenClassification,default:{model:"Xenova/bert-base-multilingual-cased-ner-hrl"},type:"text"},"question-answering":{tokenizer:AutoTokenizer,pipeline:QuestionAnsweringPipeline,model:AutoModelForQuestionAnswering,default:{model:"Xenova/distilbert-base-cased-distilled-squad"},type:"text"},"fill-mask":{tokenizer:AutoTokenizer,pipeline:FillMaskPipeline,model:AutoModelForMaskedLM,default:{model:"Xenova/bert-base-uncased"},type:"text"},summarization:{tokenizer:AutoTokenizer,pipeline:SummarizationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/distilbart-cnn-6-6"},type:"text"},translation:{tokenizer:AutoTokenizer,pipeline:TranslationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/t5-small"},type:"text"},"text2text-generation":{tokenizer:AutoTokenizer,pipeline:Text2TextGenerationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/flan-t5-small"},type:"text"},"text-generation":{tokenizer:AutoTokenizer,pipeline:TextGenerationPipeline,model:AutoModelForCausalLM,default:{model:"Xenova/gpt2"},type:"text"},"zero-shot-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotClassificationPipeline,model:AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-mnli"},type:"text"},"audio-classification":{pipeline:AudioClassificationPipeline,model:AutoModelForAudioClassification,processor:AutoProcessor,default:{model:"Xenova/wav2vec2-base-superb-ks"},type:"audio"},"zero-shot-audio-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotAudioClassificationPipeline,model:AutoModel,processor:AutoProcessor,default:{model:"Xenova/clap-htsat-unfused"},type:"multimodal"},"automatic-speech-recognition":{tokenizer:AutoTokenizer,pipeline:AutomaticSpeechRecognitionPipeline,model:[AutoModelForSpeechSeq2Seq,AutoModelForCTC],processor:AutoProcessor,default:{model:"Xenova/whisper-tiny.en"},type:"multimodal"},"text-to-audio":{tokenizer:AutoTokenizer,pipeline:TextToAudioPipeline,model:[AutoModelForTextToWaveform,AutoModelForTextToSpectrogram],processor:[AutoProcessor,null],default:{model:"Xenova/speecht5_tts"},type:"text"},"image-to-text":{tokenizer:AutoTokenizer,pipeline:ImageToTextPipeline,model:AutoModelForVision2Seq,processor:AutoProcessor,default:{model:"Xenova/vit-gpt2-image-captioning"},type:"multimodal"},"image-classification":{pipeline:ImageClassificationPipeline,model:AutoModelForImageClassification,processor:AutoProcessor,default:{model:"Xenova/vit-base-patch16-224"},type:"multimodal"},"image-segmentation":{pipeline:ImageSegmentationPipeline,model:[AutoModelForImageSegmentation,AutoModelForSemanticSegmentation],processor:AutoProcessor,default:{model:"Xenova/detr-resnet-50-panoptic"},type:"multimodal"},"zero-shot-image-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotImageClassificationPipeline,model:AutoModel,processor:AutoProcessor,default:{model:"Xenova/clip-vit-base-patch32"},type:"multimodal"},"object-detection":{pipeline:ObjectDetectionPipeline,model:AutoModelForObjectDetection,processor:AutoProcessor,default:{model:"Xenova/detr-resnet-50"},type:"multimodal"},"zero-shot-object-detection":{tokenizer:AutoTokenizer,pipeline:ZeroShotObjectDetectionPipeline,model:AutoModelForZeroShotObjectDetection,processor:AutoProcessor,default:{model:"Xenova/owlvit-base-patch32"},type:"multimodal"},"document-question-answering":{tokenizer:AutoTokenizer,pipeline:DocumentQuestionAnsweringPipeline,model:AutoModelForDocumentQuestionAnswering,processor:AutoProcessor,default:{model:"Xenova/donut-base-finetuned-docvqa"},type:"multimodal"},"image-to-image":{pipeline:ImageToImagePipeline,model:AutoModelForImageToImage,processor:AutoProcessor,default:{model:"Xenova/swin2SR-classical-sr-x2-64"},type:"image"},"depth-estimation":{pipeline:DepthEstimationPipeline,model:AutoModelForDepthEstimation,processor:AutoProcessor,default:{model:"Xenova/dpt-large"},type:"image"},"feature-extraction":{tokenizer:AutoTokenizer,pipeline:FeatureExtractionPipeline,model:AutoModel,default:{model:"Xenova/all-MiniLM-L6-v2"},type:"text"},"image-feature-extraction":{processor:AutoProcessor,pipeline:ImageFeatureExtractionPipeline,model:[AutoModelForImageFeatureExtraction,AutoModel],default:{model:"Xenova/vit-base-patch16-224-in21k"},type:"image"}}),TASK_ALIASES=Object.freeze({"sentiment-analysis":"text-classification",ner:"token-classification",asr:"automatic-speech-recognition","text-to-speech":"text-to-audio",embeddings:"feature-extraction"});async function pipeline(r,e=null,{quantized:t=!0,progress_callback:_e=null,config:Te=null,cache_dir:Ee=null,local_files_only:xe=!1,revision:Pe="main",model_file_name:Re=null}={}){r=TASK_ALIASES[r]??r;const ke=SUPPORTED_TASKS[r.split("_",1)[0]];if(!ke)throw Error(`Unsupported pipeline: ${r}. Must be one of [${Object.keys(SUPPORTED_TASKS)}]`);e||(e=ke.default.model,console.log(`No model specified. Using default model: "${e}".`));const Ce={quantized:t,progress_callback:_e,config:Te,cache_dir:Ee,local_files_only:xe,revision:Pe,model_file_name:Re},Se=new Map([["tokenizer",ke.tokenizer],["model",ke.model],["processor",ke.processor]]),Ae=await loadItems(Se,e,Ce);Ae.task=r,dispatchCallback(_e,{status:"ready",task:r,model:e});const Ie=ke.pipeline;return new Ie(Ae)}async function loadItems(r,e,t){const _e=Object.create(null),Te=[];for(let[Ee,xe]of r.entries()){if(!xe)continue;let Pe;Array.isArray(xe)?Pe=new Promise(async(Re,ke)=>{let Ce;for(let Se of xe){if(Se===null){Re(null);return}try{Re(await Se.from_pretrained(e,t));return}catch(Ae){Ce=Ae}}ke(Ce)}):Pe=xe.from_pretrained(e,t),_e[Ee]=Pe,Te.push(Pe)}await Promise.all(Te);for(let[Ee,xe]of Object.entries(_e))_e[Ee]=await xe;return _e}let transcriber=null;async function loadModel(){if(!transcriber)try{console.log("📦 Loading Whisper model from /models/whisper-tiny..."),transcriber=await pipeline("automatic-speech-recognition","/models/whisper-tiny",{quantized:!0,local_files_only:!0}),console.log("✅ Whisper model loaded successfully.")}catch(r){console.error("❌ Failed to load model:",r),alert("⚠️ Failed to load Whisper model. Ensure correct files exist in public/models/whisper-tiny/")}return transcriber}function VoiceFeedback(){const[r,e]=reactExports.useState(!1),[t,_e]=reactExports.useState(!1),[Te,Ee]=reactExports.useState(""),[xe,Pe]=reactExports.useState(""),[Re,ke]=reactExports.useState(null),[Ce,Se]=reactExports.useState("👍"),[Ae,Ie]=reactExports.useState(!1),Me=reactExports.useRef(null),Fe=reactExports.useRef([]);reactExports.useEffect(()=>(loadModel(),onAuthStateChanged(auth,Je=>{Je&&ke(Je.uid)})),[]);const Ve=async()=>{try{const Je=await navigator.mediaDevices.getUserMedia({audio:!0});Me.current=new MediaRecorder(Je),Fe.current=[],Me.current.ondataavailable=Qe=>Fe.current.push(Qe.data),Me.current.onstop=Be,Me.current.start(),e(!0),Ie(!0)}catch(Je){console.error("🎙️ Mic access failed:",Je),alert("⚠️ Please allow microphone access.")}},je=()=>Me.current?.stop(),Be=async()=>{_e(!0);const Je=new Blob(Fe.current,{type:"audio/webm"});try{const Qe=await Je.arrayBuffer(),Ke=await loadModel();if(!Ke){Ee("❌ Whisper model not available.");return}const{text:Ye}=await Ke(Qe);Ee(Ye),await qe(Ye)}catch(Qe){console.error("❌ Transcription failed:",Qe),Ee("❌ Could not transcribe audio.")}finally{_e(!1),e(!1),Ie(!1)}},qe=async Je=>{try{const Ke=(await axios.post("https://api.groq.com/openai/v1/chat/completions",{model:"llama3-8b-8192",messages:[{role:"system",content:"You're VoiceMirror by Mindmorph: give warm, constructive speaking feedback."},{role:"user",content:Je}],temperature:.7},{headers:{Authorization:"Bearer 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"}})).data.choices[0]?.message?.content||"⚠️ No feedback generated.";Pe(Ke),He(Ke),Re&&await addDoc(collection(db,"voicemirror",Re,"sessions"),{transcript:Je,feedback:Ke,reaction:Ce,createdAt:serverTimestamp()})}catch(Qe){console.error("⚠️ AI response error:",Qe),Pe("⚠️ Could not generate feedback.")}},He=Je=>{const Qe=new SpeechSynthesisUtterance(Je);Qe.lang="en-IN",speechSynthesis.speak(Qe)},Xe=()=>{const Je=new E;Je.text("🎙️ Transcript:",10,10),Je.text(Te||"None",10,20),Je.text("🧠 Feedback:",10,40),Je.text(xe||"None",10,50),Je.save("VoiceMirror.pdf")};return jsxRuntimeExports.jsx("div",{className:"min-h-screen p-6 bg-gradient-to-br from-indigo-100 to-white dark:from-gray-900 dark:to-black text-gray-900 dark:text-white font-poppins",children:jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto bg-white/30 dark:bg-white/10 backdrop-blur-md p-6 rounded-2xl shadow-lg",children:[jsxRuntimeExports.jsx("h1",{className:"text-center text-3xl font-bold text-indigo-700 dark:text-indigo-300 mb-6",children:"🎤 VoiceMirror – Speak. Reflect. Improve."}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[jsxRuntimeExports.jsxs("button",{onClick:r?je:Ve,className:`px-6 py-3 rounded-full text-white shadow-md flex items-center gap-2 transition-all ${r?"bg-red-600 hover:bg-red-700":"bg-indigo-600 hover:bg-indigo-700"}`,children:[r?jsxRuntimeExports.jsx(CircleStop,{size:20}):jsxRuntimeExports.jsx(Mic,{size:20}),r?"Stop":"Record"]}),jsxRuntimeExports.jsx("button",{onClick:Xe,className:"underline text-indigo-600 hover:text-indigo-800 text-sm self-center",children:"📄 Export PDF"})]}),Ae&&jsxRuntimeExports.jsx("div",{className:"flex justify-center mb-6 space-x-1 h-10",children:[...Array(10)].map((Je,Qe)=>jsxRuntimeExports.jsx("div",{className:"w-2 bg-indigo-400 rounded animate-pulse",style:{animationDelay:`${Qe*100}ms`}},Qe))}),t&&jsxRuntimeExports.jsx("p",{className:"text-center text-gray-600 mb-4",children:"🧠 Processing…"}),Te&&jsxRuntimeExports.jsxs("div",{className:"bg-white/40 dark:bg-white/10 p-4 mb-6 rounded-xl border shadow-inner",children:[jsxRuntimeExports.jsx("h2",{className:"font-semibold text-indigo-700 dark:text-indigo-300 mb-2",children:"📝 Transcript"}),jsxRuntimeExports.jsx("p",{children:Te})]}),xe&&jsxRuntimeExports.jsxs("div",{className:"bg-indigo-100/40 dark:bg-indigo-300/10 p-4 rounded-xl border shadow-md",children:[jsxRuntimeExports.jsx("h2",{className:"font-semibold text-indigo-800 dark:text-indigo-300 mb-2",children:"🤖 Feedback"}),jsxRuntimeExports.jsx("p",{children:xe}),jsxRuntimeExports.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>He(xe),className:"flex items-center gap-2 text-indigo-600 hover:text-indigo-800 text-sm",children:[jsxRuntimeExports.jsx(Volume2,{size:18})," Hear Again"]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 text-xl",children:["👍","❤️","😂","🤯","🤔"].map(Je=>jsxRuntimeExports.jsx("button",{onClick:()=>Se(Je),className:Ce===Je?"opacity-100":"opacity-50",children:Je},Je))})]})]})]})})}function Home(){const[r,e]=reactExports.useState(!0);reactExports.useEffect(()=>{const Ie=setTimeout(()=>e(!1),1500);return()=>clearTimeout(Ie)},[]);const t=[{title:"Career Mentor",desc:"Get career advice powered by your strengths and passions.",icon:jsxRuntimeExports.jsx(GraduationCap,{className:"w-6 h-6 text-purple-400"}),link:"/careercrack"},{title:"Mood Mirror",desc:"Chat with an AI that understands your emotions and tracks your mood.",icon:jsxRuntimeExports.jsx(Brain,{className:"w-6 h-6 text-purple-400"}),link:"/moodmirror"},{title:"Scholarship Scout",desc:"Find best-fit scholarships based on your background & interests.",icon:jsxRuntimeExports.jsx(Target,{className:"w-6 h-6 text-purple-400"}),link:"/scholarships"},{title:"Smart Notes",desc:"Organize your notes with AI tagging and outlines.",icon:jsxRuntimeExports.jsx(NotebookPen,{className:"w-6 h-6 text-purple-400"}),link:"/smartnotes"},{title:"Voice to Text",desc:"Transcribe your ideas with whisper-accurate AI.",icon:jsxRuntimeExports.jsx(Mic,{className:"w-6 h-6 text-purple-400"}),link:"/voicefeedback"},{title:"PDF Exports",desc:"Download your chats and notes instantly.",icon:jsxRuntimeExports.jsx(FileText,{className:"w-6 h-6 text-purple-400"}),link:"/careercrack"}],_e=[{name:"Ananya S.",quote:"EDGEx helped me discover a career path I never even considered. Life-changing!",role:"Class 12, Delhi"},{name:"Rohan M.",quote:"MoodMirror is like talking to a friend who truly understands you. So cool!",role:"Class 10, Mumbai"},{name:"Sneha T.",quote:"The scholarship tool got me 3 perfect matches. This is the future of guidance!",role:"Commerce Student, Kolkata"}],[[Te,Ee],xe]=reactExports.useState([0,0]),Pe=Ie=>{xe(([Me])=>[(Me+Ie+_e.length)%_e.length,Ie])},{scrollYProgress:Re}=useScroll(),ke=useTransform(Re,[0,1],["0%","50%"]),Ce=[{label:"Students Helped",value:5700},{label:"Scholarships Found",value:1300},{label:"Mood Sessions",value:25e3}],[Se,Ae]=reactExports.useState(Ce.map(()=>0));return reactExports.useEffect(()=>{const Ie=setInterval(()=>{Ae(Me=>Me.map((Fe,Ve)=>{const je=Ce[Ve].value;return Fe<je?Fe+Math.ceil(je/40):je}))},50);return()=>clearInterval(Ie)},[]),r?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-screen bg-[#0a0a14]",children:jsxRuntimeExports.jsx(motion.div,{className:"w-10 h-10 rounded-full bg-purple-500",animate:{scale:[1,1.5,1]},transition:{repeat:1/0,duration:1}})}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-[#0a0a14] text-white font-sans overflow-x-hidden",children:[jsxRuntimeExports.jsxs("section",{className:"relative overflow-hidden py-24 px-6 lg:px-20 flex flex-col items-center text-center",children:[jsxRuntimeExports.jsx(motion.div,{style:{y:ke},className:"absolute top-0 left-1/2 -translate-x-1/2 w-[800px] h-[800px] bg-purple-500 opacity-30 blur-3xl rounded-full z-0"}),jsxRuntimeExports.jsxs(motion.svg,{className:"absolute inset-0 w-full h-full z-0 opacity-5",viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{y:ke},children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsx("pattern",{id:"grid",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("path",{d:"M 10 0 L 0 0 0 10",fill:"none",stroke:"white",strokeWidth:"0.2"})})}),jsxRuntimeExports.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.7},className:"z-10 max-w-4xl",children:[jsxRuntimeExports.jsxs("h1",{className:"text-4xl md:text-6xl font-bold leading-tight text-white mb-6",children:["Think better with ",jsxRuntimeExports.jsx("span",{className:"text-purple-400",children:"EDGEx"})]}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-300 mb-8",children:"Your all-in-one AI toolkit: career mentor, mood companion, scholarship tracker & more."}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-4",children:[jsxRuntimeExports.jsxs(Link,{to:"/careercrack",className:"bg-purple-600 hover:bg-purple-700 transition px-6 py-3 rounded-lg text-white font-semibold flex items-center gap-2",children:["Start Exploring ",jsxRuntimeExports.jsx(ArrowRight,{size:18})]}),jsxRuntimeExports.jsx("a",{href:"#features",className:"text-gray-400 hover:text-white underline",children:"Learn More"})]})]})]}),jsxRuntimeExports.jsxs("section",{id:"features",className:"py-20 px-6 lg:px-20 bg-[#0e0e1a]",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-center mb-12 text-white",children:"What can EDGEx AI do?"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto text-white",children:t.map((Ie,Me)=>{const Fe=jsxRuntimeExports.jsxs(motion.div,{whileHover:{scale:1.03},initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.4,delay:Me*.1},viewport:{once:!0},className:"bg-glass backdrop-blur-md p-6 rounded-xl border border-white/10 hover:shadow-xl transition cursor-pointer",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[Ie.icon,jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold",children:Ie.title})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:Ie.desc})]},Me);return Ie.link?jsxRuntimeExports.jsx(Link,{to:Ie.link,children:Fe},Me):jsxRuntimeExports.jsx("div",{children:Fe},Me)})})]}),jsxRuntimeExports.jsx("section",{className:"py-20 bg-[#0a0a14] text-center",children:jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-10 max-w-6xl mx-auto",children:Ce.map((Ie,Me)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:Me*.2},viewport:{once:!0},children:[jsxRuntimeExports.jsxs("p",{className:"text-4xl font-bold text-purple-400",children:[Se[Me],"+"]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 mt-2",children:Ie.label})]},Me))})}),jsxRuntimeExports.jsxs("section",{className:"py-24 px-6 lg:px-20 bg-[#0e0e1a]",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-center mb-12 text-white",children:"🌟 What Students Say"}),jsxRuntimeExports.jsxs("div",{className:"relative max-w-3xl mx-auto",children:[jsxRuntimeExports.jsx(AnimatePresence,{initial:!1,custom:Ee,children:jsxRuntimeExports.jsxs(motion.div,{className:"bg-[#1a1a2e] p-8 rounded-xl border border-white/10 text-white",initial:{x:Ee>0?300:-300,opacity:0},animate:{x:0,opacity:1},exit:{x:Ee<0?300:-300,opacity:0},transition:{duration:.6},children:[jsxRuntimeExports.jsxs("p",{className:"text-lg italic mb-4",children:["“",_e[Te].quote,"”"]}),jsxRuntimeExports.jsx("p",{className:"font-semibold",children:_e[Te].name}),jsxRuntimeExports.jsx("p",{className:"text-sm text-purple-300",children:_e[Te].role})]},Te)}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between mt-6",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Pe(-1),className:"text-purple-400 hover:text-purple-600 transition",children:"← Previous"}),jsxRuntimeExports.jsx("button",{onClick:()=>Pe(1),className:"text-purple-400 hover:text-purple-600 transition",children:"Next →"})]})]})]}),jsxRuntimeExports.jsxs("section",{className:"relative z-10 bg-[#12121c] py-20 px-6 lg:px-20 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[600px] h-[600px] bg-purple-600/30 blur-[150px] rounded-full z-0"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 right-0 w-[400px] h-[400px] bg-indigo-500/20 blur-[120px] rounded-full z-0"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto text-center",children:[jsxRuntimeExports.jsxs(motion.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},className:"text-4xl font-bold mb-4 text-white",children:["Ready to ",jsxRuntimeExports.jsx("span",{className:"text-purple-400",children:"level up"})," your journey?"]}),jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"text-gray-400 text-lg mb-8",children:"Start exploring EDGEx’s tools and get ahead in your academic & personal path."}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},transition:{duration:.7,delay:.3},children:jsxRuntimeExports.jsx(Link,{to:"/careercrack",className:"inline-block bg-purple-600 hover:bg-purple-700 transition px-8 py-3 text-lg font-semibold rounded-lg text-white shadow-xl",children:"Start Now →"})})]})]}),jsxRuntimeExports.jsxs("footer",{className:"py-8 text-center text-gray-500 text-sm",children:["© ",new Date().getFullYear()," EDGEx by Ayushman. All rights reserved."]})]})}function App(){return jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Home,{})}),jsxRuntimeExports.jsx(Route,{path:"/careercrack",element:jsxRuntimeExports.jsx(CareerCrack,{})}),jsxRuntimeExports.jsx(Route,{path:"/moodmirror",element:jsxRuntimeExports.jsx(MoodMirror,{})}),jsxRuntimeExports.jsx(Route,{path:"/scholarships",element:jsxRuntimeExports.jsx(ScholarshipScout,{})}),jsxRuntimeExports.jsx(Route,{path:"/smartnotes",element:jsxRuntimeExports.jsx(SmartNotes,{})}),jsxRuntimeExports.jsx(Route,{path:"/voicefeedback",element:jsxRuntimeExports.jsx(VoiceFeedback,{})})," "]})})}ReactDOM.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));export{_typeof as _,commonjsGlobal$2 as c,getDefaultExportFromCjs as g};
